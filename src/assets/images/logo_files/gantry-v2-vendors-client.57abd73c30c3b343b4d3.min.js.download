(()=>{var nv=Object.defineProperty;var r=(B,l)=>nv(B,"name",{value:l,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-canvas","gantry-v2-vendors-single-channel-client","gantry-v2-vendors-async-sk-landing","gantry-v2-vendors-workflow-builder"],{7492298763:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},3778408185:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1514424064),h=d(285364620),p=d(5625132121),m=d(5640133965),a=d(5283324899),s=d(5368312762);l.addClsInstrumentationHandler=u.addClsInstrumentationHandler,l.addFidInstrumentationHandler=u.addFidInstrumentationHandler,l.addLcpInstrumentationHandler=u.addLcpInstrumentationHandler,l.addPerformanceInstrumentationHandler=u.addPerformanceInstrumentationHandler,l.addTtfbInstrumentationHandler=u.addTtfbInstrumentationHandler,l.addPerformanceEntries=h.addPerformanceEntries,l.startTrackingInteractions=h.startTrackingInteractions,l.startTrackingLongTasks=h.startTrackingLongTasks,l.startTrackingWebVitals=h.startTrackingWebVitals,l.addClickKeypressInstrumentationHandler=p.addClickKeypressInstrumentationHandler,l.addHistoryInstrumentationHandler=m.addHistoryInstrumentationHandler,l.SENTRY_XHR_DATA_KEY=a.SENTRY_XHR_DATA_KEY,l.addXhrInstrumentationHandler=a.addXhrInstrumentationHandler,l.startTrackingINP=s.startTrackingINP},5625132121:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(6496036490),p=1e3;let m,a,s;function i(g){const S="dom";u.addHandler(S,g),u.maybeInstrument(S,e)}r(i,"addClickKeypressInstrumentationHandler");function e(){if(!h.WINDOW.document)return;const g=u.triggerHandlers.bind(null,"dom"),S=o(g,!0);h.WINDOW.document.addEventListener("click",S,!1),h.WINDOW.document.addEventListener("keypress",S,!1),["EventTarget","Node"].forEach(c=>{const v=h.WINDOW[c]&&h.WINDOW[c].prototype;!v||!v.hasOwnProperty||!v.hasOwnProperty("addEventListener")||(u.fill(v,"addEventListener",function(_){return function(E,b,T){if(E==="click"||E=="keypress")try{const I=this,O=I.__sentry_instrumentation_handlers__=I.__sentry_instrumentation_handlers__||{},w=O[E]=O[E]||{refCount:0};if(!w.handler){const D=o(g);w.handler=D,_.call(this,E,D,T)}w.refCount++}catch{}return _.call(this,E,b,T)}}),u.fill(v,"removeEventListener",function(_){return function(E,b,T){if(E==="click"||E=="keypress")try{const I=this,O=I.__sentry_instrumentation_handlers__||{},w=O[E];w&&(w.refCount--,w.refCount<=0&&(_.call(this,E,w.handler,T),w.handler=void 0,delete O[E]),Object.keys(O).length===0&&delete I.__sentry_instrumentation_handlers__)}catch{}return _.call(this,E,b,T)}}))})}r(e,"instrumentDOM");function t(g){if(g.type!==a)return!1;try{if(!g.target||g.target._sentryId!==s)return!1}catch{}return!0}r(t,"isSimilarToLastCapturedEvent");function n(g,S){return g!=="keypress"?!1:!S||!S.tagName?!0:!(S.tagName==="INPUT"||S.tagName==="TEXTAREA"||S.isContentEditable)}r(n,"shouldSkipDOMEvent");function o(g,S=!1){return c=>{if(!c||c._sentryCaptured)return;const v=f(c);if(n(c.type,v))return;u.addNonEnumerableProperty(c,"_sentryCaptured",!0),v&&!v._sentryId&&u.addNonEnumerableProperty(v,"_sentryId",u.uuid4());const _=c.type==="keypress"?"input":c.type;t(c)||(g({event:c,name:_,global:S}),a=c.type,s=v?v._sentryId:void 0),clearTimeout(m),m=h.WINDOW.setTimeout(()=>{s=void 0,a=void 0},p)}}r(o,"makeDOMEventHandler");function f(g){try{return g.target}catch{return null}}r(f,"getEventTarget"),l.addClickKeypressInstrumentationHandler=i,l.instrumentDOM=e},5640133965:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(6496036490);let p;function m(s){const i="history";u.addHandler(i,s),u.maybeInstrument(i,a)}r(m,"addHistoryInstrumentationHandler");function a(){if(!u.supportsHistory())return;const s=h.WINDOW.onpopstate;h.WINDOW.onpopstate=function(...e){const t=h.WINDOW.location.href,n=p;p=t;const o={from:n,to:t};if(u.triggerHandlers("history",o),s)try{return s.apply(this,e)}catch{}};function i(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const o=p,f=String(n);p=f;const g={from:o,to:f};u.triggerHandlers("history",g)}return e.apply(this,t)}}r(i,"historyReplacementFunction"),u.fill(h.WINDOW.history,"pushState",i),u.fill(h.WINDOW.history,"replaceState",i)}r(a,"instrumentHistory"),l.addHistoryInstrumentationHandler=m},5283324899:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(6496036490),p="__sentry_xhr_v3__";function m(i){const e="xhr";u.addHandler(e,i),u.maybeInstrument(e,a)}r(m,"addXhrInstrumentationHandler");function a(){if(!h.WINDOW.XMLHttpRequest)return;const i=XMLHttpRequest.prototype;u.fill(i,"open",function(e){return function(...t){const n=u.timestampInSeconds()*1e3,o=u.isString(t[0])?t[0].toUpperCase():void 0,f=s(t[1]);if(!o||!f)return e.apply(this,t);this[p]={method:o,url:f,request_headers:{}},o==="POST"&&f.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const g=r(()=>{const S=this[p];if(S&&this.readyState===4){try{S.status_code=this.status}catch{}const c={endTimestamp:u.timestampInSeconds()*1e3,startTimestamp:n,xhr:this};u.triggerHandlers("xhr",c)}},"onreadystatechangeHandler");return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?u.fill(this,"onreadystatechange",function(S){return function(...c){return g(),S.apply(this,c)}}):this.addEventListener("readystatechange",g),u.fill(this,"setRequestHeader",function(S){return function(...c){const[v,_]=c,E=this[p];return E&&u.isString(v)&&u.isString(_)&&(E.request_headers[v.toLowerCase()]=_),S.apply(this,c)}}),e.apply(this,t)}}),u.fill(i,"send",function(e){return function(...t){const n=this[p];if(!n)return e.apply(this,t);t[0]!==void 0&&(n.body=t[0]);const o={startTimestamp:u.timestampInSeconds()*1e3,xhr:this};return u.triggerHandlers("xhr",o),e.apply(this,t)}})}r(a,"instrumentXHR");function s(i){if(u.isString(i))return i;try{return i.toString()}catch{}}r(s,"parseUrl"),l.SENTRY_XHR_DATA_KEY=p,l.addXhrInstrumentationHandler=m,l.instrumentXHR=a},285364620:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(7492298763),m=d(1514424064),a=d(6496036490),s=d(2929564606),i=d(2273798110),e=d(8451898068),t=2147483647;let n=0,o={},f,g;function S(){const ae=s.getBrowserPerformanceAPI();if(ae&&h.browserPerformanceTimeOrigin){ae.mark&&a.WINDOW.performance.mark("sentry-tracing-init");const ce=b(),Te=_(),ke=E(),tt=T();return()=>{ce(),Te(),ke(),tt()}}return()=>{}}r(S,"startTrackingWebVitals");function c(){m.addPerformanceInstrumentationHandler("longtask",({entries:ae})=>{for(const ce of ae){if(!u.getActiveSpan())return;const Te=s.msToSec(h.browserPerformanceTimeOrigin+ce.startTime),ke=s.msToSec(ce.duration),tt=u.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:Te,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});tt&&tt.end(Te+ke)}})}r(c,"startTrackingLongTasks");function v(){m.addPerformanceInstrumentationHandler("event",({entries:ae})=>{for(const ce of ae){if(!u.getActiveSpan())return;if(ce.name==="click"){const Te=s.msToSec(h.browserPerformanceTimeOrigin+ce.startTime),ke=s.msToSec(ce.duration),tt={name:h.htmlTreeAsString(ce.target),op:`ui.interaction.${ce.name}`,startTime:Te,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},At=h.getComponentName(ce.target);At&&(tt.attributes["ui.component_name"]=At);const Be=u.startInactiveSpan(tt);Be&&Be.end(Te+ke)}}})}r(v,"startTrackingInteractions");function _(){return m.addClsInstrumentationHandler(({metric:ae})=>{const ce=ae.entries[ae.entries.length-1];ce&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding CLS"),o.cls={value:ae.value,unit:""},g=ce)},!0)}r(_,"_trackCLS");function E(){return m.addLcpInstrumentationHandler(({metric:ae})=>{const ce=ae.entries[ae.entries.length-1];ce&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding LCP"),o.lcp={value:ae.value,unit:"millisecond"},f=ce)},!0)}r(E,"_trackLCP");function b(){return m.addFidInstrumentationHandler(({metric:ae})=>{const ce=ae.entries[ae.entries.length-1];if(!ce)return;const Te=s.msToSec(h.browserPerformanceTimeOrigin),ke=s.msToSec(ce.startTime);p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FID"),o.fid={value:ae.value,unit:"millisecond"},o["mark.fid"]={value:Te+ke,unit:"second"}})}r(b,"_trackFID");function T(){return m.addTtfbInstrumentationHandler(({metric:ae})=>{ae.entries[ae.entries.length-1]&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding TTFB"),o.ttfb={value:ae.value,unit:"millisecond"})})}r(T,"_trackTtfb");function I(ae){const ce=s.getBrowserPerformanceAPI();if(!ce||!a.WINDOW.performance.getEntries||!h.browserPerformanceTimeOrigin)return;p.DEBUG_BUILD&&h.logger.log("[Tracing] Adding & adjusting spans using Performance API");const Te=s.msToSec(h.browserPerformanceTimeOrigin),ke=ce.getEntries(),{op:tt,start_timestamp:At}=u.spanToJSON(ae);if(ke.slice(n).forEach(Be=>{const $e=s.msToSec(Be.startTime),Ze=s.msToSec(Be.duration);if(!(tt==="navigation"&&At&&Te+$e<At))switch(Be.entryType){case"navigation":{w(ae,Be,Te);break}case"mark":case"paint":case"measure":{O(ae,Be,$e,Ze,Te);const Je=e.getVisibilityWatcher(),dt=Be.startTime<Je.firstHiddenTime;Be.name==="first-paint"&&dt&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FP"),o.fp={value:Be.startTime,unit:"millisecond"}),Be.name==="first-contentful-paint"&&dt&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FCP"),o.fcp={value:Be.startTime,unit:"millisecond"});break}case"resource":{L(ae,Be,Be.name,$e,Ze,Te);break}}}),n=Math.max(ke.length-1,0),H(ae),tt==="pageload"){q(o),["fcp","fp","lcp"].forEach($e=>{if(!o[$e]||!At||Te>=At)return;const Ze=o[$e].value,Je=Te+s.msToSec(Ze),dt=Math.abs((Je-At)*1e3),Ot=dt-Ze;p.DEBUG_BUILD&&h.logger.log(`[Measurements] Normalized ${$e} from ${Ze} to ${dt} (${Ot})`),o[$e].value=dt});const Be=o["mark.fid"];Be&&o.fid&&(s.startAndEndSpan(ae,Be.value,Be.value+s.msToSec(o.fid.value),{name:"first input delay",op:"ui.action",attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete o["mark.fid"]),"fcp"in o||delete o.cls,Object.keys(o).forEach($e=>{u.setMeasurement($e,o[$e].value,o[$e].unit)}),K(ae)}f=void 0,g=void 0,o={}}r(I,"addPerformanceEntries");function O(ae,ce,Te,ke,tt){const At=tt+Te,Be=At+ke;return s.startAndEndSpan(ae,At,Be,{name:ce.name,op:ce.entryType,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"}}),At}r(O,"_addMeasureSpans");function w(ae,ce,Te){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(ke=>{D(ae,ce,ke,Te)}),D(ae,ce,"secureConnection",Te,"TLS/SSL","connectEnd"),D(ae,ce,"fetch",Te,"cache","domainLookupStart"),D(ae,ce,"domainLookup",Te,"DNS"),R(ae,ce,Te)}r(w,"_addNavigationSpans");function D(ae,ce,Te,ke,tt,At){const Be=At?ce[At]:ce[`${Te}End`],$e=ce[`${Te}Start`];!$e||!Be||s.startAndEndSpan(ae,ke+s.msToSec($e),ke+s.msToSec(Be),{op:"browser",name:tt||Te,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}r(D,"_addPerformanceNavigationTiming");function R(ae,ce,Te){ce.responseEnd&&(s.startAndEndSpan(ae,Te+s.msToSec(ce.requestStart),Te+s.msToSec(ce.responseEnd),{op:"browser",name:"request",attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),s.startAndEndSpan(ae,Te+s.msToSec(ce.responseStart),Te+s.msToSec(ce.responseEnd),{op:"browser",name:"response",attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}r(R,"_addRequest");function L(ae,ce,Te,ke,tt,At){if(ce.initiatorType==="xmlhttprequest"||ce.initiatorType==="fetch")return;const Be=h.parseUrl(Te),$e={[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};ee($e,ce,"transferSize","http.response_transfer_size"),ee($e,ce,"encodedBodySize","http.response_content_length"),ee($e,ce,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in ce&&($e["resource.render_blocking_status"]=ce.renderBlockingStatus),Be.protocol&&($e["url.scheme"]=Be.protocol.split(":").pop()),Be.host&&($e["server.address"]=Be.host),$e["url.same_origin"]=Te.includes(a.WINDOW.location.origin);const Ze=At+ke,Je=Ze+tt;s.startAndEndSpan(ae,Ze,Je,{name:Te.replace(a.WINDOW.location.origin,""),op:ce.initiatorType?`resource.${ce.initiatorType}`:"resource.other",attributes:$e})}r(L,"_addResourceSpans");function H(ae){const ce=a.WINDOW.navigator;if(!ce)return;const Te=ce.connection;Te&&(Te.effectiveType&&ae.setAttribute("effectiveConnectionType",Te.effectiveType),Te.type&&ae.setAttribute("connectionType",Te.type),s.isMeasurementValue(Te.rtt)&&(o["connection.rtt"]={value:Te.rtt,unit:"millisecond"})),s.isMeasurementValue(ce.deviceMemory)&&ae.setAttribute("deviceMemory",`${ce.deviceMemory} GB`),s.isMeasurementValue(ce.hardwareConcurrency)&&ae.setAttribute("hardwareConcurrency",String(ce.hardwareConcurrency))}r(H,"_trackNavigator");function K(ae){f&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding LCP Data"),f.element&&ae.setAttribute("lcp.element",h.htmlTreeAsString(f.element)),f.id&&ae.setAttribute("lcp.id",f.id),f.url&&ae.setAttribute("lcp.url",f.url.trim().slice(0,200)),ae.setAttribute("lcp.size",f.size)),g&&g.sources&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding CLS Data"),g.sources.forEach((ce,Te)=>ae.setAttribute(`cls.source.${Te+1}`,h.htmlTreeAsString(ce.node))))}r(K,"_tagMetricInfo");function ee(ae,ce,Te,ke){const tt=ce[Te];tt!=null&&tt<t&&(ae[ke]=tt)}r(ee,"setResourceEntrySizeData");function q(ae){const ce=i.getNavigationEntry();if(!ce)return;const{responseStart:Te,requestStart:ke}=ce;ke<=Te&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding TTFB Request Time"),ae["ttfb.requestTime"]={value:Te-ke,unit:"millisecond"})}r(q,"_addTtfbRequestTimeToMeasurements"),l._addMeasureSpans=O,l._addResourceSpans=L,l.addPerformanceEntries=I,l.startTrackingInteractions=v,l.startTrackingLongTasks=c,l.startTrackingWebVitals=S},5368312762:(B,l,d)=>{var{_optionalChain:u}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const h=d(8482989710),p=d(7563271614),m=d(1514424064),a=d(2929564606);function s(){if(a.getBrowserPerformanceAPI()&&p.browserPerformanceTimeOrigin){const n=e();return()=>{n()}}return()=>{}}r(s,"startTrackingINP");const i={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function e(){return m.addInpInstrumentationHandler(({metric:t})=>{const n=h.getClient();if(!n||t.value==null)return;const o=t.entries.find(K=>K.duration===t.value&&i[K.name]);if(!o)return;const f=i[o.name],g=n.getOptions(),S=a.msToSec(p.browserPerformanceTimeOrigin+o.startTime),c=a.msToSec(t.value),v=h.getCurrentScope(),_=h.getActiveSpan(),E=_?h.getRootSpan(_):void 0,b=E?h.spanToJSON(E).description:void 0,T=v.getUser(),I=n.getIntegrationByName("Replay"),O=I&&I.getReplayId(),w=T!==void 0?T.email||T.id||T.ip_address:void 0,D=u([v,"access",K=>K.getScopeData,"call",K=>K(),"access",K=>K.contexts,"optionalAccess",K=>K.profile,"optionalAccess",K=>K.profile_id]),R=p.htmlTreeAsString(o.target),L=p.dropUndefinedKeys({release:g.release,environment:g.environment,transaction:b,[h.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:t.value,user:w||void 0,profile_id:D||void 0,replay_id:O||void 0}),H=h.startInactiveSpan({name:R,op:`ui.interaction.${f}`,attributes:L,startTime:S,experimental:{standalone:!0}});H.addEvent("inp",{[h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t.value}),H.end(S+c)})}r(e,"_trackINP"),l.startTrackingINP=s},1514424064:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(7492298763),p=d(8724048708),m=d(5639023535),a=d(2086611485),s=d(5927711655),i=d(9526061972),e=d(1514170081),t={},n={};let o,f,g,S,c;function v(ce,Te=!1){return K("cls",ce,w,o,Te)}r(v,"addClsInstrumentationHandler");function _(ce,Te=!1){return K("lcp",ce,R,g,Te)}r(_,"addLcpInstrumentationHandler");function E(ce){return K("fid",ce,D,f)}r(E,"addFidInstrumentationHandler");function b(ce){return K("ttfb",ce,L,S)}r(b,"addTtfbInstrumentationHandler");function T(ce){return K("inp",ce,H,c)}r(T,"addInpInstrumentationHandler");function I(ce,Te){return q(ce,Te),n[ce]||(ee(ce),n[ce]=!0),ae(ce,Te)}r(I,"addPerformanceInstrumentationHandler");function O(ce,Te){const ke=t[ce];if(!(!ke||!ke.length))for(const tt of ke)try{tt(Te)}catch(At){h.DEBUG_BUILD&&u.logger.error(`Error while triggering instrumentation handler.
Type: ${ce}
Name: ${u.getFunctionName(tt)}
Error:`,At)}}r(O,"triggerHandlers");function w(){return p.onCLS(ce=>{O("cls",{metric:ce}),o=ce},{reportAllChanges:!0})}r(w,"instrumentCls");function D(){return m.onFID(ce=>{O("fid",{metric:ce}),f=ce})}r(D,"instrumentFid");function R(){return s.onLCP(ce=>{O("lcp",{metric:ce}),g=ce})}r(R,"instrumentLcp");function L(){return e.onTTFB(ce=>{O("ttfb",{metric:ce}),S=ce})}r(L,"instrumentTtfb");function H(){return a.onINP(ce=>{O("inp",{metric:ce}),c=ce})}r(H,"instrumentInp");function K(ce,Te,ke,tt,At=!1){q(ce,Te);let Be;return n[ce]||(Be=ke(),n[ce]=!0),tt&&Te({metric:tt}),ae(ce,Te,At?Be:void 0)}r(K,"addMetricObserver");function ee(ce){const Te={};ce==="event"&&(Te.durationThreshold=0),i.observe(ce,ke=>{O(ce,{entries:ke})},Te)}r(ee,"instrumentPerformanceObserver");function q(ce,Te){t[ce]=t[ce]||[],t[ce].push(Te)}r(q,"addHandler");function ae(ce,Te,ke){return()=>{ke&&ke();const tt=t[ce];if(!tt)return;const At=tt.indexOf(Te);At!==-1&&tt.splice(At,1)}}r(ae,"getCleanupCallback"),l.addClsInstrumentationHandler=v,l.addFidInstrumentationHandler=E,l.addInpInstrumentationHandler=T,l.addLcpInstrumentationHandler=_,l.addPerformanceInstrumentationHandler=I,l.addTtfbInstrumentationHandler=b},6496036490:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const h=d(7563271614).GLOBAL_OBJ;l.WINDOW=h},2929564606:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(6496036490);function p(i){return typeof i=="number"&&isFinite(i)}r(p,"isMeasurementValue");function m(i,e,t,{...n}){const o=u.spanToJSON(i).start_timestamp;return o&&o>e&&typeof i.updateStartTime=="function"&&i.updateStartTime(e),u.withActiveSpan(i,()=>{const f=u.startInactiveSpan({startTime:e,...n});return f&&f.end(t),f})}r(m,"startAndEndSpan");function a(){return h.WINDOW&&h.WINDOW.addEventListener&&h.WINDOW.performance}r(a,"getBrowserPerformanceAPI");function s(i){return i/1e3}r(s,"msToSec"),l.getBrowserPerformanceAPI=a,l.isMeasurementValue=p,l.msToSec=s,l.startAndEndSpan=m},8724048708:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9035861842),h=d(4479988250),p=d(9526061972),m=d(7603883117),a=d(7841494492),s=d(2741739498),i=[.1,.25],e=r((t,n={})=>{s.onFCP(a.runOnce(()=>{const o=h.initMetric("CLS",0);let f,g=0,S=[];const c=r(_=>{_.forEach(E=>{if(!E.hadRecentInput){const b=S[0],T=S[S.length-1];g&&E.startTime-T.startTime<1e3&&E.startTime-b.startTime<5e3?(g+=E.value,S.push(E)):(g=E.value,S=[E])}}),g>o.value&&(o.value=g,o.entries=S,f())},"handleEntries"),v=p.observe("layout-shift",c);v&&(f=u.bindReporter(t,o,i,n.reportAllChanges),m.onHidden(()=>{c(v.takeRecords()),f(!0)}),setTimeout(f,0))}))},"onCLS");l.CLSThresholds=i,l.onCLS=e},5639023535:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9035861842),h=d(8451898068),p=d(4479988250),m=d(9526061972),a=d(7603883117),s=d(7841494492),i=d(3420582863),e=[100,300],t=r((n,o={})=>{i.whenActivated(()=>{const f=h.getVisibilityWatcher(),g=p.initMetric("FID");let S;const c=r(E=>{E.startTime<f.firstHiddenTime&&(g.value=E.processingStart-E.startTime,g.entries.push(E),S(!0))},"handleEntry"),v=r(E=>{E.forEach(c)},"handleEntries"),_=m.observe("first-input",v);S=u.bindReporter(n,g,e,o.reportAllChanges),_&&a.onHidden(s.runOnce(()=>{v(_.takeRecords()),_.disconnect()}))})},"onFID");l.FIDThresholds=e,l.onFID=t},2086611485:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490),h=d(9035861842),p=d(4479988250),m=d(9526061972),a=d(7603883117),s=d(6842089089),i=d(3420582863),e=[200,500],t=0,n=r(()=>s.getInteractionCount()-t,"getInteractionCountForNavigation"),o=10,f=[],g={},S=r(_=>{const E=f[f.length-1],b=g[_.interactionId];if(b||f.length<o||_.duration>E.latency){if(b)b.entries.push(_),b.latency=Math.max(b.latency,_.duration);else{const T={id:_.interactionId,latency:_.duration,entries:[_]};g[T.id]=T,f.push(T)}f.sort((T,I)=>I.latency-T.latency),f.splice(o).forEach(T=>{delete g[T.id]})}},"processEntry"),c=r(()=>{const _=Math.min(f.length-1,Math.floor(n()/50));return f[_]},"estimateP98LongestInteraction"),v=r((_,E={})=>{i.whenActivated(()=>{s.initInteractionCountPolyfill();const b=p.initMetric("INP");let T;const I=r(w=>{w.forEach(R=>{R.interactionId&&S(R),R.entryType==="first-input"&&!f.some(H=>H.entries.some(K=>R.duration===K.duration&&R.startTime===K.startTime))&&S(R)});const D=c();D&&D.latency!==b.value&&(b.value=D.latency,b.entries=D.entries,T())},"handleEntries"),O=m.observe("event",I,{durationThreshold:E.durationThreshold!=null?E.durationThreshold:40});T=h.bindReporter(_,b,e,E.reportAllChanges),O&&("PerformanceEventTiming"in u.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&O.observe({type:"first-input",buffered:!0}),a.onHidden(()=>{I(O.takeRecords()),b.value<0&&n()>0&&(b.value=0,b.entries=[]),T(!0)}))})},"onINP");l.INPThresholds=e,l.onINP=v},5927711655:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490),h=d(9035861842),p=d(2520992508),m=d(8451898068),a=d(4479988250),s=d(9526061972),i=d(7603883117),e=d(7841494492),t=d(3420582863),n=[2500,4e3],o={},f=r((g,S={})=>{t.whenActivated(()=>{const c=m.getVisibilityWatcher(),v=a.initMetric("LCP");let _;const E=r(T=>{const I=T[T.length-1];I&&I.startTime<c.firstHiddenTime&&(v.value=Math.max(I.startTime-p.getActivationStart(),0),v.entries=[I],_())},"handleEntries"),b=s.observe("largest-contentful-paint",E);if(b){_=h.bindReporter(g,v,n,S.reportAllChanges);const T=e.runOnce(()=>{o[v.id]||(E(b.takeRecords()),b.disconnect(),o[v.id]=!0,_(!0))});["keydown","click"].forEach(I=>{u.WINDOW.document&&addEventListener(I,()=>setTimeout(T,0),!0)}),i.onHidden(T)}})},"onLCP");l.LCPThresholds=n,l.onLCP=f},9035861842:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r((h,p)=>h>p[1]?"poor":h>p[0]?"needs-improvement":"good","getRating"),u=r((h,p,m,a)=>{let s,i;return e=>{p.value>=0&&(e||a)&&(i=p.value-(s||0),(i||s===void 0)&&(s=p.value,p.delta=i,p.rating=d(p.value,m),h(p)))}},"bindReporter");l.bindReporter=u},8117347597:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r(()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,"generateUniqueID");l.generateUniqueID=d},2520992508:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(2273798110),h=r(()=>{const p=u.getNavigationEntry();return p&&p.activationStart||0},"getActivationStart");l.getActivationStart=h},2273798110:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490),h=r(()=>u.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],"getNavigationEntry");l.getNavigationEntry=h},8451898068:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490);let h=-1;const p=r(()=>{h=u.WINDOW.document.visibilityState==="hidden"&&!u.WINDOW.document.prerendering?0:1/0},"initHiddenTime"),m=r(i=>{u.WINDOW.document.visibilityState==="hidden"&&h>-1&&(h=i.type==="visibilitychange"?i.timeStamp:0,removeEventListener("visibilitychange",m,!0),removeEventListener("prerenderingchange",m,!0))},"onVisibilityUpdate"),a=r(()=>{addEventListener("visibilitychange",m,!0),addEventListener("prerenderingchange",m,!0)},"addChangeListeners"),s=r(()=>(u.WINDOW.document&&h<0&&(p(),a()),{get firstHiddenTime(){return h}}),"getVisibilityWatcher");l.getVisibilityWatcher=s},4479988250:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490),h=d(8117347597),p=d(2520992508),m=d(2273798110),a=r((s,i)=>{const e=m.getNavigationEntry();let t="navigate";return e&&(u.WINDOW.document&&u.WINDOW.document.prerendering||p.getActivationStart()>0?t="prerender":u.WINDOW.document&&u.WINDOW.document.wasDiscarded?t="restore":e.type&&(t=e.type.replace(/_/g,"-"))),{name:s,value:typeof i>"u"?-1:i,rating:"good",delta:0,entries:[],id:h.generateUniqueID(),navigationType:t}},"initMetric");l.initMetric=a},9526061972:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r((u,h,p)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(u)){const m=new PerformanceObserver(a=>{Promise.resolve().then(()=>{h(a.getEntries())})});return m.observe(Object.assign({type:u,buffered:!0},p||{})),m}}catch{}},"observe");l.observe=d},7603883117:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490),h=r(p=>{const m=r(a=>{(a.type==="pagehide"||u.WINDOW.document&&u.WINDOW.document.visibilityState==="hidden")&&p(a)},"onHiddenOrPageHide");u.WINDOW.document&&(addEventListener("visibilitychange",m,!0),addEventListener("pagehide",m,!0))},"onHidden");l.onHidden=h},6842089089:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9526061972);let h=0,p=1/0,m=0;const a=r(t=>{t.forEach(n=>{n.interactionId&&(p=Math.min(p,n.interactionId),m=Math.max(m,n.interactionId),h=m?(m-p)/7+1:0)})},"updateEstimate");let s;const i=r(()=>s?h:performance.interactionCount||0,"getInteractionCount"),e=r(()=>{"interactionCount"in performance||s||(s=u.observe("event",a,{type:"event",buffered:!0,durationThreshold:0}))},"initInteractionCountPolyfill");l.getInteractionCount=i,l.initInteractionCountPolyfill=e},7841494492:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r(u=>{let h=!1;return p=>{h||(u(p),h=!0)}},"runOnce");l.runOnce=d},3420582863:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490),h=r(p=>{u.WINDOW.document&&u.WINDOW.document.prerendering?addEventListener("prerenderingchange",()=>p(),!0):p()},"whenActivated");l.whenActivated=h},2741739498:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9035861842),h=d(2520992508),p=d(8451898068),m=d(4479988250),a=d(9526061972),s=d(3420582863),i=[1800,3e3],e=r((t,n={})=>{s.whenActivated(()=>{const o=p.getVisibilityWatcher(),f=m.initMetric("FCP");let g;const S=r(v=>{v.forEach(_=>{_.name==="first-contentful-paint"&&(c.disconnect(),_.startTime<o.firstHiddenTime&&(f.value=Math.max(_.startTime-h.getActivationStart(),0),f.entries.push(_),g(!0)))})},"handleEntries"),c=a.observe("paint",S);c&&(g=u.bindReporter(t,f,i,n.reportAllChanges))})},"onFCP");l.FCPThresholds=i,l.onFCP=e},1514170081:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6496036490),h=d(9035861842),p=d(2520992508),m=d(2273798110),a=d(4479988250),s=d(3420582863),i=[800,1800],e=r(n=>{u.WINDOW.document&&u.WINDOW.document.prerendering?s.whenActivated(()=>e(n)):u.WINDOW.document&&u.WINDOW.document.readyState!=="complete"?addEventListener("load",()=>e(n),!0):setTimeout(n,0)},"whenReady"),t=r((n,o={})=>{const f=a.initMetric("TTFB"),g=h.bindReporter(n,f,i,o.reportAllChanges);e(()=>{const S=m.getNavigationEntry();if(S){const c=S.responseStart;if(c<=0||c>performance.now())return;f.value=Math.max(c-p.getActivationStart(),0),f.entries=[S],g(!0)}})},"onTTFB");l.TTFBThresholds=i,l.onTTFB=t},6049995776:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ,m=p.document,a=p.navigator,s="Report a Bug",i="Cancel",e="Send Bug Report",t="Confirm",n="Report a Bug",o="your.email@example.org",f="Email",g="What's the bug? What did you expect?",S="Description",c="Your Name",v="Name",_="Thank you for your report!",E="(required)",b="Add a screenshot",T="Remove screenshot",I="widget",O="api",w=5e3,D=r((de,_e={includeReplay:!0})=>{if(!de.message)throw new Error("Unable to submit feedback with empty message");const Pe=u.getClient();if(!Pe)throw new Error("No client setup, cannot send feedback.");const rt=u.captureFeedback({source:O,url:h.getLocationHref(),...de},_e);return new Promise((_t,Dt)=>{const pn=setTimeout(()=>Dt("Unable to determine if Feedback was correctly sent."),5e3);Pe.on("afterSendEvent",(In,Nn)=>{if(In.event_id===rt){if(clearTimeout(pn),Nn&&typeof Nn.statusCode=="number"&&(Nn.statusCode<200||Nn.statusCode>=300))return Nn.statusCode===0?Dt("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):Dt("Unable to send Feedback. Invalid response from server.");_t(rt)}})})},"sendFeedback"),R=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function L(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a.userAgent)||!isSecureContext)}r(L,"isScreenshotSupported");function H(de,_e){return{...de,..._e,onFormOpen:()=>{_e.onFormOpen&&_e.onFormOpen(),de.onFormOpen&&de.onFormOpen()},onFormClose:()=>{_e.onFormClose&&_e.onFormClose(),de.onFormClose&&de.onFormClose()},onSubmitSuccess:Pe=>{_e.onSubmitSuccess&&_e.onSubmitSuccess(Pe),de.onSubmitSuccess&&de.onSubmitSuccess(Pe)},onSubmitError:Pe=>{_e.onSubmitError&&_e.onSubmitError(Pe),de.onSubmitError&&de.onSubmitError(Pe)},onFormSubmitted:()=>{_e.onFormSubmitted&&_e.onFormSubmitted(),de.onFormSubmitted&&de.onFormSubmitted()},themeDark:{...de.themeDark,..._e.themeDark},themeLight:{...de.themeLight,..._e.themeLight}}}r(H,"mergeOptions");function K(){const de=m.createElement("style");return de.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,de}r(K,"createActorStyles");function ee(de,_e){return Object.entries(_e).forEach(([Pe,rt])=>{de.setAttributeNS(null,Pe,rt)}),de}r(ee,"setAttributesNS");const q=20,ae="http://www.w3.org/2000/svg";function ce(){const de=r(In=>p.document.createElementNS(ae,In),"createElementNS"),_e=ee(de("svg"),{width:`${q}`,height:`${q}`,viewBox:`0 0 ${q} ${q}`,fill:"var(--foreground)"}),Pe=ee(de("g"),{clipPath:"url(#clip0_57_80)"}),rt=ee(de("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});_e.appendChild(Pe).appendChild(rt);const _t=de("defs"),Dt=ee(de("clipPath"),{id:"clip0_57_80"}),pn=ee(de("rect"),{width:`${q}`,height:`${q}`,fill:"white"});return Dt.appendChild(pn),_t.appendChild(Dt),_e.appendChild(_t).appendChild(Dt).appendChild(pn),_e}r(ce,"FeedbackIcon");function Te({triggerLabel:de,shadow:_e}){const Pe=m.createElement("button");if(Pe.type="button",Pe.className="widget__actor",Pe.ariaHidden="false",Pe.ariaLabel=de,Pe.appendChild(ce()),de){const _t=m.createElement("span");_t.appendChild(m.createTextNode(de)),Pe.appendChild(_t)}const rt=K();return{el:Pe,appendToDom(){_e.appendChild(rt),_e.appendChild(Pe)},removeFromDom(){_e.removeChild(Pe),_e.removeChild(rt)},show(){Pe.ariaHidden="false"},hide(){Pe.ariaHidden="true"}}}r(Te,"Actor");const ke="rgba(88, 74, 192, 1)",tt={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:ke,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},At={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:ke,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(41, 35, 47, 0.5)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Be(de){return`
  --foreground: ${de.foreground};
  --background: ${de.background};
  --accent-foreground: ${de.accentForeground};
  --accent-background: ${de.accentBackground};
  --success-color: ${de.successColor};
  --error-color: ${de.errorColor};
  --border: ${de.border};
  --box-shadow: ${de.boxShadow};
  --outline: ${de.outline};
  --interactive-filter: ${de.interactiveFilter};
  `}r(Be,"getThemedCssVariables");function $e({colorScheme:de,themeDark:_e,themeLight:Pe}){const rt=m.createElement("style");return rt.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${Be(de==="dark"?{...At,..._e}:{...tt,...Pe})}
}

${de==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Be({...At,..._e})}
  }
}`:""}
}
`,rt}r($e,"createMainStyles");const Ze=r(({lazyLoadIntegration:de,getModalIntegration:_e,getScreenshotIntegration:Pe})=>r(({id:_t="sentry-feedback",showBranding:Dt=!0,autoInject:pn=!0,showEmail:In=!0,showName:Nn=!0,enableScreenshot:Tn=!0,useSentryUser:di={email:"email",name:"username"},isNameRequired:an=!1,isEmailRequired:ki=!1,colorScheme:Zn="system",themeLight:lr={},themeDark:br={},addScreenshotButtonLabel:Cr=b,cancelButtonLabel:pi=i,confirmButtonLabel:vi=t,emailLabel:Di=f,emailPlaceholder:Yi=o,formTitle:Or=n,isRequiredLabel:Zr=E,messageLabel:Mi=S,messagePlaceholder:ro=g,nameLabel:pr=v,namePlaceholder:qr=c,removeScreenshotButtonLabel:es=T,submitButtonLabel:is=e,successMessageText:Jo=_,triggerLabel:Yo=s,onFormOpen:ts,onFormClose:Vo,onSubmitSuccess:uo,onSubmitError:bo,onFormSubmitted:Io}={})=>{const so={id:_t,autoInject:pn,showBranding:Dt,isEmailRequired:ki,isNameRequired:an,showEmail:In,showName:Nn,enableScreenshot:Tn,useSentryUser:di,colorScheme:Zn,themeDark:br,themeLight:lr,triggerLabel:Yo,cancelButtonLabel:pi,submitButtonLabel:is,confirmButtonLabel:vi,formTitle:Or,emailLabel:Di,emailPlaceholder:Yi,messageLabel:Mi,messagePlaceholder:ro,nameLabel:pr,namePlaceholder:qr,successMessageText:Jo,isRequiredLabel:Zr,addScreenshotButtonLabel:Cr,removeScreenshotButtonLabel:es,onFormClose:Vo,onFormOpen:ts,onSubmitError:bo,onSubmitSuccess:uo,onFormSubmitted:Io};let ao=null,Gr=[];const Co=r(Vr=>{if(!ao){const oo=m.createElement("div");oo.id=String(Vr.id),m.body.appendChild(oo),ao=oo.attachShadow({mode:"open"}),ao.appendChild($e(Vr))}return ao},"_createShadow"),Ts=r(async(Vr,oo,Yr)=>{const mo=u.getClient(),lo=mo&&mo.getIntegrationByName(Vr);if(lo)return lo;const oe=(oo&&oo()||await de(Yr))();return mo&&mo.addIntegration(oe),oe},"_findIntegration"),Is=r(async Vr=>{const oo=Vr.enableScreenshot&&L(),[Yr,mo]=await Promise.all([Ts("FeedbackModal",_e,"feedbackModalIntegration"),oo?Ts("FeedbackScreenshot",Pe,"feedbackScreenshotIntegration"):void 0]);if(!Yr)throw R&&h.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");return oo&&!mo&&R&&h.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots."),Yr.createDialog({options:Vr,screenshotIntegration:oo?mo:void 0,sendFeedback:D,shadow:Co(Vr)})},"_loadAndRenderDialog"),po=r((Vr,oo={})=>{const Yr=H(so,oo),mo=typeof Vr=="string"?m.querySelector(Vr):typeof Vr.addEventListener=="function"?Vr:null;if(!mo)throw R&&h.logger.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let lo=null;const ws=r(async()=>{lo||(lo=await Is({...Yr,onFormClose:()=>{lo&&lo.close(),Yr.onFormClose&&Yr.onFormClose()},onFormSubmitted:()=>{lo&&lo.removeFromDom(),Yr.onFormSubmitted&&Yr.onFormSubmitted()}})),lo.appendToDom(),lo.open()},"handleClick");mo.addEventListener("click",ws);const oe=r(()=>{Gr=Gr.filter(fe=>fe!==oe),lo&&lo.removeFromDom(),lo=null,mo.removeEventListener("click",ws)},"unsubscribe");return Gr.push(oe),oe},"_attachTo"),Ho=r((Vr={})=>{const oo=Co(so),Yr=Te({triggerLabel:so.triggerLabel,shadow:oo}),mo=H(so,{...Vr,onFormOpen(){Yr.hide()},onFormClose(){Yr.show()},onFormSubmitted(){Yr.show()}});return po(Yr.el,mo),Yr},"_createActor");return{name:"Feedback",setupOnce(){!h.isBrowser()||!so.autoInject||Ho().appendToDom()},attachTo:po,createWidget(Vr={}){const oo=Ho(H(so,Vr));return oo.appendToDom(),oo},async createForm(Vr={}){return Is(H(so,Vr))},remove(){ao&&(ao.parentElement&&ao.parentElement.remove(),ao=null),Gr.forEach(Vr=>Vr()),Gr=[]}}},"feedbackIntegration"),"buildFeedbackIntegration");function Je(){const de=u.getClient();return de&&de.getIntegrationByName("Feedback")}r(Je,"getFeedback");var dt,Ot,Nt,Ve,He,ct,yt,it={},nn=[],Xt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dn=Array.isArray;function bn(de,_e){for(var Pe in _e)de[Pe]=_e[Pe];return de}r(bn,"v$1");function Rn(de){var _e=de.parentNode;_e&&_e.removeChild(de)}r(Rn,"p$1");function Zt(de,_e,Pe){var rt,_t,Dt,pn={};for(Dt in _e)Dt=="key"?rt=_e[Dt]:Dt=="ref"?_t=_e[Dt]:pn[Dt]=_e[Dt];if(arguments.length>2&&(pn.children=arguments.length>3?dt.call(arguments,2):Pe),typeof de=="function"&&de.defaultProps!=null)for(Dt in de.defaultProps)pn[Dt]===void 0&&(pn[Dt]=de.defaultProps[Dt]);return Mn(de,pn,rt,_t,null)}r(Zt,"y$1");function Mn(de,_e,Pe,rt,_t){var Dt={type:de,props:_e,key:Pe,ref:rt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:_t??++Nt,__i:-1,__u:0};return _t==null&&Ot.vnode!=null&&Ot.vnode(Dt),Dt}r(Mn,"d$1");function Wi(de){return de.children}r(Wi,"g");function Jn(de,_e){this.props=de,this.context=_e}r(Jn,"b");function zn(de,_e){if(_e==null)return de.__?zn(de.__,de.__i+1):null;for(var Pe;_e<de.__k.length;_e++)if((Pe=de.__k[_e])!=null&&Pe.__e!=null)return Pe.__e;return typeof de.type=="function"?zn(de):null}r(zn,"m$1");function En(de,_e,Pe){var rt,_t=de.__v,Dt=_t.__e,pn=de.__P;if(pn)return(rt=bn({},_t)).__v=_t.__v+1,Ot.vnode&&Ot.vnode(rt),ve(pn,rt,_t,de.__n,pn.ownerSVGElement!==void 0,32&_t.__u?[Dt]:null,_e,Dt??zn(_t),!!(32&_t.__u),Pe),rt.__.__k[rt.__i]=rt,rt.__d=void 0,rt.__e!=Dt&&sn(rt),rt}r(En,"w$1");function sn(de){var _e,Pe;if((de=de.__)!=null&&de.__c!=null){for(de.__e=de.__c.base=null,_e=0;_e<de.__k.length;_e++)if((Pe=de.__k[_e])!=null&&Pe.__e!=null){de.__e=de.__c.base=Pe.__e;break}return sn(de)}}r(sn,"k$1");function oi(de){(!de.__d&&(de.__d=!0)&&Ve.push(de)&&!rn.__r++||He!==Ot.debounceRendering)&&((He=Ot.debounceRendering)||ct)(rn)}r(oi,"x$1");function rn(){var de,_e,Pe,rt=[],_t=[];for(Ve.sort(yt);de=Ve.shift();)de.__d&&(Pe=Ve.length,_e=En(de,rt,_t)||_e,Pe===0||Ve.length>Pe?(et(rt,_e,_t),_t.length=rt.length=0,_e=void 0,Ve.sort(yt)):_e&&Ot.__c&&Ot.__c(_e,nn));_e&&et(rt,_e,_t),rn.__r=0}r(rn,"C$1");function cn(de,_e,Pe,rt,_t,Dt,pn,In,Nn,Tn,di){var an,ki,Zn,lr,br,Cr=rt&&rt.__k||nn,pi=_e.length;for(Pe.__d=Nn,Wt(Pe,_e,Cr),Nn=Pe.__d,an=0;an<pi;an++)(Zn=Pe.__k[an])!=null&&typeof Zn!="boolean"&&typeof Zn!="function"&&(ki=Zn.__i===-1?it:Cr[Zn.__i]||it,Zn.__i=an,ve(de,Zn,ki,_t,Dt,pn,In,Nn,Tn,di),lr=Zn.__e,Zn.ref&&ki.ref!=Zn.ref&&(ki.ref&&ne(ki.ref,null,Zn),di.push(Zn.ref,Zn.__c||lr,Zn)),br==null&&lr!=null&&(br=lr),65536&Zn.__u||ki.__k===Zn.__k?Nn=J(Zn,Nn,de):typeof Zn.type=="function"&&Zn.__d!==void 0?Nn=Zn.__d:lr&&(Nn=lr.nextSibling),Zn.__d=void 0,Zn.__u&=-196609);Pe.__d=Nn,Pe.__e=br}r(cn,"P");function Wt(de,_e,Pe){var rt,_t,Dt,pn,In,Nn=_e.length,Tn=Pe.length,di=Tn,an=0;for(de.__k=[],rt=0;rt<Nn;rt++)(_t=de.__k[rt]=(_t=_e[rt])==null||typeof _t=="boolean"||typeof _t=="function"?null:typeof _t=="string"||typeof _t=="number"||typeof _t=="bigint"||_t.constructor==String?Mn(null,_t,null,null,_t):dn(_t)?Mn(Wi,{children:_t},null,null,null):_t.constructor===void 0&&_t.__b>0?Mn(_t.type,_t.props,_t.key,_t.ref?_t.ref:null,_t.__v):_t)!=null?(_t.__=de,_t.__b=de.__b+1,In=Xe(_t,Pe,pn=rt+an,di),_t.__i=In,Dt=null,In!==-1&&(di--,(Dt=Pe[In])&&(Dt.__u|=131072)),Dt==null||Dt.__v===null?(In==-1&&an--,typeof _t.type!="function"&&(_t.__u|=65536)):In!==pn&&(In===pn+1?an++:In>pn?di>Nn-pn?an+=In-pn:an--:an=In<pn&&In==pn-1?In-pn:0,In!==rt+an&&(_t.__u|=65536))):(Dt=Pe[rt])&&Dt.key==null&&Dt.__e&&(Dt.__e==de.__d&&(de.__d=zn(Dt)),Me(Dt,Dt,!1),Pe[rt]=null,di--);if(di)for(rt=0;rt<Tn;rt++)(Dt=Pe[rt])!=null&&!(131072&Dt.__u)&&(Dt.__e==de.__d&&(de.__d=zn(Dt)),Me(Dt,Dt))}r(Wt,"S");function J(de,_e,Pe){var rt,_t;if(typeof de.type=="function"){for(rt=de.__k,_t=0;rt&&_t<rt.length;_t++)rt[_t]&&(rt[_t].__=de,_e=J(rt[_t],_e,Pe));return _e}de.__e!=_e&&(Pe.insertBefore(de.__e,_e||null),_e=de.__e);do _e=_e&&_e.nextSibling;while(_e!=null&&_e.nodeType===8);return _e}r(J,"$");function Xe(de,_e,Pe,rt){var _t=de.key,Dt=de.type,pn=Pe-1,In=Pe+1,Nn=_e[Pe];if(Nn===null||Nn&&_t==Nn.key&&Dt===Nn.type)return Pe;if(rt>(Nn!=null&&!(131072&Nn.__u)?1:0))for(;pn>=0||In<_e.length;){if(pn>=0){if((Nn=_e[pn])&&!(131072&Nn.__u)&&_t==Nn.key&&Dt===Nn.type)return pn;pn--}if(In<_e.length){if((Nn=_e[In])&&!(131072&Nn.__u)&&_t==Nn.key&&Dt===Nn.type)return In;In++}}return-1}r(Xe,"I");function nt(de,_e,Pe){_e[0]==="-"?de.setProperty(_e,Pe??""):de[_e]=Pe==null?"":typeof Pe!="number"||Xt.test(_e)?Pe:Pe+"px"}r(nt,"T");function st(de,_e,Pe,rt,_t){var Dt;e:if(_e==="style")if(typeof Pe=="string")de.style.cssText=Pe;else{if(typeof rt=="string"&&(de.style.cssText=rt=""),rt)for(_e in rt)Pe&&_e in Pe||nt(de.style,_e,"");if(Pe)for(_e in Pe)rt&&Pe[_e]===rt[_e]||nt(de.style,_e,Pe[_e])}else if(_e[0]==="o"&&_e[1]==="n")Dt=_e!==(_e=_e.replace(/(PointerCapture)$|Capture$/i,"$1")),_e=_e.toLowerCase()in de?_e.toLowerCase().slice(2):_e.slice(2),de.l||(de.l={}),de.l[_e+Dt]=Pe,Pe?rt?Pe.u=rt.u:(Pe.u=Date.now(),de.addEventListener(_e,Dt?It:pt,Dt)):de.removeEventListener(_e,Dt?It:pt,Dt);else{if(_t)_e=_e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(_e!=="width"&&_e!=="height"&&_e!=="href"&&_e!=="list"&&_e!=="form"&&_e!=="tabIndex"&&_e!=="download"&&_e!=="rowSpan"&&_e!=="colSpan"&&_e!=="role"&&_e in de)try{de[_e]=Pe??"";break e}catch{}typeof Pe=="function"||(Pe==null||Pe===!1&&_e[4]!=="-"?de.removeAttribute(_e):de.setAttribute(_e,Pe))}}r(st,"A");function pt(de){if(this.l){var _e=this.l[de.type+!1];if(de.t){if(de.t<=_e.u)return}else de.t=Date.now();return _e(Ot.event?Ot.event(de):de)}}r(pt,"D$1");function It(de){if(this.l)return this.l[de.type+!0](Ot.event?Ot.event(de):de)}r(It,"L");function ve(de,_e,Pe,rt,_t,Dt,pn,In,Nn,Tn){var di,an,ki,Zn,lr,br,Cr,pi,vi,Di,Yi,Or,Zr,Mi,ro,pr=_e.type;if(_e.constructor!==void 0)return null;128&Pe.__u&&(Nn=!!(32&Pe.__u),Dt=[In=_e.__e=Pe.__e]),(di=Ot.__b)&&di(_e);e:if(typeof pr=="function")try{if(pi=_e.props,vi=(di=pr.contextType)&&rt[di.__c],Di=di?vi?vi.props.value:di.__:rt,Pe.__c?Cr=(an=_e.__c=Pe.__c).__=an.__E:("prototype"in pr&&pr.prototype.render?_e.__c=an=new pr(pi,Di):(_e.__c=an=new Jn(pi,Di),an.constructor=pr,an.render=Re),vi&&vi.sub(an),an.props=pi,an.state||(an.state={}),an.context=Di,an.__n=rt,ki=an.__d=!0,an.__h=[],an._sb=[]),an.__s==null&&(an.__s=an.state),pr.getDerivedStateFromProps!=null&&(an.__s==an.state&&(an.__s=bn({},an.__s)),bn(an.__s,pr.getDerivedStateFromProps(pi,an.__s))),Zn=an.props,lr=an.state,an.__v=_e,ki)pr.getDerivedStateFromProps==null&&an.componentWillMount!=null&&an.componentWillMount(),an.componentDidMount!=null&&an.__h.push(an.componentDidMount);else{if(pr.getDerivedStateFromProps==null&&pi!==Zn&&an.componentWillReceiveProps!=null&&an.componentWillReceiveProps(pi,Di),!an.__e&&(an.shouldComponentUpdate!=null&&an.shouldComponentUpdate(pi,an.__s,Di)===!1||_e.__v===Pe.__v)){for(_e.__v!==Pe.__v&&(an.props=pi,an.state=an.__s,an.__d=!1),_e.__e=Pe.__e,_e.__k=Pe.__k,_e.__k.forEach(function(qr){qr&&(qr.__=_e)}),Yi=0;Yi<an._sb.length;Yi++)an.__h.push(an._sb[Yi]);an._sb=[],an.__h.length&&pn.push(an);break e}an.componentWillUpdate!=null&&an.componentWillUpdate(pi,an.__s,Di),an.componentDidUpdate!=null&&an.__h.push(function(){an.componentDidUpdate(Zn,lr,br)})}if(an.context=Di,an.props=pi,an.__P=de,an.__e=!1,Or=Ot.__r,Zr=0,"prototype"in pr&&pr.prototype.render){for(an.state=an.__s,an.__d=!1,Or&&Or(_e),di=an.render(an.props,an.state,an.context),Mi=0;Mi<an._sb.length;Mi++)an.__h.push(an._sb[Mi]);an._sb=[]}else do an.__d=!1,Or&&Or(_e),di=an.render(an.props,an.state,an.context),an.state=an.__s;while(an.__d&&++Zr<25);an.state=an.__s,an.getChildContext!=null&&(rt=bn(bn({},rt),an.getChildContext())),ki||an.getSnapshotBeforeUpdate==null||(br=an.getSnapshotBeforeUpdate(Zn,lr)),cn(de,dn(ro=di!=null&&di.type===Wi&&di.key==null?di.props.children:di)?ro:[ro],_e,Pe,rt,_t,Dt,pn,In,Nn,Tn),an.base=_e.__e,_e.__u&=-161,an.__h.length&&pn.push(an),Cr&&(an.__E=an.__=null)}catch(qr){_e.__v=null,Nn||Dt!=null?(_e.__e=In,_e.__u|=Nn?160:32,Dt[Dt.indexOf(In)]=null):(_e.__e=Pe.__e,_e.__k=Pe.__k),Ot.__e(qr,_e,Pe)}else Dt==null&&_e.__v===Pe.__v?(_e.__k=Pe.__k,_e.__e=Pe.__e):_e.__e=G(Pe.__e,_e,Pe,rt,_t,Dt,pn,Nn,Tn);(di=Ot.diffed)&&di(_e)}r(ve,"M");function et(de,_e,Pe){for(var rt=0;rt<Pe.length;rt++)ne(Pe[rt],Pe[++rt],Pe[++rt]);Ot.__c&&Ot.__c(_e,de),de.some(function(_t){try{de=_t.__h,_t.__h=[],de.some(function(Dt){Dt.call(_t)})}catch(Dt){Ot.__e(Dt,_t.__v)}})}r(et,"j$1");function G(de,_e,Pe,rt,_t,Dt,pn,In,Nn){var Tn,di,an,ki,Zn,lr,br,Cr=Pe.props,pi=_e.props,vi=_e.type;if(vi==="svg"&&(_t=!0),Dt!=null){for(Tn=0;Tn<Dt.length;Tn++)if((Zn=Dt[Tn])&&"setAttribute"in Zn==!!vi&&(vi?Zn.localName===vi:Zn.nodeType===3)){de=Zn,Dt[Tn]=null;break}}if(de==null){if(vi===null)return document.createTextNode(pi);de=_t?document.createElementNS("http://www.w3.org/2000/svg",vi):document.createElement(vi,pi.is&&pi),Dt=null,In=!1}if(vi===null)Cr===pi||In&&de.data===pi||(de.data=pi);else{if(Dt=Dt&&dt.call(de.childNodes),Cr=Pe.props||it,!In&&Dt!=null)for(Cr={},Tn=0;Tn<de.attributes.length;Tn++)Cr[(Zn=de.attributes[Tn]).name]=Zn.value;for(Tn in Cr)Zn=Cr[Tn],Tn=="children"||(Tn=="dangerouslySetInnerHTML"?an=Zn:Tn==="key"||Tn in pi||st(de,Tn,null,Zn,_t));for(Tn in pi)Zn=pi[Tn],Tn=="children"?ki=Zn:Tn=="dangerouslySetInnerHTML"?di=Zn:Tn=="value"?lr=Zn:Tn=="checked"?br=Zn:Tn==="key"||In&&typeof Zn!="function"||Cr[Tn]===Zn||st(de,Tn,Zn,Cr[Tn],_t);if(di)In||an&&(di.__html===an.__html||di.__html===de.innerHTML)||(de.innerHTML=di.__html),_e.__k=[];else if(an&&(de.innerHTML=""),cn(de,dn(ki)?ki:[ki],_e,Pe,rt,_t&&vi!=="foreignObject",Dt,pn,Dt?Dt[0]:Pe.__k&&zn(Pe,0),In,Nn),Dt!=null)for(Tn=Dt.length;Tn--;)Dt[Tn]!=null&&Rn(Dt[Tn]);In||(Tn="value",lr!==void 0&&(lr!==de[Tn]||vi==="progress"&&!lr||vi==="option"&&lr!==Cr[Tn])&&st(de,Tn,lr,Cr[Tn],!1),Tn="checked",br!==void 0&&br!==de[Tn]&&st(de,Tn,br,Cr[Tn],!1))}return de}r(G,"z$1");function ne(de,_e,Pe){try{typeof de=="function"?de(_e):de.current=_e}catch(rt){Ot.__e(rt,Pe)}}r(ne,"N");function Me(de,_e,Pe){var rt,_t;if(Ot.unmount&&Ot.unmount(de),(rt=de.ref)&&(rt.current&&rt.current!==de.__e||ne(rt,null,_e)),(rt=de.__c)!=null){if(rt.componentWillUnmount)try{rt.componentWillUnmount()}catch(Dt){Ot.__e(Dt,_e)}rt.base=rt.__P=null,de.__c=void 0}if(rt=de.__k)for(_t=0;_t<rt.length;_t++)rt[_t]&&Me(rt[_t],_e,Pe||typeof de.type!="function");Pe||de.__e==null||Rn(de.__e),de.__=de.__e=de.__d=void 0}r(Me,"O");function Re(de,_e,Pe){return this.constructor(de,Pe)}r(Re,"q$1");function Ft(de,_e,Pe){var rt,_t,Dt,pn;Ot.__&&Ot.__(de,_e),_t=(rt=typeof Pe=="function")?null:Pe&&Pe.__k||_e.__k,Dt=[],pn=[],ve(_e,de=(!rt&&Pe||_e).__k=Zt(Wi,null,[de]),_t||it,it,_e.ownerSVGElement!==void 0,!rt&&Pe?[Pe]:_t?null:_e.firstChild?dt.call(_e.childNodes):null,Dt,!rt&&Pe?Pe:_t?_t.__e:_e.firstChild,rt,pn),de.__d=void 0,et(Dt,de,pn)}r(Ft,"B$1"),dt=nn.slice,Ot={__e:function(de,_e,Pe,rt){for(var _t,Dt,pn;_e=_e.__;)if((_t=_e.__c)&&!_t.__)try{if((Dt=_t.constructor)&&Dt.getDerivedStateFromError!=null&&(_t.setState(Dt.getDerivedStateFromError(de)),pn=_t.__d),_t.componentDidCatch!=null&&(_t.componentDidCatch(de,rt||{}),pn=_t.__d),pn)return _t.__E=_t}catch(In){de=In}throw de}},Nt=0,Jn.prototype.setState=function(de,_e){var Pe;Pe=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=bn({},this.state),typeof de=="function"&&(de=de(bn({},Pe),this.props)),de&&bn(Pe,de),de!=null&&this.__v&&(_e&&this._sb.push(_e),oi(this))},Jn.prototype.forceUpdate=function(de){this.__v&&(this.__e=!0,de&&this.__h.push(de),oi(this))},Jn.prototype.render=Wi,Ve=[],ct=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,yt=r(function(de,_e){return de.__v.__b-_e.__v.__b},"f$1"),rn.__r=0;var ot,Tt,we,Ue,F=0,Oe=[],se=[],ue=Ot,X=ue.__b,lt=ue.__r,Ae=ue.diffed,Ye=ue.__c,Ht=ue.unmount,Mt=ue.__;function Qn(de,_e){ue.__h&&ue.__h(Tt,de,F||_e),F=0;var Pe=Tt.__H||(Tt.__H={__:[],__h:[]});return de>=Pe.__.length&&Pe.__.push({__V:se}),Pe.__[de]}r(Qn,"h");function $n(de){return F=1,Vn(Pi,de)}r($n,"p");function Vn(de,_e,Pe){var rt=Qn(ot++,2);if(rt.t=de,!rt.__c&&(rt.__=[Pe?Pe(_e):Pi(void 0,_e),function(In){var Nn=rt.__N?rt.__N[0]:rt.__[0],Tn=rt.t(Nn,In);Nn!==Tn&&(rt.__N=[Tn,rt.__[1]],rt.__c.setState({}))}],rt.__c=Tt,!Tt.u)){var _t=r(function(In,Nn,Tn){if(!rt.__c.__H)return!0;var di=rt.__c.__H.__.filter(function(ki){return!!ki.__c});if(di.every(function(ki){return!ki.__N}))return!Dt||Dt.call(this,In,Nn,Tn);var an=!1;return di.forEach(function(ki){if(ki.__N){var Zn=ki.__[0];ki.__=ki.__N,ki.__N=void 0,Zn!==ki.__[0]&&(an=!0)}}),!(!an&&rt.__c.props===In)&&(!Dt||Dt.call(this,In,Nn,Tn))},"f");Tt.u=!0;var Dt=Tt.shouldComponentUpdate,pn=Tt.componentWillUpdate;Tt.componentWillUpdate=function(In,Nn,Tn){if(this.__e){var di=Dt;Dt=void 0,_t(In,Nn,Tn),Dt=di}pn&&pn.call(this,In,Nn,Tn)},Tt.shouldComponentUpdate=_t}return rt.__N||rt.__}r(Vn,"y");function kn(de,_e){var Pe=Qn(ot++,3);!ue.__s&&wi(Pe.__H,_e)&&(Pe.__=de,Pe.i=_e,Tt.__H.__h.push(Pe))}r(kn,"_");function tn(de){return F=5,Gn(function(){return{current:de}},[])}r(tn,"F");function Gn(de,_e){var Pe=Qn(ot++,7);return wi(Pe.__H,_e)?(Pe.__V=de(),Pe.i=_e,Pe.__h=de,Pe.__V):Pe.__}r(Gn,"q");function Si(de,_e){return F=8,Gn(function(){return de},_e)}r(Si,"x");function nr(){for(var de;de=Oe.shift();)if(de.__P&&de.__H)try{de.__H.__h.forEach(Fn),de.__H.__h.forEach(Hn),de.__H.__h=[]}catch(_e){de.__H.__h=[],ue.__e(_e,de.__v)}}r(nr,"j"),ue.__b=function(de){Tt=null,X&&X(de)},ue.__=function(de,_e){_e.__k&&_e.__k.__m&&(de.__m=_e.__k.__m),Mt&&Mt(de,_e)},ue.__r=function(de){lt&&lt(de),ot=0;var _e=(Tt=de.__c).__H;_e&&(we===Tt?(_e.__h=[],Tt.__h=[],_e.__.forEach(function(Pe){Pe.__N&&(Pe.__=Pe.__N),Pe.__V=se,Pe.__N=Pe.i=void 0})):(_e.__h.forEach(Fn),_e.__h.forEach(Hn),_e.__h=[],ot=0)),we=Tt},ue.diffed=function(de){Ae&&Ae(de);var _e=de.__c;_e&&_e.__H&&(_e.__H.__h.length&&(Oe.push(_e)!==1&&Ue===ue.requestAnimationFrame||((Ue=ue.requestAnimationFrame)||jt)(nr)),_e.__H.__.forEach(function(Pe){Pe.i&&(Pe.__H=Pe.i),Pe.__V!==se&&(Pe.__=Pe.__V),Pe.i=void 0,Pe.__V=se})),we=Tt=null},ue.__c=function(de,_e){_e.some(function(Pe){try{Pe.__h.forEach(Fn),Pe.__h=Pe.__h.filter(function(rt){return!rt.__||Hn(rt)})}catch(rt){_e.some(function(_t){_t.__h&&(_t.__h=[])}),_e=[],ue.__e(rt,Pe.__v)}}),Ye&&Ye(de,_e)},ue.unmount=function(de){Ht&&Ht(de);var _e,Pe=de.__c;Pe&&Pe.__H&&(Pe.__H.__.forEach(function(rt){try{Fn(rt)}catch(_t){_e=_t}}),Pe.__H=void 0,_e&&ue.__e(_e,Pe.__v))};var ln=typeof requestAnimationFrame=="function";function jt(de){var _e,Pe=r(function(){clearTimeout(rt),ln&&cancelAnimationFrame(_e),setTimeout(de)},"r"),rt=setTimeout(Pe,100);ln&&(_e=requestAnimationFrame(Pe))}r(jt,"w");function Fn(de){var _e=Tt,Pe=de.__c;typeof Pe=="function"&&(de.__c=void 0,Pe()),Tt=_e}r(Fn,"z");function Hn(de){var _e=Tt;de.__c=de.__(),Tt=_e}r(Hn,"B");function wi(de,_e){return!de||de.length!==_e.length||_e.some(function(Pe,rt){return Pe!==de[rt]})}r(wi,"C");function Pi(de,_e){return typeof _e=="function"?_e(de):_e}r(Pi,"D");const ni="http://www.w3.org/2000/svg";function Kn(){const de=r(rt=>m.createElementNS(ni,rt),"createElementNS"),_e=ee(de("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),Pe=ee(de("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return _e.appendChild(Pe),_e}r(Kn,"SentryLogo");const ji="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function $i({options:de}){const _e=Gn(()=>({__html:Kn().outerHTML}),[]);return Zt("h2",{class:"dialog__header",__self:this,__source:{fileName:ji,lineNumber:16}},de.formTitle,de.showBranding?Zt("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:_e,__self:this,__source:{fileName:ji,lineNumber:19}}):null)}r($i,"DialogHeader");function sr(de,_e){const Pe=[];return _e.isNameRequired&&!de.name&&Pe.push(_e.nameLabel),_e.isEmailRequired&&!de.email&&Pe.push(_e.emailLabel),de.message||Pe.push(_e.messageLabel),Pe}r(sr,"getMissingFields");const Ai="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function Lr(de,_e){const Pe=de.get(_e);return typeof Pe=="string"?Pe.trim():""}r(Lr,"retrieveStringValue");function Vi({options:de,defaultEmail:_e,defaultName:Pe,onFormClose:rt,onSubmit:_t,onSubmitSuccess:Dt,onSubmitError:pn,showEmail:In,showName:Nn,screenshotInput:Tn}){const{addScreenshotButtonLabel:di,removeScreenshotButtonLabel:an,cancelButtonLabel:ki,emailLabel:Zn,emailPlaceholder:lr,isEmailRequired:br,isNameRequired:Cr,messageLabel:pi,messagePlaceholder:vi,nameLabel:Di,namePlaceholder:Yi,submitButtonLabel:Or,isRequiredLabel:Zr}=de,[Mi,ro]=$n(null),[pr,qr]=$n(!1),es=Tn&&Tn.input,[is,Jo]=$n(null),Yo=Si(uo=>{Jo(uo),qr(!1)},[]),ts=Si(uo=>{const bo=sr(uo,{emailLabel:Zn,isEmailRequired:br,isNameRequired:Cr,messageLabel:pi,nameLabel:Di});return bo.length>0?ro(`Please enter in the following required fields: ${bo.join(", ")}`):ro(null),bo.length===0},[Zn,br,Cr,pi,Di]),Vo=Si(async uo=>{try{if(uo.preventDefault(),!(uo.target instanceof HTMLFormElement))return;const bo=new FormData(uo.target),Io=await(Tn&&pr?Tn.value():void 0),so={name:Lr(bo,"name"),email:Lr(bo,"email"),message:Lr(bo,"message"),attachments:Io?[Io]:void 0};if(!ts(so))return;try{await _t({name:so.name,email:so.email,message:so.message,source:I},{attachments:so.attachments}),Dt(so)}catch(ao){R&&h.logger.error(ao),ro("There was a problem submitting feedback, please wait and try again."),pn(ao)}}catch{}},[Tn&&pr,Dt,pn]);return Zt("form",{class:"form",onSubmit:Vo,__self:this,__source:{fileName:Ai,lineNumber:142}},es&&pr?Zt(es,{onError:Yo,__self:this,__source:{fileName:Ai,lineNumber:144}}):null,Zt("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:Ai,lineNumber:147}},Zt("div",{class:"form__top",__self:this,__source:{fileName:Ai,lineNumber:148}},Mi?Zt("div",{class:"form__error-container",__self:this,__source:{fileName:Ai,lineNumber:149}},Mi):null,Nn?Zt("label",{for:"name",class:"form__label",__self:this,__source:{fileName:Ai,lineNumber:152}},Zt(Nr,{label:Di,isRequiredLabel:Zr,isRequired:Cr,__self:this,__source:{fileName:Ai,lineNumber:153}}),Zt("input",{class:"form__input",defaultValue:Pe,id:"name",name:"name",placeholder:Yi,required:Cr,type:"text",__self:this,__source:{fileName:Ai,lineNumber:154}})):Zt("input",{"aria-hidden":!0,value:Pe,name:"name",type:"hidden",__self:this,__source:{fileName:Ai,lineNumber:165}}),In?Zt("label",{for:"email",class:"form__label",__self:this,__source:{fileName:Ai,lineNumber:169}},Zt(Nr,{label:Zn,isRequiredLabel:Zr,isRequired:br,__self:this,__source:{fileName:Ai,lineNumber:170}}),Zt("input",{class:"form__input",defaultValue:_e,id:"email",name:"email",placeholder:lr,required:br,type:"email",__self:this,__source:{fileName:Ai,lineNumber:171}})):Zt("input",{"aria-hidden":!0,value:_e,name:"email",type:"hidden",__self:this,__source:{fileName:Ai,lineNumber:182}}),Zt("label",{for:"message",class:"form__label",__self:this,__source:{fileName:Ai,lineNumber:185}},Zt(Nr,{label:pi,isRequiredLabel:Zr,isRequired:!0,__self:this,__source:{fileName:Ai,lineNumber:186}}),Zt("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:vi,required:!0,rows:5,__self:this,__source:{fileName:Ai,lineNumber:187}})),es?Zt("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:Ai,lineNumber:199}},Zt("button",{class:"btn btn--default",type:"button",onClick:()=>{Jo(null),qr(uo=>!uo)},__self:this,__source:{fileName:Ai,lineNumber:200}},pr?an:di),is?Zt("div",{class:"form__error-container",__self:this,__source:{fileName:Ai,lineNumber:210}},is.message):null):null),Zt("div",{class:"btn-group",__self:this,__source:{fileName:Ai,lineNumber:214}},Zt("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:Ai,lineNumber:215}},Or),Zt("button",{class:"btn btn--default",type:"button",onClick:rt,__self:this,__source:{fileName:Ai,lineNumber:218}},ki))))}r(Vi,"Form");function Nr({label:de,isRequired:_e,isRequiredLabel:Pe}){return Zt("span",{class:"form__label__text",__self:this,__source:{fileName:Ai,lineNumber:233}},de,_e&&Zt("span",{class:"form__label__text--required",__self:this,__source:{fileName:Ai,lineNumber:235}},Pe))}r(Nr,"LabelText");const _i=16,Ci=17,N="http://www.w3.org/2000/svg";function he(){const de=r(Nn=>p.document.createElementNS(N,Nn),"createElementNS"),_e=ee(de("svg"),{width:`${_i}`,height:`${Ci}`,viewBox:`0 0 ${_i} ${Ci}`,fill:"inherit"}),Pe=ee(de("g"),{clipPath:"url(#clip0_57_156)"}),rt=ee(de("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),_t=ee(de("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});_e.appendChild(Pe).append(_t,rt);const Dt=de("defs"),pn=ee(de("clipPath"),{id:"clip0_57_156"}),In=ee(de("rect"),{width:`${_i}`,height:`${_i}`,fill:"white",transform:"translate(0 0.5)"});return pn.appendChild(In),Dt.appendChild(pn),_e.appendChild(Dt).appendChild(pn).appendChild(In),_e}r(he,"SuccessIcon");const je="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function Rt({open:de,onFormSubmitted:_e,...Pe}){const rt=Pe.options,_t=Gn(()=>({__html:he().outerHTML}),[]),[Dt,pn]=$n(null),In=Si(()=>{Dt&&(clearTimeout(Dt),pn(null)),_e()},[Dt]),Nn=Si(Tn=>{Pe.onSubmitSuccess(Tn),pn(setTimeout(()=>{_e(),pn(null)},w))},[_e]);return Zt(Wi,{__self:this,__source:{fileName:je,lineNumber:47}},Dt?Zt("div",{class:"success__position",onClick:In,__self:this,__source:{fileName:je,lineNumber:49}},Zt("div",{class:"success__content",__self:this,__source:{fileName:je,lineNumber:50}},rt.successMessageText,Zt("span",{class:"success__icon",dangerouslySetInnerHTML:_t,__self:this,__source:{fileName:je,lineNumber:52}}))):Zt("dialog",{class:"dialog",onClick:rt.onFormClose,open:de,__self:this,__source:{fileName:je,lineNumber:56}},Zt("div",{class:"dialog__position",__self:this,__source:{fileName:je,lineNumber:57}},Zt("div",{class:"dialog__content",onClick:Tn=>{Tn.stopPropagation()},__self:this,__source:{fileName:je,lineNumber:58}},Zt($i,{options:rt,__self:this,__source:{fileName:je,lineNumber:65}}),Zt(Vi,{...Pe,onSubmitSuccess:Nn,__self:this,__source:{fileName:je,lineNumber:66}})))))}r(Rt,"Dialog");const Qt=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}
`,An=`
.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}

.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,qn=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  width: var(--form-width, 272px);
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  flex: 1 0 auto;
}

@media (max-width: 600px) {
  .form__right {
    width: auto;
  }
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-foreground);
  fill: var(--error-foreground);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,Pn=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,xn=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function Xn(){const de=m.createElement("style");return de.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Qt}
${An}
${qn}
${Pn}
${xn}
`,de}r(Xn,"createDialogStyles");const li="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx";function Ri(){const de=u.getCurrentScope().getUser(),_e=u.getIsolationScope().getUser(),Pe=u.getGlobalScope().getUser();return de&&Object.keys(de).length?de:_e&&Object.keys(_e).length?_e:Pe}r(Ri,"getUser");const zi=r(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:de,screenshotIntegration:_e,sendFeedback:Pe,shadow:rt})=>{const _t=rt,Dt=de.useSentryUser,pn=Ri(),In=m.createElement("div"),Nn=Xn();let Tn="";const di={get el(){return In},appendToDom(){!_t.contains(Nn)&&!_t.contains(In)&&(_t.appendChild(Nn),_t.appendChild(In))},removeFromDom(){_t.removeChild(In),_t.removeChild(Nn)},open(){ki(!0),de.onFormOpen&&de.onFormOpen(),Tn=m.body.style.overflow,m.body.style.overflow="hidden"},close(){ki(!1),m.body.style.overflow=Tn}},an=_e&&_e.createInput(Zt,di,de),ki=r(Zn=>{Ft(Zt(Rt,{options:de,screenshotInput:an,showName:de.showName||de.isNameRequired,showEmail:de.showEmail||de.isEmailRequired,defaultName:Dt&&pn&&pn[Dt.name]||"",defaultEmail:Dt&&pn&&pn[Dt.email]||"",onFormClose:()=>{ki(!1),de.onFormClose&&de.onFormClose()},onSubmit:Pe,onSubmitSuccess:lr=>{ki(!1),de.onSubmitSuccess&&de.onSubmitSuccess(lr)},onSubmitError:lr=>{de.onSubmitError&&de.onSubmitError(lr)},onFormSubmitted:()=>{de.onFormSubmitted&&de.onFormSubmitted()},open:Zn,__self:void 0,__source:{fileName:li,lineNumber:72}}),In)},"renderContent");return di}}),"feedbackModalIntegration");function gr(){const de=m.createElement("style"),_e="#1A141F",Pe="#302735";return de.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${_e};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${_e} 8px,
      ${_e} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${Pe} 15px,
      ${Pe} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.editor__canvas-container canvas {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,de}r(gr,"createScreenshotInputStyles");const Fr=r(({onBeforeScreenshot:de,onScreenshot:_e,onAfterScreenshot:Pe,onError:rt})=>{kn(()=>{r(async()=>{de();const Dt=await a.mediaDevices.getDisplayMedia({video:{width:p.innerWidth*p.devicePixelRatio,height:p.innerHeight*p.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),pn=m.createElement("video");await new Promise((In,Nn)=>{pn.srcObject=Dt,pn.onloadedmetadata=()=>{_e(pn),Dt.getTracks().forEach(Tn=>Tn.stop()),In()},pn.play().catch(Nn)}),Pe()},"takeScreenshot")().catch(rt)},[])},"useTakeScreenshot"),ri="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",Er=30,Rr=3,ei=Er+Rr,hr=p.devicePixelRatio,si=r(de=>({x:Math.min(de.startX,de.endX),y:Math.min(de.startY,de.endY),width:Math.abs(de.startX-de.endX),height:Math.abs(de.startY-de.endY)}),"constructRect"),Eo=r(de=>{const _e=de.clientHeight,Pe=de.clientWidth,rt=de.width/de.height;let _t=_e*rt,Dt=_e;_t>Pe&&(_t=Pe,Dt=Pe/rt);const pn=(Pe-_t)/2,In=(_e-Dt)/2;return{startX:pn,startY:In,endX:_t+pn,endY:Dt+In}},"getContainedSize");function Jr({imageBuffer:de,dialog:_e,options:Pe}){return r(function({onError:_t}){const Dt=Gn(()=>({__html:gr().innerText}),[]),pn=tn(null),In=tn(null),Nn=tn(null),[Tn,di]=$n({startX:0,startY:0,endX:0,endY:0}),[an,ki]=$n(!1);kn(()=>{p.addEventListener("resize",Zn,!1)},[]);function Zn(){const pi=Nn.current,vi=si(Eo(de));if(pi){pi.width=vi.width*hr,pi.height=vi.height*hr,pi.style.width=`${vi.width}px`,pi.style.height=`${vi.height}px`;const Yi=pi.getContext("2d");Yi&&Yi.scale(hr,hr)}const Di=In.current;Di&&(Di.style.width=`${vi.width}px`,Di.style.height=`${vi.height}px`,Di.style.left=`${vi.x}px`,Di.style.top=`${vi.y}px`),di({startX:0,startY:0,endX:vi.width,endY:vi.height})}r(Zn,"resizeCropper"),kn(()=>{const pi=Nn.current;if(!pi)return;const vi=pi.getContext("2d");if(!vi)return;const Di=si(Eo(de)),Yi=si(Tn);vi.clearRect(0,0,Di.width,Di.height),vi.fillStyle="rgba(0, 0, 0, 0.5)",vi.fillRect(0,0,Di.width,Di.height),vi.clearRect(Yi.x,Yi.y,Yi.width,Yi.height),vi.strokeStyle="#ffffff",vi.lineWidth=3,vi.strokeRect(Yi.x+1,Yi.y+1,Yi.width-2,Yi.height-2),vi.strokeStyle="#000000",vi.lineWidth=1,vi.strokeRect(Yi.x+3,Yi.y+3,Yi.width-6,Yi.height-6)},[Tn]);function lr(pi,vi){ki(!1);const Di=br(vi),Yi=r(()=>{m.removeEventListener("mousemove",Di),m.removeEventListener("mouseup",Yi),ki(!0)},"handleMouseUp");m.addEventListener("mouseup",Yi),m.addEventListener("mousemove",Di)}r(lr,"onGrabButton");const br=Si(pi=>function(vi){if(!Nn.current)return;const Di=Nn.current,Yi=Di.getBoundingClientRect(),Or=vi.clientX-Yi.x,Zr=vi.clientY-Yi.y;switch(pi){case"top-left":di(Mi=>({...Mi,startX:Math.min(Math.max(0,Or),Mi.endX-ei),startY:Math.min(Math.max(0,Zr),Mi.endY-ei)}));break;case"top-right":di(Mi=>({...Mi,endX:Math.max(Math.min(Or,Di.width/hr),Mi.startX+ei),startY:Math.min(Math.max(0,Zr),Mi.endY-ei)}));break;case"bottom-left":di(Mi=>({...Mi,startX:Math.min(Math.max(0,Or),Mi.endX-ei),endY:Math.max(Math.min(Zr,Di.height/hr),Mi.startY+ei)}));break;case"bottom-right":di(Mi=>({...Mi,endX:Math.max(Math.min(Or,Di.width/hr),Mi.startX+ei),endY:Math.max(Math.min(Zr,Di.height/hr),Mi.startY+ei)}));break}},[]);function Cr(){const pi=m.createElement("canvas"),vi=si(Eo(de)),Di=si(Tn);pi.width=Di.width,pi.height=Di.height;const Yi=pi.getContext("2d");Yi&&de&&Yi.drawImage(de,Di.x/vi.width*de.width,Di.y/vi.height*de.height,Di.width/vi.width*de.width,Di.height/vi.height*de.height,0,0,Di.width,Di.height);const Or=de.getContext("2d");Or&&(Or.clearRect(0,0,de.width,de.height),de.width=pi.width,de.height=pi.height,Or.drawImage(pi,0,0),Zn())}return r(Cr,"submit"),Fr({onBeforeScreenshot:Si(()=>{_e.el.style.display="none"},[]),onScreenshot:Si(pi=>{const vi=de.getContext("2d");if(!vi)throw new Error("Could not get canvas context");de.width=pi.videoWidth,de.height=pi.videoHeight,vi.drawImage(pi,0,0)},[de]),onAfterScreenshot:Si(()=>{_e.el.style.display="block";const pi=pn.current;pi&&pi.appendChild(de),Zn()},[]),onError:Si(pi=>{_e.el.style.display="block",_t(pi)},[])}),Zt("div",{class:"editor",__self:this,__source:{fileName:ri,lineNumber:249}},Zt("style",{dangerouslySetInnerHTML:Dt,__self:this,__source:{fileName:ri,lineNumber:250}}),Zt("div",{class:"editor__canvas-container",ref:pn,__self:this,__source:{fileName:ri,lineNumber:251}},Zt("div",{class:"editor__crop-container",style:{position:"absolute"},ref:In,__self:this,__source:{fileName:ri,lineNumber:252}},Zt("canvas",{style:{position:"absolute"},ref:Nn,__self:this,__source:{fileName:ri,lineNumber:253}}),Zt(fo,{left:Tn.startX-Rr,top:Tn.startY-Rr,onGrabButton:lr,corner:"top-left",__self:this,__source:{fileName:ri,lineNumber:254}}),Zt(fo,{left:Tn.endX-Er+Rr,top:Tn.startY-Rr,onGrabButton:lr,corner:"top-right",__self:this,__source:{fileName:ri,lineNumber:260}}),Zt(fo,{left:Tn.startX-Rr,top:Tn.endY-Er+Rr,onGrabButton:lr,corner:"bottom-left",__self:this,__source:{fileName:ri,lineNumber:266}}),Zt(fo,{left:Tn.endX-Er+Rr,top:Tn.endY-Er+Rr,onGrabButton:lr,corner:"bottom-right",__self:this,__source:{fileName:ri,lineNumber:272}}),Zt("div",{style:{left:Math.max(0,Tn.endX-191),top:Math.max(0,Tn.endY+8),display:an?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:ri,lineNumber:278}},Zt("button",{onClick:pi=>{pi.preventDefault(),Nn.current&&di({startX:0,startY:0,endX:Nn.current.width/hr,endY:Nn.current.height/hr}),ki(!1)},class:"btn btn--default",__self:this,__source:{fileName:ri,lineNumber:286}},Pe.cancelButtonLabel),Zt("button",{onClick:pi=>{pi.preventDefault(),Cr(),ki(!1)},class:"btn btn--primary",__self:this,__source:{fileName:ri,lineNumber:303}},Pe.confirmButtonLabel)))))},"ScreenshotEditor")}r(Jr,"makeScreenshotEditorComponent");function fo({top:de,left:_e,corner:Pe,onGrabButton:rt}){return Zt("button",{class:`editor__crop-corner editor__crop-corner--${Pe} `,style:{top:de,left:_e},onMouseDown:_t=>{_t.preventDefault(),rt(_t,Pe)},onClick:_t=>{_t.preventDefault()},__self:this,__source:{fileName:ri,lineNumber:333}})}r(fo,"CropCorner");const ho=r(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:(de,_e,Pe)=>{const rt=m.createElement("canvas");return{input:Jr({h:de,imageBuffer:rt,dialog:_e,options:Pe}),value:async()=>{const _t=await new Promise(Dt=>{rt.toBlob(Dt,"image/png")});if(_t)return{data:new Uint8Array(await _t.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),"feedbackScreenshotIntegration");l.buildFeedbackIntegration=Ze,l.feedbackModalIntegration=zi,l.feedbackScreenshotIntegration=ho,l.getFeedback=Je,l.sendFeedback=D},4947629935:(B,l,d)=>{var{_optionalChain:u}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const h=d(8482989710);var p;(function(Ve){Ve[Ve.Document=0]="Document",Ve[Ve.DocumentType=1]="DocumentType",Ve[Ve.Element=2]="Element",Ve[Ve.Text=3]="Text",Ve[Ve.CDATA=4]="CDATA",Ve[Ve.Comment=5]="Comment"})(p||(p={}));function m(Ve,He){for(let ct=Ve.classList.length;ct--;){const yt=Ve.classList[ct];if(He.test(yt))return!0}return!1}r(m,"elementClassMatchesRegex");function a(Ve,He,ct=1/0,yt=0){return!Ve||Ve.nodeType!==Ve.ELEMENT_NODE||yt>ct?-1:He(Ve)?yt:a(Ve.parentNode,He,ct,yt+1)}r(a,"distanceToMatch");function s(Ve,He){return ct=>{const yt=ct;if(yt===null)return!1;try{if(Ve){if(typeof Ve=="string"){if(yt.matches(`.${Ve}`))return!0}else if(m(yt,Ve))return!0}return!!(He&&yt.matches(He))}catch{return!1}}}r(s,"createMatchPredicate");const i=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let e={map:{},getId(){return console.error(i),-1},getNode(){return console.error(i),null},removeNodeFromMap(){console.error(i)},has(){return console.error(i),!1},reset(){console.error(i)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(e=new Proxy(e,{get(Ve,He,ct){return He==="map"&&console.error(i),Reflect.get(Ve,He,ct)}}));function t(Ve,He,ct,yt,it=window){const nn=it.Object.getOwnPropertyDescriptor(Ve,He);return it.Object.defineProperty(Ve,He,yt?ct:{set(Xt){v(()=>{ct.set.call(this,Xt)},0),nn&&nn.set&&nn.set.call(this,Xt)}}),()=>t(Ve,He,nn||{},!0)}r(t,"hookSetter");function n(Ve,He,ct){try{if(!(He in Ve))return()=>{};const yt=Ve[He],it=ct(yt);return typeof it=="function"&&(it.prototype=it.prototype||{},Object.defineProperties(it,{__rrweb_original__:{enumerable:!1,value:yt}})),Ve[He]=it,()=>{Ve[He]=yt}}catch{return()=>{}}}r(n,"patch"),/[1-9][0-9]{12}/.test(Date.now().toString());function o(Ve){return Ve?Ve.nodeType===Ve.ELEMENT_NODE?Ve:Ve.parentElement:null}r(o,"closestElementOfNode");function f(Ve,He,ct,yt,it){if(!Ve)return!1;const nn=o(Ve);if(!nn)return!1;const Xt=s(He,ct);if(!it){const Rn=yt&&nn.matches(yt);return Xt(nn)&&!Rn}const dn=a(nn,Xt);let bn=-1;return dn<0?!1:(yt&&(bn=a(nn,s(null,yt))),dn>-1&&bn<0?!0:dn<bn)}r(f,"isBlocked");const g={};function S(Ve){const He=g[Ve];if(He)return He;const ct=window.document;let yt=window[Ve];if(ct&&typeof ct.createElement=="function")try{const it=ct.createElement("iframe");it.hidden=!0,ct.head.appendChild(it);const nn=it.contentWindow;nn&&nn[Ve]&&(yt=nn[Ve]),ct.head.removeChild(it)}catch{}return g[Ve]=yt.bind(window)}r(S,"getImplementation");function c(...Ve){return S("requestAnimationFrame")(...Ve)}r(c,"onRequestAnimationFrame");function v(...Ve){return S("setTimeout")(...Ve)}r(v,"setTimeout");var _=(Ve=>(Ve[Ve["2D"]=0]="2D",Ve[Ve.WebGL=1]="WebGL",Ve[Ve.WebGL2=2]="WebGL2",Ve))(_||{});let E;function b(Ve){E=Ve}r(b,"registerErrorHandler");const T=r(Ve=>E?r((...ct)=>{try{return Ve(...ct)}catch(yt){if(E&&E(yt)===!0)return()=>{};throw yt}},"rrwebWrapped"):Ve,"callbackWrapper");for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=typeof Uint8Array>"u"?[]:new Uint8Array(256),w=0;w<I.length;w++)O[I.charCodeAt(w)]=w;var D=r(function(Ve){var He=new Uint8Array(Ve),ct,yt=He.length,it="";for(ct=0;ct<yt;ct+=3)it+=I[He[ct]>>2],it+=I[(He[ct]&3)<<4|He[ct+1]>>4],it+=I[(He[ct+1]&15)<<2|He[ct+2]>>6],it+=I[He[ct+2]&63];return yt%3===2?it=it.substring(0,it.length-1)+"=":yt%3===1&&(it=it.substring(0,it.length-2)+"=="),it},"encode");const R=new Map;function L(Ve,He){let ct=R.get(Ve);return ct||(ct=new Map,R.set(Ve,ct)),ct.has(He)||ct.set(He,[]),ct.get(He)}r(L,"variableListFor");const H=r((Ve,He,ct)=>{if(!Ve||!(q(Ve,He)||typeof Ve=="object"))return;const yt=Ve.constructor.name,it=L(ct,yt);let nn=it.indexOf(Ve);return nn===-1&&(nn=it.length,it.push(Ve)),nn},"saveWebGLVar");function K(Ve,He,ct){if(Ve instanceof Array)return Ve.map(yt=>K(yt,He,ct));if(Ve===null)return Ve;if(Ve instanceof Float32Array||Ve instanceof Float64Array||Ve instanceof Int32Array||Ve instanceof Uint32Array||Ve instanceof Uint8Array||Ve instanceof Uint16Array||Ve instanceof Int16Array||Ve instanceof Int8Array||Ve instanceof Uint8ClampedArray)return{rr_type:Ve.constructor.name,args:[Object.values(Ve)]};if(Ve instanceof ArrayBuffer){const yt=Ve.constructor.name,it=D(Ve);return{rr_type:yt,base64:it}}else{if(Ve instanceof DataView)return{rr_type:Ve.constructor.name,args:[K(Ve.buffer,He,ct),Ve.byteOffset,Ve.byteLength]};if(Ve instanceof HTMLImageElement){const yt=Ve.constructor.name,{src:it}=Ve;return{rr_type:yt,src:it}}else if(Ve instanceof HTMLCanvasElement){const yt="HTMLImageElement",it=Ve.toDataURL();return{rr_type:yt,src:it}}else{if(Ve instanceof ImageData)return{rr_type:Ve.constructor.name,args:[K(Ve.data,He,ct),Ve.width,Ve.height]};if(q(Ve,He)||typeof Ve=="object"){const yt=Ve.constructor.name,it=H(Ve,He,ct);return{rr_type:yt,index:it}}}}return Ve}r(K,"serializeArg");const ee=r((Ve,He,ct)=>Ve.map(yt=>K(yt,He,ct)),"serializeArgs"),q=r((Ve,He)=>{const yt=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(it=>typeof He[it]=="function");return Boolean(yt.find(it=>Ve instanceof He[it]))},"isInstanceOfWebGLObject");function ae(Ve,He,ct,yt,it){const nn=[],Xt=Object.getOwnPropertyNames(He.CanvasRenderingContext2D.prototype);for(const dn of Xt)try{if(typeof He.CanvasRenderingContext2D.prototype[dn]!="function")continue;const bn=n(He.CanvasRenderingContext2D.prototype,dn,function(Rn){return function(...Zt){return f(this.canvas,ct,yt,it,!0)||v(()=>{const Mn=ee(Zt,He,this);Ve(this.canvas,{type:_["2D"],property:dn,args:Mn})},0),Rn.apply(this,Zt)}});nn.push(bn)}catch{const Rn=t(He.CanvasRenderingContext2D.prototype,dn,{set(Zt){Ve(this.canvas,{type:_["2D"],property:dn,args:[Zt],setter:!0})}});nn.push(Rn)}return()=>{nn.forEach(dn=>dn())}}r(ae,"initCanvas2DMutationObserver");function ce(Ve){return Ve==="experimental-webgl"?"webgl":Ve}r(ce,"getNormalizedContextName");function Te(Ve,He,ct,yt,it){const nn=[];try{const Xt=n(Ve.HTMLCanvasElement.prototype,"getContext",function(dn){return function(bn,...Rn){if(!f(this,He,ct,yt,!0)){const Zt=ce(bn);if("__context"in this||(this.__context=Zt),it&&["webgl","webgl2"].includes(Zt))if(Rn[0]&&typeof Rn[0]=="object"){const Mn=Rn[0];Mn.preserveDrawingBuffer||(Mn.preserveDrawingBuffer=!0)}else Rn.splice(0,1,{preserveDrawingBuffer:!0})}return dn.apply(this,[bn,...Rn])}});nn.push(Xt)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{nn.forEach(Xt=>Xt())}}r(Te,"initCanvasContextObserver");function ke(Ve,He,ct,yt,it,nn,Xt,dn){const bn=[],Rn=Object.getOwnPropertyNames(Ve);for(const Zt of Rn)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(Zt))try{if(typeof Ve[Zt]!="function")continue;const Mn=n(Ve,Zt,function(Wi){return function(...Jn){const zn=Wi.apply(this,Jn);if(H(zn,dn,this),"tagName"in this.canvas&&!f(this.canvas,yt,it,nn,!0)){const En=ee(Jn,dn,this),sn={type:He,property:Zt,args:En};ct(this.canvas,sn)}return zn}});bn.push(Mn)}catch{const Wi=t(Ve,Zt,{set(Jn){ct(this.canvas,{type:He,property:Zt,args:[Jn],setter:!0})}});bn.push(Wi)}return bn}r(ke,"patchGLPrototype");function tt(Ve,He,ct,yt,it,nn){const Xt=[];return Xt.push(...ke(He.WebGLRenderingContext.prototype,_.WebGL,Ve,ct,yt,it,nn,He)),typeof He.WebGL2RenderingContext<"u"&&Xt.push(...ke(He.WebGL2RenderingContext.prototype,_.WebGL2,Ve,ct,yt,it,nn,He)),()=>{Xt.forEach(dn=>dn())}}r(tt,"initCanvasWebGLMutationObserver");var At='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function Be(){const Ve=new Blob([At]);return URL.createObjectURL(Ve)}r(Be,"t");class $e{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(He){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(Mn,Wi)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(Mn)||this.pendingCanvasMutations.set(Mn,[]),this.pendingCanvasMutations.get(Mn).push(Wi)};const{sampling:ct="all",win:yt,blockClass:it,blockSelector:nn,unblockSelector:Xt,maxCanvasSize:dn,recordCanvas:bn,dataURLOptions:Rn,errorHandler:Zt}=He;this.mutationCb=He.mutationCb,this.mirror=He.mirror,this.options=He,Zt&&b(Zt),!He.enableManualSnapshot&&T(()=>{bn&&ct==="all"&&this.initCanvasMutationObserver(yt,it,nn,Xt),bn&&typeof ct=="number"&&this.initCanvasFPSObserver(ct,yt,it,nn,Xt,dn,{dataURLOptions:Rn})})()}initCanvasFPSObserver(He,ct,yt,it,nn,Xt,dn){const bn=Te(ct,yt,it,nn,!0),Rn=this.takeSnapshot(!1,He,ct,yt,it,nn,Xt,dn.dataURLOptions);this.resetObservers=()=>{bn(),cancelAnimationFrame(Rn)}}initCanvasMutationObserver(He,ct,yt,it){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const nn=Te(He,ct,yt,it,!1),Xt=ae(this.processMutation.bind(this),He,ct,yt,it),dn=tt(this.processMutation.bind(this),He,ct,yt,it,this.mirror);this.resetObservers=()=>{nn(),Xt(),dn()}}snapshot(He){const{options:ct}=this,yt=this.takeSnapshot(!0,ct.sampling==="all"?2:ct.sampling||2,ct.win,ct.blockClass,ct.blockSelector,ct.unblockSelector,ct.maxCanvasSize,ct.dataURLOptions,He);this.resetObservers=()=>{cancelAnimationFrame(yt)}}takeSnapshot(He,ct,yt,it,nn,Xt,dn,bn,Rn){const Zt=new Map,Mn=new Worker(Be());Mn.onmessage=oi=>{const rn=oi.data,{id:cn}=rn;if(Zt.set(cn,!1),!("base64"in rn))return;const{base64:Wt,type:J,width:Xe,height:nt}=rn;this.mutationCb({id:cn,type:_["2D"],commands:[{property:"clearRect",args:[0,0,Xe,nt]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:Wt}],type:J}]},0,0,Xe,nt]}]})};const Wi=1e3/ct;let Jn=0,zn;const En=r(oi=>{if(oi)return[oi];const rn=[];return yt.document.querySelectorAll("canvas").forEach(cn=>{f(cn,it,nn,Xt,!0)||rn.push(cn)}),rn},"getCanvas"),sn=r(oi=>{if(Jn&&oi-Jn<Wi){zn=c(sn);return}Jn=oi,En(Rn).forEach(rn=>{const cn=this.mirror.getId(rn);if(!Zt.get(cn)&&!(!rn.width||!rn.height)){if(Zt.set(cn,!0),!He&&["webgl","webgl2"].includes(rn.__context)){const Wt=rn.getContext(rn.__context);u([Wt,"optionalAccess",J=>J.getContextAttributes,"call",J=>J(),"optionalAccess",J=>J.preserveDrawingBuffer])===!1&&Wt.clear(Wt.COLOR_BUFFER_BIT)}createImageBitmap(rn).then(Wt=>{Mn.postMessage({id:cn,bitmap:Wt,width:rn.width,height:rn.height,dataURLOptions:bn,maxCanvasSize:dn},[Wt])}).catch(Wt=>{T(()=>{throw Wt})()})}}),zn=c(sn)},"takeCanvasSnapshots");return zn=c(sn),zn}startPendingCanvasMutationFlusher(){c(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const He=r(ct=>{this.rafStamps.latestId=ct,c(He)},"setLatestRAFTimestamp");c(He)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((He,ct)=>{const yt=this.mirror.getId(ct);this.flushPendingCanvasMutationFor(ct,yt)}),c(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(He,ct){if(this.frozen||this.locked)return;const yt=this.pendingCanvasMutations.get(He);if(!yt||ct===-1)return;const it=yt.map(Xt=>{const{type:dn,...bn}=Xt;return bn}),{type:nn}=yt[0];this.mutationCb({id:ct,type:nn,commands:it}),this.pendingCanvasMutations.delete(He)}}r($e,"CanvasManager");const Ze={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Je="ReplayCanvas",dt=1280,Ot=r((Ve={})=>{const[He,ct]=Ve.maxCanvasSize||[],yt={quality:Ve.quality||"medium",enableManualSnapshot:Ve.enableManualSnapshot,maxCanvasSize:[He?Math.min(He,dt):dt,ct?Math.min(ct,dt):dt]};let it;const nn=new Promise(Xt=>it=Xt);return{name:Je,getOptions(){const{quality:Xt,enableManualSnapshot:dn,maxCanvasSize:bn}=yt;return{enableManualSnapshot:dn,recordCanvas:!0,getCanvasManager:Rn=>{const Zt=new $e({...Rn,enableManualSnapshot:dn,maxCanvasSize:bn,errorHandler:Mn=>{try{typeof Mn=="object"&&(Mn.__rrweb__=!0)}catch{}}});return it(Zt),Zt},...Ze[Xt||"medium"]||Ze.medium}},async snapshot(Xt){(await nn).snapshot(Xt)}}},"_replayCanvasIntegration"),Nt=h.defineIntegration(Ot);l.replayCanvasIntegration=Nt},6979168052:(B,l,d)=>{var{_nullishCoalesce:u,_optionalChain:h}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const p=d(8482989710),m=d(7563271614),a=d(3778408185),s=m.GLOBAL_OBJ,i="sentryReplaySession",e="replay_event",t="Unable to send Replay",n=3e5,o=9e5,f=5e3,g=5500,S=6e4,c=5e3,v=3,_=15e4,E=5e3,b=3e3,T=300,I=2e7,O=4999,w=15e3,D=36e5;function R(k,U){return k??U()}r(R,"_nullishCoalesce$1");function L(k){let U,z=k[0],re=1;for(;re<k.length;){const Ee=k[re],xe=k[re+1];if(re+=2,(Ee==="optionalAccess"||Ee==="optionalCall")&&z==null)return;Ee==="access"||Ee==="optionalAccess"?(U=z,z=xe(z)):(Ee==="call"||Ee==="optionalCall")&&(z=xe((...ut)=>z.call(U,...ut)),U=void 0)}return z}r(L,"_optionalChain$5");var H;(function(k){k[k.Document=0]="Document",k[k.DocumentType=1]="DocumentType",k[k.Element=2]="Element",k[k.Text=3]="Text",k[k.CDATA=4]="CDATA",k[k.Comment=5]="Comment"})(H||(H={}));function K(k){return k.nodeType===k.ELEMENT_NODE}r(K,"isElement$1");function ee(k){const U=L([k,"optionalAccess",z=>z.host]);return Boolean(L([U,"optionalAccess",z=>z.shadowRoot])===k)}r(ee,"isShadowRoot");function q(k){return Object.prototype.toString.call(k)==="[object ShadowRoot]"}r(q,"isNativeShadowDom");function ae(k){return k.includes(" background-clip: text;")&&!k.includes(" -webkit-background-clip: text;")&&(k=k.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),k}r(ae,"fixBrowserCompatibilityIssuesInCSS");function ce(k){const{cssText:U}=k;if(U.split('"').length<3)return U;const z=["@import",`url(${JSON.stringify(k.href)})`];return k.layerName===""?z.push("layer"):k.layerName&&z.push(`layer(${k.layerName})`),k.supportsText&&z.push(`supports(${k.supportsText})`),k.media.length&&z.push(k.media.mediaText),z.join(" ")+";"}r(ce,"escapeImportStatement");function Te(k){try{const U=k.rules||k.cssRules;return U?ae(Array.from(U,ke).join("")):null}catch{return null}}r(Te,"stringifyStylesheet");function ke(k){let U;if(At(k))try{U=Te(k.styleSheet)||ce(k)}catch{}else if(Be(k)&&k.selectorText.includes(":"))return tt(k.cssText);return U||k.cssText}r(ke,"stringifyRule");function tt(k){const U=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return k.replace(U,"$1\\$2")}r(tt,"fixSafariColons");function At(k){return"styleSheet"in k}r(At,"isCSSImportRule");function Be(k){return"selectorText"in k}r(Be,"isCSSStyleRule");class $e{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(U){if(!U)return-1;const z=L([this,"access",re=>re.getMeta,"call",re=>re(U),"optionalAccess",re=>re.id]);return R(z,()=>-1)}getNode(U){return this.idNodeMap.get(U)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(U){return this.nodeMetaMap.get(U)||null}removeNodeFromMap(U){const z=this.getId(U);this.idNodeMap.delete(z),U.childNodes&&U.childNodes.forEach(re=>this.removeNodeFromMap(re))}has(U){return this.idNodeMap.has(U)}hasNode(U){return this.nodeMetaMap.has(U)}add(U,z){const re=z.id;this.idNodeMap.set(re,U),this.nodeMetaMap.set(U,z)}replace(U,z){const re=this.getNode(U);if(re){const Ee=this.nodeMetaMap.get(re);Ee&&this.nodeMetaMap.set(z,Ee)}this.idNodeMap.set(U,z)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}r($e,"Mirror");function Ze(){return new $e}r(Ze,"createMirror");function Je({maskInputOptions:k,tagName:U,type:z}){return U==="OPTION"&&(U="SELECT"),Boolean(k[U.toLowerCase()]||z&&k[z]||z==="password"||U==="INPUT"&&!z&&k.text)}r(Je,"shouldMaskInput");function dt({isMasked:k,element:U,value:z,maskInputFn:re}){let Ee=z||"";return k?(re&&(Ee=re(Ee,U)),"*".repeat(Ee.length)):Ee}r(dt,"maskInputValue");function Ot(k){return k.toLowerCase()}r(Ot,"toLowerCase");function Nt(k){return k.toUpperCase()}r(Nt,"toUpperCase");const Ve="__rrweb_original__";function He(k){const U=k.getContext("2d");if(!U)return!0;const z=50;for(let re=0;re<k.width;re+=z)for(let Ee=0;Ee<k.height;Ee+=z){const xe=U.getImageData,ut=Ve in xe?xe[Ve]:xe;if(new Uint32Array(ut.call(U,re,Ee,Math.min(z,k.width-re),Math.min(z,k.height-Ee)).data.buffer).some(bt=>bt!==0))return!1}return!0}r(He,"is2DCanvasBlank");function ct(k){const U=k.type;return k.hasAttribute("data-rr-is-password")?"password":U?Ot(U):null}r(ct,"getInputType");function yt(k,U,z){return U==="INPUT"&&(z==="radio"||z==="checkbox")?k.getAttribute("value")||"":k.value}r(yt,"getInputValue");let it=1;const nn=new RegExp("[^a-z0-9-_:]"),Xt=-2;function dn(){return it++}r(dn,"genId");function bn(k){if(k instanceof HTMLFormElement)return"form";const U=Ot(k.tagName);return nn.test(U)?"div":U}r(bn,"getValidTagName");function Rn(k){let U="";return k.indexOf("//")>-1?U=k.split("/").slice(0,3).join("/"):U=k.split("/")[0],U=U.split("?")[0],U}r(Rn,"extractOrigin");let Zt,Mn;const Wi=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Jn=/^(?:[a-z+]+:)?\/\//i,zn=/^www\..*/i,En=/^(data:)([^,]*),(.*)/i;function sn(k,U){return(k||"").replace(Wi,(z,re,Ee,xe,ut,Pt)=>{const bt=Ee||ut||Pt,Yt=re||xe||"";if(!bt)return z;if(Jn.test(bt)||zn.test(bt))return`url(${Yt}${bt}${Yt})`;if(En.test(bt))return`url(${Yt}${bt}${Yt})`;if(bt[0]==="/")return`url(${Yt}${Rn(U)+bt}${Yt})`;const Ut=U.split("/"),fn=bt.split("/");Ut.pop();for(const yn of fn)yn!=="."&&(yn===".."?Ut.pop():Ut.push(yn));return`url(${Yt}${Ut.join("/")}${Yt})`})}r(sn,"absoluteToStylesheet");const oi=/^[^ \t\n\r\u000c]+/,rn=/^[, \t\n\r\u000c]+/;function cn(k,U){if(U.trim()==="")return U;let z=0;function re(xe){let ut;const Pt=xe.exec(U.substring(z));return Pt?(ut=Pt[0],z+=ut.length,ut):""}r(re,"collectCharacters");const Ee=[];for(;re(rn),!(z>=U.length);){let xe=re(oi);if(xe.slice(-1)===",")xe=Wt(k,xe.substring(0,xe.length-1)),Ee.push(xe);else{let ut="";xe=Wt(k,xe);let Pt=!1;for(;;){const bt=U.charAt(z);if(bt===""){Ee.push((xe+ut).trim());break}else if(Pt)bt===")"&&(Pt=!1);else if(bt===","){z+=1,Ee.push((xe+ut).trim());break}else bt==="("&&(Pt=!0);ut+=bt,z+=1}}}return Ee.join(", ")}r(cn,"getAbsoluteSrcsetString");function Wt(k,U){if(!U||U.trim()==="")return U;const z=k.createElement("a");return z.href=U,z.href}r(Wt,"absoluteToDoc");function J(k){return Boolean(k.tagName==="svg"||k.ownerSVGElement)}r(J,"isSVGElement");function Xe(){const k=document.createElement("a");return k.href="",k.href}r(Xe,"getHref");function nt(k,U,z,re,Ee,xe){return re&&(z==="src"||z==="href"&&!(U==="use"&&re[0]==="#")||z==="xlink:href"&&re[0]!=="#"||z==="background"&&(U==="table"||U==="td"||U==="th")?Wt(k,re):z==="srcset"?cn(k,re):z==="style"?sn(re,Xe()):U==="object"&&z==="data"?Wt(k,re):typeof xe=="function"?xe(z,re,Ee):re)}r(nt,"transformAttribute");function st(k,U,z){return(k==="video"||k==="audio")&&U==="autoplay"}r(st,"ignoreAttribute");function pt(k,U,z,re){try{if(re&&k.matches(re))return!1;if(typeof U=="string"){if(k.classList.contains(U))return!0}else for(let Ee=k.classList.length;Ee--;){const xe=k.classList[Ee];if(U.test(xe))return!0}if(z)return k.matches(z)}catch{}return!1}r(pt,"_isBlockedElement");function It(k,U){for(let z=k.classList.length;z--;){const re=k.classList[z];if(U.test(re))return!0}return!1}r(It,"elementClassMatchesRegex");function ve(k,U,z=1/0,re=0){return!k||k.nodeType!==k.ELEMENT_NODE||re>z?-1:U(k)?re:ve(k.parentNode,U,z,re+1)}r(ve,"distanceToMatch");function et(k,U){return z=>{const re=z;if(re===null)return!1;try{if(k){if(typeof k=="string"){if(re.matches(`.${k}`))return!0}else if(It(re,k))return!0}return!!(U&&re.matches(U))}catch{return!1}}}r(et,"createMatchPredicate");function G(k,U,z,re,Ee,xe){try{const ut=k.nodeType===k.ELEMENT_NODE?k:k.parentElement;if(ut===null)return!1;if(ut.tagName==="INPUT"){const Yt=ut.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(Yt))return!0}let Pt=-1,bt=-1;if(xe){if(bt=ve(ut,et(re,Ee)),bt<0)return!0;Pt=ve(ut,et(U,z),bt>=0?bt:1/0)}else{if(Pt=ve(ut,et(U,z)),Pt<0)return!1;bt=ve(ut,et(re,Ee),Pt>=0?Pt:1/0)}return Pt>=0?bt>=0?Pt<=bt:!0:bt>=0?!1:!!xe}catch{}return!!xe}r(G,"needMaskingText");function ne(k,U,z){const re=k.contentWindow;if(!re)return;let Ee=!1,xe;try{xe=re.document.readyState}catch{return}if(xe!=="complete"){const Pt=setTimeout(()=>{Ee||(U(),Ee=!0)},z);k.addEventListener("load",()=>{clearTimeout(Pt),Ee=!0,U()});return}const ut="about:blank";if(re.location.href!==ut||k.src===ut||k.src==="")return setTimeout(U,0),k.addEventListener("load",U);k.addEventListener("load",U)}r(ne,"onceIframeLoaded");function Me(k,U,z){let re=!1,Ee;try{Ee=k.sheet}catch{return}if(Ee)return;const xe=setTimeout(()=>{re||(U(),re=!0)},z);k.addEventListener("load",()=>{clearTimeout(xe),re=!0,U()})}r(Me,"onceStylesheetLoaded");function Re(k,U){const{doc:z,mirror:re,blockClass:Ee,blockSelector:xe,unblockSelector:ut,maskAllText:Pt,maskAttributeFn:bt,maskTextClass:Yt,unmaskTextClass:Ut,maskTextSelector:fn,unmaskTextSelector:yn,inlineStylesheet:Un,maskInputOptions:ti={},maskTextFn:Ii,maskInputFn:or,dataURLOptions:xi={},inlineImages:Sr,recordCanvas:Wr,keepIframeSrcFn:zr,newlyAddedElement:vo=!1}=U,fr=Ft(z,re);switch(k.nodeType){case k.DOCUMENT_NODE:return k.compatMode!=="CSS1Compat"?{type:H.Document,childNodes:[],compatMode:k.compatMode}:{type:H.Document,childNodes:[]};case k.DOCUMENT_TYPE_NODE:return{type:H.DocumentType,name:k.name,publicId:k.publicId,systemId:k.systemId,rootId:fr};case k.ELEMENT_NODE:return Tt(k,{doc:z,blockClass:Ee,blockSelector:xe,unblockSelector:ut,inlineStylesheet:Un,maskAttributeFn:bt,maskInputOptions:ti,maskInputFn:or,dataURLOptions:xi,inlineImages:Sr,recordCanvas:Wr,keepIframeSrcFn:zr,newlyAddedElement:vo,rootId:fr,maskAllText:Pt,maskTextClass:Yt,unmaskTextClass:Ut,maskTextSelector:fn,unmaskTextSelector:yn});case k.TEXT_NODE:return ot(k,{maskAllText:Pt,maskTextClass:Yt,unmaskTextClass:Ut,maskTextSelector:fn,unmaskTextSelector:yn,maskTextFn:Ii,maskInputOptions:ti,maskInputFn:or,rootId:fr});case k.CDATA_SECTION_NODE:return{type:H.CDATA,textContent:"",rootId:fr};case k.COMMENT_NODE:return{type:H.Comment,textContent:k.textContent||"",rootId:fr};default:return!1}}r(Re,"serializeNode");function Ft(k,U){if(!U.hasNode(k))return;const z=U.getId(k);return z===1?void 0:z}r(Ft,"getRootId");function ot(k,U){const{maskAllText:z,maskTextClass:re,unmaskTextClass:Ee,maskTextSelector:xe,unmaskTextSelector:ut,maskTextFn:Pt,maskInputOptions:bt,maskInputFn:Yt,rootId:Ut}=U,fn=k.parentNode&&k.parentNode.tagName;let yn=k.textContent;const Un=fn==="STYLE"?!0:void 0,ti=fn==="SCRIPT"?!0:void 0,Ii=fn==="TEXTAREA"?!0:void 0;if(Un&&yn){try{k.nextSibling||k.previousSibling||L([k,"access",xi=>xi.parentNode,"access",xi=>xi.sheet,"optionalAccess",xi=>xi.cssRules])&&(yn=Te(k.parentNode.sheet))}catch(xi){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${xi}`,k)}yn=sn(yn,Xe())}ti&&(yn="SCRIPT_PLACEHOLDER");const or=G(k,re,xe,Ee,ut,z);if(!Un&&!ti&&!Ii&&yn&&or&&(yn=Pt?Pt(yn,k.parentElement):yn.replace(/[\S]/g,"*")),Ii&&yn&&(bt.textarea||or)&&(yn=Yt?Yt(yn,k.parentNode):yn.replace(/[\S]/g,"*")),fn==="OPTION"&&yn){const xi=Je({type:null,tagName:fn,maskInputOptions:bt});yn=dt({isMasked:G(k,re,xe,Ee,ut,xi),element:k,value:yn,maskInputFn:Yt})}return{type:H.Text,textContent:yn||"",isStyle:Un,rootId:Ut}}r(ot,"serializeTextNode");function Tt(k,U){const{doc:z,blockClass:re,blockSelector:Ee,unblockSelector:xe,inlineStylesheet:ut,maskInputOptions:Pt={},maskAttributeFn:bt,maskInputFn:Yt,dataURLOptions:Ut={},inlineImages:fn,recordCanvas:yn,keepIframeSrcFn:Un,newlyAddedElement:ti=!1,rootId:Ii,maskAllText:or,maskTextClass:xi,unmaskTextClass:Sr,maskTextSelector:Wr,unmaskTextSelector:zr}=U,vo=pt(k,re,Ee,xe),fr=bn(k);let Li={};const Dr=k.attributes.length;for(let Ni=0;Ni<Dr;Ni++){const vr=k.attributes[Ni];vr.name&&!st(fr,vr.name,vr.value)&&(Li[vr.name]=nt(z,fr,Ot(vr.name),vr.value,k,bt))}if(fr==="link"&&ut){const Ni=Array.from(z.styleSheets).find(co=>co.href===k.href);let vr=null;Ni&&(vr=Te(Ni)),vr&&(delete Li.rel,delete Li.href,Li._cssText=sn(vr,Ni.href))}if(fr==="style"&&k.sheet&&!(k.innerText||k.textContent||"").trim().length){const Ni=Te(k.sheet);Ni&&(Li._cssText=sn(Ni,Xe()))}if(fr==="input"||fr==="textarea"||fr==="select"||fr==="option"){const Ni=k,vr=ct(Ni),co=yt(Ni,Nt(fr),vr),Mo=Ni.checked;if(vr!=="submit"&&vr!=="button"&&co){const Bo=G(Ni,xi,Wr,Sr,zr,Je({type:vr,tagName:Nt(fr),maskInputOptions:Pt}));Li.value=dt({isMasked:Bo,element:Ni,value:co,maskInputFn:Yt})}Mo&&(Li.checked=Mo)}if(fr==="option"&&(k.selected&&!Pt.select?Li.selected=!0:delete Li.selected),fr==="canvas"&&yn){if(k.__context==="2d")He(k)||(Li.rr_dataURL=k.toDataURL(Ut.type,Ut.quality));else if(!("__context"in k)){const Ni=k.toDataURL(Ut.type,Ut.quality),vr=document.createElement("canvas");vr.width=k.width,vr.height=k.height;const co=vr.toDataURL(Ut.type,Ut.quality);Ni!==co&&(Li.rr_dataURL=Ni)}}if(fr==="img"&&fn){Zt||(Zt=z.createElement("canvas"),Mn=Zt.getContext("2d"));const Ni=k,vr=Ni.crossOrigin;Ni.crossOrigin="anonymous";const co=r(()=>{Ni.removeEventListener("load",co);try{Zt.width=Ni.naturalWidth,Zt.height=Ni.naturalHeight,Mn.drawImage(Ni,0,0),Li.rr_dataURL=Zt.toDataURL(Ut.type,Ut.quality)}catch(Mo){console.warn(`Cannot inline img src=${Ni.currentSrc}! Error: ${Mo}`)}vr?Li.crossOrigin=vr:Ni.removeAttribute("crossorigin")},"recordInlineImage");Ni.complete&&Ni.naturalWidth!==0?co():Ni.addEventListener("load",co)}if((fr==="audio"||fr==="video")&&(Li.rr_mediaState=k.paused?"paused":"played",Li.rr_mediaCurrentTime=k.currentTime),ti||(k.scrollLeft&&(Li.rr_scrollLeft=k.scrollLeft),k.scrollTop&&(Li.rr_scrollTop=k.scrollTop)),vo){const{width:Ni,height:vr}=k.getBoundingClientRect();Li={class:Li.class,rr_width:`${Ni}px`,rr_height:`${vr}px`}}fr==="iframe"&&!Un(Li.src)&&(k.contentDocument||(Li.rr_src=Li.src),delete Li.src);let Ao;try{customElements.get(fr)&&(Ao=!0)}catch{}return{type:H.Element,tagName:fr,attributes:Li,childNodes:[],isSVG:J(k)||void 0,needBlock:vo,rootId:Ii,isCustom:Ao}}r(Tt,"serializeElementNode");function we(k){return k==null?"":k.toLowerCase()}r(we,"lowerIfExists");function Ue(k,U){if(U.comment&&k.type===H.Comment)return!0;if(k.type===H.Element){if(U.script&&(k.tagName==="script"||k.tagName==="link"&&(k.attributes.rel==="preload"||k.attributes.rel==="modulepreload")&&k.attributes.as==="script"||k.tagName==="link"&&k.attributes.rel==="prefetch"&&typeof k.attributes.href=="string"&&k.attributes.href.endsWith(".js")))return!0;if(U.headFavicon&&(k.tagName==="link"&&k.attributes.rel==="shortcut icon"||k.tagName==="meta"&&(we(k.attributes.name).match(/^msapplication-tile(image|color)$/)||we(k.attributes.name)==="application-name"||we(k.attributes.rel)==="icon"||we(k.attributes.rel)==="apple-touch-icon"||we(k.attributes.rel)==="shortcut icon")))return!0;if(k.tagName==="meta"){if(U.headMetaDescKeywords&&we(k.attributes.name).match(/^description|keywords$/))return!0;if(U.headMetaSocial&&(we(k.attributes.property).match(/^(og|twitter|fb):/)||we(k.attributes.name).match(/^(og|twitter):/)||we(k.attributes.name)==="pinterest"))return!0;if(U.headMetaRobots&&(we(k.attributes.name)==="robots"||we(k.attributes.name)==="googlebot"||we(k.attributes.name)==="bingbot"))return!0;if(U.headMetaHttpEquiv&&k.attributes["http-equiv"]!==void 0)return!0;if(U.headMetaAuthorship&&(we(k.attributes.name)==="author"||we(k.attributes.name)==="generator"||we(k.attributes.name)==="framework"||we(k.attributes.name)==="publisher"||we(k.attributes.name)==="progid"||we(k.attributes.property).match(/^article:/)||we(k.attributes.property).match(/^product:/)))return!0;if(U.headMetaVerification&&(we(k.attributes.name)==="google-site-verification"||we(k.attributes.name)==="yandex-verification"||we(k.attributes.name)==="csrf-token"||we(k.attributes.name)==="p:domain_verify"||we(k.attributes.name)==="verify-v1"||we(k.attributes.name)==="verification"||we(k.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}r(Ue,"slimDOMExcluded");function F(k,U){const{doc:z,mirror:re,blockClass:Ee,blockSelector:xe,unblockSelector:ut,maskAllText:Pt,maskTextClass:bt,unmaskTextClass:Yt,maskTextSelector:Ut,unmaskTextSelector:fn,skipChild:yn=!1,inlineStylesheet:Un=!0,maskInputOptions:ti={},maskAttributeFn:Ii,maskTextFn:or,maskInputFn:xi,slimDOMOptions:Sr,dataURLOptions:Wr={},inlineImages:zr=!1,recordCanvas:vo=!1,onSerialize:fr,onIframeLoad:Li,iframeLoadTimeout:Dr=5e3,onStylesheetLoad:Ao,stylesheetLoadTimeout:Ni=5e3,keepIframeSrcFn:vr=r(()=>!1,"keepIframeSrcFn"),newlyAddedElement:co=!1}=U;let{preserveWhiteSpace:Mo=!0}=U;const Bo=Re(k,{doc:z,mirror:re,blockClass:Ee,blockSelector:xe,maskAllText:Pt,unblockSelector:ut,maskTextClass:bt,unmaskTextClass:Yt,maskTextSelector:Ut,unmaskTextSelector:fn,inlineStylesheet:Un,maskInputOptions:ti,maskAttributeFn:Ii,maskTextFn:or,maskInputFn:xi,dataURLOptions:Wr,inlineImages:zr,recordCanvas:vo,keepIframeSrcFn:vr,newlyAddedElement:co});if(!Bo)return console.warn(k,"not serialized"),null;let ss;re.hasNode(k)?ss=re.getId(k):Ue(Bo,Sr)||!Mo&&Bo.type===H.Text&&!Bo.isStyle&&!Bo.textContent.replace(/^\s+|\s+$/gm,"").length?ss=Xt:ss=dn();const to=Object.assign(Bo,{id:ss});if(re.add(k,to),ss===Xt)return null;fr&&fr(k);let ds=!yn;if(to.type===H.Element){ds=ds&&!to.needBlock,delete to.needBlock;const Uo=k.shadowRoot;Uo&&q(Uo)&&(to.isShadowHost=!0)}if((to.type===H.Document||to.type===H.Element)&&ds){Sr.headWhitespace&&to.type===H.Element&&to.tagName==="head"&&(Mo=!1);const Uo={doc:z,mirror:re,blockClass:Ee,blockSelector:xe,maskAllText:Pt,unblockSelector:ut,maskTextClass:bt,unmaskTextClass:Yt,maskTextSelector:Ut,unmaskTextSelector:fn,skipChild:yn,inlineStylesheet:Un,maskInputOptions:ti,maskAttributeFn:Ii,maskTextFn:or,maskInputFn:xi,slimDOMOptions:Sr,dataURLOptions:Wr,inlineImages:zr,recordCanvas:vo,preserveWhiteSpace:Mo,onSerialize:fr,onIframeLoad:Li,iframeLoadTimeout:Dr,onStylesheetLoad:Ao,stylesheetLoadTimeout:Ni,keepIframeSrcFn:vr};for(const Rs of Array.from(k.childNodes)){const Ks=F(Rs,Uo);Ks&&to.childNodes.push(Ks)}if(K(k)&&k.shadowRoot)for(const Rs of Array.from(k.shadowRoot.childNodes)){const Ks=F(Rs,Uo);Ks&&(q(k.shadowRoot)&&(Ks.isShadow=!0),to.childNodes.push(Ks))}}return k.parentNode&&ee(k.parentNode)&&q(k.parentNode)&&(to.isShadow=!0),to.type===H.Element&&to.tagName==="iframe"&&ne(k,()=>{const Uo=k.contentDocument;if(Uo&&Li){const Rs=F(Uo,{doc:Uo,mirror:re,blockClass:Ee,blockSelector:xe,unblockSelector:ut,maskAllText:Pt,maskTextClass:bt,unmaskTextClass:Yt,maskTextSelector:Ut,unmaskTextSelector:fn,skipChild:!1,inlineStylesheet:Un,maskInputOptions:ti,maskAttributeFn:Ii,maskTextFn:or,maskInputFn:xi,slimDOMOptions:Sr,dataURLOptions:Wr,inlineImages:zr,recordCanvas:vo,preserveWhiteSpace:Mo,onSerialize:fr,onIframeLoad:Li,iframeLoadTimeout:Dr,onStylesheetLoad:Ao,stylesheetLoadTimeout:Ni,keepIframeSrcFn:vr});Rs&&Li(k,Rs)}},Dr),to.type===H.Element&&to.tagName==="link"&&to.attributes.rel==="stylesheet"&&Me(k,()=>{if(Ao){const Uo=F(k,{doc:z,mirror:re,blockClass:Ee,blockSelector:xe,unblockSelector:ut,maskAllText:Pt,maskTextClass:bt,unmaskTextClass:Yt,maskTextSelector:Ut,unmaskTextSelector:fn,skipChild:!1,inlineStylesheet:Un,maskInputOptions:ti,maskAttributeFn:Ii,maskTextFn:or,maskInputFn:xi,slimDOMOptions:Sr,dataURLOptions:Wr,inlineImages:zr,recordCanvas:vo,preserveWhiteSpace:Mo,onSerialize:fr,onIframeLoad:Li,iframeLoadTimeout:Dr,onStylesheetLoad:Ao,stylesheetLoadTimeout:Ni,keepIframeSrcFn:vr});Uo&&Ao(k,Uo)}},Ni),to}r(F,"serializeNodeWithId");function Oe(k,U){const{mirror:z=new $e,blockClass:re="rr-block",blockSelector:Ee=null,unblockSelector:xe=null,maskAllText:ut=!1,maskTextClass:Pt="rr-mask",unmaskTextClass:bt=null,maskTextSelector:Yt=null,unmaskTextSelector:Ut=null,inlineStylesheet:fn=!0,inlineImages:yn=!1,recordCanvas:Un=!1,maskAllInputs:ti=!1,maskAttributeFn:Ii,maskTextFn:or,maskInputFn:xi,slimDOM:Sr=!1,dataURLOptions:Wr,preserveWhiteSpace:zr,onSerialize:vo,onIframeLoad:fr,iframeLoadTimeout:Li,onStylesheetLoad:Dr,stylesheetLoadTimeout:Ao,keepIframeSrcFn:Ni=r(()=>!1,"keepIframeSrcFn")}=U||{};return F(k,{doc:k,mirror:z,blockClass:re,blockSelector:Ee,unblockSelector:xe,maskAllText:ut,maskTextClass:Pt,unmaskTextClass:bt,maskTextSelector:Yt,unmaskTextSelector:Ut,skipChild:!1,inlineStylesheet:fn,maskInputOptions:ti===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:ti===!1?{}:ti,maskAttributeFn:Ii,maskTextFn:or,maskInputFn:xi,slimDOMOptions:Sr===!0||Sr==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Sr==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Sr===!1?{}:Sr,dataURLOptions:Wr,inlineImages:yn,recordCanvas:Un,preserveWhiteSpace:zr,onSerialize:vo,onIframeLoad:fr,iframeLoadTimeout:Li,onStylesheetLoad:Dr,stylesheetLoadTimeout:Ao,keepIframeSrcFn:Ni,newlyAddedElement:!1})}r(Oe,"snapshot");function se(k){let U,z=k[0],re=1;for(;re<k.length;){const Ee=k[re],xe=k[re+1];if(re+=2,(Ee==="optionalAccess"||Ee==="optionalCall")&&z==null)return;Ee==="access"||Ee==="optionalAccess"?(U=z,z=xe(z)):(Ee==="call"||Ee==="optionalCall")&&(z=xe((...ut)=>z.call(U,...ut)),U=void 0)}return z}r(se,"_optionalChain$4");function ue(k,U,z=document){const re={capture:!0,passive:!0};return z.addEventListener(k,U,re),()=>z.removeEventListener(k,U,re)}r(ue,"on");const X=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let lt={map:{},getId(){return console.error(X),-1},getNode(){return console.error(X),null},removeNodeFromMap(){console.error(X)},has(){return console.error(X),!1},reset(){console.error(X)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(lt=new Proxy(lt,{get(k,U,z){return U==="map"&&console.error(X),Reflect.get(k,U,z)}}));function Ae(k,U,z={}){let re=null,Ee=0;return function(...xe){const ut=Date.now();!Ee&&z.leading===!1&&(Ee=ut);const Pt=U-(ut-Ee),bt=this;Pt<=0||Pt>U?(re&&(Nr(re),re=null),Ee=ut,k.apply(bt,xe)):!re&&z.trailing!==!1&&(re=Vi(()=>{Ee=z.leading===!1?0:Date.now(),re=null,k.apply(bt,xe)},Pt))}}r(Ae,"throttle$1");function Ye(k,U,z,re,Ee=window){const xe=Ee.Object.getOwnPropertyDescriptor(k,U);return Ee.Object.defineProperty(k,U,re?z:{set(ut){Vi(()=>{z.set.call(this,ut)},0),xe&&xe.set&&xe.set.call(this,ut)}}),()=>Ye(k,U,xe||{},!0)}r(Ye,"hookSetter");function Ht(k,U,z){try{if(!(U in k))return()=>{};const re=k[U],Ee=z(re);return typeof Ee=="function"&&(Ee.prototype=Ee.prototype||{},Object.defineProperties(Ee,{__rrweb_original__:{enumerable:!1,value:re}})),k[U]=Ee,()=>{k[U]=re}}catch{return()=>{}}}r(Ht,"patch");let Mt=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Mt=r(()=>new Date().getTime(),"nowTimestamp"));function Qn(k){const U=k.document;return{left:U.scrollingElement?U.scrollingElement.scrollLeft:k.pageXOffset!==void 0?k.pageXOffset:se([U,"optionalAccess",z=>z.documentElement,"access",z=>z.scrollLeft])||se([U,"optionalAccess",z=>z.body,"optionalAccess",z=>z.parentElement,"optionalAccess",z=>z.scrollLeft])||se([U,"optionalAccess",z=>z.body,"optionalAccess",z=>z.scrollLeft])||0,top:U.scrollingElement?U.scrollingElement.scrollTop:k.pageYOffset!==void 0?k.pageYOffset:se([U,"optionalAccess",z=>z.documentElement,"access",z=>z.scrollTop])||se([U,"optionalAccess",z=>z.body,"optionalAccess",z=>z.parentElement,"optionalAccess",z=>z.scrollTop])||se([U,"optionalAccess",z=>z.body,"optionalAccess",z=>z.scrollTop])||0}}r(Qn,"getWindowScroll");function $n(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}r($n,"getWindowHeight");function Vn(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}r(Vn,"getWindowWidth");function kn(k){return k?k.nodeType===k.ELEMENT_NODE?k:k.parentElement:null}r(kn,"closestElementOfNode");function tn(k,U,z,re,Ee){if(!k)return!1;const xe=kn(k);if(!xe)return!1;const ut=et(U,z);if(!Ee){const Yt=re&&xe.matches(re);return ut(xe)&&!Yt}const Pt=ve(xe,ut);let bt=-1;return Pt<0?!1:(re&&(bt=ve(xe,et(null,re))),Pt>-1&&bt<0?!0:Pt<bt)}r(tn,"isBlocked");function Gn(k,U){return U.getId(k)!==-1}r(Gn,"isSerialized");function Si(k,U){return U.getId(k)===Xt}r(Si,"isIgnored");function nr(k,U){if(ee(k))return!1;const z=U.getId(k);return U.has(z)?k.parentNode&&k.parentNode.nodeType===k.DOCUMENT_NODE?!1:k.parentNode?nr(k.parentNode,U):!0:!0}r(nr,"isAncestorRemoved");function ln(k){return Boolean(k.changedTouches)}r(ln,"legacy_isTouchEvent");function jt(k=window){"NodeList"in k&&!k.NodeList.prototype.forEach&&(k.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in k&&!k.DOMTokenList.prototype.forEach&&(k.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...U)=>{let z=U[0];if(!(0 in U))throw new TypeError("1 argument is required");do if(this===z)return!0;while(z=z&&z.parentNode);return!1})}r(jt,"polyfill");function Fn(k,U){return Boolean(k.nodeName==="IFRAME"&&U.getMeta(k))}r(Fn,"isSerializedIframe");function Hn(k,U){return Boolean(k.nodeName==="LINK"&&k.nodeType===k.ELEMENT_NODE&&k.getAttribute&&k.getAttribute("rel")==="stylesheet"&&U.getMeta(k))}r(Hn,"isSerializedStylesheet");function wi(k){return Boolean(se([k,"optionalAccess",U=>U.shadowRoot]))}r(wi,"hasShadowRoot");class Pi{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(U){return u(this.styleIDMap.get(U),()=>-1)}has(U){return this.styleIDMap.has(U)}add(U,z){if(this.has(U))return this.getId(U);let re;return z===void 0?re=this.id++:re=z,this.styleIDMap.set(U,re),this.idStyleMap.set(re,U),re}getStyle(U){return this.idStyleMap.get(U)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}r(Pi,"StyleSheetMirror");function ni(k){let U=null;return se([k,"access",z=>z.getRootNode,"optionalCall",z=>z(),"optionalAccess",z=>z.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&k.getRootNode().host&&(U=k.getRootNode().host),U}r(ni,"getShadowHost");function Kn(k){let U=k,z;for(;z=ni(U);)U=z;return U}r(Kn,"getRootShadowHost");function ji(k){const U=k.ownerDocument;if(!U)return!1;const z=Kn(k);return U.contains(z)}r(ji,"shadowHostInDom");function $i(k){const U=k.ownerDocument;return U?U.contains(k)||ji(k):!1}r($i,"inDom");const sr={};function Ai(k){const U=sr[k];if(U)return U;const z=window.document;let re=window[k];if(z&&typeof z.createElement=="function")try{const Ee=z.createElement("iframe");Ee.hidden=!0,z.head.appendChild(Ee);const xe=Ee.contentWindow;xe&&xe[k]&&(re=xe[k]),z.head.removeChild(Ee)}catch{}return sr[k]=re.bind(window)}r(Ai,"getImplementation");function Lr(...k){return Ai("requestAnimationFrame")(...k)}r(Lr,"onRequestAnimationFrame");function Vi(...k){return Ai("setTimeout")(...k)}r(Vi,"setTimeout$1");function Nr(...k){return Ai("clearTimeout")(...k)}r(Nr,"clearTimeout$1");var _i=(k=>(k[k.DomContentLoaded=0]="DomContentLoaded",k[k.Load=1]="Load",k[k.FullSnapshot=2]="FullSnapshot",k[k.IncrementalSnapshot=3]="IncrementalSnapshot",k[k.Meta=4]="Meta",k[k.Custom=5]="Custom",k[k.Plugin=6]="Plugin",k))(_i||{}),Ci=(k=>(k[k.Mutation=0]="Mutation",k[k.MouseMove=1]="MouseMove",k[k.MouseInteraction=2]="MouseInteraction",k[k.Scroll=3]="Scroll",k[k.ViewportResize=4]="ViewportResize",k[k.Input=5]="Input",k[k.TouchMove=6]="TouchMove",k[k.MediaInteraction=7]="MediaInteraction",k[k.StyleSheetRule=8]="StyleSheetRule",k[k.CanvasMutation=9]="CanvasMutation",k[k.Font=10]="Font",k[k.Log=11]="Log",k[k.Drag=12]="Drag",k[k.StyleDeclaration=13]="StyleDeclaration",k[k.Selection=14]="Selection",k[k.AdoptedStyleSheet=15]="AdoptedStyleSheet",k[k.CustomElement=16]="CustomElement",k))(Ci||{}),N=(k=>(k[k.MouseUp=0]="MouseUp",k[k.MouseDown=1]="MouseDown",k[k.Click=2]="Click",k[k.ContextMenu=3]="ContextMenu",k[k.DblClick=4]="DblClick",k[k.Focus=5]="Focus",k[k.Blur=6]="Blur",k[k.TouchStart=7]="TouchStart",k[k.TouchMove_Departed=8]="TouchMove_Departed",k[k.TouchEnd=9]="TouchEnd",k[k.TouchCancel=10]="TouchCancel",k))(N||{}),he=(k=>(k[k.Mouse=0]="Mouse",k[k.Pen=1]="Pen",k[k.Touch=2]="Touch",k))(he||{});function je(k){let U,z=k[0],re=1;for(;re<k.length;){const Ee=k[re],xe=k[re+1];if(re+=2,(Ee==="optionalAccess"||Ee==="optionalCall")&&z==null)return;Ee==="access"||Ee==="optionalAccess"?(U=z,z=xe(z)):(Ee==="call"||Ee==="optionalCall")&&(z=xe((...ut)=>z.call(U,...ut)),U=void 0)}return z}r(je,"_optionalChain$3");function Rt(k){return"__ln"in k}r(Rt,"isNodeInLinkedList");class Qt{constructor(){this.length=0,this.head=null,this.tail=null}get(U){if(U>=this.length)throw new Error("Position outside of list range");let z=this.head;for(let re=0;re<U;re++)z=je([z,"optionalAccess",Ee=>Ee.next])||null;return z}addNode(U){const z={value:U,previous:null,next:null};if(U.__ln=z,U.previousSibling&&Rt(U.previousSibling)){const re=U.previousSibling.__ln.next;z.next=re,z.previous=U.previousSibling.__ln,U.previousSibling.__ln.next=z,re&&(re.previous=z)}else if(U.nextSibling&&Rt(U.nextSibling)&&U.nextSibling.__ln.previous){const re=U.nextSibling.__ln.previous;z.previous=re,z.next=U.nextSibling.__ln,U.nextSibling.__ln.previous=z,re&&(re.next=z)}else this.head&&(this.head.previous=z),z.next=this.head,this.head=z;z.next===null&&(this.tail=z),this.length++}removeNode(U){const z=U.__ln;this.head&&(z.previous?(z.previous.next=z.next,z.next?z.next.previous=z.previous:this.tail=z.previous):(this.head=z.next,this.head?this.head.previous=null:this.tail=null),U.__ln&&delete U.__ln,this.length--)}}r(Qt,"DoubleLinkedList");const An=r((k,U)=>`${k}@${U}`,"moveKey");class qn{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=U=>{U.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const U=[],z=new Set,re=new Qt,Ee=r(bt=>{let Yt=bt,Ut=Xt;for(;Ut===Xt;)Yt=Yt&&Yt.nextSibling,Ut=Yt&&this.mirror.getId(Yt);return Ut},"getNextId"),xe=r(bt=>{if(!bt.parentNode||!$i(bt))return;const Yt=ee(bt.parentNode)?this.mirror.getId(ni(bt)):this.mirror.getId(bt.parentNode),Ut=Ee(bt);if(Yt===-1||Ut===-1)return re.addNode(bt);const fn=F(bt,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:yn=>{Fn(yn,this.mirror)&&this.iframeManager.addIframe(yn),Hn(yn,this.mirror)&&this.stylesheetManager.trackLinkElement(yn),wi(bt)&&this.shadowDomManager.addShadowRoot(bt.shadowRoot,this.doc)},onIframeLoad:(yn,Un)=>{this.iframeManager.attachIframe(yn,Un),this.shadowDomManager.observeAttachShadow(yn)},onStylesheetLoad:(yn,Un)=>{this.stylesheetManager.attachLinkElement(yn,Un)}});fn&&(U.push({parentId:Yt,nextId:Ut,node:fn}),z.add(fn.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const bt of this.movedSet)xn(this.removes,bt,this.mirror)&&!this.movedSet.has(bt.parentNode)||xe(bt);for(const bt of this.addedSet)!li(this.droppedSet,bt)&&!xn(this.removes,bt,this.mirror)||li(this.movedSet,bt)?xe(bt):this.droppedSet.add(bt);let ut=null;for(;re.length;){let bt=null;if(ut){const Yt=this.mirror.getId(ut.value.parentNode),Ut=Ee(ut.value);Yt!==-1&&Ut!==-1&&(bt=ut)}if(!bt){let Yt=re.tail;for(;Yt;){const Ut=Yt;if(Yt=Yt.previous,Ut){const fn=this.mirror.getId(Ut.value.parentNode);if(Ee(Ut.value)===-1)continue;if(fn!==-1){bt=Ut;break}else{const Un=Ut.value;if(Un.parentNode&&Un.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const ti=Un.parentNode.host;if(this.mirror.getId(ti)!==-1){bt=Ut;break}}}}}}if(!bt){for(;re.head;)re.removeNode(re.head.value);break}ut=bt.previous,re.removeNode(bt.value),xe(bt.value)}const Pt={texts:this.texts.map(bt=>({id:this.mirror.getId(bt.node),value:bt.value})).filter(bt=>!z.has(bt.id)).filter(bt=>this.mirror.has(bt.id)),attributes:this.attributes.map(bt=>{const{attributes:Yt}=bt;if(typeof Yt.style=="string"){const Ut=JSON.stringify(bt.styleDiff),fn=JSON.stringify(bt._unchangedStyles);Ut.length<Yt.style.length&&(Ut+fn).split("var(").length===Yt.style.split("var(").length&&(Yt.style=bt.styleDiff)}return{id:this.mirror.getId(bt.node),attributes:Yt}}).filter(bt=>!z.has(bt.id)).filter(bt=>this.mirror.has(bt.id)),removes:this.removes,adds:U};!Pt.texts.length&&!Pt.attributes.length&&!Pt.removes.length&&!Pt.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(Pt))},this.processMutation=U=>{if(!Si(U.target,this.mirror))switch(U.type){case"characterData":{const z=U.target.textContent;!tn(U.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&z!==U.oldValue&&this.texts.push({value:G(U.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&z?this.maskTextFn?this.maskTextFn(z,kn(U.target)):z.replace(/[\S]/g,"*"):z,node:U.target});break}case"attributes":{const z=U.target;let re=U.attributeName,Ee=U.target.getAttribute(re);if(re==="value"){const ut=ct(z),Pt=z.tagName;Ee=yt(z,Pt,ut);const bt=Je({maskInputOptions:this.maskInputOptions,tagName:Pt,type:ut}),Yt=G(U.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,bt);Ee=dt({isMasked:Yt,element:z,value:Ee,maskInputFn:this.maskInputFn})}if(tn(U.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ee===U.oldValue)return;let xe=this.attributeMap.get(U.target);if(z.tagName==="IFRAME"&&re==="src"&&!this.keepIframeSrcFn(Ee))if(!z.contentDocument)re="rr_src";else return;if(xe||(xe={node:U.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(xe),this.attributeMap.set(U.target,xe)),re==="type"&&z.tagName==="INPUT"&&(U.oldValue||"").toLowerCase()==="password"&&z.setAttribute("data-rr-is-password","true"),!st(z.tagName,re)&&(xe.attributes[re]=nt(this.doc,Ot(z.tagName),Ot(re),Ee,z,this.maskAttributeFn),re==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const ut=this.unattachedDoc.createElement("span");U.oldValue&&ut.setAttribute("style",U.oldValue);for(const Pt of Array.from(z.style)){const bt=z.style.getPropertyValue(Pt),Yt=z.style.getPropertyPriority(Pt);bt!==ut.style.getPropertyValue(Pt)||Yt!==ut.style.getPropertyPriority(Pt)?Yt===""?xe.styleDiff[Pt]=bt:xe.styleDiff[Pt]=[bt,Yt]:xe._unchangedStyles[Pt]=[bt,Yt]}for(const Pt of Array.from(ut.style))z.style.getPropertyValue(Pt)===""&&(xe.styleDiff[Pt]=!1)}break}case"childList":{if(tn(U.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;U.addedNodes.forEach(z=>this.genAdds(z,U.target)),U.removedNodes.forEach(z=>{const re=this.mirror.getId(z),Ee=ee(U.target)?this.mirror.getId(U.target.host):this.mirror.getId(U.target);tn(U.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Si(z,this.mirror)||!Gn(z,this.mirror)||(this.addedSet.has(z)?(Pn(this.addedSet,z),this.droppedSet.add(z)):this.addedSet.has(U.target)&&re===-1||nr(U.target,this.mirror)||(this.movedSet.has(z)&&this.movedMap[An(re,Ee)]?Pn(this.movedSet,z):this.removes.push({parentId:Ee,id:re,isShadow:ee(U.target)&&q(U.target)?!0:void 0})),this.mapRemoves.push(z))});break}}},this.genAdds=(U,z)=>{if(!this.processedNodeManager.inOtherBuffer(U,this)&&!(this.addedSet.has(U)||this.movedSet.has(U))){if(this.mirror.hasNode(U)){if(Si(U,this.mirror))return;this.movedSet.add(U);let re=null;z&&this.mirror.hasNode(z)&&(re=this.mirror.getId(z)),re&&re!==-1&&(this.movedMap[An(this.mirror.getId(U),re)]=!0)}else this.addedSet.add(U),this.droppedSet.delete(U);tn(U,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(U.childNodes.forEach(re=>this.genAdds(re)),wi(U)&&U.shadowRoot.childNodes.forEach(re=>{this.processedNodeManager.add(re,this),this.genAdds(re,U)}))}}}init(U){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(z=>{this[z]=U[z]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}r(qn,"MutationBuffer");function Pn(k,U){k.delete(U),U.childNodes.forEach(z=>Pn(k,z))}r(Pn,"deepDelete");function xn(k,U,z){return k.length===0?!1:Xn(k,U,z)}r(xn,"isParentRemoved");function Xn(k,U,z){const{parentNode:re}=U;if(!re)return!1;const Ee=z.getId(re);return k.some(xe=>xe.id===Ee)?!0:Xn(k,re,z)}r(Xn,"_isParentRemoved");function li(k,U){return k.size===0?!1:Ri(k,U)}r(li,"isAncestorInSet");function Ri(k,U){const{parentNode:z}=U;return z?k.has(z)?!0:Ri(k,z):!1}r(Ri,"_isAncestorInSet");let zi;function gr(k){zi=k}r(gr,"registerErrorHandler");function Fr(){zi=void 0}r(Fr,"unregisterErrorHandler");const ri=r(k=>zi?r((...z)=>{try{return k(...z)}catch(re){if(zi&&zi(re)===!0)return()=>{};throw re}},"rrwebWrapped"):k,"callbackWrapper");function Er(k){let U,z=k[0],re=1;for(;re<k.length;){const Ee=k[re],xe=k[re+1];if(re+=2,(Ee==="optionalAccess"||Ee==="optionalCall")&&z==null)return;Ee==="access"||Ee==="optionalAccess"?(U=z,z=xe(z)):(Ee==="call"||Ee==="optionalCall")&&(z=xe((...ut)=>z.call(U,...ut)),U=void 0)}return z}r(Er,"_optionalChain$2");const Rr=[];function ei(k){try{if("composedPath"in k){const U=k.composedPath();if(U.length)return U[0]}else if("path"in k&&k.path.length)return k.path[0]}catch{}return k&&k.target}r(ei,"getEventTarget");function hr(k,U){const z=new qn;Rr.push(z),z.init(k);let re=window.MutationObserver||window.__rrMutationObserver;const Ee=Er([window,"optionalAccess",ut=>ut.Zone,"optionalAccess",ut=>ut.__symbol__,"optionalCall",ut=>ut("MutationObserver")]);Ee&&window[Ee]&&(re=window[Ee]);const xe=new re(ri(ut=>{k.onMutation&&k.onMutation(ut)===!1||z.processMutations.bind(z)(ut)}));return xe.observe(U,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),xe}r(hr,"initMutationObserver");function si({mousemoveCb:k,sampling:U,doc:z,mirror:re}){if(U.mousemove===!1)return()=>{};const Ee=typeof U.mousemove=="number"?U.mousemove:50,xe=typeof U.mousemoveCallback=="number"?U.mousemoveCallback:500;let ut=[],Pt;const bt=Ae(ri(fn=>{const yn=Date.now()-Pt;k(ut.map(Un=>(Un.timeOffset-=yn,Un)),fn),ut=[],Pt=null}),xe),Yt=ri(Ae(ri(fn=>{const yn=ei(fn),{clientX:Un,clientY:ti}=ln(fn)?fn.changedTouches[0]:fn;Pt||(Pt=Mt()),ut.push({x:Un,y:ti,id:re.getId(yn),timeOffset:Mt()-Pt}),bt(typeof DragEvent<"u"&&fn instanceof DragEvent?Ci.Drag:fn instanceof MouseEvent?Ci.MouseMove:Ci.TouchMove)}),Ee,{trailing:!1})),Ut=[ue("mousemove",Yt,z),ue("touchmove",Yt,z),ue("drag",Yt,z)];return ri(()=>{Ut.forEach(fn=>fn())})}r(si,"initMoveObserver");function Eo({mouseInteractionCb:k,doc:U,mirror:z,blockClass:re,blockSelector:Ee,unblockSelector:xe,sampling:ut}){if(ut.mouseInteraction===!1)return()=>{};const Pt=ut.mouseInteraction===!0||ut.mouseInteraction===void 0?{}:ut.mouseInteraction,bt=[];let Yt=null;const Ut=r(fn=>yn=>{const Un=ei(yn);if(tn(Un,re,Ee,xe,!0))return;let ti=null,Ii=fn;if("pointerType"in yn){switch(yn.pointerType){case"mouse":ti=he.Mouse;break;case"touch":ti=he.Touch;break;case"pen":ti=he.Pen;break}ti===he.Touch?N[fn]===N.MouseDown?Ii="TouchStart":N[fn]===N.MouseUp&&(Ii="TouchEnd"):he.Pen}else ln(yn)&&(ti=he.Touch);ti!==null?(Yt=ti,(Ii.startsWith("Touch")&&ti===he.Touch||Ii.startsWith("Mouse")&&ti===he.Mouse)&&(ti=null)):N[fn]===N.Click&&(ti=Yt,Yt=null);const or=ln(yn)?yn.changedTouches[0]:yn;if(!or)return;const xi=z.getId(Un),{clientX:Sr,clientY:Wr}=or;ri(k)({type:N[Ii],id:xi,x:Sr,y:Wr,...ti!==null&&{pointerType:ti}})},"getHandler");return Object.keys(N).filter(fn=>Number.isNaN(Number(fn))&&!fn.endsWith("_Departed")&&Pt[fn]!==!1).forEach(fn=>{let yn=Ot(fn);const Un=Ut(fn);if(window.PointerEvent)switch(N[fn]){case N.MouseDown:case N.MouseUp:yn=yn.replace("mouse","pointer");break;case N.TouchStart:case N.TouchEnd:return}bt.push(ue(yn,Un,U))}),ri(()=>{bt.forEach(fn=>fn())})}r(Eo,"initMouseInteractionObserver");function Jr({scrollCb:k,doc:U,mirror:z,blockClass:re,blockSelector:Ee,unblockSelector:xe,sampling:ut}){const Pt=ri(Ae(ri(bt=>{const Yt=ei(bt);if(!Yt||tn(Yt,re,Ee,xe,!0))return;const Ut=z.getId(Yt);if(Yt===U&&U.defaultView){const fn=Qn(U.defaultView);k({id:Ut,x:fn.left,y:fn.top})}else k({id:Ut,x:Yt.scrollLeft,y:Yt.scrollTop})}),ut.scroll||100));return ue("scroll",Pt,U)}r(Jr,"initScrollObserver");function fo({viewportResizeCb:k},{win:U}){let z=-1,re=-1;const Ee=ri(Ae(ri(()=>{const xe=$n(),ut=Vn();(z!==xe||re!==ut)&&(k({width:Number(ut),height:Number(xe)}),z=xe,re=ut)}),200));return ue("resize",Ee,U)}r(fo,"initViewportResizeObserver");const ho=["INPUT","TEXTAREA","SELECT"],de=new WeakMap;function _e({inputCb:k,doc:U,mirror:z,blockClass:re,blockSelector:Ee,unblockSelector:xe,ignoreClass:ut,ignoreSelector:Pt,maskInputOptions:bt,maskInputFn:Yt,sampling:Ut,userTriggeredOnInput:fn,maskTextClass:yn,unmaskTextClass:Un,maskTextSelector:ti,unmaskTextSelector:Ii}){function or(Li){let Dr=ei(Li);const Ao=Li.isTrusted,Ni=Dr&&Nt(Dr.tagName);if(Ni==="OPTION"&&(Dr=Dr.parentElement),!Dr||!Ni||ho.indexOf(Ni)<0||tn(Dr,re,Ee,xe,!0))return;const vr=Dr;if(vr.classList.contains(ut)||Pt&&vr.matches(Pt))return;const co=ct(Dr);let Mo=yt(vr,Ni,co),Bo=!1;const ss=Je({maskInputOptions:bt,tagName:Ni,type:co}),to=G(Dr,yn,ti,Un,Ii,ss);(co==="radio"||co==="checkbox")&&(Bo=Dr.checked),Mo=dt({isMasked:to,element:Dr,value:Mo,maskInputFn:Yt}),xi(Dr,fn?{text:Mo,isChecked:Bo,userTriggered:Ao}:{text:Mo,isChecked:Bo});const ds=Dr.name;co==="radio"&&ds&&Bo&&U.querySelectorAll(`input[type="radio"][name="${ds}"]`).forEach(Uo=>{if(Uo!==Dr){const Rs=dt({isMasked:to,element:Uo,value:yt(Uo,Ni,co),maskInputFn:Yt});xi(Uo,fn?{text:Rs,isChecked:!Bo,userTriggered:!1}:{text:Rs,isChecked:!Bo})}})}r(or,"eventHandler");function xi(Li,Dr){const Ao=de.get(Li);if(!Ao||Ao.text!==Dr.text||Ao.isChecked!==Dr.isChecked){de.set(Li,Dr);const Ni=z.getId(Li);ri(k)({...Dr,id:Ni})}}r(xi,"cbWithDedup");const Wr=(Ut.input==="last"?["change"]:["input","change"]).map(Li=>ue(Li,ri(or),U)),zr=U.defaultView;if(!zr)return()=>{Wr.forEach(Li=>Li())};const vo=zr.Object.getOwnPropertyDescriptor(zr.HTMLInputElement.prototype,"value"),fr=[[zr.HTMLInputElement.prototype,"value"],[zr.HTMLInputElement.prototype,"checked"],[zr.HTMLSelectElement.prototype,"value"],[zr.HTMLTextAreaElement.prototype,"value"],[zr.HTMLSelectElement.prototype,"selectedIndex"],[zr.HTMLOptionElement.prototype,"selected"]];return vo&&vo.set&&Wr.push(...fr.map(Li=>Ye(Li[0],Li[1],{set(){ri(or)({target:this,isTrusted:!1})}},!1,zr))),ri(()=>{Wr.forEach(Li=>Li())})}r(_e,"initInputObserver");function Pe(k){const U=[];function z(re,Ee){if(ki("CSSGroupingRule")&&re.parentRule instanceof CSSGroupingRule||ki("CSSMediaRule")&&re.parentRule instanceof CSSMediaRule||ki("CSSSupportsRule")&&re.parentRule instanceof CSSSupportsRule||ki("CSSConditionRule")&&re.parentRule instanceof CSSConditionRule){const ut=Array.from(re.parentRule.cssRules).indexOf(re);Ee.unshift(ut)}else if(re.parentStyleSheet){const ut=Array.from(re.parentStyleSheet.cssRules).indexOf(re);Ee.unshift(ut)}return Ee}return r(z,"recurse"),z(k,U)}r(Pe,"getNestedCSSRulePositions");function rt(k,U,z){let re,Ee;return k?(k.ownerNode?re=U.getId(k.ownerNode):Ee=z.getId(k),{styleId:Ee,id:re}):{}}r(rt,"getIdAndStyleId");function _t({styleSheetRuleCb:k,mirror:U,stylesheetManager:z},{win:re}){if(!re.CSSStyleSheet||!re.CSSStyleSheet.prototype)return()=>{};const Ee=re.CSSStyleSheet.prototype.insertRule;re.CSSStyleSheet.prototype.insertRule=new Proxy(Ee,{apply:ri((Ut,fn,yn)=>{const[Un,ti]=yn,{id:Ii,styleId:or}=rt(fn,U,z.styleMirror);return(Ii&&Ii!==-1||or&&or!==-1)&&k({id:Ii,styleId:or,adds:[{rule:Un,index:ti}]}),Ut.apply(fn,yn)})});const xe=re.CSSStyleSheet.prototype.deleteRule;re.CSSStyleSheet.prototype.deleteRule=new Proxy(xe,{apply:ri((Ut,fn,yn)=>{const[Un]=yn,{id:ti,styleId:Ii}=rt(fn,U,z.styleMirror);return(ti&&ti!==-1||Ii&&Ii!==-1)&&k({id:ti,styleId:Ii,removes:[{index:Un}]}),Ut.apply(fn,yn)})});let ut;re.CSSStyleSheet.prototype.replace&&(ut=re.CSSStyleSheet.prototype.replace,re.CSSStyleSheet.prototype.replace=new Proxy(ut,{apply:ri((Ut,fn,yn)=>{const[Un]=yn,{id:ti,styleId:Ii}=rt(fn,U,z.styleMirror);return(ti&&ti!==-1||Ii&&Ii!==-1)&&k({id:ti,styleId:Ii,replace:Un}),Ut.apply(fn,yn)})}));let Pt;re.CSSStyleSheet.prototype.replaceSync&&(Pt=re.CSSStyleSheet.prototype.replaceSync,re.CSSStyleSheet.prototype.replaceSync=new Proxy(Pt,{apply:ri((Ut,fn,yn)=>{const[Un]=yn,{id:ti,styleId:Ii}=rt(fn,U,z.styleMirror);return(ti&&ti!==-1||Ii&&Ii!==-1)&&k({id:ti,styleId:Ii,replaceSync:Un}),Ut.apply(fn,yn)})}));const bt={};Zn("CSSGroupingRule")?bt.CSSGroupingRule=re.CSSGroupingRule:(Zn("CSSMediaRule")&&(bt.CSSMediaRule=re.CSSMediaRule),Zn("CSSConditionRule")&&(bt.CSSConditionRule=re.CSSConditionRule),Zn("CSSSupportsRule")&&(bt.CSSSupportsRule=re.CSSSupportsRule));const Yt={};return Object.entries(bt).forEach(([Ut,fn])=>{Yt[Ut]={insertRule:fn.prototype.insertRule,deleteRule:fn.prototype.deleteRule},fn.prototype.insertRule=new Proxy(Yt[Ut].insertRule,{apply:ri((yn,Un,ti)=>{const[Ii,or]=ti,{id:xi,styleId:Sr}=rt(Un.parentStyleSheet,U,z.styleMirror);return(xi&&xi!==-1||Sr&&Sr!==-1)&&k({id:xi,styleId:Sr,adds:[{rule:Ii,index:[...Pe(Un),or||0]}]}),yn.apply(Un,ti)})}),fn.prototype.deleteRule=new Proxy(Yt[Ut].deleteRule,{apply:ri((yn,Un,ti)=>{const[Ii]=ti,{id:or,styleId:xi}=rt(Un.parentStyleSheet,U,z.styleMirror);return(or&&or!==-1||xi&&xi!==-1)&&k({id:or,styleId:xi,removes:[{index:[...Pe(Un),Ii]}]}),yn.apply(Un,ti)})})}),ri(()=>{re.CSSStyleSheet.prototype.insertRule=Ee,re.CSSStyleSheet.prototype.deleteRule=xe,ut&&(re.CSSStyleSheet.prototype.replace=ut),Pt&&(re.CSSStyleSheet.prototype.replaceSync=Pt),Object.entries(bt).forEach(([Ut,fn])=>{fn.prototype.insertRule=Yt[Ut].insertRule,fn.prototype.deleteRule=Yt[Ut].deleteRule})})}r(_t,"initStyleSheetObserver");function Dt({mirror:k,stylesheetManager:U},z){let re=null;z.nodeName==="#document"?re=k.getId(z):re=k.getId(z.host);const Ee=z.nodeName==="#document"?Er([z,"access",ut=>ut.defaultView,"optionalAccess",ut=>ut.Document]):Er([z,"access",ut=>ut.ownerDocument,"optionalAccess",ut=>ut.defaultView,"optionalAccess",ut=>ut.ShadowRoot]),xe=Er([Ee,"optionalAccess",ut=>ut.prototype])?Object.getOwnPropertyDescriptor(Er([Ee,"optionalAccess",ut=>ut.prototype]),"adoptedStyleSheets"):void 0;return re===null||re===-1||!Ee||!xe?()=>{}:(Object.defineProperty(z,"adoptedStyleSheets",{configurable:xe.configurable,enumerable:xe.enumerable,get(){return Er([xe,"access",ut=>ut.get,"optionalAccess",ut=>ut.call,"call",ut=>ut(this)])},set(ut){const Pt=Er([xe,"access",bt=>bt.set,"optionalAccess",bt=>bt.call,"call",bt=>bt(this,ut)]);if(re!==null&&re!==-1)try{U.adoptStyleSheets(ut,re)}catch{}return Pt}}),ri(()=>{Object.defineProperty(z,"adoptedStyleSheets",{configurable:xe.configurable,enumerable:xe.enumerable,get:xe.get,set:xe.set})}))}r(Dt,"initAdoptedStyleSheetObserver");function pn({styleDeclarationCb:k,mirror:U,ignoreCSSAttributes:z,stylesheetManager:re},{win:Ee}){const xe=Ee.CSSStyleDeclaration.prototype.setProperty;Ee.CSSStyleDeclaration.prototype.setProperty=new Proxy(xe,{apply:ri((Pt,bt,Yt)=>{const[Ut,fn,yn]=Yt;if(z.has(Ut))return xe.apply(bt,[Ut,fn,yn]);const{id:Un,styleId:ti}=rt(Er([bt,"access",Ii=>Ii.parentRule,"optionalAccess",Ii=>Ii.parentStyleSheet]),U,re.styleMirror);return(Un&&Un!==-1||ti&&ti!==-1)&&k({id:Un,styleId:ti,set:{property:Ut,value:fn,priority:yn},index:Pe(bt.parentRule)}),Pt.apply(bt,Yt)})});const ut=Ee.CSSStyleDeclaration.prototype.removeProperty;return Ee.CSSStyleDeclaration.prototype.removeProperty=new Proxy(ut,{apply:ri((Pt,bt,Yt)=>{const[Ut]=Yt;if(z.has(Ut))return ut.apply(bt,[Ut]);const{id:fn,styleId:yn}=rt(Er([bt,"access",Un=>Un.parentRule,"optionalAccess",Un=>Un.parentStyleSheet]),U,re.styleMirror);return(fn&&fn!==-1||yn&&yn!==-1)&&k({id:fn,styleId:yn,remove:{property:Ut},index:Pe(bt.parentRule)}),Pt.apply(bt,Yt)})}),ri(()=>{Ee.CSSStyleDeclaration.prototype.setProperty=xe,Ee.CSSStyleDeclaration.prototype.removeProperty=ut})}r(pn,"initStyleDeclarationObserver");function In({mediaInteractionCb:k,blockClass:U,blockSelector:z,unblockSelector:re,mirror:Ee,sampling:xe,doc:ut}){const Pt=ri(Yt=>Ae(ri(Ut=>{const fn=ei(Ut);if(!fn||tn(fn,U,z,re,!0))return;const{currentTime:yn,volume:Un,muted:ti,playbackRate:Ii}=fn;k({type:Yt,id:Ee.getId(fn),currentTime:yn,volume:Un,muted:ti,playbackRate:Ii})}),xe.media||500)),bt=[ue("play",Pt(0),ut),ue("pause",Pt(1),ut),ue("seeked",Pt(2),ut),ue("volumechange",Pt(3),ut),ue("ratechange",Pt(4),ut)];return ri(()=>{bt.forEach(Yt=>Yt())})}r(In,"initMediaInteractionObserver");function Nn({fontCb:k,doc:U}){const z=U.defaultView;if(!z)return()=>{};const re=[],Ee=new WeakMap,xe=z.FontFace;z.FontFace=r(function(bt,Yt,Ut){const fn=new xe(bt,Yt,Ut);return Ee.set(fn,{family:bt,buffer:typeof Yt!="string",descriptors:Ut,fontSource:typeof Yt=="string"?Yt:JSON.stringify(Array.from(new Uint8Array(Yt)))}),fn},"FontFace");const ut=Ht(U.fonts,"add",function(Pt){return function(bt){return Vi(ri(()=>{const Yt=Ee.get(bt);Yt&&(k(Yt),Ee.delete(bt))}),0),Pt.apply(this,[bt])}});return re.push(()=>{z.FontFace=xe}),re.push(ut),ri(()=>{re.forEach(Pt=>Pt())})}r(Nn,"initFontObserver");function Tn(k){const{doc:U,mirror:z,blockClass:re,blockSelector:Ee,unblockSelector:xe,selectionCb:ut}=k;let Pt=!0;const bt=ri(()=>{const Yt=U.getSelection();if(!Yt||Pt&&Er([Yt,"optionalAccess",yn=>yn.isCollapsed]))return;Pt=Yt.isCollapsed||!1;const Ut=[],fn=Yt.rangeCount||0;for(let yn=0;yn<fn;yn++){const Un=Yt.getRangeAt(yn),{startContainer:ti,startOffset:Ii,endContainer:or,endOffset:xi}=Un;tn(ti,re,Ee,xe,!0)||tn(or,re,Ee,xe,!0)||Ut.push({start:z.getId(ti),startOffset:Ii,end:z.getId(or),endOffset:xi})}ut({ranges:Ut})});return bt(),ue("selectionchange",bt)}r(Tn,"initSelectionObserver");function di({doc:k,customElementCb:U}){const z=k.defaultView;return!z||!z.customElements?()=>{}:Ht(z.customElements,"define",function(Ee){return function(xe,ut,Pt){try{U({define:{name:xe}})}catch{}return Ee.apply(this,[xe,ut,Pt])}})}r(di,"initCustomElementObserver");function an(k,U={}){const z=k.doc.defaultView;if(!z)return()=>{};const re=hr(k,k.doc),Ee=si(k),xe=Eo(k),ut=Jr(k),Pt=fo(k,{win:z}),bt=_e(k),Yt=In(k),Ut=_t(k,{win:z}),fn=Dt(k,k.doc),yn=pn(k,{win:z}),Un=k.collectFonts?Nn(k):()=>{},ti=Tn(k),Ii=di(k),or=[];for(const xi of k.plugins)or.push(xi.observer(xi.callback,z,xi.options));return ri(()=>{Rr.forEach(xi=>xi.reset()),re.disconnect(),Ee(),xe(),ut(),Pt(),bt(),Yt(),Ut(),fn(),yn(),Un(),ti(),Ii(),or.forEach(xi=>xi())})}r(an,"initObservers");function ki(k){return typeof window[k]<"u"}r(ki,"hasNestedCSSRule");function Zn(k){return Boolean(typeof window[k]<"u"&&window[k].prototype&&"insertRule"in window[k].prototype&&"deleteRule"in window[k].prototype)}r(Zn,"canMonkeyPatchNestedCSSRule");class lr{constructor(U){this.generateIdFn=U,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(U,z,re,Ee){const xe=re||this.getIdToRemoteIdMap(U),ut=Ee||this.getRemoteIdToIdMap(U);let Pt=xe.get(z);return Pt||(Pt=this.generateIdFn(),xe.set(z,Pt),ut.set(Pt,z)),Pt}getIds(U,z){const re=this.getIdToRemoteIdMap(U),Ee=this.getRemoteIdToIdMap(U);return z.map(xe=>this.getId(U,xe,re,Ee))}getRemoteId(U,z,re){const Ee=re||this.getRemoteIdToIdMap(U);if(typeof z!="number")return z;const xe=Ee.get(z);return xe||-1}getRemoteIds(U,z){const re=this.getRemoteIdToIdMap(U);return z.map(Ee=>this.getRemoteId(U,Ee,re))}reset(U){if(!U){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(U),this.iframeRemoteIdToIdMap.delete(U)}getIdToRemoteIdMap(U){let z=this.iframeIdToRemoteIdMap.get(U);return z||(z=new Map,this.iframeIdToRemoteIdMap.set(U,z)),z}getRemoteIdToIdMap(U){let z=this.iframeRemoteIdToIdMap.get(U);return z||(z=new Map,this.iframeRemoteIdToIdMap.set(U,z)),z}}r(lr,"CrossOriginIframeMirror");function br(k){let U,z=k[0],re=1;for(;re<k.length;){const Ee=k[re],xe=k[re+1];if(re+=2,(Ee==="optionalAccess"||Ee==="optionalCall")&&z==null)return;Ee==="access"||Ee==="optionalAccess"?(U=z,z=xe(z)):(Ee==="call"||Ee==="optionalCall")&&(z=xe((...ut)=>z.call(U,...ut)),U=void 0)}return z}r(br,"_optionalChain$1");class Cr{constructor(){this.crossOriginIframeMirror=new lr(dn),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}r(Cr,"IframeManagerNoop");class pi{constructor(U){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new lr(dn),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=U.mutationCb,this.wrappedEmit=U.wrappedEmit,this.stylesheetManager=U.stylesheetManager,this.recordCrossOriginIframes=U.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new lr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=U.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(U){this.iframes.set(U,!0),U.contentWindow&&this.crossOriginIframeMap.set(U.contentWindow,U)}addLoadListener(U){this.loadListener=U}attachIframe(U,z){this.mutationCb({adds:[{parentId:this.mirror.getId(U),nextId:null,node:z}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),br([this,"access",re=>re.loadListener,"optionalCall",re=>re(U)]),U.contentDocument&&U.contentDocument.adoptedStyleSheets&&U.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(U.contentDocument.adoptedStyleSheets,this.mirror.getId(U.contentDocument))}handleMessage(U){const z=U;if(z.data.type!=="rrweb"||z.origin!==z.data.origin||!U.source)return;const Ee=this.crossOriginIframeMap.get(U.source);if(!Ee)return;const xe=this.transformCrossOriginEvent(Ee,z.data.event);xe&&this.wrappedEmit(xe,z.data.isCheckout)}transformCrossOriginEvent(U,z){switch(z.type){case _i.FullSnapshot:{this.crossOriginIframeMirror.reset(U),this.crossOriginIframeStyleMirror.reset(U),this.replaceIdOnNode(z.data.node,U);const re=z.data.node.id;return this.crossOriginIframeRootIdMap.set(U,re),this.patchRootIdOnNode(z.data.node,re),{timestamp:z.timestamp,type:_i.IncrementalSnapshot,data:{source:Ci.Mutation,adds:[{parentId:this.mirror.getId(U),nextId:null,node:z.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case _i.Meta:case _i.Load:case _i.DomContentLoaded:return!1;case _i.Plugin:return z;case _i.Custom:return this.replaceIds(z.data.payload,U,["id","parentId","previousId","nextId"]),z;case _i.IncrementalSnapshot:switch(z.data.source){case Ci.Mutation:return z.data.adds.forEach(re=>{this.replaceIds(re,U,["parentId","nextId","previousId"]),this.replaceIdOnNode(re.node,U);const Ee=this.crossOriginIframeRootIdMap.get(U);Ee&&this.patchRootIdOnNode(re.node,Ee)}),z.data.removes.forEach(re=>{this.replaceIds(re,U,["parentId","id"])}),z.data.attributes.forEach(re=>{this.replaceIds(re,U,["id"])}),z.data.texts.forEach(re=>{this.replaceIds(re,U,["id"])}),z;case Ci.Drag:case Ci.TouchMove:case Ci.MouseMove:return z.data.positions.forEach(re=>{this.replaceIds(re,U,["id"])}),z;case Ci.ViewportResize:return!1;case Ci.MediaInteraction:case Ci.MouseInteraction:case Ci.Scroll:case Ci.CanvasMutation:case Ci.Input:return this.replaceIds(z.data,U,["id"]),z;case Ci.StyleSheetRule:case Ci.StyleDeclaration:return this.replaceIds(z.data,U,["id"]),this.replaceStyleIds(z.data,U,["styleId"]),z;case Ci.Font:return z;case Ci.Selection:return z.data.ranges.forEach(re=>{this.replaceIds(re,U,["start","end"])}),z;case Ci.AdoptedStyleSheet:return this.replaceIds(z.data,U,["id"]),this.replaceStyleIds(z.data,U,["styleIds"]),br([z,"access",re=>re.data,"access",re=>re.styles,"optionalAccess",re=>re.forEach,"call",re=>re(Ee=>{this.replaceStyleIds(Ee,U,["styleId"])})]),z}}return!1}replace(U,z,re,Ee){for(const xe of Ee)!Array.isArray(z[xe])&&typeof z[xe]!="number"||(Array.isArray(z[xe])?z[xe]=U.getIds(re,z[xe]):z[xe]=U.getId(re,z[xe]));return z}replaceIds(U,z,re){return this.replace(this.crossOriginIframeMirror,U,z,re)}replaceStyleIds(U,z,re){return this.replace(this.crossOriginIframeStyleMirror,U,z,re)}replaceIdOnNode(U,z){this.replaceIds(U,z,["id","rootId"]),"childNodes"in U&&U.childNodes.forEach(re=>{this.replaceIdOnNode(re,z)})}patchRootIdOnNode(U,z){U.type!==H.Document&&!U.rootId&&(U.rootId=z),"childNodes"in U&&U.childNodes.forEach(re=>{this.patchRootIdOnNode(re,z)})}}r(pi,"IframeManager");class vi{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}r(vi,"ShadowDomManagerNoop");class Di{constructor(U){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=U.mutationCb,this.scrollCb=U.scrollCb,this.bypassOptions=U.bypassOptions,this.mirror=U.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(U,z){if(!q(U)||this.shadowDoms.has(U))return;this.shadowDoms.add(U);const re=hr({...this.bypassOptions,doc:z,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},U);this.restoreHandlers.push(()=>re.disconnect()),this.restoreHandlers.push(Jr({...this.bypassOptions,scrollCb:this.scrollCb,doc:U,mirror:this.mirror})),Vi(()=>{U.adoptedStyleSheets&&U.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(U.adoptedStyleSheets,this.mirror.getId(U.host)),this.restoreHandlers.push(Dt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},U))},0)}observeAttachShadow(U){!U.contentWindow||!U.contentDocument||this.patchAttachShadow(U.contentWindow.Element,U.contentDocument)}patchAttachShadow(U,z){const re=this;this.restoreHandlers.push(Ht(U.prototype,"attachShadow",function(Ee){return function(xe){const ut=Ee.call(this,xe);return this.shadowRoot&&$i(this)&&re.addShadowRoot(this.shadowRoot,z),ut}}))}reset(){this.restoreHandlers.forEach(U=>{try{U()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}r(Di,"ShadowDomManager");class Yi{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}r(Yi,"CanvasManagerNoop");class Or{constructor(U){this.trackedLinkElements=new WeakSet,this.styleMirror=new Pi,this.mutationCb=U.mutationCb,this.adoptedStyleSheetCb=U.adoptedStyleSheetCb}attachLinkElement(U,z){"_cssText"in z.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:z.id,attributes:z.attributes}]}),this.trackLinkElement(U)}trackLinkElement(U){this.trackedLinkElements.has(U)||(this.trackedLinkElements.add(U),this.trackStylesheetInLinkElement(U))}adoptStyleSheets(U,z){if(U.length===0)return;const re={id:z,styleIds:[]},Ee=[];for(const xe of U){let ut;this.styleMirror.has(xe)?ut=this.styleMirror.getId(xe):(ut=this.styleMirror.add(xe),Ee.push({styleId:ut,rules:Array.from(xe.rules||CSSRule,(Pt,bt)=>({rule:ke(Pt),index:bt}))})),re.styleIds.push(ut)}Ee.length>0&&(re.styles=Ee),this.adoptedStyleSheetCb(re)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(U){}}r(Or,"StylesheetManager");class Zr{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Lr(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(U,z){const re=this.nodeMap.get(U);return re&&Array.from(re).some(Ee=>Ee!==z)}add(U,z){this.nodeMap.set(U,(this.nodeMap.get(U)||new Set).add(z))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}r(Zr,"ProcessedNodeManager");let Mi,ro;const pr=Ze();function qr(k={}){const{emit:U,checkoutEveryNms:z,checkoutEveryNth:re,blockClass:Ee="rr-block",blockSelector:xe=null,unblockSelector:ut=null,ignoreClass:Pt="rr-ignore",ignoreSelector:bt=null,maskAllText:Yt=!1,maskTextClass:Ut="rr-mask",unmaskTextClass:fn=null,maskTextSelector:yn=null,unmaskTextSelector:Un=null,inlineStylesheet:ti=!0,maskAllInputs:Ii,maskInputOptions:or,slimDOMOptions:xi,maskAttributeFn:Sr,maskInputFn:Wr,maskTextFn:zr,maxCanvasSize:vo=null,packFn:fr,sampling:Li={},dataURLOptions:Dr={},mousemoveWait:Ao,recordCanvas:Ni=!1,recordCrossOriginIframes:vr=!1,recordAfter:co=k.recordAfter==="DOMContentLoaded"?k.recordAfter:"load",userTriggeredOnInput:Mo=!1,collectFonts:Bo=!1,inlineImages:ss=!1,plugins:to,keepIframeSrcFn:ds=r(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:Uo=new Set([]),errorHandler:Rs,onMutation:Ks,getCanvasManager:kc}=k;gr(Rs);const Ll=vr?window.parent===window:!0;let Nl=!1;if(!Ll)try{window.parent.document&&(Nl=!1)}catch{Nl=!0}if(Ll&&!U)throw new Error("emit function is required");Ao!==void 0&&Li.mousemove===void 0&&(Li.mousemove=Ao),pr.reset();const La=Ii===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:or!==void 0?or:{},zd=xi===!0||xi==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:xi==="all",headMetaDescKeywords:xi==="all"}:xi||{};jt();let Fl,xl=0;const Gd=r(jr=>{for(const hs of to||[])hs.eventProcessor&&(jr=hs.eventProcessor(jr));return fr&&!Nl&&(jr=fr(jr)),jr},"eventProcessor");Mi=r((jr,hs)=>{const Br=jr;if(Br.timestamp=Mt(),h([Rr,"access",yo=>yo[0],"optionalAccess",yo=>yo.isFrozen,"call",yo=>yo()])&&Br.type!==_i.FullSnapshot&&!(Br.type===_i.IncrementalSnapshot&&Br.data.source===Ci.Mutation)&&Rr.forEach(yo=>yo.unfreeze()),Ll)h([U,"optionalCall",yo=>yo(Gd(Br),hs)]);else if(Nl){const yo={type:"rrweb",event:Gd(Br),origin:window.location.origin,isCheckout:hs};window.parent.postMessage(yo,"*")}if(Br.type===_i.FullSnapshot)Fl=Br,xl=0;else if(Br.type===_i.IncrementalSnapshot){if(Br.data.source===Ci.Mutation&&Br.data.isAttachIframe)return;xl++;const yo=re&&xl>=re,$r=z&&Fl&&Br.timestamp-Fl.timestamp>z;(yo||$r)&&Ul(!0)}},"wrappedEmit");const Na=r(jr=>{Mi({type:_i.IncrementalSnapshot,data:{source:Ci.Mutation,...jr}})},"wrappedMutationEmit"),jd=r(jr=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.Scroll,...jr}}),"wrappedScrollEmit"),Ta=r(jr=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.CanvasMutation,...jr}}),"wrappedCanvasMutationEmit"),Za=r(jr=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.AdoptedStyleSheet,...jr}}),"wrappedAdoptedStyleSheetEmit"),Js=new Or({mutationCb:Na,adoptedStyleSheetCb:Za}),fa=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Cr:new pi({mirror:pr,mutationCb:Na,stylesheetManager:Js,recordCrossOriginIframes:vr,wrappedEmit:Mi});for(const jr of to||[])jr.getMirror&&jr.getMirror({nodeMirror:pr,crossOriginIframeMirror:fa.crossOriginIframeMirror,crossOriginIframeStyleMirror:fa.crossOriginIframeStyleMirror});const $d=new Zr,Bl=is(kc,{mirror:pr,win:window,mutationCb:jr=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.CanvasMutation,...jr}}),recordCanvas:Ni,blockClass:Ee,blockSelector:xe,unblockSelector:ut,maxCanvasSize:vo,sampling:Li.canvas,dataURLOptions:Dr,errorHandler:Rs}),Fa=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new vi:new Di({mutationCb:Na,scrollCb:jd,bypassOptions:{onMutation:Ks,blockClass:Ee,blockSelector:xe,unblockSelector:ut,maskAllText:Yt,maskTextClass:Ut,unmaskTextClass:fn,maskTextSelector:yn,unmaskTextSelector:Un,inlineStylesheet:ti,maskInputOptions:La,dataURLOptions:Dr,maskAttributeFn:Sr,maskTextFn:zr,maskInputFn:Wr,recordCanvas:Ni,inlineImages:ss,sampling:Li,slimDOMOptions:zd,iframeManager:fa,stylesheetManager:Js,canvasManager:Bl,keepIframeSrcFn:ds,processedNodeManager:$d},mirror:pr}),Ul=r((jr=!1)=>{Mi({type:_i.Meta,data:{href:window.location.href,width:Vn(),height:$n()}},jr),Js.reset(),Fa.init(),Rr.forEach(Br=>Br.lock());const hs=Oe(document,{mirror:pr,blockClass:Ee,blockSelector:xe,unblockSelector:ut,maskAllText:Yt,maskTextClass:Ut,unmaskTextClass:fn,maskTextSelector:yn,unmaskTextSelector:Un,inlineStylesheet:ti,maskAllInputs:La,maskAttributeFn:Sr,maskInputFn:Wr,maskTextFn:zr,slimDOM:zd,dataURLOptions:Dr,recordCanvas:Ni,inlineImages:ss,onSerialize:Br=>{Fn(Br,pr)&&fa.addIframe(Br),Hn(Br,pr)&&Js.trackLinkElement(Br),wi(Br)&&Fa.addShadowRoot(Br.shadowRoot,document)},onIframeLoad:(Br,yo)=>{fa.attachIframe(Br,yo),Fa.observeAttachShadow(Br)},onStylesheetLoad:(Br,yo)=>{Js.attachLinkElement(Br,yo)},keepIframeSrcFn:ds});if(!hs)return console.warn("Failed to snapshot the document");Mi({type:_i.FullSnapshot,data:{node:hs,initialOffset:Qn(window)}}),Rr.forEach(Br=>Br.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Js.adoptStyleSheets(document.adoptedStyleSheets,pr.getId(document))},"takeFullSnapshot");ro=Ul;try{const jr=[],hs=r(yo=>ri(an)({onMutation:Ks,mutationCb:Na,mousemoveCb:($r,xs)=>Mi({type:_i.IncrementalSnapshot,data:{source:xs,positions:$r}}),mouseInteractionCb:$r=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.MouseInteraction,...$r}}),scrollCb:jd,viewportResizeCb:$r=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.ViewportResize,...$r}}),inputCb:$r=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.Input,...$r}}),mediaInteractionCb:$r=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.MediaInteraction,...$r}}),styleSheetRuleCb:$r=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.StyleSheetRule,...$r}}),styleDeclarationCb:$r=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.StyleDeclaration,...$r}}),canvasMutationCb:Ta,fontCb:$r=>Mi({type:_i.IncrementalSnapshot,data:{source:Ci.Font,...$r}}),selectionCb:$r=>{Mi({type:_i.IncrementalSnapshot,data:{source:Ci.Selection,...$r}})},customElementCb:$r=>{Mi({type:_i.IncrementalSnapshot,data:{source:Ci.CustomElement,...$r}})},blockClass:Ee,ignoreClass:Pt,ignoreSelector:bt,maskAllText:Yt,maskTextClass:Ut,unmaskTextClass:fn,maskTextSelector:yn,unmaskTextSelector:Un,maskInputOptions:La,inlineStylesheet:ti,sampling:Li,recordCanvas:Ni,inlineImages:ss,userTriggeredOnInput:Mo,collectFonts:Bo,doc:yo,maskAttributeFn:Sr,maskInputFn:Wr,maskTextFn:zr,keepIframeSrcFn:ds,blockSelector:xe,unblockSelector:ut,slimDOMOptions:zd,dataURLOptions:Dr,mirror:pr,iframeManager:fa,stylesheetManager:Js,shadowDomManager:Fa,processedNodeManager:$d,canvasManager:Bl,ignoreCSSAttributes:Uo,plugins:h([to,"optionalAccess",$r=>$r.filter,"call",$r=>$r(xs=>xs.observer),"optionalAccess",$r=>$r.map,"call",$r=>$r(xs=>({observer:xs.observer,options:xs.options,callback:Kd=>Mi({type:_i.Plugin,data:{plugin:xs.name,payload:Kd}})}))])||[]},{}),"observe");fa.addLoadListener(yo=>{try{jr.push(hs(yo.contentDocument))}catch($r){console.warn($r)}});const Br=r(()=>{Ul(),jr.push(hs(document))},"init");return document.readyState==="interactive"||document.readyState==="complete"?Br():(jr.push(ue("DOMContentLoaded",()=>{Mi({type:_i.DomContentLoaded,data:{}}),co==="DOMContentLoaded"&&Br()})),jr.push(ue("load",()=>{Mi({type:_i.Load,data:{}}),co==="load"&&Br()},window))),()=>{jr.forEach(yo=>yo()),$d.destroy(),ro=void 0,Fr()}}catch(jr){console.warn(jr)}}r(qr,"record");function es(k){if(!ro)throw new Error("please take full snapshot after start recording");ro(k)}r(es,"takeFullSnapshot"),qr.mirror=pr,qr.takeFullSnapshot=es;function is(k,U){try{return k?k(U):new Yi}catch{return console.warn("Unable to initialize CanvasManager"),new Yi}}r(is,"_getCanvasManager");const Jo=3,Yo=5;function ts(k){return k>9999999999?k:k*1e3}r(ts,"timestampToMs");function Vo(k){return k>9999999999?k/1e3:k}r(Vo,"timestampToS");function uo(k,U){U.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(U.category)?k.triggerUserActivity():k.checkAndHandleExpiredSession(),k.addUpdate(()=>(k.throttledAddEvent({type:_i.Custom,timestamp:(U.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:m.normalize(U,10,1e3)}}),U.category==="console")))}r(uo,"addBreadcrumbEvent");const bo="button,a";function Io(k){return k.closest(bo)||k}r(Io,"getClosestInteractive");function so(k){const U=ao(k);return!U||!(U instanceof Element)?U:Io(U)}r(so,"getClickTargetNode");function ao(k){return Gr(k)?k.target:k}r(ao,"getTargetNode");function Gr(k){return typeof k=="object"&&!!k&&"target"in k}r(Gr,"isEventWithTarget");let Co;function Ts(k){return Co||(Co=[],Is()),Co.push(k),()=>{const U=Co?Co.indexOf(k):-1;U>-1&&Co.splice(U,1)}}r(Ts,"onWindowOpen");function Is(){m.fill(s,"open",function(k){return function(...U){if(Co)try{Co.forEach(z=>z())}catch{}return k.apply(s,U)}})}r(Is,"monkeyPatchWindowOpen");function po(k,U,z){k.handleClick(U,z)}r(po,"handleClick");class Ho{constructor(U,z,re=uo){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=z.timeout/1e3,this._threshold=z.threshold/1e3,this._scollTimeout=z.scrollTimeout/1e3,this._replay=U,this._ignoreSelector=z.ignoreSelector,this._addBreadcrumbEvent=re}addListeners(){const U=Ts(()=>{this._lastMutation=mo()});this._teardown=()=>{U(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(U,z){if(oo(z,this._ignoreSelector)||!Yr(U))return;const re={timestamp:Vo(U.timestamp),clickBreadcrumb:U,clickCount:0,node:z};this._clicks.some(Ee=>Ee.node===re.node&&Math.abs(Ee.timestamp-re.timestamp)<1)||(this._clicks.push(re),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(U=Date.now()){this._lastMutation=Vo(U)}registerScroll(U=Date.now()){this._lastScroll=Vo(U)}registerClick(U){const z=Io(U);this._handleMultiClick(z)}_handleMultiClick(U){this._getClicks(U).forEach(z=>{z.clickCount++})}_getClicks(U){return this._clicks.filter(z=>z.node===U)}_checkClicks(){const U=[],z=mo();this._clicks.forEach(re=>{!re.mutationAfter&&this._lastMutation&&(re.mutationAfter=re.timestamp<=this._lastMutation?this._lastMutation-re.timestamp:void 0),!re.scrollAfter&&this._lastScroll&&(re.scrollAfter=re.timestamp<=this._lastScroll?this._lastScroll-re.timestamp:void 0),re.timestamp+this._timeout<=z&&U.push(re)});for(const re of U){const Ee=this._clicks.indexOf(re);Ee>-1&&(this._generateBreadcrumbs(re),this._clicks.splice(Ee,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(U){const z=this._replay,re=U.scrollAfter&&U.scrollAfter<=this._scollTimeout,Ee=U.mutationAfter&&U.mutationAfter<=this._threshold,xe=!re&&!Ee,{clickCount:ut,clickBreadcrumb:Pt}=U;if(xe){const bt=Math.min(U.mutationAfter||this._timeout,this._timeout)*1e3,Yt=bt<this._timeout*1e3?"mutation":"timeout",Ut={type:"default",message:Pt.message,timestamp:Pt.timestamp,category:"ui.slowClickDetected",data:{...Pt.data,url:s.location.href,route:z.getCurrentRoute(),timeAfterClickMs:bt,endReason:Yt,clickCount:ut||1}};this._addBreadcrumbEvent(z,Ut);return}if(ut>1){const bt={type:"default",message:Pt.message,timestamp:Pt.timestamp,category:"ui.multiClick",data:{...Pt.data,url:s.location.href,route:z.getCurrentRoute(),clickCount:ut,metric:!0}};this._addBreadcrumbEvent(z,bt)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}r(Ho,"ClickDetector");const Vr=["A","BUTTON","INPUT"];function oo(k,U){return!!(!Vr.includes(k.tagName)||k.tagName==="INPUT"&&!["submit","button"].includes(k.getAttribute("type")||"")||k.tagName==="A"&&(k.hasAttribute("download")||k.hasAttribute("target")&&k.getAttribute("target")!=="_self")||U&&k.matches(U))}r(oo,"ignoreElement");function Yr(k){return!!(k.data&&typeof k.data.nodeId=="number"&&k.timestamp)}r(Yr,"isClickBreadcrumb");function mo(){return Date.now()/1e3}r(mo,"nowInSeconds");function lo(k,U){try{if(!ws(U))return;const{source:z}=U.data;if(z===Ci.Mutation&&k.registerMutation(U.timestamp),z===Ci.Scroll&&k.registerScroll(U.timestamp),oe(U)){const{type:re,id:Ee}=U.data,xe=qr.mirror.getNode(Ee);xe instanceof HTMLElement&&re===N.Click&&k.registerClick(xe)}}catch{}}r(lo,"updateClickDetectorForRecordingEvent");function ws(k){return k.type===Jo}r(ws,"isIncrementalEvent");function oe(k){return k.data.source===Ci.MouseInteraction}r(oe,"isIncrementalMouseInteraction");function fe(k){return{timestamp:Date.now()/1e3,type:"default",...k}}r(fe,"createBreadcrumb");var Ce;(function(k){k[k.Document=0]="Document",k[k.DocumentType=1]="DocumentType",k[k.Element=2]="Element",k[k.Text=3]="Text",k[k.CDATA=4]="CDATA",k[k.Comment=5]="Comment"})(Ce||(Ce={}));const Ne=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Ge(k){const U={};!k["data-sentry-component"]&&k["data-sentry-element"]&&(k["data-sentry-component"]=k["data-sentry-element"]);for(const z in k)if(Ne.has(z)){let re=z;(z==="data-testid"||z==="data-test-id")&&(re="testId"),U[re]=k[z]}return U}r(Ge,"getAttributesToRecord");const Ct=r(k=>U=>{if(!k.isEnabled())return;const z=Kt(U);if(!z)return;const re=U.name==="click",Ee=re?U.event:void 0;re&&k.clickDetector&&Ee&&Ee.target&&!Ee.altKey&&!Ee.metaKey&&!Ee.ctrlKey&&!Ee.shiftKey&&po(k.clickDetector,z,so(U.event)),uo(k,z)},"handleDomListener");function ht(k,U){const z=qr.mirror.getId(k),re=z&&qr.mirror.getNode(z),Ee=re&&qr.mirror.getMeta(re),xe=Ee&&on(Ee)?Ee:null;return{message:U,data:xe?{nodeId:z,node:{id:z,tagName:xe.tagName,textContent:Array.from(xe.childNodes).map(ut=>ut.type===Ce.Text&&ut.textContent).filter(Boolean).map(ut=>ut.trim()).join(""),attributes:Ge(xe.attributes)}}:{}}}r(ht,"getBaseDomBreadcrumb");function Kt(k){const{target:U,message:z}=$t(k);return fe({category:`ui.${k.name}`,...ht(U,z)})}r(Kt,"handleDom");function $t(k){const U=k.name==="click";let z,re=null;try{re=U?so(k.event):ao(k.event),z=m.htmlTreeAsString(re,{maxStringLength:200})||"<unknown>"}catch{z="<unknown>"}return{target:re,message:z}}r($t,"getDomTarget");function on(k){return k.type===Ce.Element}r(on,"isElement");function en(k,U){if(!k.isEnabled())return;k.updateUserActivity();const z=gn(U);z&&uo(k,z)}r(en,"handleKeyboardEvent");function gn(k){const{metaKey:U,shiftKey:z,ctrlKey:re,altKey:Ee,key:xe,target:ut}=k;if(!ut||vn(ut)||!xe)return null;const Pt=U||re||Ee,bt=xe.length===1;if(!Pt&&bt)return null;const Yt=m.htmlTreeAsString(ut,{maxStringLength:200})||"<unknown>",Ut=ht(ut,Yt);return fe({category:"ui.keyDown",message:Yt,data:{...Ut.data,metaKey:U,shiftKey:z,ctrlKey:re,altKey:Ee,key:xe}})}r(gn,"getKeyboardBreadcrumb");function vn(k){return k.tagName==="INPUT"||k.tagName==="TEXTAREA"||k.isContentEditable}r(vn,"isInputElement");const Cn={resource:Ki,paint:hn,navigation:ci};function jn(k){return k.map(Bn).filter(Boolean)}r(jn,"createPerformanceEntries");function Bn(k){return Cn[k.entryType]?Cn[k.entryType](k):null}r(Bn,"createPerformanceEntry");function wn(k){return((m.browserPerformanceTimeOrigin||s.performance.timeOrigin)+k)/1e3}r(wn,"getAbsoluteTime");function hn(k){const{duration:U,entryType:z,name:re,startTime:Ee}=k,xe=wn(Ee);return{type:z,name:re,start:xe,end:xe+U,data:void 0}}r(hn,"createPaintEntry");function ci(k){const{entryType:U,name:z,decodedBodySize:re,duration:Ee,domComplete:xe,encodedBodySize:ut,domContentLoadedEventStart:Pt,domContentLoadedEventEnd:bt,domInteractive:Yt,loadEventStart:Ut,loadEventEnd:fn,redirectCount:yn,startTime:Un,transferSize:ti,type:Ii}=k;return Ee===0?null:{type:`${U}.${Ii}`,start:wn(Un),end:wn(xe),name:z,data:{size:ti,decodedBodySize:re,encodedBodySize:ut,duration:Ee,domInteractive:Yt,domContentLoadedEventStart:Pt,domContentLoadedEventEnd:bt,loadEventStart:Ut,loadEventEnd:fn,domComplete:xe,redirectCount:yn}}}r(ci,"createNavigationEntry");function Ki(k){const{entryType:U,initiatorType:z,name:re,responseEnd:Ee,startTime:xe,decodedBodySize:ut,encodedBodySize:Pt,responseStatus:bt,transferSize:Yt}=k;return["fetch","xmlhttprequest"].includes(z)?null:{type:`${U}.${z}`,start:wn(xe),end:wn(Ee),name:re,data:{size:Yt,statusCode:bt,decodedBodySize:ut,encodedBodySize:Pt}}}r(Ki,"createResourceEntry");function ar(k){const U=k.entries,z=U[U.length-1],re=z?z.element:void 0,Ee=k.value,xe=wn(Ee);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:xe,end:xe,data:{value:Ee,size:Ee,nodeId:re?qr.mirror.getId(re):void 0}}}r(ar,"getLargestContentfulPaint");function Tr(k){function U(Ee){k.performanceEntries.includes(Ee)||k.performanceEntries.push(Ee)}r(U,"addPerformanceEntry");function z({entries:Ee}){Ee.forEach(U)}r(z,"onEntries");const re=[];return["navigation","paint","resource"].forEach(Ee=>{re.push(a.addPerformanceInstrumentationHandler(Ee,z))}),re.push(a.addLcpInstrumentationHandler(({metric:Ee})=>{k.replayPerformanceEntries.push(ar(Ee))})),()=>{re.forEach(Ee=>Ee())}}r(Tr,"setupPerformanceObserver");const Bt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,dr='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function cr(){const k=new Blob([dr]);return URL.createObjectURL(k)}r(cr,"e");function Xi(k,U){Bt&&(m.logger.info(k),U&&wo(k))}r(Xi,"logInfo");function Xr(k,U){Bt&&(m.logger.info(k),U&&setTimeout(()=>{wo(k)},0))}r(Xr,"logInfoNextTick");function wo(k){p.addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:k},{level:"info"})}r(wo,"addLogBreadcrumb");class Mr extends Error{constructor(){super(`Event buffer exceeded maximum size of ${I}.`)}}r(Mr,"EventBufferSizeExceededError");class go{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(U){const z=JSON.stringify(U).length;if(this._totalSize+=z,this._totalSize>I)throw new Mr;this.events.push(U)}finish(){return new Promise(U=>{const z=this.events;this.clear(),U(JSON.stringify(z))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const U=this.events.map(z=>z.timestamp).sort()[0];return U?ts(U):null}}r(go,"EventBufferArray");class Oo{constructor(U){this._worker=U,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((U,z)=>{this._worker.addEventListener("message",({data:re})=>{re.success?U():z()},{once:!0}),this._worker.addEventListener("error",re=>{z(re)},{once:!0})}),this._ensureReadyPromise)}destroy(){Xi("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(U,z){const re=this._getAndIncrementId();return new Promise((Ee,xe)=>{const ut=r(({data:Pt})=>{const bt=Pt;if(bt.method===U&&bt.id===re){if(this._worker.removeEventListener("message",ut),!bt.success){Bt&&m.logger.error("[Replay]",bt.response),xe(new Error("Error in compression worker"));return}Ee(bt.response)}},"listener");this._worker.addEventListener("message",ut),this._worker.postMessage({id:re,method:U,arg:z})})}_getAndIncrementId(){return this._id++}}r(Oo,"WorkerHandler");class ns{constructor(U){this._worker=new Oo(U),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(U){const z=ts(U.timestamp);(!this._earliestTimestamp||z<this._earliestTimestamp)&&(this._earliestTimestamp=z);const re=JSON.stringify(U);return this._totalSize+=re.length,this._totalSize>I?Promise.reject(new Mr):this._sendEventToWorker(re)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,U=>{Bt&&m.logger.warn('[Replay] Sending "clear" message to worker failed',U)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(U){return this._worker.postMessage("addEvent",U)}async _finishRequest(){const U=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,U}}r(ns,"EventBufferCompressionWorker");class fs{constructor(U){this._fallback=new go,this._compression=new ns(U),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(U){this._used.hasCheckout=U}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(U){return this._used.addEvent(U)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{Xi("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:U,hasCheckout:z}=this._fallback,re=[];for(const Ee of U)re.push(this._compression.addEvent(Ee));this._compression.hasCheckout=z,this._used=this._compression;try{await Promise.all(re)}catch(Ee){Bt&&m.logger.warn("[Replay] Failed to add events when switching buffers.",Ee)}}}r(fs,"EventBufferProxy");function Hr({useCompression:k,workerUrl:U}){if(k&&window.Worker){const z=gs(U);if(z)return z}return Xi("[Replay] Using simple buffer"),new go}r(Hr,"createEventBuffer");function gs(k){try{const U=k||Ws();if(!U)return;Xi(`[Replay] Using compression worker${k?` from ${k}`:""}`);const z=new Worker(U);return new fs(z)}catch{Xi("[Replay] Failed to create compression worker")}}r(gs,"_loadWorker");function Ws(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?cr():""}r(Ws,"_getWorkerUrl");function Ss(){try{return"sessionStorage"in s&&!!s.sessionStorage}catch{return!1}}r(Ss,"hasSessionStorage");function ls(k){As(),k.session=void 0}r(ls,"clearSession");function As(){if(Ss())try{s.sessionStorage.removeItem(i)}catch{}}r(As,"deleteSession");function vs(k){return k===void 0?!1:Math.random()<k}r(vs,"isSampled");function Wo(k){const U=Date.now(),z=k.id||m.uuid4(),re=k.started||U,Ee=k.lastActivity||U,xe=k.segmentId||0,ut=k.sampled,Pt=k.previousSessionId;return{id:z,started:re,lastActivity:Ee,segmentId:xe,sampled:ut,previousSessionId:Pt}}r(Wo,"makeSession");function Xo(k){if(Ss())try{s.sessionStorage.setItem(i,JSON.stringify(k))}catch{}}r(Xo,"saveSession");function zo(k,U){return vs(k)?"session":U?"buffer":!1}r(zo,"getSessionSampleType");function zs({sessionSampleRate:k,allowBuffering:U,stickySession:z=!1},{previousSessionId:re}={}){const Ee=zo(k,U),xe=Wo({sampled:Ee,previousSessionId:re});return z&&Xo(xe),xe}r(zs,"createSession");function Ra(k){if(!Ss())return null;try{const U=s.sessionStorage.getItem(i);if(!U)return null;const z=JSON.parse(U);return Xr("[Replay] Loading existing session",k),Wo(z)}catch{return null}}r(Ra,"fetchSession");function Gs(k,U,z=+new Date){return k===null||U===void 0||U<0?!0:U===0?!1:k+U<=z}r(Gs,"isExpired");function Go(k,{maxReplayDuration:U,sessionIdleExpire:z,targetTime:re=Date.now()}){return Gs(k.started,U,re)||Gs(k.lastActivity,z,re)}r(Go,"isSessionExpired");function mi(k,{sessionIdleExpire:U,maxReplayDuration:z}){return!(!Go(k,{sessionIdleExpire:U,maxReplayDuration:z})||k.sampled==="buffer"&&k.segmentId===0)}r(mi,"shouldRefreshSession");function ys({traceInternals:k,sessionIdleExpire:U,maxReplayDuration:z,previousSessionId:re},Ee){const xe=Ee.stickySession&&Ra(k);return xe?mi(xe,{sessionIdleExpire:U,maxReplayDuration:z})?(Xr("[Replay] Session in sessionStorage is expired, creating new one..."),zs(Ee,{previousSessionId:xe.id})):xe:(Xr("[Replay] Creating new session",k),zs(Ee,{previousSessionId:re}))}r(ys,"loadOrCreateSession");function yi(k){return k.type===_i.Custom}r(yi,"isCustomEvent");function ea(k,U,z){return te(k,U)?(Ca(k,U,z),!0):!1}r(ea,"addEventSync");function Os(k,U,z){return te(k,U)?Ca(k,U,z):Promise.resolve(null)}r(Os,"addEvent");async function Ca(k,U,z){if(!k.eventBuffer)return null;try{z&&k.recordingMode==="buffer"&&k.eventBuffer.clear(),z&&(k.eventBuffer.hasCheckout=!0);const re=k.getOptions(),Ee=ie(U,re.beforeAddRecordingEvent);return Ee?await k.eventBuffer.addEvent(Ee):void 0}catch(re){const Ee=re&&re instanceof Mr?"addEventSizeExceeded":"addEvent";Bt&&m.logger.error(re),await k.stop({reason:Ee});const xe=p.getClient();xe&&xe.recordDroppedEvent("internal_sdk_error","replay")}}r(Ca,"_addEvent");function te(k,U){if(!k.eventBuffer||k.isPaused()||!k.isEnabled())return!1;const z=ts(U.timestamp);return z+k.timeouts.sessionIdlePause<Date.now()?!1:z>k.getContext().initialTimestamp+k.getOptions().maxReplayDuration?(Xi(`[Replay] Skipping event with timestamp ${z} because it is after maxReplayDuration`,k.getOptions()._experiments.traceInternals),!1):!0}r(te,"shouldAddEvent");function ie(k,U){try{if(typeof U=="function"&&yi(k))return U(k)}catch(z){return Bt&&m.logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",z),null}return k}r(ie,"maybeApplyCallback");function $(k){return!k.type}r($,"isErrorEvent");function P(k){return k.type==="transaction"}r(P,"isTransactionEvent");function Y(k){return k.type==="replay_event"}r(Y,"isReplayEvent");function pe(k){return k.type==="feedback"}r(pe,"isFeedbackEvent");function me(k){return(U,z)=>{if(!k.isEnabled()||!$(U)&&!P(U))return;const re=z&&z.statusCode;if(!(!re||re<200||re>=300)){if(P(U)){De(k,U);return}ze(k,U)}}}r(me,"handleAfterSendEvent");function De(k,U){const z=k.getContext();U.contexts&&U.contexts.trace&&U.contexts.trace.trace_id&&z.traceIds.size<100&&z.traceIds.add(U.contexts.trace.trace_id)}r(De,"handleTransactionEvent");function ze(k,U){const z=k.getContext();if(U.event_id&&z.errorIds.size<100&&z.errorIds.add(U.event_id),k.recordingMode!=="buffer"||!U.tags||!U.tags.replayId)return;const{beforeErrorSampling:re}=k.getOptions();typeof re=="function"&&!re(U)||setTimeout(()=>{k.sendBufferedReplayOrFlush()})}r(ze,"handleErrorEvent");function gt(k){return U=>{!k.isEnabled()||!$(U)||qe(k,U)}}r(gt,"handleBeforeSendEvent");function qe(k,U){const z=U.exception&&U.exception.values&&U.exception.values[0].value;if(typeof z=="string"&&(z.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||z.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const re=fe({category:"replay.hydrate-error"});uo(k,re)}}r(qe,"handleHydrationError");function mt(k){const U=p.getClient();U&&U.on("beforeAddBreadcrumb",z=>at(k,z))}r(mt,"handleBreadcrumbs");function at(k,U){if(!k.isEnabled()||!On(U))return;const z=qt(U);z&&uo(k,z)}r(at,"beforeAddBreadcrumb");function qt(k){return!On(k)||["fetch","xhr","sentry.event","sentry.transaction"].includes(k.category)||k.category.startsWith("ui.")?null:k.category==="console"?mn(k):fe(k)}r(qt,"normalizeBreadcrumb");function mn(k){const U=k.data&&k.data.arguments;if(!Array.isArray(U)||U.length===0)return fe(k);let z=!1;const re=U.map(Ee=>{if(!Ee)return Ee;if(typeof Ee=="string")return Ee.length>E?(z=!0,`${Ee.slice(0,E)}\u2026`):Ee;if(typeof Ee=="object")try{const xe=m.normalize(Ee,7);return JSON.stringify(xe).length>E?(z=!0,`${JSON.stringify(xe,null,2).slice(0,E)}\u2026`):xe}catch{}return Ee});return fe({...k,data:{...k.data,arguments:re,...z?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}r(mn,"normalizeConsoleBreadcrumb");function On(k){return!!k.category}r(On,"isBreadcrumbWithCategory");function ai(k,U){return k.type||!k.exception||!k.exception.values||!k.exception.values.length?!1:!!(U.originalException&&U.originalException.__rrweb__)}r(ai,"isRrwebError");function gi(k,U){k.triggerUserActivity(),k.addUpdate(()=>U.timestamp?(k.throttledAddEvent({type:_i.Custom,timestamp:U.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:U.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:U.event_id}}}}),!1):!0)}r(gi,"addFeedbackBreadcrumb");function Ei(k,U){return k.recordingMode!=="buffer"||U.message===t||!U.exception||U.type?!1:vs(k.getOptions().errorSampleRate)}r(Ei,"shouldSampleForBufferEvent");function Gi(k){return Object.assign((U,z)=>k.isEnabled()?Y(U)?(delete U.breadcrumbs,U):!$(U)&&!P(U)&&!pe(U)||!k.checkAndHandleExpiredSession()?U:pe(U)?(k.flush(),U.contexts.feedback.replay_id=k.getSessionId(),gi(k,U),U):ai(U,z)&&!k.getOptions()._experiments.captureExceptions?(Bt&&m.logger.log("[Replay] Ignoring error from rrweb internals",U),null):((Ei(k,U)||k.recordingMode==="session")&&(U.tags={...U.tags,replayId:k.getSessionId()}),U):U,{id:"Replay"})}r(Gi,"handleGlobalEventListener");function qi(k,U){return U.map(({type:z,start:re,end:Ee,name:xe,data:ut})=>{const Pt=k.throttledAddEvent({type:_i.Custom,timestamp:re,data:{tag:"performanceSpan",payload:{op:z,description:xe,startTimestamp:re,endTimestamp:Ee,data:ut}}});return typeof Pt=="string"?Promise.resolve(null):Pt})}r(qi,"createPerformanceSpans");function rr(k){const{from:U,to:z}=k,re=Date.now()/1e3;return{type:"navigation.push",start:re,end:re,name:z,data:{previous:U}}}r(rr,"handleHistory");function Ir(k){return U=>{if(!k.isEnabled())return;const z=rr(U);z!==null&&(k.getContext().urls.push(z.name),k.triggerUserActivity(),k.addUpdate(()=>(qi(k,[z]),!1)))}}r(Ir,"handleHistorySpanListener");function Ji(k,U){return Bt&&k.getOptions()._experiments.traceInternals?!1:p.isSentryRequestUrl(U,p.getClient())}r(Ji,"shouldFilterRequest");function Wn(k,U){k.isEnabled()&&U!==null&&(Ji(k,U.name)||k.addUpdate(()=>(qi(k,[U]),!0)))}r(Wn,"addNetworkBreadcrumb");function er(k){if(!k)return;const U=new TextEncoder;try{if(typeof k=="string")return U.encode(k).length;if(k instanceof URLSearchParams)return U.encode(k.toString()).length;if(k instanceof FormData){const z=Ti(k);return U.encode(z).length}if(k instanceof Blob)return k.size;if(k instanceof ArrayBuffer)return k.byteLength}catch{}}r(er,"getBodySize");function vt(k){if(!k)return;const U=parseInt(k,10);return isNaN(U)?void 0:U}r(vt,"parseContentLengthHeader");function wt(k){try{if(typeof k=="string")return[k];if(k instanceof URLSearchParams)return[k.toString()];if(k instanceof FormData)return[Ti(k)];if(!k)return[void 0]}catch{return Bt&&m.logger.warn("[Replay] Failed to serialize body",k),[void 0,"BODY_PARSE_ERROR"]}return Bt&&m.logger.info("[Replay] Skipping network body because of body type",k),[void 0,"UNPARSEABLE_BODY_TYPE"]}r(wt,"getBodyString");function Jt(k,U){if(!k)return{headers:{},size:void 0,_meta:{warnings:[U]}};const z={...k._meta},re=z.warnings||[];return z.warnings=[...re,U],k._meta=z,k}r(Jt,"mergeWarning");function _n(k,U){if(!U)return null;const{startTimestamp:z,endTimestamp:re,url:Ee,method:xe,statusCode:ut,request:Pt,response:bt}=U;return{type:k,start:z/1e3,end:re/1e3,name:Ee,data:m.dropUndefinedKeys({method:xe,statusCode:ut,request:Pt,response:bt})}}r(_n,"makeNetworkReplayBreadcrumb");function Yn(k){return{headers:{},size:k,_meta:{warnings:["URL_SKIPPED"]}}}r(Yn,"buildSkippedNetworkRequestOrResponse");function Ui(k,U,z){if(!U&&Object.keys(k).length===0)return;if(!U)return{headers:k};if(!z)return{headers:k,size:U};const re={headers:k,size:U},{body:Ee,warnings:xe}=Fi(z);return re.body=Ee,xe&&xe.length>0&&(re._meta={warnings:xe}),re}r(Ui,"buildNetworkRequestOrResponse");function Oi(k,U){return Object.keys(k).reduce((z,re)=>{const Ee=re.toLowerCase();return U.includes(Ee)&&k[re]&&(z[Ee]=k[re]),z},{})}r(Oi,"getAllowedHeaders");function Ti(k){return new URLSearchParams(k).toString()}r(Ti,"_serializeFormData");function Fi(k){if(!k||typeof k!="string")return{body:k};const U=k.length>_,z=ur(k);if(U){const re=k.slice(0,_);return z?{body:re,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${re}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(z)try{return{body:JSON.parse(k)}}catch{}return{body:k}}r(Fi,"normalizeNetworkBody");function ur(k){const U=k[0],z=k[k.length-1];return U==="["&&z==="]"||U==="{"&&z==="}"}r(ur,"_strIsProbablyJson");function To(k,U){const z=mr(k);return m.stringMatchesSomePattern(z,U)}r(To,"urlMatches");function mr(k,U=s.document.baseURI){if(k.startsWith("http://")||k.startsWith("https://")||k.startsWith(s.location.origin))return k;const z=new URL(k,U);if(z.origin!==new URL(U).origin)return k;const re=z.href;return!k.endsWith("/")&&re.endsWith("/")?re.slice(0,-1):re}r(mr,"getFullUrl");async function eo(k,U,z){try{const re=await rs(k,U,z),Ee=_n("resource.fetch",re);Wn(z.replay,Ee)}catch(re){Bt&&m.logger.error("[Replay] Failed to capture fetch breadcrumb",re)}}r(eo,"captureFetchBreadcrumbToReplay");function Fo(k,U){const{input:z,response:re}=U,Ee=z?Ds(z):void 0,xe=er(Ee),ut=re?vt(re.headers.get("content-length")):void 0;xe!==void 0&&(k.data.request_body_size=xe),ut!==void 0&&(k.data.response_body_size=ut)}r(Fo,"enrichFetchBreadcrumb");async function rs(k,U,z){const re=Date.now(),{startTimestamp:Ee=re,endTimestamp:xe=re}=U,{url:ut,method:Pt,status_code:bt=0,request_body_size:Yt,response_body_size:Ut}=k.data,fn=To(ut,z.networkDetailAllowUrls)&&!To(ut,z.networkDetailDenyUrls),yn=fn?xo(z,U.input,Yt):Yn(Yt),Un=await So(fn,z,U.response,Ut);return{startTimestamp:Ee,endTimestamp:xe,url:ut,method:Pt,statusCode:bt,request:yn,response:Un}}r(rs,"_prepareFetchData");function xo({networkCaptureBodies:k,networkRequestHeaders:U},z,re){const Ee=z?ua(z,U):{};if(!k)return Ui(Ee,re,void 0);const xe=Ds(z),[ut,Pt]=wt(xe),bt=Ui(Ee,re,ut);return Pt?Jt(bt,Pt):bt}r(xo,"_getRequestInfo");async function So(k,{networkCaptureBodies:U,networkResponseHeaders:z},re,Ee){if(!k&&Ee!==void 0)return Yn(Ee);const xe=re?Ns(re.headers,z):{};if(!re||!U&&Ee!==void 0)return Ui(xe,Ee,void 0);const[ut,Pt]=await ta(re),bt=js(ut,{networkCaptureBodies:U,responseBodySize:Ee,captureDetails:k,headers:xe});return Pt?Jt(bt,Pt):bt}r(So,"_getResponseInfo");function js(k,{networkCaptureBodies:U,responseBodySize:z,captureDetails:re,headers:Ee}){try{const xe=k&&k.length&&z===void 0?er(k):z;return re?U?Ui(Ee,xe,k):Ui(Ee,xe,void 0):Yn(xe)}catch(xe){return Bt&&m.logger.warn("[Replay] Failed to serialize response body",xe),Ui(Ee,z,void 0)}}r(js,"getResponseData");async function ta(k){const U=Ma(k);if(!U)return[void 0,"BODY_PARSE_ERROR"];try{return[await ia(U)]}catch(z){return Bt&&m.logger.warn("[Replay] Failed to get text body from response",z),[void 0,"BODY_PARSE_ERROR"]}}r(ta,"_parseFetchResponseBody");function Ds(k=[]){if(!(k.length!==2||typeof k[1]!="object"))return k[1].body}r(Ds,"_getFetchRequestArgBody");function Ns(k,U){const z={};return U.forEach(re=>{k.get(re)&&(z[re]=k.get(re))}),z}r(Ns,"getAllHeaders");function ua(k,U){return k.length===1&&typeof k[0]!="string"?na(k[0],U):k.length===2?na(k[1],U):{}}r(ua,"getRequestHeaders");function na(k,U){if(!k)return{};const z=k.headers;return z?z instanceof Headers?Ns(z,U):Array.isArray(z)?{}:Oi(z,U):{}}r(na,"getHeadersFromOptions");function Ma(k){try{return k.clone()}catch(U){Bt&&m.logger.warn("[Replay] Failed to clone response body",U)}}r(Ma,"_tryCloneResponse");function ia(k){return new Promise((U,z)=>{const re=setTimeout(()=>z(new Error("Timeout while trying to read response body")),500);os(k).then(Ee=>U(Ee),Ee=>z(Ee)).finally(()=>clearTimeout(re))})}r(ia,"_tryGetResponseText");async function os(k){return await k.text()}r(os,"_getResponseText");async function xr(k,U,z){try{const re=Do(k,U,z),Ee=_n("resource.xhr",re);Wn(z.replay,Ee)}catch(re){Bt&&m.logger.error("[Replay] Failed to capture xhr breadcrumb",re)}}r(xr,"captureXhrBreadcrumbToReplay");function Kr(k,U){const{xhr:z,input:re}=U;if(!z)return;const Ee=er(re),xe=z.getResponseHeader("content-length")?vt(z.getResponseHeader("content-length")):Sc(z.response,z.responseType);Ee!==void 0&&(k.data.request_body_size=Ee),xe!==void 0&&(k.data.response_body_size=xe)}r(Kr,"enrichXhrBreadcrumb");function Do(k,U,z){const re=Date.now(),{startTimestamp:Ee=re,endTimestamp:xe=re,input:ut,xhr:Pt}=U,{url:bt,method:Yt,status_code:Ut=0,request_body_size:fn,response_body_size:yn}=k.data;if(!bt)return null;if(!Pt||!To(bt,z.networkDetailAllowUrls)||To(bt,z.networkDetailDenyUrls)){const fr=Yn(fn),Li=Yn(yn);return{startTimestamp:Ee,endTimestamp:xe,url:bt,method:Yt,statusCode:Ut,request:fr,response:Li}}const Un=Pt[a.SENTRY_XHR_DATA_KEY],ti=Un?Oi(Un.request_headers,z.networkRequestHeaders):{},Ii=Oi($s(Pt),z.networkResponseHeaders),[or,xi]=z.networkCaptureBodies?wt(ut):[void 0],[Sr,Wr]=z.networkCaptureBodies?_s(Pt):[void 0],zr=Ui(ti,fn,or),vo=Ui(Ii,yn,Sr);return{startTimestamp:Ee,endTimestamp:xe,url:bt,method:Yt,statusCode:Ut,request:xi?Jt(zr,xi):zr,response:Wr?Jt(vo,Wr):vo}}r(Do,"_prepareXhrData");function $s(k){const U=k.getAllResponseHeaders();return U?U.split(`\r
`).reduce((z,re)=>{const[Ee,xe]=re.split(": ");return z[Ee.toLowerCase()]=xe,z},{}):{}}r($s,"getResponseHeaders");function _s(k){const U=[];try{return[k.responseText]}catch(z){U.push(z)}try{return gc(k.response,k.responseType)}catch(z){U.push(z)}return Bt&&m.logger.warn("[Replay] Failed to get xhr response body",...U),[void 0]}r(_s,"_getXhrResponseBody");function gc(k,U){try{if(typeof k=="string")return[k];if(k instanceof Document)return[k.body.outerHTML];if(U==="json"&&k&&typeof k=="object")return[JSON.stringify(k)];if(!k)return[void 0]}catch{return Bt&&m.logger.warn("[Replay] Failed to serialize body",k),[void 0,"BODY_PARSE_ERROR"]}return Bt&&m.logger.info("[Replay] Skipping network body because of body type",k),[void 0,"UNPARSEABLE_BODY_TYPE"]}r(gc,"_parseXhrResponse");function Sc(k,U){try{const z=U==="json"&&k&&typeof k=="object"?JSON.stringify(k):k;return er(z)}catch{return}}r(Sc,"_getBodySize");function vc(k){const U=p.getClient();try{const{networkDetailAllowUrls:z,networkDetailDenyUrls:re,networkCaptureBodies:Ee,networkRequestHeaders:xe,networkResponseHeaders:ut}=k.getOptions(),Pt={replay:k,networkDetailAllowUrls:z,networkDetailDenyUrls:re,networkCaptureBodies:Ee,networkRequestHeaders:xe,networkResponseHeaders:ut};U&&U.on("beforeAddBreadcrumb",(bt,Yt)=>yc(Pt,bt,Yt))}catch{}}r(vc,"handleNetworkBreadcrumbs");function yc(k,U,z){if(U.data)try{_c(U)&&bc(z)&&(Kr(U,z),xr(U,z,k)),Ec(U)&&Cc(z)&&(Fo(U,z),eo(U,z,k))}catch{Bt&&m.logger.warn("Error when enriching network breadcrumb")}}r(yc,"beforeAddNetworkBreadcrumb");function _c(k){return k.category==="xhr"}r(_c,"_isXhrBreadcrumb");function Ec(k){return k.category==="fetch"}r(Ec,"_isFetchBreadcrumb");function bc(k){return k&&k.xhr}r(bc,"_isXhrHint");function Cc(k){return k&&k.response}r(Cc,"_isFetchHint");function Tc(k){const U=p.getClient();a.addClickKeypressInstrumentationHandler(Ct(k)),a.addHistoryInstrumentationHandler(Ir(k)),mt(k),vc(k);const z=Gi(k);p.addEventProcessor(z),U&&(U.on("beforeSendEvent",gt(k)),U.on("afterSendEvent",me(k)),U.on("createDsc",re=>{const Ee=k.getSessionId();Ee&&k.isEnabled()&&k.recordingMode==="session"&&k.checkAndHandleExpiredSession()&&(re.replay_id=Ee)}),U.on("spanStart",re=>{k.lastActiveSpan=re}),U.on("spanEnd",re=>{k.lastActiveSpan=re}),U.on("beforeSendFeedback",(re,Ee)=>{const xe=k.getSessionId();Ee&&Ee.includeReplay&&k.isEnabled()&&xe&&re.contexts&&re.contexts.feedback&&(re.contexts.feedback.replay_id=xe)}))}r(Tc,"addGlobalListeners");async function Du(k){try{return Promise.all(qi(k,[Ic(s.performance.memory)]))}catch{return[]}}r(Du,"addMemoryEntry");function Ic(k){const{jsHeapSizeLimit:U,totalJSHeapSize:z,usedJSHeapSize:re}=k,Ee=Date.now()/1e3;return{type:"memory",name:"memory",start:Ee,end:Ee,data:{memory:{jsHeapSizeLimit:U,totalJSHeapSize:z,usedJSHeapSize:re}}}}r(Ic,"createMemoryEntry");function Ar(k,U,z){let re,Ee,xe;const ut=z&&z.maxWait?Math.max(z.maxWait,U):0;function Pt(){return bt(),re=k(),re}r(Pt,"invokeFunc");function bt(){Ee!==void 0&&clearTimeout(Ee),xe!==void 0&&clearTimeout(xe),Ee=xe=void 0}r(bt,"cancelTimers");function Yt(){return Ee!==void 0||xe!==void 0?Pt():re}r(Yt,"flush");function Ut(){return Ee&&clearTimeout(Ee),Ee=setTimeout(Pt,U),ut&&xe===void 0&&(xe=setTimeout(Pt,ut)),re}return r(Ut,"debounced"),Ut.cancel=bt,Ut.flush=Yt,Ut}r(Ar,"debounce");function Rl(k){let U=!1;return(z,re)=>{if(!k.checkAndHandleExpiredSession()){Bt&&m.logger.warn("[Replay] Received replay event after session expired.");return}const Ee=re||!U;U=!0,k.clickDetector&&lo(k.clickDetector,z),k.addUpdate(()=>{if(k.recordingMode==="buffer"&&Ee&&k.setInitialState(),!ea(k,z,Ee))return!0;if(!Ee)return!1;if(Ml(k,Ee),k.session&&k.session.previousSessionId)return!0;if(k.recordingMode==="buffer"&&k.session&&k.eventBuffer){const xe=k.eventBuffer.getEarliestTimestamp();xe&&(Xi(`[Replay] Updating session start time to earliest event in buffer to ${new Date(xe)}`,k.getOptions()._experiments.traceInternals),k.session.started=xe,k.getOptions().stickySession&&Xo(k.session))}return k.recordingMode==="session"&&k.flush(),!0})}}r(Rl,"getHandleRecordingEmit");function Pa(k){const U=k.getOptions();return{type:_i.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:k.isRecordingCanvas(),sessionSampleRate:U.sessionSampleRate,errorSampleRate:U.errorSampleRate,useCompressionOption:U.useCompression,blockAllMedia:U.blockAllMedia,maskAllText:U.maskAllText,maskAllInputs:U.maskAllInputs,useCompression:k.eventBuffer?k.eventBuffer.type==="worker":!1,networkDetailHasUrls:U.networkDetailAllowUrls.length>0,networkCaptureBodies:U.networkCaptureBodies,networkRequestHasHeaders:U.networkRequestHeaders.length>0,networkResponseHasHeaders:U.networkResponseHeaders.length>0}}}}r(Pa,"createOptionsEvent");function Ml(k,U){!U||!k.session||k.session.segmentId!==0||ea(k,Pa(k),!1)}r(Ml,"addSettingsEvent");function un(k,U,z,re){return m.createEnvelope(m.createEventEnvelopeHeaders(k,m.getSdkMetadataForEnvelopeHeader(k),re,z),[[{type:"replay_event"},k],[{type:"replay_recording",length:typeof U=="string"?new TextEncoder().encode(U).length:U.length},U]])}r(un,"createReplayEnvelope");function Ru({recordingData:k,headers:U}){let z;const re=`${JSON.stringify(U)}
`;if(typeof k=="string")z=`${re}${k}`;else{const xe=new TextEncoder().encode(re);z=new Uint8Array(xe.length+k.length),z.set(xe),z.set(k,xe.length)}return z}r(Ru,"prepareRecordingData");async function ii({client:k,scope:U,replayId:z,event:re}){const Ee=typeof k._integrations=="object"&&k._integrations!==null&&!Array.isArray(k._integrations)?Object.keys(k._integrations):void 0,xe={event_id:z,integrations:Ee};k.emit("preprocessEvent",re,xe);const ut=await p.prepareEvent(k.getOptions(),re,xe,U,k,p.getIsolationScope());if(!ut)return null;ut.platform=ut.platform||"javascript";const Pt=k.getSdkMetadata(),{name:bt,version:Yt}=Pt&&Pt.sdk||{};return ut.sdk={...ut.sdk,name:bt||"sentry.javascript.unknown",version:Yt||"0.0.0"},ut}r(ii,"prepareReplayEvent");async function wc({recordingData:k,replayId:U,segmentId:z,eventContext:re,timestamp:Ee,session:xe}){const ut=Ru({recordingData:k,headers:{segment_id:z}}),{urls:Pt,errorIds:bt,traceIds:Yt,initialTimestamp:Ut}=re,fn=p.getClient(),yn=p.getCurrentScope(),Un=fn&&fn.getTransport(),ti=fn&&fn.getDsn();if(!fn||!Un||!ti||!xe.sampled)return m.resolvedSyncPromise({});const Ii={type:e,replay_start_timestamp:Ut/1e3,timestamp:Ee/1e3,error_ids:bt,trace_ids:Yt,urls:Pt,replay_id:U,segment_id:z,replay_type:xe.sampled},or=await ii({scope:yn,client:fn,replayId:U,event:Ii});if(!or)return fn.recordDroppedEvent("event_processor","replay",Ii),Xi("An event processor returned `null`, will not send event."),m.resolvedSyncPromise({});delete or.sdkProcessingMetadata;const xi=un(or,ut,ti,fn.getOptions().tunnel);let Sr;try{Sr=await Un.send(xi)}catch(zr){const vo=new Error(t);try{vo.cause=zr}catch{}throw vo}if(typeof Sr.statusCode=="number"&&(Sr.statusCode<200||Sr.statusCode>=300))throw new Qa(Sr.statusCode);const Wr=m.updateRateLimits({},Sr);if(m.isRateLimited(Wr,"replay"))throw new Pl(Wr);return Sr}r(wc,"sendReplayRequest");class Qa extends Error{constructor(U){super(`Transport returned status code ${U}`)}}r(Qa,"TransportStatusCodeError");class Pl extends Error{constructor(U){super("Rate limit hit"),this.rateLimits=U}}r(Pl,"RateLimitError");async function Bd(k,U={count:0,interval:c}){const{recordingData:z,options:re}=k;if(z.length)try{return await wc(k),!0}catch(Ee){if(Ee instanceof Qa||Ee instanceof Pl)throw Ee;if(p.setContext("Replays",{_retryCount:U.count}),Bt&&re._experiments&&re._experiments.captureExceptions&&p.captureException(Ee),U.count>=v){const xe=new Error(`${t} - max retries exceeded`);try{xe.cause=Ee}catch{}throw xe}return U.interval*=++U.count,new Promise((xe,ut)=>{setTimeout(async()=>{try{await Bd(k,U),xe(!0)}catch(Pt){ut(Pt)}},U.interval)})}}r(Bd,"sendReplay");const kl="__THROTTLED",Ac="__SKIPPED";function Mu(k,U,z){const re=new Map,Ee=r(Pt=>{const bt=Pt-z;re.forEach((Yt,Ut)=>{Ut<bt&&re.delete(Ut)})},"_cleanup"),xe=r(()=>[...re.values()].reduce((Pt,bt)=>Pt+bt,0),"_getTotalCount");let ut=!1;return(...Pt)=>{const bt=Math.floor(Date.now()/1e3);if(Ee(bt),xe()>=U){const Ut=ut;return ut=!0,Ut?Ac:kl}ut=!1;const Yt=re.get(bt)||0;return re.set(bt,Yt+1),k(...Pt)}}r(Mu,"throttle");class Fs{constructor({options:U,recordingOptions:z}){Fs.prototype.__init.call(this),Fs.prototype.__init2.call(this),Fs.prototype.__init3.call(this),Fs.prototype.__init4.call(this),Fs.prototype.__init5.call(this),Fs.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:n,sessionIdleExpire:o},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=z,this._options=U,this._debouncedFlush=Ar(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Mu((ut,Pt)=>Os(this,ut,Pt),300,5);const{slowClickTimeout:re,slowClickIgnoreSelectors:Ee}=this.getOptions(),xe=re?{threshold:Math.min(b,re),timeout:re,scrollTimeout:T,ignoreSelector:Ee?Ee.join(","):""}:void 0;xe&&(this.clickDetector=new Ho(this,xe))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(U){const{errorSampleRate:z,sessionSampleRate:re}=this._options;if(!(z<=0&&re<=0)){if(this._initializeSessionForSampling(U),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Xr(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Xr("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const U=ys({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=U,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Xr("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const U=ys({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=U,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const U=this._canvas;this._stopRecording=qr({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:S},emit:Rl(this),onMutation:this._onMutationHandler,...U?{recordCanvas:U.recordCanvas,getCanvasManager:U.getCanvasManager,sampling:U.sampling,dataURLOptions:U.dataURLOptions}:{}})}catch(U){this._handleException(U)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(U){return this._handleException(U),!1}}async stop({forceFlush:U=!1,reason:z}={}){if(this._isEnabled){this._isEnabled=!1;try{Xi(`[Replay] Stopping Replay${z?` triggered by ${z}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),U&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,ls(this)}catch(re){this._handleException(re)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Xi("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Xi("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:U=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const z=Date.now();Xi("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const re=this.stopRecording();!U||!re||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(z),this._updateSessionActivity(z),this._maybeSaveSession()),this.startRecording())}addUpdate(U){const z=U();this.recordingMode!=="buffer"&&z!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Gs(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const U=`${s.location.pathname}${s.location.hash}${s.location.search}`,z=`${s.location.origin}${U}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=z,this._context.initialTimestamp=Date.now(),this._context.urls.push(z)}throttledAddEvent(U,z){const re=this._throttledAddEvent(U,z);if(re===kl){const Ee=fe({category:"replay.throttled"});this.addUpdate(()=>!ea(this,{type:Yo,timestamp:Ee.timestamp||0,data:{tag:"breadcrumb",payload:Ee,metric:!0}}))}return re}getCurrentRoute(){const U=this.lastActiveSpan||p.getActiveSpan(),z=U&&p.getRootSpan(U),Ee=(z&&p.spanToJSON(z).data||{})[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(!(!z||!Ee||!["route","custom"].includes(Ee)))return p.spanToJSON(z).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Hr({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(U){Bt&&m.logger.error("[Replay]",U),Bt&&this._options._experiments&&this._options._experiments.captureExceptions&&p.captureException(U)}_initializeSessionForSampling(U){const z=this._options.errorSampleRate>0,re=ys({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:U},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:z});this.session=re}_checkSession(){if(!this.session)return!1;const U=this.session;return mi(U,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(U),!1):!0}async _refreshSession(U){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(U.id))}_addListeners(){try{s.document.addEventListener("visibilitychange",this._handleVisibilityChange),s.addEventListener("blur",this._handleWindowBlur),s.addEventListener("focus",this._handleWindowFocus),s.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Tc(this),this._hasInitializedCoreListeners=!0)}catch(U){this._handleException(U)}this._performanceCleanupCallback=Tr(this)}_removeListeners(){try{s.document.removeEventListener("visibilitychange",this._handleVisibilityChange),s.removeEventListener("blur",this._handleWindowBlur),s.removeEventListener("focus",this._handleWindowFocus),s.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(U){this._handleException(U)}}__init(){this._handleVisibilityChange=()=>{s.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const U=fe({category:"ui.blur"});this._doChangeToBackgroundTasks(U)}}__init3(){this._handleWindowFocus=()=>{const U=fe({category:"ui.focus"});this._doChangeToForegroundTasks(U)}}__init4(){this._handleKeyboardEvent=U=>{en(this,U)}}_doChangeToBackgroundTasks(U){!this.session||Go(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(U&&this._createCustomBreadcrumb(U),this.conditionalFlush())}_doChangeToForegroundTasks(U){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Xi("[Replay] Document has become active, but session has expired");return}U&&this._createCustomBreadcrumb(U)}_updateUserActivity(U=Date.now()){this._lastActivity=U}_updateSessionActivity(U=Date.now()){this.session&&(this.session.lastActivity=U,this._maybeSaveSession())}_createCustomBreadcrumb(U){this.addUpdate(()=>{this.throttledAddEvent({type:_i.Custom,timestamp:U.timestamp||0,data:{tag:"breadcrumb",payload:U}})})}_addPerformanceEntries(){const U=jn(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(qi(this,U))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:U,eventBuffer:z}=this;if(!U||!z||U.segmentId)return;const re=z.getEarliestTimestamp();re&&re<this._context.initialTimestamp&&(this._context.initialTimestamp=re)}_popEventContext(){const U={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),U}async _runFlush(){const U=this.getSessionId();if(!this.session||!this.eventBuffer||!U){Bt&&m.logger.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await Du(this),!!this.eventBuffer&&U===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const z=Date.now();if(z-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const re=this._popEventContext(),Ee=this.session.segmentId++;this._maybeSaveSession();const xe=await this.eventBuffer.finish();await Bd({replayId:U,recordingData:xe,segmentId:Ee,eventContext:re,session:this.session,options:this.getOptions(),timestamp:z})}catch(z){this._handleException(z),this.stop({reason:"sendReplay"});const re=p.getClient();re&&re.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:U=!1}={})=>{if(!this._isEnabled&&!U)return;if(!this.checkAndHandleExpiredSession()){Bt&&m.logger.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const z=this.session.started,Ee=Date.now()-z;this._debouncedFlush.cancel();const xe=Ee<this._options.minReplayDuration,ut=Ee>this._options.maxReplayDuration+5e3;if(xe||ut){Xi(`[Replay] Session duration (${Math.floor(Ee/1e3)}s) is too ${xe?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),xe&&this._debouncedFlush();return}const Pt=this.eventBuffer;if(Pt&&this.session.segmentId===0&&!Pt.hasCheckout&&Xi("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(bt){Bt&&m.logger.error(bt)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Xo(this.session)}__init6(){this._onMutationHandler=U=>{const z=U.length,re=this._options.mutationLimit,Ee=this._options.mutationBreadcrumbLimit,xe=re&&z>re;if(z>Ee||xe){const ut=fe({category:"replay.mutations",data:{count:z,limit:xe}});this._createCustomBreadcrumb(ut)}return xe?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}r(Fs,"ReplayContainer");function bi(k,U){return[...k,...U].join(",")}r(bi,"getOption");function Oc({mask:k,unmask:U,block:z,unblock:re,ignore:Ee}){const xe=['base[href="/"]'],ut=bi(k,[".sentry-mask","[data-sentry-mask]"]),Pt=bi(U,[]);return{maskTextSelector:ut,unmaskTextSelector:Pt,blockSelector:bi(z,[".sentry-block","[data-sentry-block]",...xe]),unblockSelector:bi(re,[]),ignoreSelector:bi(Ee,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}r(Oc,"getPrivacyOptions");function Dc({el:k,key:U,maskAttributes:z,maskAllText:re,privacyOptions:Ee,value:xe}){return!re||Ee.unmaskTextSelector&&k.matches(Ee.unmaskTextSelector)?xe:z.includes(U)||U==="value"&&k.tagName==="INPUT"&&["submit","button"].includes(k.getAttribute("type")||"")?xe.replace(/[\S]/g,"*"):xe}r(Dc,"maskAttribute");const Ud='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Rc=["content-length","content-type","accept"];let Vd=!1;const Hd=r(k=>new ka(k),"replayIntegration");class ka{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:U=f,flushMaxDelay:z=g,minReplayDuration:re=O,maxReplayDuration:Ee=D,stickySession:xe=!0,useCompression:ut=!0,workerUrl:Pt,_experiments:bt={},maskAllText:Yt=!0,maskAllInputs:Ut=!0,blockAllMedia:fn=!0,mutationBreadcrumbLimit:yn=750,mutationLimit:Un=1e4,slowClickTimeout:ti=7e3,slowClickIgnoreSelectors:Ii=[],networkDetailAllowUrls:or=[],networkDetailDenyUrls:xi=[],networkCaptureBodies:Sr=!0,networkRequestHeaders:Wr=[],networkResponseHeaders:zr=[],mask:vo=[],maskAttributes:fr=["title","placeholder"],unmask:Li=[],block:Dr=[],unblock:Ao=[],ignore:Ni=[],maskFn:vr,beforeAddRecordingEvent:co,beforeErrorSampling:Mo}={}){this.name=ka.id;const Bo=Oc({mask:vo,unmask:Li,block:Dr,unblock:Ao,ignore:Ni});if(this._recordingOptions={maskAllInputs:Ut,maskAllText:Yt,maskInputOptions:{password:!0},maskTextFn:vr,maskInputFn:vr,maskAttributeFn:(ss,to,ds)=>Dc({maskAttributes:fr,maskAllText:Yt,privacyOptions:Bo,key:ss,value:to,el:ds}),...Bo,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ss=>{try{ss.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:U,flushMaxDelay:z,minReplayDuration:Math.min(re,w),maxReplayDuration:Math.min(Ee,D),stickySession:xe,useCompression:ut,workerUrl:Pt,blockAllMedia:fn,maskAllInputs:Ut,maskAllText:Yt,mutationBreadcrumbLimit:yn,mutationLimit:Un,slowClickTimeout:ti,slowClickIgnoreSelectors:Ii,networkDetailAllowUrls:or,networkDetailDenyUrls:xi,networkCaptureBodies:Sr,networkRequestHeaders:Wd(Wr),networkResponseHeaders:Wd(zr),beforeAddRecordingEvent:co,beforeErrorSampling:Mo,_experiments:bt},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ud}`:Ud),this._isInitialized&&m.isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Vd}set _isInitialized(U){Vd=U}setupOnce(){m.isBrowser()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(U){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(U)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const U=Mc(this._initialOptions);this._replay=new Fs({options:U,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const z=p.getClient().getIntegrationByName("ReplayCanvas");if(!z)return;this._replay._canvas=z.getOptions()}catch{}}}r(ka,"Replay"),ka.__initStatic();function Mc(k){const U=p.getClient(),z=U&&U.getOptions(),re={sessionSampleRate:0,errorSampleRate:0,...m.dropUndefinedKeys(k)};if(!z)return m.consoleSandbox(()=>{console.warn("SDK client is not available.")}),re;const Ee=p.parseSampleRate(z.replaysSessionSampleRate),xe=p.parseSampleRate(z.replaysOnErrorSampleRate);return Ee==null&&xe==null&&m.consoleSandbox(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),Ee!=null&&(re.sessionSampleRate=Ee),xe!=null&&(re.errorSampleRate=xe),re}r(Mc,"loadReplayOptionsFromClient");function Wd(k){return[...Rc,...k.map(U=>U.toLowerCase())]}r(Wd,"_getMergedNetworkHeaders");function Pc(){const k=p.getClient();return k&&k.getIntegrationByName("Replay")}r(Pc,"getReplay"),l.getReplay=Pc,l.replayIntegration=Hd},8151162894:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(375537670),a=d(9046403702),s=d(7738910413);class i extends u.BaseClient{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},o=a.WINDOW.SENTRY_SDK_SOURCE||h.getSDKSource();u.applySdkMetadata(n,"browser",["browser"],o),super(n),n.sendClientReports&&a.WINDOW.document&&a.WINDOW.document.addEventListener("visibilitychange",()=>{a.WINDOW.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return m.eventFromException(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",o){return m.eventFromMessage(this._options.stackParser,t,n,o,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){p.DEBUG_BUILD&&h.logger.warn("SDK not enabled, will not capture user feedback.");return}const n=s.createUserFeedbackEnvelope(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(t,n,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,o)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){p.DEBUG_BUILD&&h.logger.log("No outcomes to send");return}if(!this._dsn){p.DEBUG_BUILD&&h.logger.log("No dsn provided, will not send outcomes");return}p.DEBUG_BUILD&&h.logger.log("Sending outcomes:",t);const n=h.createClientReportEnvelope(t,this._options.tunnel&&h.dsnToString(this._dsn));this.sendEnvelope(n)}}r(i,"BrowserClient"),l.BrowserClient=i},3345899401:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},375537670:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614);function p(E,b){const T=s(E,b),I={type:b&&b.name,value:n(b)};return T.length&&(I.stacktrace={frames:T}),I.type===void 0&&I.value===""&&(I.value="Unrecoverable error caught"),I}r(p,"exceptionFromError");function m(E,b,T,I){const O=u.getClient(),w=O&&O.getOptions().normalizeDepth,D=_(b),R={__serialized__:h.normalizeToSize(b,w)};if(D)return{exception:{values:[p(E,D)]},extra:R};const L={exception:{values:[{type:h.isEvent(b)?b.constructor.name:I?"UnhandledRejection":"Error",value:c(b,{isUnhandledRejection:I})}]},extra:R};if(T){const H=s(E,T);H.length&&(L.exception.values[0].stacktrace={frames:H})}return L}r(m,"eventFromPlainObject");function a(E,b){return{exception:{values:[p(E,b)]}}}r(a,"eventFromError");function s(E,b){const T=b.stacktrace||b.stack||"",I=e(b),O=t(b);try{return E(T,I,O)}catch{}return[]}r(s,"parseStackFrames");const i=/Minified React error #\d+;/i;function e(E){return E&&i.test(E.message)?1:0}r(e,"getSkipFirstStackStringLines");function t(E){return typeof E.framesToPop=="number"?E.framesToPop:0}r(t,"getPopFirstTopFrames");function n(E){const b=E&&E.message;return b?b.error&&typeof b.error.message=="string"?b.error.message:b:"No error message"}r(n,"extractMessage");function o(E,b,T,I){const O=T&&T.syntheticException||void 0,w=g(E,b,O,I);return h.addExceptionMechanism(w),w.level="error",T&&T.event_id&&(w.event_id=T.event_id),h.resolvedSyncPromise(w)}r(o,"eventFromException");function f(E,b,T="info",I,O){const w=I&&I.syntheticException||void 0,D=S(E,b,w,O);return D.level=T,I&&I.event_id&&(D.event_id=I.event_id),h.resolvedSyncPromise(D)}r(f,"eventFromMessage");function g(E,b,T,I,O){let w;if(h.isErrorEvent(b)&&b.error)return a(E,b.error);if(h.isDOMError(b)||h.isDOMException(b)){const D=b;if("stack"in b)w=a(E,b);else{const R=D.name||(h.isDOMError(D)?"DOMError":"DOMException"),L=D.message?`${R}: ${D.message}`:R;w=S(E,L,T,I),h.addExceptionTypeValue(w,L)}return"code"in D&&(w.tags={...w.tags,"DOMException.code":`${D.code}`}),w}return h.isError(b)?a(E,b):h.isPlainObject(b)||h.isEvent(b)?(w=m(E,b,T,O),h.addExceptionMechanism(w,{synthetic:!0}),w):(w=S(E,b,T,I),h.addExceptionTypeValue(w,`${b}`,void 0),h.addExceptionMechanism(w,{synthetic:!0}),w)}r(g,"eventFromUnknownInput");function S(E,b,T,I){const O={};if(I&&T){const w=s(E,T);w.length&&(O.exception={values:[{value:b,stacktrace:{frames:w}}]})}if(h.isParameterizedString(b)){const{__sentry_template_string__:w,__sentry_template_values__:D}=b;return O.logentry={message:w,params:D},O}return O.message=b,O}r(S,"eventFromString");function c(E,{isUnhandledRejection:b}){const T=h.extractExceptionKeysForMessage(E),I=b?"promise rejection":"exception";return h.isErrorEvent(E)?`Event \`ErrorEvent\` captured as ${I} with message \`${E.message}\``:h.isEvent(E)?`Event \`${v(E)}\` (type=${E.type}) captured as ${I}`:`Object captured as ${I} with keys: ${T}`}r(c,"getNonErrorObjectExceptionValue");function v(E){try{const b=Object.getPrototypeOf(E);return b?b.constructor.name:void 0}catch{}}r(v,"getObjectClassName");function _(E){for(const b in E)if(Object.prototype.hasOwnProperty.call(E,b)){const T=E[b];if(T instanceof Error)return T}}r(_,"getErrorPropertyFromObject"),l.eventFromException=o,l.eventFromMessage=f,l.eventFromUnknownInput=g,l.exceptionFromError=p},2915497046:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6049995776),h=d(1076637753),p=u.buildFeedbackIntegration({lazyLoadIntegration:h.lazyLoadIntegration});l.feedbackAsyncIntegration=p},9038494489:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6049995776),h=d(1076637753),p=u.buildFeedbackIntegration({lazyLoadIntegration:h.lazyLoadIntegration,getModalIntegration:()=>u.feedbackModalIntegration,getScreenshotIntegration:()=>u.feedbackScreenshotIntegration});l.feedbackSyncIntegration=p},9046403702:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ;let m=0;function a(){return m>0}r(a,"shouldIgnoreOnError");function s(){m++,setTimeout(()=>{m--})}r(s,"ignoreNextOnError");function i(e,t={},n){if(typeof e!="function")return e;try{const f=e.__sentry_wrapped__;if(f)return f;if(h.getOriginalFunction(e))return e}catch{return e}const o=r(function(){const f=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const g=f.map(S=>i(S,t));return e.apply(this,g)}catch(g){throw s(),u.withScope(S=>{S.addEventProcessor(c=>(t.mechanism&&(h.addExceptionTypeValue(c,void 0,void 0),h.addExceptionMechanism(c,t.mechanism)),c.extra={...c.extra,arguments:f},c)),u.captureException(g)}),g}},"sentryWrapped");try{for(const f in e)Object.prototype.hasOwnProperty.call(e,f)&&(o[f]=e[f])}catch{}h.markFunctionWrapped(o,e),h.addNonEnumerableProperty(e,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get(){return e.name}})}catch{}return o}r(i,"wrap"),l.WINDOW=p,l.ignoreNextOnError=s,l.shouldIgnoreOnError=a,l.wrap=i},8904626639:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(1114790286),p=d(9046403702),m=d(8151162894),a=d(8685600704),s=d(4795369790),i=d(375537670),e=d(7738910413),t=d(7672786771),n=d(3985552739),o=d(2334015581),f=d(7098914998),g=d(4305747877),S=d(9919948800),c=d(1076637753),v=d(918703877),_=d(328044736),E=d(4269444637),b=d(6979168052),T=d(4947629935),I=d(2915497046),O=d(9038494489),w=d(6049995776),D=d(6520656099),R=d(5559796378),L=d(7824548363),H=d(5380267868);l.SDK_VERSION=u.SDK_VERSION,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=u.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=u.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=u.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.Scope=u.Scope,l.addBreadcrumb=u.addBreadcrumb,l.addEventProcessor=u.addEventProcessor,l.addIntegration=u.addIntegration,l.addTracingExtensions=u.addTracingExtensions,l.captureConsoleIntegration=u.captureConsoleIntegration,l.captureEvent=u.captureEvent,l.captureException=u.captureException,l.captureFeedback=u.captureFeedback,l.captureMessage=u.captureMessage,l.captureSession=u.captureSession,l.close=u.close,l.continueTrace=u.continueTrace,l.createTransport=u.createTransport,l.debugIntegration=u.debugIntegration,l.dedupeIntegration=u.dedupeIntegration,l.endSession=u.endSession,l.extraErrorDataIntegration=u.extraErrorDataIntegration,l.flush=u.flush,l.functionToStringIntegration=u.functionToStringIntegration,l.getActiveSpan=u.getActiveSpan,l.getClient=u.getClient,l.getCurrentHub=u.getCurrentHub,l.getCurrentScope=u.getCurrentScope,l.getGlobalScope=u.getGlobalScope,l.getIsolationScope=u.getIsolationScope,l.getRootSpan=u.getRootSpan,l.getSpanDescendants=u.getSpanDescendants,l.getSpanStatusFromHttpCode=u.getSpanStatusFromHttpCode,l.inboundFiltersIntegration=u.inboundFiltersIntegration,l.isInitialized=u.isInitialized,l.lastEventId=u.lastEventId,l.makeMultiplexedTransport=u.makeMultiplexedTransport,l.moduleMetadataIntegration=u.moduleMetadataIntegration,l.parameterize=u.parameterize,l.registerSpanErrorInstrumentation=u.registerSpanErrorInstrumentation,l.rewriteFramesIntegration=u.rewriteFramesIntegration,l.sessionTimingIntegration=u.sessionTimingIntegration,l.setContext=u.setContext,l.setCurrentClient=u.setCurrentClient,l.setExtra=u.setExtra,l.setExtras=u.setExtras,l.setHttpStatus=u.setHttpStatus,l.setMeasurement=u.setMeasurement,l.setTag=u.setTag,l.setTags=u.setTags,l.setUser=u.setUser,l.spanToBaggageHeader=u.spanToBaggageHeader,l.spanToJSON=u.spanToJSON,l.spanToTraceHeader=u.spanToTraceHeader,l.startInactiveSpan=u.startInactiveSpan,l.startSession=u.startSession,l.startSpan=u.startSpan,l.startSpanManual=u.startSpanManual,l.withActiveSpan=u.withActiveSpan,l.withIsolationScope=u.withIsolationScope,l.withScope=u.withScope,l.zodErrorsIntegration=u.zodErrorsIntegration,l.metrics=h.metrics,l.WINDOW=p.WINDOW,l.BrowserClient=m.BrowserClient,l.makeFetchTransport=a.makeFetchTransport,l.chromeStackLineParser=s.chromeStackLineParser,l.defaultStackLineParsers=s.defaultStackLineParsers,l.defaultStackParser=s.defaultStackParser,l.geckoStackLineParser=s.geckoStackLineParser,l.opera10StackLineParser=s.opera10StackLineParser,l.opera11StackLineParser=s.opera11StackLineParser,l.winjsStackLineParser=s.winjsStackLineParser,l.eventFromException=i.eventFromException,l.eventFromMessage=i.eventFromMessage,l.exceptionFromError=i.exceptionFromError,l.createUserFeedbackEnvelope=e.createUserFeedbackEnvelope,l.captureUserFeedback=t.captureUserFeedback,l.forceLoad=t.forceLoad,l.getDefaultIntegrations=t.getDefaultIntegrations,l.init=t.init,l.onLoad=t.onLoad,l.showReportDialog=t.showReportDialog,l.breadcrumbsIntegration=n.breadcrumbsIntegration,l.globalHandlersIntegration=o.globalHandlersIntegration,l.httpContextIntegration=f.httpContextIntegration,l.linkedErrorsIntegration=g.linkedErrorsIntegration,l.browserApiErrorsIntegration=S.browserApiErrorsIntegration,l.lazyLoadIntegration=c.lazyLoadIntegration,l.reportingObserverIntegration=v.reportingObserverIntegration,l.httpClientIntegration=_.httpClientIntegration,l.contextLinesIntegration=E.contextLinesIntegration,l.getReplay=b.getReplay,l.replayIntegration=b.replayIntegration,l.replayCanvasIntegration=T.replayCanvasIntegration,l.feedbackAsyncIntegration=I.feedbackAsyncIntegration,l.feedbackIntegration=O.feedbackSyncIntegration,l.feedbackSyncIntegration=O.feedbackSyncIntegration,l.getFeedback=w.getFeedback,l.sendFeedback=w.sendFeedback,l.defaultRequestInstrumentationOptions=D.defaultRequestInstrumentationOptions,l.instrumentOutgoingRequests=D.instrumentOutgoingRequests,l.browserTracingIntegration=R.browserTracingIntegration,l.startBrowserTracingNavigationSpan=R.startBrowserTracingNavigationSpan,l.startBrowserTracingPageLoadSpan=R.startBrowserTracingPageLoadSpan,l.makeBrowserOfflineTransport=L.makeBrowserOfflineTransport,l.browserProfilingIntegration=H.browserProfilingIntegration},3985552739:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(3345899401),a=d(9046403702),s=1024,i="Breadcrumbs",e=r((_={})=>{const E={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,..._};return{name:i,setup(b){E.console&&p.addConsoleInstrumentationHandler(f(b)),E.dom&&u.addClickKeypressInstrumentationHandler(o(b,E.dom)),E.xhr&&u.addXhrInstrumentationHandler(g(b)),E.fetch&&p.addFetchInstrumentationHandler(S(b)),E.history&&u.addHistoryInstrumentationHandler(c(b)),E.sentry&&b.on("beforeSendEvent",n(b))}}},"_breadcrumbsIntegration"),t=h.defineIntegration(e);function n(_){return r(function(b){h.getClient()===_&&h.addBreadcrumb({category:`sentry.${b.type==="transaction"?"transaction":"event"}`,event_id:b.event_id,level:b.level,message:p.getEventDescription(b)},{event:b})},"addSentryBreadcrumb")}r(n,"_getSentryBreadcrumbHandler");function o(_,E){return r(function(T){if(h.getClient()!==_)return;let I,O,w=typeof E=="object"?E.serializeAttribute:void 0,D=typeof E=="object"&&typeof E.maxStringLength=="number"?E.maxStringLength:void 0;D&&D>s&&(m.DEBUG_BUILD&&p.logger.warn(`\`dom.maxStringLength\` cannot exceed ${s}, but a value of ${D} was configured. Sentry will use ${s} instead.`),D=s),typeof w=="string"&&(w=[w]);try{const L=T.event,H=v(L)?L.target:L;I=p.htmlTreeAsString(H,{keyAttrs:w,maxStringLength:D}),O=p.getComponentName(H)}catch{I="<unknown>"}if(I.length===0)return;const R={category:`ui.${T.name}`,message:I};O&&(R.data={"ui.component_name":O}),h.addBreadcrumb(R,{event:T.event,name:T.name,global:T.global})},"_innerDomBreadcrumb")}r(o,"_getDomBreadcrumbHandler");function f(_){return r(function(b){if(h.getClient()!==_)return;const T={category:"console",data:{arguments:b.args,logger:"console"},level:p.severityLevelFromString(b.level),message:p.safeJoin(b.args," ")};if(b.level==="assert")if(b.args[0]===!1)T.message=`Assertion failed: ${p.safeJoin(b.args.slice(1)," ")||"console.assert"}`,T.data.arguments=b.args.slice(1);else return;h.addBreadcrumb(T,{input:b.args,level:b.level})},"_consoleBreadcrumb")}r(f,"_getConsoleBreadcrumbHandler");function g(_){return r(function(b){if(h.getClient()!==_)return;const{startTimestamp:T,endTimestamp:I}=b,O=b.xhr[u.SENTRY_XHR_DATA_KEY];if(!T||!I||!O)return;const{method:w,url:D,status_code:R,body:L}=O,H={method:w,url:D,status_code:R},K={xhr:b.xhr,input:L,startTimestamp:T,endTimestamp:I};h.addBreadcrumb({category:"xhr",data:H,type:"http"},K)},"_xhrBreadcrumb")}r(g,"_getXhrBreadcrumbHandler");function S(_){return r(function(b){if(h.getClient()!==_)return;const{startTimestamp:T,endTimestamp:I}=b;if(I&&!(b.fetchData.url.match(/sentry_key/)&&b.fetchData.method==="POST"))if(b.error){const O=b.fetchData,w={data:b.error,input:b.args,startTimestamp:T,endTimestamp:I};h.addBreadcrumb({category:"fetch",data:O,level:"error",type:"http"},w)}else{const O=b.response,w={...b.fetchData,status_code:O&&O.status},D={input:b.args,response:O,startTimestamp:T,endTimestamp:I};h.addBreadcrumb({category:"fetch",data:w,type:"http"},D)}},"_fetchBreadcrumb")}r(S,"_getFetchBreadcrumbHandler");function c(_){return r(function(b){if(h.getClient()!==_)return;let T=b.from,I=b.to;const O=p.parseUrl(a.WINDOW.location.href);let w=T?p.parseUrl(T):void 0;const D=p.parseUrl(I);(!w||!w.path)&&(w=O),O.protocol===D.protocol&&O.host===D.host&&(I=D.relative),O.protocol===w.protocol&&O.host===w.host&&(T=w.relative),h.addBreadcrumb({category:"navigation",data:{from:T,to:I}})},"_historyBreadcrumb")}r(c,"_getHistoryBreadcrumbHandler");function v(_){return!!_&&!!_.target}r(v,"_isEvent"),l.breadcrumbsIntegration=t},9919948800:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(9046403702),m=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a="BrowserApiErrors",s=r((f={})=>{const g={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...f};return{name:a,setupOnce(){g.setTimeout&&h.fill(p.WINDOW,"setTimeout",e),g.setInterval&&h.fill(p.WINDOW,"setInterval",e),g.requestAnimationFrame&&h.fill(p.WINDOW,"requestAnimationFrame",t),g.XMLHttpRequest&&"XMLHttpRequest"in p.WINDOW&&h.fill(XMLHttpRequest.prototype,"send",n);const S=g.eventTarget;S&&(Array.isArray(S)?S:m).forEach(o)}}},"_browserApiErrorsIntegration"),i=u.defineIntegration(s);function e(f){return function(...g){const S=g[0];return g[0]=p.wrap(S,{mechanism:{data:{function:h.getFunctionName(f)},handled:!1,type:"instrument"}}),f.apply(this,g)}}r(e,"_wrapTimeFunction");function t(f){return function(g){return f.apply(this,[p.wrap(g,{mechanism:{data:{function:"requestAnimationFrame",handler:h.getFunctionName(f)},handled:!1,type:"instrument"}})])}}r(t,"_wrapRAF");function n(f){return function(...g){const S=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(v=>{v in S&&typeof S[v]=="function"&&h.fill(S,v,function(_){const E={mechanism:{data:{function:v,handler:h.getFunctionName(_)},handled:!1,type:"instrument"}},b=h.getOriginalFunction(_);return b&&(E.mechanism.data.handler=h.getFunctionName(b)),p.wrap(_,E)})}),f.apply(this,g)}}r(n,"_wrapXHR");function o(f){const g=p.WINDOW,S=g[f]&&g[f].prototype;!S||!S.hasOwnProperty||!S.hasOwnProperty("addEventListener")||(h.fill(S,"addEventListener",function(c){return function(v,_,E){try{typeof _.handleEvent=="function"&&(_.handleEvent=p.wrap(_.handleEvent,{mechanism:{data:{function:"handleEvent",handler:h.getFunctionName(_),target:f},handled:!1,type:"instrument"}}))}catch{}return c.apply(this,[v,p.wrap(_,{mechanism:{data:{function:"addEventListener",handler:h.getFunctionName(_),target:f},handled:!1,type:"instrument"}}),E])}}),h.fill(S,"removeEventListener",function(c){return function(v,_,E){const b=_;try{const T=b&&b.__sentry_wrapped__;T&&c.call(this,v,T,E)}catch{}return c.call(this,v,b,E)}}))}r(o,"_wrapEventTarget"),l.browserApiErrorsIntegration=i},4269444637:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ,m=7,a="ContextLines",s=r((n={})=>{const o=n.frameContextLines!=null?n.frameContextLines:m;return{name:a,processEvent(f){return e(f,o)}}},"_contextLinesIntegration"),i=u.defineIntegration(s);function e(n,o){const f=p.document,g=p.location&&h.stripUrlQueryAndFragment(p.location.href);if(!f||!g)return n;const S=n.exception&&n.exception.values;if(!S||!S.length)return n;const c=f.documentElement.innerHTML;if(!c)return n;const v=["<!DOCTYPE html>","<html>",...c.split(`
`),"</html>"];return S.forEach(_=>{const E=_.stacktrace;E&&E.frames&&(E.frames=E.frames.map(b=>t(b,v,g,o)))}),n}r(e,"addSourceContext");function t(n,o,f,g){return n.filename!==f||!n.lineno||!o.length||h.addContextToFrame(o,n,g),n}r(t,"applySourceContextToFrame"),l.applySourceContextToFrame=t,l.contextLinesIntegration=i},2334015581:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(375537670),a=d(9046403702),s="GlobalHandlers",i=r((v={})=>{const _={onerror:!0,onunhandledrejection:!0,...v};return{name:s,setupOnce(){Error.stackTraceLimit=50},setup(E){_.onerror&&(t(E),S("onerror")),_.onunhandledrejection&&(n(E),S("onunhandledrejection"))}}},"_globalHandlersIntegration"),e=u.defineIntegration(i);function t(v){h.addGlobalErrorInstrumentationHandler(_=>{const{stackParser:E,attachStacktrace:b}=c();if(u.getClient()!==v||a.shouldIgnoreOnError())return;const{msg:T,url:I,line:O,column:w,error:D}=_,R=g(m.eventFromUnknownInput(E,D||T,void 0,b,!1),I,O,w);R.level="error",u.captureEvent(R,{originalException:D,mechanism:{handled:!1,type:"onerror"}})})}r(t,"_installGlobalOnErrorHandler");function n(v){h.addGlobalUnhandledRejectionInstrumentationHandler(_=>{const{stackParser:E,attachStacktrace:b}=c();if(u.getClient()!==v||a.shouldIgnoreOnError())return;const T=o(_),I=h.isPrimitive(T)?f(T):m.eventFromUnknownInput(E,T,void 0,b,!0);I.level="error",u.captureEvent(I,{originalException:T,mechanism:{handled:!1,type:"onunhandledrejection"}})})}r(n,"_installGlobalOnUnhandledRejectionHandler");function o(v){if(h.isPrimitive(v))return v;try{if("reason"in v)return v.reason;if("detail"in v&&"reason"in v.detail)return v.detail.reason}catch{}return v}r(o,"_getUnhandledRejectionError");function f(v){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(v)}`}]}}}r(f,"_eventFromRejectionWithPrimitive");function g(v,_,E,b){const T=v.exception=v.exception||{},I=T.values=T.values||[],O=I[0]=I[0]||{},w=O.stacktrace=O.stacktrace||{},D=w.frames=w.frames||[],R=isNaN(parseInt(b,10))?void 0:b,L=isNaN(parseInt(E,10))?void 0:E,H=h.isString(_)&&_.length>0?_:h.getLocationHref();return D.length===0&&D.push({colno:R,filename:H,function:h.UNKNOWN_FUNCTION,in_app:!0,lineno:L}),v}r(g,"_enhanceEventWithInitialFrame");function S(v){p.DEBUG_BUILD&&h.logger.log(`Global Handler attached: ${v}`)}r(S,"globalHandlerLog");function c(){const v=u.getClient();return v&&v.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}r(c,"getOptions"),l.globalHandlersIntegration=e},328044736:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(3345899401),a="HttpClient",s=r((O={})=>{const w={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...O};return{name:a,setup(D){v(D,w),_(D,w)}}},"_httpClientIntegration"),i=h.defineIntegration(s);function e(O,w,D,R){if(E(O,D.status,D.url)){const L=T(w,R);let H,K,ee,q;I()&&([{headers:H,cookies:ee},{headers:K,cookies:q}]=[{cookieHeader:"Cookie",obj:L},{cookieHeader:"Set-Cookie",obj:D}].map(({cookieHeader:ce,obj:Te})=>{const ke=f(Te.headers);let tt;try{const At=ke[ce]||ke[ce.toLowerCase()]||void 0;At&&(tt=o(At))}catch{m.DEBUG_BUILD&&p.logger.log(`Could not extract cookies from header ${ce}`)}return{headers:ke,cookies:tt}}));const ae=b({url:L.url,method:L.method,status:D.status,requestHeaders:H,responseHeaders:K,requestCookies:ee,responseCookies:q});h.captureEvent(ae)}}r(e,"_fetchResponseHandler");function t(O,w,D,R){if(E(O,w.status,w.responseURL)){let L,H,K;if(I()){try{const q=w.getResponseHeader("Set-Cookie")||w.getResponseHeader("set-cookie")||void 0;q&&(H=o(q))}catch{m.DEBUG_BUILD&&p.logger.log("Could not extract cookies from response headers")}try{K=g(w)}catch{m.DEBUG_BUILD&&p.logger.log("Could not extract headers from response")}L=R}const ee=b({url:w.responseURL,method:D,status:w.status,requestHeaders:L,responseHeaders:K,responseCookies:H});h.captureEvent(ee)}}r(t,"_xhrResponseHandler");function n(O){if(O){const w=O["Content-Length"]||O["content-length"];if(w)return parseInt(w,10)}}r(n,"_getResponseSizeFromHeaders");function o(O){return O.split("; ").reduce((w,D)=>{const[R,L]=D.split("=");return w[R]=L,w},{})}r(o,"_parseCookieString");function f(O){const w={};return O.forEach((D,R)=>{w[R]=D}),w}r(f,"_extractFetchHeaders");function g(O){const w=O.getAllResponseHeaders();return w?w.split(`\r
`).reduce((D,R)=>{const[L,H]=R.split(": ");return D[L]=H,D},{}):{}}r(g,"_getXHRResponseHeaders");function S(O,w){return O.some(D=>typeof D=="string"?w.includes(D):D.test(w))}r(S,"_isInGivenRequestTargets");function c(O,w){return O.some(D=>typeof D=="number"?D===w:w>=D[0]&&w<=D[1])}r(c,"_isInGivenStatusRanges");function v(O,w){p.supportsNativeFetch()&&p.addFetchInstrumentationHandler(D=>{if(h.getClient()!==O)return;const{response:R,args:L}=D,[H,K]=L;R&&e(w,H,R,K)})}r(v,"_wrapFetch");function _(O,w){"XMLHttpRequest"in p.GLOBAL_OBJ&&u.addXhrInstrumentationHandler(D=>{if(h.getClient()!==O)return;const R=D.xhr,L=R[u.SENTRY_XHR_DATA_KEY];if(!L)return;const{method:H,request_headers:K}=L;try{t(w,R,H,K)}catch(ee){m.DEBUG_BUILD&&p.logger.warn("Error while extracting response event form XHR response",ee)}})}r(_,"_wrapXHR");function E(O,w,D){return c(O.failedRequestStatusCodes,w)&&S(O.failedRequestTargets,D)&&!h.isSentryRequestUrl(D,h.getClient())}r(E,"_shouldCaptureResponse");function b(O){const w=`HTTP Client Error with status code: ${O.status}`,D={message:w,exception:{values:[{type:"Error",value:w}]},request:{url:O.url,method:O.method,headers:O.requestHeaders,cookies:O.requestCookies},contexts:{response:{status_code:O.status,headers:O.responseHeaders,cookies:O.responseCookies,body_size:n(O.responseHeaders)}}};return p.addExceptionMechanism(D,{type:"http.client",handled:!1}),D}r(b,"_createEvent");function T(O,w){return!w&&O instanceof Request||O instanceof Request&&O.bodyUsed?O:new Request(O,w)}r(T,"_getRequest");function I(){const O=h.getClient();return O?Boolean(O.getOptions().sendDefaultPii):!1}r(I,"_shouldSendDefaultPii"),l.httpClientIntegration=i},7098914998:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(9046403702),p=u.defineIntegration(()=>({name:"HttpContext",preprocessEvent(m){if(!h.WINDOW.navigator&&!h.WINDOW.location&&!h.WINDOW.document)return;const a=m.request&&m.request.url||h.WINDOW.location&&h.WINDOW.location.href,{referrer:s}=h.WINDOW.document||{},{userAgent:i}=h.WINDOW.navigator||{},e={...m.request&&m.request.headers,...s&&{Referer:s},...i&&{"User-Agent":i}},t={...m.request,...a&&{url:a},headers:e};m.request=t}}));l.httpContextIntegration=p},4305747877:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(375537670),m="cause",a=5,s="LinkedErrors",i=r((t={})=>{const n=t.limit||a,o=t.key||m;return{name:s,preprocessEvent(f,g,S){const c=S.getOptions();h.applyAggregateErrorsToEvent(p.exceptionFromError,c.stackParser,c.maxValueLength,o,n,f,g)}}},"_linkedErrorsIntegration"),e=u.defineIntegration(i);l.linkedErrorsIntegration=e},918703877:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ,m="ReportingObserver",a=new WeakMap,s=r((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(o){if(a.has(u.getClient()))for(const f of o)u.withScope(g=>{g.setExtra("url",f.url);const S=`ReportingObserver [${f.type}]`;let c="No details available";if(f.body){const v={};for(const _ in f.body)v[_]=f.body[_];if(g.setExtra("body",v),f.type==="crash"){const _=f.body;c=[_.crashId||"",_.reason||""].join(" ").trim()||c}else c=f.body.message||c}u.captureMessage(`${S}: ${c}`)})}return r(n,"handler"),{name:m,setupOnce(){if(!h.supportsReportingObserver())return;new p.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(o){a.set(o,!0)}}},"_reportingObserverIntegration"),i=u.defineIntegration(s);l.reportingObserverIntegration=i},1114790286:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710);function h(i,e=1,t){u.metrics.increment(u.BrowserMetricsAggregator,i,e,t)}r(h,"increment");function p(i,e,t){u.metrics.distribution(u.BrowserMetricsAggregator,i,e,t)}r(p,"distribution");function m(i,e,t){u.metrics.set(u.BrowserMetricsAggregator,i,e,t)}r(m,"set");function a(i,e,t){u.metrics.gauge(u.BrowserMetricsAggregator,i,e,t)}r(a,"gauge");const s={increment:h,distribution:p,set:m,gauge:a};l.metrics=s},5380267868:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(3423034766),a=d(9596377211),s="BrowserProfiling",i=r(()=>({name:s,setup(t){const n=u.getActiveSpan(),o=n&&u.getRootSpan(n);o&&a.isAutomatedPageLoadSpan(o)&&a.shouldProfileSpan(o)&&m.startProfileForSpan(o),t.on("spanStart",f=>{f===u.getRootSpan(f)&&a.shouldProfileSpan(f)&&m.startProfileForSpan(f)}),t.on("beforeEnvelope",f=>{if(!a.getActiveProfilesCount())return;const g=a.findProfiledTransactionsFromEnvelope(f);if(!g.length)return;const S=[];for(const c of g){const v=c&&c.contexts,_=v&&v.profile&&v.profile.profile_id,E=v&&v.profile&&v.profile.start_timestamp;if(typeof _!="string"){p.DEBUG_BUILD&&h.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!_){p.DEBUG_BUILD&&h.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}v&&v.profile&&delete v.profile;const b=a.takeProfileFromGlobalCache(_);if(!b){p.DEBUG_BUILD&&h.logger.log(`[Profiling] Could not retrieve profile for span: ${_}`);continue}const T=a.createProfilingEvent(_,E,b,c);T&&S.push(T)}a.addProfilesToEnvelope(f,S)})}}),"_browserProfilingIntegration"),e=u.defineIntegration(i);l.browserProfilingIntegration=e},3423034766:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(9046403702),a=d(9596377211);function s(i){let e;a.isAutomatedPageLoadSpan(i)&&(e=h.timestampInSeconds()*1e3);const t=a.startJSSelfProfile();if(!t)return;p.DEBUG_BUILD&&h.logger.log(`[Profiling] started profiling span: ${u.spanToJSON(i).description}`);const n=h.uuid4();u.getCurrentScope().setContext("profile",{profile_id:n,start_timestamp:e});async function o(){if(i&&t)return t.stop().then(c=>{if(f&&(m.WINDOW.clearTimeout(f),f=void 0),p.DEBUG_BUILD&&h.logger.log(`[Profiling] stopped profiling of span: ${u.spanToJSON(i).description}`),!c){p.DEBUG_BUILD&&h.logger.log(`[Profiling] profiler returned null profile for: ${u.spanToJSON(i).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}a.addProfileToGlobalCache(n,c)}).catch(c=>{p.DEBUG_BUILD&&h.logger.log("[Profiling] error while stopping profiler:",c)})}r(o,"onProfileHandler");let f=m.WINDOW.setTimeout(()=>{p.DEBUG_BUILD&&h.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",u.spanToJSON(i).description),o()},a.MAX_PROFILE_DURATION_MS);const g=i.end.bind(i);function S(){return i?(o().then(()=>{g()},()=>{g()}),i):g()}r(S,"profilingWrappedSpanEnd"),i.end=S}r(s,"startProfileForSpan"),l.startProfileForSpan=s},9596377211:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(9046403702),a=1e6,s=String(0),i="main";let e="",t="",n="",o=m.WINDOW.navigator&&m.WINDOW.navigator.userAgent||"",f="";const g=m.WINDOW.navigator&&m.WINDOW.navigator.language||m.WINDOW.navigator&&m.WINDOW.navigator.languages&&m.WINDOW.navigator.languages[0]||"";function S($e){return typeof $e=="object"&&$e!==null&&"getHighEntropyValues"in $e}r(S,"isUserAgentData");const c=m.WINDOW.navigator&&m.WINDOW.navigator.userAgentData;S(c)&&c.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then($e=>{if(e=$e.platform||"",n=$e.architecture||"",f=$e.model||"",t=$e.platformVersion||"",$e.fullVersionList&&$e.fullVersionList.length>0){const Ze=$e.fullVersionList[$e.fullVersionList.length-1];o=`${Ze.brand} ${Ze.version}`}}).catch($e=>{});function v($e){return!("thread_metadata"in $e)}r(v,"isProcessedJSSelfProfile");function _($e){return v($e)?I($e):$e}r(_,"enrichWithThreadInformation");function E($e){const Ze=$e&&$e.contexts&&$e.contexts.trace&&$e.contexts.trace.trace_id;return typeof Ze=="string"&&Ze.length!==32&&p.DEBUG_BUILD&&h.logger.log(`[Profiling] Invalid traceId: ${Ze} on profiled event`),typeof Ze!="string"?"":Ze}r(E,"getTraceId");function b($e,Ze,Je,dt){if(dt.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(Je==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${Je} instead.`);const Ot=E(dt),Nt=_(Je),Ve=Ze||(typeof dt.start_timestamp=="number"?dt.start_timestamp*1e3:h.timestampInSeconds()*1e3),He=typeof dt.timestamp=="number"?dt.timestamp*1e3:h.timestampInSeconds()*1e3;return{event_id:$e,timestamp:new Date(Ve).toISOString(),platform:"javascript",version:"1",release:dt.release||"",environment:dt.environment||u.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:m.WINDOW.navigator.userAgent},os:{name:e,version:t,build_number:o},device:{locale:g,model:f,manufacturer:o,architecture:n,is_emulator:!1},debug_meta:{images:R(Je.resources)},profile:Nt,transactions:[{name:dt.transaction||"",id:dt.event_id||h.uuid4(),trace_id:Ot,active_thread_id:s,relative_start_ns:"0",relative_end_ns:((He-Ve)*1e6).toFixed(0)}]}}r(b,"createProfilePayload");function T($e){return u.spanToJSON($e).op==="pageload"}r(T,"isAutomatedPageLoadSpan");function I($e){let Ze,Je=0;const dt={samples:[],stacks:[],frames:[],thread_metadata:{[s]:{name:i}}};if(!$e.samples.length)return dt;const Ot=$e.samples[0].timestamp,Nt=typeof performance.timeOrigin=="number"?performance.timeOrigin:h.browserPerformanceTimeOrigin||0,Ve=Nt-(h.browserPerformanceTimeOrigin||Nt);for(let He=0;He<$e.samples.length;He++){const ct=$e.samples[He];if(ct.stackId===void 0){Ze===void 0&&(Ze=Je,dt.stacks[Ze]=[],Je++),dt.samples[He]={elapsed_since_start_ns:((ct.timestamp+Ve-Ot)*a).toFixed(0),stack_id:Ze,thread_id:s};continue}let yt=$e.stacks[ct.stackId];const it=[];for(;yt;){it.push(yt.frameId);const Xt=$e.frames[yt.frameId];dt.frames[yt.frameId]===void 0&&(dt.frames[yt.frameId]={function:Xt.name,abs_path:typeof Xt.resourceId=="number"?$e.resources[Xt.resourceId]:void 0,lineno:Xt.line,colno:Xt.column}),yt=yt.parentId===void 0?void 0:$e.stacks[yt.parentId]}const nn={elapsed_since_start_ns:((ct.timestamp+Ve-Ot)*a).toFixed(0),stack_id:Je,thread_id:s};dt.stacks[Je]=it,dt.samples[He]=nn,Je++}return dt}r(I,"convertJSSelfProfileToSampledFormat");function O($e,Ze){if(!Ze.length)return $e;for(const Je of Ze)$e[1].push([{type:"profile"},Je]);return $e}r(O,"addProfilesToEnvelope");function w($e){const Ze=[];return h.forEachEnvelopeItem($e,(Je,dt)=>{if(dt==="transaction")for(let Ot=1;Ot<Je.length;Ot++){const Nt=Je[Ot];Nt&&Nt.contexts&&Nt.contexts.profile&&Nt.contexts.profile.profile_id&&Ze.push(Je[Ot])}}),Ze}r(w,"findProfiledTransactionsFromEnvelope");const D=new WeakMap;function R($e){const Ze=h.GLOBAL_OBJ._sentryDebugIds;if(!Ze)return[];const Je=u.getClient(),dt=Je&&Je.getOptions(),Ot=dt&&dt.stackParser;if(!Ot)return[];let Nt;const Ve=D.get(Ot);Ve?Nt=Ve:(Nt=new Map,D.set(Ot,Nt));const He=Object.keys(Ze).reduce((yt,it)=>{let nn;const Xt=Nt.get(it);Xt?nn=Xt:(nn=Ot(it),Nt.set(it,nn));for(let dn=nn.length-1;dn>=0;dn--){const bn=nn[dn],Rn=bn&&bn.filename;if(bn&&Rn){yt[Rn]=Ze[it];break}}return yt},{}),ct=[];for(const yt of $e)yt&&He[yt]&&ct.push({type:"sourcemap",code_file:yt,debug_id:He[yt]});return ct}r(R,"applyDebugMetadata");function L($e){return typeof $e!="number"&&typeof $e!="boolean"||typeof $e=="number"&&isNaN($e)?(p.DEBUG_BUILD&&h.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify($e)} of type ${JSON.stringify(typeof $e)}.`),!1):$e===!0||$e===!1?!0:$e<0||$e>1?(p.DEBUG_BUILD&&h.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${$e}.`),!1):!0}r(L,"isValidSampleRate");function H($e){return $e.samples.length<2?(p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):$e.frames.length?!0:(p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}r(H,"isValidProfile");let K=!1;const ee=3e4;function q($e){return typeof $e=="function"}r(q,"isJSProfilerSupported");function ae(){const $e=m.WINDOW.Profiler;if(!q($e)){p.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const Ze=10,Je=Math.floor(ee/Ze);try{return new $e({sampleInterval:Ze,maxBufferSize:Je})}catch{p.DEBUG_BUILD&&(h.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.logger.log("[Profiling] Disabling profiling for current user session.")),K=!0}}r(ae,"startJSSelfProfile");function ce($e){if(K)return p.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!$e.isRecording())return p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const Ze=u.getClient(),Je=Ze&&Ze.getOptions();if(!Je)return p.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling disabled, no options found."),!1;const dt=Je.profilesSampleRate;return L(dt)?dt?(dt===!0?!0:Math.random()<dt)?!0:(p.DEBUG_BUILD&&h.logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(dt)})`),!1):(p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(p.DEBUG_BUILD&&h.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}r(ce,"shouldProfileSpan");function Te($e,Ze,Je,dt){return H(Je)?b($e,Ze,Je,dt):null}r(Te,"createProfilingEvent");const ke=new Map;function tt(){return ke.size}r(tt,"getActiveProfilesCount");function At($e){const Ze=ke.get($e);return Ze&&ke.delete($e),Ze}r(At,"takeProfileFromGlobalCache");function Be($e,Ze){if(ke.set($e,Ze),ke.size>30){const Je=ke.keys().next().value;ke.delete(Je)}}r(Be,"addProfileToGlobalCache"),l.MAX_PROFILE_DURATION_MS=ee,l.addProfileToGlobalCache=Be,l.addProfilesToEnvelope=O,l.applyDebugMetadata=R,l.convertJSSelfProfileToSampledFormat=I,l.createProfilePayload=b,l.createProfilingEvent=Te,l.enrichWithThreadInformation=_,l.findProfiledTransactionsFromEnvelope=w,l.getActiveProfilesCount=tt,l.isAutomatedPageLoadSpan=T,l.isValidSampleRate=L,l.shouldProfileSpan=ce,l.startJSSelfProfile=ae,l.takeProfileFromGlobalCache=At},7672786771:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(3778408185),m=d(8151162894),a=d(3345899401),s=d(9046403702),i=d(3985552739),e=d(9919948800),t=d(2334015581),n=d(7098914998),o=d(4305747877),f=d(4795369790),g=d(8685600704);function S(w){return[u.inboundFiltersIntegration(),u.functionToStringIntegration(),e.browserApiErrorsIntegration(),i.breadcrumbsIntegration(),t.globalHandlersIntegration(),o.linkedErrorsIntegration(),u.dedupeIntegration(),n.httpContextIntegration()]}r(S,"getDefaultIntegrations");function c(w={}){return{...{defaultIntegrations:S(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:s.WINDOW.SENTRY_RELEASE&&s.WINDOW.SENTRY_RELEASE.id?s.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...w}}r(c,"applyDefaultOptions");function v(){const w=s.WINDOW,D=w&&w.chrome&&w.chrome.runtime&&w.chrome.runtime.id,R=s.WINDOW;return!!(R&&R.browser&&R.browser.runtime&&R.browser.runtime.id)||!!D}r(v,"shouldShowBrowserExtensionError");function _(w={}){const D=c(w);if(v()){h.consoleSandbox(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}a.DEBUG_BUILD&&(h.supportsFetch()||h.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const R={...D,stackParser:h.stackParserFromStackParserOptions(D.stackParser||f.defaultStackParser),integrations:u.getIntegrationsToSetup(D),transport:D.transport||g.makeFetchTransport};u.initAndBind(m.BrowserClient,R),D.autoSessionTracking&&I()}r(_,"init");function E(w={}){if(!s.WINDOW.document){a.DEBUG_BUILD&&h.logger.error("Global document not defined in showReportDialog call");return}const D=u.getCurrentScope(),R=D.getClient(),L=R&&R.getDsn();if(!L){a.DEBUG_BUILD&&h.logger.error("DSN not configured for showReportDialog call");return}if(D&&(w.user={...D.getUser(),...w.user}),!w.eventId){const q=u.lastEventId();q&&(w.eventId=q)}const H=s.WINDOW.document.createElement("script");H.async=!0,H.crossOrigin="anonymous",H.src=u.getReportDialogEndpoint(L,w),w.onLoad&&(H.onload=w.onLoad);const{onClose:K}=w;if(K){const q=r(ae=>{if(ae.data==="__sentry_reportdialog_closed__")try{K()}finally{s.WINDOW.removeEventListener("message",q)}},"reportDialogClosedMessageHandler");s.WINDOW.addEventListener("message",q)}const ee=s.WINDOW.document.head||s.WINDOW.document.body;ee?ee.appendChild(H):a.DEBUG_BUILD&&h.logger.error("Not injecting report dialog. No injection point found in HTML")}r(E,"showReportDialog");function b(){}r(b,"forceLoad");function T(w){w()}r(T,"onLoad");function I(){if(typeof s.WINDOW.document>"u"){a.DEBUG_BUILD&&h.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}u.startSession({ignoreDuration:!0}),u.captureSession(),p.addHistoryInstrumentationHandler(({from:w,to:D})=>{w!==void 0&&w!==D&&(u.startSession({ignoreDuration:!0}),u.captureSession())})}r(I,"startSessionTracking");function O(w){const D=u.getClient();D&&D.captureUserFeedback(w)}r(O,"captureUserFeedback"),l.captureUserFeedback=O,l.forceLoad=b,l.getDefaultIntegrations=S,l.init=_,l.onLoad=T,l.showReportDialog=E},4795369790:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=10,p=20,m=30,a=40,s=50;function i(K,ee,q,ae){const ce={filename:K,function:ee==="<anonymous>"?u.UNKNOWN_FUNCTION:ee,in_app:!0};return q!==void 0&&(ce.lineno=q),ae!==void 0&&(ce.colno=ae),ce}r(i,"createFrame");const e=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,t=/\((\S*)(?::(\d+))(?::(\d+))\)/,o=[m,r(K=>{const ee=e.exec(K);if(ee){if(ee[2]&&ee[2].indexOf("eval")===0){const Te=t.exec(ee[2]);Te&&(ee[2]=Te[1],ee[3]=Te[2],ee[4]=Te[3])}const[ae,ce]=H(ee[1]||u.UNKNOWN_FUNCTION,ee[2]);return i(ce,ae,ee[3]?+ee[3]:void 0,ee[4]?+ee[4]:void 0)}},"chromeStackParserFn")],f=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,g=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=[s,r(K=>{const ee=f.exec(K);if(ee){if(ee[3]&&ee[3].indexOf(" > eval")>-1){const Te=g.exec(ee[3]);Te&&(ee[1]=ee[1]||"eval",ee[3]=Te[1],ee[4]=Te[2],ee[5]="")}let ae=ee[3],ce=ee[1]||u.UNKNOWN_FUNCTION;return[ce,ae]=H(ce,ae),i(ae,ce,ee[4]?+ee[4]:void 0,ee[5]?+ee[5]:void 0)}},"gecko")],v=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,E=[a,r(K=>{const ee=v.exec(K);return ee?i(ee[2],ee[1]||u.UNKNOWN_FUNCTION,+ee[3],ee[4]?+ee[4]:void 0):void 0},"winjs")],b=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,I=[h,r(K=>{const ee=b.exec(K);return ee?i(ee[2],ee[3]||u.UNKNOWN_FUNCTION,+ee[1]):void 0},"opera10")],O=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,D=[p,r(K=>{const ee=O.exec(K);return ee?i(ee[5],ee[3]||ee[4]||u.UNKNOWN_FUNCTION,+ee[1],+ee[2]):void 0},"opera11")],R=[o,c],L=u.createStackParser(...R),H=r((K,ee)=>{const q=K.indexOf("safari-extension")!==-1,ae=K.indexOf("safari-web-extension")!==-1;return q||ae?[K.indexOf("@")!==-1?K.split("@")[0]:u.UNKNOWN_FUNCTION,q?`safari-extension:${ee}`:`safari-web-extension:${ee}`]:[K,ee]},"extractSafariExtensionDetails");l.chromeStackLineParser=o,l.defaultStackLineParsers=R,l.defaultStackParser=L,l.geckoStackLineParser=c,l.opera10StackLineParser=I,l.opera11StackLineParser=D,l.winjsStackLineParser=E},3372334685:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(9046403702);function a(){m.WINDOW&&m.WINDOW.document?m.WINDOW.document.addEventListener("visibilitychange",()=>{const s=u.getActiveSpan();if(!s)return;const i=u.getRootSpan(s);if(m.WINDOW.document.hidden&&i){const e="cancelled",{op:t,status:n}=u.spanToJSON(i);p.DEBUG_BUILD&&h.logger.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t}`),n||i.setStatus({code:u.SPAN_STATUS_ERROR,message:e}),i.setAttribute("sentry.cancellation_reason","document.hidden"),i.end()}}):p.DEBUG_BUILD&&h.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}r(a,"registerBackgroundTabDetection"),l.registerBackgroundTabDetection=a},5559796378:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(3345899401),a=d(9046403702),s=d(3372334685),i=d(6520656099),e="BrowserTracing",t={...h.TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...i.defaultRequestInstrumentationOptions},n=r((v={})=>{h.registerSpanErrorInstrumentation();const{enableInp:_,enableLongTask:E,_experiments:{enableInteractions:b},beforeStartSpan:T,idleTimeout:I,finalTimeout:O,childSpanTimeout:w,markBackgroundSpan:D,traceFetch:R,traceXHR:L,shouldCreateSpanForRequest:H,enableHTTPTimings:K,instrumentPageLoad:ee,instrumentNavigation:q}={...t,...v},ae=u.startTrackingWebVitals();_&&u.startTrackingINP(),E&&u.startTrackingLongTasks(),b&&u.startTrackingInteractions();const ce={name:void 0,source:void 0};function Te(ke,tt){const At=tt.op==="pageload",Be=T?T(tt):tt,$e=Be.attributes||{};tt.name!==Be.name&&($e[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",Be.attributes=$e),ce.name=Be.name,ce.source=$e[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];const Ze=h.startIdleSpan(Be,{idleTimeout:I,finalTimeout:O,childSpanTimeout:w,disableAutoFinish:At,beforeSpanEnd:dt=>{ae(),u.addPerformanceEntries(dt)}});function Je(){["interactive","complete"].includes(a.WINDOW.document.readyState)&&ke.emit("idleSpanEnableAutoFinish",Ze)}return r(Je,"emitFinish"),At&&a.WINDOW.document&&(a.WINDOW.document.addEventListener("readystatechange",()=>{Je()}),Je()),Ze}return r(Te,"_createRouteSpan"),{name:e,afterAllSetup(ke){let tt,At=a.WINDOW.location&&a.WINDOW.location.href;ke.on("startNavigationSpan",Be=>{h.getClient()===ke&&(tt&&(m.DEBUG_BUILD&&p.logger.log(`[Tracing] Finishing current root span with op: ${h.spanToJSON(tt).op}`),tt.end()),tt=Te(ke,{op:"navigation",...Be}))}),ke.on("startPageLoadSpan",(Be,$e={})=>{if(h.getClient()!==ke)return;tt&&(m.DEBUG_BUILD&&p.logger.log(`[Tracing] Finishing current root span with op: ${h.spanToJSON(tt).op}`),tt.end());const Ze=$e.sentryTrace||g("sentry-trace"),Je=$e.baggage||g("baggage"),dt=p.propagationContextFromHeaders(Ze,Je);h.getCurrentScope().setPropagationContext(dt),tt=Te(ke,{op:"pageload",...Be})}),ke.on("spanEnd",Be=>{const $e=h.spanToJSON(Be).op;if(Be!==h.getRootSpan(Be)||$e!=="navigation"&&$e!=="pageload")return;const Ze=h.getCurrentScope(),Je=Ze.getPropagationContext();Ze.setPropagationContext({...Je,sampled:Je.sampled!==void 0?Je.sampled:h.spanIsSampled(Be),dsc:Je.dsc||h.getDynamicSamplingContextFromSpan(Be)})}),a.WINDOW.location&&(ee&&o(ke,{name:a.WINDOW.location.pathname,startTime:p.browserPerformanceTimeOrigin?p.browserPerformanceTimeOrigin/1e3:void 0,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.pageload.browser"}}),q&&u.addHistoryInstrumentationHandler(({to:Be,from:$e})=>{if($e===void 0&&At&&At.indexOf(Be)!==-1){At=void 0;return}$e!==Be&&(At=void 0,f(ke,{name:a.WINDOW.location.pathname,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.navigation.browser"}}))})),D&&s.registerBackgroundTabDetection(),b&&S(I,O,w,ce),i.instrumentOutgoingRequests({traceFetch:R,traceXHR:L,tracePropagationTargets:ke.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:H,enableHTTPTimings:K})}}},"browserTracingIntegration");function o(v,_,E){v.emit("startPageLoadSpan",_,E),h.getCurrentScope().setTransactionName(_.name);const b=h.getActiveSpan();return(b&&h.spanToJSON(b).op)==="pageload"?b:void 0}r(o,"startBrowserTracingPageLoadSpan");function f(v,_){h.getCurrentScope().setPropagationContext(c()),h.getIsolationScope().setPropagationContext(c()),v.emit("startNavigationSpan",_),h.getCurrentScope().setTransactionName(_.name);const E=h.getActiveSpan();return(E&&h.spanToJSON(E).op)==="navigation"?E:void 0}r(f,"startBrowserTracingNavigationSpan");function g(v){const _=p.getDomElement(`meta[name=${v}]`);return _?_.getAttribute("content"):void 0}r(g,"getMetaContent");function S(v,_,E,b){let T;const I=r(()=>{const O="ui.action.click",w=h.getActiveSpan(),D=w&&h.getRootSpan(w);if(D){const R=h.spanToJSON(D).op;if(["navigation","pageload"].includes(R)){m.DEBUG_BUILD&&p.logger.warn(`[Tracing] Did not create ${O} span because a pageload or navigation span is in progress.`);return}}if(T&&(T.setAttribute(h.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),T.end(),T=void 0),!b.name){m.DEBUG_BUILD&&p.logger.warn(`[Tracing] Did not create ${O} transaction because _latestRouteName is missing.`);return}T=h.startIdleSpan({name:b.name,op:O,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:b.source||"url"}},{idleTimeout:v,finalTimeout:_,childSpanTimeout:E})},"registerInteractionTransaction");a.WINDOW.document&&addEventListener("click",I,{once:!1,capture:!0})}r(S,"registerInteractionListener");function c(){return{traceId:p.uuid4(),spanId:p.uuid4().substring(16)}}r(c,"generatePropagationContext"),l.BROWSER_TRACING_INTEGRATION_ID=e,l.browserTracingIntegration=n,l.getMetaContent=g,l.startBrowserTracingNavigationSpan=f,l.startBrowserTracingPageLoadSpan=o},6520656099:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(9046403702),a={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function s(_){const{traceFetch:E,traceXHR:b,shouldCreateSpanForRequest:T,enableHTTPTimings:I,tracePropagationTargets:O}={traceFetch:a.traceFetch,traceXHR:a.traceXHR,..._},w=typeof T=="function"?T:L=>!0,D=r(L=>f(L,O),"shouldAttachHeadersWithTargets"),R={};E&&p.addFetchInstrumentationHandler(L=>{const H=h.instrumentFetchRequest(L,w,D,R);if(H){const K=v(L.fetchData.url),ee=K?p.parseUrl(K).host:void 0;H.setAttributes({"http.url":K,"server.address":ee})}I&&H&&e(H)}),b&&u.addXhrInstrumentationHandler(L=>{const H=g(L,w,D,R);I&&H&&e(H)})}r(s,"instrumentOutgoingRequests");function i(_){return _.entryType==="resource"&&"initiatorType"in _&&typeof _.nextHopProtocol=="string"&&(_.initiatorType==="fetch"||_.initiatorType==="xmlhttprequest")}r(i,"isPerformanceResourceTiming");function e(_){const{url:E}=h.spanToJSON(_).data||{};if(!E||typeof E!="string")return;const b=u.addPerformanceInstrumentationHandler("resource",({entries:T})=>{T.forEach(I=>{i(I)&&I.name.endsWith(E)&&(o(I).forEach(w=>_.setAttribute(...w)),setTimeout(b))})})}r(e,"addHTTPTimings");function t(_){let E="unknown",b="unknown",T="";for(const I of _){if(I==="/"){[E,b]=_.split("/");break}if(!isNaN(Number(I))){E=T==="h"?"http":T,b=_.split(T)[1];break}T+=I}return T===_&&(E=T),{name:E,version:b}}r(t,"extractNetworkProtocol");function n(_=0){return((p.browserPerformanceTimeOrigin||performance.timeOrigin)+_)/1e3}r(n,"getAbsoluteTime");function o(_){const{name:E,version:b}=t(_.nextHopProtocol),T=[];return T.push(["network.protocol.version",b],["network.protocol.name",E]),p.browserPerformanceTimeOrigin?[...T,["http.request.redirect_start",n(_.redirectStart)],["http.request.fetch_start",n(_.fetchStart)],["http.request.domain_lookup_start",n(_.domainLookupStart)],["http.request.domain_lookup_end",n(_.domainLookupEnd)],["http.request.connect_start",n(_.connectStart)],["http.request.secure_connection_start",n(_.secureConnectionStart)],["http.request.connection_end",n(_.connectEnd)],["http.request.request_start",n(_.requestStart)],["http.request.response_start",n(_.responseStart)],["http.request.response_end",n(_.responseEnd)]]:T}r(o,"resourceTimingEntryToSpanData");function f(_,E){const b=m.WINDOW.location&&m.WINDOW.location.href;if(b){let T,I;try{T=new URL(_,b),I=new URL(b).origin}catch{return!1}const O=T.origin===I;return E?p.stringMatchesSomePattern(T.toString(),E)||O&&p.stringMatchesSomePattern(T.pathname,E):O}else{const T=!!_.match(/^\/(?!\/)/);return E?p.stringMatchesSomePattern(_,E):T}}r(f,"shouldAttachHeaders");function g(_,E,b,T){const I=_.xhr,O=I&&I[u.SENTRY_XHR_DATA_KEY];if(!I||I.__sentry_own_request__||!O)return;const w=h.hasTracingEnabled()&&E(O.url);if(_.endTimestamp&&w){const ee=I.__sentry_xhr_span_id__;if(!ee)return;const q=T[ee];q&&O.status_code!==void 0&&(h.setHttpStatus(q,O.status_code),q.end(),delete T[ee]);return}const D=v(O.url),R=D?p.parseUrl(D).host:void 0,L=!!h.getActiveSpan(),H=w&&L?h.startInactiveSpan({name:`${O.method} ${O.url}`,attributes:{type:"xhr","http.method":O.method,"http.url":D,url:O.url,"server.address":R,[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser",[h.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new h.SentryNonRecordingSpan;I.__sentry_xhr_span_id__=H.spanContext().spanId,T[I.__sentry_xhr_span_id__]=H;const K=h.getClient();return I.setRequestHeader&&b(O.url)&&K&&S(I,K,h.hasTracingEnabled()&&L?H:void 0),H}r(g,"xhrCallback");function S(_,E,b){const T=h.getCurrentScope(),I=h.getIsolationScope(),{traceId:O,spanId:w,sampled:D,dsc:R}={...I.getPropagationContext(),...T.getPropagationContext()},L=b&&h.hasTracingEnabled()?h.spanToTraceHeader(b):p.generateSentryTraceHeader(O,w,D),H=p.dynamicSamplingContextToSentryBaggageHeader(R||(b?h.getDynamicSamplingContextFromSpan(b):h.getDynamicSamplingContextFromClient(O,E)));c(_,L,H)}r(S,"addTracingHeadersToXhrRequest");function c(_,E,b){try{_.setRequestHeader("sentry-trace",E),b&&_.setRequestHeader(p.BAGGAGE_HEADER_NAME,b)}catch{}}r(c,"setHeaderOnXhr");function v(_){try{return new URL(_,m.WINDOW.location.origin).href}catch{return}}r(v,"getFullURL"),l.defaultRequestInstrumentationOptions=a,l.extractNetworkProtocol=t,l.instrumentOutgoingRequests=s,l.shouldAttachHeaders=f,l.xhrCallback=g},8685600704:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(8475594045);function m(a,s=p.getNativeFetchImplementation()){let i=0,e=0;function t(n){const o=n.body.length;i+=o,e++;const f={body:n.body,method:"POST",referrerPolicy:"origin",headers:a.headers,keepalive:i<=6e4&&e<15,...a.fetchOptions};if(!s)return p.clearCachedFetchImplementation(),h.rejectedSyncPromise("No fetch implementation available");try{return s(a.url,f).then(g=>(i-=o,e--,{statusCode:g.status,headers:{"x-sentry-rate-limits":g.headers.get("X-Sentry-Rate-Limits"),"retry-after":g.headers.get("Retry-After")}}))}catch(g){return p.clearCachedFetchImplementation(),i-=o,e--,h.rejectedSyncPromise(g)}}return r(t,"makeRequest"),u.createTransport(a,t)}r(m,"makeFetchTransport"),l.makeFetchTransport=m},7824548363:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(7563271614),p=d(8685600704);function m(g){return new Promise((S,c)=>{g.oncomplete=g.onsuccess=()=>S(g.result),g.onabort=g.onerror=()=>c(g.error)})}r(m,"promisifyRequest");function a(g,S){const c=indexedDB.open(g);c.onupgradeneeded=()=>c.result.createObjectStore(S);const v=m(c);return _=>v.then(E=>_(E.transaction(S,"readwrite").objectStore(S)))}r(a,"createStore");function s(g){return m(g.getAllKeys())}r(s,"keys");function i(g,S,c){return g(v=>s(v).then(_=>{if(!(_.length>=c))return v.put(S,Math.max(..._,0)+1),m(v.transaction)}))}r(i,"push");function e(g,S,c){return g(v=>s(v).then(_=>{if(!(_.length>=c))return v.put(S,Math.min(..._,0)-1),m(v.transaction)}))}r(e,"unshift");function t(g){return g(S=>s(S).then(c=>{if(c.length!==0)return m(S.get(c[0])).then(v=>(S.delete(c[0]),m(S.transaction).then(()=>v)))}))}r(t,"shift");function n(g){let S;function c(){return S==null&&(S=a(g.dbName||"sentry-offline",g.storeName||"queue")),S}return r(c,"getStore"),{push:async v=>{try{const _=await h.serializeEnvelope(v);await i(c(),_,g.maxQueueSize||30)}catch{}},unshift:async v=>{try{const _=await h.serializeEnvelope(v);await e(c(),_,g.maxQueueSize||30)}catch{}},shift:async()=>{try{const v=await t(c());if(v)return h.parseEnvelope(v)}catch{}}}}r(n,"createIndexedDbStore");function o(g){return S=>g({...S,createStore:n})}r(o,"makeIndexedDbOfflineTransport");function f(g=p.makeFetchTransport){return o(u.makeOfflineTransport(g))}r(f,"makeBrowserOfflineTransport"),l.createStore=a,l.makeBrowserOfflineTransport=f,l.push=i,l.shift=t,l.unshift=e},8475594045:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(3345899401),p=d(9046403702);let m;function a(){if(m)return m;if(u.isNativeFetch(p.WINDOW.fetch))return m=p.WINDOW.fetch.bind(p.WINDOW);const i=p.WINDOW.document;let e=p.WINDOW.fetch;if(i&&typeof i.createElement=="function")try{const t=i.createElement("iframe");t.hidden=!0,i.head.appendChild(t);const n=t.contentWindow;n&&n.fetch&&(e=n.fetch),i.head.removeChild(t)}catch(t){h.DEBUG_BUILD&&u.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}try{return m=e.bind(p.WINDOW)}catch{}}r(a,"getNativeFetchImplementation");function s(){m=void 0}r(s,"clearCachedFetchImplementation"),l.clearCachedFetchImplementation=s,l.getNativeFetchImplementation=a},7738910413:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);function h(m,{metadata:a,tunnel:s,dsn:i}){const e={event_id:m.event_id,sent_at:new Date().toISOString(),...a&&a.sdk&&{sdk:{name:a.sdk.name,version:a.sdk.version}},...!!s&&!!i&&{dsn:u.dsnToString(i)}},t=p(m);return u.createEnvelope(e,[t])}r(h,"createUserFeedbackEnvelope");function p(m){return[{type:"user_report"},m]}r(p,"createUserFeedbackEnvelopeItem"),l.createUserFeedbackEnvelope=h},1076637753:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8482989710),h=d(9046403702),p={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming"},m=h.WINDOW;async function a(i){const e=p[i],t=m.Sentry=m.Sentry||{};if(!e)throw new Error(`Cannot lazy load integration: ${i}`);const n=t[i];if(typeof n=="function")return n;const o=s(e),f=h.WINDOW.document.createElement("script");f.src=o,f.crossOrigin="anonymous";const g=new Promise((c,v)=>{f.addEventListener("load",()=>c()),f.addEventListener("error",v)});h.WINDOW.document.body.appendChild(f);try{await g}catch{throw new Error(`Error when loading integration: ${i}`)}const S=t[i];if(typeof S!="function")throw new Error(`Could not load integration: ${i}`);return S}r(a,"lazyLoadIntegration");function s(i){const e=u.getClient(),t=e&&e.getOptions(),n=t&&t.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${u.SDK_VERSION}/${i}.min.js`,n).toString()}r(s,"getScriptURL"),l.lazyLoadIntegration=a},9857059330:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h="7";function p(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}r(p,"getBaseApiEndpoint");function m(e){return`${p(e)}${e.projectId}/envelope/`}r(m,"_getIngestEndpoint");function a(e,t){return u.urlEncode({sentry_key:e.publicKey,sentry_version:h,...t&&{sentry_client:`${t.name}/${t.version}`}})}r(a,"_encodedAuth");function s(e,t,n){return t||`${m(e)}?${a(e,n)}`}r(s,"getEnvelopeEndpointWithUrlEncodedAuth");function i(e,t){const n=u.makeDsn(e);if(!n)return"";const o=`${p(n)}embed/error-page/`;let f=`dsn=${u.dsnToString(n)}`;for(const g in t)if(g!=="dsn"&&g!=="onClose")if(g==="user"){const S=t.user;if(!S)continue;S.name&&(f+=`&name=${encodeURIComponent(S.name)}`),S.email&&(f+=`&email=${encodeURIComponent(S.email)}`)}else f+=`&${encodeURIComponent(g)}=${encodeURIComponent(t[g])}`;return`${o}?${f}`}r(i,"getReportDialogEndpoint"),l.getEnvelopeEndpointWithUrlEncodedAuth=s,l.getReportDialogEndpoint=i},897859094:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(2685322190),h=d(3752312155);function p(a){const s=u.getMainCarrier(),i=u.getSentryCarrier(s);i.acs=a}r(p,"setAsyncContextStrategy");function m(a){const s=u.getSentryCarrier(a);return s.acs?s.acs:h.getStackAsyncContextStrategy()}r(m,"getAsyncContextStrategy"),l.getAsyncContextStrategy=m,l.setAsyncContextStrategy=p},3752312155:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(2158524366),m=d(2685322190);class a{constructor(f,g){let S;f?S=f:S=new p.Scope;let c;g?c=g:c=new p.Scope,this._stack=[{scope:S}],this._isolationScope=c}withScope(f){const g=this._pushScope();let S;try{S=f(g)}catch(c){throw this._popScope(),c}return u.isThenable(S)?S.then(c=>(this._popScope(),c),c=>{throw this._popScope(),c}):(this._popScope(),S)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const f=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:f}),f}_popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}}r(a,"AsyncContextStack");function s(){const o=m.getMainCarrier(),f=m.getSentryCarrier(o);return f.hub||(f.hub=new a(h.getDefaultCurrentScope(),h.getDefaultIsolationScope())),f.hub}r(s,"getAsyncContextStack");function i(o){return s().withScope(o)}r(i,"withScope");function e(o,f){const g=s();return g.withScope(()=>(g.getStackTop().scope=o,f(o)))}r(e,"withSetScope");function t(o){return s().withScope(()=>o(s().getIsolationScope()))}r(t,"withIsolationScope");function n(){return{withIsolationScope:t,withScope:i,withSetScope:e,withSetIsolationScope:(o,f)=>t(f),getCurrentScope:()=>s().getScope(),getIsolationScope:()=>s().getIsolationScope()}}r(n,"getStackAsyncContextStrategy"),l.AsyncContextStack=a,l.getStackAsyncContextStrategy=n},4936960144:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(9857059330),p=d(8438156026),m=d(8844511336),a=d(5297268390),s=d(1927145604),i=d(5234873710),e=d(9064881818),t=d(1119532287),n=d(9877103701),o="Not capturing exception because it's already been captured.";class f{constructor(E){if(this._options=E,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],E.dsn?this._dsn=u.makeDsn(E.dsn):m.DEBUG_BUILD&&u.logger.warn("No DSN provided, client will not send events."),this._dsn){const b=h.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,E.tunnel,E._metadata?E._metadata.sdk:void 0);this._transport=E.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...E.transportOptions,url:b})}}captureException(E,b,T){const I=u.uuid4();if(u.checkOrSetAlreadyCaught(E))return m.DEBUG_BUILD&&u.logger.log(o),I;const O={event_id:I,...b};return this._process(this.eventFromException(E,O).then(w=>this._captureEvent(w,O,T))),O.event_id}captureMessage(E,b,T,I){const O={event_id:u.uuid4(),...T},w=u.isParameterizedString(E)?E:String(E),D=u.isPrimitive(E)?this.eventFromMessage(w,b,O):this.eventFromException(E,O);return this._process(D.then(R=>this._captureEvent(R,O,I))),O.event_id}captureEvent(E,b,T){const I=u.uuid4();if(b&&b.originalException&&u.checkOrSetAlreadyCaught(b.originalException))return m.DEBUG_BUILD&&u.logger.log(o),I;const O={event_id:I,...b},D=(E.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(E,O,D||T)),O.event_id}captureSession(E){typeof E.release!="string"?m.DEBUG_BUILD&&u.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(E),i.updateSession(E,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(E){const b=this._transport;return b?(this.emit("flush"),this._isClientDoneProcessing(E).then(T=>b.flush(E).then(I=>T&&I))):u.resolvedSyncPromise(!0)}close(E){return this.flush(E).then(b=>(this.getOptions().enabled=!1,this.emit("close"),b))}getEventProcessors(){return this._eventProcessors}addEventProcessor(E){this._eventProcessors.push(E)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(E){return this._integrations[E]}addIntegration(E){const b=this._integrations[E.name];s.setupIntegration(this,E,this._integrations),b||s.afterSetupIntegrations(this,[E])}sendEvent(E,b={}){this.emit("beforeSendEvent",E,b);let T=a.createEventEnvelope(E,this._dsn,this._options._metadata,this._options.tunnel);for(const O of b.attachments||[])T=u.addItemToEnvelope(T,u.createAttachmentEnvelopeItem(O));const I=this.sendEnvelope(T);I&&I.then(O=>this.emit("afterSendEvent",E,O),null)}sendSession(E){const b=a.createSessionEnvelope(E,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(b)}recordDroppedEvent(E,b,T){if(this._options.sendClientReports){const I=`${E}:${b}`;m.DEBUG_BUILD&&u.logger.log(`Adding outcome: "${I}"`),this._outcomes[I]=this._outcomes[I]+1||1}}on(E,b){this._hooks[E]||(this._hooks[E]=[]),this._hooks[E].push(b)}emit(E,...b){this._hooks[E]&&this._hooks[E].forEach(T=>T(...b))}sendEnvelope(E){return this.emit("beforeEnvelope",E),this._isEnabled()&&this._transport?this._transport.send(E).then(null,b=>(m.DEBUG_BUILD&&u.logger.error("Error while sending event:",b),b)):(m.DEBUG_BUILD&&u.logger.error("Transport disabled"),u.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:E}=this._options;this._integrations=s.setupIntegrations(this,E),s.afterSetupIntegrations(this,E)}_updateSessionFromEvent(E,b){let T=!1,I=!1;const O=b.exception&&b.exception.values;if(O){I=!0;for(const R of O){const L=R.mechanism;if(L&&L.handled===!1){T=!0;break}}}const w=E.status==="ok";(w&&E.errors===0||w&&T)&&(i.updateSession(E,{...T&&{status:"crashed"},errors:E.errors||Number(I||T)}),this.captureSession(E))}_isClientDoneProcessing(E){return new u.SyncPromise(b=>{let T=0;const I=1,O=setInterval(()=>{this._numProcessing==0?(clearInterval(O),b(!0)):(T+=I,E&&T>=E&&(clearInterval(O),b(!1)))},I)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(E,b,T,I=p.getIsolationScope()){const O=this.getOptions(),w=Object.keys(this._integrations);return!b.integrations&&w.length>0&&(b.integrations=w),this.emit("preprocessEvent",E,b),E.type||I.setLastEventId(E.event_id||b.event_id),n.prepareEvent(O,E,b,T,this,I).then(D=>{if(D===null)return D;const R={...I.getPropagationContext(),...T?T.getPropagationContext():void 0};if(!(D.contexts&&D.contexts.trace)&&R){const{traceId:H,spanId:K,parentSpanId:ee,dsc:q}=R;D.contexts={trace:u.dropUndefinedKeys({trace_id:H,span_id:K,parent_span_id:ee}),...D.contexts};const ae=q||e.getDynamicSamplingContextFromClient(H,this);D.sdkProcessingMetadata={dynamicSamplingContext:ae,...D.sdkProcessingMetadata}}return D})}_captureEvent(E,b={},T){return this._processEvent(E,b,T).then(I=>I.event_id,I=>{if(m.DEBUG_BUILD){const O=I;O.logLevel==="log"?u.logger.log(O.message):u.logger.warn(O)}})}_processEvent(E,b,T){const I=this.getOptions(),{sampleRate:O}=I,w=v(E),D=c(E),R=E.type||"error",L=`before send for type \`${R}\``,H=typeof O>"u"?void 0:t.parseSampleRate(O);if(D&&typeof H=="number"&&Math.random()>H)return this.recordDroppedEvent("sample_rate","error",E),u.rejectedSyncPromise(new u.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${O})`,"log"));const K=R==="replay_event"?"replay":R,q=(E.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(E,b,T,q).then(ae=>{if(ae===null)throw this.recordDroppedEvent("event_processor",K,E),new u.SentryError("An event processor returned `null`, will not send event.","log");if(b.data&&b.data.__sentry__===!0)return ae;const Te=S(I,ae,b);return g(Te,L)}).then(ae=>{if(ae===null)throw this.recordDroppedEvent("before_send",K,E),new u.SentryError(`${L} returned \`null\`, will not send event.`,"log");const ce=T&&T.getSession();!w&&ce&&this._updateSessionFromEvent(ce,ae);const Te=ae.transaction_info;if(w&&Te&&ae.transaction!==E.transaction){const ke="custom";ae.transaction_info={...Te,source:ke}}return this.sendEvent(ae,b),ae}).then(null,ae=>{throw ae instanceof u.SentryError?ae:(this.captureException(ae,{data:{__sentry__:!0},originalException:ae}),new u.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${ae}`))})}_process(E){this._numProcessing++,E.then(b=>(this._numProcessing--,b),b=>(this._numProcessing--,b))}_clearOutcomes(){const E=this._outcomes;return this._outcomes={},Object.keys(E).map(b=>{const[T,I]=b.split(":");return{reason:T,category:I,quantity:E[b]}})}}r(f,"BaseClient");function g(_,E){const b=`${E} must return \`null\` or a valid event.`;if(u.isThenable(_))return _.then(T=>{if(!u.isPlainObject(T)&&T!==null)throw new u.SentryError(b);return T},T=>{throw new u.SentryError(`${E} rejected with ${T}`)});if(!u.isPlainObject(_)&&_!==null)throw new u.SentryError(b);return _}r(g,"_validateBeforeSendResult");function S(_,E,b){const{beforeSend:T,beforeSendTransaction:I,beforeSendSpan:O}=_;if(c(E)&&T)return T(E,b);if(v(E)){if(E.spans&&O){const w=[];for(const D of E.spans){const R=O(D);R&&w.push(R)}E.spans=w}if(I)return I(E,b)}return E}r(S,"processBeforeSend");function c(_){return _.type===void 0}r(c,"isErrorEvent");function v(_){return _.type==="transaction"}r(v,"isTransactionEvent"),l.BaseClient=f},4433801832:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=100;function m(a,s){const i=h.getClient(),e=h.getIsolationScope();if(!i)return;const{beforeBreadcrumb:t=null,maxBreadcrumbs:n=p}=i.getOptions();if(n<=0)return;const f={timestamp:u.dateTimestampInSeconds(),...a},g=t?u.consoleSandbox(()=>t(f,s)):f;g!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",g,s),e.addBreadcrumb(g,n))}r(m,"addBreadcrumb"),l.addBreadcrumb=m},2685322190:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);function h(){return p(u.GLOBAL_OBJ),u.GLOBAL_OBJ}r(h,"getMainCarrier");function p(m){return m.__SENTRY__||(m.__SENTRY__={extensions:{}}),m.__SENTRY__}r(p,"getSentryCarrier"),l.getMainCarrier=h,l.getSentryCarrier=p},7584701501:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);function h(m,a,s,i,e){const t={sent_at:new Date().toISOString()};s&&s.sdk&&(t.sdk={name:s.sdk.name,version:s.sdk.version}),i&&e&&(t.dsn=u.dsnToString(e)),a&&(t.trace=u.dropUndefinedKeys(a));const n=p(m);return u.createEnvelope(t,[n])}r(h,"createCheckInEnvelope");function p(m){return[{type:"check_in"},m]}r(p,"createCheckInEnvelopeItem"),l.createCheckInEnvelope=h},4834620523:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="production";l.DEFAULT_ENVIRONMENT=d},8438156026:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(897859094),p=d(2685322190),m=d(2158524366);function a(){return u.getGlobalSingleton("defaultCurrentScope",()=>new m.Scope)}r(a,"getDefaultCurrentScope");function s(){return u.getGlobalSingleton("defaultIsolationScope",()=>new m.Scope)}r(s,"getDefaultIsolationScope");function i(){const g=p.getMainCarrier();return h.getAsyncContextStrategy(g).getCurrentScope()}r(i,"getCurrentScope");function e(){const g=p.getMainCarrier();return h.getAsyncContextStrategy(g).getIsolationScope()}r(e,"getIsolationScope");function t(){return u.getGlobalSingleton("globalScope",()=>new m.Scope)}r(t,"getGlobalScope");function n(...g){const S=p.getMainCarrier(),c=h.getAsyncContextStrategy(S);if(g.length===2){const[v,_]=g;return v?c.withSetScope(v,_):c.withScope(_)}return c.withScope(g[0])}r(n,"withScope");function o(...g){const S=p.getMainCarrier(),c=h.getAsyncContextStrategy(S);if(g.length===2){const[v,_]=g;return v?c.withSetIsolationScope(v,_):c.withIsolationScope(_)}return c.withIsolationScope(g[0])}r(o,"withIsolationScope");function f(){return i().getClient()}r(f,"getClient"),l.getClient=f,l.getCurrentScope=i,l.getDefaultCurrentScope=a,l.getDefaultIsolationScope=s,l.getGlobalScope=t,l.getIsolationScope=e,l.withIsolationScope=o,l.withScope=n},8844511336:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},5297268390:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);d(2206474662),d(8844511336);const h=d(5475300505),p=d(9064881818);function m(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}r(m,"enhanceEventWithSdkInfo");function a(e,t,n,o){const f=u.getSdkMetadataForEnvelopeHeader(n),g={sent_at:new Date().toISOString(),...f&&{sdk:f},...!!o&&t&&{dsn:u.dsnToString(t)}},S="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return u.createEnvelope(g,[S])}r(a,"createSessionEnvelope");function s(e,t,n,o){const f=u.getSdkMetadataForEnvelopeHeader(n),g=e.type&&e.type!=="replay_event"?e.type:"event";m(e,n&&n.sdk);const S=u.createEventEnvelopeHeaders(e,f,o,t);delete e.sdkProcessingMetadata;const c=[{type:g},e];return u.createEnvelope(S,[c])}r(s,"createEventEnvelope");function i(e,t){function n(v){return!!v.trace_id&&!!v.public_key}r(n,"dscHasRequiredProps");const o=p.getDynamicSamplingContextFromSpan(e[0]),f={sent_at:new Date().toISOString(),...n(o)&&{trace:o}},g=t&&t.getOptions().beforeSendSpan,S=g?v=>g(h.spanToJSON(v)):v=>h.spanToJSON(v),c=[];for(const v of e){const _=S(v);_&&c.push(u.createSpanEnvelopeItem(_))}return u.createEnvelope(f,c)}r(i,"createSpanEnvelope"),l.createEventEnvelope=s,l.createSessionEnvelope=a,l.createSpanEnvelope=i},5911348835:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336);function p(m,a,s,i=0){return new u.SyncPromise((e,t)=>{const n=m[i];if(a===null||typeof n!="function")e(a);else{const o=n({...a},s);h.DEBUG_BUILD&&n.id&&o===null&&u.logger.log(`Event processor "${n.id}" dropped event`),u.isThenable(o)?o.then(f=>p(m,f,s,i+1).then(e)).then(null,t):p(m,o,s,i+1).then(e).then(null,t)}})}r(p,"notifyEventProcessors"),l.notifyEventProcessors=p},5015065869:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(4834620523),p=d(8438156026),m=d(8844511336),a=d(5234873710),s=d(9877103701);function i(K,ee){return p.getCurrentScope().captureException(K,s.parseEventHintOrCaptureContext(ee))}r(i,"captureException");function e(K,ee){const q=typeof ee=="string"?ee:void 0,ae=typeof ee!="string"?{captureContext:ee}:void 0;return p.getCurrentScope().captureMessage(K,q,ae)}r(e,"captureMessage");function t(K,ee){return p.getCurrentScope().captureEvent(K,ee)}r(t,"captureEvent");function n(K,ee){p.getIsolationScope().setContext(K,ee)}r(n,"setContext");function o(K){p.getIsolationScope().setExtras(K)}r(o,"setExtras");function f(K,ee){p.getIsolationScope().setExtra(K,ee)}r(f,"setExtra");function g(K){p.getIsolationScope().setTags(K)}r(g,"setTags");function S(K,ee){p.getIsolationScope().setTag(K,ee)}r(S,"setTag");function c(K){p.getIsolationScope().setUser(K)}r(c,"setUser");function v(){return p.getIsolationScope().lastEventId()}r(v,"lastEventId");function _(K,ee){const q=p.getCurrentScope(),ae=p.getClient();if(!ae)m.DEBUG_BUILD&&u.logger.warn("Cannot capture check-in. No client defined.");else if(!ae.captureCheckIn)m.DEBUG_BUILD&&u.logger.warn("Cannot capture check-in. Client does not support sending check-ins.");else return ae.captureCheckIn(K,ee,q);return u.uuid4()}r(_,"captureCheckIn");function E(K,ee,q){const ae=_({monitorSlug:K,status:"in_progress"},q),ce=u.timestampInSeconds();function Te(ke){_({monitorSlug:K,status:ke,checkInId:ae,duration:u.timestampInSeconds()-ce})}return r(Te,"finishCheckIn"),p.withIsolationScope(()=>{let ke;try{ke=ee()}catch(tt){throw Te("error"),tt}return u.isThenable(ke)?Promise.resolve(ke).then(()=>{Te("ok")},()=>{Te("error")}):Te("ok"),ke})}r(E,"withMonitor");async function b(K){const ee=p.getClient();return ee?ee.flush(K):(m.DEBUG_BUILD&&u.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}r(b,"flush");async function T(K){const ee=p.getClient();return ee?ee.close(K):(m.DEBUG_BUILD&&u.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}r(T,"close");function I(){return!!p.getClient()}r(I,"isInitialized");function O(){const K=p.getClient();return!!K&&K.getOptions().enabled!==!1&&!!K.getTransport()}r(O,"isEnabled");function w(K){p.getIsolationScope().addEventProcessor(K)}r(w,"addEventProcessor");function D(K){const ee=p.getClient(),q=p.getIsolationScope(),ae=p.getCurrentScope(),{release:ce,environment:Te=h.DEFAULT_ENVIRONMENT}=ee&&ee.getOptions()||{},{userAgent:ke}=u.GLOBAL_OBJ.navigator||{},tt=a.makeSession({release:ce,environment:Te,user:ae.getUser()||q.getUser(),...ke&&{userAgent:ke},...K}),At=q.getSession();return At&&At.status==="ok"&&a.updateSession(At,{status:"exited"}),R(),q.setSession(tt),ae.setSession(tt),tt}r(D,"startSession");function R(){const K=p.getIsolationScope(),ee=p.getCurrentScope(),q=ee.getSession()||K.getSession();q&&a.closeSession(q),L(),K.setSession(),ee.setSession()}r(R,"endSession");function L(){const K=p.getIsolationScope(),ee=p.getCurrentScope(),q=p.getClient(),ae=ee.getSession()||K.getSession();ae&&q&&q.captureSession(ae)}r(L,"_sendSessionUpdate");function H(K=!1){if(K){R();return}L()}r(H,"captureSession"),l.addEventProcessor=w,l.captureCheckIn=_,l.captureEvent=t,l.captureException=i,l.captureMessage=e,l.captureSession=H,l.close=T,l.endSession=R,l.flush=b,l.isEnabled=O,l.isInitialized=I,l.lastEventId=v,l.setContext=n,l.setExtra=f,l.setExtras=o,l.setTag=S,l.setTags=g,l.setUser=c,l.startSession=D,l.withMonitor=E},7983636933:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026);function p(m,a={}){const{message:s,name:i,email:e,url:t,source:n,associatedEventId:o}=m,f=h.getClient(),g={contexts:{feedback:u.dropUndefinedKeys({contact_email:e,name:i,message:s,url:t,source:n,associated_event_id:o})},type:"feedback",level:"info"};return f&&f.emit("beforeSendFeedback",g,a),h.getCurrentScope().captureEvent(g,a)}r(p,"captureFeedback"),l.captureFeedback=p},296812610:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(2332127203);d(2206474662),d(8844511336);const m=d(8645141291),a=d(5475300505),s=d(8167549304),i=d(1150305139),e=d(4530391782),t=d(9064881818);function n(S,c,v,_,E="auto.http.browser"){if(!S.fetchData)return;const b=m.hasTracingEnabled()&&c(S.fetchData.url);if(S.endTimestamp&&b){const K=S.fetchData.__span;if(!K)return;const ee=_[K];ee&&(g(ee,S),delete _[K]);return}const T=h.getCurrentScope(),I=h.getClient(),{method:O,url:w}=S.fetchData,D=f(w),R=D?u.parseUrl(D).host:void 0,L=!!a.getActiveSpan(),H=b&&L?e.startInactiveSpan({name:`${O} ${w}`,attributes:{url:w,type:"fetch","http.method":O,"http.url":D,"server.address":R,[p.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:E,[p.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new s.SentryNonRecordingSpan;if(S.fetchData.__span=H.spanContext().spanId,_[H.spanContext().spanId]=H,v(S.fetchData.url)&&I){const K=S.args[0];S.args[1]=S.args[1]||{};const ee=S.args[1];ee.headers=o(K,I,T,ee,m.hasTracingEnabled()&&L?H:void 0)}return H}r(n,"instrumentFetchRequest");function o(S,c,v,_,E){const b=h.getIsolationScope(),{traceId:T,spanId:I,sampled:O,dsc:w}={...b.getPropagationContext(),...v.getPropagationContext()},D=E?a.spanToTraceHeader(E):u.generateSentryTraceHeader(T,I,O),R=u.dynamicSamplingContextToSentryBaggageHeader(w||(E?t.getDynamicSamplingContextFromSpan(E):t.getDynamicSamplingContextFromClient(T,c))),L=_.headers||(typeof Request<"u"&&u.isInstanceOf(S,Request)?S.headers:void 0);if(L)if(typeof Headers<"u"&&u.isInstanceOf(L,Headers)){const H=new Headers(L);return H.append("sentry-trace",D),R&&H.append(u.BAGGAGE_HEADER_NAME,R),H}else if(Array.isArray(L)){const H=[...L,["sentry-trace",D]];return R&&H.push([u.BAGGAGE_HEADER_NAME,R]),H}else{const H="baggage"in L?L.baggage:void 0,K=[];return Array.isArray(H)?K.push(...H):H&&K.push(H),R&&K.push(R),{...L,"sentry-trace":D,baggage:K.length>0?K.join(","):void 0}}else return{"sentry-trace":D,baggage:R}}r(o,"addTracingHeadersToFetchRequest");function f(S){try{return new URL(S).href}catch{return}}r(f,"getFullURL");function g(S,c){if(c.response){i.setHttpStatus(S,c.response.status);const v=c.response&&c.response.headers&&c.response.headers.get("content-length");if(v){const _=parseInt(v);_>0&&S.setAttribute("http.response_content_length",_)}}else c.error&&S.setStatus({code:i.SPAN_STATUS_ERROR,message:"internal_error"});S.end()}r(g,"endSpan"),l.addTracingHeadersToFetchRequest=o,l.instrumentFetchRequest=n},6649284951:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(4433801832),h=d(8438156026),p=d(5015065869);function m(){return{bindClient(i){h.getCurrentScope().setClient(i)},withScope:h.withScope,getClient:()=>h.getClient(),getScope:h.getCurrentScope,getIsolationScope:h.getIsolationScope,captureException:(i,e)=>h.getCurrentScope().captureException(i,e),captureMessage:(i,e,t)=>h.getCurrentScope().captureMessage(i,e,t),captureEvent:p.captureEvent,addBreadcrumb:u.addBreadcrumb,setUser:p.setUser,setTags:p.setTags,setTag:p.setTag,setExtra:p.setExtra,setExtras:p.setExtras,setContext:p.setContext,getIntegration(i){const e=h.getClient();return e&&e.getIntegrationByName(i.id)||null},startSession:p.startSession,endSession:p.endSession,captureSession(i){if(i)return p.endSession();s()}}}r(m,"getCurrentHubShim");const a=m;function s(){const i=h.getCurrentScope(),e=h.getClient(),t=i.getSession();e&&t&&e.captureSession(t)}r(s,"_sendSessionUpdate"),l.getCurrentHub=a,l.getCurrentHubShim=m},8482989710:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(2206474662),h=d(9578383602),p=d(5618891990),m=d(7265722327),a=d(6720678066),s=d(8167549304),i=d(1150305139),e=d(4530391782),t=d(9064881818),n=d(3345259075),o=d(6939919536),f=d(8482601586),g=d(2332127203),S=d(5297268390),c=d(5015065869),v=d(8438156026),_=d(897859094),E=d(2685322190),b=d(5234873710),T=d(7083316483),I=d(2158524366),O=d(5911348835),w=d(9857059330),D=d(4936960144),R=d(1817668688),L=d(9483783910),H=d(306863924),K=d(3178226440),ee=d(2843166954),q=d(639277478),ae=d(1927145604),ce=d(8969228363),Te=d(9877103701),ke=d(7584701501),tt=d(8645141291),At=d(175966809),Be=d(5800525242),$e=d(4718881455),Ze=d(5475300505),Je=d(1119532287),dt=d(3433863337),Ot=d(4834620523),Nt=d(4433801832),Ve=d(3620727810),He=d(3514394122),ct=d(8947681608),yt=d(2133507327),it=d(4474256835),nn=d(8953708405),Xt=d(1072936841),dn=d(1794376169),bn=d(6437106406),Rn=d(8435832800),Zt=d(3496361636),Mn=d(3005223956),Wi=d(6342793611),Jn=d(6431460707),zn=d(5988719990),En=d(1243296801),sn=d(296812610),oi=d(2117263085),rn=d(7983636933),cn=d(6649284951);l.registerSpanErrorInstrumentation=u.registerSpanErrorInstrumentation,l.getCapturedScopesOnSpan=h.getCapturedScopesOnSpan,l.setCapturedScopesOnSpan=h.setCapturedScopesOnSpan,l.addTracingExtensions=p.addTracingExtensions,l.TRACING_DEFAULTS=m.TRACING_DEFAULTS,l.startIdleSpan=m.startIdleSpan,l.SentrySpan=a.SentrySpan,l.SentryNonRecordingSpan=s.SentryNonRecordingSpan,l.SPAN_STATUS_ERROR=i.SPAN_STATUS_ERROR,l.SPAN_STATUS_OK=i.SPAN_STATUS_OK,l.SPAN_STATUS_UNSET=i.SPAN_STATUS_UNSET,l.getSpanStatusFromHttpCode=i.getSpanStatusFromHttpCode,l.setHttpStatus=i.setHttpStatus,l.continueTrace=e.continueTrace,l.startInactiveSpan=e.startInactiveSpan,l.startSpan=e.startSpan,l.startSpanManual=e.startSpanManual,l.suppressTracing=e.suppressTracing,l.withActiveSpan=e.withActiveSpan,l.getDynamicSamplingContextFromClient=t.getDynamicSamplingContextFromClient,l.getDynamicSamplingContextFromSpan=t.getDynamicSamplingContextFromSpan,l.setMeasurement=n.setMeasurement,l.timedEventsToMeasurements=n.timedEventsToMeasurements,l.sampleSpan=o.sampleSpan,l.logSpanEnd=f.logSpanEnd,l.logSpanStart=f.logSpanStart,l.SEMANTIC_ATTRIBUTE_CACHE_HIT=g.SEMANTIC_ATTRIBUTE_CACHE_HIT,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=g.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=g.SEMANTIC_ATTRIBUTE_CACHE_KEY,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=g.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=g.SEMANTIC_ATTRIBUTE_PROFILE_ID,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=g.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=g.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=g.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.createEventEnvelope=S.createEventEnvelope,l.createSessionEnvelope=S.createSessionEnvelope,l.createSpanEnvelope=S.createSpanEnvelope,l.addEventProcessor=c.addEventProcessor,l.captureCheckIn=c.captureCheckIn,l.captureEvent=c.captureEvent,l.captureException=c.captureException,l.captureMessage=c.captureMessage,l.captureSession=c.captureSession,l.close=c.close,l.endSession=c.endSession,l.flush=c.flush,l.isEnabled=c.isEnabled,l.isInitialized=c.isInitialized,l.lastEventId=c.lastEventId,l.setContext=c.setContext,l.setExtra=c.setExtra,l.setExtras=c.setExtras,l.setTag=c.setTag,l.setTags=c.setTags,l.setUser=c.setUser,l.startSession=c.startSession,l.withMonitor=c.withMonitor,l.getClient=v.getClient,l.getCurrentScope=v.getCurrentScope,l.getDefaultCurrentScope=v.getDefaultCurrentScope,l.getDefaultIsolationScope=v.getDefaultIsolationScope,l.getGlobalScope=v.getGlobalScope,l.getIsolationScope=v.getIsolationScope,l.withIsolationScope=v.withIsolationScope,l.withScope=v.withScope,l.setAsyncContextStrategy=_.setAsyncContextStrategy,l.getMainCarrier=E.getMainCarrier,l.closeSession=b.closeSession,l.makeSession=b.makeSession,l.updateSession=b.updateSession,l.SessionFlusher=T.SessionFlusher,l.Scope=I.Scope,l.notifyEventProcessors=O.notifyEventProcessors,l.getEnvelopeEndpointWithUrlEncodedAuth=w.getEnvelopeEndpointWithUrlEncodedAuth,l.getReportDialogEndpoint=w.getReportDialogEndpoint,l.BaseClient=D.BaseClient,l.ServerRuntimeClient=R.ServerRuntimeClient,l.initAndBind=L.initAndBind,l.setCurrentClient=L.setCurrentClient,l.createTransport=H.createTransport,l.makeOfflineTransport=K.makeOfflineTransport,l.makeMultiplexedTransport=ee.makeMultiplexedTransport,l.SDK_VERSION=q.SDK_VERSION,l.addIntegration=ae.addIntegration,l.defineIntegration=ae.defineIntegration,l.getIntegrationsToSetup=ae.getIntegrationsToSetup,l.applyScopeDataToEvent=ce.applyScopeDataToEvent,l.mergeScopeData=ce.mergeScopeData,l.prepareEvent=Te.prepareEvent,l.createCheckInEnvelope=ke.createCheckInEnvelope,l.hasTracingEnabled=tt.hasTracingEnabled,l.isSentryRequestUrl=At.isSentryRequestUrl,l.handleCallbackErrors=Be.handleCallbackErrors,l.parameterize=$e.parameterize,l.addChildSpanToSpan=Ze.addChildSpanToSpan,l.getActiveSpan=Ze.getActiveSpan,l.getRootSpan=Ze.getRootSpan,l.getSpanDescendants=Ze.getSpanDescendants,l.getStatusMessage=Ze.getStatusMessage,l.spanIsSampled=Ze.spanIsSampled,l.spanToBaggageHeader=Ze.spanToBaggageHeader,l.spanToJSON=Ze.spanToJSON,l.spanToTraceContext=Ze.spanToTraceContext,l.spanToTraceHeader=Ze.spanToTraceHeader,l.parseSampleRate=Je.parseSampleRate,l.applySdkMetadata=dt.applySdkMetadata,l.DEFAULT_ENVIRONMENT=Ot.DEFAULT_ENVIRONMENT,l.addBreadcrumb=Nt.addBreadcrumb,l.functionToStringIntegration=Ve.functionToStringIntegration,l.inboundFiltersIntegration=He.inboundFiltersIntegration,l.linkedErrorsIntegration=ct.linkedErrorsIntegration,l.moduleMetadataIntegration=yt.moduleMetadataIntegration,l.requestDataIntegration=it.requestDataIntegration,l.captureConsoleIntegration=nn.captureConsoleIntegration,l.debugIntegration=Xt.debugIntegration,l.dedupeIntegration=dn.dedupeIntegration,l.extraErrorDataIntegration=bn.extraErrorDataIntegration,l.rewriteFramesIntegration=Rn.rewriteFramesIntegration,l.sessionTimingIntegration=Zt.sessionTimingIntegration,l.zodErrorsIntegration=Mn.zodErrorsIntegration,l.metrics=Wi.metrics,l.metricsDefault=Jn.metricsDefault,l.BrowserMetricsAggregator=zn.BrowserMetricsAggregator,l.getMetricSummaryJsonForSpan=En.getMetricSummaryJsonForSpan,l.addTracingHeadersToFetchRequest=sn.addTracingHeadersToFetchRequest,l.instrumentFetchRequest=sn.instrumentFetchRequest,l.trpcMiddleware=oi.trpcMiddleware,l.captureFeedback=rn.captureFeedback,l.getCurrentHub=cn.getCurrentHub,l.getCurrentHubShim=cn.getCurrentHubShim},1927145604:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(8844511336),m=[];function a(g){const S={};return g.forEach(c=>{const{name:v}=c,_=S[v];_&&!_.isDefaultInstance&&c.isDefaultInstance||(S[v]=c)}),Object.keys(S).map(c=>S[c])}r(a,"filterDuplicates");function s(g){const S=g.defaultIntegrations||[],c=g.integrations;S.forEach(b=>{b.isDefaultInstance=!0});let v;Array.isArray(c)?v=[...S,...c]:typeof c=="function"?v=u.arrayify(c(S)):v=S;const _=a(v),E=o(_,b=>b.name==="Debug");if(E!==-1){const[b]=_.splice(E,1);_.push(b)}return _}r(s,"getIntegrationsToSetup");function i(g,S){const c={};return S.forEach(v=>{v&&t(g,v,c)}),c}r(i,"setupIntegrations");function e(g,S){for(const c of S)c&&c.afterAllSetup&&c.afterAllSetup(g)}r(e,"afterSetupIntegrations");function t(g,S,c){if(c[S.name]){p.DEBUG_BUILD&&u.logger.log(`Integration skipped because it was already installed: ${S.name}`);return}if(c[S.name]=S,m.indexOf(S.name)===-1&&typeof S.setupOnce=="function"&&(S.setupOnce(),m.push(S.name)),S.setup&&typeof S.setup=="function"&&S.setup(g),typeof S.preprocessEvent=="function"){const v=S.preprocessEvent.bind(S);g.on("preprocessEvent",(_,E)=>v(_,E,g))}if(typeof S.processEvent=="function"){const v=S.processEvent.bind(S),_=Object.assign((E,b)=>v(E,b,g),{id:S.name});g.addEventProcessor(_)}p.DEBUG_BUILD&&u.logger.log(`Integration installed: ${S.name}`)}r(t,"setupIntegration");function n(g){const S=h.getClient();if(!S){p.DEBUG_BUILD&&u.logger.warn(`Cannot add integration "${g.name}" because no SDK Client is available.`);return}S.addIntegration(g)}r(n,"addIntegration");function o(g,S){for(let c=0;c<g.length;c++)if(S(g[c])===!0)return c;return-1}r(o,"findIndex");function f(g){return g}r(f,"defineIntegration"),l.addIntegration=n,l.afterSetupIntegrations=e,l.defineIntegration=f,l.getIntegrationsToSetup=s,l.installedIntegrations=m,l.setupIntegration=t,l.setupIntegrations=i},8953708405:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(5015065869),m=d(1927145604),a="CaptureConsole",s=r((t={})=>{const n=t.levels||u.CONSOLE_LEVELS;return{name:a,setup(o){"console"in u.GLOBAL_OBJ&&u.addConsoleInstrumentationHandler(({args:f,level:g})=>{h.getClient()!==o||!n.includes(g)||e(f,g)})}}},"_captureConsoleIntegration"),i=m.defineIntegration(s);function e(t,n){const o={level:u.severityLevelFromString(n),extra:{arguments:t}};h.withScope(f=>{if(f.addEventProcessor(c=>(c.logger="console",u.addExceptionMechanism(c,{handled:!1,type:"console"}),c)),n==="assert"){if(!t[0]){const c=`Assertion failed: ${u.safeJoin(t.slice(1)," ")||"console.assert"}`;f.setExtra("arguments",t.slice(1)),p.captureMessage(c,o)}return}const g=t.find(c=>c instanceof Error);if(g){p.captureException(g,o);return}const S=u.safeJoin(t," ");p.captureMessage(S,o)})}r(e,"consoleHandler"),l.captureConsoleIntegration=i},1072936841:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p="Debug",m=r((s={})=>{const i={debugger:!1,stringify:!1,...s};return{name:p,setup(e){e.on("beforeSendEvent",(t,n)=>{if(i.debugger)debugger;u.consoleSandbox(()=>{i.stringify?(console.log(JSON.stringify(t,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(t),n&&Object.keys(n).length&&console.log(n))})})}}},"_debugIntegration"),a=h.defineIntegration(m);l.debugIntegration=a},1794376169:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p=d(8844511336),m="Dedupe",a=r(()=>{let S;return{name:m,processEvent(c){if(c.type)return c;try{if(i(c,S))return p.DEBUG_BUILD&&u.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return S=c}}},"_dedupeIntegration"),s=h.defineIntegration(a);function i(S,c){return c?!!(e(S,c)||t(S,c)):!1}r(i,"_shouldDropEvent");function e(S,c){const v=S.message,_=c.message;return!(!v&&!_||v&&!_||!v&&_||v!==_||!o(S,c)||!n(S,c))}r(e,"_isSameMessageEvent");function t(S,c){const v=f(c),_=f(S);return!(!v||!_||v.type!==_.type||v.value!==_.value||!o(S,c)||!n(S,c))}r(t,"_isSameExceptionEvent");function n(S,c){let v=g(S),_=g(c);if(!v&&!_)return!0;if(v&&!_||!v&&_||(v=v,_=_,_.length!==v.length))return!1;for(let E=0;E<_.length;E++){const b=_[E],T=v[E];if(b.filename!==T.filename||b.lineno!==T.lineno||b.colno!==T.colno||b.function!==T.function)return!1}return!0}r(n,"_isSameStacktrace");function o(S,c){let v=S.fingerprint,_=c.fingerprint;if(!v&&!_)return!0;if(v&&!_||!v&&_)return!1;v=v,_=_;try{return v.join("")===_.join("")}catch{return!1}}r(o,"_isSameFingerprint");function f(S){return S.exception&&S.exception.values&&S.exception.values[0]}r(f,"_getExceptionFromEvent");function g(S){const c=S.exception;if(c)try{return c.values[0].stacktrace.frames}catch{return}}r(g,"_getFramesFromEvent"),l._shouldDropEvent=i,l.dedupeIntegration=s},6437106406:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p=d(8844511336),m="ExtraErrorData",a=r((t={})=>{const{depth:n=3,captureErrorCause:o=!0}=t;return{name:m,processEvent(f,g){return i(f,g,n,o)}}},"_extraErrorDataIntegration"),s=h.defineIntegration(a);function i(t,n={},o,f){if(!n.originalException||!u.isError(n.originalException))return t;const g=n.originalException.name||n.originalException.constructor.name,S=e(n.originalException,f);if(S){const c={...t.contexts},v=u.normalize(S,o);return u.isPlainObject(v)&&(u.addNonEnumerableProperty(v,"__sentry_skip_normalization__",!0),c[g]=v),{...t,contexts:c}}return t}r(i,"_enhanceEventWithErrorData");function e(t,n){try{const o=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],f={};for(const g of Object.keys(t)){if(o.indexOf(g)!==-1)continue;const S=t[g];f[g]=u.isError(S)?S.toString():S}if(n&&t.cause!==void 0&&(f.cause=u.isError(t.cause)?t.cause.toString():t.cause),typeof t.toJSON=="function"){const g=t.toJSON();for(const S of Object.keys(g)){const c=g[S];f[S]=u.isError(c)?c.toString():c}}return f}catch(o){p.DEBUG_BUILD&&u.logger.error("Unable to extract extra data from the Error object:",o)}return null}r(e,"_extractErrorData"),l.extraErrorDataIntegration=s},3620727810:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(1927145604);let m;const a="FunctionToString",s=new WeakMap,i=r(()=>({name:a,setupOnce(){m=Function.prototype.toString;try{Function.prototype.toString=function(...t){const n=u.getOriginalFunction(this),o=s.has(h.getClient())&&n!==void 0?n:this;return m.apply(o,t)}}catch{}},setup(t){s.set(t,!0)}}),"_functionToStringIntegration"),e=p.defineIntegration(i);l.functionToStringIntegration=e},3514394122:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336),p=d(1927145604),m=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],a="InboundFilters",s=r((E={})=>({name:a,processEvent(b,T,I){const O=I.getOptions(),w=e(E,O);return t(b,w)?null:b}}),"_inboundFiltersIntegration"),i=p.defineIntegration(s);function e(E={},b={}){return{allowUrls:[...E.allowUrls||[],...b.allowUrls||[]],denyUrls:[...E.denyUrls||[],...b.denyUrls||[]],ignoreErrors:[...E.ignoreErrors||[],...b.ignoreErrors||[],...E.disableErrorDefaults?[]:m],ignoreTransactions:[...E.ignoreTransactions||[],...b.ignoreTransactions||[]],ignoreInternal:E.ignoreInternal!==void 0?E.ignoreInternal:!0}}r(e,"_mergeOptions");function t(E,b){return b.ignoreInternal&&c(E)?(h.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${u.getEventDescription(E)}`),!0):n(E,b.ignoreErrors)?(h.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${u.getEventDescription(E)}`),!0):o(E,b.ignoreTransactions)?(h.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${u.getEventDescription(E)}`),!0):f(E,b.denyUrls)?(h.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${u.getEventDescription(E)}.
Url: ${_(E)}`),!0):g(E,b.allowUrls)?!1:(h.DEBUG_BUILD&&u.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${u.getEventDescription(E)}.
Url: ${_(E)}`),!0)}r(t,"_shouldDropEvent");function n(E,b){return E.type||!b||!b.length?!1:S(E).some(T=>u.stringMatchesSomePattern(T,b))}r(n,"_isIgnoredError");function o(E,b){if(E.type!=="transaction"||!b||!b.length)return!1;const T=E.transaction;return T?u.stringMatchesSomePattern(T,b):!1}r(o,"_isIgnoredTransaction");function f(E,b){if(!b||!b.length)return!1;const T=_(E);return T?u.stringMatchesSomePattern(T,b):!1}r(f,"_isDeniedUrl");function g(E,b){if(!b||!b.length)return!0;const T=_(E);return T?u.stringMatchesSomePattern(T,b):!0}r(g,"_isAllowedUrl");function S(E){const b=[];E.message&&b.push(E.message);let T;try{T=E.exception.values[E.exception.values.length-1]}catch{}return T&&T.value&&(b.push(T.value),T.type&&b.push(`${T.type}: ${T.value}`)),b}r(S,"_getPossibleEventMessages");function c(E){try{return E.exception.values[0].type==="SentryError"}catch{}return!1}r(c,"_isSentryError");function v(E=[]){for(let b=E.length-1;b>=0;b--){const T=E[b];if(T&&T.filename!=="<anonymous>"&&T.filename!=="[native code]")return T.filename||null}return null}r(v,"_getLastValidUrl");function _(E){try{let b;try{b=E.exception.values[0].stacktrace.frames}catch{}return b?v(b):null}catch{return h.DEBUG_BUILD&&u.logger.error(`Cannot extract url for event ${u.getEventDescription(E)}`),null}}r(_,"_getEventFilterUrl"),l.inboundFiltersIntegration=i},8947681608:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p="cause",m=5,a="LinkedErrors",s=r((e={})=>{const t=e.limit||m,n=e.key||p;return{name:a,preprocessEvent(o,f,g){const S=g.getOptions();u.applyAggregateErrorsToEvent(u.exceptionFromError,S.stackParser,S.maxValueLength,n,t,o,f)}}},"_linkedErrorsIntegration"),i=h.defineIntegration(s);l.linkedErrorsIntegration=i},2133507327:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p=d(2247716195),m="ModuleMetadata",a=r(()=>({name:m,setup(i){i.on("beforeEnvelope",e=>{u.forEachEnvelopeItem(e,(t,n)=>{if(n==="event"){const o=Array.isArray(t)?t[1]:void 0;o&&(p.stripMetadataFromStackFrames(o),t[1]=o)}})})},processEvent(i,e,t){const n=t.getOptions().stackParser;return p.addMetadataToStackFrames(n,i),i}}),"_moduleMetadataIntegration"),s=h.defineIntegration(a);l.moduleMetadataIntegration=s},4474256835:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},m="RequestData",a=r((e={})=>{const t={...p,...e,include:{...p.include,...e.include,user:e.include&&typeof e.include.user=="boolean"?e.include.user:{...p.include.user,...(e.include||{}).user}}};return{name:m,processEvent(n){const{sdkProcessingMetadata:o={}}=n,f=o.request;if(!f)return n;const g=i(t);return u.addRequestDataToEvent(n,f,g)}}},"_requestDataIntegration"),s=h.defineIntegration(a);function i(e){const{transactionNamingScheme:t,include:{ip:n,user:o,...f}}=e,g=["method"];for(const[c,v]of Object.entries(f))v&&g.push(c);let S;if(o===void 0)S=!0;else if(typeof o=="boolean")S=o;else{const c=[];for(const[v,_]of Object.entries(o))_&&c.push(v);S=c}return{include:{ip:n,user:S,request:g.length!==0?g:void 0,transaction:t}}}r(i,"convertReqDataIntegrationOptsToAddReqDataOpts"),l.requestDataIntegration=s},8435832800:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p="RewriteFrames",m=h.defineIntegration((s={})=>{const i=s.root,e=s.prefix||"app:///",t="window"in u.GLOBAL_OBJ&&u.GLOBAL_OBJ.window!==void 0,n=s.iteratee||a({isBrowser:t,root:i,prefix:e});function o(g){try{return{...g,exception:{...g.exception,values:g.exception.values.map(S=>({...S,...S.stacktrace&&{stacktrace:f(S.stacktrace)}}))}}}catch{return g}}r(o,"_processExceptionsEvent");function f(g){return{...g,frames:g&&g.frames&&g.frames.map(S=>n(S))}}return r(f,"_processStacktrace"),{name:p,processEvent(g){let S=g;return g.exception&&Array.isArray(g.exception.values)&&(S=o(S)),S}}});function a({isBrowser:s,root:i,prefix:e}){return t=>{if(!t.filename)return t;const n=/^[a-zA-Z]:\\/.test(t.filename)||t.filename.includes("\\")&&!t.filename.includes("/"),o=/^\//.test(t.filename);if(s){if(i){const f=t.filename;f.indexOf(i)===0&&(t.filename=f.replace(i,e))}}else if(n||o){const f=n?t.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):t.filename,g=i?u.relative(i,f):u.basename(f);t.filename=`${e}${g}`}return t}}r(a,"generateIteratee"),l.generateIteratee=a,l.rewriteFramesIntegration=m},3496361636:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p="SessionTiming",m=r(()=>{const s=u.timestampInSeconds()*1e3;return{name:p,processEvent(i){const e=u.timestampInSeconds()*1e3;return{...i,extra:{...i.extra,["session:start"]:s,["session:duration"]:e-s,["session:end"]:e}}}}},"_sessionTimingIntegration"),a=h.defineIntegration(m);l.sessionTimingIntegration=a},3005223956:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(1927145604),p=10,m="ZodErrors";function a(o){return u.isError(o)&&o.name==="ZodError"&&Array.isArray(o.errors)}r(a,"originalExceptionIsZodError");function s(o){return{...o,path:"path"in o&&Array.isArray(o.path)?o.path.join("."):void 0,keys:"keys"in o?JSON.stringify(o.keys):void 0,unionErrors:"unionErrors"in o?JSON.stringify(o.unionErrors):void 0}}r(s,"formatIssueTitle");function i(o){const f=new Set;for(const S of o.issues)S.path&&f.add(S.path[0]);const g=Array.from(f);return`Failed to validate keys: ${u.truncate(g.join(", "),100)}`}r(i,"formatIssueMessage");function e(o,f,g){return!f.exception||!f.exception.values||!g||!g.originalException||!a(g.originalException)||g.originalException.issues.length===0?f:{...f,exception:{...f.exception,values:[{...f.exception.values[0],value:i(g.originalException)},...f.exception.values.slice(1)]},extra:{...f.extra,"zoderror.issues":g.originalException.errors.slice(0,o).map(s)}}}r(e,"applyZodErrorsToEvent");const t=r((o={})=>{const f=o.limit||p;return{name:m,processEvent(g,S){return e(f,g,S)}}},"_zodErrorsIntegration"),n=h.defineIntegration(t);l.applyZodErrorsToEvent=e,l.zodErrorsIntegration=n},2247716195:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=new Map,p=new Set;function m(e){if(u.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(u.GLOBAL_OBJ._sentryModuleMetadata)){const n=u.GLOBAL_OBJ._sentryModuleMetadata[t];if(p.has(t))continue;p.add(t);const o=e(t);for(const f of o.reverse())if(f.filename){h.set(f.filename,n);break}}}r(m,"ensureMetadataStacksAreParsed");function a(e,t){return m(e),h.get(t)}r(a,"getMetadataForUrl");function s(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const o of n.stacktrace.frames||[]){if(!o.filename)continue;const f=a(e,o.filename);f&&(o.module_metadata=f)}})}catch{}}r(s,"addMetadataToStackFrames");function i(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}r(i,"stripMetadataFromStackFrames"),l.addMetadataToStackFrames=s,l.getMetadataForUrl=a,l.stripMetadataFromStackFrames=i},7604170301:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(5475300505),p=d(9622876717),m=d(5663957480),a=d(8672240743),s=d(5227316865);class i{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),p.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*p.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(t,n,o,f="none",g={},S=u.timestampInSeconds()){const c=Math.floor(S),v=s.sanitizeMetricKey(n),_=s.sanitizeTags(g),E=s.sanitizeUnit(f),b=s.getBucketKey(t,v,E,_);let T=this._buckets.get(b);const I=T&&t===p.SET_METRIC_TYPE?T.metric.weight:0;T?(T.metric.add(o),T.timestamp<c&&(T.timestamp=c)):(T={metric:new a.METRIC_MAP[t](o),timestamp:c,metricType:t,name:v,unit:E,tags:_},this._buckets.set(b,T));const O=typeof o=="string"?T.metric.weight-I:o;h.updateMetricSummaryOnActiveSpan(t,v,O,E,g,b),this._bucketsTotalWeight+=T.metric.weight,this._bucketsTotalWeight>=p.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush){this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();return}const t=Math.floor(u.timestampInSeconds())-p.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,n=new Map;for(const[o,f]of this._buckets)f.timestamp<=t&&(n.set(o,f),this._bucketsTotalWeight-=f.metric.weight);for(const[o]of n)this._buckets.delete(o);this._captureMetrics(n)}_captureMetrics(t){if(t.size>0){const n=Array.from(t).map(([,o])=>o);m.captureAggregateMetrics(this._client,n)}}}r(i,"MetricsAggregator"),l.MetricsAggregator=i},5988719990:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(5475300505),p=d(9622876717),m=d(5663957480),a=d(8672240743),s=d(5227316865);class i{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),p.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(t,n,o,f="none",g={},S=u.timestampInSeconds()){const c=Math.floor(S),v=s.sanitizeMetricKey(n),_=s.sanitizeTags(g),E=s.sanitizeUnit(f),b=s.getBucketKey(t,v,E,_);let T=this._buckets.get(b);const I=T&&t===p.SET_METRIC_TYPE?T.metric.weight:0;T?(T.metric.add(o),T.timestamp<c&&(T.timestamp=c)):(T={metric:new a.METRIC_MAP[t](o),timestamp:c,metricType:t,name:v,unit:E,tags:_},this._buckets.set(b,T));const O=typeof o=="string"?T.metric.weight-I:o;h.updateMetricSummaryOnActiveSpan(t,v,O,E,g,b)}flush(){if(this._buckets.size===0)return;const t=Array.from(this._buckets.values());m.captureAggregateMetrics(this._client,t),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}r(i,"BrowserMetricsAggregator"),l.BrowserMetricsAggregator=i},9622876717:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="c",u="g",h="s",p="d",m=5e3,a=1e4,s=1e4;l.COUNTER_METRIC_TYPE=d,l.DEFAULT_BROWSER_FLUSH_INTERVAL=m,l.DEFAULT_FLUSH_INTERVAL=a,l.DISTRIBUTION_METRIC_TYPE=p,l.GAUGE_METRIC_TYPE=u,l.MAX_WEIGHT=s,l.SET_METRIC_TYPE=h},5663957480:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(5227316865);function p(s,i){u.logger.log(`Flushing aggregated metrics, number of metrics: ${i.length}`);const e=s.getDsn(),t=s.getSdkMetadata(),n=s.getOptions().tunnel,o=m(i,e,t,n);s.sendEnvelope(o)}r(p,"captureAggregateMetrics");function m(s,i,e,t){const n={sent_at:new Date().toISOString()};e&&e.sdk&&(n.sdk={name:e.sdk.name,version:e.sdk.version}),t&&i&&(n.dsn=u.dsnToString(i));const o=a(s);return u.createEnvelope(n,[o])}r(m,"createMetricEnvelope");function a(s){const i=h.serializeMetricBuckets(s);return[{type:"statsd",length:i.length},i]}r(a,"createMetricEnvelopeItem"),l.captureAggregateMetrics=p,l.createMetricEnvelope=m},6431460707:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7604170301),h=d(6342793611);function p(t,n=1,o){h.metrics.increment(u.MetricsAggregator,t,n,o)}r(p,"increment");function m(t,n,o){h.metrics.distribution(u.MetricsAggregator,t,n,o)}r(m,"distribution");function a(t,n,o){h.metrics.set(u.MetricsAggregator,t,n,o)}r(a,"set");function s(t,n,o){h.metrics.gauge(u.MetricsAggregator,t,n,o)}r(s,"gauge");function i(t){return h.metrics.getMetricsAggregatorForClient(t,u.MetricsAggregator)}r(i,"getMetricsAggregatorForClient");const e={increment:p,distribution:m,set:a,gauge:s,getMetricsAggregatorForClient:i};l.metricsDefault=e},6342793611:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(8844511336),m=d(5475300505),a=d(9622876717);function s(g,S){const c=u.getGlobalSingleton("globalMetricsAggregators",()=>new WeakMap),v=c.get(g);if(v)return v;const _=new S(g);return g.on("flush",()=>_.flush()),g.on("close",()=>_.close()),c.set(g,_),_}r(s,"getMetricsAggregatorForClient");function i(g,S,c,v,_={}){const E=_.client||h.getClient();if(!E)return;const b=m.getActiveSpan(),T=b?m.getRootSpan(b):void 0,{unit:I,tags:O,timestamp:w}=_,{release:D,environment:R}=E.getOptions(),L={};D&&(L.release=D),R&&(L.environment=R),T&&(L.transaction=m.spanToJSON(T).description||""),p.DEBUG_BUILD&&u.logger.log(`Adding value of ${v} to ${S} metric ${c}`),s(E,g).add(S,c,v,I,{...L,...O},w)}r(i,"addToMetricsAggregator");function e(g,S,c=1,v){i(g,a.COUNTER_METRIC_TYPE,S,c,v)}r(e,"increment");function t(g,S,c,v){i(g,a.DISTRIBUTION_METRIC_TYPE,S,c,v)}r(t,"distribution");function n(g,S,c,v){i(g,a.SET_METRIC_TYPE,S,c,v)}r(n,"set");function o(g,S,c,v){i(g,a.GAUGE_METRIC_TYPE,S,c,v)}r(o,"gauge");const f={increment:e,distribution:t,set:n,gauge:o,getMetricsAggregatorForClient:s};l.metrics=f},8672240743:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9622876717),h=d(5227316865);class p{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}r(p,"CounterMetric");class m{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}r(m,"GaugeMetric");class a{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}r(a,"DistributionMetric");class s{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?h.simpleHash(t):t).join(":")}}r(s,"SetMetric");const i={[u.COUNTER_METRIC_TYPE]:p,[u.GAUGE_METRIC_TYPE]:m,[u.DISTRIBUTION_METRIC_TYPE]:a,[u.SET_METRIC_TYPE]:s};l.CounterMetric=p,l.DistributionMetric=a,l.GaugeMetric=m,l.METRIC_MAP=i,l.SetMetric=s},1243296801:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);let h;function p(s){return h?h.get(s):void 0}r(p,"getMetricStorageForSpan");function m(s){const i=p(s);if(!i)return;const e={};for(const[,[t,n]]of i)e[t]||(e[t]=[]),e[t].push(u.dropUndefinedKeys(n));return e}r(m,"getMetricSummaryJsonForSpan");function a(s,i,e,t,n,o,f){const g=p(s)||new Map,S=`${i}:${e}@${n}`,c=g.get(f);if(c){const[,v]=c;g.set(f,[S,{min:Math.min(v.min,t),max:Math.max(v.max,t),count:v.count+=1,sum:v.sum+=t,tags:v.tags}])}else g.set(f,[S,{min:t,max:t,count:1,sum:t,tags:o}]);h||(h=new WeakMap),h.set(s,g)}r(a,"updateMetricSummaryOnSpan"),l.getMetricSummaryJsonForSpan=m,l.updateMetricSummaryOnSpan=a},5227316865:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);function h(f,g,S,c){const v=Object.entries(u.dropUndefinedKeys(c)).sort((_,E)=>_[0].localeCompare(E[0]));return`${f}${g}${S}${v}`}r(h,"getBucketKey");function p(f){let g=0;for(let S=0;S<f.length;S++){const c=f.charCodeAt(S);g=(g<<5)-g+c,g&=g}return g>>>0}r(p,"simpleHash");function m(f){let g="";for(const S of f){const c=Object.entries(S.tags),v=c.length>0?`|#${c.map(([_,E])=>`${_}:${E}`).join(",")}`:"";g+=`${S.name}@${S.unit}:${S.metric}|${S.metricType}${v}|T${S.timestamp}
`}return g}r(m,"serializeMetricBuckets");function a(f){return f.replace(/[^\w]+/gi,"_")}r(a,"sanitizeUnit");function s(f){return f.replace(/[^\w\-.]+/gi,"_")}r(s,"sanitizeMetricKey");function i(f){return f.replace(/[^\w\-./]+/gi,"")}r(i,"sanitizeTagKey");const e=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function t(f){for(const[g,S]of e)if(f===g)return S;return f}r(t,"getCharOrReplacement");function n(f){return[...f].reduce((g,S)=>g+t(S),"")}r(n,"sanitizeTagValue");function o(f){const g={};for(const S in f)if(Object.prototype.hasOwnProperty.call(f,S)){const c=i(S);g[c]=n(String(f[S]))}return g}r(o,"sanitizeTags"),l.getBucketKey=h,l.sanitizeMetricKey=s,l.sanitizeTags=o,l.sanitizeUnit=a,l.serializeMetricBuckets=m,l.simpleHash=p},2158524366:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(5234873710),p=d(9972015035),m=100;class a{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=i()}clone(){const t=new a;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,p._setSpanForScope(t,p._getSpanForScope(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&h.updateSession(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,[o,f]=n instanceof s?[n.getScopeData(),n.getRequestSession()]:u.isPlainObject(n)?[t,t.requestSession]:[],{tags:g,extra:S,user:c,contexts:v,level:_,fingerprint:E=[],propagationContext:b}=o||{};return this._tags={...this._tags,...g},this._extra={...this._extra,...S},this._contexts={...this._contexts,...v},c&&Object.keys(c).length&&(this._user=c),_&&(this._level=_),E.length&&(this._fingerprint=E),b&&(this._propagationContext=b),f&&(this._requestSession=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,p._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=i(),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const o=typeof n=="number"?n:m;if(o<=0)return this;const f={timestamp:u.dateTimestampInSeconds(),...t},g=this._breadcrumbs;return g.push(f),this._breadcrumbs=g.length>o?g.slice(-o):g,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:p._getSpanForScope(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const o=n&&n.event_id?n.event_id:u.uuid4();if(!this._client)return u.logger.warn("No client configured on scope - will not capture exception!"),o;const f=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:f,...n,event_id:o},this),o}captureMessage(t,n,o){const f=o&&o.event_id?o.event_id:u.uuid4();if(!this._client)return u.logger.warn("No client configured on scope - will not capture message!"),f;const g=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:g,...o,event_id:f},this),f}captureEvent(t,n){const o=n&&n.event_id?n.event_id:u.uuid4();return this._client?(this._client.captureEvent(t,{...n,event_id:o},this),o):(u.logger.warn("No client configured on scope - will not capture event!"),o)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}r(a,"ScopeClass");const s=a;function i(){return{traceId:u.uuid4(),spanId:u.uuid4().substring(16)}}r(i,"generatePropagationContext"),l.Scope=s},9483783910:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(2685322190),m=d(8844511336);function a(e,t){t.debug===!0&&(m.DEBUG_BUILD?u.logger.enable():u.consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),h.getCurrentScope().update(t.initialScope);const o=new e(t);s(o),o.init()}r(a,"initAndBind");function s(e){h.getCurrentScope().setClient(e),i(e)}r(s,"setCurrentClient");function i(e){const t=p.getSentryCarrier(p.getMainCarrier());t.hub&&typeof t.hub.getStackTop=="function"&&(t.hub.getStackTop().client=e)}r(i,"registerClientOnGlobalHub"),l.initAndBind=a,l.setCurrentClient=s},2332127203:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="sentry.source",u="sentry.sample_rate",h="sentry.op",p="sentry.origin",m="sentry.idle_span_finish_reason",a="sentry.measurement_unit",s="sentry.measurement_value",i="sentry.profile_id",e="sentry.exclusive_time",t="cache.hit",n="cache.key",o="cache.item_size";l.SEMANTIC_ATTRIBUTE_CACHE_HIT=t,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=o,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=n,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=e,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=i,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=m,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=a,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=s,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=h,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=p,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=u,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=d},1817668688:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(4936960144),p=d(7584701501),m=d(8438156026),a=d(8844511336),s=d(7083316483),i=d(2206474662),e=d(9972015035),t=d(5475300505),n=d(9064881818);class o extends h.BaseClient{constructor(g){i.registerSpanErrorInstrumentation(),super(g)}eventFromException(g,S){return u.resolvedSyncPromise(u.eventFromUnknownInput(this,this._options.stackParser,g,S))}eventFromMessage(g,S="info",c){return u.resolvedSyncPromise(u.eventFromMessage(this._options.stackParser,g,S,c,this._options.attachStacktrace))}captureException(g,S,c){if(this._options.autoSessionTracking&&this._sessionFlusher){const v=m.getIsolationScope().getRequestSession();v&&v.status==="ok"&&(v.status="errored")}return super.captureException(g,S,c)}captureEvent(g,S,c){if(this._options.autoSessionTracking&&this._sessionFlusher&&(g.type||"exception")==="exception"&&g.exception&&g.exception.values&&g.exception.values.length>0){const E=m.getIsolationScope().getRequestSession();E&&E.status==="ok"&&(E.status="errored")}return super.captureEvent(g,S,c)}close(g){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(g)}initSessionFlusher(){const{release:g,environment:S}=this._options;g?this._sessionFlusher=new s.SessionFlusher(this,{release:g,environment:S}):a.DEBUG_BUILD&&u.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(g,S,c){const v="checkInId"in g&&g.checkInId?g.checkInId:u.uuid4();if(!this._isEnabled())return a.DEBUG_BUILD&&u.logger.warn("SDK not enabled, will not capture checkin."),v;const _=this.getOptions(),{release:E,environment:b,tunnel:T}=_,I={check_in_id:v,monitor_slug:g.monitorSlug,status:g.status,release:E,environment:b};"duration"in g&&(I.duration=g.duration),S&&(I.monitor_config={schedule:S.schedule,checkin_margin:S.checkinMargin,max_runtime:S.maxRuntime,timezone:S.timezone});const[O,w]=this._getTraceInfoFromScope(c);w&&(I.contexts={trace:w});const D=p.createCheckInEnvelope(I,O,this.getSdkMetadata(),T,this.getDsn());return a.DEBUG_BUILD&&u.logger.info("Sending checkin:",g.monitorSlug,g.status),this.sendEnvelope(D),v}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():a.DEBUG_BUILD&&u.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(g,S,c,v){return this._options.platform&&(g.platform=g.platform||this._options.platform),this._options.runtime&&(g.contexts={...g.contexts,runtime:(g.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(g.server_name=g.server_name||this._options.serverName),super._prepareEvent(g,S,c,v)}_getTraceInfoFromScope(g){if(!g)return[void 0,void 0];const S=e._getSpanForScope(g);if(S){const T=t.getRootSpan(S);return[n.getDynamicSamplingContextFromSpan(T),t.spanToTraceContext(T)]}const{traceId:c,spanId:v,parentSpanId:_,dsc:E}=g.getPropagationContext(),b={trace_id:c,span_id:v,parent_span_id:_};return E?[E,b]:[n.getDynamicSamplingContextFromClient(c,this),b]}}r(o,"ServerRuntimeClient"),l.ServerRuntimeClient=o},5234873710:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);function h(s){const i=u.timestampInSeconds(),e={sid:u.uuid4(),init:!0,timestamp:i,started:i,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>a(e)};return s&&p(e,s),e}r(h,"makeSession");function p(s,i={}){if(i.user&&(!s.ipAddress&&i.user.ip_address&&(s.ipAddress=i.user.ip_address),!s.did&&!i.did&&(s.did=i.user.id||i.user.email||i.user.username)),s.timestamp=i.timestamp||u.timestampInSeconds(),i.abnormal_mechanism&&(s.abnormal_mechanism=i.abnormal_mechanism),i.ignoreDuration&&(s.ignoreDuration=i.ignoreDuration),i.sid&&(s.sid=i.sid.length===32?i.sid:u.uuid4()),i.init!==void 0&&(s.init=i.init),!s.did&&i.did&&(s.did=`${i.did}`),typeof i.started=="number"&&(s.started=i.started),s.ignoreDuration)s.duration=void 0;else if(typeof i.duration=="number")s.duration=i.duration;else{const e=s.timestamp-s.started;s.duration=e>=0?e:0}i.release&&(s.release=i.release),i.environment&&(s.environment=i.environment),!s.ipAddress&&i.ipAddress&&(s.ipAddress=i.ipAddress),!s.userAgent&&i.userAgent&&(s.userAgent=i.userAgent),typeof i.errors=="number"&&(s.errors=i.errors),i.status&&(s.status=i.status)}r(p,"updateSession");function m(s,i){let e={};i?e={status:i}:s.status==="ok"&&(e={status:"exited"}),p(s,e)}r(m,"closeSession");function a(s){return u.dropUndefinedKeys({sid:`${s.sid}`,init:s.init,started:new Date(s.started*1e3).toISOString(),timestamp:new Date(s.timestamp*1e3).toISOString(),status:s.status,errors:s.errors,did:typeof s.did=="number"||typeof s.did=="string"?`${s.did}`:void 0,duration:s.duration,abnormal_mechanism:s.abnormal_mechanism,attrs:{release:s.release,environment:s.environment,ip_address:s.ipAddress,user_agent:s.userAgent}})}r(a,"sessionToJSON"),l.closeSession=m,l.makeSession=h,l.updateSession=p},7083316483:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026);class p{constructor(a,s){this._client=a,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=s}flush(){const a=this.getSessionAggregates();a.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(a))}getSessionAggregates(){const a=Object.keys(this._pendingAggregates).map(i=>this._pendingAggregates[parseInt(i)]),s={attrs:this._sessionAttrs,aggregates:a};return u.dropUndefinedKeys(s)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const a=h.getIsolationScope(),s=a.getRequestSession();s&&s.status&&(this._incrementSessionStatusCount(s.status,new Date),a.setRequestSession(void 0))}_incrementSessionStatusCount(a,s){const i=new Date(s).setSeconds(0,0);this._pendingAggregates[i]=this._pendingAggregates[i]||{};const e=this._pendingAggregates[i];switch(e.started||(e.started=new Date(i).toISOString()),a){case"errored":return e.errored=(e.errored||0)+1,e.errored;case"ok":return e.exited=(e.exited||0)+1,e.exited;default:return e.crashed=(e.crashed||0)+1,e.crashed}}}r(p,"SessionFlusher"),l.SessionFlusher=p},9064881818:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(4834620523),p=d(8438156026),m=d(2332127203),a=d(5475300505),s="_frozenDsc";function i(n,o){const f=n;u.addNonEnumerableProperty(f,s,o)}r(i,"freezeDscOnSpan");function e(n,o){const f=o.getOptions(),{publicKey:g}=o.getDsn()||{},S=u.dropUndefinedKeys({environment:f.environment||h.DEFAULT_ENVIRONMENT,release:f.release,public_key:g,trace_id:n});return o.emit("createDsc",S),S}r(e,"getDynamicSamplingContextFromClient");function t(n){const o=p.getClient();if(!o)return{};const f=e(a.spanToJSON(n).trace_id||"",o),g=a.getRootSpan(n);if(!g)return f;const S=g[s];if(S)return S;const c=a.spanToJSON(g),v=c.data||{},_=v[m.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];_!=null&&(f.sample_rate=`${_}`);const E=v[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];return E&&E!=="url"&&(f.transaction=c.description),f.sampled=String(a.spanIsSampled(g)),o.emit("createDsc",f),f}r(t,"getDynamicSamplingContextFromSpan"),l.freezeDscOnSpan=i,l.getDynamicSamplingContextFromClient=e,l.getDynamicSamplingContextFromSpan=t},2206474662:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336),p=d(5475300505),m=d(1150305139);let a=!1;function s(){a||(a=!0,u.addGlobalErrorInstrumentationHandler(i),u.addGlobalUnhandledRejectionInstrumentationHandler(i))}r(s,"registerSpanErrorInstrumentation");function i(){const e=p.getActiveSpan(),t=e&&p.getRootSpan(e);if(t){const n="internal_error";h.DEBUG_BUILD&&u.logger.log(`[Tracing] Root span: ${n} -> Global error occured`),t.setStatus({code:m.SPAN_STATUS_ERROR,message:n})}}r(i,"errorCallback"),i.tag="sentry_tracingErrorCallback",l.registerSpanErrorInstrumentation=s},5618891990:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(2206474662);function h(){u.registerSpanErrorInstrumentation()}r(h,"addTracingExtensions"),l.addTracingExtensions=h},7265722327:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(8844511336),m=d(2332127203),a=d(8645141291),s=d(9972015035),i=d(5475300505),e=d(8167549304),t=d(1150305139),n=d(4530391782),o={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},f="heartbeatFailed",g="idleTimeout",S="finalTimeout",c="externalFinish";function v(E,b={}){const T=new Map;let I=!1,O,w=c,D=!b.disableAutoFinish;const{idleTimeout:R=o.idleTimeout,finalTimeout:L=o.finalTimeout,childSpanTimeout:H=o.childSpanTimeout,beforeSpanEnd:K}=b,ee=h.getClient();if(!ee||!a.hasTracingEnabled())return new e.SentryNonRecordingSpan;const q=h.getCurrentScope(),ae=i.getActiveSpan(),ce=_(E);function Te(Je=u.timestampInSeconds()){const dt=i.getSpanDescendants(ce).filter(yt=>yt!==ce);if(!dt.length){ce.end(Je);return}const Ot=dt.map(yt=>i.spanToJSON(yt).timestamp).filter(yt=>!!yt),Nt=Ot.length?Math.max(...Ot):void 0,Ve=i.spanTimeInputToSeconds(Je),He=i.spanToJSON(ce).start_timestamp,ct=Math.min(He?He+L/1e3:1/0,Math.max(He||-1/0,Math.min(Ve,Nt||1/0)));ce.end(ct)}r(Te,"_endSpan");function ke(){O&&(clearTimeout(O),O=void 0)}r(ke,"_cancelIdleTimeout");function tt(Je){ke(),O=setTimeout(()=>{!I&&T.size===0&&D&&(w=g,Te(Je))},R)}r(tt,"_restartIdleTimeout");function At(Je){O=setTimeout(()=>{!I&&D&&(w=f,Te(Je))},H)}r(At,"_restartChildSpanTimeout");function Be(Je){ke(),T.set(Je,!0);const dt=u.timestampInSeconds();At(dt+H/1e3)}r(Be,"_pushActivity");function $e(Je){if(T.has(Je)&&T.delete(Je),T.size===0){const dt=u.timestampInSeconds();tt(dt+R/1e3)}}r($e,"_popActivity");function Ze(){I=!0,T.clear(),K&&K(ce),s._setSpanForScope(q,ae);const Je=i.spanToJSON(ce),{timestamp:dt,start_timestamp:Ot}=Je;if(!dt||!Ot)return;(Je.data||{})[m.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||ce.setAttribute(m.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,w),u.logger.log(`[Tracing] Idle span "${Je.op}" finished`);const Ve=i.getSpanDescendants(ce).filter(ct=>ct!==ce);let He=0;Ve.forEach(ct=>{ct.isRecording()&&(ct.setStatus({code:t.SPAN_STATUS_ERROR,message:"cancelled"}),ct.end(dt),p.DEBUG_BUILD&&u.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(ct,void 0,2)));const yt=i.spanToJSON(ct),{timestamp:it=0,start_timestamp:nn=0}=yt,Xt=nn<=dt,dn=(L+R)/1e3,bn=it-nn<dn;if(p.DEBUG_BUILD){const Rn=JSON.stringify(ct,void 0,2);Xt?bn||u.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",Rn):u.logger.log("[Tracing] Discarding span since it happened after idle span was finished",Rn)}(!bn||!Xt)&&(i.removeChildSpanFromSpan(ce,ct),He++)}),He>0&&ce.setAttribute("sentry.idle_span_discarded_spans",He)}return r(Ze,"onIdleSpanEnded"),ee.on("spanStart",Je=>{if(I||Je===ce||i.spanToJSON(Je).timestamp)return;i.getSpanDescendants(ce).includes(Je)&&Be(Je.spanContext().spanId)}),ee.on("spanEnd",Je=>{I||($e(Je.spanContext().spanId),Je===ce&&Ze())}),ee.on("idleSpanEnableAutoFinish",Je=>{Je===ce&&(D=!0,tt(),T.size&&At())}),b.disableAutoFinish||tt(),setTimeout(()=>{I||(ce.setStatus({code:t.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),w=S,Te())},L),ce}r(v,"startIdleSpan");function _(E){const b=n.startInactiveSpan(E);return s._setSpanForScope(h.getCurrentScope(),b),p.DEBUG_BUILD&&u.logger.log("[Tracing] Started span is an idle span"),b}r(_,"_startIdleSpan"),l.TRACING_DEFAULTS=o,l.startIdleSpan=v},8482601586:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336),p=d(5475300505);function m(s){if(!h.DEBUG_BUILD)return;const{description:i="< unknown name >",op:e="< unknown op >",parent_span_id:t}=p.spanToJSON(s),{spanId:n}=s.spanContext(),o=p.spanIsSampled(s),f=p.getRootSpan(s),g=f===s,S=`[Tracing] Starting ${o?"sampled":"unsampled"} ${g?"root ":""}span`,c=[`op: ${e}`,`name: ${i}`,`ID: ${n}`];if(t&&c.push(`parent ID: ${t}`),!g){const{op:v,description:_}=p.spanToJSON(f);c.push(`root ID: ${f.spanContext().spanId}`),v&&c.push(`root op: ${v}`),_&&c.push(`root description: ${_}`)}u.logger.log(`${S}
  ${c.join(`
  `)}`)}r(m,"logSpanStart");function a(s){if(!h.DEBUG_BUILD)return;const{description:i="< unknown name >",op:e="< unknown op >"}=p.spanToJSON(s),{spanId:t}=s.spanContext(),o=p.getRootSpan(s)===s,f=`[Tracing] Finishing "${e}" ${o?"root ":""}span "${i}" with ID ${t}`;u.logger.log(f)}r(a,"logSpanEnd"),l.logSpanEnd=a,l.logSpanStart=m},3345259075:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(2332127203),h=d(5475300505);function p(a,s,i){const e=h.getActiveSpan(),t=e&&h.getRootSpan(e);t&&t.addEvent(a,{[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:s,[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:i})}r(p,"setMeasurement");function m(a){if(!a||a.length===0)return;const s={};return a.forEach(i=>{const e=i.attributes||{},t=e[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],n=e[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];typeof t=="string"&&typeof n=="number"&&(s[i.name]={value:n,unit:t})}),s}r(m,"timedEventsToMeasurements"),l.setMeasurement=p,l.timedEventsToMeasurements=m},6939919536:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336),p=d(8645141291),m=d(1119532287);function a(s,i){if(!p.hasTracingEnabled(s))return[!1];let e;typeof s.tracesSampler=="function"?e=s.tracesSampler(i):i.parentSampled!==void 0?e=i.parentSampled:typeof s.tracesSampleRate<"u"?e=s.tracesSampleRate:e=1;const t=m.parseSampleRate(e);return t===void 0?(h.DEBUG_BUILD&&u.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):t?Math.random()<t?[!0,t]:(h.DEBUG_BUILD&&u.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(e)})`),[!1,t]):(h.DEBUG_BUILD&&u.logger.log(`[Tracing] Discarding transaction because ${typeof s.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,t])}r(a,"sampleSpan"),l.sampleSpan=a},8167549304:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(5475300505);class p{constructor(a={}){this._traceId=a.traceId||u.uuid4(),this._spanId=a.spanId||u.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:h.TRACE_FLAG_NONE}}end(a){}setAttribute(a,s){return this}setAttributes(a){return this}setStatus(a){return this}updateName(a){return this}isRecording(){return!1}addEvent(a,s,i){return this}}r(p,"SentryNonRecordingSpan"),l.SentryNonRecordingSpan=p},6720678066:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(8844511336),m=d(5297268390),a=d(1243296801),s=d(2332127203),i=d(5475300505),e=d(9064881818),t=d(8482601586),n=d(3345259075),o=d(9578383602);class f{constructor(E={}){this._traceId=E.traceId||u.uuid4(),this._spanId=E.spanId||u.uuid4().substring(16),this._startTime=E.startTimestamp||u.timestampInSeconds(),this._attributes={},this.setAttributes({[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:E.op,...E.attributes}),this._name=E.name,E.parentSpanId&&(this._parentSpanId=E.parentSpanId),"sampled"in E&&(this._sampled=E.sampled),E.endTimestamp&&(this._endTime=E.endTimestamp),this._events=[],this._isStandaloneSpan=E.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:E,_traceId:b,_sampled:T}=this;return{spanId:E,traceId:b,traceFlags:T?i.TRACE_FLAG_SAMPLED:i.TRACE_FLAG_NONE}}setAttribute(E,b){b===void 0?delete this._attributes[E]:this._attributes[E]=b}setAttributes(E){Object.keys(E).forEach(b=>this.setAttribute(b,E[b]))}updateStartTime(E){this._startTime=i.spanTimeInputToSeconds(E)}setStatus(E){return this._status=E,this}updateName(E){return this._name=E,this}end(E){this._endTime||(this._endTime=i.spanTimeInputToSeconds(E),t.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return u.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[s.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:i.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[s.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[s.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:n.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&i.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?i.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(E,b,T){p.DEBUG_BUILD&&u.logger.log("[Tracing] Adding an event to span:",E);const I=g(b)?b:T||u.timestampInSeconds(),O=g(b)?{}:b||{},w={name:E,time:i.spanTimeInputToSeconds(I),attributes:O};return this._events.push(w),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const E=h.getClient();if(E&&E.emit("spanEnd",this),!(this._isStandaloneSpan||this===i.getRootSpan(this)))return;if(this._isStandaloneSpan){v(m.createSpanEnvelope([this],E));return}const T=this._convertSpanToTransaction();T&&(o.getCapturedScopesOnSpan(this).scope||h.getCurrentScope()).captureEvent(T)}_convertSpanToTransaction(){if(!S(i.spanToJSON(this)))return;this._name||(p.DEBUG_BUILD&&u.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:E,isolationScope:b}=o.getCapturedScopesOnSpan(this),I=(E||h.getCurrentScope()).getClient()||h.getClient();if(this._sampled!==!0){p.DEBUG_BUILD&&u.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),I&&I.recordDroppedEvent("sample_rate","transaction");return}const w=i.getSpanDescendants(this).filter(K=>K!==this&&!c(K)).map(K=>i.spanToJSON(K)).filter(S),D=this._attributes[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],R={contexts:{trace:i.spanToTransactionTraceContext(this)},spans:w,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:E,capturedSpanIsolationScope:b,...u.dropUndefinedKeys({dynamicSamplingContext:e.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:a.getMetricSummaryJsonForSpan(this),...D&&{transaction_info:{source:D}}},L=n.timedEventsToMeasurements(this._events);return L&&Object.keys(L).length&&(p.DEBUG_BUILD&&u.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(L,void 0,2)),R.measurements=L),R}}r(f,"SentrySpan");function g(_){return _&&typeof _=="number"||_ instanceof Date||Array.isArray(_)}r(g,"isSpanTimeInput");function S(_){return!!_.start_timestamp&&!!_.timestamp&&!!_.span_id&&!!_.trace_id}r(S,"isFullFinishedSpan");function c(_){return _ instanceof f&&_.isStandaloneSpan()}r(c,"isStandaloneSpan");function v(_){const E=h.getClient();if(!E)return;const b=_[1];if(!b||b.length===0){E.recordDroppedEvent("before_send","span");return}const T=E.getTransport();T&&T.send(_).then(null,I=>{p.DEBUG_BUILD&&u.logger.error("Error while sending span:",I)})}r(v,"sendSpanEnvelope"),l.SentrySpan=f},1150305139:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=0,u=1,h=2;function p(a){if(a<400&&a>=100)return{code:u};if(a>=400&&a<500)switch(a){case 401:return{code:h,message:"unauthenticated"};case 403:return{code:h,message:"permission_denied"};case 404:return{code:h,message:"not_found"};case 409:return{code:h,message:"already_exists"};case 413:return{code:h,message:"failed_precondition"};case 429:return{code:h,message:"resource_exhausted"};case 499:return{code:h,message:"cancelled"};default:return{code:h,message:"invalid_argument"}}if(a>=500&&a<600)switch(a){case 501:return{code:h,message:"unimplemented"};case 503:return{code:h,message:"unavailable"};case 504:return{code:h,message:"deadline_exceeded"};default:return{code:h,message:"internal_error"}}return{code:h,message:"unknown_error"}}r(p,"getSpanStatusFromHttpCode");function m(a,s){a.setAttribute("http.response.status_code",s);const i=p(s);i.message!=="unknown_error"&&a.setStatus(i)}r(m,"setHttpStatus"),l.SPAN_STATUS_ERROR=h,l.SPAN_STATUS_OK=u,l.SPAN_STATUS_UNSET=d,l.getSpanStatusFromHttpCode=p,l.setHttpStatus=m},4530391782:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(2685322190),p=d(8438156026),m=d(897859094),a=d(2332127203),s=d(5800525242),i=d(8645141291),e=d(9972015035),t=d(5475300505),n=d(9064881818),o=d(8482601586),f=d(6939919536),g=d(8167549304),S=d(6720678066),c=d(1150305139),v=d(9578383602),_="__SENTRY_SUPPRESS_TRACING__";function E(q,ae){const ce=L();if(ce.startSpan)return ce.startSpan(q,ae);const Te=R(q);return p.withScope(q.scope,ke=>{const tt=ee(ke),Be=q.onlyIfParent&&!tt?new g.SentryNonRecordingSpan:D({parentSpan:tt,spanContext:Te,forceTransaction:q.forceTransaction,scope:ke});return e._setSpanForScope(ke,Be),s.handleCallbackErrors(()=>ae(Be),()=>{const{status:$e}=t.spanToJSON(Be);Be.isRecording()&&(!$e||$e==="ok")&&Be.setStatus({code:c.SPAN_STATUS_ERROR,message:"internal_error"})},()=>Be.end())})}r(E,"startSpan");function b(q,ae){const ce=L();if(ce.startSpanManual)return ce.startSpanManual(q,ae);const Te=R(q);return p.withScope(q.scope,ke=>{const tt=ee(ke),Be=q.onlyIfParent&&!tt?new g.SentryNonRecordingSpan:D({parentSpan:tt,spanContext:Te,forceTransaction:q.forceTransaction,scope:ke});e._setSpanForScope(ke,Be);function $e(){Be.end()}return r($e,"finishAndSetSpan"),s.handleCallbackErrors(()=>ae(Be,$e),()=>{const{status:Ze}=t.spanToJSON(Be);Be.isRecording()&&(!Ze||Ze==="ok")&&Be.setStatus({code:c.SPAN_STATUS_ERROR,message:"internal_error"})})})}r(b,"startSpanManual");function T(q){const ae=L();if(ae.startInactiveSpan)return ae.startInactiveSpan(q);const ce=R(q),Te=q.scope||p.getCurrentScope(),ke=ee(Te);return q.onlyIfParent&&!ke?new g.SentryNonRecordingSpan:D({parentSpan:ke,spanContext:ce,forceTransaction:q.forceTransaction,scope:Te})}r(T,"startInactiveSpan");const I=r(({sentryTrace:q,baggage:ae},ce)=>p.withScope(Te=>{const ke=u.propagationContextFromHeaders(q,ae);return Te.setPropagationContext(ke),ce()}),"continueTrace");function O(q,ae){const ce=L();return ce.withActiveSpan?ce.withActiveSpan(q,ae):p.withScope(Te=>(e._setSpanForScope(Te,q||void 0),ae(Te)))}r(O,"withActiveSpan");function w(q){const ae=L();return ae.suppressTracing?ae.suppressTracing(q):p.withScope(ce=>(ce.setSDKProcessingMetadata({[_]:!0}),q()))}r(w,"suppressTracing");function D({parentSpan:q,spanContext:ae,forceTransaction:ce,scope:Te}){if(!i.hasTracingEnabled())return new g.SentryNonRecordingSpan;const ke=p.getIsolationScope();let tt;if(q&&!ce)tt=K(q,Te,ae),t.addChildSpanToSpan(q,tt);else if(q){const At=n.getDynamicSamplingContextFromSpan(q),{traceId:Be,spanId:$e}=q.spanContext(),Ze=t.spanIsSampled(q);tt=H({traceId:Be,parentSpanId:$e,...ae},Te,Ze),n.freezeDscOnSpan(tt,At)}else{const{traceId:At,dsc:Be,parentSpanId:$e,sampled:Ze}={...ke.getPropagationContext(),...Te.getPropagationContext()};tt=H({traceId:At,parentSpanId:$e,...ae},Te,Ze),Be&&n.freezeDscOnSpan(tt,Be)}return o.logSpanStart(tt),v.setCapturedScopesOnSpan(tt,Te,ke),tt}r(D,"createChildOrRootSpan");function R(q){const ce={isStandalone:(q.experimental||{}).standalone,...q};if(q.startTime){const Te={...ce};return Te.startTimestamp=t.spanTimeInputToSeconds(q.startTime),delete Te.startTime,Te}return ce}r(R,"normalizeContext");function L(){const q=h.getMainCarrier();return m.getAsyncContextStrategy(q)}r(L,"getAcs");function H(q,ae,ce){const Te=p.getClient(),ke=Te&&Te.getOptions()||{},{name:tt="",attributes:At}=q,[Be,$e]=ae.getScopeData().sdkProcessingMetadata[_]?[!1]:f.sampleSpan(ke,{name:tt,parentSampled:ce,attributes:At,transactionContext:{name:tt,parentSampled:ce}}),Ze=new S.SentrySpan({...q,attributes:{[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...q.attributes},sampled:Be});return $e!==void 0&&Ze.setAttribute(a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,$e),Te&&Te.emit("spanStart",Ze),Ze}r(H,"_startRootSpan");function K(q,ae,ce){const{spanId:Te,traceId:ke}=q.spanContext(),tt=ae.getScopeData().sdkProcessingMetadata[_]?!1:t.spanIsSampled(q),At=tt?new S.SentrySpan({...ce,parentSpanId:Te,traceId:ke,sampled:tt}):new g.SentryNonRecordingSpan({traceId:ke});t.addChildSpanToSpan(q,At);const Be=p.getClient();return Be&&(Be.emit("spanStart",At),ce.endTimestamp&&Be.emit("spanEnd",At)),At}r(K,"_startChildSpan");function ee(q){const ae=e._getSpanForScope(q);if(!ae)return;const ce=p.getClient();return(ce?ce.getOptions():{}).parentSpanIsAlwaysRootSpan?t.getRootSpan(ae):ae}r(ee,"getParentSpan"),l.continueTrace=I,l.startInactiveSpan=T,l.startSpan=E,l.startSpanManual=b,l.suppressTracing=w,l.withActiveSpan=O},9578383602:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h="_sentryScope",p="_sentryIsolationScope";function m(s,i,e){s&&(u.addNonEnumerableProperty(s,p,e),u.addNonEnumerableProperty(s,h,i))}r(m,"setCapturedScopesOnSpan");function a(s){return{scope:s[h],isolationScope:s[p]}}r(a,"getCapturedScopesOnSpan"),l.stripUrlQueryAndFragment=u.stripUrlQueryAndFragment,l.getCapturedScopesOnSpan=a,l.setCapturedScopesOnSpan=m},306863924:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336),p=64;function m(s,i,e=u.makePromiseBuffer(s.bufferSize||p)){let t={};const n=r(f=>e.drain(f),"flush");function o(f){const g=[];if(u.forEachEnvelopeItem(f,(_,E)=>{const b=u.envelopeItemTypeToDataCategory(E);if(u.isRateLimited(t,b)){const T=a(_,E);s.recordDroppedEvent("ratelimit_backoff",b,T)}else g.push(_)}),g.length===0)return u.resolvedSyncPromise({});const S=u.createEnvelope(f[0],g),c=r(_=>{u.forEachEnvelopeItem(S,(E,b)=>{const T=a(E,b);s.recordDroppedEvent(_,u.envelopeItemTypeToDataCategory(b),T)})},"recordEnvelopeLoss"),v=r(()=>i({body:u.serializeEnvelope(S)}).then(_=>(_.statusCode!==void 0&&(_.statusCode<200||_.statusCode>=300)&&h.DEBUG_BUILD&&u.logger.warn(`Sentry responded with status code ${_.statusCode} to sent event.`),t=u.updateRateLimits(t,_),_),_=>{throw c("network_error"),_}),"requestTask");return e.add(v).then(_=>_,_=>{if(_ instanceof u.SentryError)return h.DEBUG_BUILD&&u.logger.error("Skipped sending event because buffer is full."),c("queue_overflow"),u.resolvedSyncPromise({});throw _})}return r(o,"send"),{send:o,flush:n}}r(m,"createTransport");function a(s,i){if(!(i!=="event"&&i!=="transaction"))return Array.isArray(s)?s[1]:void 0}r(a,"getEventForEnvelopeItem"),l.DEFAULT_TRANSPORT_BUFFER_SIZE=p,l.createTransport=m},2843166954:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(9857059330);function p(i,e){let t;return u.forEachEnvelopeItem(i,(n,o)=>(e.includes(o)&&(t=Array.isArray(n)?n[1]:void 0),!!t)),t}r(p,"eventFromEnvelope");function m(i,e){return t=>{const n=i(t);return{...n,send:async o=>{const f=p(o,["event","transaction","profile","replay_event"]);return f&&(f.release=e),n.send(o)}}}}r(m,"makeOverrideReleaseTransport");function a(i,e){return u.createEnvelope(e?{...i[0],dsn:e}:i[0],i[1])}r(a,"overrideDsn");function s(i,e){return t=>{const n=i(t),o=new Map;function f(c,v){const _=v?`${c}:${v}`:c;let E=o.get(_);if(!E){const b=u.dsnFromString(c);if(!b)return;const T=h.getEnvelopeEndpointWithUrlEncodedAuth(b,t.tunnel);E=v?m(i,v)({...t,url:T}):i({...t,url:T}),o.set(_,E)}return[c,E]}r(f,"getTransport");async function g(c){function v(b){const T=b&&b.length?b:["event"];return p(c,T)}r(v,"getEvent");const _=e({envelope:c,getEvent:v}).map(b=>typeof b=="string"?f(b,void 0):f(b.dsn,b.release)).filter(b=>!!b);return _.length===0&&_.push(["",n]),(await Promise.all(_.map(([b,T])=>T.send(a(c,b)))))[0]}r(g,"send");async function S(c){const v=[...o.values(),n];return(await Promise.all(v.map(E=>E.flush(c)))).every(E=>E)}return r(S,"flush"),{send:g,flush:S}}}r(s,"makeMultiplexedTransport"),l.eventFromEnvelope=p,l.makeMultiplexedTransport=s},3178226440:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336),p=100,m=5e3,a=36e5;function s(i){function e(...t){h.DEBUG_BUILD&&u.logger.info("[Offline]:",...t)}return r(e,"log"),t=>{const n=i(t);if(!t.createStore)throw new Error("No `createStore` function was provided");const o=t.createStore(t);let f=m,g;function S(E,b,T){return u.envelopeContainsItemType(E,["client_report"])?!1:t.shouldStore?t.shouldStore(E,b,T):!0}r(S,"shouldQueue");function c(E){g&&clearTimeout(g),g=setTimeout(async()=>{g=void 0;const b=await o.shift();b&&(e("Attempting to send previously queued event"),b[0].sent_at=new Date().toISOString(),_(b,!0).catch(T=>{e("Failed to retry sending",T)}))},E),typeof g!="number"&&g.unref&&g.unref()}r(c,"flushIn");function v(){g||(c(f),f=Math.min(f*2,a))}r(v,"flushWithBackOff");async function _(E,b=!1){if(!b&&u.envelopeContainsItemType(E,["replay_event","replay_recording"]))return await o.push(E),c(p),{};try{const T=await n.send(E);let I=p;if(T){if(T.headers&&T.headers["retry-after"])I=u.parseRetryAfterHeader(T.headers["retry-after"]);else if(T.headers&&T.headers["x-sentry-rate-limits"])I=6e4;else if((T.statusCode||0)>=400)return T}return c(I),f=m,T}catch(T){if(await S(E,T,f))return b?await o.unshift(E):await o.push(E),v(),e("Error sending. Event queued.",T),{};throw T}}return r(_,"send"),t.flushAtStartup&&v(),{send:_,flush:E=>n.flush(E)}}}r(s,"makeOfflineTransport"),l.MIN_DELAY=p,l.START_DELAY=m,l.makeOfflineTransport=s},2117263085:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8438156026),p=d(5015065869),m=d(2332127203);d(2206474662),d(8844511336);const a=d(4530391782),s={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};function i(e={}){return function(t){const{path:n,type:o,next:f,rawInput:g}=t,S=h.getClient(),c=S&&S.getOptions(),v={procedure_type:o};(e.attachRpcInput!==void 0?e.attachRpcInput:c&&c.sendDefaultPii)&&(v.input=u.normalize(g)),p.setContext("trpc",v);function _(E){typeof E=="object"&&E!==null&&"ok"in E&&!E.ok&&"error"in E&&p.captureException(E.error,s)}return r(_,"captureIfError"),a.startSpanManual({name:`trpc/${n}`,op:"rpc.server",attributes:{[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},E=>{let b;try{b=f()}catch(T){throw p.captureException(T,s),E.end(),T}return u.isThenable(b)?b.then(T=>(_(T),E.end(),T),T=>{throw p.captureException(T,s),E.end(),T}):(_(b),E.end(),b)})}}r(i,"trpcMiddleware"),l.trpcMiddleware=i},8969228363:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(9064881818),p=d(5475300505);function m(f,g){const{fingerprint:S,span:c,breadcrumbs:v,sdkProcessingMetadata:_}=g;i(f,g),c&&n(f,c),o(f,S),e(f,v),t(f,_)}r(m,"applyScopeDataToEvent");function a(f,g){const{extra:S,tags:c,user:v,contexts:_,level:E,sdkProcessingMetadata:b,breadcrumbs:T,fingerprint:I,eventProcessors:O,attachments:w,propagationContext:D,transactionName:R,span:L}=g;s(f,"extra",S),s(f,"tags",c),s(f,"user",v),s(f,"contexts",_),s(f,"sdkProcessingMetadata",b),E&&(f.level=E),R&&(f.transactionName=R),L&&(f.span=L),T.length&&(f.breadcrumbs=[...f.breadcrumbs,...T]),I.length&&(f.fingerprint=[...f.fingerprint,...I]),O.length&&(f.eventProcessors=[...f.eventProcessors,...O]),w.length&&(f.attachments=[...f.attachments,...w]),f.propagationContext={...f.propagationContext,...D}}r(a,"mergeScopeData");function s(f,g,S){if(S&&Object.keys(S).length){f[g]={...f[g]};for(const c in S)Object.prototype.hasOwnProperty.call(S,c)&&(f[g][c]=S[c])}}r(s,"mergeAndOverwriteScopeData");function i(f,g){const{extra:S,tags:c,user:v,contexts:_,level:E,transactionName:b}=g,T=u.dropUndefinedKeys(S);T&&Object.keys(T).length&&(f.extra={...T,...f.extra});const I=u.dropUndefinedKeys(c);I&&Object.keys(I).length&&(f.tags={...I,...f.tags});const O=u.dropUndefinedKeys(v);O&&Object.keys(O).length&&(f.user={...O,...f.user});const w=u.dropUndefinedKeys(_);w&&Object.keys(w).length&&(f.contexts={...w,...f.contexts}),E&&(f.level=E),b&&f.type!=="transaction"&&(f.transaction=b)}r(i,"applyDataToEvent");function e(f,g){const S=[...f.breadcrumbs||[],...g];f.breadcrumbs=S.length?S:void 0}r(e,"applyBreadcrumbsToEvent");function t(f,g){f.sdkProcessingMetadata={...f.sdkProcessingMetadata,...g}}r(t,"applySdkMetadataToEvent");function n(f,g){f.contexts={trace:p.spanToTraceContext(g),...f.contexts},f.sdkProcessingMetadata={dynamicSamplingContext:h.getDynamicSamplingContextFromSpan(g),...f.sdkProcessingMetadata};const S=p.getRootSpan(g),c=p.spanToJSON(S).description;c&&!f.transaction&&f.type==="transaction"&&(f.transaction=c)}r(n,"applySpanToEvent");function o(f,g){f.fingerprint=f.fingerprint?u.arrayify(f.fingerprint):[],g&&(f.fingerprint=f.fingerprint.concat(g)),f.fingerprint&&!f.fingerprint.length&&delete f.fingerprint}r(o,"applyFingerprintToEvent"),l.applyScopeDataToEvent=m,l.mergeAndOverwriteScopeData=s,l.mergeScopeData=a},5800525242:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614);function h(m,a,s=()=>{}){let i;try{i=m()}catch(e){throw a(e),s(),e}return p(i,a,s)}r(h,"handleCallbackErrors");function p(m,a,s){return u.isThenable(m)?m.then(i=>(s(),i),i=>{throw a(i),s(),i}):(s(),m)}r(p,"maybeHandlePromiseRejection"),l.handleCallbackErrors=h},8645141291:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8438156026);function h(m){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const a=m||p();return!!a&&(a.enableTracing||"tracesSampleRate"in a||"tracesSampler"in a)}r(h,"hasTracingEnabled");function p(){const m=u.getClient();return m&&m.getOptions()}r(p,"getClientOptions"),l.hasTracingEnabled=h},175966809:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(m,a){const s=a&&a.getDsn(),i=a&&a.getOptions().tunnel;return h(m,s)||u(m,i)}r(d,"isSentryRequestUrl");function u(m,a){return a?p(m)===p(a):!1}r(u,"checkTunnel");function h(m,a){return a?m.includes(a.host):!1}r(h,"checkDsn");function p(m){return m[m.length-1]==="/"?m.slice(0,-1):m}r(p,"removeTrailingSlash"),l.isSentryRequestUrl=d},4718881455:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(u,...h){const p=new String(String.raw(u,...h));return p.__sentry_template_string__=u.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),p.__sentry_template_values__=h,p}r(d,"parameterize"),l.parameterize=d},1119532287:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(8844511336);function p(m){if(typeof m=="boolean")return Number(m);const a=typeof m=="string"?parseFloat(m):m;if(typeof a!="number"||isNaN(a)||a<0||a>1){h.DEBUG_BUILD&&u.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(m)} of type ${JSON.stringify(typeof m)}.`);return}return a}r(p,"parseSampleRate"),l.parseSampleRate=p},9877103701:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(4834620523),p=d(8438156026),m=d(5911348835),a=d(2158524366),s=d(8969228363);function i(b,T,I,O,w,D){const{normalizeDepth:R=3,normalizeMaxBreadth:L=1e3}=b,H={...T,event_id:T.event_id||I.event_id||u.uuid4(),timestamp:T.timestamp||u.dateTimestampInSeconds()},K=I.integrations||b.integrations.map(tt=>tt.name);e(H,b),f(H,K),T.type===void 0&&n(H,b.stackParser);const ee=S(O,I.captureContext);I.mechanism&&u.addExceptionMechanism(H,I.mechanism);const q=w?w.getEventProcessors():[],ae=p.getGlobalScope().getScopeData();if(D){const tt=D.getScopeData();s.mergeScopeData(ae,tt)}if(ee){const tt=ee.getScopeData();s.mergeScopeData(ae,tt)}const ce=[...I.attachments||[],...ae.attachments];ce.length&&(I.attachments=ce),s.applyScopeDataToEvent(H,ae);const Te=[...q,...ae.eventProcessors];return m.notifyEventProcessors(Te,H,I).then(tt=>(tt&&o(tt),typeof R=="number"&&R>0?g(tt,R,L):tt))}r(i,"prepareEvent");function e(b,T){const{environment:I,release:O,dist:w,maxValueLength:D=250}=T;"environment"in b||(b.environment="environment"in T?I:h.DEFAULT_ENVIRONMENT),b.release===void 0&&O!==void 0&&(b.release=O),b.dist===void 0&&w!==void 0&&(b.dist=w),b.message&&(b.message=u.truncate(b.message,D));const R=b.exception&&b.exception.values&&b.exception.values[0];R&&R.value&&(R.value=u.truncate(R.value,D));const L=b.request;L&&L.url&&(L.url=u.truncate(L.url,D))}r(e,"applyClientOptions");const t=new WeakMap;function n(b,T){const I=u.GLOBAL_OBJ._sentryDebugIds;if(!I)return;let O;const w=t.get(T);w?O=w:(O=new Map,t.set(T,O));const D=Object.keys(I).reduce((R,L)=>{let H;const K=O.get(L);K?H=K:(H=T(L),O.set(L,H));for(let ee=H.length-1;ee>=0;ee--){const q=H[ee];if(q.filename){R[q.filename]=I[L];break}}return R},{});try{b.exception.values.forEach(R=>{R.stacktrace.frames.forEach(L=>{L.filename&&(L.debug_id=D[L.filename])})})}catch{}}r(n,"applyDebugIds");function o(b){const T={};try{b.exception.values.forEach(O=>{O.stacktrace.frames.forEach(w=>{w.debug_id&&(w.abs_path?T[w.abs_path]=w.debug_id:w.filename&&(T[w.filename]=w.debug_id),delete w.debug_id)})})}catch{}if(Object.keys(T).length===0)return;b.debug_meta=b.debug_meta||{},b.debug_meta.images=b.debug_meta.images||[];const I=b.debug_meta.images;Object.keys(T).forEach(O=>{I.push({type:"sourcemap",code_file:O,debug_id:T[O]})})}r(o,"applyDebugMeta");function f(b,T){T.length>0&&(b.sdk=b.sdk||{},b.sdk.integrations=[...b.sdk.integrations||[],...T])}r(f,"applyIntegrationsMetadata");function g(b,T,I){if(!b)return null;const O={...b,...b.breadcrumbs&&{breadcrumbs:b.breadcrumbs.map(w=>({...w,...w.data&&{data:u.normalize(w.data,T,I)}}))},...b.user&&{user:u.normalize(b.user,T,I)},...b.contexts&&{contexts:u.normalize(b.contexts,T,I)},...b.extra&&{extra:u.normalize(b.extra,T,I)}};return b.contexts&&b.contexts.trace&&O.contexts&&(O.contexts.trace=b.contexts.trace,b.contexts.trace.data&&(O.contexts.trace.data=u.normalize(b.contexts.trace.data,T,I))),b.spans&&(O.spans=b.spans.map(w=>({...w,...w.data&&{data:u.normalize(w.data,T,I)}}))),O}r(g,"normalizeEvent");function S(b,T){if(!T)return b;const I=b?b.clone():new a.Scope;return I.update(T),I}r(S,"getFinalScope");function c(b){if(b)return v(b)?{captureContext:b}:E(b)?{captureContext:b}:b}r(c,"parseEventHintOrCaptureContext");function v(b){return b instanceof a.Scope||typeof b=="function"}r(v,"hintIsScopeOrFunction");const _=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function E(b){return Object.keys(b).some(T=>_.includes(T))}r(E,"hintIsScopeContext"),l.applyDebugIds=n,l.applyDebugMeta=o,l.parseEventHintOrCaptureContext=c,l.prepareEvent=i},3433863337:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(639277478);function h(p,m,a=[m],s="npm"){const i=p._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${m}`,packages:a.map(e=>({name:`${s}:@sentry/${e}`,version:u.SDK_VERSION})),version:u.SDK_VERSION}),p._metadata=i}r(h,"applySdkMetadata"),l.applySdkMetadata=h},9972015035:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h="_sentrySpan";function p(a,s){s?u.addNonEnumerableProperty(a,h,s):delete a[h]}r(p,"_setSpanForScope");function m(a){return a[h]}r(m,"_getSpanForScope"),l._getSpanForScope=m,l._setSpanForScope=p},5475300505:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(7563271614),h=d(897859094),p=d(2685322190),m=d(8438156026),a=d(1243296801),s=d(2332127203);d(2206474662),d(8844511336);const i=d(9972015035),e=d(1150305139),t=d(9064881818),n=0,o=1;function f(ae){const{spanId:ce,traceId:Te}=ae.spanContext(),{data:ke,op:tt,parent_span_id:At,status:Be,origin:$e}=E(ae);return u.dropUndefinedKeys({parent_span_id:At,span_id:ce,trace_id:Te,data:ke,op:tt,status:Be,origin:$e})}r(f,"spanToTransactionTraceContext");function g(ae){const{spanId:ce,traceId:Te}=ae.spanContext(),{parent_span_id:ke}=E(ae);return u.dropUndefinedKeys({parent_span_id:ke,span_id:ce,trace_id:Te})}r(g,"spanToTraceContext");function S(ae){const{traceId:ce,spanId:Te}=ae.spanContext(),ke=I(ae);return u.generateSentryTraceHeader(ce,Te,ke)}r(S,"spanToTraceHeader");function c(ae){const ce=t.getDynamicSamplingContextFromSpan(ae);return u.dynamicSamplingContextToSentryBaggageHeader(ce)}r(c,"spanToBaggageHeader");function v(ae){return typeof ae=="number"?_(ae):Array.isArray(ae)?ae[0]+ae[1]/1e9:ae instanceof Date?_(ae.getTime()):u.timestampInSeconds()}r(v,"spanTimeInputToSeconds");function _(ae){return ae>9999999999?ae/1e3:ae}r(_,"ensureTimestampInSeconds");function E(ae){if(T(ae))return ae.getSpanJSON();try{const{spanId:ce,traceId:Te}=ae.spanContext();if(b(ae)){const{attributes:ke,startTime:tt,name:At,endTime:Be,parentSpanId:$e,status:Ze}=ae;return u.dropUndefinedKeys({span_id:ce,trace_id:Te,data:ke,description:At,parent_span_id:$e,start_timestamp:v(tt),timestamp:v(Be)||void 0,status:O(Ze),op:ke[s.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:ke[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(ae)})}return{span_id:ce,trace_id:Te}}catch{return{}}}r(E,"spanToJSON");function b(ae){const ce=ae;return!!ce.attributes&&!!ce.startTime&&!!ce.name&&!!ce.endTime&&!!ce.status}r(b,"spanIsOpenTelemetrySdkTraceBaseSpan");function T(ae){return typeof ae.getSpanJSON=="function"}r(T,"spanIsSentrySpan");function I(ae){const{traceFlags:ce}=ae.spanContext();return ce===o}r(I,"spanIsSampled");function O(ae){if(!(!ae||ae.code===e.SPAN_STATUS_UNSET))return ae.code===e.SPAN_STATUS_OK?"ok":ae.message||"unknown_error"}r(O,"getStatusMessage");const w="_sentryChildSpans",D="_sentryRootSpan";function R(ae,ce){const Te=ae[D]||ae;u.addNonEnumerableProperty(ce,D,Te),ae[w]&&ae[w].size<1e3?ae[w].add(ce):u.addNonEnumerableProperty(ae,w,new Set([ce]))}r(R,"addChildSpanToSpan");function L(ae,ce){ae[w]&&ae[w].delete(ce)}r(L,"removeChildSpanFromSpan");function H(ae){const ce=new Set;function Te(ke){if(!ce.has(ke)&&I(ke)){ce.add(ke);const tt=ke[w]?Array.from(ke[w]):[];for(const At of tt)Te(At)}}return r(Te,"addSpanChildren"),Te(ae),Array.from(ce)}r(H,"getSpanDescendants");function K(ae){return ae[D]||ae}r(K,"getRootSpan");function ee(){const ae=p.getMainCarrier(),ce=h.getAsyncContextStrategy(ae);return ce.getActiveSpan?ce.getActiveSpan():i._getSpanForScope(m.getCurrentScope())}r(ee,"getActiveSpan");function q(ae,ce,Te,ke,tt,At){const Be=ee();Be&&a.updateMetricSummaryOnSpan(Be,ae,ce,Te,ke,tt,At)}r(q,"updateMetricSummaryOnActiveSpan"),l.TRACE_FLAG_NONE=n,l.TRACE_FLAG_SAMPLED=o,l.addChildSpanToSpan=R,l.getActiveSpan=ee,l.getRootSpan=K,l.getSpanDescendants=H,l.getStatusMessage=O,l.removeChildSpanFromSpan=L,l.spanIsSampled=I,l.spanTimeInputToSeconds=v,l.spanToBaggageHeader=c,l.spanToJSON=E,l.spanToTraceContext=g,l.spanToTraceHeader=S,l.spanToTransactionTraceContext=f,l.updateMetricSummaryOnActiveSpan=q},639277478:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="8.2.1";l.SDK_VERSION=d},4916261515:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5330804994),h=d(9996838991);function p(e,t,n=250,o,f,g,S){if(!g.exception||!g.exception.values||!S||!u.isInstanceOf(S.originalException,Error))return;const c=g.exception.values.length>0?g.exception.values[g.exception.values.length-1]:void 0;c&&(g.exception.values=i(m(e,t,f,S.originalException,o,g.exception.values,c,0),n))}r(p,"applyAggregateErrorsToEvent");function m(e,t,n,o,f,g,S,c){if(g.length>=n+1)return g;let v=[...g];if(u.isInstanceOf(o[f],Error)){a(S,c);const _=e(t,o[f]),E=v.length;s(_,f,E,c),v=m(e,t,n,o[f],f,[_,...v],_,E)}return Array.isArray(o.errors)&&o.errors.forEach((_,E)=>{if(u.isInstanceOf(_,Error)){a(S,c);const b=e(t,_),T=v.length;s(b,`errors[${E}]`,T,c),v=m(e,t,n,_,f,[b,...v],b,T)}}),v}r(m,"aggregateExceptionsFromError");function a(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}r(a,"applyExceptionGroupFieldsForParentException");function s(e,t,n,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:o}}r(s,"applyExceptionGroupFieldsForChildException");function i(e,t){return e.map(n=>(n.value&&(n.value=h.truncate(n.value,t)),n))}r(i,"truncateAggregateExceptions"),l.applyAggregateErrorsToEvent=p},999571021:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6005876151),h=d(5247061117),p=d(9955566551);function m(s,i,e,t){const n=s();let o=!1,f=!0;return setInterval(()=>{const g=n.getTimeMs();o===!1&&g>i+e&&(o=!0,f&&t()),g<i+e&&(o=!1)},20),{poll:()=>{n.reset()},enabled:g=>{f=g}}}r(m,"watchdogTimer");function a(s,i,e){const t=i?i.replace(/^file:\/\//,""):void 0,n=s.location.columnNumber?s.location.columnNumber+1:void 0,o=s.location.lineNumber?s.location.lineNumber+1:void 0;return h.dropUndefinedKeys({filename:t,module:e(t),function:s.functionName||p.UNKNOWN_FUNCTION,colno:n,lineno:o,in_app:t?u.filenameIsInApp(t):void 0})}r(a,"callFrameToStackFrame"),l.callFrameToStackFrame=a,l.watchdogTimer=m},8666696284:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1795624184),h=d(5330804994),p=d(3610150206),m="baggage",a="sentry-",s=/^sentry-/,i=8192;function e(g){const S=n(g);if(!S)return;const c=Object.entries(S).reduce((v,[_,E])=>{if(_.match(s)){const b=_.slice(a.length);v[b]=E}return v},{});if(Object.keys(c).length>0)return c}r(e,"baggageHeaderToDynamicSamplingContext");function t(g){if(!g)return;const S=Object.entries(g).reduce((c,[v,_])=>(_&&(c[`${a}${v}`]=_),c),{});return f(S)}r(t,"dynamicSamplingContextToSentryBaggageHeader");function n(g){if(!(!g||!h.isString(g)&&!Array.isArray(g)))return Array.isArray(g)?g.reduce((S,c)=>{const v=o(c);for(const _ of Object.keys(v))S[_]=v[_];return S},{}):o(g)}r(n,"parseBaggageHeader");function o(g){return g.split(",").map(S=>S.split("=").map(c=>decodeURIComponent(c.trim()))).reduce((S,[c,v])=>(S[c]=v,S),{})}r(o,"baggageHeaderToObject");function f(g){if(Object.keys(g).length!==0)return Object.entries(g).reduce((S,[c,v],_)=>{const E=`${encodeURIComponent(c)}=${encodeURIComponent(v)}`,b=_===0?E:`${S},${E}`;return b.length>i?(u.DEBUG_BUILD&&p.logger.warn(`Not adding key: ${c} with val: ${v} to baggage header due to exceeding baggage size limits.`),S):b},"")}r(f,"objectToBaggageHeader"),l.BAGGAGE_HEADER_NAME=m,l.MAX_BAGGAGE_STRING_LENGTH=i,l.SENTRY_BAGGAGE_KEY_PREFIX=a,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=s,l.baggageHeaderToDynamicSamplingContext=e,l.dynamicSamplingContextToSentryBaggageHeader=t,l.parseBaggageHeader=n},9550996546:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5330804994),p=d(1108286465).GLOBAL_OBJ,m=80;function a(n,o={}){if(!n)return"<unknown>";try{let f=n;const g=5,S=[];let c=0,v=0;const _=" > ",E=_.length;let b;const T=Array.isArray(o)?o:o.keyAttrs,I=!Array.isArray(o)&&o.maxStringLength||m;for(;f&&c++<g&&(b=s(f,T),!(b==="html"||c>1&&v+S.length*E+b.length>=I));)S.push(b),v+=b.length,f=f.parentNode;return S.reverse().join(_)}catch{return"<unknown>"}}r(a,"htmlTreeAsString");function s(n,o){const f=n,g=[];let S,c,v,_,E;if(!f||!f.tagName)return"";if(p.HTMLElement&&f instanceof HTMLElement&&f.dataset){if(f.dataset.sentryComponent)return f.dataset.sentryComponent;if(f.dataset.sentryElement)return f.dataset.sentryElement}g.push(f.tagName.toLowerCase());const b=o&&o.length?o.filter(I=>f.getAttribute(I)).map(I=>[I,f.getAttribute(I)]):null;if(b&&b.length)b.forEach(I=>{g.push(`[${I[0]}="${I[1]}"]`)});else if(f.id&&g.push(`#${f.id}`),S=f.className,S&&u.isString(S))for(c=S.split(/\s+/),E=0;E<c.length;E++)g.push(`.${c[E]}`);const T=["aria-label","type","name","title","alt"];for(E=0;E<T.length;E++)v=T[E],_=f.getAttribute(v),_&&g.push(`[${v}="${_}"]`);return g.join("")}r(s,"_htmlElementAsString");function i(){try{return p.document.location.href}catch{return""}}r(i,"getLocationHref");function e(n){return p.document&&p.document.querySelector?p.document.querySelector(n):null}r(e,"getDomElement");function t(n){if(!p.HTMLElement)return null;let o=n;const f=5;for(let g=0;g<f;g++){if(!o)return null;if(o instanceof HTMLElement){if(o.dataset.sentryComponent)return o.dataset.sentryComponent;if(o.dataset.sentryElement)return o.dataset.sentryElement}o=o.parentNode}return null}r(t,"getComponentName"),l.getComponentName=t,l.getDomElement=e,l.getLocationHref=i,l.htmlTreeAsString=a},7961093924:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9137969200);async function h(p,m){return u._nullishCoalesce(p,m)}r(h,"_asyncNullishCoalesce"),l._asyncNullishCoalesce=h},6639909989:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});async function d(u){let h,p=u[0],m=1;for(;m<u.length;){const a=u[m],s=u[m+1];if(m+=2,(a==="optionalAccess"||a==="optionalCall")&&p==null)return;a==="access"||a==="optionalAccess"?(h=p,p=await s(p)):(a==="call"||a==="optionalCall")&&(p=await s((...i)=>p.call(h,...i)),h=void 0)}return p}r(d,"_asyncOptionalChain"),l._asyncOptionalChain=d},8823822214:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(6639909989);async function h(p){const m=await u._asyncOptionalChain(p);return m??!0}r(h,"_asyncOptionalChainDelete"),l._asyncOptionalChainDelete=h},9137969200:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(u,h){return u??h()}r(d,"_nullishCoalesce"),l._nullishCoalesce=d},3683597617:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(u){let h,p=u[0],m=1;for(;m<u.length;){const a=u[m],s=u[m+1];if(m+=2,(a==="optionalAccess"||a==="optionalCall")&&p==null)return;a==="access"||a==="optionalAccess"?(h=p,p=s(p)):(a==="call"||a==="optionalCall")&&(p=s((...i)=>p.call(h,...i)),h=void 0)}return p}r(d,"_optionalChain"),l._optionalChain=d},2677927218:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(3683597617);function h(p){const m=u._optionalChain(p);return m??!0}r(h,"_optionalChainDelete"),l._optionalChainDelete=h},4308130348:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(u){let h=[],p={};return{add(m,a){for(;h.length>=u;){const s=h.shift();s!==void 0&&delete p[s]}p[m]&&this.delete(m),h.push(m),p[m]=a},clear(){p={},h=[]},get(m){return p[m]},size(){return h.length},delete(m){if(!p[m])return!1;delete p[m];for(let a=0;a<h.length;a++)if(h[a]===m){h.splice(a,1);break}return!0}}}r(d,"makeFifoCache"),l.makeFifoCache=d},738620759:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(688958166),h=d(2174399055);function p(m,a,s){const i=[{type:"client_report"},{timestamp:s||h.dateTimestampInSeconds(),discarded_events:m}];return u.createEnvelope(a?{dsn:a}:{},[i])}r(p,"createClientReportEnvelope"),l.createClientReportEnvelope=p},9687986872:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(u){const h={};let p=0;for(;p<u.length;){const m=u.indexOf("=",p);if(m===-1)break;let a=u.indexOf(";",p);if(a===-1)a=u.length;else if(a<m){p=u.lastIndexOf(";",m-1)+1;continue}const s=u.slice(p,m).trim();if(h[s]===void 0){let i=u.slice(m+1,a).trim();i.charCodeAt(0)===34&&(i=i.slice(1,-1));try{h[s]=i.indexOf("%")!==-1?decodeURIComponent(i):i}catch{h[s]=i}}p=a+1}return h}r(d,"parseCookie"),l.parseCookie=d},1795624184:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},8314282351:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1795624184),h=d(3610150206),p=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function m(n){return n==="http"||n==="https"}r(m,"isValidProtocol");function a(n,o=!1){const{host:f,path:g,pass:S,port:c,projectId:v,protocol:_,publicKey:E}=n;return`${_}://${E}${o&&S?`:${S}`:""}@${f}${c?`:${c}`:""}/${g&&`${g}/`}${v}`}r(a,"dsnToString");function s(n){const o=p.exec(n);if(!o){h.consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});return}const[f,g,S="",c,v="",_]=o.slice(1);let E="",b=_;const T=b.split("/");if(T.length>1&&(E=T.slice(0,-1).join("/"),b=T.pop()),b){const I=b.match(/^\d+/);I&&(b=I[0])}return i({host:c,pass:S,path:E,projectId:b,port:v,protocol:f,publicKey:g})}r(s,"dsnFromString");function i(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}r(i,"dsnFromComponents");function e(n){if(!u.DEBUG_BUILD)return!0;const{port:o,projectId:f,protocol:g}=n;return["protocol","publicKey","host","projectId"].find(v=>n[v]?!1:(h.logger.error(`Invalid Sentry Dsn: ${v} missing`),!0))?!1:f.match(/^\d+$/)?m(g)?o&&isNaN(parseInt(o,10))?(h.logger.error(`Invalid Sentry Dsn: Invalid port ${o}`),!1):!0:(h.logger.error(`Invalid Sentry Dsn: Invalid protocol ${g}`),!1):(h.logger.error(`Invalid Sentry Dsn: Invalid projectId ${f}`),!1)}r(e,"validateDsn");function t(n){const o=typeof n=="string"?s(n):i(n);if(!(!o||!e(o)))return o}r(t,"makeDsn"),l.dsnFromString=s,l.dsnToString=a,l.makeDsn=t},1390308333:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}r(d,"isBrowserBundle");function u(){return"npm"}r(u,"getSDKSource"),l.getSDKSource=u,l.isBrowserBundle=d},688958166:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8314282351),h=d(6371465633),p=d(5247061117),m=d(1108286465);function a(T,I=[]){return[T,I]}r(a,"createEnvelope");function s(T,I){const[O,w]=T;return[O,[...w,I]]}r(s,"addItemToEnvelope");function i(T,I){const O=T[1];for(const w of O){const D=w[0].type;if(I(w,D))return!0}return!1}r(i,"forEachEnvelopeItem");function e(T,I){return i(T,(O,w)=>I.includes(w))}r(e,"envelopeContainsItemType");function t(T){return m.GLOBAL_OBJ.__SENTRY__&&m.GLOBAL_OBJ.__SENTRY__.encodePolyfill?m.GLOBAL_OBJ.__SENTRY__.encodePolyfill(T):new TextEncoder().encode(T)}r(t,"encodeUTF8");function n(T){return m.GLOBAL_OBJ.__SENTRY__&&m.GLOBAL_OBJ.__SENTRY__.decodePolyfill?m.GLOBAL_OBJ.__SENTRY__.decodePolyfill(T):new TextDecoder().decode(T)}r(n,"decodeUTF8");function o(T){const[I,O]=T;let w=JSON.stringify(I);function D(R){typeof w=="string"?w=typeof R=="string"?w+R:[t(w),R]:w.push(typeof R=="string"?t(R):R)}r(D,"append");for(const R of O){const[L,H]=R;if(D(`
${JSON.stringify(L)}
`),typeof H=="string"||H instanceof Uint8Array)D(H);else{let K;try{K=JSON.stringify(H)}catch{K=JSON.stringify(h.normalize(H))}D(K)}}return typeof w=="string"?w:f(w)}r(o,"serializeEnvelope");function f(T){const I=T.reduce((D,R)=>D+R.length,0),O=new Uint8Array(I);let w=0;for(const D of T)O.set(D,w),w+=D.length;return O}r(f,"concatBuffers");function g(T){let I=typeof T=="string"?t(T):T;function O(L){const H=I.subarray(0,L);return I=I.subarray(L+1),H}r(O,"readBinary");function w(){let L=I.indexOf(10);return L<0&&(L=I.length),JSON.parse(n(O(L)))}r(w,"readJson");const D=w(),R=[];for(;I.length;){const L=w(),H=typeof L.length=="number"?L.length:void 0;R.push([L,H?O(H):w()])}return[D,R]}r(g,"parseEnvelope");function S(T){return[{type:"span"},T]}r(S,"createSpanEnvelopeItem");function c(T){const I=typeof T.data=="string"?t(T.data):T.data;return[p.dropUndefinedKeys({type:"attachment",length:I.length,filename:T.filename,content_type:T.contentType,attachment_type:T.attachmentType}),I]}r(c,"createAttachmentEnvelopeItem");const v={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function _(T){return v[T]}r(_,"envelopeItemTypeToDataCategory");function E(T){if(!T||!T.sdk)return;const{name:I,version:O}=T.sdk;return{name:I,version:O}}r(E,"getSdkMetadataForEnvelopeHeader");function b(T,I,O,w){const D=T.sdkProcessingMetadata&&T.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:T.event_id,sent_at:new Date().toISOString(),...I&&{sdk:I},...!!O&&w&&{dsn:u.dsnToString(w)},...D&&{trace:p.dropUndefinedKeys({...D})}}}r(b,"createEventEnvelopeHeaders"),l.addItemToEnvelope=s,l.createAttachmentEnvelopeItem=c,l.createEnvelope=a,l.createEventEnvelopeHeaders=b,l.createSpanEnvelopeItem=S,l.envelopeContainsItemType=e,l.envelopeItemTypeToDataCategory=_,l.forEachEnvelopeItem=i,l.getSdkMetadataForEnvelopeHeader=E,l.parseEnvelope=g,l.serializeEnvelope=o},4759164024:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class d extends Error{constructor(h,p="warn"){super(h),this.message=h,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=p}}r(d,"SentryError"),l.SentryError=d},1705974933:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5330804994),h=d(4360077466),p=d(6371465633),m=d(5247061117);function a(g,S){return g(S.stack||"",1)}r(a,"parseStackFrames");function s(g,S){const c={type:S.name||S.constructor.name,value:S.message},v=a(g,S);return v.length&&(c.stacktrace={frames:v}),c}r(s,"exceptionFromError");function i(g){for(const S in g)if(Object.prototype.hasOwnProperty.call(g,S)){const c=g[S];if(c instanceof Error)return c}}r(i,"getErrorPropertyFromObject");function e(g){if("name"in g&&typeof g.name=="string"){let v=`'${g.name}' captured as exception`;return"message"in g&&typeof g.message=="string"&&(v+=` with message '${g.message}'`),v}else if("message"in g&&typeof g.message=="string")return g.message;const S=m.extractExceptionKeysForMessage(g);if(u.isErrorEvent(g))return`Event \`ErrorEvent\` captured as exception with message \`${g.message}\``;const c=t(g);return`${c&&c!=="Object"?`'${c}'`:"Object"} captured as exception with keys: ${S}`}r(e,"getMessageForObject");function t(g){try{const S=Object.getPrototypeOf(g);return S?S.constructor.name:void 0}catch{}}r(t,"getObjectClassName");function n(g,S,c,v){if(u.isError(c))return[c,void 0];if(S.synthetic=!0,u.isPlainObject(c)){const E=g&&g.getOptions().normalizeDepth,b={__serialized__:p.normalizeToSize(c,E)},T=i(c);if(T)return[T,b];const I=e(c),O=v&&v.syntheticException||new Error(I);return O.message=I,[O,b]}const _=v&&v.syntheticException||new Error(c);return _.message=`${c}`,[_,void 0]}r(n,"getException");function o(g,S,c,v){const E=v&&v.data&&v.data.mechanism||{handled:!0,type:"generic"},[b,T]=n(g,E,c,v),I={exception:{values:[s(S,b)]}};return T&&(I.extra=T),h.addExceptionTypeValue(I,void 0,void 0),h.addExceptionMechanism(I,E),{...I,event_id:v&&v.event_id}}r(o,"eventFromUnknownInput");function f(g,S,c="info",v,_){const E={event_id:v&&v.event_id,level:c};if(_&&v&&v.syntheticException){const b=a(g,v.syntheticException);b.length&&(E.exception={values:[{value:S,stacktrace:{frames:b}}]})}if(u.isParameterizedString(S)){const{__sentry_template_string__:b,__sentry_template_values__:T}=S;return E.logentry={message:b,params:T},E}return E.message=S,E}r(f,"eventFromMessage"),l.eventFromMessage=f,l.eventFromUnknownInput=o,l.exceptionFromError=s,l.parseStackFrames=a},7563271614:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(4916261515),h=d(9550996546),p=d(8314282351),m=d(4759164024),a=d(1108286465),s=d(3619233697),i=d(3178410512),e=d(5878142463),t=d(5817852989),n=d(7839211009),o=d(5330804994),f=d(4304701770),g=d(3610150206),S=d(47787884),c=d(4360077466),v=d(1552363198),_=d(6371465633),E=d(5247061117),b=d(4764604189),T=d(3193811597),I=d(4846555271),O=d(5043703765),w=d(9955566551),D=d(6005876151),R=d(9996838991),L=d(8265793926),H=d(2435760602),K=d(2174399055),ee=d(6123212092),q=d(1390308333),ae=d(688958166),ce=d(738620759),Te=d(277240735),ke=d(8666696284),tt=d(7216756807),At=d(4308130348),Be=d(1705974933),$e=d(999571021),Ze=d(6852308275),Je=d(7961093924),dt=d(6639909989),Ot=d(8823822214),Nt=d(9137969200),Ve=d(3683597617),He=d(2677927218),ct=d(6250807085),yt=d(7384544743);l.applyAggregateErrorsToEvent=u.applyAggregateErrorsToEvent,l.getComponentName=h.getComponentName,l.getDomElement=h.getDomElement,l.getLocationHref=h.getLocationHref,l.htmlTreeAsString=h.htmlTreeAsString,l.dsnFromString=p.dsnFromString,l.dsnToString=p.dsnToString,l.makeDsn=p.makeDsn,l.SentryError=m.SentryError,l.GLOBAL_OBJ=a.GLOBAL_OBJ,l.getGlobalSingleton=a.getGlobalSingleton,l.addConsoleInstrumentationHandler=s.addConsoleInstrumentationHandler,l.addFetchInstrumentationHandler=i.addFetchInstrumentationHandler,l.addGlobalErrorInstrumentationHandler=e.addGlobalErrorInstrumentationHandler,l.addGlobalUnhandledRejectionInstrumentationHandler=t.addGlobalUnhandledRejectionInstrumentationHandler,l.addHandler=n.addHandler,l.maybeInstrument=n.maybeInstrument,l.resetInstrumentationHandlers=n.resetInstrumentationHandlers,l.triggerHandlers=n.triggerHandlers,l.isDOMError=o.isDOMError,l.isDOMException=o.isDOMException,l.isElement=o.isElement,l.isError=o.isError,l.isErrorEvent=o.isErrorEvent,l.isEvent=o.isEvent,l.isInstanceOf=o.isInstanceOf,l.isParameterizedString=o.isParameterizedString,l.isPlainObject=o.isPlainObject,l.isPrimitive=o.isPrimitive,l.isRegExp=o.isRegExp,l.isString=o.isString,l.isSyntheticEvent=o.isSyntheticEvent,l.isThenable=o.isThenable,l.isVueViewModel=o.isVueViewModel,l.isBrowser=f.isBrowser,l.CONSOLE_LEVELS=g.CONSOLE_LEVELS,l.consoleSandbox=g.consoleSandbox,l.logger=g.logger,l.originalConsoleMethods=g.originalConsoleMethods,l.memoBuilder=S.memoBuilder,l.addContextToFrame=c.addContextToFrame,l.addExceptionMechanism=c.addExceptionMechanism,l.addExceptionTypeValue=c.addExceptionTypeValue,l.arrayify=c.arrayify,l.checkOrSetAlreadyCaught=c.checkOrSetAlreadyCaught,l.getEventDescription=c.getEventDescription,l.parseSemver=c.parseSemver,l.uuid4=c.uuid4,l.dynamicRequire=v.dynamicRequire,l.isNodeEnv=v.isNodeEnv,l.loadModule=v.loadModule,l.normalize=_.normalize,l.normalizeToSize=_.normalizeToSize,l.normalizeUrlToBase=_.normalizeUrlToBase,l.addNonEnumerableProperty=E.addNonEnumerableProperty,l.convertToPlainObject=E.convertToPlainObject,l.dropUndefinedKeys=E.dropUndefinedKeys,l.extractExceptionKeysForMessage=E.extractExceptionKeysForMessage,l.fill=E.fill,l.getOriginalFunction=E.getOriginalFunction,l.markFunctionWrapped=E.markFunctionWrapped,l.objectify=E.objectify,l.urlEncode=E.urlEncode,l.basename=b.basename,l.dirname=b.dirname,l.isAbsolute=b.isAbsolute,l.join=b.join,l.normalizePath=b.normalizePath,l.relative=b.relative,l.resolve=b.resolve,l.makePromiseBuffer=T.makePromiseBuffer,l.DEFAULT_USER_INCLUDES=I.DEFAULT_USER_INCLUDES,l.addRequestDataToEvent=I.addRequestDataToEvent,l.extractPathForTransaction=I.extractPathForTransaction,l.extractRequestData=I.extractRequestData,l.winterCGHeadersToDict=I.winterCGHeadersToDict,l.winterCGRequestToRequestData=I.winterCGRequestToRequestData,l.severityLevelFromString=O.severityLevelFromString,l.validSeverityLevels=O.validSeverityLevels,l.UNKNOWN_FUNCTION=w.UNKNOWN_FUNCTION,l.createStackParser=w.createStackParser,l.getFunctionName=w.getFunctionName,l.stackParserFromStackParserOptions=w.stackParserFromStackParserOptions,l.stripSentryFramesAndReverse=w.stripSentryFramesAndReverse,l.filenameIsInApp=D.filenameIsInApp,l.node=D.node,l.nodeStackLineParser=D.nodeStackLineParser,l.isMatchingPattern=R.isMatchingPattern,l.safeJoin=R.safeJoin,l.snipLine=R.snipLine,l.stringMatchesSomePattern=R.stringMatchesSomePattern,l.truncate=R.truncate,l.isNativeFetch=L.isNativeFetch,l.supportsDOMError=L.supportsDOMError,l.supportsDOMException=L.supportsDOMException,l.supportsErrorEvent=L.supportsErrorEvent,l.supportsFetch=L.supportsFetch,l.supportsNativeFetch=L.supportsNativeFetch,l.supportsReferrerPolicy=L.supportsReferrerPolicy,l.supportsReportingObserver=L.supportsReportingObserver,l.SyncPromise=H.SyncPromise,l.rejectedSyncPromise=H.rejectedSyncPromise,l.resolvedSyncPromise=H.resolvedSyncPromise,Object.defineProperty(l,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>K._browserPerformanceTimeOriginMode}),l.browserPerformanceTimeOrigin=K.browserPerformanceTimeOrigin,l.dateTimestampInSeconds=K.dateTimestampInSeconds,l.timestampInSeconds=K.timestampInSeconds,l.TRACEPARENT_REGEXP=ee.TRACEPARENT_REGEXP,l.extractTraceparentData=ee.extractTraceparentData,l.generateSentryTraceHeader=ee.generateSentryTraceHeader,l.propagationContextFromHeaders=ee.propagationContextFromHeaders,l.getSDKSource=q.getSDKSource,l.isBrowserBundle=q.isBrowserBundle,l.addItemToEnvelope=ae.addItemToEnvelope,l.createAttachmentEnvelopeItem=ae.createAttachmentEnvelopeItem,l.createEnvelope=ae.createEnvelope,l.createEventEnvelopeHeaders=ae.createEventEnvelopeHeaders,l.createSpanEnvelopeItem=ae.createSpanEnvelopeItem,l.envelopeContainsItemType=ae.envelopeContainsItemType,l.envelopeItemTypeToDataCategory=ae.envelopeItemTypeToDataCategory,l.forEachEnvelopeItem=ae.forEachEnvelopeItem,l.getSdkMetadataForEnvelopeHeader=ae.getSdkMetadataForEnvelopeHeader,l.parseEnvelope=ae.parseEnvelope,l.serializeEnvelope=ae.serializeEnvelope,l.createClientReportEnvelope=ce.createClientReportEnvelope,l.DEFAULT_RETRY_AFTER=Te.DEFAULT_RETRY_AFTER,l.disabledUntil=Te.disabledUntil,l.isRateLimited=Te.isRateLimited,l.parseRetryAfterHeader=Te.parseRetryAfterHeader,l.updateRateLimits=Te.updateRateLimits,l.BAGGAGE_HEADER_NAME=ke.BAGGAGE_HEADER_NAME,l.MAX_BAGGAGE_STRING_LENGTH=ke.MAX_BAGGAGE_STRING_LENGTH,l.SENTRY_BAGGAGE_KEY_PREFIX=ke.SENTRY_BAGGAGE_KEY_PREFIX,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=ke.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,l.baggageHeaderToDynamicSamplingContext=ke.baggageHeaderToDynamicSamplingContext,l.dynamicSamplingContextToSentryBaggageHeader=ke.dynamicSamplingContextToSentryBaggageHeader,l.parseBaggageHeader=ke.parseBaggageHeader,l.getNumberOfUrlSegments=tt.getNumberOfUrlSegments,l.getSanitizedUrlString=tt.getSanitizedUrlString,l.parseUrl=tt.parseUrl,l.stripUrlQueryAndFragment=tt.stripUrlQueryAndFragment,l.makeFifoCache=At.makeFifoCache,l.eventFromMessage=Be.eventFromMessage,l.eventFromUnknownInput=Be.eventFromUnknownInput,l.exceptionFromError=Be.exceptionFromError,l.parseStackFrames=Be.parseStackFrames,l.callFrameToStackFrame=$e.callFrameToStackFrame,l.watchdogTimer=$e.watchdogTimer,l.LRUMap=Ze.LRUMap,l._asyncNullishCoalesce=Je._asyncNullishCoalesce,l._asyncOptionalChain=dt._asyncOptionalChain,l._asyncOptionalChainDelete=Ot._asyncOptionalChainDelete,l._nullishCoalesce=Nt._nullishCoalesce,l._optionalChain=Ve._optionalChain,l._optionalChainDelete=He._optionalChainDelete,l.escapeStringForRegex=ct.escapeStringForRegex,l.supportsHistory=yt.supportsHistory},3619233697:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(3610150206),h=d(5247061117),p=d(1108286465),m=d(7839211009);function a(i){const e="console";m.addHandler(e,i),m.maybeInstrument(e,s)}r(a,"addConsoleInstrumentationHandler");function s(){"console"in p.GLOBAL_OBJ&&u.CONSOLE_LEVELS.forEach(function(i){i in p.GLOBAL_OBJ.console&&h.fill(p.GLOBAL_OBJ.console,i,function(e){return u.originalConsoleMethods[i]=e,function(...t){const n={args:t,level:i};m.triggerHandlers("console",n);const o=u.originalConsoleMethods[i];o&&o.apply(p.GLOBAL_OBJ.console,t)}})})}r(s,"instrumentConsole"),l.addConsoleInstrumentationHandler=a},3178410512:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5247061117),h=d(8265793926),p=d(2174399055),m=d(1108286465),a=d(7839211009);function s(o){const f="fetch";a.addHandler(f,o),a.maybeInstrument(f,i)}r(s,"addFetchInstrumentationHandler");function i(){h.supportsNativeFetch()&&u.fill(m.GLOBAL_OBJ,"fetch",function(o){return function(...f){const{method:g,url:S}=n(f),c={args:f,fetchData:{method:g,url:S},startTimestamp:p.timestampInSeconds()*1e3};return a.triggerHandlers("fetch",{...c}),o.apply(m.GLOBAL_OBJ,f).then(v=>{const _={...c,endTimestamp:p.timestampInSeconds()*1e3,response:v};return a.triggerHandlers("fetch",_),v},v=>{const _={...c,endTimestamp:p.timestampInSeconds()*1e3,error:v};throw a.triggerHandlers("fetch",_),v})}})}r(i,"instrumentFetch");function e(o,f){return!!o&&typeof o=="object"&&!!o[f]}r(e,"hasProp");function t(o){return typeof o=="string"?o:o?e(o,"url")?o.url:o.toString?o.toString():"":""}r(t,"getUrlFromResource");function n(o){if(o.length===0)return{method:"GET",url:""};if(o.length===2){const[g,S]=o;return{url:t(g),method:e(S,"method")?String(S.method).toUpperCase():"GET"}}const f=o[0];return{url:t(f),method:e(f,"method")?String(f.method).toUpperCase():"GET"}}r(n,"parseFetchArgs"),l.addFetchInstrumentationHandler=s,l.parseFetchArgs=n},5878142463:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1108286465),h=d(7839211009);let p=null;function m(s){const i="error";h.addHandler(i,s),h.maybeInstrument(i,a)}r(m,"addGlobalErrorInstrumentationHandler");function a(){p=u.GLOBAL_OBJ.onerror,u.GLOBAL_OBJ.onerror=function(s,i,e,t,n){const o={column:t,error:n,line:e,msg:s,url:i};return h.triggerHandlers("error",o),p&&!p.__SENTRY_LOADER__?p.apply(this,arguments):!1},u.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}r(a,"instrumentError"),l.addGlobalErrorInstrumentationHandler=m},5817852989:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1108286465),h=d(7839211009);let p=null;function m(s){const i="unhandledrejection";h.addHandler(i,s),h.maybeInstrument(i,a)}r(m,"addGlobalUnhandledRejectionInstrumentationHandler");function a(){p=u.GLOBAL_OBJ.onunhandledrejection,u.GLOBAL_OBJ.onunhandledrejection=function(s){const i=s;return h.triggerHandlers("unhandledrejection",i),p&&!p.__SENTRY_LOADER__?p.apply(this,arguments):!0},u.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}r(a,"instrumentUnhandledRejection"),l.addGlobalUnhandledRejectionInstrumentationHandler=m},7839211009:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1795624184),h=d(3610150206),p=d(9955566551),m={},a={};function s(n,o){m[n]=m[n]||[],m[n].push(o)}r(s,"addHandler");function i(){Object.keys(m).forEach(n=>{m[n]=void 0})}r(i,"resetInstrumentationHandlers");function e(n,o){a[n]||(o(),a[n]=!0)}r(e,"maybeInstrument");function t(n,o){const f=n&&m[n];if(f)for(const g of f)try{g(o)}catch(S){u.DEBUG_BUILD&&h.logger.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${p.getFunctionName(g)}
Error:`,S)}}r(t,"triggerHandlers"),l.addHandler=s,l.maybeInstrument=e,l.resetInstrumentationHandlers=i,l.triggerHandlers=t},5330804994:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=Object.prototype.toString;function u(_){switch(d.call(_)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return c(_,Error)}}r(u,"isError");function h(_,E){return d.call(_)===`[object ${E}]`}r(h,"isBuiltin");function p(_){return h(_,"ErrorEvent")}r(p,"isErrorEvent");function m(_){return h(_,"DOMError")}r(m,"isDOMError");function a(_){return h(_,"DOMException")}r(a,"isDOMException");function s(_){return h(_,"String")}r(s,"isString");function i(_){return typeof _=="object"&&_!==null&&"__sentry_template_string__"in _&&"__sentry_template_values__"in _}r(i,"isParameterizedString");function e(_){return _===null||i(_)||typeof _!="object"&&typeof _!="function"}r(e,"isPrimitive");function t(_){return h(_,"Object")}r(t,"isPlainObject");function n(_){return typeof Event<"u"&&c(_,Event)}r(n,"isEvent");function o(_){return typeof Element<"u"&&c(_,Element)}r(o,"isElement");function f(_){return h(_,"RegExp")}r(f,"isRegExp");function g(_){return Boolean(_&&_.then&&typeof _.then=="function")}r(g,"isThenable");function S(_){return t(_)&&"nativeEvent"in _&&"preventDefault"in _&&"stopPropagation"in _}r(S,"isSyntheticEvent");function c(_,E){try{return _ instanceof E}catch{return!1}}r(c,"isInstanceOf");function v(_){return!!(typeof _=="object"&&_!==null&&(_.__isVue||_._isVue))}r(v,"isVueViewModel"),l.isDOMError=m,l.isDOMException=a,l.isElement=o,l.isError=u,l.isErrorEvent=p,l.isEvent=n,l.isInstanceOf=c,l.isParameterizedString=i,l.isPlainObject=t,l.isPrimitive=e,l.isRegExp=f,l.isString=s,l.isSyntheticEvent=S,l.isThenable=g,l.isVueViewModel=v},4304701770:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1552363198),h=d(1108286465);function p(){return typeof window<"u"&&(!u.isNodeEnv()||m())}r(p,"isBrowser");function m(){return h.GLOBAL_OBJ.process!==void 0&&h.GLOBAL_OBJ.process.type==="renderer"}r(m,"isElectronNodeRenderer"),l.isBrowser=p},3610150206:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1795624184),h=d(1108286465),p="Sentry Logger ",m=["debug","info","warn","error","log","assert","trace"],a={};function s(t){if(!("console"in h.GLOBAL_OBJ))return t();const n=h.GLOBAL_OBJ.console,o={},f=Object.keys(a);f.forEach(g=>{const S=a[g];o[g]=n[g],n[g]=S});try{return t()}finally{f.forEach(g=>{n[g]=o[g]})}}r(s,"consoleSandbox");function i(){let t=!1;const n={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return u.DEBUG_BUILD?m.forEach(o=>{n[o]=(...f)=>{t&&s(()=>{h.GLOBAL_OBJ.console[o](`${p}[${o}]:`,...f)})}}):m.forEach(o=>{n[o]=()=>{}}),n}r(i,"makeLogger");const e=i();l.CONSOLE_LEVELS=m,l.consoleSandbox=s,l.logger=e,l.originalConsoleMethods=a},6852308275:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class d{constructor(h){this._maxSize=h,this._cache=new Map}get size(){return this._cache.size}get(h){const p=this._cache.get(h);if(p!==void 0)return this._cache.delete(h),this._cache.set(h,p),p}set(h,p){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(h,p)}remove(h){const p=this._cache.get(h);return p&&this._cache.delete(h),p}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const h=[];return this._cache.forEach(p=>h.push(p)),h}}r(d,"LRUMap"),l.LRUMap=d},47787884:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(){const u=typeof WeakSet=="function",h=u?new WeakSet:[];function p(a){if(u)return h.has(a)?!0:(h.add(a),!1);for(let s=0;s<h.length;s++)if(h[s]===a)return!0;return h.push(a),!1}r(p,"memoize");function m(a){if(u)h.delete(a);else for(let s=0;s<h.length;s++)if(h[s]===a){h.splice(s,1);break}}return r(m,"unmemoize"),[p,m]}r(d,"memoBuilder"),l.memoBuilder=d},4360077466:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5247061117),h=d(9996838991),p=d(1108286465);function m(){const S=p.GLOBAL_OBJ,c=S.crypto||S.msCrypto;let v=r(()=>Math.random()*16,"getRandomByte");try{if(c&&c.randomUUID)return c.randomUUID().replace(/-/g,"");c&&c.getRandomValues&&(v=r(()=>{const _=new Uint8Array(1);return c.getRandomValues(_),_[0]},"getRandomByte"))}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,_=>(_^(v()&15)>>_/4).toString(16))}r(m,"uuid4");function a(S){return S.exception&&S.exception.values?S.exception.values[0]:void 0}r(a,"getFirstException");function s(S){const{message:c,event_id:v}=S;if(c)return c;const _=a(S);return _?_.type&&_.value?`${_.type}: ${_.value}`:_.type||_.value||v||"<unknown>":v||"<unknown>"}r(s,"getEventDescription");function i(S,c,v){const _=S.exception=S.exception||{},E=_.values=_.values||[],b=E[0]=E[0]||{};b.value||(b.value=c||""),b.type||(b.type=v||"Error")}r(i,"addExceptionTypeValue");function e(S,c){const v=a(S);if(!v)return;const _={type:"generic",handled:!0},E=v.mechanism;if(v.mechanism={..._,...E,...c},c&&"data"in c){const b={...E&&E.data,...c.data};v.mechanism.data=b}}r(e,"addExceptionMechanism");const t=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function n(S){const c=S.match(t)||[],v=parseInt(c[1],10),_=parseInt(c[2],10),E=parseInt(c[3],10);return{buildmetadata:c[5],major:isNaN(v)?void 0:v,minor:isNaN(_)?void 0:_,patch:isNaN(E)?void 0:E,prerelease:c[4]}}r(n,"parseSemver");function o(S,c,v=5){if(c.lineno===void 0)return;const _=S.length,E=Math.max(Math.min(_-1,c.lineno-1),0);c.pre_context=S.slice(Math.max(0,E-v),E).map(b=>h.snipLine(b,0)),c.context_line=h.snipLine(S[Math.min(_-1,E)],c.colno||0),c.post_context=S.slice(Math.min(E+1,_),E+1+v).map(b=>h.snipLine(b,0))}r(o,"addContextToFrame");function f(S){if(S&&S.__sentry_captured__)return!0;try{u.addNonEnumerableProperty(S,"__sentry_captured__",!0)}catch{}return!1}r(f,"checkOrSetAlreadyCaught");function g(S){return Array.isArray(S)?S:[S]}r(g,"arrayify"),l.addContextToFrame=o,l.addExceptionMechanism=e,l.addExceptionTypeValue=i,l.arrayify=g,l.checkOrSetAlreadyCaught=f,l.getEventDescription=s,l.parseSemver=n,l.uuid4=m},6005876151:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9955566551);function h(a,s=!1){return!(s||a&&!a.startsWith("/")&&!a.match(/^[A-Z]:/)&&!a.startsWith(".")&&!a.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&a!==void 0&&!a.includes("node_modules/")}r(h,"filenameIsInApp");function p(a){const s=/^\s*[-]{4,}$/,i=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return e=>{const t=e.match(i);if(t){let n,o,f,g,S;if(t[1]){f=t[1];let _=f.lastIndexOf(".");if(f[_-1]==="."&&_--,_>0){n=f.slice(0,_),o=f.slice(_+1);const E=n.indexOf(".Module");E>0&&(f=f.slice(E+1),n=n.slice(0,E))}g=void 0}o&&(g=n,S=o),o==="<anonymous>"&&(S=void 0,f=void 0),f===void 0&&(S=S||u.UNKNOWN_FUNCTION,f=g?`${g}.${S}`:S);let c=t[2]&&t[2].startsWith("file://")?t[2].slice(7):t[2];const v=t[5]==="native";return c&&c.match(/\/[A-Z]:/)&&(c=c.slice(1)),!c&&t[5]&&!v&&(c=t[5]),{filename:c,module:a?a(c):void 0,function:f,lineno:parseInt(t[3],10)||void 0,colno:parseInt(t[4],10)||void 0,in_app:h(c,v)}}if(e.match(s))return{filename:e}}}r(p,"node");function m(a){return[90,p(a)]}r(m,"nodeStackLineParser"),l.filenameIsInApp=h,l.node=p,l.nodeStackLineParser=m},1552363198:(B,l,d)=>{B=d.nmd(B),Object.defineProperty(l,"__esModule",{value:!0});const u=d(1390308333);function h(){return!u.isBrowserBundle()&&Object.prototype.toString.call(0)==="[object process]"}r(h,"isNodeEnv");function p(a,s){return a.require(s)}r(p,"dynamicRequire");function m(a){let s;try{s=p(B,a)}catch{}try{const{cwd:i}=p(B,"process");s=p(B,`${i()}/node_modules/${a}`)}catch{}return s}r(m,"loadModule"),l.dynamicRequire=p,l.isNodeEnv=h,l.loadModule=m},6371465633:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5330804994),h=d(47787884),p=d(5247061117),m=d(9955566551);function a(g,S=100,c=1/0){try{return i("",g,S,c)}catch(v){return{ERROR:`**non-serializable** (${v})`}}}r(a,"normalize");function s(g,S=3,c=100*1024){const v=a(g,S);return o(v)>c?s(g,S-1,c):v}r(s,"normalizeToSize");function i(g,S,c=1/0,v=1/0,_=h.memoBuilder()){const[E,b]=_;if(S==null||["number","boolean","string"].includes(typeof S)&&!Number.isNaN(S))return S;const T=e(g,S);if(!T.startsWith("[object "))return T;if(S.__sentry_skip_normalization__)return S;const I=typeof S.__sentry_override_normalization_depth__=="number"?S.__sentry_override_normalization_depth__:c;if(I===0)return T.replace("object ","");if(E(S))return"[Circular ~]";const O=S;if(O&&typeof O.toJSON=="function")try{const L=O.toJSON();return i("",L,I-1,v,_)}catch{}const w=Array.isArray(S)?[]:{};let D=0;const R=p.convertToPlainObject(S);for(const L in R){if(!Object.prototype.hasOwnProperty.call(R,L))continue;if(D>=v){w[L]="[MaxProperties ~]";break}const H=R[L];w[L]=i(L,H,I-1,v,_),D++}return b(S),w}r(i,"visit");function e(g,S){try{if(g==="domain"&&S&&typeof S=="object"&&S._events)return"[Domain]";if(g==="domainEmitter")return"[DomainEmitter]";if(typeof d.g<"u"&&S===d.g)return"[Global]";if(typeof window<"u"&&S===window)return"[Window]";if(typeof document<"u"&&S===document)return"[Document]";if(u.isVueViewModel(S))return"[VueViewModel]";if(u.isSyntheticEvent(S))return"[SyntheticEvent]";if(typeof S=="number"&&S!==S)return"[NaN]";if(typeof S=="function")return`[Function: ${m.getFunctionName(S)}]`;if(typeof S=="symbol")return`[${String(S)}]`;if(typeof S=="bigint")return`[BigInt: ${String(S)}]`;const c=t(S);return/^HTML(\w*)Element$/.test(c)?`[HTMLElement: ${c}]`:`[object ${c}]`}catch(c){return`**non-serializable** (${c})`}}r(e,"stringifyValue");function t(g){const S=Object.getPrototypeOf(g);return S?S.constructor.name:"null prototype"}r(t,"getConstructorName");function n(g){return~-encodeURI(g).split(/%..|./).length}r(n,"utf8Length");function o(g){return n(JSON.stringify(g))}r(o,"jsonSize");function f(g,S){const c=S.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let v=g;try{v=decodeURI(g)}catch{}return v.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${c}/*`,"ig"),"app:///")}r(f,"normalizeUrlToBase"),l.normalize=a,l.normalizeToSize=s,l.normalizeUrlToBase=f},5247061117:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9550996546),h=d(1795624184),p=d(5330804994),m=d(3610150206),a=d(9996838991);function s(b,T,I){if(!(T in b))return;const O=b[T],w=I(O);typeof w=="function"&&e(w,O),b[T]=w}r(s,"fill");function i(b,T,I){try{Object.defineProperty(b,T,{value:I,writable:!0,configurable:!0})}catch{h.DEBUG_BUILD&&m.logger.log(`Failed to add non-enumerable property "${T}" to object`,b)}}r(i,"addNonEnumerableProperty");function e(b,T){try{const I=T.prototype||{};b.prototype=T.prototype=I,i(b,"__sentry_original__",T)}catch{}}r(e,"markFunctionWrapped");function t(b){return b.__sentry_original__}r(t,"getOriginalFunction");function n(b){return Object.keys(b).map(T=>`${encodeURIComponent(T)}=${encodeURIComponent(b[T])}`).join("&")}r(n,"urlEncode");function o(b){if(p.isError(b))return{message:b.message,name:b.name,stack:b.stack,...g(b)};if(p.isEvent(b)){const T={type:b.type,target:f(b.target),currentTarget:f(b.currentTarget),...g(b)};return typeof CustomEvent<"u"&&p.isInstanceOf(b,CustomEvent)&&(T.detail=b.detail),T}else return b}r(o,"convertToPlainObject");function f(b){try{return p.isElement(b)?u.htmlTreeAsString(b):Object.prototype.toString.call(b)}catch{return"<unknown>"}}r(f,"serializeEventTarget");function g(b){if(typeof b=="object"&&b!==null){const T={};for(const I in b)Object.prototype.hasOwnProperty.call(b,I)&&(T[I]=b[I]);return T}else return{}}r(g,"getOwnProperties");function S(b,T=40){const I=Object.keys(o(b));if(I.sort(),!I.length)return"[object has no keys]";if(I[0].length>=T)return a.truncate(I[0],T);for(let O=I.length;O>0;O--){const w=I.slice(0,O).join(", ");if(!(w.length>T))return O===I.length?w:a.truncate(w,T)}return""}r(S,"extractExceptionKeysForMessage");function c(b){return v(b,new Map)}r(c,"dropUndefinedKeys");function v(b,T){if(_(b)){const I=T.get(b);if(I!==void 0)return I;const O={};T.set(b,O);for(const w of Object.keys(b))typeof b[w]<"u"&&(O[w]=v(b[w],T));return O}if(Array.isArray(b)){const I=T.get(b);if(I!==void 0)return I;const O=[];return T.set(b,O),b.forEach(w=>{O.push(v(w,T))}),O}return b}r(v,"_dropUndefinedKeys");function _(b){if(!p.isPlainObject(b))return!1;try{const T=Object.getPrototypeOf(b).constructor.name;return!T||T==="Object"}catch{return!0}}r(_,"isPojo");function E(b){let T;switch(!0){case b==null:T=new String(b);break;case(typeof b=="symbol"||typeof b=="bigint"):T=Object(b);break;case p.isPrimitive(b):T=new b.constructor(b);break;default:T=b;break}return T}r(E,"objectify"),l.addNonEnumerableProperty=i,l.convertToPlainObject=o,l.dropUndefinedKeys=c,l.extractExceptionKeysForMessage=S,l.fill=s,l.getOriginalFunction=t,l.markFunctionWrapped=e,l.objectify=E,l.urlEncode=n},4764604189:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(o,f){let g=0;for(let S=o.length-1;S>=0;S--){const c=o[S];c==="."?o.splice(S,1):c===".."?(o.splice(S,1),g++):g&&(o.splice(S,1),g--)}if(f)for(;g--;g)o.unshift("..");return o}r(d,"normalizeArray");const u=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function h(o){const f=o.length>1024?`<truncated>${o.slice(-1024)}`:o,g=u.exec(f);return g?g.slice(1):[]}r(h,"splitPath");function p(...o){let f="",g=!1;for(let S=o.length-1;S>=-1&&!g;S--){const c=S>=0?o[S]:"/";c&&(f=`${c}/${f}`,g=c.charAt(0)==="/")}return f=d(f.split("/").filter(S=>!!S),!g).join("/"),(g?"/":"")+f||"."}r(p,"resolve");function m(o){let f=0;for(;f<o.length&&o[f]==="";f++);let g=o.length-1;for(;g>=0&&o[g]==="";g--);return f>g?[]:o.slice(f,g-f+1)}r(m,"trim");function a(o,f){o=p(o).slice(1),f=p(f).slice(1);const g=m(o.split("/")),S=m(f.split("/")),c=Math.min(g.length,S.length);let v=c;for(let E=0;E<c;E++)if(g[E]!==S[E]){v=E;break}let _=[];for(let E=v;E<g.length;E++)_.push("..");return _=_.concat(S.slice(v)),_.join("/")}r(a,"relative");function s(o){const f=i(o),g=o.slice(-1)==="/";let S=d(o.split("/").filter(c=>!!c),!f).join("/");return!S&&!f&&(S="."),S&&g&&(S+="/"),(f?"/":"")+S}r(s,"normalizePath");function i(o){return o.charAt(0)==="/"}r(i,"isAbsolute");function e(...o){return s(o.join("/"))}r(e,"join");function t(o){const f=h(o),g=f[0];let S=f[1];return!g&&!S?".":(S&&(S=S.slice(0,S.length-1)),g+S)}r(t,"dirname");function n(o,f){let g=h(o)[2];return f&&g.slice(f.length*-1)===f&&(g=g.slice(0,g.length-f.length)),g}r(n,"basename"),l.basename=n,l.dirname=t,l.isAbsolute=i,l.join=e,l.normalizePath=s,l.relative=a,l.resolve=p},3193811597:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(4759164024),h=d(2435760602);function p(m){const a=[];function s(){return m===void 0||a.length<m}r(s,"isReady");function i(n){return a.splice(a.indexOf(n),1)[0]}r(i,"remove");function e(n){if(!s())return h.rejectedSyncPromise(new u.SentryError("Not adding Promise because buffer limit was reached."));const o=n();return a.indexOf(o)===-1&&a.push(o),o.then(()=>i(o)).then(null,()=>i(o).then(null,()=>{})),o}r(e,"add");function t(n){return new h.SyncPromise((o,f)=>{let g=a.length;if(!g)return o(!0);const S=setTimeout(()=>{n&&n>0&&o(!1)},n);a.forEach(c=>{h.resolvedSyncPromise(c).then(()=>{--g||(clearTimeout(S),o(!0))},f)})})}return r(t,"drain"),{$:a,add:e,drain:t}}r(p,"makePromiseBuffer"),l.makePromiseBuffer=p},277240735:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=60*1e3;function u(a,s=Date.now()){const i=parseInt(`${a}`,10);if(!isNaN(i))return i*1e3;const e=Date.parse(`${a}`);return isNaN(e)?d:e-s}r(u,"parseRetryAfterHeader");function h(a,s){return a[s]||a.all||0}r(h,"disabledUntil");function p(a,s,i=Date.now()){return h(a,s)>i}r(p,"isRateLimited");function m(a,{statusCode:s,headers:i},e=Date.now()){const t={...a},n=i&&i["x-sentry-rate-limits"],o=i&&i["retry-after"];if(n)for(const f of n.trim().split(",")){const[g,S,,,c]=f.split(":",5),v=parseInt(g,10),_=(isNaN(v)?60:v)*1e3;if(!S)t.all=e+_;else for(const E of S.split(";"))E==="metric_bucket"?(!c||c.split(";").includes("custom"))&&(t[E]=e+_):t[E]=e+_}else o?t.all=e+u(o,e):s===429&&(t.all=e+60*1e3);return t}r(m,"updateRateLimits"),l.DEFAULT_RETRY_AFTER=d,l.disabledUntil=h,l.isRateLimited=p,l.parseRetryAfterHeader=u,l.updateRateLimits=m},4846555271:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(9687986872),h=d(1795624184),p=d(5330804994),m=d(3610150206),a=d(6371465633),s=d(7216756807),i={ip:!1,request:!0,transaction:!0,user:!0},e=["cookies","data","headers","method","query_string","url"],t=["id","username","email"];function n(E,b={}){const T=E.method&&E.method.toUpperCase();let I="",O="url";b.customRoute||E.route?(I=b.customRoute||`${E.baseUrl||""}${E.route&&E.route.path}`,O="route"):(E.originalUrl||E.url)&&(I=s.stripUrlQueryAndFragment(E.originalUrl||E.url||""));let w="";return b.method&&T&&(w+=T),b.method&&b.path&&(w+=" "),b.path&&I&&(w+=I),[w,O]}r(n,"extractPathForTransaction");function o(E,b){switch(b){case"path":return n(E,{path:!0})[0];case"handler":return E.route&&E.route.stack&&E.route.stack[0]&&E.route.stack[0].name||"<anonymous>";case"methodPath":default:{const T=E._reconstructedRoute?E._reconstructedRoute:void 0;return n(E,{path:!0,method:!0,customRoute:T})[0]}}}r(o,"extractTransaction");function f(E,b){const T={};return(Array.isArray(b)?b:t).forEach(O=>{E&&O in E&&(T[O]=E[O])}),T}r(f,"extractUserData");function g(E,b){const{include:T=e}=b||{},I={},O=E.headers||{},w=E.method,D=O.host||E.hostname||E.host||"<no host>",R=E.protocol==="https"||E.socket&&E.socket.encrypted?"https":"http",L=E.originalUrl||E.url||"",H=L.startsWith(R)?L:`${R}://${D}${L}`;return T.forEach(K=>{switch(K){case"headers":{I.headers=O,T.includes("cookies")||delete I.headers.cookie;break}case"method":{I.method=w;break}case"url":{I.url=H;break}case"cookies":{I.cookies=E.cookies||O.cookie&&u.parseCookie(O.cookie)||{};break}case"query_string":{I.query_string=c(E);break}case"data":{if(w==="GET"||w==="HEAD")break;E.body!==void 0&&(I.data=p.isString(E.body)?E.body:JSON.stringify(a.normalize(E.body)));break}default:({}).hasOwnProperty.call(E,K)&&(I[K]=E[K])}}),I}r(g,"extractRequestData");function S(E,b,T){const I={...i,...T&&T.include};if(I.request){const O=Array.isArray(I.request)?g(b,{include:I.request}):g(b);E.request={...E.request,...O}}if(I.user){const O=b.user&&p.isPlainObject(b.user)?f(b.user,I.user):{};Object.keys(O).length&&(E.user={...E.user,...O})}if(I.ip){const O=b.ip||b.socket&&b.socket.remoteAddress;O&&(E.user={...E.user,ip_address:O})}return I.transaction&&!E.transaction&&E.type==="transaction"&&(E.transaction=o(b,I.transaction)),E}r(S,"addRequestDataToEvent");function c(E){let b=E.originalUrl||E.url||"";if(b){b.startsWith("/")&&(b=`http://dogs.are.great${b}`);try{const T=E.query||new URL(b).search.slice(1);return T.length?T:void 0}catch{return}}}r(c,"extractQueryParams");function v(E){const b={};try{E.forEach((T,I)=>{typeof T=="string"&&(b[I]=T)})}catch{h.DEBUG_BUILD&&m.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return b}r(v,"winterCGHeadersToDict");function _(E){const b=v(E.headers);return{method:E.method,url:E.url,headers:b}}r(_,"winterCGRequestToRequestData"),l.DEFAULT_USER_INCLUDES=t,l.addRequestDataToEvent=S,l.extractPathForTransaction=n,l.extractRequestData=g,l.winterCGHeadersToDict=v,l.winterCGRequestToRequestData=_},5043703765:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=["fatal","error","warning","log","info","debug"];function u(h){return h==="warn"?"warning":d.includes(h)?h:"log"}r(u,"severityLevelFromString"),l.severityLevelFromString=u,l.validSeverityLevels=d},9955566551:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=50,u="?",h=/\(error: (.*)\)/,p=/captureMessage|captureException/;function m(...t){const n=t.sort((o,f)=>o[0]-f[0]).map(o=>o[1]);return(o,f=0,g=0)=>{const S=[],c=o.split(`
`);for(let v=f;v<c.length;v++){const _=c[v];if(_.length>1024)continue;const E=h.test(_)?_.replace(h,"$1"):_;if(!E.match(/\S*Error: /)){for(const b of n){const T=b(E);if(T){S.push(T);break}}if(S.length>=d+g)break}}return s(S.slice(g))}}r(m,"createStackParser");function a(t){return Array.isArray(t)?m(...t):t}r(a,"stackParserFromStackParserOptions");function s(t){if(!t.length)return[];const n=Array.from(t);return/sentryWrapped/.test(n[n.length-1].function||"")&&n.pop(),n.reverse(),p.test(n[n.length-1].function||"")&&(n.pop(),p.test(n[n.length-1].function||"")&&n.pop()),n.slice(0,d).map(o=>({...o,filename:o.filename||n[n.length-1].filename,function:o.function||u}))}r(s,"stripSentryFramesAndReverse");const i="<anonymous>";function e(t){try{return!t||typeof t!="function"?i:t.name||i}catch{return i}}r(e,"getFunctionName"),l.UNKNOWN_FUNCTION=u,l.createStackParser=m,l.getFunctionName=e,l.stackParserFromStackParserOptions=a,l.stripSentryFramesAndReverse=s},9996838991:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5330804994);function h(i,e=0){return typeof i!="string"||e===0||i.length<=e?i:`${i.slice(0,e)}...`}r(h,"truncate");function p(i,e){let t=i;const n=t.length;if(n<=150)return t;e>n&&(e=n);let o=Math.max(e-60,0);o<5&&(o=0);let f=Math.min(o+140,n);return f>n-5&&(f=n),f===n&&(o=Math.max(f-140,0)),t=t.slice(o,f),o>0&&(t=`'{snip} ${t}`),f<n&&(t+=" {snip}"),t}r(p,"snipLine");function m(i,e){if(!Array.isArray(i))return"";const t=[];for(let n=0;n<i.length;n++){const o=i[n];try{u.isVueViewModel(o)?t.push("[VueViewModel]"):t.push(String(o))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}r(m,"safeJoin");function a(i,e,t=!1){return u.isString(i)?u.isRegExp(e)?e.test(i):u.isString(e)?t?i===e:i.includes(e):!1:!1}r(a,"isMatchingPattern");function s(i,e=[],t=!1){return e.some(n=>a(i,n,t))}r(s,"stringMatchesSomePattern"),l.isMatchingPattern=a,l.safeJoin=m,l.snipLine=p,l.stringMatchesSomePattern=s,l.truncate=h},8265793926:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1795624184),h=d(3610150206),m=d(1108286465).GLOBAL_OBJ;function a(){try{return new ErrorEvent(""),!0}catch{return!1}}r(a,"supportsErrorEvent");function s(){try{return new DOMError(""),!0}catch{return!1}}r(s,"supportsDOMError");function i(){try{return new DOMException(""),!0}catch{return!1}}r(i,"supportsDOMException");function e(){if(!("fetch"in m))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}r(e,"supportsFetch");function t(g){return g&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(g.toString())}r(t,"isNativeFetch");function n(){if(typeof EdgeRuntime=="string")return!0;if(!e())return!1;if(t(m.fetch))return!0;let g=!1;const S=m.document;if(S&&typeof S.createElement=="function")try{const c=S.createElement("iframe");c.hidden=!0,S.head.appendChild(c),c.contentWindow&&c.contentWindow.fetch&&(g=t(c.contentWindow.fetch)),S.head.removeChild(c)}catch(c){u.DEBUG_BUILD&&h.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",c)}return g}r(n,"supportsNativeFetch");function o(){return"ReportingObserver"in m}r(o,"supportsReportingObserver");function f(){if(!e())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}r(f,"supportsReferrerPolicy"),l.isNativeFetch=t,l.supportsDOMError=s,l.supportsDOMException=i,l.supportsErrorEvent=a,l.supportsFetch=e,l.supportsNativeFetch=n,l.supportsReferrerPolicy=f,l.supportsReportingObserver=o},2435760602:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(5330804994);var h;(function(s){s[s.PENDING=0]="PENDING";const e=1;s[s.RESOLVED=e]="RESOLVED";const t=2;s[s.REJECTED=t]="REJECTED"})(h||(h={}));function p(s){return new a(i=>{i(s)})}r(p,"resolvedSyncPromise");function m(s){return new a((i,e)=>{e(s)})}r(m,"rejectedSyncPromise");class a{constructor(i){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),this._state=h.PENDING,this._handlers=[];try{i(this._resolve,this._reject)}catch(e){this._reject(e)}}then(i,e){return new a((t,n)=>{this._handlers.push([!1,o=>{if(!i)t(o);else try{t(i(o))}catch(f){n(f)}},o=>{if(!e)n(o);else try{t(e(o))}catch(f){n(f)}}]),this._executeHandlers()})}catch(i){return this.then(e=>e,i)}finally(i){return new a((e,t)=>{let n,o;return this.then(f=>{o=!1,n=f,i&&i()},f=>{o=!0,n=f,i&&i()}).then(()=>{if(o){t(n);return}e(n)})})}__init(){this._resolve=i=>{this._setResult(h.RESOLVED,i)}}__init2(){this._reject=i=>{this._setResult(h.REJECTED,i)}}__init3(){this._setResult=(i,e)=>{if(this._state===h.PENDING){if(u.isThenable(e)){e.then(this._resolve,this._reject);return}this._state=i,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===h.PENDING)return;const i=this._handlers.slice();this._handlers=[],i.forEach(e=>{e[0]||(this._state===h.RESOLVED&&e[1](this._value),this._state===h.REJECTED&&e[2](this._value),e[0]=!0)})}}}r(a,"SyncPromise"),l.SyncPromise=a,l.rejectedSyncPromise=m,l.resolvedSyncPromise=p},2174399055:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(1108286465),h=1e3;function p(){return Date.now()/h}r(p,"dateTimestampInSeconds");function m(){const{performance:i}=u.GLOBAL_OBJ;if(!i||!i.now)return p;const e=Date.now()-i.now(),t=i.timeOrigin==null?e:i.timeOrigin;return()=>(t+i.now())/h}r(m,"createUnixTimestampInSecondsFunc");const a=m();l._browserPerformanceTimeOriginMode=void 0;const s=(()=>{const{performance:i}=u.GLOBAL_OBJ;if(!i||!i.now){l._browserPerformanceTimeOriginMode="none";return}const e=3600*1e3,t=i.now(),n=Date.now(),o=i.timeOrigin?Math.abs(i.timeOrigin+t-n):e,f=o<e,g=i.timing&&i.timing.navigationStart,c=typeof g=="number"?Math.abs(g+t-n):e,v=c<e;return f||v?o<=c?(l._browserPerformanceTimeOriginMode="timeOrigin",i.timeOrigin):(l._browserPerformanceTimeOriginMode="navigationStart",g):(l._browserPerformanceTimeOriginMode="dateNow",n)})();l.browserPerformanceTimeOrigin=s,l.dateTimestampInSeconds=p,l.timestampInSeconds=a},6123212092:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=d(8666696284),h=d(4360077466),p=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function m(i){if(!i)return;const e=i.match(p);if(!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}r(m,"extractTraceparentData");function a(i,e){const t=m(i),n=u.baggageHeaderToDynamicSamplingContext(e),{traceId:o,parentSpanId:f,parentSampled:g}=t||{};return t?{traceId:o||h.uuid4(),parentSpanId:f||h.uuid4().substring(16),spanId:h.uuid4().substring(16),sampled:g,dsc:n||{}}:{traceId:o||h.uuid4(),spanId:h.uuid4().substring(16)}}r(a,"propagationContextFromHeaders");function s(i=h.uuid4(),e=h.uuid4().substring(16),t){let n="";return t!==void 0&&(n=t?"-1":"-0"),`${i}-${e}${n}`}r(s,"generateSentryTraceHeader"),l.TRACEPARENT_REGEXP=p,l.extractTraceparentData=m,l.generateSentryTraceHeader=s,l.propagationContextFromHeaders=a},7216756807:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(m){if(!m)return{};const a=m.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!a)return{};const s=a[6]||"",i=a[8]||"";return{host:a[4],path:a[5],protocol:a[2],search:s,hash:i,relative:a[5]+s+i}}r(d,"parseUrl");function u(m){return m.split(/[\?#]/,1)[0]}r(u,"stripUrlQueryAndFragment");function h(m){return m.split(/\\?\//).filter(a=>a.length>0&&a!==",").length}r(h,"getNumberOfUrlSegments");function p(m){const{protocol:a,host:s,path:i}=m,e=s&&s.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${a?`${a}://`:""}${e}${i}`}r(p,"getSanitizedUrlString"),l.getNumberOfUrlSegments=h,l.getSanitizedUrlString=p,l.parseUrl=d,l.stripUrlQueryAndFragment=u},6250807085:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(u){return u.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}r(d,"escapeStringForRegex"),l.escapeStringForRegex=d},7384544743:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const h=d(1108286465).GLOBAL_OBJ;function p(){const m=h.chrome,a=m&&m.app&&m.app.runtime,s="history"in h&&!!h.history.pushState&&!!h.history.replaceState;return!a&&s}r(p,"supportsHistory"),l.supportsHistory=p},1108286465:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=globalThis;function u(h,p,m){const a=m||d,s=a.__SENTRY__=a.__SENTRY__||{};return s[h]||(s[h]=p())}r(u,"getGlobalSingleton"),l.GLOBAL_OBJ=d,l.getGlobalSingleton=u},2844658640:(B,l,d)=>{var u,h,p;B.exports=function(j){var a={},s={exports:a},i=j.AbortController,e=j.AbortSignal,t=j.addEventListener,n=j.alert,o=j.AnalyserNode,f=j.Animation,g=j.AnimationEffectReadOnly,S=j.AnimationEffectTiming,c=j.AnimationEffectTimingReadOnly,v=j.AnimationEvent,_=j.AnimationPlaybackEvent,E=j.AnimationTimeline,b=j.applicationCache,T=j.ApplicationCache,I=j.ApplicationCacheErrorEvent,O=j.atob,w=j.Attr,D=j.Audio,R=j.AudioBuffer,L=j.AudioBufferSourceNode,H=j.AudioContext,K=j.AudioDestinationNode,ee=j.AudioListener,q=j.AudioNode,ae=j.AudioParam,ce=j.AudioProcessingEvent,Te=j.AudioScheduledSourceNode,ke=j.AudioWorkletGlobalScope,tt=j.AudioWorkletNode,At=j.AudioWorkletProcessor,Be=j.BarProp,$e=j.BaseAudioContext,Ze=j.BatteryManager,Je=j.BeforeUnloadEvent,dt=j.BiquadFilterNode,Ot=j.Blob,Nt=j.BlobEvent,Ve=j.blur,He=j.BroadcastChannel,ct=j.btoa,yt=j.BudgetService,it=j.ByteLengthQueuingStrategy,nn=j.Cache,Xt=j.CacheStorage,dn=j.cancelAnimationFrame,bn=j.cancelIdleCallback,Rn=j.CanvasCaptureMediaStreamTrack,Zt=j.CanvasGradient,Mn=j.CanvasPattern,Wi=j.CanvasRenderingContext2D,Jn=j.ChannelMergerNode,zn=j.ChannelSplitterNode,En=j.CharacterData,sn=j.clearInterval,oi=j.clearTimeout,rn=j.clientInformation,cn=j.ClipboardEvent,Wt=j.close,J=j.closed,Xe=j.CloseEvent,nt=j.Comment,st=j.CompositionEvent,pt=j.confirm,It=j.console,ve=j.ConstantSourceNode,et=j.ConvolverNode,G=j.CountQueuingStrategy,ne=j.createImageBitmap,Me=j.Credential,Re=j.CredentialsContainer,Ft=j.crypto,ot=j.Crypto,Tt=j.CryptoKey,we=j.CSS,Ue=j.CSSConditionRule,F=j.CSSFontFaceRule,Oe=j.CSSGroupingRule,se=j.CSSImportRule,ue=j.CSSKeyframeRule,X=j.CSSKeyframesRule,lt=j.CSSMatrixComponent,Ae=j.CSSMediaRule,Ye=j.CSSNamespaceRule,Ht=j.CSSPageRule,Mt=j.CSSPerspective,Qn=j.CSSRotate,$n=j.CSSRule,Vn=j.CSSRuleList,kn=j.CSSScale,tn=j.CSSSkew,Gn=j.CSSSkewX,Si=j.CSSSkewY,nr=j.CSSStyleDeclaration,ln=j.CSSStyleRule,jt=j.CSSStyleSheet,Fn=j.CSSSupportsRule,Hn=j.CSSTransformValue,wi=j.CSSTranslate,Pi=j.CustomElementRegistry,ni=j.customElements,Kn=j.CustomEvent,ji=j.DataTransfer,$i=j.DataTransferItem,sr=j.DataTransferItemList,Ai=j.defaultstatus,Lr=j.defaultStatus,Vi=j.DelayNode,Nr=j.DeviceMotionEvent,_i=j.DeviceOrientationEvent,Ci=j.devicePixelRatio,N=j.dispatchEvent,he=j.document,je=j.Document,Rt=j.DocumentFragment,Qt=j.DocumentType,An=j.DOMError,qn=j.DOMException,Pn=j.DOMImplementation,xn=j.DOMMatrix,Xn=j.DOMMatrixReadOnly,li=j.DOMParser,Ri=j.DOMPoint,zi=j.DOMPointReadOnly,gr=j.DOMQuad,Fr=j.DOMRect,ri=j.DOMRectList,Er=j.DOMRectReadOnly,Rr=j.DOMStringList,ei=j.DOMStringMap,hr=j.DOMTokenList,si=j.DragEvent,Eo=j.DynamicsCompressorNode,Jr=j.Element,fo=j.ErrorEvent,ho=j.event,de=j.Event,_e=j.EventSource,Pe=j.EventTarget,rt=j.external,_t=j.fetch,Dt=j.File,pn=j.FileList,In=j.FileReader,Nn=j.find,Tn=j.focus,di=j.FocusEvent,an=j.FontFace,ki=j.FontFaceSetLoadEvent,Zn=j.FormData,lr=j.frameElement,br=j.frames,Cr=j.GainNode,pi=j.Gamepad,vi=j.GamepadButton,Di=j.GamepadEvent,Yi=j.getComputedStyle,Or=j.getSelection,Zr=j.HashChangeEvent,Mi=j.Headers,ro=j.history,pr=j.History,qr=j.HTMLAllCollection,es=j.HTMLAnchorElement,is=j.HTMLAreaElement,Jo=j.HTMLAudioElement,Yo=j.HTMLBaseElement,ts=j.HTMLBodyElement,Vo=j.HTMLBRElement,uo=j.HTMLButtonElement,bo=j.HTMLCanvasElement,Io=j.HTMLCollection,so=j.HTMLContentElement,ao=j.HTMLDataElement,Gr=j.HTMLDataListElement,Co=j.HTMLDetailsElement,Ts=j.HTMLDialogElement,Is=j.HTMLDirectoryElement,po=j.HTMLDivElement,Ho=j.HTMLDListElement,Vr=j.HTMLDocument,oo=j.HTMLElement,Yr=j.HTMLEmbedElement,mo=j.HTMLFieldSetElement,lo=j.HTMLFontElement,ws=j.HTMLFormControlsCollection,oe=j.HTMLFormElement,fe=j.HTMLFrameElement,Ce=j.HTMLFrameSetElement,Ne=j.HTMLHeadElement,Ge=j.HTMLHeadingElement,Ct=j.HTMLHRElement,ht=j.HTMLHtmlElement,Kt=j.HTMLIFrameElement,$t=j.HTMLImageElement,on=j.HTMLInputElement,en=j.HTMLLabelElement,gn=j.HTMLLegendElement,vn=j.HTMLLIElement,Cn=j.HTMLLinkElement,jn=j.HTMLMapElement,Bn=j.HTMLMarqueeElement,wn=j.HTMLMediaElement,hn=j.HTMLMenuElement,ci=j.HTMLMetaElement,Ki=j.HTMLMeterElement,ar=j.HTMLModElement,Tr=j.HTMLObjectElement,Bt=j.HTMLOListElement,dr=j.HTMLOptGroupElement,cr=j.HTMLOptionElement,Xi=j.HTMLOptionsCollection,Xr=j.HTMLOutputElement,wo=j.HTMLParagraphElement,Mr=j.HTMLParamElement,go=j.HTMLPictureElement,Oo=j.HTMLPreElement,ns=j.HTMLProgressElement,fs=j.HTMLQuoteElement,Hr=j.HTMLScriptElement,gs=j.HTMLSelectElement,Ws=j.HTMLShadowElement,Ss=j.HTMLSlotElement,ls=j.HTMLSourceElement,As=j.HTMLSpanElement,vs=j.HTMLStyleElement,Wo=j.HTMLTableCaptionElement,Xo=j.HTMLTableCellElement,zo=j.HTMLTableColElement,zs=j.HTMLTableElement,Ra=j.HTMLTableRowElement,Gs=j.HTMLTableSectionElement,Go=j.HTMLTemplateElement,mi=j.HTMLTextAreaElement,ys=j.HTMLTimeElement,yi=j.HTMLTitleElement,ea=j.HTMLTrackElement,Os=j.HTMLUListElement,Ca=j.HTMLUnknownElement,te=j.HTMLVideoElement,ie=j.IDBCursor,$=j.IDBCursorWithValue,P=j.IDBDatabase,Y=j.IDBFactory,pe=j.IDBIndex,me=j.IDBKeyRange,De=j.IDBObjectStore,ze=j.IDBOpenDBRequest,gt=j.IDBRequest,qe=j.IDBTransaction,mt=j.IDBVersionChangeEvent,at=j.IdleDeadline,qt=j.IIRFilterNode,mn=j.Image,On=j.ImageBitmap,ai=j.ImageBitmapRenderingContext,gi=j.ImageCapture,Ei=j.ImageData,Gi=j.indexedDB,qi=j.innerHeight,rr=j.innerWidth,Ir=j.InputEvent,Ji=j.IntersectionObserver,Wn=j.IntersectionObserverEntry,er=j.Intl,vt=j.isSecureContext,wt=j.KeyboardEvent,Jt=j.KeyframeEffect,_n=j.KeyframeEffectReadOnly,Yn=j.length,Ui=j.localStorage,Oi=j.location,Ti=j.Location,Fi=j.locationbar,ur=j.matchMedia,To=j.MediaDeviceInfo,mr=j.MediaDevices,eo=j.MediaElementAudioSourceNode,Fo=j.MediaEncryptedEvent,rs=j.MediaError,xo=j.MediaKeyMessageEvent,So=j.MediaKeySession,js=j.MediaKeyStatusMap,ta=j.MediaKeySystemAccess,Ds=j.MediaList,Ns=j.MediaMetadata,ua=j.MediaQueryList,na=j.MediaQueryListEvent,Ma=j.MediaRecorder,ia=j.MediaSettingsRange,os=j.MediaSource,xr=j.MediaStream,Kr=j.MediaStreamAudioDestinationNode,Do=j.MediaStreamAudioSourceNode,$s=j.MediaStreamEvent,_s=j.MediaStreamTrack,gc=j.MediaStreamTrackEvent,Sc=j.menubar,vc=j.MessageChannel,yc=j.MessageEvent,_c=j.MessagePort,Ec=j.MIDIAccess,bc=j.MIDIConnectionEvent,Cc=j.MIDIInput,Tc=j.MIDIInputMap,Du=j.MIDIMessageEvent,Ic=j.MIDIOutput,Ar=j.MIDIOutputMap,Rl=j.MIDIPort,Pa=j.MimeType,Ml=j.MimeTypeArray,un=j.MouseEvent,Ru=j.moveBy,ii=j.moveTo,wc=j.MutationEvent,Qa=j.MutationObserver,Pl=j.MutationRecord,Bd=j.name,kl=j.NamedNodeMap,Ac=j.NavigationPreloadManager,Mu=j.navigator,Fs=j.Navigator,bi=j.NetworkInformation,Oc=j.Node,Dc=j.NodeFilter,Ud=j.NodeIterator,Rc=j.NodeList,Vd=j.Notification,Hd=j.OfflineAudioCompletionEvent,ka=j.OfflineAudioContext,Mc=j.offscreenBuffering,Wd=j.OffscreenCanvas,Pc=j.OffscreenCanvasRenderingContext2D,k=j.onabort,U=j.onafterprint,z=j.onanimationend,re=j.onanimationiteration,Ee=j.onanimationstart,xe=j.onappinstalled,ut=j.onauxclick,Pt=j.onbeforeinstallprompt,bt=j.onbeforeprint,Yt=j.onbeforeunload,Ut=j.onblur,fn=j.oncancel,yn=j.oncanplay,Un=j.oncanplaythrough,ti=j.onchange,Ii=j.onclick,or=j.onclose,xi=j.oncontextmenu,Sr=j.oncuechange,Wr=j.ondblclick,zr=j.ondevicemotion,vo=j.ondeviceorientation,fr=j.ondeviceorientationabsolute,Li=j.ondrag,Dr=j.ondragend,Ao=j.ondragenter,Ni=j.ondragleave,vr=j.ondragover,co=j.ondragstart,Mo=j.ondrop,Bo=j.ondurationchange,ss=j.onemptied,to=j.onended,ds=j.onerror,Uo=j.onfocus,Rs=j.ongotpointercapture,Ks=j.onhashchange,kc=j.oninput,Ll=j.oninvalid,Nl=j.onkeydown,La=j.onkeypress,zd=j.onkeyup,Fl=j.onlanguagechange,xl=j.onload,Gd=j.onloadeddata,Na=j.onloadedmetadata,jd=j.onloadstart,Ta=j.onlostpointercapture,Za=j.onmessage,Js=j.onmessageerror,fa=j.onmousedown,$d=j.onmouseenter,Bl=j.onmouseleave,Fa=j.onmousemove,Ul=j.onmouseout,jr=j.onmouseover,hs=j.onmouseup,Br=j.onmousewheel,yo=j.onoffline,$r=j.ononline,xs=j.onpagehide,Kd=j.onpageshow,Kh=j.onpause,VS=j.onplay,HS=j.onplaying,Jh=j.onpointercancel,Pu=j.onpointerdown,Yh=j.onpointerenter,Xh=j.onpointerleave,Lc=j.onpointermove,Jd=j.onpointerout,ku=j.onpointerover,Qh=j.onpointerup,WS=j.onpopstate,Zh=j.onprogress,qh=j.onratechange,ep=j.onrejectionhandled,tp=j.onreset,np=j.onresize,tr=j.onscroll,ip=j.onsearch,rp=j.onseeked,op=j.onseeking,sp=j.onselect,Vl=j.onstalled,Nc=j.onstorage,Lu=j.onsubmit,Nu=j.onsuspend,ap=j.ontimeupdate,lp=j.ontoggle,Yd=j.ontransitionend,dp=j.onunhandledrejection,Fc=j.onunload,cp=j.onvolumechange,xc=j.onwaiting,up=j.onwheel,fp=j.open,hp=j.openDatabase,zS=j.opener,GS=j.Option,jS=j.origin,$S=j.OscillatorNode,pp=j.outerHeight,Fu=j.outerWidth,xu=j.OverconstrainedError,Bc=j.PageTransitionEvent,mp=j.pageXOffset,Uc=j.pageYOffset,Bu=j.PannerNode,gp=j.parent,Sp=j.Path2D,vp=j.PaymentAddress,Hl=j.PaymentRequest,yp=j.PaymentRequestUpdateEvent,_p=j.PaymentResponse,Ep=j.performance,bp=j.Performance,Cp=j.PerformanceEntry,Tp=j.PerformanceLongTaskTiming,Ip=j.PerformanceMark,wp=j.PerformanceMeasure,Ap=j.PerformanceNavigation,Op=j.PerformanceNavigationTiming,Dp=j.PerformanceObserver,Rp=j.PerformanceObserverEntryList,Mp=j.PerformancePaintTiming,KS=j.PerformanceResourceTiming,Bs=j.PerformanceTiming,Pp=j.PeriodicWave,kp=j.Permissions,Lp=j.PermissionStatus,Np=j.personalbar,Xd=j.PhotoCapabilities,Fp=j.Plugin,xp=j.PluginArray,Bp=j.PointerEvent,Up=j.PopStateEvent,Vp=j.postMessage,Uu=j.Presentation,JS=j.PresentationAvailability,Hp=j.PresentationConnection,Wp=j.PresentationConnectionAvailableEvent,Vu=j.PresentationConnectionCloseEvent,zp=j.PresentationConnectionList,Gp=j.PresentationReceiver,Hu=j.PresentationRequest,jp=j.print,Wu=j.ProcessingInstruction,Vc=j.ProgressEvent,zu=j.PromiseRejectionEvent,$p=j.prompt,Gu=j.PushManager,Wl=j.PushSubscription,Kp=j.PushSubscriptionOptions,ju=j.queueMicrotask,YS=j.RadioNodeList,$u=j.Range,ra=j.ReadableStream,oa=j.registerProcessor,qa=j.RemotePlayback,Ku=j.removeEventListener,Ju=j.Request,zl=j.requestAnimationFrame,el=j.requestIdleCallback,Gl=j.resizeBy,ha=j.ResizeObserver,Hc=j.ResizeObserverEntry,Yu=j.resizeTo,Xu=j.Response,Qu=j.RTCCertificate,Zu=j.RTCDataChannel,qu=j.RTCDataChannelEvent,sa=j.RTCDtlsTransport,ef=j.RTCIceCandidate,tf=j.RTCIceGatherer,nf=j.RTCIceTransport,rf=j.RTCPeerConnection,of=j.RTCPeerConnectionIceEvent,XS=j.RTCRtpContributingSource,Jp=j.RTCRtpReceiver,Yp=j.RTCRtpSender,Xp=j.RTCSctpTransport,Qp=j.RTCSessionDescription,jl=j.RTCStatsReport,Wc=j.RTCTrackEvent,zc=j.screen,QS=j.Screen,Zp=j.screenLeft,qp=j.ScreenOrientation,em=j.screenTop,tm=j.screenX,nm=j.screenY,im=j.ScriptProcessorNode,rm=j.scroll,om=j.scrollbars,sm=j.scrollBy,ZS=j.scrollTo,qS=j.scrollX,am=j.scrollY,lm=j.SecurityPolicyViolationEvent,Qd=j.Selection,$l=j.self,Es=j.ServiceWorker,dm=j.ServiceWorkerContainer,yr=j.ServiceWorkerRegistration,cm=j.sessionStorage,um=j.setInterval,ps=j.setTimeout,fm=j.ShadowRoot,hm=j.SharedWorker,pm=j.SourceBuffer,Kl=j.SourceBufferList,Jl=j.speechSynthesis,Yl=j.SpeechSynthesisEvent,Xl=j.SpeechSynthesisUtterance,Ql=j.StaticRange,Zl=j.status,ql=j.statusbar,ed=j.StereoPannerNode,td=j.stop,mm=j.Storage,gm=j.StorageEvent,Sm=j.StorageManager,vm=j.styleMedia,ym=j.StyleSheet,_m=j.StyleSheetList,Em=j.SubtleCrypto,bm=j.SVGAElement,Cm=j.SVGAngle,Tm=j.SVGAnimatedAngle,Im=j.SVGAnimatedBoolean,wm=j.SVGAnimatedEnumeration,Am=j.SVGAnimatedInteger,jo=j.SVGAnimatedLength,sf=j.SVGAnimatedLengthList,af=j.SVGAnimatedNumber,lf=j.SVGAnimatedNumberList,df=j.SVGAnimatedPreserveAspectRatio,cf=j.SVGAnimatedRect,uf=j.SVGAnimatedString,nd=j.SVGAnimatedTransformList,ff=j.SVGAnimateElement,id=j.SVGAnimateMotionElement,Gc=j.SVGAnimateTransformElement,hf=j.SVGAnimationElement,pf=j.SVGCircleElement,mf=j.SVGClipPathElement,gf=j.SVGComponentTransferFunctionElement,rd=j.SVGDefsElement,jc=j.SVGDescElement,Sf=j.SVGDiscardElement,Zd=j.SVGElement,vf=j.SVGEllipseElement,yf=j.SVGFEBlendElement,_f=j.SVGFEColorMatrixElement,$c=j.SVGFEComponentTransferElement,Ef=j.SVGFECompositeElement,bf=j.SVGFEConvolveMatrixElement,od=j.SVGFEDiffuseLightingElement,Cf=j.SVGFEDisplacementMapElement,Tf=j.SVGFEDistantLightElement,If=j.SVGFEDropShadowElement,wf=j.SVGFEFloodElement,Af=j.SVGFEFuncAElement,Of=j.SVGFEFuncBElement,Df=j.SVGFEFuncGElement,Rf=j.SVGFEFuncRElement,Mf=j.SVGFEGaussianBlurElement,Pf=j.SVGFEImageElement,kf=j.SVGFEMergeElement,Lf=j.SVGFEMergeNodeElement,Nf=j.SVGFEMorphologyElement,Ff=j.SVGFEOffsetElement,xf=j.SVGFEPointLightElement,Bf=j.SVGFESpecularLightingElement,Uf=j.SVGFESpotLightElement,Vf=j.SVGFETileElement,Hf=j.SVGFETurbulenceElement,Wf=j.SVGFilterElement,zf=j.SVGForeignObjectElement,Gf=j.SVGGElement,jf=j.SVGGeometryElement,$f=j.SVGGradientElement,Kf=j.SVGGraphicsElement,Jf=j.SVGImageElement,Yf=j.SVGLength,Xf=j.SVGLengthList,Qf=j.SVGLinearGradientElement,Zf=j.SVGLineElement,qf=j.SVGMarkerElement,eh=j.SVGMaskElement,th=j.SVGMatrix,nh=j.SVGMetadataElement,ih=j.SVGMPathElement,rh=j.SVGNumber,oh=j.SVGNumberList,sh=j.SVGPathElement,ah=j.SVGPatternElement,lh=j.SVGPoint,dh=j.SVGPointList,ch=j.SVGPolygonElement,uh=j.SVGPolylineElement,fh=j.SVGPreserveAspectRatio,hh=j.SVGRadialGradientElement,Om=j.SVGRect,Dm=j.SVGRectElement,Rm=j.SVGScriptElement,Mm=j.SVGSetElement,Pm=j.SVGStopElement,km=j.SVGStringList,Lm=j.SVGStyleElement,Nm=j.SVGSVGElement,Fm=j.SVGSwitchElement,xm=j.SVGSymbolElement,Bm=j.SVGTextContentElement,Um=j.SVGTextElement,Vm=j.SVGTextPathElement,Hm=j.SVGTextPositioningElement,Wm=j.SVGTitleElement,zm=j.SVGTransform,Gm=j.SVGTransformList,jm=j.SVGTSpanElement,$m=j.SVGUnitTypes,Km=j.SVGUseElement,Jm=j.SVGViewElement,Ym=j.TaskAttributionTiming,Xm=j.Text,Qm=j.TextDecoder,Zm=j.TextEncoder,qm=j.TextEvent,eg=j.TextMetrics,tg=j.TextTrack,ng=j.TextTrackCue,ig=j.TextTrackCueList,rg=j.TextTrackList,og=j.TimeRanges,sg=j.toolbar,ag=j.top,lg=j.Touch,dg=j.TouchEvent,cg=j.TouchList,ug=j.TrackEvent,fg=j.TransitionEvent,hg=j.TreeWalker,ph=j.trustedTypes,pg=j.UIEvent,mg=j.URL,gg=j.URLSearchParams,Sg=j.ValidityState,vg=j.visualViewport,yg=j.VisualViewport,_g=j.VTTCue,Eg=j.WaveShaperNode,bg=j.WebAssembly,Cg=j.WebGL2RenderingContext,Tg=j.WebGLActiveInfo,Ig=j.WebGLBuffer,wg=j.WebGLContextEvent,Ag=j.WebGLFramebuffer,Og=j.WebGLProgram,Dg=j.WebGLQuery,Rg=j.WebGLRenderbuffer,Mg=j.WebGLRenderingContext,Pg=j.WebGLSampler,kg=j.WebGLShader,Lg=j.WebGLShaderPrecisionFormat,Ng=j.WebGLSync,Fg=j.WebGLTexture,xg=j.WebGLTransformFeedback,Bg=j.WebGLUniformLocation,Ug=j.WebGLVertexArrayObject,Vg=j.WebSocket,Hg=j.WheelEvent,j=j.window,Wg=j.Window,zg=j.Worker,Gg=j.WritableStream,jg=j.XMLDocument,$g=j.XMLHttpRequest,Kg=j.XMLHttpRequestEventTarget,Jg=j.XMLHttpRequestUpload,Yg=j.XMLSerializer,Xg=j.XPathEvaluator,Qg=j.XPathExpression,Zg=j.XPathResult,qg=j.XSLTProcessor;return function(no,Hi){typeof a=="object"&&typeof s<"u"?Hi(a,d(3134334389),d(9322124936)):(h=[a,d(3134334389),d(9322124936)],u=Hi,p=typeof u=="function"?u.apply(a,h):u,p!==void 0&&(s.exports=p))}(this,function(no,Hi,qd){"use strict";var Kc=r(()=>'<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',"resizeTriggersHtml");function Ro(le,x){if(!(le instanceof x))throw new TypeError("Cannot call a class as a function")}r(Ro,"_classCallCheck");function Jc(le,x){for(var V=0;V<x.length;V++){var Q=x[V];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(le,Q.key,Q)}}r(Jc,"_defineProperties");function Po(le,x,V){return x&&Jc(le.prototype,x),V&&Jc(le,V),le}r(Po,"_createClass");function zt(le,x,V){return x in le?Object.defineProperty(le,x,{value:V,enumerable:!0,configurable:!0,writable:!0}):le[x]=V,le}r(zt,"_defineProperty");function Us(){return(Us=Object.assign||function(le){for(var x=1;x<arguments.length;x++){var V=arguments[x];for(var Q in V)Object.prototype.hasOwnProperty.call(V,Q)&&(le[Q]=V[Q])}return le}).apply(this,arguments)}r(Us,"_extends");function Yc(le,x){var V=Object.keys(le);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(le);x&&(Q=Q.filter(function(ge){return Object.getOwnPropertyDescriptor(le,ge).enumerable})),V.push.apply(V,Q)}return V}r(Yc,"ownKeys");function Ur(le){for(var x=1;x<arguments.length;x++){var V=arguments[x]!=null?arguments[x]:{};x%2?Yc(V,!0).forEach(function(Q){zt(le,Q,V[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(V)):Yc(V).forEach(function(Q){Object.defineProperty(le,Q,Object.getOwnPropertyDescriptor(V,Q))})}return le}r(Ur,"_objectSpread2");function cs(le,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(x&&x.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),x&&Xc(le,x)}r(cs,"_inherits");function as(le){return(as=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(le)}r(as,"_getPrototypeOf");function Xc(le,x){return(Xc=Object.setPrototypeOf||function(V,Q){return V.__proto__=Q,V})(le,x)}r(Xc,"_setPrototypeOf");function tl(le,x){if(le==null)return{};var V,Q,ge=function(Se,Fe){if(Se==null)return{};var Qe,Ke,ft={},kt=Object.keys(Se);for(Ke=0;Ke<kt.length;Ke++)Qe=kt[Ke],0<=Fe.indexOf(Qe)||(ft[Qe]=Se[Qe]);return ft}(le,x);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(le);for(Q=0;Q<be.length;Q++)V=be[Q],0<=x.indexOf(V)||Object.prototype.propertyIsEnumerable.call(le,V)&&(ge[V]=le[V])}return ge}r(tl,"_objectWithoutProperties");function Sn(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}r(Sn,"_assertThisInitialized");function us(le,x){return!x||typeof x!="object"&&typeof x!="function"?Sn(le):x}r(us,"_possibleConstructorReturn");function mh(le,x){return function(V){if(Array.isArray(V))return V}(le)||function(V,Q){if(Symbol.iterator in Object(V)||Object.prototype.toString.call(V)==="[object Arguments]"){var ge=[],be=!0,Se=!1,Fe=void 0;try{for(var Qe,Ke=V[Symbol.iterator]();!(be=(Qe=Ke.next()).done)&&(ge.push(Qe.value),!Q||ge.length!==Q);be=!0);}catch(ft){Se=!0,Fe=ft}finally{try{be||Ke.return==null||Ke.return()}finally{if(Se)throw Fe}}return ge}}(le,x)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r(mh,"_slicedToArray");function gh(le){return function(x){if(Array.isArray(x)){for(var V=0,Q=new Array(x.length);V<x.length;V++)Q[V]=x[V];return Q}}(le)||function(x){if(Symbol.iterator in Object(x)||Object.prototype.toString.call(x)==="[object Arguments]")return Array.from(x)}(le)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r(gh,"_toConsumableArray");function Qc(){var le=this.constructor.getDerivedStateFromProps(this.props,this.state);le!=null&&this.setState(le)}r(Qc,"componentWillMount");function Qi(le){this.setState(function(x){var V=this.constructor.getDerivedStateFromProps(le,x);return V??null}.bind(this))}r(Qi,"componentWillReceiveProps");function Zc(le,x){try{var V=this.props,Q=this.state;this.props=le,this.state=x,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(V,Q)}finally{this.props=V,this.state=Q}}r(Zc,"componentWillUpdate");function nl(le){var x=le.prototype;if(!x||!x.isReactComponent)throw new Error("Can only polyfill class components");if(typeof le.getDerivedStateFromProps!="function"&&typeof x.getSnapshotBeforeUpdate!="function")return le;var V=null,Q=null,ge=null;if(typeof x.componentWillMount=="function"?V="componentWillMount":typeof x.UNSAFE_componentWillMount=="function"&&(V="UNSAFE_componentWillMount"),typeof x.componentWillReceiveProps=="function"?Q="componentWillReceiveProps":typeof x.UNSAFE_componentWillReceiveProps=="function"&&(Q="UNSAFE_componentWillReceiveProps"),typeof x.componentWillUpdate=="function"?ge="componentWillUpdate":typeof x.UNSAFE_componentWillUpdate=="function"&&(ge="UNSAFE_componentWillUpdate"),V!==null||Q!==null||ge!==null){var be=le.displayName||le.name,Se=typeof le.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+be+" uses "+Se+" but also contains the following legacy lifecycles:"+(V!==null?`
  `+V:"")+(Q!==null?`
  `+Q:"")+(ge!==null?`
  `+ge:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof le.getDerivedStateFromProps=="function"&&(x.componentWillMount=Qc,x.componentWillReceiveProps=Qi),typeof x.getSnapshotBeforeUpdate=="function"){if(typeof x.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");x.componentWillUpdate=Zc;var Fe=x.componentDidUpdate;x.componentDidUpdate=function(Qe,Ke,ft){var kt=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:ft;Fe.call(this,Qe,Ke,kt)}}return le}r(nl,"polyfill"),Zc.__suppressDeprecationWarning=Qi.__suppressDeprecationWarning=Qc.__suppressDeprecationWarning=!0;var ec=function(){function le(){var x,V;Ro(this,le);for(var Q=arguments.length,ge=new Array(Q),be=0;be<Q;be++)ge[be]=arguments[be];return zt(Sn(V=us(this,(x=as(le)).call.apply(x,[this].concat(ge)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),zt(Sn(V),"_columnStartIndex",0),zt(Sn(V),"_columnStopIndex",0),zt(Sn(V),"_rowStartIndex",0),zt(Sn(V),"_rowStopIndex",0),zt(Sn(V),"_onKeyDown",function(Se){var Fe=V.props,Qe=Fe.columnCount,Ke=Fe.disabled,ft=Fe.mode,kt=Fe.rowCount;if(!Ke){var Vt=V._getScrollState(),y=Vt.scrollToColumn,C=Vt.scrollToRow,A=V._getScrollState(),M=A.scrollToColumn,W=A.scrollToRow;switch(Se.key){case"ArrowDown":W=Math.min(ft==="cells"?W+1:V._rowStopIndex+1,kt-1);break;case"ArrowLeft":M=Math.max(ft==="cells"?M-1:V._columnStartIndex-1,0);break;case"ArrowRight":M=Math.min(ft==="cells"?M+1:V._columnStopIndex+1,Qe-1);break;case"ArrowUp":W=Math.max(ft==="cells"?W-1:V._rowStartIndex-1,0)}M===y&&W===C||(Se.preventDefault(),V._updateScrollState({scrollToColumn:M,scrollToRow:W}))}}),zt(Sn(V),"_onSectionRendered",function(Se){var Fe=Se.columnStartIndex,Qe=Se.columnStopIndex,Ke=Se.rowStartIndex,ft=Se.rowStopIndex;V._columnStartIndex=Fe,V._columnStopIndex=Qe,V._rowStartIndex=Ke,V._rowStopIndex=ft}),V}return r(le,"ArrowKeyStepper"),cs(le,Hi.PureComponent),Po(le,[{key:"setScrollIndexes",value:function(x){var V=x.scrollToColumn,Q=x.scrollToRow;this.setState({scrollToRow:Q,scrollToColumn:V})}},{key:"render",value:function(){var x=this.props,V=x.className,Q=x.children,ge=this._getScrollState(),be=ge.scrollToColumn,Se=ge.scrollToRow;return Hi.createElement("div",{className:V,onKeyDown:this._onKeyDown},Q({onSectionRendered:this._onSectionRendered,scrollToColumn:be,scrollToRow:Se}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(x){var V=x.scrollToColumn,Q=x.scrollToRow,ge=this.props,be=ge.isControlled,Se=ge.onScrollToChange;typeof Se=="function"&&Se({scrollToColumn:V,scrollToRow:Q}),be||this.setState({scrollToColumn:V,scrollToRow:Q})}}],[{key:"getDerivedStateFromProps",value:function(x,V){return x.isControlled?{}:x.scrollToColumn!==V.instanceProps.prevScrollToColumn||x.scrollToRow!==V.instanceProps.prevScrollToRow?Ur({},V,{scrollToColumn:x.scrollToColumn,scrollToRow:x.scrollToRow,instanceProps:{prevScrollToColumn:x.scrollToColumn,prevScrollToRow:x.scrollToRow}}):{}}}]),le}();function qc(le,x){var V,Q,ge,be=(V=x!==void 0?x:typeof j<"u"?j:typeof $l<"u"?$l:d.g).document!==void 0&&V.document.attachEvent;if(!be){var Se=(ge=V.requestAnimationFrame||V.mozRequestAnimationFrame||V.webkitRequestAnimationFrame||function(Ie){return V.setTimeout(Ie,20)},function(Ie){return ge(Ie)}),Fe=(Q=V.cancelAnimationFrame||V.mozCancelAnimationFrame||V.webkitCancelAnimationFrame||V.clearTimeout,function(Ie){return Q(Ie)}),Qe=r(function(Ie){var We=Ie.__resizeTriggers__,Le=We.firstElementChild,St=We.lastElementChild,Et=Le.firstElementChild;St.scrollLeft=St.scrollWidth,St.scrollTop=St.scrollHeight,Et.style.width=Le.offsetWidth+1+"px",Et.style.height=Le.offsetHeight+1+"px",Le.scrollLeft=Le.scrollWidth,Le.scrollTop=Le.scrollHeight},"resetTriggers"),Ke=r(function(Ie){if(!(Ie.target.className&&typeof Ie.target.className.indexOf=="function"&&Ie.target.className.indexOf("contract-trigger")<0&&Ie.target.className.indexOf("expand-trigger")<0)){var We=this;Qe(this),this.__resizeRAF__&&Fe(this.__resizeRAF__),this.__resizeRAF__=Se(function(){!function(Le){return Le.offsetWidth!=Le.__resizeLast__.width||Le.offsetHeight!=Le.__resizeLast__.height}(We)||(We.__resizeLast__.width=We.offsetWidth,We.__resizeLast__.height=We.offsetHeight,We.__resizeListeners__.forEach(function(Le){Le.call(We,Ie)}))})}},"scrollListener"),ft=!1,kt="",Vt="animationstart",y="Webkit Moz O ms".split(" "),C="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),A=V.document.createElement("fakeelement");if(A.style.animationName!==void 0&&(ft=!0),ft===!1){for(var M=0;M<y.length;M++)if(A.style[y[M]+"AnimationName"]!==void 0){kt="-"+y[M].toLowerCase()+"-",Vt=C[M],ft=!0;break}}var W="resizeanim",Z="@"+kt+"keyframes "+W+" { from { opacity: 0; } to { opacity: 0; } } ",ye=kt+"animation: 1ms "+W+"; "}return{addResizeListener:function(Ie,We){if(be)Ie.attachEvent("onresize",We);else{if(!Ie.__resizeTriggers__){var Le=Ie.ownerDocument,St=V.getComputedStyle(Ie);if(St&&St.position=="static"&&(Ie.style.position="relative"),function(xt){if(!xt.getElementById("detectElementResize")){var Gt=(Z||"")+".resize-triggers { "+(ye||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',Dn=xt.head||xt.getElementsByTagName("head")[0],ui=xt.createElement("style");ui.id="detectElementResize",ui.type="text/css",le!=null&&ui.setAttribute("nonce",le),ui.styleSheet?ui.styleSheet.cssText=Gt:ui.appendChild(xt.createTextNode(Gt)),Dn.appendChild(ui)}}(Le),Ie.__resizeLast__={},Ie.__resizeListeners__=[],(Ie.__resizeTriggers__=Le.createElement("div")).className="resize-triggers",j.trustedTypes){var Et=ph.createPolicy("react-virtualized-auto-sizer",{createHTML:Kc});Ie.__resizeTriggers__.innerHTML=Et.createHTML("")}else Ie.__resizeTriggers__.innerHTML=Kc();Ie.appendChild(Ie.__resizeTriggers__),Qe(Ie),Ie.addEventListener("scroll",Ke,!0),Vt&&(Ie.__resizeTriggers__.__animationListener__=function(xt){xt.animationName==W&&Qe(Ie)},Ie.__resizeTriggers__.addEventListener(Vt,Ie.__resizeTriggers__.__animationListener__))}Ie.__resizeListeners__.push(We)}},removeResizeListener:function(Ie,We){if(be)Ie.detachEvent("onresize",We);else if(Ie.__resizeListeners__.splice(Ie.__resizeListeners__.indexOf(We),1),!Ie.__resizeListeners__.length){Ie.removeEventListener("scroll",Ke,!0),Ie.__resizeTriggers__.__animationListener__&&(Ie.__resizeTriggers__.removeEventListener(Vt,Ie.__resizeTriggers__.__animationListener__),Ie.__resizeTriggers__.__animationListener__=null);try{Ie.__resizeTriggers__=!Ie.removeChild(Ie.__resizeTriggers__)}catch{}}}}}r(qc,"createDetectElementResize"),zt(ec,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),nl(ec);var eu=function(){function le(){var x,V;Ro(this,le);for(var Q=arguments.length,ge=new Array(Q),be=0;be<Q;be++)ge[be]=arguments[be];return zt(Sn(V=us(this,(x=as(le)).call.apply(x,[this].concat(ge)))),"state",{height:V.props.defaultHeight||0,width:V.props.defaultWidth||0}),zt(Sn(V),"_parentNode",void 0),zt(Sn(V),"_autoSizer",void 0),zt(Sn(V),"_window",void 0),zt(Sn(V),"_detectElementResize",void 0),zt(Sn(V),"_onResize",function(){var Se=V.props,Fe=Se.disableHeight,Qe=Se.disableWidth,Ke=Se.onResize;if(V._parentNode){var ft=V._parentNode.offsetHeight||0,kt=V._parentNode.offsetWidth||0,Vt=(V._window||j).getComputedStyle(V._parentNode)||{},y=parseInt(Vt.paddingLeft,10)||0,C=parseInt(Vt.paddingRight,10)||0,A=parseInt(Vt.paddingTop,10)||0,M=parseInt(Vt.paddingBottom,10)||0,W=ft-A-M,Z=kt-y-C;(!Fe&&V.state.height!==W||!Qe&&V.state.width!==Z)&&(V.setState({height:ft-A-M,width:kt-y-C}),Ke({height:ft,width:kt}))}}),zt(Sn(V),"_setRef",function(Se){V._autoSizer=Se}),V}return r(le,"AutoSizer"),cs(le,Hi.Component),Po(le,[{key:"componentDidMount",value:function(){var x=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=qc(x,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var x=this.props,V=x.children,Q=x.className,ge=x.disableHeight,be=x.disableWidth,Se=x.style,Fe=this.state,Qe=Fe.height,Ke=Fe.width,ft={overflow:"visible"},kt={};return ge||(ft.height=0,kt.height=Qe),be||(ft.width=0,kt.width=Ke),Hi.createElement("div",{className:Q,ref:this._setRef,style:Ur({},ft,{},Se)},V(kt))}}]),le}();zt(eu,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var tc=function(){function le(){var x,V;Ro(this,le);for(var Q=arguments.length,ge=new Array(Q),be=0;be<Q;be++)ge[be]=arguments[be];return zt(Sn(V=us(this,(x=as(le)).call.apply(x,[this].concat(ge)))),"_child",void 0),zt(Sn(V),"_measure",function(){var Se=V.props,Fe=Se.cache,Qe=Se.columnIndex,Ke=Qe===void 0?0:Qe,ft=Se.parent,kt=Se.rowIndex,Vt=kt===void 0?V.props.index||0:kt,y=V._getCellMeasurements(),C=y.height,A=y.width;C===Fe.getHeight(Vt,Ke)&&A===Fe.getWidth(Vt,Ke)||(Fe.set(Vt,Ke,A,C),ft&&typeof ft.recomputeGridSize=="function"&&ft.recomputeGridSize({columnIndex:Ke,rowIndex:Vt}))}),zt(Sn(V),"_registerChild",function(Se){!Se||Se instanceof Jr||It.warn("CellMeasurer registerChild expects to be passed Element or null"),(V._child=Se)&&V._maybeMeasureCell()}),V}return r(le,"CellMeasurer"),cs(le,Hi.PureComponent),Po(le,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var x=this.props.children;return typeof x=="function"?x({measure:this._measure,registerChild:this._registerChild}):x}},{key:"_getCellMeasurements",value:function(){var x=this.props.cache,V=this._child||qd.findDOMNode(this);if(V&&V.ownerDocument&&V.ownerDocument.defaultView&&V instanceof V.ownerDocument.defaultView.HTMLElement){var Q=V.style.width,ge=V.style.height;x.hasFixedWidth()||(V.style.width="auto"),x.hasFixedHeight()||(V.style.height="auto");var be=Math.ceil(V.offsetHeight),Se=Math.ceil(V.offsetWidth);return Q&&(V.style.width=Q),ge&&(V.style.height=ge),{height:be,width:Se}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var x=this.props,V=x.cache,Q=x.columnIndex,ge=Q===void 0?0:Q,be=x.parent,Se=x.rowIndex,Fe=Se===void 0?this.props.index||0:Se;if(!V.has(Fe,ge)){var Qe=this._getCellMeasurements(),Ke=Qe.height,ft=Qe.width;V.set(Fe,ge,ft,Ke),be&&typeof be.invalidateCellSizeAfterRender=="function"&&be.invalidateCellSizeAfterRender({columnIndex:ge,rowIndex:Fe})}}}]),le}();zt(tc,"__internalCellMeasurerFlag",!1),tc.__internalCellMeasurerFlag=!0;var Sh=function(){function le(){var x=this,V=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Ro(this,le),zt(this,"_cellHeightCache",{}),zt(this,"_cellWidthCache",{}),zt(this,"_columnWidthCache",{}),zt(this,"_rowHeightCache",{}),zt(this,"_defaultHeight",void 0),zt(this,"_defaultWidth",void 0),zt(this,"_minHeight",void 0),zt(this,"_minWidth",void 0),zt(this,"_keyMapper",void 0),zt(this,"_hasFixedHeight",void 0),zt(this,"_hasFixedWidth",void 0),zt(this,"_columnCount",0),zt(this,"_rowCount",0),zt(this,"columnWidth",function(ft){var kt=ft.index,Vt=x._keyMapper(0,kt);return x._columnWidthCache[Vt]!==void 0?x._columnWidthCache[Vt]:x._defaultWidth}),zt(this,"rowHeight",function(ft){var kt=ft.index,Vt=x._keyMapper(kt,0);return x._rowHeightCache[Vt]!==void 0?x._rowHeightCache[Vt]:x._defaultHeight});var Q=V.defaultHeight,ge=V.defaultWidth,be=V.fixedHeight,Se=V.fixedWidth,Fe=V.keyMapper,Qe=V.minHeight,Ke=V.minWidth;this._hasFixedHeight=be===!0,this._hasFixedWidth=Se===!0,this._minHeight=Qe||0,this._minWidth=Ke||0,this._keyMapper=Fe||vh,this._defaultHeight=Math.max(this._minHeight,typeof Q=="number"?Q:30),this._defaultWidth=Math.max(this._minWidth,typeof ge=="number"?ge:100),this._hasFixedHeight===!1&&this._hasFixedWidth===!1&&It.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),this._hasFixedHeight===!1&&this._defaultHeight===0&&It.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),this._hasFixedWidth===!1&&this._defaultWidth===0&&It.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return r(le,"CellMeasurerCache"),Po(le,[{key:"clear",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:0,ge=this._keyMapper(x,Q);delete this._cellHeightCache[ge],delete this._cellWidthCache[ge],this._updateCachedColumnAndRowSizes(x,Q)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:0;if(this._hasFixedHeight)return this._defaultHeight;var ge=this._keyMapper(x,Q);return this._cellHeightCache[ge]!==void 0?Math.max(this._minHeight,this._cellHeightCache[ge]):this._defaultHeight}},{key:"getWidth",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:0;if(this._hasFixedWidth)return this._defaultWidth;var ge=this._keyMapper(x,Q);return this._cellWidthCache[ge]!==void 0?Math.max(this._minWidth,this._cellWidthCache[ge]):this._defaultWidth}},{key:"has",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:0,ge=this._keyMapper(x,Q);return this._cellHeightCache[ge]!==void 0}},{key:"set",value:function(x,V,Q,ge){var be=this._keyMapper(x,V);V>=this._columnCount&&(this._columnCount=V+1),x>=this._rowCount&&(this._rowCount=x+1),this._cellHeightCache[be]=ge,this._cellWidthCache[be]=Q,this._updateCachedColumnAndRowSizes(x,V)}},{key:"_updateCachedColumnAndRowSizes",value:function(x,V){if(!this._hasFixedWidth){for(var Q=0,ge=0;ge<this._rowCount;ge++)Q=Math.max(Q,this.getWidth(ge,V));var be=this._keyMapper(0,V);this._columnWidthCache[be]=Q}if(!this._hasFixedHeight){for(var Se=0,Fe=0;Fe<this._columnCount;Fe++)Se=Math.max(Se,this.getHeight(x,Fe));var Qe=this._keyMapper(x,0);this._rowHeightCache[Qe]=Se}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),le}();function vh(le,x){return"".concat(le,"-").concat(x)}r(vh,"defaultKeyMapper");function tu(le){return le&&le.__esModule&&Object.prototype.hasOwnProperty.call(le,"default")?le.default:le}r(tu,"unwrapExports");function sd(le,x){return le(x={exports:{}},x.exports),x.exports}r(sd,"createCommonjsModule");var io=sd(function(le,x){Object.defineProperty(x,"__esModule",{value:!0});var V=typeof Symbol=="function"&&Symbol.for,Q=V?Symbol.for("react.element"):60103,ge=V?Symbol.for("react.portal"):60106,be=V?Symbol.for("react.fragment"):60107,Se=V?Symbol.for("react.strict_mode"):60108,Fe=V?Symbol.for("react.profiler"):60114,Qe=V?Symbol.for("react.provider"):60109,Ke=V?Symbol.for("react.context"):60110,ft=V?Symbol.for("react.async_mode"):60111,kt=V?Symbol.for("react.concurrent_mode"):60111,Vt=V?Symbol.for("react.forward_ref"):60112,y=V?Symbol.for("react.suspense"):60113,C=V?Symbol.for("react.suspense_list"):60120,A=V?Symbol.for("react.memo"):60115,M=V?Symbol.for("react.lazy"):60116,W=V?Symbol.for("react.fundamental"):60117,Z=V?Symbol.for("react.responder"):60118,ye=V?Symbol.for("react.scope"):60119;function Ie(Le){if(typeof Le=="object"&&Le!==null){var St=Le.$$typeof;switch(St){case Q:switch(Le=Le.type){case ft:case kt:case be:case Fe:case Se:case y:return Le;default:switch(Le=Le&&Le.$$typeof){case Ke:case Vt:case Qe:return Le;default:return St}}case M:case A:case ge:return St}}}r(Ie,"y");function We(Le){return Ie(Le)===kt}r(We,"z"),x.typeOf=Ie,x.AsyncMode=ft,x.ConcurrentMode=kt,x.ContextConsumer=Ke,x.ContextProvider=Qe,x.Element=Q,x.ForwardRef=Vt,x.Fragment=be,x.Lazy=M,x.Memo=A,x.Portal=ge,x.Profiler=Fe,x.StrictMode=Se,x.Suspense=y,x.isValidElementType=function(Le){return typeof Le=="string"||typeof Le=="function"||Le===be||Le===kt||Le===Fe||Le===Se||Le===y||Le===C||typeof Le=="object"&&Le!==null&&(Le.$$typeof===M||Le.$$typeof===A||Le.$$typeof===Qe||Le.$$typeof===Ke||Le.$$typeof===Vt||Le.$$typeof===W||Le.$$typeof===Z||Le.$$typeof===ye)},x.isAsyncMode=function(Le){return We(Le)||Ie(Le)===ft},x.isConcurrentMode=We,x.isContextConsumer=function(Le){return Ie(Le)===Ke},x.isContextProvider=function(Le){return Ie(Le)===Qe},x.isElement=function(Le){return typeof Le=="object"&&Le!==null&&Le.$$typeof===Q},x.isForwardRef=function(Le){return Ie(Le)===Vt},x.isFragment=function(Le){return Ie(Le)===be},x.isLazy=function(Le){return Ie(Le)===M},x.isMemo=function(Le){return Ie(Le)===A},x.isPortal=function(Le){return Ie(Le)===ge},x.isProfiler=function(Le){return Ie(Le)===Fe},x.isStrictMode=function(Le){return Ie(Le)===Se},x.isSuspense=function(Le){return Ie(Le)===y}});tu(io),io.typeOf,io.AsyncMode,io.ConcurrentMode,io.ContextConsumer,io.ContextProvider,io.Element,io.ForwardRef,io.Fragment,io.Lazy,io.Memo,io.Portal,io.Profiler,io.StrictMode,io.Suspense,io.isValidElementType,io.isAsyncMode,io.isConcurrentMode,io.isContextConsumer,io.isContextProvider,io.isElement,io.isForwardRef,io.isFragment,io.isLazy,io.isMemo,io.isPortal,io.isProfiler,io.isStrictMode,io.isSuspense;var Qr=sd(function(le,x){(function(){Object.defineProperty(x,"__esModule",{value:!0});var V=typeof Symbol=="function"&&Symbol.for,Q=V?Symbol.for("react.element"):60103,ge=V?Symbol.for("react.portal"):60106,be=V?Symbol.for("react.fragment"):60107,Se=V?Symbol.for("react.strict_mode"):60108,Fe=V?Symbol.for("react.profiler"):60114,Qe=V?Symbol.for("react.provider"):60109,Ke=V?Symbol.for("react.context"):60110,ft=V?Symbol.for("react.async_mode"):60111,kt=V?Symbol.for("react.concurrent_mode"):60111,Vt=V?Symbol.for("react.forward_ref"):60112,y=V?Symbol.for("react.suspense"):60113,C=V?Symbol.for("react.suspense_list"):60120,A=V?Symbol.for("react.memo"):60115,M=V?Symbol.for("react.lazy"):60116,W=V?Symbol.for("react.fundamental"):60117,Z=V?Symbol.for("react.responder"):60118,ye=V?Symbol.for("react.scope"):60119,Ie=r(function(Zi,Ad){if(Ad===void 0)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!Zi){for(var $a=arguments.length,dc=new Array(2<$a?$a-2:0),hu=2;hu<$a;hu++)dc[hu-2]=arguments[hu];(function(ev){for(var Oh=arguments.length,eS=new Array(1<Oh?Oh-1:0),pu=1;pu<Oh;pu++)eS[pu-1]=arguments[pu];var tv=0,tS="Warning: "+ev.replace(/%s/g,function(){return eS[tv++]});typeof It<"u"&&It.warn(tS);try{throw new Error(tS)}catch{}}).apply(void 0,[Ad].concat(dc))}},"lowPriorityWarningWithoutStack$1");function We(Zi){if(typeof Zi=="object"&&Zi!==null){var Ad=Zi.$$typeof;switch(Ad){case Q:var $a=Zi.type;switch($a){case ft:case kt:case be:case Fe:case Se:case y:return $a;default:var dc=$a&&$a.$$typeof;switch(dc){case Ke:case Vt:case Qe:return dc;default:return Ad}}case M:case A:case ge:return Ad}}}r(We,"typeOf");var Le=ft,St=kt,Et=Ke,xt=Qe,Gt=Q,Dn=Vt,ui=be,Ln=M,Bi=A,ir=ge,ko=Fe,_o=Se,Ls=y,Hs=!1;function wd(Zi){return We(Zi)===kt}r(wd,"isConcurrentMode"),x.typeOf=We,x.AsyncMode=Le,x.ConcurrentMode=St,x.ContextConsumer=Et,x.ContextProvider=xt,x.Element=Gt,x.ForwardRef=Dn,x.Fragment=ui,x.Lazy=Ln,x.Memo=Bi,x.Portal=ir,x.Profiler=ko,x.StrictMode=_o,x.Suspense=Ls,x.isValidElementType=function(Zi){return typeof Zi=="string"||typeof Zi=="function"||Zi===be||Zi===kt||Zi===Fe||Zi===Se||Zi===y||Zi===C||typeof Zi=="object"&&Zi!==null&&(Zi.$$typeof===M||Zi.$$typeof===A||Zi.$$typeof===Qe||Zi.$$typeof===Ke||Zi.$$typeof===Vt||Zi.$$typeof===W||Zi.$$typeof===Z||Zi.$$typeof===ye)},x.isAsyncMode=function(Zi){return Hs||Ie(!(Hs=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),wd(Zi)||We(Zi)===ft},x.isConcurrentMode=wd,x.isContextConsumer=function(Zi){return We(Zi)===Ke},x.isContextProvider=function(Zi){return We(Zi)===Qe},x.isElement=function(Zi){return typeof Zi=="object"&&Zi!==null&&Zi.$$typeof===Q},x.isForwardRef=function(Zi){return We(Zi)===Vt},x.isFragment=function(Zi){return We(Zi)===be},x.isLazy=function(Zi){return We(Zi)===M},x.isMemo=function(Zi){return We(Zi)===A},x.isPortal=function(Zi){return We(Zi)===ge},x.isProfiler=function(Zi){return We(Zi)===Fe},x.isStrictMode=function(Zi){return We(Zi)===Se},x.isSuspense=function(Zi){return We(Zi)===y}})()});tu(Qr),Qr.typeOf,Qr.AsyncMode,Qr.ConcurrentMode,Qr.ContextConsumer,Qr.ContextProvider,Qr.Element,Qr.ForwardRef,Qr.Fragment,Qr.Lazy,Qr.Memo,Qr.Portal,Qr.Profiler,Qr.StrictMode,Qr.Suspense,Qr.isValidElementType,Qr.isAsyncMode,Qr.isConcurrentMode,Qr.isContextConsumer,Qr.isContextProvider,Qr.isElement,Qr.isForwardRef,Qr.isFragment,Qr.isLazy,Qr.isMemo,Qr.isPortal,Qr.isProfiler,Qr.isStrictMode,Qr.isSuspense;var nu=sd(function(le){le.exports=Qr}),iu=Object.getOwnPropertySymbols,yh=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable,nc,_h=function(){try{if(!Object.assign)return!1;var le=new String("abc");if(le[5]="de",Object.getOwnPropertyNames(le)[0]==="5")return!1;for(var x={},V=0;V<10;V++)x["_"+String.fromCharCode(V)]=V;if(Object.getOwnPropertyNames(x).map(function(ge){return x[ge]}).join("")!=="0123456789")return!1;var Q={};return"abcdefghijklmnopqrst".split("").forEach(function(ge){Q[ge]=ge}),Object.keys(Object.assign({},Q)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(le,x){for(var V,Q,ge=function(Qe){if(Qe==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Qe)}(le),be=1;be<arguments.length;be++){for(var Se in V=Object(arguments[be]))yh.call(V,Se)&&(ge[Se]=V[Se]);if(iu){Q=iu(V);for(var Fe=0;Fe<Q.length;Fe++)ru.call(V,Q[Fe])&&(ge[Q[Fe]]=V[Q[Fe]])}}return ge},xa="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ic={},ou=Function.call.bind(Object.prototype.hasOwnProperty);function su(le,x,V,Q,ge){for(var be in le)if(ou(le,be)){var Se;try{if(typeof le[be]!="function"){var Fe=Error((Q||"React class")+": "+V+" type `"+be+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof le[be]+"`.");throw Fe.name="Invariant Violation",Fe}Se=le[be](x,be,Q,V,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ke){Se=Ke}if(!Se||Se instanceof Error||nc((Q||"React class")+": type specification of "+V+" `"+be+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof Se+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),Se instanceof Error&&!(Se.message in ic)){ic[Se.message]=!0;var Qe=ge?ge():"";nc("Failed "+V+" type: "+Se.message+(Qe??""))}}}r(su,"checkPropTypes"),nc=r(function(le){var x="Warning: "+le;typeof It<"u"&&It.error(x);try{throw new Error(x)}catch{}},"printWarning"),su.resetWarningCache=function(){ic={}};var il,ad=su,au=Function.call.bind(Object.prototype.hasOwnProperty);function Ba(){return null}r(Ba,"emptyFunctionThatReturnsNull"),il=r(function(le){var x="Warning: "+le;typeof It<"u"&&It.error(x);try{throw new Error(x)}catch{}},"printWarning$1");function rc(le,x){var V=typeof Symbol=="function"&&Symbol.iterator,Q="@@iterator",ge="<<anonymous>>",be={array:Ke("array"),bool:Ke("boolean"),func:Ke("function"),number:Ke("number"),object:Ke("object"),string:Ke("string"),symbol:Ke("symbol"),any:Qe(Ba),arrayOf:function(C){return Qe(function(A,M,W,Z,ye){if(typeof C!="function")return new Fe("Property `"+ye+"` of component `"+W+"` has invalid PropType notation inside arrayOf.");var Ie=A[M];if(!Array.isArray(Ie))return new Fe("Invalid "+Z+" `"+ye+"` of type `"+kt(Ie)+"` supplied to `"+W+"`, expected an array.");for(var We=0;We<Ie.length;We++){var Le=C(Ie,We,W,Z,ye+"["+We+"]",xa);if(Le instanceof Error)return Le}return null})},element:Qe(function(C,A,M,W,Z){var ye=C[A];return le(ye)?null:new Fe("Invalid "+W+" `"+Z+"` of type `"+kt(ye)+"` supplied to `"+M+"`, expected a single ReactElement.")}),elementType:Qe(function(C,A,M,W,Z){var ye=C[A];return nu.isValidElementType(ye)?null:new Fe("Invalid "+W+" `"+Z+"` of type `"+kt(ye)+"` supplied to `"+M+"`, expected a single ReactElement type.")}),instanceOf:function(C){return Qe(function(A,M,W,Z,ye){if(A[M]instanceof C)return null;var Ie=C.name||ge;return new Fe("Invalid "+Z+" `"+ye+"` of type `"+function(We){return We.constructor&&We.constructor.name?We.constructor.name:ge}(A[M])+"` supplied to `"+W+"`, expected instance of `"+Ie+"`.")})},node:Qe(function(C,A,M,W,Z){return ft(C[A])?null:new Fe("Invalid "+W+" `"+Z+"` supplied to `"+M+"`, expected a ReactNode.")}),objectOf:function(C){return Qe(function(A,M,W,Z,ye){if(typeof C!="function")return new Fe("Property `"+ye+"` of component `"+W+"` has invalid PropType notation inside objectOf.");var Ie=A[M],We=kt(Ie);if(We!=="object")return new Fe("Invalid "+Z+" `"+ye+"` of type `"+We+"` supplied to `"+W+"`, expected an object.");for(var Le in Ie)if(au(Ie,Le)){var St=C(Ie,Le,W,Z,ye+"."+Le,xa);if(St instanceof Error)return St}return null})},oneOf:function(C){return Array.isArray(C)?Qe(function(A,M,W,Z,ye){for(var Ie=A[M],We=0;We<C.length;We++)if(Se(Ie,C[We]))return null;var Le=JSON.stringify(C,function(St,Et){return Vt(Et)==="symbol"?String(Et):Et});return new Fe("Invalid "+Z+" `"+ye+"` of value `"+String(Ie)+"` supplied to `"+W+"`, expected one of "+Le+".")}):(il(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Ba)},oneOfType:function(C){if(!Array.isArray(C))return il("Invalid argument supplied to oneOfType, expected an instance of array."),Ba;for(var A=0;A<C.length;A++){var M=C[A];if(typeof M!="function")return il("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+y(M)+" at index "+A+"."),Ba}return Qe(function(W,Z,ye,Ie,We){for(var Le=0;Le<C.length;Le++)if((0,C[Le])(W,Z,ye,Ie,We,xa)==null)return null;return new Fe("Invalid "+Ie+" `"+We+"` supplied to `"+ye+"`.")})},shape:function(C){return Qe(function(A,M,W,Z,ye){var Ie=A[M],We=kt(Ie);if(We!=="object")return new Fe("Invalid "+Z+" `"+ye+"` of type `"+We+"` supplied to `"+W+"`, expected `object`.");for(var Le in C){var St=C[Le];if(St){var Et=St(Ie,Le,W,Z,ye+"."+Le,xa);if(Et)return Et}}return null})},exact:function(C){return Qe(function(A,M,W,Z,ye){var Ie=A[M],We=kt(Ie);if(We!=="object")return new Fe("Invalid "+Z+" `"+ye+"` of type `"+We+"` supplied to `"+W+"`, expected `object`.");var Le=_h({},A[M],C);for(var St in Le){var Et=C[St];if(!Et)return new Fe("Invalid "+Z+" `"+ye+"` key `"+St+"` supplied to `"+W+"`.\nBad object: "+JSON.stringify(A[M],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(C),null,"  "));var xt=Et(Ie,St,W,Z,ye+"."+St,xa);if(xt)return xt}return null})}};function Se(C,A){return C===A?C!==0||1/C==1/A:C!=C&&A!=A}r(Se,"is");function Fe(C){this.message=C,this.stack=""}r(Fe,"PropTypeError");function Qe(C){var A={},M=0;function W(ye,Ie,We,Le,St,Et,xt){if(Le=Le||ge,Et=Et||We,xt!==xa){if(x){var Gt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Gt.name="Invariant Violation",Gt}if(typeof It<"u"){var Dn=Le+":"+We;!A[Dn]&&M<3&&(il("You are manually calling a React.PropTypes validation function for the `"+Et+"` prop on `"+Le+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),A[Dn]=!0,M++)}}return Ie[We]==null?ye?Ie[We]===null?new Fe("The "+St+" `"+Et+"` is marked as required in `"+Le+"`, but its value is `null`."):new Fe("The "+St+" `"+Et+"` is marked as required in `"+Le+"`, but its value is `undefined`."):null:C(Ie,We,Le,St,Et)}r(W,"checkType");var Z=W.bind(null,!1);return Z.isRequired=W.bind(null,!0),Z}r(Qe,"createChainableTypeChecker");function Ke(C){return Qe(function(A,M,W,Z,ye,Ie){var We=A[M];return kt(We)===C?null:new Fe("Invalid "+Z+" `"+ye+"` of type `"+Vt(We)+"` supplied to `"+W+"`, expected `"+C+"`.")})}r(Ke,"createPrimitiveTypeChecker");function ft(C){switch(typeof C){case"number":case"string":case"undefined":return!0;case"boolean":return!C;case"object":if(Array.isArray(C))return C.every(ft);if(C===null||le(C))return!0;var A=function(ye){var Ie=ye&&(V&&ye[V]||ye[Q]);if(typeof Ie=="function")return Ie}(C);if(!A)return!1;var M,W=A.call(C);if(A!==C.entries){for(;!(M=W.next()).done;)if(!ft(M.value))return!1}else for(;!(M=W.next()).done;){var Z=M.value;if(Z&&!ft(Z[1]))return!1}return!0;default:return!1}}r(ft,"isNode");function kt(C){var A=typeof C;return Array.isArray(C)?"array":C instanceof RegExp?"object":function(M,W){return M==="symbol"||!!W&&(W["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&W instanceof Symbol)}(A,C)?"symbol":A}r(kt,"getPropType");function Vt(C){if(C==null)return""+C;var A=kt(C);if(A==="object"){if(C instanceof Date)return"date";if(C instanceof RegExp)return"regexp"}return A}r(Vt,"getPreciseType");function y(C){var A=Vt(C);switch(A){case"array":case"object":return"an "+A;case"boolean":case"date":case"regexp":return"a "+A;default:return A}}return r(y,"getPostfixForTypeWarning"),Fe.prototype=Error.prototype,be.checkPropTypes=ad,be.resetWarningCache=ad.resetWarningCache,be.PropTypes=be}r(rc,"factoryWithTypeCheckers");var Lt=sd(function(le){var x=nu;le.exports=rc(x.isElement,!0)});function lu(le){var x,V,Q="";if(le)if(typeof le=="object")if(le.push)for(x=0;x<le.length;x++)le[x]&&(V=lu(le[x]))&&(Q&&(Q+=" "),Q+=V);else for(x in le)le[x]&&(V=lu(x))&&(Q&&(Q+=" "),Q+=V);else typeof le=="boolean"||le.call||(Q&&(Q+=" "),Q+=le);return Q}r(lu,"toVal");function Ms(){for(var le,x=0,V="";x<arguments.length;)(le=lu(arguments[x++]))&&(V&&(V+=" "),V+=le);return V}r(Ms,"clsx");function aa(le){var x=!(0<arguments.length&&le!==void 0)||le,V={};return function(Q){var ge=Q.callback,be=Q.indices,Se=Object.keys(be),Fe=!x||Se.every(function(Ke){var ft=be[Ke];return Array.isArray(ft)?0<ft.length:0<=ft}),Qe=Se.length!==Object.keys(V).length||Se.some(function(Ke){var ft=V[Ke],kt=be[Ke];return Array.isArray(kt)?ft.join(",")!==kt.join(","):ft!==kt});V=be,Fe&&Qe&&ge(be)}}r(aa,"createCallbackMemoizer");var _r,Eh=!(typeof j>"u"||!j.document||!j.document.createElement);function bs(le){if((!_r&&_r!==0||le)&&Eh){var x=he.createElement("div");x.style.position="absolute",x.style.top="-9999px",x.style.width="50px",x.style.height="50px",x.style.overflow="scroll",he.body.appendChild(x),_r=x.offsetWidth-x.clientWidth,he.body.removeChild(x)}return _r}r(bs,"scrollbarSize");var bh="observed",rl="requested",ms=function(){function le(){var x,V;Ro(this,le);for(var Q=arguments.length,ge=new Array(Q),be=0;be<Q;be++)ge[be]=arguments[be];return zt(Sn(V=us(this,(x=as(le)).call.apply(x,[this].concat(ge)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),zt(Sn(V),"_calculateSizeAndPositionDataOnNextUpdate",!1),zt(Sn(V),"_onSectionRenderedMemoizer",aa()),zt(Sn(V),"_onScrollMemoizer",aa(!1)),zt(Sn(V),"_invokeOnSectionRenderedHelper",function(){var Se=V.props,Fe=Se.cellLayoutManager,Qe=Se.onSectionRendered;V._onSectionRenderedMemoizer({callback:Qe,indices:{indices:Fe.getLastRenderedIndices()}})}),zt(Sn(V),"_setScrollingContainerRef",function(Se){V._scrollingContainer=Se}),zt(Sn(V),"_updateScrollPositionForScrollToCell",function(){var Se=V.props,Fe=Se.cellLayoutManager,Qe=Se.height,Ke=Se.scrollToAlignment,ft=Se.scrollToCell,kt=Se.width,Vt=V.state,y=Vt.scrollLeft,C=Vt.scrollTop;if(0<=ft){var A=Fe.getScrollPositionForCell({align:Ke,cellIndex:ft,height:Qe,scrollLeft:y,scrollTop:C,width:kt});A.scrollLeft===y&&A.scrollTop===C||V._setScrollPosition(A)}}),zt(Sn(V),"_onScroll",function(Se){if(Se.target===V._scrollingContainer){V._enablePointerEventsAfterDelay();var Fe=V.props,Qe=Fe.cellLayoutManager,Ke=Fe.height,ft=Fe.isScrollingChange,kt=Fe.width,Vt=V._scrollbarSize,y=Qe.getTotalSize(),C=y.height,A=y.width,M=Math.max(0,Math.min(A-kt+Vt,Se.target.scrollLeft)),W=Math.max(0,Math.min(C-Ke+Vt,Se.target.scrollTop));if(V.state.scrollLeft!==M||V.state.scrollTop!==W){var Z=Se.cancelable?bh:rl;V.state.isScrolling||ft(!0),V.setState({isScrolling:!0,scrollLeft:M,scrollPositionChangeReason:Z,scrollTop:W})}V._invokeOnScrollMemoizer({scrollLeft:M,scrollTop:W,totalWidth:A,totalHeight:C})}}),V._scrollbarSize=bs(),V._scrollbarSize===void 0?(V._scrollbarSizeMeasured=!1,V._scrollbarSize=0):V._scrollbarSizeMeasured=!0,V}return r(le,"CollectionView"),cs(le,Hi.PureComponent),Po(le,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var x=this.props,V=x.cellLayoutManager,Q=x.scrollLeft,ge=x.scrollToCell,be=x.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=bs(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=ge?this._updateScrollPositionForScrollToCell():(0<=Q||0<=be)&&this._setScrollPosition({scrollLeft:Q,scrollTop:be}),this._invokeOnSectionRenderedHelper();var Se=V.getTotalSize(),Fe=Se.height,Qe=Se.width;this._invokeOnScrollMemoizer({scrollLeft:Q||0,scrollTop:be||0,totalHeight:Fe,totalWidth:Qe})}},{key:"componentDidUpdate",value:function(x,V){var Q=this.props,ge=Q.height,be=Q.scrollToAlignment,Se=Q.scrollToCell,Fe=Q.width,Qe=this.state,Ke=Qe.scrollLeft,ft=Qe.scrollPositionChangeReason,kt=Qe.scrollTop;ft===rl&&(0<=Ke&&Ke!==V.scrollLeft&&Ke!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=Ke),0<=kt&&kt!==V.scrollTop&&kt!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=kt)),ge===x.height&&be===x.scrollToAlignment&&Se===x.scrollToCell&&Fe===x.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&oi(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var x=this.props,V=x.autoHeight,Q=x.cellCount,ge=x.cellLayoutManager,be=x.className,Se=x.height,Fe=x.horizontalOverscanSize,Qe=x.id,Ke=x.noContentRenderer,ft=x.style,kt=x.verticalOverscanSize,Vt=x.width,y=this.state,C=y.isScrolling,A=y.scrollLeft,M=y.scrollTop;this._lastRenderedCellCount===Q&&this._lastRenderedCellLayoutManager===ge&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=Q,this._lastRenderedCellLayoutManager=ge,this._calculateSizeAndPositionDataOnNextUpdate=!1,ge.calculateSizeAndPositionData());var W=ge.getTotalSize(),Z=W.height,ye=W.width,Ie=Math.max(0,A-Fe),We=Math.max(0,M-kt),Le=Math.min(ye,A+Vt+Fe),St=Math.min(Z,M+Se+kt),Et=0<Se&&0<Vt?ge.cellRenderers({height:St-We,isScrolling:C,width:Le-Ie,x:Ie,y:We}):[],xt={boxSizing:"border-box",direction:"ltr",height:V?"auto":Se,position:"relative",WebkitOverflowScrolling:"touch",width:Vt,willChange:"transform"},Gt=Se<Z?this._scrollbarSize:0,Dn=Vt<ye?this._scrollbarSize:0;return xt.overflowX=ye+Gt<=Vt?"hidden":"auto",xt.overflowY=Z+Dn<=Se?"hidden":"auto",Hi.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Ms("ReactVirtualized__Collection",be),id:Qe,onScroll:this._onScroll,role:"grid",style:Ur({},xt,{},ft),tabIndex:0},0<Q&&Hi.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:Z,maxHeight:Z,maxWidth:ye,overflow:"hidden",pointerEvents:C?"none":"",width:ye}},Et),Q===0&&Ke())}},{key:"_enablePointerEventsAfterDelay",value:function(){var x=this;this._disablePointerEventsTimeoutId&&oi(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=ps(function(){(0,x.props.isScrollingChange)(!1),x._disablePointerEventsTimeoutId=null,x.setState({isScrolling:!1})},150)}},{key:"_invokeOnScrollMemoizer",value:function(x){var V=this,Q=x.scrollLeft,ge=x.scrollTop,be=x.totalHeight,Se=x.totalWidth;this._onScrollMemoizer({callback:function(Fe){var Qe=Fe.scrollLeft,Ke=Fe.scrollTop,ft=V.props,kt=ft.height;(0,ft.onScroll)({clientHeight:kt,clientWidth:ft.width,scrollHeight:be,scrollLeft:Qe,scrollTop:Ke,scrollWidth:Se})},indices:{scrollLeft:Q,scrollTop:ge}})}},{key:"_setScrollPosition",value:function(x){var V=x.scrollLeft,Q=x.scrollTop,ge={scrollPositionChangeReason:rl};0<=V&&(ge.scrollLeft=V),0<=Q&&(ge.scrollTop=Q),(0<=V&&V!==this.state.scrollLeft||0<=Q&&Q!==this.state.scrollTop)&&this.setState(ge)}}],[{key:"getDerivedStateFromProps",value:function(x,V){return x.cellCount!==0||V.scrollLeft===0&&V.scrollTop===0?x.scrollLeft!==V.scrollLeft||x.scrollTop!==V.scrollTop?{scrollLeft:x.scrollLeft!=null?x.scrollLeft:V.scrollLeft,scrollTop:x.scrollTop!=null?x.scrollTop:V.scrollTop,scrollPositionChangeReason:rl}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:rl}}}]),le}();zt(ms,"propTypes",{"aria-label":Lt.string,autoHeight:Lt.bool,cellCount:Lt.number.isRequired,cellLayoutManager:Lt.object.isRequired,className:Lt.string,height:Lt.number.isRequired,id:Lt.string,horizontalOverscanSize:Lt.number.isRequired,isScrollingChange:Lt.func,noContentRenderer:Lt.func.isRequired,onScroll:Lt.func.isRequired,onSectionRendered:Lt.func.isRequired,scrollLeft:Lt.number,scrollToAlignment:Lt.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:Lt.number.isRequired,scrollTop:Lt.number,style:Lt.object,verticalOverscanSize:Lt.number.isRequired,width:Lt.number.isRequired}),zt(ms,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),nl(ms);var Ch=function(){function le(x){var V=x.height,Q=x.width,ge=x.x,be=x.y;Ro(this,le),this.height=V,this.width=Q,this.x=ge,this.y=be,this._indexMap={},this._indices=[]}return r(le,"Section"),Po(le,[{key:"addCellIndex",value:function(x){var V=x.index;this._indexMap[V]||(this._indexMap[V]=!0,this._indices.push(V))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),le}(),Th=function(){function le(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;Ro(this,le),this._sectionSize=x,this._cellMetadata=[],this._sections={}}return r(le,"SectionManager"),Po(le,[{key:"getCellIndices",value:function(x){var V=x.height,Q=x.width,ge=x.x,be=x.y,Se={};return this.getSections({height:V,width:Q,x:ge,y:be}).forEach(function(Fe){return Fe.getCellIndices().forEach(function(Qe){Se[Qe]=Qe})}),Object.keys(Se).map(function(Fe){return Se[Fe]})}},{key:"getCellMetadata",value:function(x){var V=x.index;return this._cellMetadata[V]}},{key:"getSections",value:function(x){for(var V=x.height,Q=x.width,ge=x.x,be=x.y,Se=Math.floor(ge/this._sectionSize),Fe=Math.floor((ge+Q-1)/this._sectionSize),Qe=Math.floor(be/this._sectionSize),Ke=Math.floor((be+V-1)/this._sectionSize),ft=[],kt=Se;kt<=Fe;kt++)for(var Vt=Qe;Vt<=Ke;Vt++){var y="".concat(kt,".").concat(Vt);this._sections[y]||(this._sections[y]=new Ch({height:this._sectionSize,width:this._sectionSize,x:kt*this._sectionSize,y:Vt*this._sectionSize})),ft.push(this._sections[y])}return ft}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var x=this;return Object.keys(this._sections).map(function(V){return x._sections[V].toString()})}},{key:"registerCell",value:function(x){var V=x.cellMetadatum,Q=x.index;this._cellMetadata[Q]=V,this.getSections(V).forEach(function(ge){return ge.addCellIndex({index:Q})})}}]),le}();function pa(le){var x=le.align,V=x===void 0?"auto":x,Q=le.cellOffset,ge=le.cellSize,be=le.containerSize,Se=le.currentOffset,Fe=Q,Qe=Fe-be+ge;switch(V){case"start":return Fe;case"end":return Qe;case"center":return Fe-(be-ge)/2;default:return Math.max(Qe,Math.min(Fe,Se))}}r(pa,"getUpdatedOffsetForIndex");var oc=function(){function le(x,V){var Q;return Ro(this,le),(Q=us(this,as(le).call(this,x,V)))._cellMetadata=[],Q._lastRenderedCellIndices=[],Q._cellCache=[],Q._isScrollingChange=Q._isScrollingChange.bind(Sn(Q)),Q._setCollectionViewRef=Q._setCollectionViewRef.bind(Sn(Q)),Q}return r(le,"Collection"),cs(le,Hi.PureComponent),Po(le,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var x=Us({},this.props);return Hi.createElement(ms,Us({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},x))}},{key:"calculateSizeAndPositionData",value:function(){var x=this.props,V=function(Q){for(var ge=Q.cellCount,be=Q.cellSizeAndPositionGetter,Se=Q.sectionSize,Fe=[],Qe=new Th(Se),Ke=0,ft=0,kt=0;kt<ge;kt++){var Vt=be({index:kt});if(Vt.height==null||isNaN(Vt.height)||Vt.width==null||isNaN(Vt.width)||Vt.x==null||isNaN(Vt.x)||Vt.y==null||isNaN(Vt.y))throw Error("Invalid metadata returned for cell ".concat(kt,`:
        x:`).concat(Vt.x,", y:").concat(Vt.y,", width:").concat(Vt.width,", height:").concat(Vt.height));Ke=Math.max(Ke,Vt.y+Vt.height),ft=Math.max(ft,Vt.x+Vt.width),Fe[kt]=Vt,Qe.registerCell({cellMetadatum:Vt,index:kt})}return{cellMetadata:Fe,height:Ke,sectionManager:Qe,width:ft}}({cellCount:x.cellCount,cellSizeAndPositionGetter:x.cellSizeAndPositionGetter,sectionSize:x.sectionSize});this._cellMetadata=V.cellMetadata,this._sectionManager=V.sectionManager,this._height=V.height,this._width=V.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(x){var V=x.align,Q=x.cellIndex,ge=x.height,be=x.scrollLeft,Se=x.scrollTop,Fe=x.width,Qe=this.props.cellCount;if(0<=Q&&Q<Qe){var Ke=this._cellMetadata[Q];be=pa({align:V,cellOffset:Ke.x,cellSize:Ke.width,containerSize:Fe,currentOffset:be,targetIndex:Q}),Se=pa({align:V,cellOffset:Ke.y,cellSize:Ke.height,containerSize:ge,currentOffset:Se,targetIndex:Q})}return{scrollLeft:be,scrollTop:Se}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(x){var V=this,Q=x.height,ge=x.isScrolling,be=x.width,Se=x.x,Fe=x.y,Qe=this.props,Ke=Qe.cellGroupRenderer,ft=Qe.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:Q,width:be,x:Se,y:Fe}),Ke({cellCache:this._cellCache,cellRenderer:ft,cellSizeAndPositionGetter:function(kt){var Vt=kt.index;return V._sectionManager.getCellMetadata({index:Vt})},indices:this._lastRenderedCellIndices,isScrolling:ge})}},{key:"_isScrollingChange",value:function(x){x||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(x){this._collectionView=x}}]),le}();zt(oc,"propTypes",{"aria-label":Lt.string,cellCount:Lt.number.isRequired,cellGroupRenderer:Lt.func.isRequired,cellRenderer:Lt.func.isRequired,cellSizeAndPositionGetter:Lt.func.isRequired,sectionSize:Lt.number}),zt(oc,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(le){var x=le.cellCache,V=le.cellRenderer,Q=le.cellSizeAndPositionGetter,ge=le.indices,be=le.isScrolling;return ge.map(function(Se){var Fe=Q({index:Se}),Qe={index:Se,isScrolling:be,key:Se,style:{height:Fe.height,left:Fe.x,position:"absolute",top:Fe.y,width:Fe.width}};return be?(Se in x||(x[Se]=V(Qe)),x[Se]):V(Qe)}).filter(function(Se){return!!Se})}});var du=function(){function le(x,V){var Q;return Ro(this,le),(Q=us(this,as(le).call(this,x,V)))._registerChild=Q._registerChild.bind(Sn(Q)),Q}return r(le,"ColumnSizer"),cs(le,Hi.PureComponent),Po(le,[{key:"componentDidUpdate",value:function(x){var V=this.props,Q=V.columnMaxWidth,ge=V.columnMinWidth,be=V.columnCount,Se=V.width;Q===x.columnMaxWidth&&ge===x.columnMinWidth&&be===x.columnCount&&Se===x.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var x=this.props,V=x.children,Q=x.columnMaxWidth,ge=x.columnMinWidth,be=x.columnCount,Se=x.width,Fe=ge||1,Qe=Q?Math.min(Q,Se):Se,Ke=Se/be;return Ke=Math.max(Fe,Ke),Ke=Math.min(Qe,Ke),Ke=Math.floor(Ke),V({adjustedWidth:Math.min(Se,Ke*be),columnWidth:Ke,getColumnWidth:function(){return Ke},registerChild:this._registerChild})}},{key:"_registerChild",value:function(x){if(x&&typeof x.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=x,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),le}();function cu(le){var x=le.cellCount,V=le.cellSize,Q=le.computeMetadataCallback,ge=le.computeMetadataCallbackProps,be=le.nextCellsCount,Se=le.nextCellSize,Fe=le.nextScrollToIndex,Qe=le.scrollToIndex,Ke=le.updateScrollOffsetForScrollToIndex;x===be&&(typeof V!="number"&&typeof Se!="number"||V===Se)||(Q(ge),0<=Qe&&Qe===Fe&&Ke())}r(cu,"calculateSizeAndPositionDataAndUpdateScrollOffset"),zt(du,"propTypes",{children:Lt.func.isRequired,columnMaxWidth:Lt.number,columnMinWidth:Lt.number,columnCount:Lt.number.isRequired,width:Lt.number.isRequired});var Cs,ld=function(){function le(x){var V=x.cellCount,Q=x.cellSizeGetter,ge=x.estimatedCellSize;Ro(this,le),zt(this,"_cellSizeAndPositionData",{}),zt(this,"_lastMeasuredIndex",-1),zt(this,"_lastBatchedIndex",-1),zt(this,"_cellCount",void 0),zt(this,"_cellSizeGetter",void 0),zt(this,"_estimatedCellSize",void 0),this._cellSizeGetter=Q,this._cellCount=V,this._estimatedCellSize=ge}return r(le,"CellSizeAndPositionManager"),Po(le,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(x){var V=x.cellCount,Q=x.estimatedCellSize,ge=x.cellSizeGetter;this._cellCount=V,this._estimatedCellSize=Q,this._cellSizeGetter=ge}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(x){if(x<0||x>=this._cellCount)throw Error("Requested index ".concat(x," is outside of range 0..").concat(this._cellCount));if(x>this._lastMeasuredIndex)for(var V=this.getSizeAndPositionOfLastMeasuredCell(),Q=V.offset+V.size,ge=this._lastMeasuredIndex+1;ge<=x;ge++){var be=this._cellSizeGetter({index:ge});if(be===void 0||isNaN(be))throw Error("Invalid size returned for cell ".concat(ge," of value ").concat(be));be===null?(this._cellSizeAndPositionData[ge]={offset:Q,size:0},this._lastBatchedIndex=x):(this._cellSizeAndPositionData[ge]={offset:Q,size:be},Q+=be,this._lastMeasuredIndex=x)}return this._cellSizeAndPositionData[x]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var x=this.getSizeAndPositionOfLastMeasuredCell();return x.offset+x.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(x){var V=x.align,Q=V===void 0?"auto":V,ge=x.containerSize,be=x.currentOffset,Se=x.targetIndex;if(ge<=0)return 0;var Fe,Qe=this.getSizeAndPositionOfCell(Se),Ke=Qe.offset,ft=Ke-ge+Qe.size;switch(Q){case"start":Fe=Ke;break;case"end":Fe=ft;break;case"center":Fe=Ke-(ge-Qe.size)/2;break;default:Fe=Math.max(ft,Math.min(Ke,be))}var kt=this.getTotalSize();return Math.max(0,Math.min(kt-ge,Fe))}},{key:"getVisibleCellRange",value:function(x){var V=x.containerSize,Q=x.offset;if(this.getTotalSize()===0)return{};var ge=Q+V,be=this._findNearestCell(Q),Se=this.getSizeAndPositionOfCell(be);Q=Se.offset+Se.size;for(var Fe=be;Q<ge&&Fe<this._cellCount-1;)Fe++,Q+=this.getSizeAndPositionOfCell(Fe).size;return{start:be,stop:Fe}}},{key:"resetCell",value:function(x){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,x-1)}},{key:"_binarySearch",value:function(x,V,Q){for(;V<=x;){var ge=V+Math.floor((x-V)/2),be=this.getSizeAndPositionOfCell(ge).offset;if(be===Q)return ge;be<Q?V=ge+1:Q<be&&(x=ge-1)}return 0<V?V-1:0}},{key:"_exponentialSearch",value:function(x,V){for(var Q=1;x<this._cellCount&&this.getSizeAndPositionOfCell(x).offset<V;)x+=Q,Q*=2;return this._binarySearch(Math.min(x,this._cellCount-1),Math.floor(x/2),V)}},{key:"_findNearestCell",value:function(x){if(isNaN(x))throw Error("Invalid offset ".concat(x," specified"));x=Math.max(0,x);var V=this.getSizeAndPositionOfLastMeasuredCell(),Q=Math.max(0,this._lastMeasuredIndex);return V.offset>=x?this._binarySearch(Q,0,x):this._exponentialSearch(Q,x)}}]),le}(),Ih=r(function(){return typeof j<"u"&&j.chrome?16777100:15e5},"getMaxElementSize"),Ps=function(){function le(x){var V=x.maxScrollSize,Q=V===void 0?Ih():V,ge=tl(x,["maxScrollSize"]);Ro(this,le),zt(this,"_cellSizeAndPositionManager",void 0),zt(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new ld(ge),this._maxScrollSize=Q}return r(le,"ScalingCellSizeAndPositionManager"),Po(le,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(x){this._cellSizeAndPositionManager.configure(x)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(x){var V=x.containerSize,Q=x.offset,ge=this._cellSizeAndPositionManager.getTotalSize(),be=this.getTotalSize(),Se=this._getOffsetPercentage({containerSize:V,offset:Q,totalSize:be});return Math.round(Se*(be-ge))}},{key:"getSizeAndPositionOfCell",value:function(x){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(x)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(x){var V=x.align,Q=V===void 0?"auto":V,ge=x.containerSize,be=x.currentOffset,Se=x.targetIndex;be=this._safeOffsetToOffset({containerSize:ge,offset:be});var Fe=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:Q,containerSize:ge,currentOffset:be,targetIndex:Se});return this._offsetToSafeOffset({containerSize:ge,offset:Fe})}},{key:"getVisibleCellRange",value:function(x){var V=x.containerSize,Q=x.offset;return Q=this._safeOffsetToOffset({containerSize:V,offset:Q}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:V,offset:Q})}},{key:"resetCell",value:function(x){this._cellSizeAndPositionManager.resetCell(x)}},{key:"_getOffsetPercentage",value:function(x){var V=x.containerSize,Q=x.offset,ge=x.totalSize;return ge<=V?0:Q/(ge-V)}},{key:"_offsetToSafeOffset",value:function(x){var V=x.containerSize,Q=x.offset,ge=this._cellSizeAndPositionManager.getTotalSize(),be=this.getTotalSize();if(ge===be)return Q;var Se=this._getOffsetPercentage({containerSize:V,offset:Q,totalSize:ge});return Math.round(Se*(be-V))}},{key:"_safeOffsetToOffset",value:function(x){var V=x.containerSize,Q=x.offset,ge=this._cellSizeAndPositionManager.getTotalSize(),be=this.getTotalSize();if(ge===be)return Q;var Se=this._getOffsetPercentage({containerSize:V,offset:Q,totalSize:be});return Math.round(Se*(ge-V))}}]),le}();function uu(le){var x=le.cellCount,V=le.overscanCellsCount,Q=le.scrollDirection,ge=le.startIndex,be=le.stopIndex;return Q===1?{overscanStartIndex:Math.max(0,ge),overscanStopIndex:Math.min(x-1,be+V)}:{overscanStartIndex:Math.max(0,ge-V),overscanStopIndex:Math.min(x-1,be)}}r(uu,"defaultOverscanIndicesGetter");function fu(le){var x=le.cellSize,V=le.cellSizeAndPositionManager,Q=le.previousCellsCount,ge=le.previousCellSize,be=le.previousScrollToAlignment,Se=le.previousScrollToIndex,Fe=le.previousSize,Qe=le.scrollOffset,Ke=le.scrollToAlignment,ft=le.scrollToIndex,kt=le.size,Vt=le.sizeJustIncreasedFromZero,y=le.updateScrollIndexCallback,C=V.getCellCount(),A=0<=ft&&ft<C;A&&(kt!==Fe||Vt||!ge||typeof x=="number"&&x!==ge||Ke!==be||ft!==Se)?y(ft):!A&&0<C&&(kt<Fe||C<Q)&&Qe>V.getTotalSize()-kt&&y(C-1)}r(fu,"updateScrollIndexHelper");function ks(le){for(var x=le.cellCache,V=le.cellRenderer,Q=le.columnSizeAndPositionManager,ge=le.columnStartIndex,be=le.columnStopIndex,Se=le.deferredMeasurementCache,Fe=le.horizontalOffsetAdjustment,Qe=le.isScrolling,Ke=le.isScrollingOptOut,ft=le.parent,kt=le.rowSizeAndPositionManager,Vt=le.rowStartIndex,y=le.rowStopIndex,C=le.styleCache,A=le.verticalOffsetAdjustment,M=le.visibleColumnIndices,W=le.visibleRowIndices,Z=[],ye=Q.areOffsetsAdjusted()||kt.areOffsetsAdjusted(),Ie=!Qe&&!ye,We=Vt;We<=y;We++)for(var Le=kt.getSizeAndPositionOfCell(We),St=ge;St<=be;St++){var Et=Q.getSizeAndPositionOfCell(St),xt=St>=M.start&&St<=M.stop&&We>=W.start&&We<=W.stop,Gt="".concat(We,"-").concat(St),Dn=void 0;Ie&&C[Gt]?Dn=C[Gt]:Se&&!Se.has(We,St)?Dn={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(Dn={height:Le.size,left:Et.offset+Fe,position:"absolute",top:Le.offset+A,width:Et.size},C[Gt]=Dn);var ui={columnIndex:St,isScrolling:Qe,isVisible:xt,key:Gt,parent:ft,rowIndex:We,style:Dn},Ln=void 0;(Ln=!Ke&&!Qe||Fe||A?V(ui):(x[Gt]||(x[Gt]=V(ui)),x[Gt]))!=null&&Ln!==!1&&(Ua(ft,Ln),Z.push(Ln))}return Z}r(ks,"defaultCellRangeRenderer");function Ua(le,x){x&&(x.type&&x.type.__internalCellMeasurerFlag&&(x=x.props.children),x&&x.props&&x.props.style===void 0&&le.__warnedAboutMissingStyle!==!0&&(le.__warnedAboutMissingStyle=!0,It.warn("Rendered cell should include style property for positioning.")))}r(Ua,"warnAboutMissingStyle");var wh=(Cs=typeof j<"u"?j:typeof $l<"u"?$l:{}).requestAnimationFrame||Cs.webkitRequestAnimationFrame||Cs.mozRequestAnimationFrame||Cs.oRequestAnimationFrame||Cs.msRequestAnimationFrame||function(le){return Cs.setTimeout(le,1e3/60)},Va=Cs.cancelAnimationFrame||Cs.webkitCancelAnimationFrame||Cs.mozCancelAnimationFrame||Cs.oCancelAnimationFrame||Cs.msCancelAnimationFrame||function(le){Cs.clearTimeout(le)},ma=wh,Ah=Va,Ha=r(function(le){return Ah(le.id)},"cancelAnimationTimeout"),wr=r(function(le,x){var V;Promise.resolve().then(function(){V=Date.now()});var Q={id:ma(r(function ge(){Date.now()-V>=x?le.call():Q.id=ma(ge)},"timeout"))};return Q},"requestAnimationTimeout"),sc="observed",dd="requested",Vs=function(){function le(x){var V;Ro(this,le),zt(Sn(V=us(this,as(le).call(this,x))),"_onGridRenderedMemoizer",aa()),zt(Sn(V),"_onScrollMemoizer",aa(!1)),zt(Sn(V),"_deferredInvalidateColumnIndex",null),zt(Sn(V),"_deferredInvalidateRowIndex",null),zt(Sn(V),"_recomputeScrollLeftFlag",!1),zt(Sn(V),"_recomputeScrollTopFlag",!1),zt(Sn(V),"_horizontalScrollBarSize",0),zt(Sn(V),"_verticalScrollBarSize",0),zt(Sn(V),"_scrollbarPresenceChanged",!1),zt(Sn(V),"_scrollingContainer",void 0),zt(Sn(V),"_childrenToDisplay",void 0),zt(Sn(V),"_columnStartIndex",void 0),zt(Sn(V),"_columnStopIndex",void 0),zt(Sn(V),"_rowStartIndex",void 0),zt(Sn(V),"_rowStopIndex",void 0),zt(Sn(V),"_renderedColumnStartIndex",0),zt(Sn(V),"_renderedColumnStopIndex",0),zt(Sn(V),"_renderedRowStartIndex",0),zt(Sn(V),"_renderedRowStopIndex",0),zt(Sn(V),"_initialScrollTop",void 0),zt(Sn(V),"_initialScrollLeft",void 0),zt(Sn(V),"_disablePointerEventsTimeoutId",void 0),zt(Sn(V),"_styleCache",{}),zt(Sn(V),"_cellCache",{}),zt(Sn(V),"_debounceScrollEndedCallback",function(){V._disablePointerEventsTimeoutId=null,V.setState({isScrolling:!1,needToResetStyleCache:!1})}),zt(Sn(V),"_invokeOnGridRenderedHelper",function(){var be=V.props.onSectionRendered;V._onGridRenderedMemoizer({callback:be,indices:{columnOverscanStartIndex:V._columnStartIndex,columnOverscanStopIndex:V._columnStopIndex,columnStartIndex:V._renderedColumnStartIndex,columnStopIndex:V._renderedColumnStopIndex,rowOverscanStartIndex:V._rowStartIndex,rowOverscanStopIndex:V._rowStopIndex,rowStartIndex:V._renderedRowStartIndex,rowStopIndex:V._renderedRowStopIndex}})}),zt(Sn(V),"_setScrollingContainerRef",function(be){V._scrollingContainer=be}),zt(Sn(V),"_onScroll",function(be){be.target===V._scrollingContainer&&V.handleScrollEvent(be.target)});var Q=new Ps({cellCount:x.columnCount,cellSizeGetter:function(be){return le._wrapSizeGetter(x.columnWidth)(be)},estimatedCellSize:le._getEstimatedColumnSize(x)}),ge=new Ps({cellCount:x.rowCount,cellSizeGetter:function(be){return le._wrapSizeGetter(x.rowHeight)(be)},estimatedCellSize:le._getEstimatedRowSize(x)});return V.state={instanceProps:{columnSizeAndPositionManager:Q,rowSizeAndPositionManager:ge,prevColumnWidth:x.columnWidth,prevRowHeight:x.rowHeight,prevColumnCount:x.columnCount,prevRowCount:x.rowCount,prevIsScrolling:x.isScrolling===!0,prevScrollToColumn:x.scrollToColumn,prevScrollToRow:x.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<x.scrollToRow&&(V._initialScrollTop=V._getCalculatedScrollTop(x,V.state)),0<x.scrollToColumn&&(V._initialScrollLeft=V._getCalculatedScrollLeft(x,V.state)),V}return r(le,"Grid"),cs(le,Hi.PureComponent),Po(le,[{key:"getOffsetForCell",value:function(x){var V=0<arguments.length&&x!==void 0?x:{},Q=V.alignment,ge=Q===void 0?this.props.scrollToAlignment:Q,be=V.columnIndex,Se=be===void 0?this.props.scrollToColumn:be,Fe=V.rowIndex,Qe=Fe===void 0?this.props.scrollToRow:Fe,Ke=Ur({},this.props,{scrollToAlignment:ge,scrollToColumn:Se,scrollToRow:Qe});return{scrollLeft:this._getCalculatedScrollLeft(Ke),scrollTop:this._getCalculatedScrollTop(Ke)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(x){var V=x.scrollLeft,Q=V===void 0?0:V,ge=x.scrollTop,be=ge===void 0?0:ge;if(!(be<0)){this._debounceScrollEnded();var Se=this.props,Fe=Se.autoHeight,Qe=Se.autoWidth,Ke=Se.height,ft=Se.width,kt=this.state.instanceProps,Vt=kt.scrollbarSize,y=kt.rowSizeAndPositionManager.getTotalSize(),C=kt.columnSizeAndPositionManager.getTotalSize(),A=Math.min(Math.max(0,C-ft+Vt),Q),M=Math.min(Math.max(0,y-Ke+Vt),be);if(this.state.scrollLeft!==A||this.state.scrollTop!==M){var W={isScrolling:!0,scrollDirectionHorizontal:A!==this.state.scrollLeft?A>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:M!==this.state.scrollTop?M>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:sc};Fe||(W.scrollTop=M),Qe||(W.scrollLeft=A),W.needToResetStyleCache=!1,this.setState(W)}this._invokeOnScrollMemoizer({scrollLeft:A,scrollTop:M,totalColumnsWidth:C,totalRowsHeight:y})}}},{key:"invalidateCellSizeAfterRender",value:function(x){var V=x.columnIndex,Q=x.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,V):V,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,Q):Q}},{key:"measureAllCells",value:function(){var x=this.props,V=x.columnCount,Q=x.rowCount,ge=this.state.instanceProps;ge.columnSizeAndPositionManager.getSizeAndPositionOfCell(V-1),ge.rowSizeAndPositionManager.getSizeAndPositionOfCell(Q-1)}},{key:"recomputeGridSize",value:function(x){var V=0<arguments.length&&x!==void 0?x:{},Q=V.columnIndex,ge=Q===void 0?0:Q,be=V.rowIndex,Se=be===void 0?0:be,Fe=this.props,Qe=Fe.scrollToColumn,Ke=Fe.scrollToRow,ft=this.state.instanceProps;ft.columnSizeAndPositionManager.resetCell(ge),ft.rowSizeAndPositionManager.resetCell(Se),this._recomputeScrollLeftFlag=0<=Qe&&(this.state.scrollDirectionHorizontal===1?ge<=Qe:Qe<=ge),this._recomputeScrollTopFlag=0<=Ke&&(this.state.scrollDirectionVertical===1?Se<=Ke:Ke<=Se),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(x){var V=x.columnIndex,Q=x.rowIndex,ge=this.props.columnCount,be=this.props;1<ge&&V!==void 0&&this._updateScrollLeftForScrollToColumn(Ur({},be,{scrollToColumn:V})),Q!==void 0&&this._updateScrollTopForScrollToRow(Ur({},be,{scrollToRow:Q}))}},{key:"componentDidMount",value:function(){var x=this.props,V=x.getScrollbarSize,Q=x.height,ge=x.scrollLeft,be=x.scrollToColumn,Se=x.scrollTop,Fe=x.scrollToRow,Qe=x.width,Ke=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),Ke.scrollbarSizeMeasured||this.setState(function(Vt){var y=Ur({},Vt,{needToResetStyleCache:!1});return y.instanceProps.scrollbarSize=V(),y.instanceProps.scrollbarSizeMeasured=!0,y}),typeof ge=="number"&&0<=ge||typeof Se=="number"&&0<=Se){var ft=le._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:ge,scrollTop:Se});ft&&(ft.needToResetStyleCache=!1,this.setState(ft))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var kt=0<Q&&0<Qe;0<=be&&kt&&this._updateScrollLeftForScrollToColumn(),0<=Fe&&kt&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:ge||0,scrollTop:Se||0,totalColumnsWidth:Ke.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:Ke.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(x,V){var Q=this,ge=this.props,be=ge.autoHeight,Se=ge.autoWidth,Fe=ge.columnCount,Qe=ge.height,Ke=ge.rowCount,ft=ge.scrollToAlignment,kt=ge.scrollToColumn,Vt=ge.scrollToRow,y=ge.width,C=this.state,A=C.scrollLeft,M=C.scrollPositionChangeReason,W=C.scrollTop,Z=C.instanceProps;this._handleInvalidatedGridSize();var ye=0<Fe&&x.columnCount===0||0<Ke&&x.rowCount===0;M===dd&&(!Se&&0<=A&&(A!==this._scrollingContainer.scrollLeft||ye)&&(this._scrollingContainer.scrollLeft=A),!be&&0<=W&&(W!==this._scrollingContainer.scrollTop||ye)&&(this._scrollingContainer.scrollTop=W));var Ie=(x.width===0||x.height===0)&&0<Qe&&0<y;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):fu({cellSizeAndPositionManager:Z.columnSizeAndPositionManager,previousCellsCount:x.columnCount,previousCellSize:x.columnWidth,previousScrollToAlignment:x.scrollToAlignment,previousScrollToIndex:x.scrollToColumn,previousSize:x.width,scrollOffset:A,scrollToAlignment:ft,scrollToIndex:kt,size:y,sizeJustIncreasedFromZero:Ie,updateScrollIndexCallback:function(){return Q._updateScrollLeftForScrollToColumn(Q.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):fu({cellSizeAndPositionManager:Z.rowSizeAndPositionManager,previousCellsCount:x.rowCount,previousCellSize:x.rowHeight,previousScrollToAlignment:x.scrollToAlignment,previousScrollToIndex:x.scrollToRow,previousSize:x.height,scrollOffset:W,scrollToAlignment:ft,scrollToIndex:Vt,size:Qe,sizeJustIncreasedFromZero:Ie,updateScrollIndexCallback:function(){return Q._updateScrollTopForScrollToRow(Q.props)}}),this._invokeOnGridRenderedHelper(),A!==V.scrollLeft||W!==V.scrollTop){var We=Z.rowSizeAndPositionManager.getTotalSize(),Le=Z.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:A,scrollTop:W,totalColumnsWidth:Le,totalRowsHeight:We})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Ha(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var x=this.props,V=x.autoContainerWidth,Q=x.autoHeight,ge=x.autoWidth,be=x.className,Se=x.containerProps,Fe=x.containerRole,Qe=x.containerStyle,Ke=x.height,ft=x.id,kt=x.noContentRenderer,Vt=x.role,y=x.style,C=x.tabIndex,A=x.width,M=this.state,W=M.instanceProps,Z=M.needToResetStyleCache,ye=this._isScrolling(),Ie={boxSizing:"border-box",direction:"ltr",height:Q?"auto":Ke,position:"relative",width:ge?"auto":A,WebkitOverflowScrolling:"touch",willChange:"transform"};Z&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var We=W.columnSizeAndPositionManager.getTotalSize(),Le=W.rowSizeAndPositionManager.getTotalSize(),St=Ke<Le?W.scrollbarSize:0,Et=A<We?W.scrollbarSize:0;Et===this._horizontalScrollBarSize&&St===this._verticalScrollBarSize||(this._horizontalScrollBarSize=Et,this._verticalScrollBarSize=St,this._scrollbarPresenceChanged=!0),Ie.overflowX=We+St<=A?"hidden":"auto",Ie.overflowY=Le+Et<=Ke?"hidden":"auto";var xt=this._childrenToDisplay,Gt=xt.length===0&&0<Ke&&0<A;return Hi.createElement("div",Us({ref:this._setScrollingContainerRef},Se,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Ms("ReactVirtualized__Grid",be),id:ft,onScroll:this._onScroll,role:Vt,style:Ur({},Ie,{},y),tabIndex:C}),0<xt.length&&Hi.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:Fe,style:Ur({width:V?"auto":We,height:Le,maxWidth:We,maxHeight:Le,overflow:"hidden",pointerEvents:ye?"none":"",position:"relative"},Qe)},xt),Gt&&kt())}},{key:"_calculateChildrenToRender",value:function(x,V){var Q=0<arguments.length&&x!==void 0?x:this.props,ge=1<arguments.length&&V!==void 0?V:this.state,be=Q.cellRenderer,Se=Q.cellRangeRenderer,Fe=Q.columnCount,Qe=Q.deferredMeasurementCache,Ke=Q.height,ft=Q.overscanColumnCount,kt=Q.overscanIndicesGetter,Vt=Q.overscanRowCount,y=Q.rowCount,C=Q.width,A=Q.isScrollingOptOut,M=ge.scrollDirectionHorizontal,W=ge.scrollDirectionVertical,Z=ge.instanceProps,ye=0<this._initialScrollTop?this._initialScrollTop:ge.scrollTop,Ie=0<this._initialScrollLeft?this._initialScrollLeft:ge.scrollLeft,We=this._isScrolling(Q,ge);if(this._childrenToDisplay=[],0<Ke&&0<C){var Le=Z.columnSizeAndPositionManager.getVisibleCellRange({containerSize:C,offset:Ie}),St=Z.rowSizeAndPositionManager.getVisibleCellRange({containerSize:Ke,offset:ye}),Et=Z.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:C,offset:Ie}),xt=Z.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:Ke,offset:ye});this._renderedColumnStartIndex=Le.start,this._renderedColumnStopIndex=Le.stop,this._renderedRowStartIndex=St.start,this._renderedRowStopIndex=St.stop;var Gt=kt({direction:"horizontal",cellCount:Fe,overscanCellsCount:ft,scrollDirection:M,startIndex:typeof Le.start=="number"?Le.start:0,stopIndex:typeof Le.stop=="number"?Le.stop:-1}),Dn=kt({direction:"vertical",cellCount:y,overscanCellsCount:Vt,scrollDirection:W,startIndex:typeof St.start=="number"?St.start:0,stopIndex:typeof St.stop=="number"?St.stop:-1}),ui=Gt.overscanStartIndex,Ln=Gt.overscanStopIndex,Bi=Dn.overscanStartIndex,ir=Dn.overscanStopIndex;if(Qe){if(!Qe.hasFixedHeight()){for(var ko=Bi;ko<=ir;ko++)if(!Qe.has(ko,0)){ui=0,Ln=Fe-1;break}}if(!Qe.hasFixedWidth()){for(var _o=ui;_o<=Ln;_o++)if(!Qe.has(0,_o)){Bi=0,ir=y-1;break}}}this._childrenToDisplay=Se({cellCache:this._cellCache,cellRenderer:be,columnSizeAndPositionManager:Z.columnSizeAndPositionManager,columnStartIndex:ui,columnStopIndex:Ln,deferredMeasurementCache:Qe,horizontalOffsetAdjustment:Et,isScrolling:We,isScrollingOptOut:A,parent:this,rowSizeAndPositionManager:Z.rowSizeAndPositionManager,rowStartIndex:Bi,rowStopIndex:ir,scrollLeft:Ie,scrollTop:ye,styleCache:this._styleCache,verticalOffsetAdjustment:xt,visibleColumnIndices:Le,visibleRowIndices:St}),this._columnStartIndex=ui,this._columnStopIndex=Ln,this._rowStartIndex=Bi,this._rowStopIndex=ir}}},{key:"_debounceScrollEnded",value:function(){var x=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Ha(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=wr(this._debounceScrollEndedCallback,x)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var x=this._deferredInvalidateColumnIndex,V=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:x,rowIndex:V})}}},{key:"_invokeOnScrollMemoizer",value:function(x){var V=this,Q=x.scrollLeft,ge=x.scrollTop,be=x.totalColumnsWidth,Se=x.totalRowsHeight;this._onScrollMemoizer({callback:function(Fe){var Qe=Fe.scrollLeft,Ke=Fe.scrollTop,ft=V.props,kt=ft.height;(0,ft.onScroll)({clientHeight:kt,clientWidth:ft.width,scrollHeight:Se,scrollLeft:Qe,scrollTop:Ke,scrollWidth:be})},indices:{scrollLeft:Q,scrollTop:ge}})}},{key:"_isScrolling",value:function(x,V){var Q=0<arguments.length&&x!==void 0?x:this.props,ge=1<arguments.length&&V!==void 0?V:this.state;return Object.hasOwnProperty.call(Q,"isScrolling")?Boolean(Q.isScrolling):Boolean(ge.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var x=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,x({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(x){var V=x.scrollLeft,Q=x.scrollTop,ge=le._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:V,scrollTop:Q});ge&&(ge.needToResetStyleCache=!1,this.setState(ge))}},{key:"_getCalculatedScrollLeft",value:function(x,V){var Q=0<arguments.length&&x!==void 0?x:this.props,ge=1<arguments.length&&V!==void 0?V:this.state;return le._getCalculatedScrollLeft(Q,ge)}},{key:"_updateScrollLeftForScrollToColumn",value:function(x,V){var Q=0<arguments.length&&x!==void 0?x:this.props,ge=1<arguments.length&&V!==void 0?V:this.state,be=le._getScrollLeftForScrollToColumnStateUpdate(Q,ge);be&&(be.needToResetStyleCache=!1,this.setState(be))}},{key:"_getCalculatedScrollTop",value:function(x,V){var Q=0<arguments.length&&x!==void 0?x:this.props,ge=1<arguments.length&&V!==void 0?V:this.state;return le._getCalculatedScrollTop(Q,ge)}},{key:"_resetStyleCache",value:function(){var x=this._styleCache,V=this._cellCache,Q=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var ge=this._rowStartIndex;ge<=this._rowStopIndex;ge++)for(var be=this._columnStartIndex;be<=this._columnStopIndex;be++){var Se="".concat(ge,"-").concat(be);this._styleCache[Se]=x[Se],Q&&(this._cellCache[Se]=V[Se])}}},{key:"_updateScrollTopForScrollToRow",value:function(x,V){var Q=0<arguments.length&&x!==void 0?x:this.props,ge=1<arguments.length&&V!==void 0?V:this.state,be=le._getScrollTopForScrollToRowStateUpdate(Q,ge);be&&(be.needToResetStyleCache=!1,this.setState(be))}}],[{key:"getDerivedStateFromProps",value:function(x,V){var Q={};x.columnCount===0&&V.scrollLeft!==0||x.rowCount===0&&V.scrollTop!==0?(Q.scrollLeft=0,Q.scrollTop=0):(x.scrollLeft!==V.scrollLeft&&x.scrollToColumn<0||x.scrollTop!==V.scrollTop&&x.scrollToRow<0)&&Object.assign(Q,le._getScrollToPositionStateUpdate({prevState:V,scrollLeft:x.scrollLeft,scrollTop:x.scrollTop}));var ge,be,Se=V.instanceProps;return Q.needToResetStyleCache=!1,x.columnWidth===Se.prevColumnWidth&&x.rowHeight===Se.prevRowHeight||(Q.needToResetStyleCache=!0),Se.columnSizeAndPositionManager.configure({cellCount:x.columnCount,estimatedCellSize:le._getEstimatedColumnSize(x),cellSizeGetter:le._wrapSizeGetter(x.columnWidth)}),Se.rowSizeAndPositionManager.configure({cellCount:x.rowCount,estimatedCellSize:le._getEstimatedRowSize(x),cellSizeGetter:le._wrapSizeGetter(x.rowHeight)}),Se.prevColumnCount!==0&&Se.prevRowCount!==0||(Se.prevColumnCount=0,Se.prevRowCount=0),x.autoHeight&&x.isScrolling===!1&&Se.prevIsScrolling===!0&&Object.assign(Q,{isScrolling:!1}),cu({cellCount:Se.prevColumnCount,cellSize:typeof Se.prevColumnWidth=="number"?Se.prevColumnWidth:null,computeMetadataCallback:function(){return Se.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:x,nextCellsCount:x.columnCount,nextCellSize:typeof x.columnWidth=="number"?x.columnWidth:null,nextScrollToIndex:x.scrollToColumn,scrollToIndex:Se.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){ge=le._getScrollLeftForScrollToColumnStateUpdate(x,V)}}),cu({cellCount:Se.prevRowCount,cellSize:typeof Se.prevRowHeight=="number"?Se.prevRowHeight:null,computeMetadataCallback:function(){return Se.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:x,nextCellsCount:x.rowCount,nextCellSize:typeof x.rowHeight=="number"?x.rowHeight:null,nextScrollToIndex:x.scrollToRow,scrollToIndex:Se.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){be=le._getScrollTopForScrollToRowStateUpdate(x,V)}}),Se.prevColumnCount=x.columnCount,Se.prevColumnWidth=x.columnWidth,Se.prevIsScrolling=x.isScrolling===!0,Se.prevRowCount=x.rowCount,Se.prevRowHeight=x.rowHeight,Se.prevScrollToColumn=x.scrollToColumn,Se.prevScrollToRow=x.scrollToRow,Se.scrollbarSize=x.getScrollbarSize(),Se.scrollbarSize===void 0?(Se.scrollbarSizeMeasured=!1,Se.scrollbarSize=0):Se.scrollbarSizeMeasured=!0,Q.instanceProps=Se,Ur({},Q,{},ge,{},be)}},{key:"_getEstimatedColumnSize",value:function(x){return typeof x.columnWidth=="number"?x.columnWidth:x.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(x){return typeof x.rowHeight=="number"?x.rowHeight:x.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(x){var V=x.prevState,Q=x.scrollLeft,ge=x.scrollTop,be={scrollPositionChangeReason:dd};return typeof Q=="number"&&0<=Q&&(be.scrollDirectionHorizontal=Q>V.scrollLeft?1:-1,be.scrollLeft=Q),typeof ge=="number"&&0<=ge&&(be.scrollDirectionVertical=ge>V.scrollTop?1:-1,be.scrollTop=ge),typeof Q=="number"&&0<=Q&&Q!==V.scrollLeft||typeof ge=="number"&&0<=ge&&ge!==V.scrollTop?be:{}}},{key:"_wrapSizeGetter",value:function(x){return typeof x=="function"?x:function(){return x}}},{key:"_getCalculatedScrollLeft",value:function(x,V){var Q=x.columnCount,ge=x.height,be=x.scrollToAlignment,Se=x.scrollToColumn,Fe=x.width,Qe=V.scrollLeft,Ke=V.instanceProps;if(0<Q){var ft=Q-1,kt=Se<0?ft:Math.min(ft,Se),Vt=Ke.rowSizeAndPositionManager.getTotalSize(),y=Ke.scrollbarSizeMeasured&&ge<Vt?Ke.scrollbarSize:0;return Ke.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:be,containerSize:Fe-y,currentOffset:Qe,targetIndex:kt})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(x,V){var Q=V.scrollLeft,ge=le._getCalculatedScrollLeft(x,V);return typeof ge=="number"&&0<=ge&&Q!==ge?le._getScrollToPositionStateUpdate({prevState:V,scrollLeft:ge,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(x,V){var Q=x.height,ge=x.rowCount,be=x.scrollToAlignment,Se=x.scrollToRow,Fe=x.width,Qe=V.scrollTop,Ke=V.instanceProps;if(0<ge){var ft=ge-1,kt=Se<0?ft:Math.min(ft,Se),Vt=Ke.columnSizeAndPositionManager.getTotalSize(),y=Ke.scrollbarSizeMeasured&&Fe<Vt?Ke.scrollbarSize:0;return Ke.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:be,containerSize:Q-y,currentOffset:Qe,targetIndex:kt})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(x,V){var Q=V.scrollTop,ge=le._getCalculatedScrollTop(x,V);return typeof ge=="number"&&0<=ge&&Q!==ge?le._getScrollToPositionStateUpdate({prevState:V,scrollLeft:-1,scrollTop:ge}):{}}}]),le}();zt(Vs,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:ks,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:bs,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:uu,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),nl(Vs);function ol(le){var x=le.cellCount,V=le.overscanCellsCount,Q=le.scrollDirection,ge=le.startIndex,be=le.stopIndex;return V=Math.max(1,V),Q===1?{overscanStartIndex:Math.max(0,ge-1),overscanStopIndex:Math.min(x-1,be+V)}:{overscanStartIndex:Math.max(0,ge-V),overscanStopIndex:Math.min(x-1,be+1)}}r(ol,"defaultOverscanIndicesGetter$1");var sl=function(){function le(x,V){var Q;return Ro(this,le),(Q=us(this,as(le).call(this,x,V)))._loadMoreRowsMemoizer=aa(),Q._onRowsRendered=Q._onRowsRendered.bind(Sn(Q)),Q._registerChild=Q._registerChild.bind(Sn(Q)),Q}return r(le,"InfiniteLoader"),cs(le,Hi.PureComponent),Po(le,[{key:"resetLoadMoreRowsCache",value:function(x){this._loadMoreRowsMemoizer=aa(),x&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(x){var V=this,Q=this.props.loadMoreRows;x.forEach(function(ge){var be=Q(ge);be&&be.then(function(){(function(Se){var Fe=Se.lastRenderedStartIndex,Qe=Se.lastRenderedStopIndex,Ke=Se.startIndex,ft=Se.stopIndex;return!(Qe<Ke||ft<Fe)})({lastRenderedStartIndex:V._lastRenderedStartIndex,lastRenderedStopIndex:V._lastRenderedStopIndex,startIndex:ge.startIndex,stopIndex:ge.stopIndex})&&V._registeredChild&&function(Se){var Fe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Qe=typeof Se.recomputeGridSize=="function"?Se.recomputeGridSize:Se.recomputeRowHeights;Qe?Qe.call(Se,Fe):Se.forceUpdate()}(V._registeredChild,V._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(x){var V=x.startIndex,Q=x.stopIndex;this._lastRenderedStartIndex=V,this._lastRenderedStopIndex=Q,this._doStuff(V,Q)}},{key:"_doStuff",value:function(x,V){var Q,ge=this,be=this.props,Se=be.isRowLoaded,Fe=be.minimumBatchSize,Qe=be.rowCount,Ke=be.threshold,ft=function(Vt){for(var y=Vt.isRowLoaded,C=Vt.minimumBatchSize,A=Vt.rowCount,M=Vt.startIndex,W=Vt.stopIndex,Z=[],ye=null,Ie=null,We=M;We<=W;We++)y({index:We})?Ie!==null&&(Z.push({startIndex:ye,stopIndex:Ie}),ye=Ie=null):(Ie=We,ye===null&&(ye=We));if(Ie!==null){for(var Le=Math.min(Math.max(Ie,ye+C-1),A-1),St=Ie+1;St<=Le&&!y({index:St});St++)Ie=St;Z.push({startIndex:ye,stopIndex:Ie})}if(Z.length)for(var Et=Z[0];Et.stopIndex-Et.startIndex+1<C&&0<Et.startIndex;){var xt=Et.startIndex-1;if(y({index:xt}))break;Et.startIndex=xt}return Z}({isRowLoaded:Se,minimumBatchSize:Fe,rowCount:Qe,startIndex:Math.max(0,x-Ke),stopIndex:Math.min(Qe-1,V+Ke)}),kt=(Q=[]).concat.apply(Q,gh(ft.map(function(Vt){return[Vt.startIndex,Vt.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){ge._loadUnloadedRanges(ft)},indices:{squashedUnloadedRanges:kt}})}},{key:"_registerChild",value:function(x){this._registeredChild=x}}]),le}();zt(sl,"propTypes",{children:Lt.func.isRequired,isRowLoaded:Lt.func.isRequired,loadMoreRows:Lt.func.isRequired,minimumBatchSize:Lt.number.isRequired,rowCount:Lt.number.isRequired,threshold:Lt.number.isRequired}),zt(sl,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var cd=function(){function le(){var x,V;Ro(this,le);for(var Q=arguments.length,ge=new Array(Q),be=0;be<Q;be++)ge[be]=arguments[be];return zt(Sn(V=us(this,(x=as(le)).call.apply(x,[this].concat(ge)))),"Grid",void 0),zt(Sn(V),"_cellRenderer",function(Se){var Fe=Se.parent,Qe=Se.rowIndex,Ke=Se.style,ft=Se.isScrolling,kt=Se.isVisible,Vt=Se.key,y=V.props.rowRenderer,C=Object.getOwnPropertyDescriptor(Ke,"width");return C&&C.writable&&(Ke.width="100%"),y({index:Qe,style:Ke,isScrolling:ft,isVisible:kt,key:Vt,parent:Fe})}),zt(Sn(V),"_setRef",function(Se){V.Grid=Se}),zt(Sn(V),"_onScroll",function(Se){var Fe=Se.clientHeight,Qe=Se.scrollHeight,Ke=Se.scrollTop;(0,V.props.onScroll)({clientHeight:Fe,scrollHeight:Qe,scrollTop:Ke})}),zt(Sn(V),"_onSectionRendered",function(Se){var Fe=Se.rowOverscanStartIndex,Qe=Se.rowOverscanStopIndex,Ke=Se.rowStartIndex,ft=Se.rowStopIndex;(0,V.props.onRowsRendered)({overscanStartIndex:Fe,overscanStopIndex:Qe,startIndex:Ke,stopIndex:ft})}),V}return r(le,"List"),cs(le,Hi.PureComponent),Po(le,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(x){var V=x.alignment,Q=x.index;return this.Grid?this.Grid.getOffsetForCell({alignment:V,rowIndex:Q,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(x){var V=x.columnIndex,Q=x.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:Q,columnIndex:V})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(x){var V=0<arguments.length&&x!==void 0?x:{},Q=V.columnIndex,ge=Q===void 0?0:Q,be=V.rowIndex,Se=be===void 0?0:be;this.Grid&&this.Grid.recomputeGridSize({rowIndex:Se,columnIndex:ge})}},{key:"recomputeRowHeights",value:function(x){var V=0<arguments.length&&x!==void 0?x:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:V,columnIndex:0})}},{key:"scrollToPosition",value:function(x){var V=0<arguments.length&&x!==void 0?x:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:V})}},{key:"scrollToRow",value:function(x){var V=0<arguments.length&&x!==void 0?x:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:V})}},{key:"render",value:function(){var x=this.props,V=x.className,Q=x.noRowsRenderer,ge=x.scrollToIndex,be=x.width,Se=Ms("ReactVirtualized__List",V);return Hi.createElement(Vs,Us({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:Se,columnWidth:be,columnCount:1,noContentRenderer:Q,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:ge}))}}]),le}();zt(cd,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:ol,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Wa={ge:function(le,x,V,Q,ge){return typeof V=="function"?function(be,Se,Fe,Qe,Ke){for(var ft=Fe+1;Se<=Fe;){var kt=Se+Fe>>>1;0<=Ke(be[kt],Qe)?Fe=(ft=kt)-1:Se=1+kt}return ft}(le,Q===void 0?0:0|Q,ge===void 0?le.length-1:0|ge,x,V):function(be,Se,Fe,Qe){for(var Ke=Fe+1;Se<=Fe;){var ft=Se+Fe>>>1;Qe<=be[ft]?Fe=(Ke=ft)-1:Se=1+ft}return Ke}(le,V===void 0?0:0|V,Q===void 0?le.length-1:0|Q,x)},gt:function(le,x,V,Q,ge){return typeof V=="function"?function(be,Se,Fe,Qe,Ke){for(var ft=Fe+1;Se<=Fe;){var kt=Se+Fe>>>1;0<Ke(be[kt],Qe)?Fe=(ft=kt)-1:Se=1+kt}return ft}(le,Q===void 0?0:0|Q,ge===void 0?le.length-1:0|ge,x,V):function(be,Se,Fe,Qe){for(var Ke=Fe+1;Se<=Fe;){var ft=Se+Fe>>>1;Qe<be[ft]?Fe=(Ke=ft)-1:Se=1+ft}return Ke}(le,V===void 0?0:0|V,Q===void 0?le.length-1:0|Q,x)},lt:function(le,x,V,Q,ge){return typeof V=="function"?function(be,Se,Fe,Qe,Ke){for(var ft=Se-1;Se<=Fe;){var kt=Se+Fe>>>1;Ke(be[kt],Qe)<0?Se=1+(ft=kt):Fe=kt-1}return ft}(le,Q===void 0?0:0|Q,ge===void 0?le.length-1:0|ge,x,V):function(be,Se,Fe,Qe){for(var Ke=Se-1;Se<=Fe;){var ft=Se+Fe>>>1;be[ft]<Qe?Se=1+(Ke=ft):Fe=ft-1}return Ke}(le,V===void 0?0:0|V,Q===void 0?le.length-1:0|Q,x)},le:function(le,x,V,Q,ge){return typeof V=="function"?function(be,Se,Fe,Qe,Ke){for(var ft=Se-1;Se<=Fe;){var kt=Se+Fe>>>1;Ke(be[kt],Qe)<=0?Se=1+(ft=kt):Fe=kt-1}return ft}(le,Q===void 0?0:0|Q,ge===void 0?le.length-1:0|ge,x,V):function(be,Se,Fe,Qe){for(var Ke=Se-1;Se<=Fe;){var ft=Se+Fe>>>1;be[ft]<=Qe?Se=1+(Ke=ft):Fe=ft-1}return Ke}(le,V===void 0?0:0|V,Q===void 0?le.length-1:0|Q,x)},eq:function(le,x,V,Q,ge){return typeof V=="function"?function(be,Se,Fe,Qe,Ke){for(;Se<=Fe;){var ft=Se+Fe>>>1,kt=Ke(be[ft],Qe);if(kt===0)return ft;kt<=0?Se=1+ft:Fe=ft-1}return-1}(le,Q===void 0?0:0|Q,ge===void 0?le.length-1:0|ge,x,V):function(be,Se,Fe,Qe){for(;Se<=Fe;){var Ke=Se+Fe>>>1,ft=be[Ke];if(ft===Qe)return Ke;ft<=Qe?Se=1+Ke:Fe=Ke-1}return-1}(le,V===void 0?0:0|V,Q===void 0?le.length-1:0|Q,x)}};function al(le,x,V,Q,ge){this.mid=le,this.left=x,this.right=V,this.leftPoints=Q,this.rightPoints=ge,this.count=(x?x.count:0)+(V?V.count:0)+Q.length}r(al,"IntervalTreeNode");var Ia=al.prototype;function ll(le,x){le.mid=x.mid,le.left=x.left,le.right=x.right,le.leftPoints=x.leftPoints,le.rightPoints=x.rightPoints,le.count=x.count}r(ll,"copy");function ud(le,x){var V=ga(x);le.mid=V.mid,le.left=V.left,le.right=V.right,le.leftPoints=V.leftPoints,le.rightPoints=V.rightPoints,le.count=V.count}r(ud,"rebuild");function fd(le,x){var V=le.intervals([]);V.push(x),ud(le,V)}r(fd,"rebuildWithInterval");function hd(le,x){var V=le.intervals([]),Q=V.indexOf(x);return Q<0?0:(V.splice(Q,1),ud(le,V),1)}r(hd,"rebuildWithoutInterval");function pd(le,x,V){for(var Q=0;Q<le.length&&le[Q][0]<=x;++Q){var ge=V(le[Q]);if(ge)return ge}}r(pd,"reportLeftRange");function md(le,x,V){for(var Q=le.length-1;0<=Q&&le[Q][1]>=x;--Q){var ge=V(le[Q]);if(ge)return ge}}r(md,"reportRightRange");function gd(le,x){for(var V=0;V<le.length;++V){var Q=x(le[V]);if(Q)return Q}}r(gd,"reportRange");function ac(le,x){return le-x}r(ac,"compareNumbers");function dl(le,x){var V=le[0]-x[0];return V||le[1]-x[1]}r(dl,"compareBegin");function cl(le,x){var V=le[1]-x[1];return V||le[0]-x[0]}r(cl,"compareEnd");function ga(le){if(le.length===0)return null;for(var x=[],V=0;V<le.length;++V)x.push(le[V][0],le[V][1]);x.sort(ac);var Q=x[x.length>>1],ge=[],be=[],Se=[];for(V=0;V<le.length;++V){var Fe=le[V];Fe[1]<Q?ge.push(Fe):Q<Fe[0]?be.push(Fe):Se.push(Fe)}var Qe=Se,Ke=Se.slice();return Qe.sort(dl),Ke.sort(cl),new al(Q,ga(ge),ga(be),Qe,Ke)}r(ga,"createIntervalTree");function ul(le){this.root=le}r(ul,"IntervalTree"),Ia.intervals=function(le){return le.push.apply(le,this.leftPoints),this.left&&this.left.intervals(le),this.right&&this.right.intervals(le),le},Ia.insert=function(le){var x=this.count-this.leftPoints.length;if(this.count+=1,le[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+x)?fd(this,le):this.left.insert(le):this.left=ga([le]);else if(le[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+x)?fd(this,le):this.right.insert(le):this.right=ga([le]);else{var V=Wa.ge(this.leftPoints,le,dl),Q=Wa.ge(this.rightPoints,le,cl);this.leftPoints.splice(V,0,le),this.rightPoints.splice(Q,0,le)}},Ia.remove=function(le){var x=this.count-this.leftPoints;if(le[1]<this.mid)return this.left?3*(x-1)<4*(this.right?this.right.count:0)?hd(this,le):(be=this.left.remove(le))===2?(this.left=null,this.count-=1,1):(be===1&&(this.count-=1),be):0;if(le[0]>this.mid)return this.right?3*(x-1)<4*(this.left?this.left.count:0)?hd(this,le):(be=this.right.remove(le))===2?(this.right=null,this.count-=1,1):(be===1&&(this.count-=1),be):0;if(this.count===1)return this.leftPoints[0]===le?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===le){if(this.left&&this.right){for(var V=this,Q=this.left;Q.right;)Q=(V=Q).right;if(V===this)Q.right=this.right;else{var ge=this.left;be=this.right,V.count-=Q.count,V.right=Q.left,Q.left=ge,Q.right=be}ll(this,Q),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?ll(this,this.left):ll(this,this.right);return 1}for(ge=Wa.ge(this.leftPoints,le,dl);ge<this.leftPoints.length&&this.leftPoints[ge][0]===le[0];++ge)if(this.leftPoints[ge]===le){for(this.count-=1,this.leftPoints.splice(ge,1),be=Wa.ge(this.rightPoints,le,cl);be<this.rightPoints.length&&this.rightPoints[be][1]===le[1];++be)if(this.rightPoints[be]===le)return this.rightPoints.splice(be,1),1}return 0;var be},Ia.queryPoint=function(le,x){if(le<this.mid)return this.left&&(V=this.left.queryPoint(le,x))?V:pd(this.leftPoints,le,x);if(le>this.mid){var V;return this.right&&(V=this.right.queryPoint(le,x))?V:md(this.rightPoints,le,x)}return gd(this.leftPoints,x)},Ia.queryInterval=function(le,x,V){var Q;return le<this.mid&&this.left&&(Q=this.left.queryInterval(le,x,V))||x>this.mid&&this.right&&(Q=this.right.queryInterval(le,x,V))?Q:x<this.mid?pd(this.leftPoints,x,V):le>this.mid?md(this.rightPoints,le,V):gd(this.leftPoints,V)};var Sa=ul.prototype;Sa.insert=function(le){this.root?this.root.insert(le):this.root=new al(le[0],null,null,[le],[le])},Sa.remove=function(le){if(this.root){var x=this.root.remove(le);return x===2&&(this.root=null),x!==0}return!1},Sa.queryPoint=function(le,x){if(this.root)return this.root.queryPoint(le,x)},Sa.queryInterval=function(le,x,V){if(le<=x&&this.root)return this.root.queryInterval(le,x,V)},Object.defineProperty(Sa,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Sa,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var fl=function(){function le(){Ro(this,le),zt(this,"_columnSizeMap",{}),zt(this,"_intervalTree",function(x){return x&&x.length!==0?new ul(ga(x)):new ul(null)}()),zt(this,"_leftMap",{})}return r(le,"PositionCache"),Po(le,[{key:"estimateTotalHeight",value:function(x,V,Q){var ge=x-this.count;return this.tallestColumnSize+Math.ceil(ge/V)*Q}},{key:"range",value:function(x,V,Q){var ge=this;this._intervalTree.queryInterval(x,x+V,function(be){var Se=mh(be,3),Fe=Se[0],Qe=(Se[1],Se[2]);return Q(Qe,ge._leftMap[Qe],Fe)})}},{key:"setPosition",value:function(x,V,Q,ge){this._intervalTree.insert([Q,Q+ge,x]),this._leftMap[x]=V;var be=this._columnSizeMap,Se=be[V];be[V]=Se===void 0?Q+ge:Math.max(Se,Q+ge)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var x=this._columnSizeMap,V=0;for(var Q in x){var ge=x[Q];V=V===0?ge:Math.min(V,ge)}return V}},{key:"tallestColumnSize",get:function(){var x=this._columnSizeMap,V=0;for(var Q in x){var ge=x[Q];V=Math.max(V,ge)}return V}}]),le}(),hl=function(){function le(){var x,V;Ro(this,le);for(var Q=arguments.length,ge=new Array(Q),be=0;be<Q;be++)ge[be]=arguments[be];return zt(Sn(V=us(this,(x=as(le)).call.apply(x,[this].concat(ge)))),"state",{isScrolling:!1,scrollTop:0}),zt(Sn(V),"_debounceResetIsScrollingId",void 0),zt(Sn(V),"_invalidateOnUpdateStartIndex",null),zt(Sn(V),"_invalidateOnUpdateStopIndex",null),zt(Sn(V),"_positionCache",new fl),zt(Sn(V),"_startIndex",null),zt(Sn(V),"_startIndexMemoized",null),zt(Sn(V),"_stopIndex",null),zt(Sn(V),"_stopIndexMemoized",null),zt(Sn(V),"_debounceResetIsScrollingCallback",function(){V.setState({isScrolling:!1})}),zt(Sn(V),"_setScrollingContainerRef",function(Se){V._scrollingContainer=Se}),zt(Sn(V),"_onScroll",function(Se){var Fe=V.props.height,Qe=Se.currentTarget.scrollTop,Ke=Math.min(Math.max(0,V._getEstimatedTotalHeight()-Fe),Qe);Qe===Ke&&(V._debounceResetIsScrolling(),V.state.scrollTop!==Ke&&V.setState({isScrolling:!0,scrollTop:Ke}))}),V}return r(le,"Masonry"),cs(le,Hi.PureComponent),Po(le,[{key:"clearCellPositions",value:function(){this._positionCache=new fl,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(x){var V=x.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=V,this._invalidateOnUpdateStopIndex=V):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,V),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,V))}},{key:"recomputeCellPositions",value:function(){var x=this._positionCache.count-1;this._positionCache=new fl,this._populatePositionCache(0,x),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(x){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==x.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Ha(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var x,V=this,Q=this.props,ge=Q.autoHeight,be=Q.cellCount,Se=Q.cellMeasurerCache,Fe=Q.cellRenderer,Qe=Q.className,Ke=Q.height,ft=Q.id,kt=Q.keyMapper,Vt=Q.overscanByPixels,y=Q.role,C=Q.style,A=Q.tabIndex,M=Q.width,W=Q.rowDirection,Z=this.state,ye=Z.isScrolling,Ie=Z.scrollTop,We=[],Le=this._getEstimatedTotalHeight(),St=this._positionCache.shortestColumnSize,Et=this._positionCache.count,xt=0;if(this._positionCache.range(Math.max(0,Ie-Vt),Ke+2*Vt,function(ui,Ln,Bi){var ir;x=x===void 0?xt=ui:(xt=Math.min(xt,ui),Math.max(x,ui)),We.push(Fe({index:ui,isScrolling:ye,key:kt(ui),parent:V,style:(ir={height:Se.getHeight(ui)},zt(ir,W==="ltr"?"left":"right",Ln),zt(ir,"position","absolute"),zt(ir,"top",Bi),zt(ir,"width",Se.getWidth(ui)),ir)}))}),St<Ie+Ke+Vt&&Et<be)for(var Gt=Math.min(be-Et,Math.ceil((Ie+Ke+Vt-St)/Se.defaultHeight*M/Se.defaultWidth)),Dn=Et;Dn<Et+Gt;Dn++)x=Dn,We.push(Fe({index:Dn,isScrolling:ye,key:kt(Dn),parent:this,style:{width:Se.getWidth(Dn)}}));return this._startIndex=xt,this._stopIndex=x,Hi.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Ms("ReactVirtualized__Masonry",Qe),id:ft,onScroll:this._onScroll,role:y,style:Ur({boxSizing:"border-box",direction:"ltr",height:ge?"auto":Ke,overflowX:"hidden",overflowY:Le<Ke?"hidden":"auto",position:"relative",width:M,WebkitOverflowScrolling:"touch",willChange:"transform"},C),tabIndex:A},Hi.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:Le,maxWidth:"100%",maxHeight:Le,overflow:"hidden",pointerEvents:ye?"none":"",position:"relative"}},We))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var x=this._invalidateOnUpdateStartIndex,V=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(x,V),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var x=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Ha(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=wr(this._debounceResetIsScrollingCallback,x)}},{key:"_getEstimatedTotalHeight",value:function(){var x=this.props,V=x.cellCount,Q=x.cellMeasurerCache,ge=x.width,be=Math.max(1,Math.floor(ge/Q.defaultWidth));return this._positionCache.estimateTotalHeight(V,be,Q.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var x=this.props,V=x.height,Q=x.onScroll,ge=this.state.scrollTop;this._onScrollMemoized!==ge&&(Q({clientHeight:V,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:ge}),this._onScrollMemoized=ge)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(x,V){for(var Q=this.props,ge=Q.cellMeasurerCache,be=Q.cellPositioner,Se=x;Se<=V;Se++){var Fe=be(Se),Qe=Fe.left,Ke=Fe.top;this._positionCache.setPosition(Se,Qe,Ke,ge.getHeight(Se))}}}],[{key:"getDerivedStateFromProps",value:function(x,V){return x.scrollTop!==void 0&&V.scrollTop!==x.scrollTop?{isScrolling:!0,scrollTop:x.scrollTop}:null}}]),le}();function Sd(){}r(Sd,"noop"),zt(hl,"defaultProps",{autoHeight:!1,keyMapper:function(le){return le},onCellsRendered:Sd,onScroll:Sd,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),nl(hl);var pl=function(){function le(){var x=this,V=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Ro(this,le),zt(this,"_cellMeasurerCache",void 0),zt(this,"_columnIndexOffset",void 0),zt(this,"_rowIndexOffset",void 0),zt(this,"columnWidth",function(Qe){var Ke=Qe.index;x._cellMeasurerCache.columnWidth({index:Ke+x._columnIndexOffset})}),zt(this,"rowHeight",function(Qe){var Ke=Qe.index;x._cellMeasurerCache.rowHeight({index:Ke+x._rowIndexOffset})});var Q=V.cellMeasurerCache,ge=V.columnIndexOffset,be=ge===void 0?0:ge,Se=V.rowIndexOffset,Fe=Se===void 0?0:Se;this._cellMeasurerCache=Q,this._columnIndexOffset=be,this._rowIndexOffset=Fe}return r(le,"CellMeasurerCacheDecorator"),Po(le,[{key:"clear",value:function(x,V){this._cellMeasurerCache.clear(x+this._rowIndexOffset,V+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:0;return this._cellMeasurerCache.getHeight(x+this._rowIndexOffset,Q+this._columnIndexOffset)}},{key:"getWidth",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:0;return this._cellMeasurerCache.getWidth(x+this._rowIndexOffset,Q+this._columnIndexOffset)}},{key:"has",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:0;return this._cellMeasurerCache.has(x+this._rowIndexOffset,Q+this._columnIndexOffset)}},{key:"set",value:function(x,V,Q,ge){this._cellMeasurerCache.set(x+this._rowIndexOffset,V+this._columnIndexOffset,Q,ge)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),le}(),za=function(){function le(x,V){var Q;Ro(this,le),zt(Sn(Q=us(this,as(le).call(this,x,V))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),zt(Sn(Q),"_deferredInvalidateColumnIndex",null),zt(Sn(Q),"_deferredInvalidateRowIndex",null),zt(Sn(Q),"_bottomLeftGridRef",function(Fe){Q._bottomLeftGrid=Fe}),zt(Sn(Q),"_bottomRightGridRef",function(Fe){Q._bottomRightGrid=Fe}),zt(Sn(Q),"_cellRendererBottomLeftGrid",function(Fe){var Qe=Fe.rowIndex,Ke=tl(Fe,["rowIndex"]),ft=Q.props,kt=ft.cellRenderer,Vt=ft.fixedRowCount;return Qe===ft.rowCount-Vt?Hi.createElement("div",{key:Ke.key,style:Ur({},Ke.style,{height:20})}):kt(Ur({},Ke,{parent:Sn(Q),rowIndex:Qe+Vt}))}),zt(Sn(Q),"_cellRendererBottomRightGrid",function(Fe){var Qe=Fe.columnIndex,Ke=Fe.rowIndex,ft=tl(Fe,["columnIndex","rowIndex"]),kt=Q.props,Vt=kt.cellRenderer,y=kt.fixedColumnCount,C=kt.fixedRowCount;return Vt(Ur({},ft,{columnIndex:Qe+y,parent:Sn(Q),rowIndex:Ke+C}))}),zt(Sn(Q),"_cellRendererTopRightGrid",function(Fe){var Qe=Fe.columnIndex,Ke=tl(Fe,["columnIndex"]),ft=Q.props,kt=ft.cellRenderer,Vt=ft.columnCount,y=ft.fixedColumnCount;return Qe===Vt-y?Hi.createElement("div",{key:Ke.key,style:Ur({},Ke.style,{width:20})}):kt(Ur({},Ke,{columnIndex:Qe+y,parent:Sn(Q)}))}),zt(Sn(Q),"_columnWidthRightGrid",function(Fe){var Qe=Fe.index,Ke=Q.props,ft=Ke.columnCount,kt=Ke.fixedColumnCount,Vt=Ke.columnWidth,y=Q.state,C=y.scrollbarSize;return y.showHorizontalScrollbar&&Qe===ft-kt?C:typeof Vt=="function"?Vt({index:Qe+kt}):Vt}),zt(Sn(Q),"_onScroll",function(Fe){var Qe=Fe.scrollLeft,Ke=Fe.scrollTop;Q.setState({scrollLeft:Qe,scrollTop:Ke});var ft=Q.props.onScroll;ft&&ft(Fe)}),zt(Sn(Q),"_onScrollbarPresenceChange",function(Fe){var Qe=Fe.horizontal,Ke=Fe.size,ft=Fe.vertical,kt=Q.state,Vt=kt.showHorizontalScrollbar,y=kt.showVerticalScrollbar;if(Qe!==Vt||ft!==y){Q.setState({scrollbarSize:Ke,showHorizontalScrollbar:Qe,showVerticalScrollbar:ft});var C=Q.props.onScrollbarPresenceChange;typeof C=="function"&&C({horizontal:Qe,size:Ke,vertical:ft})}}),zt(Sn(Q),"_onScrollLeft",function(Fe){var Qe=Fe.scrollLeft;Q._onScroll({scrollLeft:Qe,scrollTop:Q.state.scrollTop})}),zt(Sn(Q),"_onScrollTop",function(Fe){var Qe=Fe.scrollTop;Q._onScroll({scrollTop:Qe,scrollLeft:Q.state.scrollLeft})}),zt(Sn(Q),"_rowHeightBottomGrid",function(Fe){var Qe=Fe.index,Ke=Q.props,ft=Ke.fixedRowCount,kt=Ke.rowCount,Vt=Ke.rowHeight,y=Q.state,C=y.scrollbarSize;return y.showVerticalScrollbar&&Qe===kt-ft?C:typeof Vt=="function"?Vt({index:Qe+ft}):Vt}),zt(Sn(Q),"_topLeftGridRef",function(Fe){Q._topLeftGrid=Fe}),zt(Sn(Q),"_topRightGridRef",function(Fe){Q._topRightGrid=Fe});var ge=x.deferredMeasurementCache,be=x.fixedColumnCount,Se=x.fixedRowCount;return Q._maybeCalculateCachedStyles(!0),ge&&(Q._deferredMeasurementCacheBottomLeftGrid=0<Se?new pl({cellMeasurerCache:ge,columnIndexOffset:0,rowIndexOffset:Se}):ge,Q._deferredMeasurementCacheBottomRightGrid=0<be||0<Se?new pl({cellMeasurerCache:ge,columnIndexOffset:be,rowIndexOffset:Se}):ge,Q._deferredMeasurementCacheTopRightGrid=0<be?new pl({cellMeasurerCache:ge,columnIndexOffset:be,rowIndexOffset:0}):ge),Q}return r(le,"MultiGrid"),cs(le,Hi.PureComponent),Po(le,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(x){var V=0<arguments.length&&x!==void 0?x:{},Q=V.columnIndex,ge=Q===void 0?0:Q,be=V.rowIndex,Se=be===void 0?0:be;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,ge):ge,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,Se):Se}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(x){var V=0<arguments.length&&x!==void 0?x:{},Q=V.columnIndex,ge=Q===void 0?0:Q,be=V.rowIndex,Se=be===void 0?0:be,Fe=this.props,Qe=Fe.fixedColumnCount,Ke=Fe.fixedRowCount,ft=Math.max(0,ge-Qe),kt=Math.max(0,Se-Ke);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:ge,rowIndex:kt}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:ft,rowIndex:kt}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:ge,rowIndex:Se}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:ft,rowIndex:Se}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var x=this.props,V=x.scrollLeft,Q=x.scrollTop;if(0<V||0<Q){var ge={};0<V&&(ge.scrollLeft=V),0<Q&&(ge.scrollTop=Q),this.setState(ge)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var x=this.props,V=x.onScroll,Q=x.onSectionRendered,ge=(x.onScrollbarPresenceChange,x.scrollLeft,x.scrollToColumn),be=(x.scrollTop,x.scrollToRow),Se=tl(x,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var Fe=this.state,Qe=Fe.scrollLeft,Ke=Fe.scrollTop;return Hi.createElement("div",{style:this._containerOuterStyle},Hi.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(Se),this._renderTopRightGrid(Ur({},Se,{onScroll:V,scrollLeft:Qe}))),Hi.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(Ur({},Se,{onScroll:V,scrollTop:Ke})),this._renderBottomRightGrid(Ur({},Se,{onScroll:V,onSectionRendered:Q,scrollLeft:Qe,scrollToColumn:ge,scrollToRow:be,scrollTop:Ke}))))}},{key:"_getBottomGridHeight",value:function(x){return x.height-this._getTopGridHeight(x)}},{key:"_getLeftGridWidth",value:function(x){var V=x.fixedColumnCount,Q=x.columnWidth;if(this._leftGridWidth==null)if(typeof Q=="function"){for(var ge=0,be=0;be<V;be++)ge+=Q({index:be});this._leftGridWidth=ge}else this._leftGridWidth=Q*V;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(x){return x.width-this._getLeftGridWidth(x)}},{key:"_getTopGridHeight",value:function(x){var V=x.fixedRowCount,Q=x.rowHeight;if(this._topGridHeight==null)if(typeof Q=="function"){for(var ge=0,be=0;be<V;be++)ge+=Q({index:be});this._topGridHeight=ge}else this._topGridHeight=Q*V;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var x=this._deferredInvalidateColumnIndex,V=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:x,rowIndex:V}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(x){var V=this.props,Q=V.columnWidth,ge=V.enableFixedColumnScroll,be=V.enableFixedRowScroll,Se=V.height,Fe=V.fixedColumnCount,Qe=V.fixedRowCount,Ke=V.rowHeight,ft=V.style,kt=V.styleBottomLeftGrid,Vt=V.styleBottomRightGrid,y=V.styleTopLeftGrid,C=V.styleTopRightGrid,A=V.width,M=x||Se!==this._lastRenderedHeight||A!==this._lastRenderedWidth,W=x||Q!==this._lastRenderedColumnWidth||Fe!==this._lastRenderedFixedColumnCount,Z=x||Qe!==this._lastRenderedFixedRowCount||Ke!==this._lastRenderedRowHeight;(x||M||ft!==this._lastRenderedStyle)&&(this._containerOuterStyle=Ur({height:Se,overflow:"visible",width:A},ft)),(x||M||Z)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:A},this._containerBottomStyle={height:Se-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:A}),!x&&kt===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=Ur({left:0,overflowX:"hidden",overflowY:ge?"auto":"hidden",position:"absolute"},kt)),(x||W||Vt!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=Ur({left:this._getLeftGridWidth(this.props),position:"absolute"},Vt)),!x&&y===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=Ur({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},y)),(x||W||C!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=Ur({left:this._getLeftGridWidth(this.props),overflowX:be?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},C)),this._lastRenderedColumnWidth=Q,this._lastRenderedFixedColumnCount=Fe,this._lastRenderedFixedRowCount=Qe,this._lastRenderedHeight=Se,this._lastRenderedRowHeight=Ke,this._lastRenderedStyle=ft,this._lastRenderedStyleBottomLeftGrid=kt,this._lastRenderedStyleBottomRightGrid=Vt,this._lastRenderedStyleTopLeftGrid=y,this._lastRenderedStyleTopRightGrid=C,this._lastRenderedWidth=A}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(x){var V=x.enableFixedColumnScroll,Q=x.fixedColumnCount,ge=x.fixedRowCount,be=x.rowCount,Se=x.hideBottomLeftGridScrollbar,Fe=this.state.showVerticalScrollbar;if(!Q)return null;var Qe=Fe?1:0,Ke=this._getBottomGridHeight(x),ft=this._getLeftGridWidth(x),kt=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,Vt=Se?ft+kt:ft,y=Hi.createElement(Vs,Us({},x,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:Q,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:Ke,onScroll:V?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,be-ge)+Qe,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:Vt}));return Se?Hi.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:Ur({},this._bottomLeftGridStyle,{height:Ke,width:ft,overflowY:"hidden"})},y):y}},{key:"_renderBottomRightGrid",value:function(x){var V=x.columnCount,Q=x.fixedColumnCount,ge=x.fixedRowCount,be=x.rowCount,Se=x.scrollToColumn,Fe=x.scrollToRow;return Hi.createElement(Vs,Us({},x,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,V-Q),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(x),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,be-ge),rowHeight:this._rowHeightBottomGrid,scrollToColumn:Se-Q,scrollToRow:Fe-ge,style:this._bottomRightGridStyle,width:this._getRightGridWidth(x)}))}},{key:"_renderTopLeftGrid",value:function(x){var V=x.fixedColumnCount,Q=x.fixedRowCount;return V&&Q?Hi.createElement(Vs,Us({},x,{className:this.props.classNameTopLeftGrid,columnCount:V,height:this._getTopGridHeight(x),ref:this._topLeftGridRef,rowCount:Q,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(x)})):null}},{key:"_renderTopRightGrid",value:function(x){var V=x.columnCount,Q=x.enableFixedRowScroll,ge=x.fixedColumnCount,be=x.fixedRowCount,Se=x.scrollLeft,Fe=x.hideTopRightGridScrollbar,Qe=this.state,Ke=Qe.showHorizontalScrollbar,ft=Qe.scrollbarSize;if(!be)return null;var kt=Ke?1:0,Vt=this._getTopGridHeight(x),y=this._getRightGridWidth(x),C=Ke?ft:0,A=Vt,M=this._topRightGridStyle;Fe&&(A=Vt+C,M=Ur({},this._topRightGridStyle,{left:0}));var W=Hi.createElement(Vs,Us({},x,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,V-ge)+kt,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:A,onScroll:Q?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:be,scrollLeft:Se,style:M,tabIndex:null,width:y}));return Fe?Hi.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:Ur({},this._topRightGridStyle,{height:Vt,width:y,overflowX:"hidden"})},W):W}}],[{key:"getDerivedStateFromProps",value:function(x,V){return x.scrollLeft!==V.scrollLeft||x.scrollTop!==V.scrollTop?{scrollLeft:x.scrollLeft!=null&&0<=x.scrollLeft?x.scrollLeft:V.scrollLeft,scrollTop:x.scrollTop!=null&&0<=x.scrollTop?x.scrollTop:V.scrollTop}:null}}]),le}();zt(za,"propTypes",{classNameBottomLeftGrid:Lt.string.isRequired,classNameBottomRightGrid:Lt.string.isRequired,classNameTopLeftGrid:Lt.string.isRequired,classNameTopRightGrid:Lt.string.isRequired,enableFixedColumnScroll:Lt.bool.isRequired,enableFixedRowScroll:Lt.bool.isRequired,fixedColumnCount:Lt.number.isRequired,fixedRowCount:Lt.number.isRequired,onScrollbarPresenceChange:Lt.func,style:Lt.object.isRequired,styleBottomLeftGrid:Lt.object.isRequired,styleBottomRightGrid:Lt.object.isRequired,styleTopLeftGrid:Lt.object.isRequired,styleTopRightGrid:Lt.object.isRequired,hideTopRightGridScrollbar:Lt.bool,hideBottomLeftGridScrollbar:Lt.bool}),zt(za,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),nl(za);var vd=function(){function le(x,V){var Q;return Ro(this,le),(Q=us(this,as(le).call(this,x,V))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},Q._onScroll=Q._onScroll.bind(Sn(Q)),Q}return r(le,"ScrollSync"),cs(le,Hi.PureComponent),Po(le,[{key:"render",value:function(){var x=this.props.children,V=this.state,Q=V.clientHeight,ge=V.clientWidth,be=V.scrollHeight,Se=V.scrollLeft,Fe=V.scrollTop,Qe=V.scrollWidth;return x({clientHeight:Q,clientWidth:ge,onScroll:this._onScroll,scrollHeight:be,scrollLeft:Se,scrollTop:Fe,scrollWidth:Qe})}},{key:"_onScroll",value:function(x){var V=x.clientHeight,Q=x.clientWidth,ge=x.scrollHeight,be=x.scrollLeft,Se=x.scrollTop,Fe=x.scrollWidth;this.setState({clientHeight:V,clientWidth:Q,scrollHeight:ge,scrollLeft:be,scrollTop:Se,scrollWidth:Fe})}}]),le}();function ml(le){var x=le.dataKey,V=le.rowData;return typeof V.get=="function"?V.get(x):V[x]}r(ml,"defaultCellDataGetter");function gl(le){var x=le.cellData;return x==null?"":String(x)}r(gl,"defaultCellRenderer");function Sl(le){var x=le.className,V=le.columns,Q=le.style;return Hi.createElement("div",{className:x,role:"row",style:Q},V)}r(Sl,"defaultHeaderRowRenderer"),zt(vd,"propTypes",{children:Lt.func.isRequired});var Qo={ASC:"ASC",DESC:"DESC"};function Ga(le){var x=le.sortDirection,V=Ms("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":x===Qo.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":x===Qo.DESC});return Hi.createElement("svg",{className:V,width:18,height:18,viewBox:"0 0 24 24"},x===Qo.ASC?Hi.createElement("path",{d:"M7 14l5-5 5 5z"}):Hi.createElement("path",{d:"M7 10l5 5 5-5z"}),Hi.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}r(Ga,"SortIndicator");function vl(le){var x=le.dataKey,V=le.label,Q=le.sortBy,ge=le.sortDirection,be=Q===x,Se=[Hi.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof V=="string"?V:null},V)];return be&&Se.push(Hi.createElement(Ga,{key:"SortIndicator",sortDirection:ge})),Se}r(vl,"defaultHeaderRenderer");function yl(le){var x=le.className,V=le.columns,Q=le.index,ge=le.key,be=le.onRowClick,Se=le.onRowDoubleClick,Fe=le.onRowMouseOut,Qe=le.onRowMouseOver,Ke=le.onRowRightClick,ft=le.rowData,kt=le.style,Vt={"aria-rowindex":Q+1};return(be||Se||Fe||Qe||Ke)&&(Vt["aria-label"]="row",Vt.tabIndex=0,be&&(Vt.onClick=function(y){return be({event:y,index:Q,rowData:ft})}),Se&&(Vt.onDoubleClick=function(y){return Se({event:y,index:Q,rowData:ft})}),Fe&&(Vt.onMouseOut=function(y){return Fe({event:y,index:Q,rowData:ft})}),Qe&&(Vt.onMouseOver=function(y){return Qe({event:y,index:Q,rowData:ft})}),Ke&&(Vt.onContextMenu=function(y){return Ke({event:y,index:Q,rowData:ft})})),Hi.createElement("div",Us({},Vt,{className:x,key:ge,role:"row",style:kt}),V)}r(yl,"defaultRowRenderer"),Ga.propTypes={sortDirection:Lt.oneOf([Qo.ASC,Qo.DESC])};var va=function(){function le(){return Ro(this,le),us(this,as(le).apply(this,arguments))}return r(le,"Column"),cs(le,Hi.Component),le}();zt(va,"propTypes",{"aria-label":Lt.string,cellDataGetter:Lt.func,cellRenderer:Lt.func,className:Lt.string,columnData:Lt.object,dataKey:Lt.any.isRequired,defaultSortDirection:Lt.oneOf([Qo.ASC,Qo.DESC]),disableSort:Lt.bool,flexGrow:Lt.number,flexShrink:Lt.number,headerClassName:Lt.string,headerRenderer:Lt.func.isRequired,headerStyle:Lt.object,id:Lt.string,label:Lt.node,maxWidth:Lt.number,minWidth:Lt.number,style:Lt.object,width:Lt.number.isRequired}),zt(va,"defaultProps",{cellDataGetter:ml,cellRenderer:gl,defaultSortDirection:Qo.ASC,flexGrow:0,flexShrink:1,headerRenderer:vl,style:{}});var ja=function(){function le(x){var V;return Ro(this,le),(V=us(this,as(le).call(this,x))).state={scrollbarWidth:0},V._createColumn=V._createColumn.bind(Sn(V)),V._createRow=V._createRow.bind(Sn(V)),V._onScroll=V._onScroll.bind(Sn(V)),V._onSectionRendered=V._onSectionRendered.bind(Sn(V)),V._setRef=V._setRef.bind(Sn(V)),V}return r(le,"Table"),cs(le,Hi.PureComponent),Po(le,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(x){var V=x.alignment,Q=x.index;return this.Grid?this.Grid.getOffsetForCell({alignment:V,rowIndex:Q}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(x){var V=x.columnIndex,Q=x.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:Q,columnIndex:V})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(x){var V=0<arguments.length&&x!==void 0?x:{},Q=V.columnIndex,ge=Q===void 0?0:Q,be=V.rowIndex,Se=be===void 0?0:be;this.Grid&&this.Grid.recomputeGridSize({rowIndex:Se,columnIndex:ge})}},{key:"recomputeRowHeights",value:function(x){var V=0<arguments.length&&x!==void 0?x:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:V})}},{key:"scrollToPosition",value:function(x){var V=0<arguments.length&&x!==void 0?x:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:V})}},{key:"scrollToRow",value:function(x){var V=0<arguments.length&&x!==void 0?x:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:V})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var x=qd.findDOMNode(this.Grid),V=x.clientWidth||0;return(x.offsetWidth||0)-V}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var x=this,V=this.props,Q=V.children,ge=V.className,be=V.disableHeader,Se=V.gridClassName,Fe=V.gridStyle,Qe=V.headerHeight,Ke=V.headerRowRenderer,ft=V.height,kt=V.id,Vt=V.noRowsRenderer,y=V.rowClassName,C=V.rowStyle,A=V.scrollToIndex,M=V.style,W=V.width,Z=this.state.scrollbarWidth,ye=be?ft:ft-Qe,Ie=typeof y=="function"?y({index:-1}):y,We=typeof C=="function"?C({index:-1}):C;return this._cachedColumnStyles=[],Hi.Children.toArray(Q).forEach(function(Le,St){var Et=x._getFlexStyleForColumn(Le,Le.props.style);x._cachedColumnStyles[St]=Ur({overflow:"hidden"},Et)}),Hi.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":Hi.Children.toArray(Q).length,"aria-rowcount":this.props.rowCount,className:Ms("ReactVirtualized__Table",ge),id:kt,role:"grid",style:M},!be&&Ke({className:Ms("ReactVirtualized__Table__headerRow",Ie),columns:this._getHeaderColumns(),style:Ur({height:Qe,overflow:"hidden",paddingRight:Z,width:W},We)}),Hi.createElement(Vs,Us({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Ms("ReactVirtualized__Table__Grid",Se),cellRenderer:this._createRow,columnWidth:W,columnCount:1,height:ye,id:void 0,noContentRenderer:Vt,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:Z,scrollToRow:A,style:Ur({},Fe,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(x){var V=x.column,Q=x.columnIndex,ge=x.isScrolling,be=x.parent,Se=x.rowData,Fe=x.rowIndex,Qe=this.props.onColumnClick,Ke=V.props,ft=Ke.cellDataGetter,kt=Ke.cellRenderer,Vt=Ke.className,y=Ke.columnData,C=Ke.dataKey,A=Ke.id,M=kt({cellData:ft({columnData:y,dataKey:C,rowData:Se}),columnData:y,columnIndex:Q,dataKey:C,isScrolling:ge,parent:be,rowData:Se,rowIndex:Fe}),W=this._cachedColumnStyles[Q],Z=typeof M=="string"?M:null;return Hi.createElement("div",{"aria-colindex":Q+1,"aria-describedby":A,className:Ms("ReactVirtualized__Table__rowColumn",Vt),key:"Row"+Fe+"-Col"+Q,onClick:function(ye){Qe&&Qe({columnData:y,dataKey:C,event:ye})},role:"gridcell",style:W,title:Z},M)}},{key:"_createHeader",value:function(x){var V,Q,ge,be,Se,Fe=x.column,Qe=x.index,Ke=this.props,ft=Ke.headerClassName,kt=Ke.headerStyle,Vt=Ke.onHeaderClick,y=Ke.sort,C=Ke.sortBy,A=Ke.sortDirection,M=Fe.props,W=M.columnData,Z=M.dataKey,ye=M.defaultSortDirection,Ie=M.disableSort,We=M.headerRenderer,Le=M.id,St=M.label,Et=!Ie&&y,xt=Ms("ReactVirtualized__Table__headerColumn",ft,Fe.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:Et}),Gt=this._getFlexStyleForColumn(Fe,Ur({},kt,{},Fe.props.headerStyle)),Dn=We({columnData:W,dataKey:Z,disableSort:Ie,label:St,sortBy:C,sortDirection:A});if(Et||Vt){var ui=C!==Z?ye:A===Qo.DESC?Qo.ASC:Qo.DESC,Ln=r(function(Bi){Et&&y({defaultSortDirection:ye,event:Bi,sortBy:Z,sortDirection:ui}),Vt&&Vt({columnData:W,dataKey:Z,event:Bi})},"onClick");Se=Fe.props["aria-label"]||St||Z,be="none",ge=0,V=Ln,Q=r(function(Bi){Bi.key!=="Enter"&&Bi.key!==" "||Ln(Bi)},"headerOnKeyDown")}return C===Z&&(be=A===Qo.ASC?"ascending":"descending"),Hi.createElement("div",{"aria-label":Se,"aria-sort":be,className:xt,id:Le,key:"Header-Col"+Qe,onClick:V,onKeyDown:Q,role:"columnheader",style:Gt,tabIndex:ge},Dn)}},{key:"_createRow",value:function(x){var V=this,Q=x.rowIndex,ge=x.isScrolling,be=x.key,Se=x.parent,Fe=x.style,Qe=this.props,Ke=Qe.children,ft=Qe.onRowClick,kt=Qe.onRowDoubleClick,Vt=Qe.onRowRightClick,y=Qe.onRowMouseOver,C=Qe.onRowMouseOut,A=Qe.rowClassName,M=Qe.rowGetter,W=Qe.rowRenderer,Z=Qe.rowStyle,ye=this.state.scrollbarWidth,Ie=typeof A=="function"?A({index:Q}):A,We=typeof Z=="function"?Z({index:Q}):Z,Le=M({index:Q}),St=Hi.Children.toArray(Ke).map(function(Gt,Dn){return V._createColumn({column:Gt,columnIndex:Dn,isScrolling:ge,parent:Se,rowData:Le,rowIndex:Q,scrollbarWidth:ye})}),Et=Ms("ReactVirtualized__Table__row",Ie),xt=Ur({},Fe,{height:this._getRowHeight(Q),overflow:"hidden",paddingRight:ye},We);return W({className:Et,columns:St,index:Q,isScrolling:ge,key:be,onRowClick:ft,onRowDoubleClick:kt,onRowRightClick:Vt,onRowMouseOver:y,onRowMouseOut:C,rowData:Le,style:xt})}},{key:"_getFlexStyleForColumn",value:function(x,V){var Q=1<arguments.length&&V!==void 0?V:{},ge="".concat(x.props.flexGrow," ").concat(x.props.flexShrink," ").concat(x.props.width,"px"),be=Ur({},Q,{flex:ge,msFlex:ge,WebkitFlex:ge});return x.props.maxWidth&&(be.maxWidth=x.props.maxWidth),x.props.minWidth&&(be.minWidth=x.props.minWidth),be}},{key:"_getHeaderColumns",value:function(){var x=this,V=this.props,Q=V.children;return(V.disableHeader?[]:Hi.Children.toArray(Q)).map(function(ge,be){return x._createHeader({column:ge,index:be})})}},{key:"_getRowHeight",value:function(x){var V=this.props.rowHeight;return typeof V=="function"?V({index:x}):V}},{key:"_onScroll",value:function(x){var V=x.clientHeight,Q=x.scrollHeight,ge=x.scrollTop;(0,this.props.onScroll)({clientHeight:V,scrollHeight:Q,scrollTop:ge})}},{key:"_onSectionRendered",value:function(x){var V=x.rowOverscanStartIndex,Q=x.rowOverscanStopIndex,ge=x.rowStartIndex,be=x.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:V,overscanStopIndex:Q,startIndex:ge,stopIndex:be})}},{key:"_setRef",value:function(x){this.Grid=x}},{key:"_setScrollbarWidth",value:function(){var x=this.getScrollbarWidth();this.setState({scrollbarWidth:x})}}]),le}();zt(ja,"propTypes",{"aria-label":Lt.string,"aria-labelledby":Lt.string,autoHeight:Lt.bool,children:function(le){for(var x=Hi.Children.toArray(le.children),V=0;V<x.length;V++){var Q=x[V].type;if(Q!==va&&!(Q.prototype instanceof va))return new Error("Table only accepts children of type Column")}},className:Lt.string,disableHeader:Lt.bool,estimatedRowSize:Lt.number.isRequired,gridClassName:Lt.string,gridStyle:Lt.object,headerClassName:Lt.string,headerHeight:Lt.number.isRequired,headerRowRenderer:Lt.func,headerStyle:Lt.object,height:Lt.number.isRequired,id:Lt.string,noRowsRenderer:Lt.func,onColumnClick:Lt.func,onHeaderClick:Lt.func,onRowClick:Lt.func,onRowDoubleClick:Lt.func,onRowMouseOut:Lt.func,onRowMouseOver:Lt.func,onRowRightClick:Lt.func,onRowsRendered:Lt.func,onScroll:Lt.func.isRequired,overscanIndicesGetter:Lt.func.isRequired,overscanRowCount:Lt.number.isRequired,rowClassName:Lt.oneOfType([Lt.string,Lt.func]),rowGetter:Lt.func.isRequired,rowHeight:Lt.oneOfType([Lt.number,Lt.func]).isRequired,rowCount:Lt.number.isRequired,rowRenderer:Lt.func,rowStyle:Lt.oneOfType([Lt.object,Lt.func]).isRequired,scrollToAlignment:Lt.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:Lt.number.isRequired,scrollTop:Lt.number,sort:Lt.func,sortBy:Lt.string,sortDirection:Lt.oneOf([Qo.ASC,Qo.DESC]),style:Lt.object,tabIndex:Lt.number,width:Lt.number.isRequired}),zt(ja,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:ol,overscanRowCount:10,rowRenderer:yl,headerRowRenderer:Sl,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Ys=[],wa=null,la=null;function yd(){la&&(la=null,he.body&&wa!=null&&(he.body.style.pointerEvents=wa),wa=null)}r(yd,"enablePointerEventsIfDisabled");function lc(){yd(),Ys.forEach(function(le){return le.__resetIsScrolling()})}r(lc,"enablePointerEventsAfterDelayCallback");function _d(le){le.currentTarget===j&&wa==null&&he.body&&(wa=he.body.style.pointerEvents,he.body.style.pointerEvents="none"),function(){la&&Ha(la);var x=0;Ys.forEach(function(V){x=Math.max(x,V.props.scrollingResetTimeInterval)}),la=wr(lc,x)}(),Ys.forEach(function(x){x.props.scrollElement===le.currentTarget&&x.__handleWindowScrollEvent()})}r(_d,"onScrollWindow");function _l(le,x){Ys.some(function(V){return V.props.scrollElement===x})||x.addEventListener("scroll",_d),Ys.push(le)}r(_l,"registerScrollListener");function Ed(le,x){(Ys=Ys.filter(function(V){return V!==le})).length||(x.removeEventListener("scroll",_d),la&&(Ha(la),yd()))}r(Ed,"unregisterScrollListener");var El=r(function(le){return le===j},"isWindow"),Aa=r(function(le){return le.getBoundingClientRect()},"getBoundingBox");function bd(le,x){if(le){if(El(le)){var V=j,Q=V.innerHeight,ge=V.innerWidth;return{height:typeof Q=="number"?Q:0,width:typeof ge=="number"?ge:0}}return Aa(le)}return{height:x.serverHeight,width:x.serverWidth}}r(bd,"getDimensions");function Cd(le){return El(le)&&he.documentElement?{top:"scrollY"in j?j.scrollY:he.documentElement.scrollTop,left:"scrollX"in j?j.scrollX:he.documentElement.scrollLeft}:{top:le.scrollTop,left:le.scrollLeft}}r(Cd,"getScrollOffset");var Td=r(function(){return typeof j<"u"?j:void 0},"getWindow"),Id=function(){function le(){var x,V;Ro(this,le);for(var Q=arguments.length,ge=new Array(Q),be=0;be<Q;be++)ge[be]=arguments[be];return zt(Sn(V=us(this,(x=as(le)).call.apply(x,[this].concat(ge)))),"_window",Td()),zt(Sn(V),"_isMounted",!1),zt(Sn(V),"_positionFromTop",0),zt(Sn(V),"_positionFromLeft",0),zt(Sn(V),"_detectElementResize",void 0),zt(Sn(V),"_child",void 0),zt(Sn(V),"state",Ur({},bd(V.props.scrollElement,V.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),zt(Sn(V),"_registerChild",function(Se){!Se||Se instanceof Jr||It.warn("WindowScroller registerChild expects to be passed Element or null"),V._child=Se,V.updatePosition()}),zt(Sn(V),"_onChildScroll",function(Se){var Fe=Se.scrollTop;if(V.state.scrollTop!==Fe){var Qe=V.props.scrollElement;Qe&&(typeof Qe.scrollTo=="function"?Qe.scrollTo(0,Fe+V._positionFromTop):Qe.scrollTop=Fe+V._positionFromTop)}}),zt(Sn(V),"_registerResizeListener",function(Se){Se===j?j.addEventListener("resize",V._onResize,!1):V._detectElementResize.addResizeListener(Se,V._onResize)}),zt(Sn(V),"_unregisterResizeListener",function(Se){Se===j?j.removeEventListener("resize",V._onResize,!1):Se&&V._detectElementResize.removeResizeListener(Se,V._onResize)}),zt(Sn(V),"_onResize",function(){V.updatePosition()}),zt(Sn(V),"__handleWindowScrollEvent",function(){if(V._isMounted){var Se=V.props.onScroll,Fe=V.props.scrollElement;if(Fe){var Qe=Cd(Fe),Ke=Math.max(0,Qe.left-V._positionFromLeft),ft=Math.max(0,Qe.top-V._positionFromTop);V.setState({isScrolling:!0,scrollLeft:Ke,scrollTop:ft}),Se({scrollLeft:Ke,scrollTop:ft})}}}),zt(Sn(V),"__resetIsScrolling",function(){V.setState({isScrolling:!1})}),V}return r(le,"WindowScroller"),cs(le,Hi.PureComponent),Po(le,[{key:"updatePosition",value:function(x){var V=0<arguments.length&&x!==void 0?x:this.props.scrollElement,Q=this.props.onResize,ge=this.state,be=ge.height,Se=ge.width,Fe=this._child||qd.findDOMNode(this);if(Fe instanceof Jr&&V){var Qe=function(ft,kt){if(El(kt)&&he.documentElement){var Vt=he.documentElement,y=Aa(ft),C=Aa(Vt);return{top:y.top-C.top,left:y.left-C.left}}var A=Cd(kt),M=Aa(ft),W=Aa(kt);return{top:M.top+A.top-W.top,left:M.left+A.left-W.left}}(Fe,V);this._positionFromTop=Qe.top,this._positionFromLeft=Qe.left}var Ke=bd(V,this.props);be===Ke.height&&Se===Ke.width||(this.setState({height:Ke.height,width:Ke.width}),Q({height:Ke.height,width:Ke.width}))}},{key:"componentDidMount",value:function(){var x=this.props.scrollElement;this._detectElementResize=qc(),this.updatePosition(x),x&&(_l(this,x),this._registerResizeListener(x)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(x){var V=this.props.scrollElement,Q=x.scrollElement;Q!==V&&Q!=null&&V!=null&&(this.updatePosition(V),Ed(this,Q),_l(this,V),this._unregisterResizeListener(Q),this._registerResizeListener(V))}},{key:"componentWillUnmount",value:function(){var x=this.props.scrollElement;x&&(Ed(this,x),this._unregisterResizeListener(x)),this._isMounted=!1}},{key:"render",value:function(){var x=this.props.children,V=this.state,Q=V.isScrolling,ge=V.scrollTop,be=V.scrollLeft,Se=V.height,Fe=V.width;return x({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:Se,isScrolling:Q,scrollLeft:be,scrollTop:ge,width:Fe})}}]),le}();zt(Id,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:Td(),serverHeight:0,serverWidth:0}),no.ArrowKeyStepper=ec,no.AutoSizer=eu,no.CellMeasurer=tc,no.CellMeasurerCache=Sh,no.Collection=oc,no.Column=va,no.ColumnSizer=du,no.Grid=Vs,no.InfiniteLoader=sl,no.List=cd,no.Masonry=hl,no.MultiGrid=za,no.ScrollSync=vd,no.SortDirection=Qo,no.SortIndicator=Ga,no.Table=ja,no.WindowScroller=Id,no.accessibilityOverscanIndicesGetter=ol,no.createMasonryCellPositioner=function(le){var x,V=le.cellMeasurerCache,Q=le.columnCount,ge=le.columnWidth,be=le.spacer,Se=be===void 0?0:be;function Fe(Ke){for(var ft=0,kt=1;kt<x.length;kt++)x[kt]<x[ft]&&(ft=kt);var Vt=ft*(ge+Se),y=x[ft]||0;return x[ft]=y+V.getHeight(Ke)+Se,{left:Vt,top:y}}r(Fe,"cellPositioner");function Qe(){x=[];for(var Ke=0;Ke<Q;Ke++)x[Ke]=0}return r(Qe,"initOrResetDerivedValues"),Qe(),Fe.reset=function(Ke){Q=Ke.columnCount,ge=Ke.columnWidth,Se=Ke.spacer,Qe()},Fe},no.createTableMultiSort=function(le){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},V=x.defaultSortBy,Q=x.defaultSortDirection,ge=Q===void 0?{}:Q;if(!le)throw Error('Required parameter "sortCallback" not specified');var be=V||[],Se={};return be.forEach(function(Fe){Se[Fe]=ge[Fe]!==void 0?ge[Fe]:"ASC"}),{sort:function(Fe){var Qe=Fe.defaultSortDirection,Ke=Fe.event,ft=Fe.sortBy;if(Ke.shiftKey)Se[ft]!==void 0?Se[ft]=Se[ft]==="ASC"?"DESC":"ASC":(Se[ft]=Qe,be.push(ft));else if(Ke.ctrlKey||Ke.metaKey){var kt=be.indexOf(ft);0<=kt&&(be.splice(kt,1),delete Se[ft])}else be.length=0,be.push(ft),Object.keys(Se).forEach(function(Vt){Vt!==ft&&delete Se[Vt]}),Se[ft]!==void 0?Se[ft]=Se[ft]==="ASC"?"DESC":"ASC":Se[ft]=Qe;le({sortBy:be,sortDirection:Se})},sortBy:be,sortDirection:Se}},no.defaultCellRangeRenderer=ks,no.defaultOverscanIndicesGetter=uu,no.defaultTableCellDataGetter=ml,no.defaultTableCellRenderer=gl,no.defaultTableHeaderRenderer=vl,no.defaultTableHeaderRowRenderer=Sl,no.defaultTableRowRenderer=yl,Object.defineProperty(no,"__esModule",{value:!0})}),s.exports}},3262078016:(B,l,d)=>{"use strict";d.r(l),d.d(l,{AiActionType:()=>Gn,AutocompleteActions:()=>ue,CalloutBackgroundColor:()=>_i,CalloutModificationProperty:()=>tn,CollabApi:()=>En,CollabPopoverDismissSource:()=>we,CollabUrlType:()=>jt,CommentFocusTarget:()=>sr,CommentLevel:()=>Kn,CommentUIContext:()=>Ai,DialogContext:()=>Tt,DocBlockStyle:()=>G,DocInlineStyle:()=>et,DocLayoutStyle:()=>ne,EmbeddedMoveDirection:()=>Mt,EmbeddedObjectType:()=>Ae,EmbeddedUIAttributes:()=>Si,EmbeddedUiAction:()=>nr,EmbeddedUiContext:()=>$i,ErrorSource:()=>Pi,Feature:()=>Ue,FullTableModification:()=>kn,GetSlackObjectFailureReason:()=>se,GrafterUrls:()=>i,InlineFormattingType:()=>Re,NavigationTypeMetric:()=>ve,OpenCommentScrollBehavior:()=>Ft,PlaceholderInsertionType:()=>wi,RichTextMessageAction:()=>Nr,SectionInsertionType:()=>Hn,ShortcutModifier:()=>F,SlackListContentRenderType:()=>Ye,SlackObjectActionType:()=>ji,SlackObjectType:()=>Oe,SlackShortcutCommandType:()=>X,SlackShortcutMetricSource:()=>lt,SlackUnfurlContentRenderType:()=>Ht,TablePart:()=>Qn,TablePartModificationType:()=>$n,TableSelectionAction:()=>ln,TableSelectionModification:()=>Vn,TemplateControlAction:()=>Vi,TemplateType:()=>Lr,ToastMessageContext:()=>ot,UnfurlType:()=>Fn});class u{constructor(){this.o=!1,this._=[]}run(){this.o=!0;const he=this._;this._=[];for(let je=0;je<he.length;je++)he[je]()}add(he){this.o?he():this._.push(he)}}r(u,"t");var h,p;(function(N){var he;(he=N.Op||(N.Op={}))[he.DID_INITIALIZE=8]="DID_INITIALIZE",he[he.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(h||(h={})),function(N){var he;(he=N.Op||(N.Op={}))[he.INIT=0]="INIT"}(p||(p={}));class m{constructor(he){this.l=new Map,this.u=null,this.destinationFn=he}setTransportHook(he){this.u=he}tearDown(){}addHandler(he,je){this.l.has(he)&&this.logError(`Already had handler for op ${he} will overwrite.`),this.l.set(he,je)}getHandler(he){const je=this.l.get(he);return je?this.u?(Rt,Qt)=>{var An;return(An=this.u)===null||An===void 0||An.call(this,he,Rt,s.INCOMING),je(Rt,qn=>{var Pn;return(Pn=this.u)===null||Pn===void 0||Pn.call(this,he,qn,s.OUTGOING_REPLY),Qt(qn)})}:je:null}invoke(he,je,Rt){var Qt;if((Qt=this.u)===null||Qt===void 0||Qt.call(this,he,je,s.OUTGOING),this.u&&Rt){const Pn=Rt;Rt=r(xn=>{var Xn;(Xn=this.u)===null||Xn===void 0||Xn.call(this,he,xn,s.INCOMING_REPLY),Pn(xn)},"i")}const An=this.destinationFn().getHandler(he);if(!An)return void this.logError(`Bridge transport doesn't have handler for op ${he}`);let qn;try{qn=An(je,Pn=>{Rt?Rt(Pn):this.logError(`Invoke response received without callback for op ${he}`)})}catch{a(he,je)}qn instanceof Promise&&qn.catch(Pn=>a(he,je))}logError(he){}}r(m,"s");let a=r((N,he,je)=>{let Rt="";try{Rt=JSON.stringify(he)}catch{Rt="(Unserializable message)"}},"n");var s,i,e;function t(N){return N?`${function(){var he;const je=(he=new URLSearchParams(location.search).get("quip_js_path"))!==null&&he!==void 0?he:void 0;return je&&/^remote-dev\d{4}$/.test(je)?`https://app.${je.split("-")[1]}.slack.com`:location.origin}()}${i.RDEVS_CONTROLLER_JS_PATH}`:i.CONTROLLER_JS}r(t,"E");function n(N){if(!N)return!1;const he=N.indexOf(location.origin+"/")!=0,je=N.includes("/canvas-rdev/collab/");return he&&je}r(n,"l"),function(N){N[N.INCOMING=1]="INCOMING",N[N.INCOMING_REPLY=2]="INCOMING_REPLY",N[N.OUTGOING=3]="OUTGOING",N[N.OUTGOING_REPLY=4]="OUTGOING_REPLY"}(s||(s={})),function(N){N.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",N.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",N.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded",N.RDEVS_EMBEDDED_JS_PATH="/canvas-rdev/collab/grafted/embedded?grafted=True&resource_bundle_name=collab_embedded",N.RDEVS_CONTROLLER_CSS_PATH="/canvas-rdev/collab/grafted/style?retina=True&mode=normal&less=collab%2Fcontroller.less",N.RDEVS_CONTROLLER_JS_PATH="/canvas-rdev/collab/canvas-remote-dev-vite?path=ts/src/collab/controller/bundle.ts"}(i||(i={})),function(N){N.BRIDGE_TRANSPORT_SET="bridge-transport-set",N.BRIDGE_TRANSPORT_READY="bridge-transport-ready",N.HANDLER_REGISTERED="handler-registered",N.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",N.MESSAGE_SENT="message_sent",N.MESSAGE_HANDLED="message-handled",N.INIT_SENT="init_sent",N.INIT_RECEIVED="init_received",N.DID_INIT_SENT="did_init_sent",N.DID_INIT_RECEIVED="did_init_received",N.BRIDGE_OPEN="bridge-open",N.ERROR="error",N.SYSTEMJS_LOADED="systemjs-loaded",N.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",N.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",N.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",N.PROBE="probe",N.OTHER="misc"}(e||(e={}));class o{constructor(he){this.T=he,this.A=[],this.S=[],this.O=[],this.N=[],this.I=[],this.L=Date.now(),this.onlyBefore("Handler registered late",e.HANDLER_REGISTERED,[e.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",e.MESSAGE_SENT,[e.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",e.MESSAGE_HANDLED,[e.BRIDGE_OPEN])}getTimeoutForPromise(){return o.TIMEOUT_FOR_PROMISE}fireEvent(he,je=null){if(this.S.filter(Qt=>Qt.beforeEvent==he).forEach(Qt=>{Qt.afterEvents.some(An=>this.A.includes(An))&&Qt.message&&this.C(`${this.T}: ${Qt.message}`)}),this.O.filter(Qt=>Qt.afterEvent==he).forEach(Qt=>{Qt.beforeEvents.some(An=>!this.A.includes(An))&&Qt.message&&this.C(`${this.T}: ${Qt.message}`)}),he!=e.HANDLER_REGISTERED&&this.C(je?Promise.resolve(je).then(Qt=>`${he}: ${Qt}`):he),this.A.includes(he))return;this.A.push(he);const Rt=[];this.N=this.N.filter(Qt=>!Qt.events.every(An=>this.A.includes(An))||(Rt.push(Qt),!1)),Rt.forEach(Qt=>{Qt.description&&this.C(`${he} -> ${Qt.description}`),Qt.callback()})}after(he,je,Rt=null){he.every(Qt=>this.A.includes(Qt))?je():(Rt&&this.C(`${Rt} deferred`),this.N.push({events:he,description:Rt,callback:je}))}onlyBefore(he,je,Rt){this.S.push({beforeEvent:je,afterEvents:Rt,message:he})}onlyAfter(he,je,Rt){this.O.push({beforeEvents:Rt,afterEvent:je,message:he})}C(he){if(this.I.length>o.MAX_INIT_LOG)return;const je=Date.now()-this.L,Rt=Promise.resolve(he);this.I.push({timestamp:je,message:Rt}),Rt.then(Qt=>{console.debug(`${this.T}: ${Qt}`)})}getInitLog(he){const je=(he?this.I.slice(0,he):this.I).map(async Rt=>({t:Rt.timestamp,e:await Rt.message}));return Promise.all(je).then(Rt=>({id:this.T,log:Rt}))}}r(o,"h"),o.MAX_INIT_LOG=50,o.TIMEOUT_FOR_PROMISE=3e4;function f(N,{logCallback:he=r(()=>{},"e"),timeoutMillis:je=3e4,name:Rt="Unnamed",context:Qt=""}={}){return new Promise((An,qn)=>{let Pn=window.setTimeout(()=>{Pn=null,he(`${Rt} promise timed out: ${Qt}`),qn(new Error(`${Rt} promise timed out`))},je);const xn=r(()=>{Pn&&(clearTimeout(Pn),Pn=null)},"E");N.then(Xn=>{Pn?(xn(),An(Xn)):he(`${Rt} promise resolved after timeout: ${Qt}`)}).catch(Xn=>{Pn?(xn(),qn(Xn)):he(`${Rt} promise rejected after timeout: ${Qt}`)})})}r(f,"a");function g(N,he,je,Rt,Qt){const{span:An,closeSpanFn:qn}=Rt.createBasicTraceSpan(Qt,je,{[st.URL]:N}),{closeSpanFn:Pn}=Rt.createBasicTraceSpan(An,nt.HTTP_FETCH_HEADER),xn=new AbortController,Xn=setTimeout(()=>{xn.abort()},Rt.bridgeInit.getTimeoutForPromise());return fetch(N,Object.assign({signal:xn.signal},he)).catch(li=>{throw Pn(li),Error(`${je} fetch failed: ${li}`)}).then(li=>{if(clearTimeout(Xn),!li.ok)return Pn(new Error(`returned ${li.status}`)),c(Rt,je,li,An).then(zi=>{throw Error(zi)});Pn();const{closeSpanFn:Ri}=Rt.createBasicTraceSpan(An,nt.HTTP_FETCH_CONTENT,{[st.URL]:N});return li.text().catch(zi=>{throw Ri(zi),zi}).then(zi=>{Ri();const{closeSpanFn:gr}=Rt.createBasicTraceSpan(An,nt.JSON_PARSE);try{const Fr=JSON.parse(zi);return gr(),Fr}catch(Fr){throw gr(new Error(`${Fr}`)),Rt.bridgeInit.fireEvent(e.ERROR,c(Rt,je,li,null)),Fr}})}).finally(()=>{qn()})}r(g,"c");function S(N,he,je,Rt,Qt=!1){const An=new AbortController,qn=setTimeout(()=>{An.abort()},je.bridgeInit.getTimeoutForPromise());je.bridgeInit.fireEvent(e.OTHER,`${he} prefetch start`);const{span:Pn,closeSpanFn:xn}=je.createBasicTraceSpan(Rt,nt.MODULE_PREFETCH,{[st.URL]:N}),{closeSpanFn:Xn}=je.createBasicTraceSpan(Pn,nt.HTTP_FETCH_HEADER),li={method:"GET",mode:"cors",cache:"default",signal:An.signal};return Qt&&(li.credentials="include"),fetch(N,li).catch(Ri=>{throw Xn(Ri),Error(`${he} fetch failed: ${Ri}`)}).then(Ri=>{if(!Ri.ok)return Xn(new Error(`Returned ${Ri.status}`)),c(je,he,Ri,Pn).then(gr=>{throw Error(gr)});Xn();const{closeSpanFn:zi}=je.createBasicTraceSpan(Pn,nt.HTTP_FETCH_CONTENT);return Ri.text().then(()=>{zi(),je.bridgeInit.fireEvent(e.OTHER,`${he} prefetch ok`)}).catch(gr=>{throw zi(gr),gr})}).finally(()=>{xn(),clearTimeout(qn)})}r(S,"d");function c(N,he,je,Rt){const{closeSpanFn:Qt}=N.createBasicTraceSpan(Rt,nt.HTTP_FETCH_CONTENT);return je.text().then(An=>{const qn=function(xn){if(!xn||xn.trim().length==0)return"response body empty";try{const Xn=new DOMParser().parseFromString(xn,"text/html").documentElement.textContent;if(Xn&&Xn.trim().length>0)return Xn.trim().replace(/\s+/g," ").slice(0,50)}catch{}return xn.trim().slice(0,50)}(An),Pn=`${he} fetch returned ${je.status}: ${qn}`;return Qt(new Error(Pn)),Pn}).catch(An=>{const qn=`${he} fetch returned ${je.status}: response body unavailable (${An})`;return Qt(new Error(qn)),qn})}r(c,"u");function v(N,he,je){let Rt=null;const{id:Qt,promise:An}=function(xn){const Xn=Symbol(),li=new Promise(Ri=>{K.push({id:Xn,callback:zi=>{xn(),Ri(zi)}})});return ee||(ee=!0,window._collabInit=Ri=>{var zi;(zi=K.shift())===null||zi===void 0||zi.callback(Ri)}),{promise:li,id:Xn}}(()=>{var xn,Xn;(Xn=(xn=N==null?void 0:N.platformDelegate)===null||xn===void 0?void 0:xn.endTraceOrSpan)===null||Xn===void 0||Xn.call(xn,Rt)}),qn=An.then(xn=>(N.bridgeInit.fireEvent(e.OTHER,"_collabInit called"),xn));return function(xn,Xn,li){return Xn.then(Ri=>{if(Ri.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:zi,closeSpanFn:gr}=xn.createBasicTraceSpan(li,nt.LOAD_CONTROLLER),Fr=xn.config.useGraftedMode?t(xn.config.isRemoteGraftingMode):Ri.controller_entry_module_url;return function(ri,Er,Rr,ei){Rr&&(H=Rr);const hr=ri.bridgeInit;if(O){const Jr=I;return hr.fireEvent(e.OTHER,`Collab ${Jr} is loading systemjs, reusing the promise`),O.then(()=>{hr.fireEvent(e.OTHER,`Systemjs promise reused from collab ${Jr} succeeded`)}).catch(fo=>{throw hr.fireEvent(e.ERROR,`Systemjs promise reused from collab ${Jr} failed: ${fo}`),fo})}let si,Eo=null;if(w())hr.fireEvent(e.OTHER,"systemjs already loaded, running prepareImport"),Eo="System.prepareImport() promise resolved",si=f(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:hr.getTimeoutForPromise()});else{hr.fireEvent(e.OTHER,"No SystemJS found, loading it");const{span:Jr,closeSpanFn:fo}=ri.createBasicTraceSpan(ei,nt.LOAD_SYSTEMJS,{[st.JS_PREFETCH_ENABLED]:"true",[st.URL]:Er});Eo="systemjs script tag onload fired",si=function(ho,de,_e){return S(de,"systemjs-module-loader",ho,_e,n(de)).then(()=>{const Pe=document.createElement("script");return new Promise((rt,_t)=>{const{closeSpanFn:Dt}=ho.createBasicTraceSpan(_e,nt.SCRIPT_TAG);Pe.src=de,Pe.defer=!0,Pe.crossOrigin="anonymous",Pe.onload=()=>{Dt(),rt()},Pe.onerror=pn=>{const In=Error(`systemjs onerror called: ${pn}`);Dt(In),_t(In)},document.body.appendChild(Pe)}).then(()=>{if(!w())throw Error("SystemJS not found after it was loaded")}).catch(rt=>{throw typeof System=="object"&&(delete window.System,ho.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs global object")),Pe.onload=null,Pe.onerror=null,Pe.parentNode&&(Pe.parentNode.removeChild(Pe),ho.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs loader script tag")),rt})})}(ri,Er,Jr).finally(()=>{fo()})}return I=ri.id,O=si.then(()=>{hr.fireEvent(e.SYSTEMJS_LOADED,Eo)}).finally(()=>{O=null,I=null}),O}(xn,Ri.module_loader_url,Ri.import_map,zi).then(()=>{var ri,Er;return b(Fr,(Er=(ri=Ri.import_map)===null||ri===void 0?void 0:ri.imports)!==null&&Er!==void 0?Er:{},xn,zi)}).finally(()=>{gr()})})}(N,he,je).then(()=>{var xn,Xn,li;return Rt=(li=(Xn=(xn=N==null?void 0:N.platformDelegate)===null||xn===void 0?void 0:xn.startSpan)===null||Xn===void 0?void 0:Xn.call(xn,je,nt.AWAIT_CALLBACK))!==null&&li!==void 0?li:null,f(qn,{name:"_collabInit callback",timeoutMillis:N.bridgeInit.getTimeoutForPromise()}).catch(Ri=>{var zi,gr;throw(gr=(zi=N==null?void 0:N.platformDelegate)===null||zi===void 0?void 0:zi.endTraceOrSpan)===null||gr===void 0||gr.call(zi,Rt,{[st.ERROR]:`${Ri}`}),Ri})}).catch(xn=>{var Xn;throw Xn=Qt,K=K.filter(li=>li.id!==Xn),xn})}r(v,"T");let _=null,E=null;function b(N,he,je,Rt){const Qt=je.bridgeInit;if(E){const xn=_;return Qt.fireEvent(e.OTHER,`Collab ${xn} is loading the controller, waiting for it to finish...`),E.then(()=>(Qt.fireEvent(e.OTHER,`Collab ${xn} module loading complete`),b(N,he,je,Rt))).catch(Xn=>(Qt.fireEvent(e.OTHER,`Collab ${xn} module loading failed`),b(N,he,je,Rt)))}if(Qt.fireEvent(e.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(je.config.useSystemJsSharedFork&&!L){const xn=Object.keys(he).filter(Xn=>Xn.endsWith("-ancillary.js"));L=xn.length>0?System.sharedFork(xn,he):null}const An=System.fork(he,L);Qt.fireEvent(e.OTHER,`controller module${System.isAlreadyLoaded(N)?" ":" not "}in systemjs cache`);const{span:qn,closeSpanFn:Pn}=je.createBasicTraceSpan(Rt,nt.LOAD_CONTROLLER_MODULE,{[st.JS_PREFETCH_ENABLED]:"true",[st.URL]:N});return E=S(N,"controller-module",je,qn,n(N)).then(()=>{const{closeSpanFn:xn}=je.createBasicTraceSpan(qn,nt.SYSTEMJS_IMPORT_MODULE,{[st.URL]:N}),Xn=[],li=new MutationObserver(Ri=>{Xn.push(...T(Ri))});return li.observe(document.head,{childList:!0}),An.import(N).then(()=>{xn(),Qt.fireEvent(e.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(Ri=>{xn(Ri),Xn.push(...T(li.takeRecords()));let zi=0;throw Xn.forEach(gr=>{gr.onload=null,gr.onerror=null,gr.parentNode&&(gr.parentNode.removeChild(gr),zi++)}),zi>0&&Qt.fireEvent(e.OTHER,`Cleaned up ${zi} SystemJS script tags`),System.resetInstantiationCache()&&Qt.fireEvent(e.OTHER,"SystemJS cache cleared"),Ri}).finally(()=>{li.disconnect()})}).finally(()=>{Pn(),_=null,E=null}),_=je.id,E}r(b,"O");function T(N){const he=[];return N.forEach(je=>{je.addedNodes.forEach(Rt=>{Rt instanceof HTMLScriptElement&&Rt.getAttribute("systemjs")==="1"&&he.push(Rt)})}),he}r(T,"N");let I=null,O=null;function w(){return typeof System=="object"&&typeof System.register=="function"}r(w,"C");function D(){if(!H)return console.warn("No import map data found"),[];const N=H.imports;return!N||typeof N!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(N).filter(he=>typeof he=="string"||he instanceof String)}r(D,"R");const R={};let L,H,K=[],ee=!1,q=null;class ae extends m{constructor(he,je){super(je),this.R=he,this.D=he.bridgeInit,this.m()}tearDown(){super.tearDown()}M(he){var je,Rt;console.error("EmbeddedSameOriginBridgeTransport did not load",he),he&&console.error(he.stack),this.D.fireEvent(e.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${he}`),(Rt=(je=this.R.config.delegate)===null||je===void 0?void 0:je.didFailToInitialize)===null||Rt===void 0||Rt.call(je,"exception",he)}m(){var he,je,Rt;const Qt=(Rt=(je=(he=this.R.platformDelegate)===null||he===void 0?void 0:he.startTrace)===null||je===void 0?void 0:je.call(he,nt.COLLAB_INIT,{[st.CONTROLLER_ID]:`${this.R.id}`}))!==null&&Rt!==void 0?Rt:null,An=function(Pn,xn){const Xn=new FormData,{authToken:li,userJwt:Ri,getSlackToken:zi,isGov:gr,isPreload:Fr}=Pn.config;li&&Xn.append("oauth_token",li),Ri&&Xn.append("user_jwt",Ri),zi&&Xn.append("token",zi()),Fr&&Xn.append("canvas_loadshed_priority","low");const ri=Pn.config.xhrWithCredentials===!0?"include":void 0,Er=g(`${Xe(Pn)}/collab/controller-init?format=map`,{method:"POST",body:Xn,credentials:ri},nt.CONTROLLER_INIT,Pn,xn).then(hr=>(Pn.bridgeInit.fireEvent(e.CONTROLLER_INIT_DATA_FETCHED),hr)),Rr=window.QUIP_VERSION_NAME||"server",ei=new URLSearchParams([["version-name",Rr]]);return Pn.config.language&&ei.append("language-code",Pn.config.language),ei.append("cdn_fallback",`${Pn.getAttemptNumber()}`),gr&&ei.append("serve_gov","1"),q=g(`${Xe(Pn)}/collab/controller-resources?${ei.toString()}`,{method:"GET",credentials:ri},nt.CONTROLLER_RESORCES,Pn,xn).then(hr=>(Pn.bridgeInit.fireEvent(e.CONTROLLER_RESOURCE_DATA_FETCHED),hr)).catch(hr=>(q=null,Pn.bridgeInit.fireEvent(e.ERROR,`controller-resources request failed: ${hr}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null,resources_version:""})),Promise.all([Er,q]).then(hr=>{const[si,Eo]=hr;return Object.assign(Object.assign({},si),Eo)})}(this.R,Qt),qn=v(this.R,An,Qt);Promise.all([qn,An]).then(Pn=>{var xn;const Xn=Pn[0],li=Pn[1];Xn.main(li.init_options,li.preserialized,this.R.config.getSlackToken?null:li.oauth_token,this.R.config.getSlackToken?null:li.oauth_token_expiry,(xn=this.R.config.getSlackToken)!==null&&xn!==void 0?xn:null,Xe(this.R),this.destinationFn(),li.js_initializer,li.user_id,this.R.config.xhrWithCredentials,this.R.config.enableWebCaching?li.web_cache_key:void 0,this.R.config.enableWebCaching?li.web_cache_key_version:void 0,this.R.config.requestsAreCors,li.body_classes,li.css_url,!!this.R.config.useGraftedMode,this.R.config.pathRewriteHook,!!this.R.config.isRemoteGraftingMode,li.resources_version),this.D.fireEvent(e.BRIDGE_TRANSPORT_READY)}).catch(Pn=>this.M(Pn)).finally(()=>{var Pn,xn;(xn=(Pn=this.R.platformDelegate)===null||Pn===void 0?void 0:Pn.endTraceOrSpan)===null||xn===void 0||xn.call(Pn,Qt)})}logError(he){this.D.fireEvent(e.ERROR,he)}}r(ae,"P");class ce{constructor(he){this.embeddedSide=new ae(he,()=>this.controllerSide),this.controllerSide=new m(()=>this.embeddedSide)}}r(ce,"U");function Te(N,he){let je=null;for(const Rt of function(Qt){const An=[];for(const qn of Object.keys(Qt))isNaN(Number(qn))&&An.push(qn);return An}(N))N[Rt]===he&&(je=Rt);return je||(je=String(he)),je+=` (${he})`,je}r(Te,"w");const ke={[s.INCOMING]:"ToEmbedded",[s.OUTGOING]:"FromEmbedded",[s.INCOMING_REPLY]:"ReplyToEmbedded",[s.OUTGOING_REPLY]:"ReplyFromEmbedded"},tt=[h.Op.DID_INITIALIZE,h.Op.DID_FAIL_TO_INITIALIZE],At=[];class Be{constructor(he,je){this.p=he,this.v=je,this.I=[],this.P=[],this.U={[ke[s.INCOMING]]:{},[ke[s.OUTGOING_REPLY]]:{},[ke[s.OUTGOING]]:{},[ke[s.INCOMING_REPLY]]:{}}}getHook(){const he=this.I,je=this.P,Rt=this.U;return(Qt,An,qn)=>{var Pn,xn;const Xn={ts:Date.now(),op:Qt,message:An,type:qn},li=Ze(qn,Qt);if((Pn=(xn=Rt[ke[qn]])[li])!==null&&Pn!==void 0||(xn[li]=0),Rt[ke[qn]][li]+=1,he.length>=30)for(je.push(Xn);je.length>20;)je.shift();else he.push(Xn)}}getReport(he=!0){var je;return{collabInstanceId:this.p,collabInstanceTeamId:(je=this.v)!==null&&je!==void 0?je:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:$e(this.I,he),recentLog:$e(this.P,he)}}}r(Be,"F");function $e(N,he=!0){return N.map(je=>{const Rt={op:Ze(je.type,je.op),type:ke[je.type]};var Qt,An;return he&&(Qt=je.type,An=je.op,!([s.INCOMING,s.OUTGOING_REPLY].includes(Qt)?tt.includes(An):At.includes(An)))||(Rt.message=je.message),he||(Rt.ts=je.ts),Rt})}r($e,"G");function Ze(N,he){return[s.INCOMING,s.OUTGOING_REPLY].includes(N)?Te(h.Op,he):Te(p.Op,he)}r(Ze,"H");class Je{constructor(he){this.D=he.bridgeInit,this.B=function(je){return new ce(je).embeddedSide}(he),this.F=new Be(he.id,he.config.teamId),this.D.fireEvent(e.BRIDGE_TRANSPORT_SET),this.B.setTransportHook(this.F.getHook())}init(he){this.D.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(p.Op.INIT,he),this.D.fireEvent(e.INIT_SENT)})}tearDown(){this.B.tearDown()}invoke(he,je){const Rt=he==p.Op.INIT,Qt=r(()=>{this.B.invoke(he,je),Rt||this.D.fireEvent(e.MESSAGE_SENT,`Op ${he}`)},"n");Rt?Qt():this.D.after([e.BRIDGE_OPEN],Qt,`Send op ${he}`)}addHandler(he,je){this.B.addHandler(he,he===h.Op.DID_INITIALIZE?je:Rt=>{this.D.after([e.BRIDGE_OPEN],()=>{je(Rt),this.D.fireEvent(e.MESSAGE_HANDLED,`Op ${he}`)},`Handle op ${he}`)})}getDebugReport(he=!0){return this.F.getReport(he)}}r(Je,"V");class dt{constructor(he,je){this.G=new WeakMap,this.H=he,this.V=je}get(){const he=this.H.get();return this.K(he)}getAsync(){return this.H.getAsync().then(he=>this.K(he))}listen(he){let je=this.G.get(he);je||(je=r((Rt,Qt)=>{he(this.K(Rt),this.V(Qt))},"e"),this.G.set(he,je)),this.H.listen(je)}once(he){let je=this.G.get(he);je||(je=r((Rt,Qt)=>{he(this.K(Rt),this.V(Qt))},"e"),this.G.set(he,je)),this.H.once(je)}unlisten(he){const je=this.G.get(he);je&&this.H.unlisten(je)}K(he){if(he!==void 0)return this.V(he)}}r(dt,"y");class Ot{constructor(he,je){this.H=he,this.$=je}get(){return this.H.get()}getAsync(){const he=this.H.getAsync();return new Promise((je,Rt)=>{he.then(Qt=>{Qt?je(Qt):this.H.once((An,qn)=>{je(qn??this.$)})}).catch(Rt)})}listen(he){this.H.listen(he)}unlisten(he){this.H.unlisten(he)}once(he){this.H.once(he)}}r(Ot,"K");var Nt;(function(N){N[N.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",N[N.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",N[N.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",N[N.SECTION_SNIPPET=4]="SECTION_SNIPPET",N[N.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",N[N.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",N[N.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",N[N.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",N[N.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",N[N.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",N[N.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",N[N.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",N[N.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",N[N.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",N[N.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",N[N.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE",N[N.PLACEHOLDERS_INFO=18]="PLACEHOLDERS_INFO",N[N.AI_ASSISTANT_OVERLAY_IS_OPEN=19]="AI_ASSISTANT_OVERLAY_IS_OPEN"})(Nt||(Nt={}));const Ve=new WeakMap;class He{constructor(he={}){this.Y=new Set,this.W=he}add(he,je){if(!this.Y.has(he)&&(this.Y.add(he),je&&Ve.set(he,je),this.Y.size===1)){const{didStartHavingListeners:Rt}=this.W;Rt&&Rt()}}addOneShot(he,je){const Rt=r((...Qt)=>{this.remove(Rt),he.apply(window,Qt)},"i");this.add(Rt,je)}remove(he){if(this.Y.delete(he)&&this.Y.size===0){const{didStopHavingListeners:je}=this.W;je&&je()}}removeAll(){this.Y.forEach(he=>this.remove(he))}empty(){return this.Y.size===0}notify(...he){if(this.Y.size===0)return;const{notifyDecorator:je,catchError:Rt}=this.W;let Qt;je&&(Qt=je());const An=Array.from(this.Y);for(let qn=0;qn<An.length;qn++)if(Rt)try{An[qn].apply(window,he)}catch(Pn){Rt(Pn)}else An[qn].apply(window,he);Qt&&Qt.clear()}debugGetDescriptions(){return Array.from(this.Y,(he,je)=>Ve.get(he)||`<anonymous-${je}>`)}}r(He,"Y");class ct{constructor(he,je,Rt,Qt=!1){this.X=he,this.J=je,this.Z=Rt,this.q=Qt;const An=r((qn,Pn)=>{this.Y.notify(qn,Pn)},"n");this.Y=new He({didStartHavingListeners:()=>this.Z.addListener(he,je,An),didStopHavingListeners:()=>{this.Z.removeListener(he,je,An),this.q||this.Z.cleanupStorage(he,je)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(he){this.Y.add(he)}unlisten(he){this.Y.remove(he)}unlistenAll(){this.Y.removeAll()}once(he){this.Y.addOneShot(he)}}r(ct,"W");class yt{constructor(he){this.Y=new He,this.tt=he}set(he){const je=this.tt;this.tt=he,this.Y.notify(je,he)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(he){this.Y.add(he)}unlisten(he){this.Y.remove(he)}once(he){this.Y.addOneShot(he)}}r(yt,"j");class it{constructor(he){this.et=new Map,this.R=he}didCreateDoc(he,je){const Rt=this.et.get(he);Rt?(this.et.set(je,Rt),Rt.idInternal.set(je)):console.warn(`Could not find doc mapped to ID ${he}`)}didDeleteDoc(he){const je=this.et.get(he);je==null||je.deletedInternal.set(!0)}didTryToLoadWithTempId(he){const je=this.et.get(he);je==null||je.didTryToLoadWithTempIdInternal.set(!0)}create(he={}){const{title:je,cannedDoc:Rt,context:Qt,usesOnlyInlineTextComments:An,content:qn}=he;return this.controllerAccess.docs.createDoc(je,Rt,Qt,An,qn).then(Pn=>this.get(Pn))}get(he){let je=this.et.get(he);return je||(je=new nn(he,this.R),this.et.set(he,je)),je}get controllerAccess(){return this.R.controllerAccess}setEditsDisabled(he,je){for(const Rt of dn.values())Rt.doc().id.get()===he&&Rt.docEditor.setEditsDisabled(je);this.controllerAccess.docs.reloadThread(he)}getBlockKitThumbnail(he,je=!0,Rt){const Qt=rn(this.R),An=Rt?`${he}/${Rt}`:he;return new Ot(new ct(Nt.DOC_BLOCK_KIT_THUMBNAIL,An,Qt,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(qn=>(je&&qn.blocks.length>0&&qn.blocks.shift(),qn))}getCannedDocName(he){const je=rn(this.R);return new Ot(new ct(Nt.CANNED_DOC_NAME,he,je,!0),"").getAsync().then(Rt=>Rt.length===0?null:Rt)}getSectionSnippet(he){const je=rn(this.R);return new Ot(new ct(Nt.SECTION_SNIPPET,he,je,!0),"").getAsync()}setDebugOption(he,je){this.controllerAccess.docs.setDebugOption(he,je)}findSlackObject(he,je,Rt){return this.controllerAccess.docs.findSlackObject(he,je,Rt)}findSlackUnfurls(he){return this.controllerAccess.docs.findSlackUnfurls(he)}editLink(he,je,Rt){this.controllerAccess.docs.editLink(he,je,Rt)}loadData(he,je){return this.controllerAccess.docs.loadData([he],je)}it(){return sn(this.R)}}r(it,"X");class nn{constructor(he,je){this.st=null,this.id=this.idInternal=new yt(he),this.R=je;const Rt=rn(this.R);this.lastUpdated=new dt(new ct(Nt.DOC_UPDATED_USEC,he,Rt,!0),Qt=>new Date(Qt/1e3)),this.lastUpdatedUsec=new ct(Nt.DOC_UPDATED_USEC,he,Rt,!0),this.lastUpdatedSlackUserId=new ct(Nt.DOC_LAST_UPDATED_USER_ID,he,Rt,!0),this.deleted=this.deletedInternal=new yt(!1),this.isEmpty=new ct(Nt.DOC_IS_EMPTY,he,Rt,!0),this.hasPerformedEditingAction=new yt(!1),this.hasFileUnfurls=new ct(Nt.DOC_HAS_FILE_UNFURLS,he,Rt,!0),this.templateControlsInfo=new ct(Nt.TEMPLATE_CONTROLS_BE,he,Rt,!0),this.lastNewSectionUpdated=new dt(new ct(Nt.DOC_NEW_SECTION_USEC,he,Rt,!0),Qt=>new Date(Qt/1e3)),this.hasHeaderImage=new ct(Nt.DOC_HAS_HEADER_IMAGE,he,Rt,!0),this.didTryToLoadWithTempIdInternal=new yt(!1),this.placeholdersInfo=new ct(Nt.PLACEHOLDERS_INFO,he,Rt,!0)}getBlockKitThumbnailValue(){if(!this.st&&this.isCreated()){const he=rn(this.R);this.st=new dt(new ct(Nt.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),he,!0),JSON.parse)}return this.st}embed(he,je={mode:"editor"}){let Rt=Xt.get(he);return Rt||(Rt=new Rn(this,he,je,this.R),Xt.set(he,Rt),Rt.mount()),Rt.doc()!==this&&console.error("There was a different document embedded in the container",he),Rt}isCreated(){return!this.idInternal.get().startsWith("temp:")}failedToCreate(){return!this.isCreated()&&this.deletedInternal.get()}triedToLoadTempId(){return this.didTryToLoadWithTempIdInternal.get()}}r(nn,"J");const Xt=new WeakMap,dn=new Map,bn={mode:"editor"};class Rn{constructor(he,je,Rt,Qt){this.rendered=new yt(!1),this.isRenderComplete=new yt(!1),this.isRenderStable=new yt(!1),this.failedToLoad=new yt(!1),this.loadInfo=new yt(void 0),this.editingActionPerformed=new yt(!1),this.loadError=new yt(void 0),this.editorContainer=new yt(void 0),this.nt=!1,this.rt=!1,this.ot=[],this._t=he,this.Et=je,this.W=Object.assign(Object.assign({},bn),Rt),this.R=Qt,this.lt=`${Mn}-${this.R.id}-${Wi++}`,this.ht=function(){const An=document.createElement("div");return An.classList.add("collab-root"),An}(),this.at(Nt.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.at(Nt.DOC_EMBED_SCROLL_POSITION),this.focusState=this.at(Nt.DOC_EMBED_FOCUS_STATE),this.selectionState=this.at(Nt.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.at(Nt.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.at(Nt.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.ct(Nt.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.at(Nt.DOC_HAS_HEADER_IMAGE),this.placeholdersInfo=this.at(Nt.PLACEHOLDERS_INFO),this.aiAssistantOverlayIsOpen=this.at(Nt.AI_ASSISTANT_OVERLAY_IS_OPEN),this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this.lt)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.R.controllerAccess}at(he){const je=rn(this.R),Rt=new ct(he,this.lt,je,!1);return this.ot.push(Rt),Rt}ct(he,je){return new Ot(this.at(he),je)}onEditorLoadError(he){console.info("[QUIP] Editor load error",he),this.failedToLoad.set(!0),this.loadError.set(he),this.ut()}didLoadModel(he){this.loadInfo.set(he)}didRender(he){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(he)}didFinishRender(){this.isRenderComplete.set(!0),this.isRenderStable.get()||this.isRenderStable.set(!0)}didFinishPartialStableRender(){this.isRenderStable.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this._t}docId(){return this._t.id.get()}containerElement(){return this.Et}frameName(){return this.lt}mount(){if(dn.set(this.lt,this),!this.rt){const he=this.ht;he.style.visibility="hidden",this.Et.appendChild(he);let je=he.ownerDocument.defaultView;je||(console.warn(`Mounting ${this.lt} into element with no window`),je=window),this.nt=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(he)}),he.style.visibility="visible",this.rt&&this.Tt(),this.rt=!0}this.nt&&this.Tt()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this.lt}. Frame loaded ${this.nt}`),this.nt&&(this.ut(),this.rendered.set(!1),this.isRenderStable.set(!1),this.isRenderComplete.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.nt=!1),this.rt&&(Xt.delete(this.Et),this.ht.remove(),this.rt=!1),this.ot.forEach(he=>he.unlistenAll()),dn.delete(this.lt)}catch(he){console.warn("[Quip] Error thrown in unmount",he)}}waitForEmbeddedUiProvider(){return new Promise(he=>{this.embeddedUiProvider?he(this.embeddedUiProvider):this.At=he})}it(){return sn(this.R)}Tt(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this._t.id.get(),this.W)})}ut(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(he){this.commentsUiProvider=he,he==null||he.setDelegate(this.docEditor)}setAutocompleteUiProvider(he){this.autocompleteUiProvider=he,he==null||he.setDelegate(this.docEditor)}setPermalinkUiProvider(he){this.permalinkUiProvider=he}setEmbeddedUiProvider(he){this.embeddedUiProvider=he,this.At&&he&&(this.At(he),this.At=null)}setErrorUiProvider(he){this.errorUiProvider=he}setEditorUiConnector(he){this.editorUiConnector=he,he==null||he.setDelegate(this.docEditor)}}r(Rn,"q");class Zt{constructor(he){this.St=he}getFrameByName(he){return this.St.get(he)}withFrame(he,je){const Rt=this.getFrameByName(he);Rt||console.warn(`Could not find a frame with name ${he}.`),je(Rt)}}r(Zt,"z");const Mn=`collab-doc-${(1e3*Math.random()).toString(36)}`;let Wi=0;class Jn{constructor(){this.Ot=[],this.Nt=!1}get docs(){return this.It}get settings(){return this.Lt}get providers(){return this.Ct}run(he){this.Nt?he():this.Ot.push(he)}setObjects({docs:he,settings:je,providers:Rt}){this.Nt=!0,this.It=he,this.Lt=je,this.Ct=Rt;for(const Qt of this.Ot)Qt();this.Ot=[]}}r(Jn,"it");let zn=0;class En{constructor(he){this.id=zn++,this.o=!1,this.Rt=!1,this.config=he,this.platformDelegate=he.delegate,this.bridgeInit=En.Dt(`embedded ${this.id}`);const je=new Je(this);oi.set(this,je),this.controllerAccess=new Jn,this.docs=new it(this),this.failedToInitialize=new yt(!1),this.initializationError=new yt(void 0),this.Mt()}Mt(){if(this.o)return void this.bridgeInit.fireEvent(e.ERROR,"Collab instance initialized more than once");const{appearance:he,language:je,delegate:Rt,commentsDataProvider:Qt,bookmarksDataProvider:An,fileDataProvider:qn,slackListDataProvider:Pn,slackObjectProvider:xn,features:Xn,documentEventProvider:li,underlineAllLinks:Ri,enableAnimations:zi,displayEmojiAsPlainText:gr,spellcheckEnabled:Fr,embeddedConfigProvider:ri,embeddedUiProvider:Er,topLevelTeamId:Rr,anchorLinkProvider:ei,slackObjectUIProvider:hr,slackTextyHtmlConversionProvider:si,useSmartQuotesAndDashes:Eo,atomStorageProvider:Jr}=this.config,fo=this.it();fo.init({features:Xn,delegate:Rt,anchorLinkProvider:ei,bookmarksDataProvider:An,commentsDataProvider:Qt,documentEventProvider:li,fileDataProvider:qn,slackListDataProvider:Pn,slackObjectProvider:xn,slackObjectUIProvider:hr,slackTextyHtmlConversionProvider:si,mountedFrameProvider:new Zt(dn),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(Jr)});const ho=new u;var de,_e;ho.add(()=>{he&&this.ft(he),je&&this.vt(je),Ri!==void 0&&this.setUnderlineAllLinks(Ri),zi!==void 0&&this.setEnableAnimations(zi),gr!==void 0&&this.setDisplayEmojiAsPlainText(gr),Fr!==void 0&&this.setSpellcheckEnabled(Fr),Rr&&this.Pt(Rr),Eo!==void 0&&this.setUseSmartQuotesAndDashes(Eo)}),function(Pe,rt,_t){if(!_t)return;const Dt=_t.supportedAutocompleteTypes;Dt&&rt.add(()=>{Pe.providers.registerAutocompleteTypes(Dt)}),Pe.run(()=>_t.setDelegate(Pe.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,ho,xn),function(Pe,rt={},_t,Dt,pn=In=>{}){Pe.addHandler(h.Op.DID_INITIALIZE,()=>{var In;(In=rt.didInitialize)===null||In===void 0||In.call(rt),_t.run(),Dt.fireEvent(e.DID_INIT_RECEIVED)}),Pe.addHandler(h.Op.DID_FAIL_TO_INITIALIZE,({initError:In})=>{var Nn;pn(In),(Nn=rt.didFailToInitialize)===null||Nn===void 0||Nn.call(rt,In)})}(fo,Rt,ho,this.bridgeInit,Pe=>{this.Ut(!0,Pe)}),de=this.controllerAccess,_e=Qt,de.run(()=>{_e==null||_e.setDelegate(de.providers.getCommentsDataProviderDelegate())}),function(Pe,rt){Pe.run(()=>{rt==null||rt.setDelegate(Pe.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,An),function(Pe,rt){Pe.run(()=>rt==null?void 0:rt.setDelegate(Pe.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,li),function(Pe,rt,_t){_t&&rt.add(()=>{Pe.providers.registerEmbeddedUiProvider(_t.config())})}(this.controllerAccess,ho,ri||Er),this.o=!0,this.bridgeInit.fireEvent(e.HANDLER_REGISTRATION_FINISHED)}Ut(he,je){const Rt=this.failedToInitialize,Qt=this.initializationError;Rt.set(he),Qt.set(je)}static Dt(he){const je=new o(he);return je.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.INIT_SENT,e.DID_INIT_RECEIVED,e.HANDLER_REGISTRATION_FINISHED],()=>{je.fireEvent(e.BRIDGE_OPEN)}),je}controllerModuleUrls(){return D()}preload(){return!this.Rt&&(D().forEach(he=>{if(!R[he]){const je=document.createElement("link");je.rel="preload",je.as="script",je.href=he,je.crossOrigin="anonymous",R[he]=je,document.head.appendChild(je)}}),this.Rt=!0,!0)}tearDown(){this.it().tearDown(),oi.delete(this),this.Ut(!1),this.o=!1}createBasicTraceSpan(he,je,Rt){var Qt,An,qn;const Pn=(qn=(An=(Qt=this.platformDelegate)===null||Qt===void 0?void 0:Qt.startSpan)===null||An===void 0?void 0:An.call(Qt,he,je,Rt))!==null&&qn!==void 0?qn:null;return Pn?{span:Pn,closeSpanFn:xn=>{var Xn,li;(li=(Xn=this.platformDelegate)===null||Xn===void 0?void 0:Xn.endTraceOrSpan)===null||li===void 0||li.call(Xn,Pn,xn?{[st.ERROR]:`${xn}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var he;return(he=this.config.attemptNumber)!==null&&he!==void 0?he:0}preloadThreads(he,je){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(he,je))}setAppearance(he){this.config.appearance=he,this.ft(he)}setLanguage(he){this.config.language=he}setAppKeyboardFocusModeEnabled(he,je){this.wt(he,je)}ft(he){this.controllerAccess.settings.setAppearance(he)}vt(he){this.controllerAccess.settings.setLanguage(he)}wt(he,je){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(he,je)}Pt(he){this.controllerAccess.settings.setDefaultTeamId(he)}setUnderlineAllLinks(he){this.controllerAccess.settings.setUnderlineLinks(he)}setEnableAnimations(he){this.controllerAccess.settings.setEnableAnimations(he)}setDisplayEmojiAsPlainText(he){this.controllerAccess.settings.setDisplayEmojiAsPlainText(he)}setSpellcheckEnabled(he){this.controllerAccess.settings.setSpellcheckEnabled(he)}setUseSmartQuotesAndDashes(he){this.controllerAccess.settings.setUseSmartQuotesAndDashes(he)}async getInitLog(he){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(he)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(he){for(let je=o.MAX_INIT_LOG;je>=0;je--){const Rt=JSON.stringify(await this.getInitLog(je));if(Rt.length<=he)return Rt}return"Failed to generate"}getDebugReport(he){return this.getBridgeDebugReport(he)}getBridgeDebugReport(he=!0){return this.it().getDebugReport(he)}it(){return oi.get(this)}}r(En,"nt");function sn(N){return oi.get(N)}r(sn,"rt");const oi=new Map;function rn(N){return N.atomClient}r(rn,"_t");const cn=document.querySelector("script[src*='/collab/embedded.js']"),Wt=cn==null?void 0:cn.src,J=Wt?new URL(Wt).origin:"https://prod.slack.quip.systems";function Xe(N){return N.config.origin||J}r(Xe,"at");var nt,st;(function(N){N.COLLAB_INIT="collab-init",N.CONTROLLER_INIT="controller-init",N.CONTROLLER_RESORCES="controller-resources",N.HTTP_FETCH_HEADER="http-fetch-header",N.HTTP_FETCH_CONTENT="http-fetch-content",N.JSON_PARSE="json-parse",N.LOAD_CONTROLLER="load-controller",N.AWAIT_CALLBACK="await-callback",N.LOAD_SYSTEMJS="load-systemjs",N.MODULE_PREFETCH="module-prefetch",N.SCRIPT_TAG="script-tag",N.LOAD_CONTROLLER_MODULE="load-controller-module",N.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})(nt||(nt={})),function(N){N.CONTROLLER_ID="controller-id",N.ERROR="error",N.JS_PREFETCH_ENABLED="js-prefetch-enabled",N.URL="url"}(st||(st={}));const pt=(()=>{if(typeof d.g=="object")return d.g;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function It(N,he,je){const Rt=N.split(".");let Qt=je||pt;for(let An=0;An<Rt.length;An++){const qn=Rt[An];An===Rt.length-1?Qt[qn]=he:(qn in Qt||(Qt[qn]={}),Qt=Qt[qn])}}r(It,"Tt");var ve,et,G,ne,Me,Re,Ft,ot,Tt,we,Ue,F,Oe,se,ue,X,lt,Ae,Ye,Ht,Mt,Qn,$n,Vn,kn,tn,Gn,Si,nr,ln,jt,Fn,Hn,wi,Pi,ni,Kn,ji,$i,sr,Ai,Lr,Vi,Nr,_i;(function(N){N[N.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",N[N.PERMALINK=1]="PERMALINK",N[N.POPOUT=2]="POPOUT"})(ve||(ve={})),function(N){N.BOLD="bold",N.ITALIC="italic",N.UNDERLINE="underline",N.STRIKETHROUGH="strikethrough",N.CODE="code",N.SUBSCRIPT="subscript",N.SUPERSCRIPT="superscript",N.LINK="link"}(et||(et={})),function(N){N.PLAIN="plain",N.H1="h1",N.H2="h2",N.H3="h3",N.CODE="code",N.BLOCKQUOTE="blockquote",N.LIST_BULLET="list_bullet",N.LIST_NUMBERED="list_numbered",N.LIST_CHECKLIST="list_checklist"}(G||(G={})),function(N){N.FLEXBOX="flexbox",N.TABLE="table",N.CALLOUT="callout"}(ne||(ne={})),function(N){N.CACHE="cache",N.MEMORY="memory",N.NETWORK="network"}(Me||(Me={})),function(N){N.LINK="link",N.COMMENT="comment",N.REACTION="reaction",N.REFINEMENT="refinement",N.CALLOUT="callout"}(Re||(Re={})),function(N){N.NONE="none",N.SCROLL_TO_SECTION="scroll_to_section",N.FOCUS_SECTION="focus_section"}(Ft||(Ft={})),function(N){N[N.LINK_COPIED=0]="LINK_COPIED",N[N.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",N[N.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(ot||(ot={})),function(N){N[N.UNSUPPORTED_FILE_TYPE=0]="UNSUPPORTED_FILE_TYPE"}(Tt||(Tt={})),function(N){N[N.ANY=1]="ANY",N[N.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(we||(we={})),function(N){N[N.COMMENTS=0]="COMMENTS",N[N.FILE_UPLOADS=1]="FILE_UPLOADS",N[N.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",N[N.SPREADSHEETS=3]="SPREADSHEETS",N[N.HOVERCARDS=4]="HOVERCARDS",N[N.LINK_UNFURL=5]="LINK_UNFURL",N[N.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",N[N.REMINDERS=7]="REMINDERS",N[N.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",N[N.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",N[N.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",N[N.DOPE_TABLE=11]="DOPE_TABLE",N[N.UI_PARITY=12]="UI_PARITY",N[N.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",N[N.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",N[N.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",N[N.ANCHOR_LINKS=16]="ANCHOR_LINKS",N[N.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",N[N.IMAGE_CAPTION=18]="IMAGE_CAPTION",N[N.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",N[N.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",N[N.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",N[N.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",N[N.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",N[N.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",N[N.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",N[N.MENTIONS_SHARE=30]="MENTIONS_SHARE",N[N.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",N[N.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",N[N.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",N[N.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",N[N.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",N[N.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",N[N.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",N[N.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",N[N.INLINE_COMMENTS=40]="INLINE_COMMENTS",N[N.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",N[N.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",N[N.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",N[N.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",N[N.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",N[N.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",N[N.A11Y_CARET=47]="A11Y_CARET",N[N.BOOKMARKS=48]="BOOKMARKS",N[N.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",N[N.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",N[N.LENIENT_STARTUP=52]="LENIENT_STARTUP",N[N.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",N[N.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",N[N.STATIC_TITLES=55]="STATIC_TITLES",N[N.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",N[N.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",N[N.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",N[N.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",N[N.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",N[N.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",N[N.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",N[N.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",N[N.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",N[N.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",N[N.PADDING_RESIZING=66]="PADDING_RESIZING",N[N.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",N[N.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",N[N.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",N[N.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",N[N.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",N[N.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",N[N.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",N[N.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",N[N.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",N[N.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",N[N.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",N[N.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",N[N.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",N[N.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",N[N.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",N[N.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",N[N.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",N[N.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",N[N.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",N[N.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",N[N.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",N[N.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",N[N.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",N[N.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",N[N.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",N[N.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",N[N.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",N[N.SIMPLE_TABLES=97]="SIMPLE_TABLES",N[N.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",N[N.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",N[N.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",N[N.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",N[N.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",N[N.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",N[N.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",N[N.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",N[N.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",N[N.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",N[N.IMAGE_RESIZING=108]="IMAGE_RESIZING",N[N.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",N[N.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",N[N.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",N[N.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",N[N.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",N[N.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",N[N.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",N[N.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",N[N.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",N[N.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",N[N.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",N[N.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",N[N.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",N[N.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",N[N.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",N[N.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",N[N.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",N[N.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",N[N.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",N[N.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",N[N.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",N[N.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",N[N.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",N[N.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",N[N.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",N[N.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",N[N.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",N[N.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",N[N.UNFURL_EMBED=138]="UNFURL_EMBED",N[N.SLACK_REACT_17=139]="SLACK_REACT_17",N[N.ENABLE_REACT_18=140]="ENABLE_REACT_18",N[N.PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS=141]="PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS",N[N.DRAGGABLE_CONTROL=142]="DRAGGABLE_CONTROL",N[N.NEW_COLUMN_PLACEHOLDERS=143]="NEW_COLUMN_PLACEHOLDERS",N[N.CANVAS_LISTS_GA=144]="CANVAS_LISTS_GA",N[N.DOCUMENT_AUTOCOMPLETE=145]="DOCUMENT_AUTOCOMPLETE",N[N.CANVAS_DYNAMIC_LISTS=146]="CANVAS_DYNAMIC_LISTS",N[N.CANVAS_LISTS_CARDS=147]="CANVAS_LISTS_CARDS",N[N.MULTI_SECTION_DRAG=148]="MULTI_SECTION_DRAG",N[N.SMOOTHER_MARGIN_SELECTION=149]="SMOOTHER_MARGIN_SELECTION",N[N.WFB_BACK_TO_BASIC_APRIL_RELEASE=150]="WFB_BACK_TO_BASIC_APRIL_RELEASE",N[N.CANVAS_HEADER_IMAGE=151]="CANVAS_HEADER_IMAGE",N[N.AUTOSLUG_SLACK_CHANNELS=152]="AUTOSLUG_SLACK_CHANNELS",N[N.CANVAS_TITLE_UNFURL_DEFAULT=153]="CANVAS_TITLE_UNFURL_DEFAULT",N[N.CURSOR_AWARENESS=154]="CURSOR_AWARENESS",N[N.CANVAS_LISTS_EMBEDS=155]="CANVAS_LISTS_EMBEDS",N[N.CANVAS_DATE_MENTIONS=156]="CANVAS_DATE_MENTIONS",N[N.CANVAS_MOBILE_GENERIC_PLACEHOLDERS=157]="CANVAS_MOBILE_GENERIC_PLACEHOLDERS",N[N.SELECTION_AWARENESS=158]="SELECTION_AWARENESS",N[N.CANVAS_GROUP_MENTIONS=159]="CANVAS_GROUP_MENTIONS",N[N.CANVAS_SALES_TEMPLATES=160]="CANVAS_SALES_TEMPLATES",N[N.CALLOUTS=161]="CALLOUTS",N[N.CANVAS_LINK_HOVERCARD=162]="CANVAS_LINK_HOVERCARD",N[N.CANVAS_NATIVE_LIST_EMBED=163]="CANVAS_NATIVE_LIST_EMBED",N[N.MESSAGE_TO_CANVAS_BUTTON=165]="MESSAGE_TO_CANVAS_BUTTON",N[N.CANVAS_DYNAMIC_GUTTER=166]="CANVAS_DYNAMIC_GUTTER",N[N.TRANSIENT_SECTION_ENHANCEMENTS=167]="TRANSIENT_SECTION_ENHANCEMENTS",N[N.CANVAS_DATE_HOVERCARD=168]="CANVAS_DATE_HOVERCARD",N[N.MOBILE_COMMENT_ICON_UPDATE=169]="MOBILE_COMMENT_ICON_UPDATE",N[N.CRDTS_CLIENT=170]="CRDTS_CLIENT",N[N.MOBILE_CONTENT_REACTIONS=171]="MOBILE_CONTENT_REACTIONS",N[N.CANVAS_ANNOTATION_AUTO_HIGHLIGHTING=172]="CANVAS_ANNOTATION_AUTO_HIGHLIGHTING",N[N.CANVAS_REQUIRE_EXACT_MATCH_TO_OPEN_COMMENT_THREAD=173]="CANVAS_REQUIRE_EXACT_MATCH_TO_OPEN_COMMENT_THREAD",N[N.MOBILE_ADD_COMMENT_BOTTOM_SHEET=174]="MOBILE_ADD_COMMENT_BOTTOM_SHEET",N[N.CANVAS_GHOST_TEXT_ON_STYLED_SECTIONS=175]="CANVAS_GHOST_TEXT_ON_STYLED_SECTIONS",N[N.MOBILE_CONTENT_REACTIONS_AND_COMMENTS=176]="MOBILE_CONTENT_REACTIONS_AND_COMMENTS",N[N.CONTENT_REACTIONS_AND_COMMENTS=177]="CONTENT_REACTIONS_AND_COMMENTS",N[N.CANVAS_CHECKBOX_ANIMATIONS=178]="CANVAS_CHECKBOX_ANIMATIONS",N[N.MOBILE_SET_IN_CANVAS=179]="MOBILE_SET_IN_CANVAS",N[N.MOBILE_CANVAS_LEFT_PADDING=180]="MOBILE_CANVAS_LEFT_PADDING",N[N.CANVAS_AI_CONTENT_CREATION=181]="CANVAS_AI_CONTENT_CREATION",N[N.WORK_OBJECT_UNFURLS=182]="WORK_OBJECT_UNFURLS",N[N.ENABLE_LOCAL_HISTORY_LAYOUT_FIXERS=183]="ENABLE_LOCAL_HISTORY_LAYOUT_FIXERS",N[N.CANVAS_AI_GUTTER_ICON=184]="CANVAS_AI_GUTTER_ICON",N[N.LAZY_RENDERING=185]="LAZY_RENDERING",N[N.DISABLE_QUIP_METRICS_RECORDER=186]="DISABLE_QUIP_METRICS_RECORDER",N[N.CANVAS_SALESFORCE_DATA_MENTION=187]="CANVAS_SALESFORCE_DATA_MENTION",N[N.CANVAS_ALLOW_SLACK_OUTLINE=188]="CANVAS_ALLOW_SLACK_OUTLINE",N[N.DISABLE_THREAD_READ_ONLY_LISTENERS=189]="DISABLE_THREAD_READ_ONLY_LISTENERS",N[N.CANVAS_HUDDLE_SUMMARY_FEEDBACK_BTNS=190]="CANVAS_HUDDLE_SUMMARY_FEEDBACK_BTNS",N[N.CANVAS_CONVERT_TO_CALLOUT=191]="CANVAS_CONVERT_TO_CALLOUT",N[N.CANVAS_INLINE_AUTHOR_ATTRIBUTION=192]="CANVAS_INLINE_AUTHOR_ATTRIBUTION",N[N.MOBILE_FIND_IN_CANVAS=193]="MOBILE_FIND_IN_CANVAS"}(Ue||(Ue={})),function(N){N[N.NONE=0]="NONE",N[N.SHIFT=1]="SHIFT",N[N.ALT=2]="ALT",N[N.META=4]="META",N[N.CTRL=8]="CTRL",N[N.MOD=16]="MOD"}(F||(F={})),function(N){N[N.CHANNEL=0]="CHANNEL",N[N.USER=1]="USER",N[N.EMOJI=2]="EMOJI",N[N.FILE=4]="FILE",N[N.UNFURL=5]="UNFURL",N[N.DOCUMENT=6]="DOCUMENT",N[N.LINK=7]="LINK",N[N.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",N[N.PENDING_URL=10]="PENDING_URL",N[N.GENERIC=11]="GENERIC",N[N.TEMPLATE=12]="TEMPLATE",N[N.BACKGROUND=13]="BACKGROUND",N[N.WIDGET=14]="WIDGET",N[N.LIST=15]="LIST",N[N.LIST_RECORD=16]="LIST_RECORD",N[N.HEADER_IMAGE=17]="HEADER_IMAGE",N[N.SALESFORCE_RECORD=18]="SALESFORCE_RECORD",N[N.GROUP_MEMBERSHIP=19]="GROUP_MEMBERSHIP"}(Oe||(Oe={})),function(N){N[N.NOT_FOUND=0]="NOT_FOUND"}(se||(se={})),function(N){N[N.CLOSE=0]="CLOSE",N[N.SELECT=1]="SELECT",N[N.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",N[N.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(ue||(ue={})),function(N){N.CANVAS="insert-canvas",N.AUDIO="insert-audio",N.VIDEO="insert-video",N.FILE="insert-file",N.WORKFLOW="insert-workflow",N.PROFILE="insert-profile",N.LIST="insert-list",N.CALLOUT="insert-callout",N.CODE="inline-code",N.CHANNEL="ac-trigger-channel",N.CODEBLOCK="insert-codeblock",N.BLOCKQUOTE="insert-blockquote",N.PLAIN="insert-plain",N.H1="insert-h1",N.H2="insert-h2",N.H3="insert-h3",N.IMAGE="insert-image",N.TABLE="insert-table",N.CHECKLIST="insert-checklist",N.BULLET_LIST="insert-bullet-list",N.ORDERED_LIST="insert-ordered-list",N.DIVIDER="insert-divider",N.TWO_COLUMNS="layout-two-columns",N.THREE_COLUMNS="layout-three-columns",N.DATE_GENERIC="date-generic",N.DATE_TODAY="date-today",N.DATE_TOMORROW="date-tomorrow",N.DATE_YESTERDAY="date-yesterday",N.AI_ASSISTANT="ai-assistant",N.AI_ASSISTANT_CANVAS_SUMMARY="ai-assistant-canvas-summary",N.AI_ASSISTANT_CANVAS_ACTION_ITEMS="ai-assistant-canvas-action-items",N.SALESFORCE_DATA_MENTION="salesforce-data-mention",N.SALESFORCE_RECORD="salesforce-record"}(X||(X={})),function(N){N.DEFAULT_SOURCE="canvas-shortcut-command"}(lt||(lt={})),function(N){N[N.SLACK_OBJECT=0]="SLACK_OBJECT",N[N.LINK=1]="LINK",N[N.HEADER=2]="HEADER",N[N.TEXT=3]="TEXT",N[N.DIVIDER=4]="DIVIDER",N[N.HYPERLINK=5]="HYPERLINK",N[N.TITLE=6]="TITLE",N[N.TABLE=7]="TABLE",N[N.DRAG_OVERLAY=8]="DRAG_OVERLAY",N[N.COMMENT_METADATA=9]="COMMENT_METADATA",N[N.INVITED_USER=10]="INVITED_USER",N[N.DATE=11]="DATE",N[N.BACKDROP=12]="BACKDROP",N[N.CALLOUT=13]="CALLOUT",N[N.AI_ASSISTANT=14]="AI_ASSISTANT"}(Ae||(Ae={})),function(N){N.STATIC="list-static",N.EMBED="list-embed"}(Ye||(Ye={})),function(N){N.STATIC="unfurl-static",N.EMBED="unfurl-embed",N.BUTTON="unfurl-button"}(Ht||(Ht={})),function(N){N[N.PREVIOUS=0]="PREVIOUS",N[N.NEXT=1]="NEXT"}(Mt||(Mt={})),function(N){N.ROW="row",N.COLUMN="column"}(Qn||(Qn={})),function(N){N.INSERT_BEFORE="insert_before",N.INSERT_AFTER="insert_after",N.DELETE="delete"}($n||($n={})),function(N){N.CLEAR_CONTENTS="clear_contents",N.MERGE_CELLS="merge_cells",N.UNMERGE_CELLS="unmerge_cells"}(Vn||(Vn={})),function(N){N.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",N.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",N.DISTRIBUTE_COLUMNS="distribute_columns",N.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(kn||(kn={})),function(N){N.BACKGROUND_COLOR="background_color"}(tn||(tn={})),function(N){N.INSERT_CONTENT="insert_content",N.ACCEPT_DRAFT="accept_draft",N.CANCEL_DRAFT="cancel_draft",N.HANDLE_STREAM_INIT="handle_stream_init",N.HANDLE_STREAM_UPDATE="handle_stream_update",N.HANDLE_STREAM_COMPLETE="handle_stream_complete"}(Gn||(Gn={})),function(N){N.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",N.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",N.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",N.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(Si||(Si={})),function(N){N[N.DISMISS_POPOVER=0]="DISMISS_POPOVER",N[N.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",N[N.COPY_OBJECT=2]="COPY_OBJECT",N[N.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",N[N.REPLACE_FILE=4]="REPLACE_FILE",N[N.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",N[N.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",N[N.SYNC_METADATA=7]="SYNC_METADATA",N[N.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",N[N.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",N[N.ADD_COLUMN=10]="ADD_COLUMN",N[N.MOVE_LINE=11]="MOVE_LINE",N[N.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",N[N.CHECK_ALL=13]="CHECK_ALL",N[N.UNCHECK_ALL=14]="UNCHECK_ALL",N[N.REMOVE_CHECKED=15]="REMOVE_CHECKED",N[N.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",N[N.SORT_ALPHA=17]="SORT_ALPHA",N[N.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",N[N.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",N[N.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",N[N.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",N[N.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",N[N.UNFURL_URL=23]="UNFURL_URL",N[N.MODIFY_TABLE=24]="MODIFY_TABLE",N[N.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",N[N.OPEN_POPOVER=26]="OPEN_POPOVER",N[N.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",N[N.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",N[N.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE",N[N.MESSAGE_UNFURL_CONFIRMATION=30]="MESSAGE_UNFURL_CONFIRMATION",N[N.UNFURL_URLS=31]="UNFURL_URLS",N[N.ADD_INVITED_USER_CARDS=32]="ADD_INVITED_USER_CARDS",N[N.SYNC_CONTENT_WIDTH=33]="SYNC_CONTENT_WIDTH",N[N.SET_DATE_MS=34]="SET_DATE_MS",N[N.SWITCH_LIST_VIEW=35]="SWITCH_LIST_VIEW",N[N.CONVERT_TABLE_TO_LIST=36]="CONVERT_TABLE_TO_LIST",N[N.HANDLE_MODAL_STATE_CHANGE=37]="HANDLE_MODAL_STATE_CHANGE",N[N.MODIFY_CALLOUT=38]="MODIFY_CALLOUT",N[N.CONVERT_TO_CALLOUT=39]="CONVERT_TO_CALLOUT",N[N.AI_INSERTION_ACTION=40]="AI_INSERTION_ACTION",N[N.CREATE_OR_VIEW_REACTION=41]="CREATE_OR_VIEW_REACTION",N[N.CONVERT_FROM_CALLOUT=42]="CONVERT_FROM_CALLOUT",N[N.PERFORM_CALLOUT_CONVERSION=43]="PERFORM_CALLOUT_CONVERSION"}(nr||(nr={})),function(N){N.MERGE="merge",N.UNMERGE="unmerge",N.CLEAR_CONTENTS="clear_contents"}(ln||(ln={})),function(N){N[N.SLACK_MESSAGE=0]="SLACK_MESSAGE",N[N.SLACK_FILE=1]="SLACK_FILE",N[N.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",N[N.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",N[N.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",N[N.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",N[N.SLACK_USER=5]="SLACK_USER",N[N.SLACK_CHANNEL=6]="SLACK_CHANNEL",N[N.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",N[N.SLACK_WIDGET=9]="SLACK_WIDGET",N[N.SLACK_EMBED=10]="SLACK_EMBED",N[N.SLACK_LIST=11]="SLACK_LIST",N[N.SLACK_LIST_RECORD=12]="SLACK_LIST_RECORD",N[N.SLACK_SALESFORCE_RECORD=13]="SLACK_SALESFORCE_RECORD"}(jt||(jt={})),function(N){N[N.CARD=0]="CARD",N[N.INLINE=1]="INLINE",N[N.LINK=2]="LINK",N[N.WIDGET=3]="WIDGET"}(Fn||(Fn={})),function(N){N.IMAGE="image",N.HORIZONTAL_RULE="horizontal-rule",N.CHECKLIST="checklist",N.NUMBERED_LIST="numbered-list",N.BULLETED_LIST="bullet-list",N.TABLE="table",N.CODE="code",N.TEXT_H1_STYLE="large-heading",N.TEXT_H2_STYLE="medium-heading",N.TEXT_H3_STYLE="small-heading",N.TEXT_PLAIN_STYLE="plain",N.BLOCKQUOTE="blockquote",N.LAYOUT="layout",N.EMOJI="emoji",N.DATE_MENTION="date-mention",N.CALLOUT="callout"}(Hn||(Hn={})),function(N){N.PROFILE="profile",N.WORKFLOW="workflow",N.LINK="link",N.IMAGE="image",N.CANVAS="canvas",N.VIDEO="video",N.AUDIO="audio",N.FILE="file",N.LIST="list",N.SALESFORCE_RECORD="sfrecord"}(wi||(wi={})),function(N){N[N.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",N[N.IO=2]="IO",N[N.LISTENER=3]="LISTENER",N[N.ELEMENT=4]="ELEMENT"}(Pi||(Pi={})),function(N){N[N.NONE=0]="NONE",N[N.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",N[N.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",N[N.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",N[N.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",N[N.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",N[N.SESSION_EXPIRED=6]="SESSION_EXPIRED",N[N.THREAD_CLOSED=7]="THREAD_CLOSED",N[N.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",N[N.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES",N[N.DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY=10]="DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY"}(ni||(ni={})),function(N){N[N.WRITE=0]="WRITE",N[N.READ=1]="READ",N[N.NONE=2]="NONE"}(Kn||(Kn={})),function(N){N.DOWNLOAD="download",N.EDIT_FILE="edit-file",N.OPEN_IN_NEW_WINDOW="open-in-new-window",N.PREVIEW_FILE="preview-file",N.VIEW_FULL_SCREEN="view-full-screen",N.SHARE="share"}(ji||(ji={})),function(N){N[N.HOVERCARD=0]="HOVERCARD",N[N.CARD=1]="CARD",N[N.HEADER=2]="HEADER",N[N.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",N[N.SECTION_MENU=4]="SECTION_MENU",N[N.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",N[N.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",N[N.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",N[N.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",N[N.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",N[N.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",N[N.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",N[N.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",N[N.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",N[N.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER",N[N.DATE_PICKER=15]="DATE_PICKER",N[N.MODAL_STATE_OBSERVER=16]="MODAL_STATE_OBSERVER",N[N.AI_ASSISTANT_OVERLAY=17]="AI_ASSISTANT_OVERLAY",N[N.EMOJI_PICKER=18]="EMOJI_PICKER",N[N.AI_SECTION_MENU=19]="AI_SECTION_MENU"}($i||($i={})),function(N){N.NONE="none",N.THREAD_ROOT="thread_root",N.THREAD_COMPOSER="thread_composer"}(sr||(sr={})),function(N){N[N.COMMENT=1]="COMMENT",N[N.REACTION=2]="REACTION"}(Ai||(Ai={})),function(N){N.TEXT="text",N.USER="user",N.CHANNEL="channel",N.DATE="date"}(Lr||(Lr={})),function(N){N.INSERT="insert",N.EDIT="edit",N.REMOVE="remove",N.SHOW_CREATION_POPOVER="show_creation_popover",N.HIGHLIGHT="highlight"}(Vi||(Vi={})),function(N){N.INSERT="insert",N.INITIATE_DRAG="initiate_drag"}(Nr||(Nr={}));class Ci{constructor(he){this.gt=0,this.bt=-1,this.Bt=-1,this.Ft=-1,this.Gt=-1,this.Ht=void 0,this.Vt=void 0;const je=he.userAgent.toLowerCase(),Rt=he.platform;if(this.yt=je.indexOf("webkit")!=-1,this.Kt=this.yt,this.kt=je.indexOf("android")!=-1,this.$t=je.indexOf("chrome")!=-1,this.Yt=je.indexOf("edge/")!=-1,this.Wt=!1,this.$t&&(this.Wt=!0,this.Kt=!1,this.gt=parseInt(je.match(/chrome\/(\d+)\./)[1],10)),this.jt=!this.$t&&je.indexOf("safari")!=-1,this.Xt=je.indexOf("gecko")!=-1&&je.indexOf("like gecko")==-1,this.Jt=je.indexOf("opera")!=-1,this.yt){const Qt=/applewebkit\/([\d.]+)/.exec(je);Qt&&(this.bt=parseFloat(Qt[1]))}if(this.Xt){const Qt=/rv:([\d.]+)\)/.exec(je);Qt&&(this.Bt=parseFloat(Qt[1]))}if(this.Yt){this.$t=!1,this.Wt=!1,this.yt=!1,this.Kt=!1,this.bt=-1,this.gt=0;const Qt=/edge\/([\d.]+)/.exec(je);Qt&&(this.Ft=parseFloat(Qt[1]))}if(this.xt=Rt.indexOf("Win")==0,this.Zt=Rt.indexOf("Mac")==0,this.Qt=Rt.match(/^(iPad|iPhone|iPod)/)!==null,this.qt=Rt.match(/^(iPad)/)!==null,this.Qt){const Qt=/(OS|os) (\d+)(_\d+)*\s/.exec(je);Qt&&(this.Gt=parseInt(Qt[2]||"0",10))}}isWebKitLineage(){return this.yt}isWebKit(){return this.Kt}isBlink(){return this.Wt}webKitVersion(){return this.bt}isWindows(){return this.xt}isMac(){return this.Zt}isIOs(){return this.Qt}iosMajorVersion(){return this.Gt}isIPad(){return this.qt}isAndroid(){return this.kt}isChrome(){return this.$t}chromeVersion(){return this.gt}isSafari(){return this.jt}isGecko(){return this.Xt}geckoVersion(){return this.Bt}isOpera(){return this.Jt}isEdge(){return this.Yt}edgeVersion(){return this.Ft}isSmallScreen(){return this.Ht!==void 0?this.Ht=="small":this.Qt?!this.qt:!!this.kt&&Math.min(window.innerWidth,window.innerHeight)<630}isMediumScreen(){return this.Ht!==void 0&&this.Ht=="medium"}setScreenSizeOverride(he){this.Ht=he}isTablet(){return this.Vt!==void 0?!!this.Vt:!!this.Qt&&this.qt}setIsTabletOverride(he){this.Vt=he}isPhone(){return(this.isIOs()||this.isAndroid())&&!this.isTablet()}isMobile(){return this.isIOs()||this.isAndroid()}hasEmacsBindings(){return this.Qt||this.Zt}consoleSupportsCss(){return this.Wt||this.Kt&&this.bt>=537||this.Xt}useAppStoreTimeout(){return this.Qt&&this.bt<601}isSupportedBrowser(){return!!this.Wt||(this.yt?this.bt>=536:this.Xt?this.Bt>=21:!!this.Yt)}}r(Ci,"_e"),new Ci(navigator),function(N){N.GREEN="green",N.JADE="jade",N.BLUE="blue",N.INDIGO="indigo",N.PURPLE="purple",N.PINK="pink",N.ORANGE="orange",N.BROWN="brown",N.GRAY="gray"}(_i||(_i={})),It("Collab",En),It("dumpCollabDebugReport",function(){oi.forEach((N,he)=>{he.getInitLog().then(je=>{console.log(`Collab instance ${he.id} debug report:`,he.getBridgeDebugReport(!1),je)})})}),window.JS_CLIENT_HASH="ZDQV_5LSlZH1I8nj5SKXzg",window.QUIP_VERSION_NAME="quipbuild_2025_07_16T14_38_c519be7"},1483755157:(B,l,d)=>{var u;(function(h,p,m){if(!h)return;for(var a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},e={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},t,n=1;n<20;++n)a[111+n]="f"+n;for(n=0;n<=9;++n)a[n+96]=n.toString();function o(R,L,H){if(R.addEventListener){R.addEventListener(L,H,!1);return}R.attachEvent("on"+L,H)}r(o,"_addEvent");function f(R,L,H){R.removeEventListener&&R.removeEventListener(L,H,!1)}r(f,"_removeEvent");function g(R){if(R.type=="keypress"){var L=String.fromCharCode(R.which);return R.shiftKey||(L=L.toLowerCase()),L}return a[R.which]?a[R.which]:s[R.which]?s[R.which]:String.fromCharCode(R.which).toLowerCase()}r(g,"_characterFromEvent");function S(R,L){return R.sort().join(",")===L.sort().join(",")}r(S,"_modifiersMatch");function c(R){var L=[];return R.shiftKey&&L.push("shift"),R.altKey&&L.push("alt"),R.ctrlKey&&L.push("ctrl"),R.metaKey&&L.push("meta"),L}r(c,"_eventModifiers");function v(R){if(R.preventDefault){R.preventDefault();return}R.returnValue=!1}r(v,"_preventDefault");function _(R){if(R.stopPropagation){R.stopPropagation();return}R.cancelBubble=!0}r(_,"_stopPropagation");function E(R){return R=="shift"||R=="ctrl"||R=="alt"||R=="meta"}r(E,"_isModifier");function b(){if(!t){t={};for(var R in a)R>95&&R<112||a.hasOwnProperty(R)&&(t[a[R]]=R)}return t}r(b,"_getReverseMap");function T(R,L,H){return H||(H=b()[R]?"keydown":"keypress"),H=="keypress"&&L.length&&(H="keydown"),H}r(T,"_pickBestAction");function I(R){return R==="+"?["+"]:(R=R.replace(/\+{2}/g,"+plus"),R.split("+"))}r(I,"_keysFromString");function O(R,L){var H,K,ee,q=[];for(H=I(R),ee=0;ee<H.length;++ee)K=H[ee],e[K]&&(K=e[K]),L&&L!="keypress"&&i[K]&&(K=i[K],q.push("shift")),E(K)&&q.push(K);return L=T(K,q,L),{key:K,modifiers:q,action:L}}r(O,"_getKeyInfo");function w(R,L){return R===null||R===p?!1:R===L?!0:w(R.parentNode,L)}r(w,"_belongsTo");function D(R){var L=this;if(R=R||p,!(L instanceof D))return new D(R);L.target=R,L._callbacks={},L._directMap={};var H={},K,ee=!1,q=!1,ae=!1;function ce(Ze){Ze=Ze||{};var Je=!1,dt;for(dt in H){if(Ze[dt]){Je=!0;continue}H[dt]=0}Je||(ae=!1)}r(ce,"_resetSequences");function Te(Ze,Je,dt,Ot,Nt,Ve){var He,ct,yt=[],it=dt.type;if(!L._callbacks[Ze])return[];for(it=="keyup"&&E(Ze)&&(Je=[Ze]),He=0;He<L._callbacks[Ze].length;++He)if(ct=L._callbacks[Ze][He],!(!Ot&&ct.seq&&H[ct.seq]!=ct.level)&&it==ct.action&&(it=="keypress"&&!dt.metaKey&&!dt.ctrlKey||S(Je,ct.modifiers))){var nn=!Ot&&ct.combo==Nt,Xt=Ot&&ct.seq==Ot&&ct.level==Ve;(nn||Xt)&&L._callbacks[Ze].splice(He,1),yt.push(ct)}return yt}r(Te,"_getMatches");function ke(Ze,Je,dt,Ot){L.stopCallback(Je,Je.target||Je.srcElement,dt,Ot)||Ze(Je,dt)===!1&&(v(Je),_(Je))}r(ke,"_fireCallback"),L._handleKey=function(Ze,Je,dt){var Ot=Te(Ze,Je,dt),Nt,Ve={},He=0,ct=!1;for(Nt=0;Nt<Ot.length;++Nt)Ot[Nt].seq&&(He=Math.max(He,Ot[Nt].level));for(Nt=0;Nt<Ot.length;++Nt){if(Ot[Nt].seq){if(Ot[Nt].level!=He)continue;ct=!0,Ve[Ot[Nt].seq]=1,ke(Ot[Nt].callback,dt,Ot[Nt].combo,Ot[Nt].seq);continue}ct||ke(Ot[Nt].callback,dt,Ot[Nt].combo)}var yt=dt.type=="keypress"&&q;dt.type==ae&&!E(Ze)&&!yt&&ce(Ve),q=ct&&dt.type=="keydown"};function tt(Ze){typeof Ze.which!="number"&&(Ze.which=Ze.keyCode);var Je=g(Ze);if(Je){if(Ze.type=="keyup"&&ee===Je){ee=!1;return}L.handleKey(Je,c(Ze),Ze)}}r(tt,"_handleKeyEvent");function At(){clearTimeout(K),K=setTimeout(ce,1e3)}r(At,"_resetSequenceTimer");function Be(Ze,Je,dt,Ot){H[Ze]=0;function Nt(it){return function(){ae=it,++H[Ze],At()}}r(Nt,"_increaseSequence");function Ve(it){ke(dt,it,Ze),Ot!=="keyup"&&(ee=g(it)),setTimeout(ce,10)}r(Ve,"_callbackAndReset");for(var He=0;He<Je.length;++He){var ct=He+1===Je.length,yt=ct?Ve:Nt(Ot||O(Je[He+1]).action);$e(Je[He],yt,Ot,Ze,He)}}r(Be,"_bindSequence");function $e(Ze,Je,dt,Ot,Nt){L._directMap[Ze+":"+dt]=Je,Ze=Ze.replace(/\s+/g," ");var Ve=Ze.split(" "),He;if(Ve.length>1){Be(Ze,Ve,Je,dt);return}He=O(Ze,dt),L._callbacks[He.key]=L._callbacks[He.key]||[],Te(He.key,He.modifiers,{type:He.action},Ot,Ze,Nt),L._callbacks[He.key][Ot?"unshift":"push"]({callback:Je,modifiers:He.modifiers,action:He.action,seq:Ot,level:Nt,combo:Ze})}r($e,"_bindSingle"),L._bindMultiple=function(Ze,Je,dt){for(var Ot=0;Ot<Ze.length;++Ot)$e(Ze[Ot],Je,dt)},L.destroy=function(){f(R,"keypress",tt),f(R,"keydown",tt),f(R,"keyup",tt),L.reset()},o(R,"keypress",tt),o(R,"keydown",tt),o(R,"keyup",tt)}r(D,"Mousetrap"),D.prototype.bind=function(R,L,H){var K=this;return R=R instanceof Array?R:[R],K._bindMultiple.call(K,R,L,H),K},D.prototype.unbind=function(R,L){var H=this;return H.bind.call(H,R,function(){},L)},D.prototype.trigger=function(R,L){var H=this;return H._directMap[R+":"+L]&&H._directMap[R+":"+L]({},R),H},D.prototype.reset=function(){var R=this;return R._callbacks={},R._directMap={},R},D.prototype.stopCallback=function(R,L){var H=this;return(" "+L.className+" ").indexOf(" mousetrap ")>-1||w(L,H.target)?!1:L.tagName=="INPUT"||L.tagName=="SELECT"||L.tagName=="TEXTAREA"||L.isContentEditable},D.prototype.handleKey=function(){var R=this;return R._handleKey.apply(R,arguments)},D.addKeycodes=function(R){for(var L in R)R.hasOwnProperty(L)&&(a[L]=R[L]);t=null},D.init=function(){var R=D(p);for(var L in R)L.charAt(0)!=="_"&&(D[L]=function(H){return function(){return R[H].apply(R,arguments)}}(L))},D.init(),h.Mousetrap=D,B.exports&&(B.exports=D),u=function(){return D}.call(l,d,l,B),u!==m&&(B.exports=u)})(typeof window<"u"?window:null,typeof window<"u"?document:null)},1874409785:function(B){(function(l,d){B.exports=d()})(this,function(){return function(l){var d={};function u(h){if(d[h])return d[h].exports;var p=d[h]={i:h,l:!1,exports:{}};return l[h].call(p.exports,p,p.exports,u),p.l=!0,p.exports}return r(u,"r"),u.m=l,u.c=d,u.d=function(h,p,m){u.o(h,p)||Object.defineProperty(h,p,{enumerable:!0,get:m})},u.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},u.t=function(h,p){if(1&p&&(h=u(h)),8&p||4&p&&typeof h=="object"&&h&&h.__esModule)return h;var m=Object.create(null);if(u.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:h}),2&p&&typeof h!="string")for(var a in h)u.d(m,a,function(s){return h[s]}.bind(null,a));return m},u.n=function(h){var p=h&&h.__esModule?function(){return h.default}:function(){return h};return u.d(p,"a",p),p},u.o=function(h,p){return Object.prototype.hasOwnProperty.call(h,p)},u.p="",u(u.s=90)}({17:function(l,d,u){"use strict";d.__esModule=!0,d.default=void 0;var h=u(18),p=function(){function m(){}return r(m,"e"),m.getFirstMatch=function(a,s){var i=s.match(a);return i&&i.length>0&&i[1]||""},m.getSecondMatch=function(a,s){var i=s.match(a);return i&&i.length>1&&i[2]||""},m.matchAndReturnConst=function(a,s,i){if(a.test(s))return i},m.getWindowsVersionName=function(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},m.getMacOSVersionName=function(a){var s=a.split(".").splice(0,2).map(function(i){return parseInt(i,10)||0});if(s.push(0),s[0]===10)switch(s[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},m.getAndroidVersionName=function(a){var s=a.split(".").splice(0,2).map(function(i){return parseInt(i,10)||0});if(s.push(0),!(s[0]===1&&s[1]<5))return s[0]===1&&s[1]<6?"Cupcake":s[0]===1&&s[1]>=6?"Donut":s[0]===2&&s[1]<2?"Eclair":s[0]===2&&s[1]===2?"Froyo":s[0]===2&&s[1]>2?"Gingerbread":s[0]===3?"Honeycomb":s[0]===4&&s[1]<1?"Ice Cream Sandwich":s[0]===4&&s[1]<4?"Jelly Bean":s[0]===4&&s[1]>=4?"KitKat":s[0]===5?"Lollipop":s[0]===6?"Marshmallow":s[0]===7?"Nougat":s[0]===8?"Oreo":s[0]===9?"Pie":void 0},m.getVersionPrecision=function(a){return a.split(".").length},m.compareVersions=function(a,s,i){i===void 0&&(i=!1);var e=m.getVersionPrecision(a),t=m.getVersionPrecision(s),n=Math.max(e,t),o=0,f=m.map([a,s],function(g){var S=n-m.getVersionPrecision(g),c=g+new Array(S+1).join(".0");return m.map(c.split("."),function(v){return new Array(20-v.length).join("0")+v}).reverse()});for(i&&(o=n-Math.min(e,t)),n-=1;n>=o;){if(f[0][n]>f[1][n])return 1;if(f[0][n]===f[1][n]){if(n===o)return 0;n-=1}else if(f[0][n]<f[1][n])return-1}},m.map=function(a,s){var i,e=[];if(Array.prototype.map)return Array.prototype.map.call(a,s);for(i=0;i<a.length;i+=1)e.push(s(a[i]));return e},m.find=function(a,s){var i,e;if(Array.prototype.find)return Array.prototype.find.call(a,s);for(i=0,e=a.length;i<e;i+=1){var t=a[i];if(s(t,i))return t}},m.assign=function(a){for(var s,i,e=a,t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[a].concat(n));var f=r(function(){var g=n[s];typeof g=="object"&&g!==null&&Object.keys(g).forEach(function(S){e[S]=g[S]})},"o");for(s=0,i=n.length;s<i;s+=1)f();return a},m.getBrowserAlias=function(a){return h.BROWSER_ALIASES_MAP[a]},m.getBrowserTypeByAlias=function(a){return h.BROWSER_MAP[a]||""},m}();d.default=p,l.exports=d.default},18:function(l,d,u){"use strict";d.__esModule=!0,d.ENGINE_MAP=d.OS_MAP=d.PLATFORMS_MAP=d.BROWSER_MAP=d.BROWSER_ALIASES_MAP=void 0,d.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},d.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},d.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},d.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},d.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(l,d,u){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=u(91))&&h.__esModule?h:{default:h},m=u(18);function a(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}r(a,"a");var s=function(){function i(){}r(i,"e");var e,t,n;return i.getParser=function(o,f){if(f===void 0&&(f=!1),typeof o!="string")throw new Error("UserAgent should be a string");return new p.default(o,f)},i.parse=function(o){return new p.default(o).getResult()},e=i,n=[{key:"BROWSER_MAP",get:function(){return m.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return m.ENGINE_MAP}},{key:"OS_MAP",get:function(){return m.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return m.PLATFORMS_MAP}}],(t=null)&&a(e.prototype,t),n&&a(e,n),i}();d.default=s,l.exports=d.default},91:function(l,d,u){"use strict";d.__esModule=!0,d.default=void 0;var h=i(u(92)),p=i(u(93)),m=i(u(94)),a=i(u(95)),s=i(u(17));function i(t){return t&&t.__esModule?t:{default:t}}r(i,"u");var e=function(){function t(o,f){if(f===void 0&&(f=!1),o==null||o==="")throw new Error("UserAgent parameter can't be empty");this._ua=o,this.parsedResult={},f!==!0&&this.parse()}r(t,"e");var n=t.prototype;return n.getUA=function(){return this._ua},n.test=function(o){return o.test(this._ua)},n.parseBrowser=function(){var o=this;this.parsedResult.browser={};var f=s.default.find(h.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},n.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},n.getBrowserName=function(o){return o?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},n.getBrowserVersion=function(){return this.getBrowser().version},n.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},n.parseOS=function(){var o=this;this.parsedResult.os={};var f=s.default.find(p.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},n.getOSName=function(o){var f=this.getOS().name;return o?String(f).toLowerCase()||"":f||""},n.getOSVersion=function(){return this.getOS().version},n.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},n.getPlatformType=function(o){o===void 0&&(o=!1);var f=this.getPlatform().type;return o?String(f).toLowerCase()||"":f||""},n.parsePlatform=function(){var o=this;this.parsedResult.platform={};var f=s.default.find(m.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},n.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},n.getEngineName=function(o){return o?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},n.parseEngine=function(){var o=this;this.parsedResult.engine={};var f=s.default.find(a.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},n.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},n.getResult=function(){return s.default.assign({},this.parsedResult)},n.satisfies=function(o){var f=this,g={},S=0,c={},v=0;if(Object.keys(o).forEach(function(D){var R=o[D];typeof R=="string"?(c[D]=R,v+=1):typeof R=="object"&&(g[D]=R,S+=1)}),S>0){var _=Object.keys(g),E=s.default.find(_,function(D){return f.isOS(D)});if(E){var b=this.satisfies(g[E]);if(b!==void 0)return b}var T=s.default.find(_,function(D){return f.isPlatform(D)});if(T){var I=this.satisfies(g[T]);if(I!==void 0)return I}}if(v>0){var O=Object.keys(c),w=s.default.find(O,function(D){return f.isBrowser(D,!0)});if(w!==void 0)return this.compareVersion(c[w])}},n.isBrowser=function(o,f){f===void 0&&(f=!1);var g=this.getBrowserName().toLowerCase(),S=o.toLowerCase(),c=s.default.getBrowserTypeByAlias(S);return f&&c&&(S=c.toLowerCase()),S===g},n.compareVersion=function(o){var f=[0],g=o,S=!1,c=this.getBrowserVersion();if(typeof c=="string")return o[0]===">"||o[0]==="<"?(g=o.substr(1),o[1]==="="?(S=!0,g=o.substr(2)):f=[],o[0]===">"?f.push(1):f.push(-1)):o[0]==="="?g=o.substr(1):o[0]==="~"&&(S=!0,g=o.substr(1)),f.indexOf(s.default.compareVersions(c,g,S))>-1},n.isOS=function(o){return this.getOSName(!0)===String(o).toLowerCase()},n.isPlatform=function(o){return this.getPlatformType(!0)===String(o).toLowerCase()},n.isEngine=function(o){return this.getEngineName(!0)===String(o).toLowerCase()},n.is=function(o,f){return f===void 0&&(f=!1),this.isBrowser(o,f)||this.isOS(o)||this.isPlatform(o)},n.some=function(o){var f=this;return o===void 0&&(o=[]),o.some(function(g){return f.is(g)})},t}();d.default=e,l.exports=d.default},92:function(l,d,u){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=u(17))&&h.__esModule?h:{default:h},m=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(s){var i={name:"Googlebot"},e=p.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/opera/i],describe:function(s){var i={name:"Opera"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/opr\/|opios/i],describe:function(s){var i={name:"Opera"},e=p.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/SamsungBrowser/i],describe:function(s){var i={name:"Samsung Internet for Android"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/Whale/i],describe:function(s){var i={name:"NAVER Whale Browser"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/MZBrowser/i],describe:function(s){var i={name:"MZ Browser"},e=p.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/focus/i],describe:function(s){var i={name:"Focus"},e=p.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/swing/i],describe:function(s){var i={name:"Swing"},e=p.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/coast/i],describe:function(s){var i={name:"Opera Coast"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(s){var i={name:"Opera Touch"},e=p.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/yabrowser/i],describe:function(s){var i={name:"Yandex Browser"},e=p.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/ucbrowser/i],describe:function(s){var i={name:"UC Browser"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/Maxthon|mxios/i],describe:function(s){var i={name:"Maxthon"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/epiphany/i],describe:function(s){var i={name:"Epiphany"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/puffin/i],describe:function(s){var i={name:"Puffin"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/sleipnir/i],describe:function(s){var i={name:"Sleipnir"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/k-meleon/i],describe:function(s){var i={name:"K-Meleon"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/micromessenger/i],describe:function(s){var i={name:"WeChat"},e=p.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/qqbrowser/i],describe:function(s){var i={name:/qqbrowserlite/i.test(s)?"QQ Browser Lite":"QQ Browser"},e=p.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/msie|trident/i],describe:function(s){var i={name:"Internet Explorer"},e=p.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/\sedg\//i],describe:function(s){var i={name:"Microsoft Edge"},e=p.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/edg([ea]|ios)/i],describe:function(s){var i={name:"Microsoft Edge"},e=p.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/vivaldi/i],describe:function(s){var i={name:"Vivaldi"},e=p.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/seamonkey/i],describe:function(s){var i={name:"SeaMonkey"},e=p.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/sailfish/i],describe:function(s){var i={name:"Sailfish"},e=p.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,s);return e&&(i.version=e),i}},{test:[/silk/i],describe:function(s){var i={name:"Amazon Silk"},e=p.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/phantom/i],describe:function(s){var i={name:"PhantomJS"},e=p.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/slimerjs/i],describe:function(s){var i={name:"SlimerJS"},e=p.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(s){var i={name:"BlackBerry"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/(web|hpw)[o0]s/i],describe:function(s){var i={name:"WebOS Browser"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/bada/i],describe:function(s){var i={name:"Bada"},e=p.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/tizen/i],describe:function(s){var i={name:"Tizen"},e=p.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/qupzilla/i],describe:function(s){var i={name:"QupZilla"},e=p.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/firefox|iceweasel|fxios/i],describe:function(s){var i={name:"Firefox"},e=p.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/electron/i],describe:function(s){var i={name:"Electron"},e=p.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/MiuiBrowser/i],describe:function(s){var i={name:"Miui"},e=p.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/chromium/i],describe:function(s){var i={name:"Chromium"},e=p.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/chrome|crios|crmo/i],describe:function(s){var i={name:"Chrome"},e=p.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/GSA/i],describe:function(s){var i={name:"Google Search"},e=p.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:function(s){var i=!s.test(/like android/i),e=s.test(/android/i);return i&&e},describe:function(s){var i={name:"Android Browser"},e=p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/playstation 4/i],describe:function(s){var i={name:"PlayStation 4"},e=p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/safari|applewebkit/i],describe:function(s){var i={name:"Safari"},e=p.default.getFirstMatch(m,s);return e&&(i.version=e),i}},{test:[/.*/i],describe:function(s){var i=s.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:p.default.getFirstMatch(i,s),version:p.default.getSecondMatch(i,s)}}}];d.default=a,l.exports=d.default},93:function(l,d,u){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=u(17))&&h.__esModule?h:{default:h},m=u(18),a=[{test:[/Roku\/DVP/],describe:function(s){var i=p.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,s);return{name:m.OS_MAP.Roku,version:i}}},{test:[/windows phone/i],describe:function(s){var i=p.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.WindowsPhone,version:i}}},{test:[/windows /i],describe:function(s){var i=p.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,s),e=p.default.getWindowsVersionName(i);return{name:m.OS_MAP.Windows,version:i,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(s){var i={name:m.OS_MAP.iOS},e=p.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,s);return e&&(i.version=e),i}},{test:[/macintosh/i],describe:function(s){var i=p.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,s).replace(/[_\s]/g,"."),e=p.default.getMacOSVersionName(i),t={name:m.OS_MAP.MacOS,version:i};return e&&(t.versionName=e),t}},{test:[/(ipod|iphone|ipad)/i],describe:function(s){var i=p.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,s).replace(/[_\s]/g,".");return{name:m.OS_MAP.iOS,version:i}}},{test:function(s){var i=!s.test(/like android/i),e=s.test(/android/i);return i&&e},describe:function(s){var i=p.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,s),e=p.default.getAndroidVersionName(i),t={name:m.OS_MAP.Android,version:i};return e&&(t.versionName=e),t}},{test:[/(web|hpw)[o0]s/i],describe:function(s){var i=p.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,s),e={name:m.OS_MAP.WebOS};return i&&i.length&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(s){var i=p.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,s)||p.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,s)||p.default.getFirstMatch(/\bbb(\d+)/i,s);return{name:m.OS_MAP.BlackBerry,version:i}}},{test:[/bada/i],describe:function(s){var i=p.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.Bada,version:i}}},{test:[/tizen/i],describe:function(s){var i=p.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.Tizen,version:i}}},{test:[/linux/i],describe:function(){return{name:m.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:m.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(s){var i=p.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.PlayStation4,version:i}}}];d.default=a,l.exports=d.default},94:function(l,d,u){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=u(17))&&h.__esModule?h:{default:h},m=u(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(s){var i=p.default.getFirstMatch(/(can-l01)/i,s)&&"Nova",e={type:m.PLATFORMS_MAP.mobile,vendor:"Huawei"};return i&&(e.model=i),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet}}},{test:function(s){var i=s.test(/ipod|iphone/i),e=s.test(/like (ipod|iphone)/i);return i&&!e},describe:function(s){var i=p.default.getFirstMatch(/(ipod|iphone)/i,s);return{type:m.PLATFORMS_MAP.mobile,vendor:"Apple",model:i}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:m.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:m.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getBrowserName(!0)==="blackberry"},describe:function(){return{type:m.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(s){return s.getBrowserName(!0)==="bada"},describe:function(){return{type:m.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getBrowserName()==="windows phone"},describe:function(){return{type:m.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(s){var i=Number(String(s.getOSVersion()).split(".")[0]);return s.getOSName(!0)==="android"&&i>=3},describe:function(){return{type:m.PLATFORMS_MAP.tablet}}},{test:function(s){return s.getOSName(!0)==="android"},describe:function(){return{type:m.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getOSName(!0)==="macos"},describe:function(){return{type:m.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(s){return s.getOSName(!0)==="windows"},describe:function(){return{type:m.PLATFORMS_MAP.desktop}}},{test:function(s){return s.getOSName(!0)==="linux"},describe:function(){return{type:m.PLATFORMS_MAP.desktop}}},{test:function(s){return s.getOSName(!0)==="playstation 4"},describe:function(){return{type:m.PLATFORMS_MAP.tv}}},{test:function(s){return s.getOSName(!0)==="roku"},describe:function(){return{type:m.PLATFORMS_MAP.tv}}}];d.default=a,l.exports=d.default},95:function(l,d,u){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=u(17))&&h.__esModule?h:{default:h},m=u(18),a=[{test:function(s){return s.getBrowserName(!0)==="microsoft edge"},describe:function(s){if(/\sedg\//i.test(s))return{name:m.ENGINE_MAP.Blink};var i=p.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,s);return{name:m.ENGINE_MAP.EdgeHTML,version:i}}},{test:[/trident/i],describe:function(s){var i={name:m.ENGINE_MAP.Trident},e=p.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:function(s){return s.test(/presto/i)},describe:function(s){var i={name:m.ENGINE_MAP.Presto},e=p.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:function(s){var i=s.test(/gecko/i),e=s.test(/like gecko/i);return i&&!e},describe:function(s){var i={name:m.ENGINE_MAP.Gecko},e=p.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:m.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(s){var i={name:m.ENGINE_MAP.WebKit},e=p.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,s);return e&&(i.version=e),i}}];d.default=a,l.exports=d.default}})})},585669709:(B,l,d)=>{"use strict";d.r(l),d.d(l,{BotInfo:()=>a,BrowserInfo:()=>h,NodeInfo:()=>p,ReactNativeInfo:()=>s,SearchBotDeviceInfo:()=>m,browserName:()=>S,detect:()=>f,detectOS:()=>v,getNodeVersion:()=>_,parseUserAgent:()=>c});var u=function(b,T,I){if(I||arguments.length===2)for(var O=0,w=T.length,D;O<w;O++)(D||!(O in T))&&(D||(D=Array.prototype.slice.call(T,0,O)),D[O]=T[O]);return b.concat(D||Array.prototype.slice.call(T))},h=function(){function b(T,I,O){this.name=T,this.version=I,this.os=O,this.type="browser"}return r(b,"BrowserInfo"),b}(),p=function(){function b(T){this.version=T,this.type="node",this.name="node",this.os=(void 0).platform}return r(b,"NodeInfo"),b}(),m=function(){function b(T,I,O,w){this.name=T,this.version=I,this.os=O,this.bot=w,this.type="bot-device"}return r(b,"SearchBotDeviceInfo"),b}(),a=function(){function b(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r(b,"BotInfo"),b}(),s=function(){function b(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r(b,"ReactNativeInfo"),b}(),i=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t=3,n=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",i]],o=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(b){return b?c(b):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new s:typeof navigator<"u"?c(navigator.userAgent):_()}r(f,"detect");function g(b){return b!==""&&n.reduce(function(T,I){var O=I[0],w=I[1];if(T)return T;var D=w.exec(b);return!!D&&[O,D]},!1)}r(g,"matchUserAgent");function S(b){var T=g(b);return T?T[0]:null}r(S,"browserName");function c(b){var T=g(b);if(!T)return null;var I=T[0],O=T[1];if(I==="searchbot")return new a;var w=O[1]&&O[1].split(".").join("_").split("_").slice(0,3);w?w.length<t&&(w=u(u([],w,!0),E(t-w.length),!0)):w=[];var D=w.join("."),R=v(b),L=e.exec(b);return L&&L[1]?new m(I,D,R,L[1]):new h(I,D,R)}r(c,"parseUserAgent");function v(b){for(var T=0,I=o.length;T<I;T++){var O=o[T],w=O[0],D=O[1],R=D.exec(b);if(R)return w}return null}r(v,"detectOS");function _(){var b=!1;return b?new p((void 0).version.slice(1)):null}r(_,"getNodeVersion");function E(b){for(var T=[],I=0;I<b;I++)T.push("0");return T}r(E,"createVersionParts")},434544446:B=>{"use strict";B.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},3564666345:(B,l,d)=>{"use strict";d.d(l,{D0:()=>st,ED:()=>Tt,l1:()=>Jn,Mt:()=>nt,Wx:()=>Wi,j7:()=>Ze});var u=r(function(ue){return h(ue)&&!p(ue)},"isMergeableObject");function h(se){return!!se&&typeof se=="object"}r(h,"isNonNullObject");function p(se){var ue=Object.prototype.toString.call(se);return ue==="[object RegExp]"||ue==="[object Date]"||s(se)}r(p,"isSpecial");var m=typeof Symbol=="function"&&Symbol.for,a=m?Symbol.for("react.element"):60103;function s(se){return se.$$typeof===a}r(s,"isReactElement");function i(se){return Array.isArray(se)?[]:{}}r(i,"emptyTarget");function e(se,ue){return ue.clone!==!1&&ue.isMergeableObject(se)?o(i(se),se,ue):se}r(e,"cloneUnlessOtherwiseSpecified");function t(se,ue,X){return se.concat(ue).map(function(lt){return e(lt,X)})}r(t,"defaultArrayMerge");function n(se,ue,X){var lt={};return X.isMergeableObject(se)&&Object.keys(se).forEach(function(Ae){lt[Ae]=e(se[Ae],X)}),Object.keys(ue).forEach(function(Ae){!X.isMergeableObject(ue[Ae])||!se[Ae]?lt[Ae]=e(ue[Ae],X):lt[Ae]=o(se[Ae],ue[Ae],X)}),lt}r(n,"mergeObject");function o(se,ue,X){X=X||{},X.arrayMerge=X.arrayMerge||t,X.isMergeableObject=X.isMergeableObject||u;var lt=Array.isArray(ue),Ae=Array.isArray(se),Ye=lt===Ae;return Ye?lt?X.arrayMerge(se,ue,X):n(se,ue,X):e(ue,X)}r(o,"deepmerge"),o.all=r(function(ue,X){if(!Array.isArray(ue))throw new Error("first argument should be an array");return ue.reduce(function(lt,Ae){return o(lt,Ae,X)},{})},"deepmergeAll");var f=o;const g=f;var S=d(9217268294),c=d(3134334389),v=d(2228537078),_=d.n(v),E=d(5828775116),b=d(2394306156),T=d(3584844445),I=d(4885105346),O=d(9746734072),w=d(1717613543),D=d(2925863672),R=d(3055495996),L=d(6253409059);function H(se){return(0,O.A)(se)?(0,T.A)(se,R.A):(0,w.A)(se)?[se]:(0,I.A)((0,D.A)((0,L.A)(se)))}r(H,"toPath");const K=H;var ee=d(7066919455),q=d.n(ee),ae=d(498506970);function ce(){return ce=Object.assign||function(se){for(var ue=1;ue<arguments.length;ue++){var X=arguments[ue];for(var lt in X)Object.prototype.hasOwnProperty.call(X,lt)&&(se[lt]=X[lt])}return se},ce.apply(this,arguments)}r(ce,"_extends");function Te(se,ue){se.prototype=Object.create(ue.prototype),se.prototype.constructor=se,se.__proto__=ue}r(Te,"_inheritsLoose");function ke(se,ue){if(se==null)return{};var X={},lt=Object.keys(se),Ae,Ye;for(Ye=0;Ye<lt.length;Ye++)Ae=lt[Ye],!(ue.indexOf(Ae)>=0)&&(X[Ae]=se[Ae]);return X}r(ke,"_objectWithoutPropertiesLoose");function tt(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}r(tt,"_assertThisInitialized");var At=(0,c.createContext)(void 0);At.displayName="FormikContext";var Be=At.Provider,$e=At.Consumer;function Ze(){var se=(0,c.useContext)(At);return se||(0,E.A)(!1),se}r(Ze,"useFormikContext");var Je=r(function(ue){return Array.isArray(ue)&&ue.length===0},"isEmptyArray"),dt=r(function(ue){return typeof ue=="function"},"isFunction"),Ot=r(function(ue){return ue!==null&&typeof ue=="object"},"isObject"),Nt=r(function(ue){return String(Math.floor(Number(ue)))===ue},"isInteger"),Ve=r(function(ue){return Object.prototype.toString.call(ue)==="[object String]"},"isString"),He=r(function(ue){return ue!==ue},"isNaN"),ct=r(function(ue){return c.Children.count(ue)===0},"isEmptyChildren"),yt=r(function(ue){return Ot(ue)&&dt(ue.then)},"isPromise"),it=r(function(ue){return ue&&Ot(ue)&&Ot(ue.target)},"isInputEvent");function nn(se){if(se=se||(typeof document<"u"?document:void 0),typeof se>"u")return null;try{return se.activeElement||se.body}catch{return se.body}}r(nn,"getActiveElement");function Xt(se,ue,X,lt){lt===void 0&&(lt=0);for(var Ae=K(ue);se&&lt<Ae.length;)se=se[Ae[lt++]];return lt!==Ae.length&&!se||se===void 0?X:se}r(Xt,"getIn");function dn(se,ue,X){for(var lt=(0,b.A)(se),Ae=lt,Ye=0,Ht=K(ue);Ye<Ht.length-1;Ye++){var Mt=Ht[Ye],Qn=Xt(se,Ht.slice(0,Ye+1));if(Qn&&(Ot(Qn)||Array.isArray(Qn)))Ae=Ae[Mt]=(0,b.A)(Qn);else{var $n=Ht[Ye+1];Ae=Ae[Mt]=Nt($n)&&Number($n)>=0?[]:{}}}return(Ye===0?se:Ae)[Ht[Ye]]===X?se:(X===void 0?delete Ae[Ht[Ye]]:Ae[Ht[Ye]]=X,Ye===0&&X===void 0&&delete lt[Ht[Ye]],lt)}r(dn,"setIn");function bn(se,ue,X,lt){X===void 0&&(X=new WeakMap),lt===void 0&&(lt={});for(var Ae=0,Ye=Object.keys(se);Ae<Ye.length;Ae++){var Ht=Ye[Ae],Mt=se[Ht];Ot(Mt)?X.get(Mt)||(X.set(Mt,!0),lt[Ht]=Array.isArray(Mt)?[]:{},bn(Mt,ue,X,lt[Ht])):lt[Ht]=ue}return lt}r(bn,"setNestedObjectValues");function Rn(se,ue){switch(ue.type){case"SET_VALUES":return ce({},se,{values:ue.payload});case"SET_TOUCHED":return ce({},se,{touched:ue.payload});case"SET_ERRORS":return _()(se.errors,ue.payload)?se:ce({},se,{errors:ue.payload});case"SET_STATUS":return ce({},se,{status:ue.payload});case"SET_ISSUBMITTING":return ce({},se,{isSubmitting:ue.payload});case"SET_ISVALIDATING":return ce({},se,{isValidating:ue.payload});case"SET_FIELD_VALUE":return ce({},se,{values:dn(se.values,ue.payload.field,ue.payload.value)});case"SET_FIELD_TOUCHED":return ce({},se,{touched:dn(se.touched,ue.payload.field,ue.payload.value)});case"SET_FIELD_ERROR":return ce({},se,{errors:dn(se.errors,ue.payload.field,ue.payload.value)});case"RESET_FORM":return ce({},se,ue.payload);case"SET_FORMIK_STATE":return ue.payload(se);case"SUBMIT_ATTEMPT":return ce({},se,{touched:bn(se.values,!0),isSubmitting:!0,submitCount:se.submitCount+1});case"SUBMIT_FAILURE":return ce({},se,{isSubmitting:!1});case"SUBMIT_SUCCESS":return ce({},se,{isSubmitting:!1});default:return se}}r(Rn,"formikReducer");var Zt={},Mn={};function Wi(se){var ue=se.validateOnChange,X=ue===void 0?!0:ue,lt=se.validateOnBlur,Ae=lt===void 0?!0:lt,Ye=se.validateOnMount,Ht=Ye===void 0?!1:Ye,Mt=se.isInitialValid,Qn=se.enableReinitialize,$n=Qn===void 0?!1:Qn,Vn=se.onSubmit,kn=ke(se,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),tn=ce({validateOnChange:X,validateOnBlur:Ae,validateOnMount:Ht,onSubmit:Vn},kn),Gn=(0,c.useRef)(tn.initialValues),Si=(0,c.useRef)(tn.initialErrors||Zt),nr=(0,c.useRef)(tn.initialTouched||Mn),ln=(0,c.useRef)(tn.initialStatus),jt=(0,c.useRef)(!1),Fn=(0,c.useRef)({});(0,c.useEffect)(function(){return jt.current=!0,function(){jt.current=!1}},[]);var Hn=(0,c.useState)(0),wi=Hn[1],Pi=(0,c.useRef)({values:tn.initialValues,errors:tn.initialErrors||Zt,touched:tn.initialTouched||Mn,status:tn.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),ni=Pi.current,Kn=(0,c.useCallback)(function(de){var _e=Pi.current;Pi.current=Rn(_e,de),_e!==Pi.current&&wi(function(Pe){return Pe+1})},[]),ji=(0,c.useCallback)(function(de,_e){return new Promise(function(Pe,rt){var _t=tn.validate(de,_e);_t==null?Pe(Zt):yt(_t)?_t.then(function(Dt){Pe(Dt||Zt)},function(Dt){rt(Dt)}):Pe(_t)})},[tn.validate]),$i=(0,c.useCallback)(function(de,_e){var Pe=tn.validationSchema,rt=dt(Pe)?Pe(_e):Pe,_t=_e&&rt.validateAt?rt.validateAt(_e,de):sn(de,rt);return new Promise(function(Dt,pn){_t.then(function(){Dt(Zt)},function(In){In.name==="ValidationError"?Dt(En(In)):pn(In)})})},[tn.validationSchema]),sr=(0,c.useCallback)(function(de,_e){return new Promise(function(Pe){return Pe(Fn.current[de].validate(_e))})},[]),Ai=(0,c.useCallback)(function(de){var _e=Object.keys(Fn.current).filter(function(rt){return dt(Fn.current[rt].validate)}),Pe=_e.length>0?_e.map(function(rt){return sr(rt,Xt(de,rt))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Pe).then(function(rt){return rt.reduce(function(_t,Dt,pn){return Dt==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Dt&&(_t=dn(_t,_e[pn],Dt)),_t},{})})},[sr]),Lr=(0,c.useCallback)(function(de){return Promise.all([Ai(de),tn.validationSchema?$i(de):{},tn.validate?ji(de):{}]).then(function(_e){var Pe=_e[0],rt=_e[1],_t=_e[2],Dt=g.all([Pe,rt,_t],{arrayMerge:rn});return Dt})},[tn.validate,tn.validationSchema,Ai,ji,$i]),Vi=Xe(function(de){return de===void 0&&(de=ni.values),Kn({type:"SET_ISVALIDATING",payload:!0}),Lr(de).then(function(_e){return jt.current&&(Kn({type:"SET_ISVALIDATING",payload:!1}),Kn({type:"SET_ERRORS",payload:_e})),_e})});(0,c.useEffect)(function(){Ht&&jt.current===!0&&_()(Gn.current,tn.initialValues)&&Vi(Gn.current)},[Ht,Vi]);var Nr=(0,c.useCallback)(function(de){var _e=de&&de.values?de.values:Gn.current,Pe=de&&de.errors?de.errors:Si.current?Si.current:tn.initialErrors||{},rt=de&&de.touched?de.touched:nr.current?nr.current:tn.initialTouched||{},_t=de&&de.status?de.status:ln.current?ln.current:tn.initialStatus;Gn.current=_e,Si.current=Pe,nr.current=rt,ln.current=_t;var Dt=r(function(){Kn({type:"RESET_FORM",payload:{isSubmitting:!!de&&!!de.isSubmitting,errors:Pe,touched:rt,status:_t,values:_e,isValidating:!!de&&!!de.isValidating,submitCount:de&&de.submitCount&&typeof de.submitCount=="number"?de.submitCount:0}})},"dispatchFn");if(tn.onReset){var pn=tn.onReset(ni.values,Er);yt(pn)?pn.then(Dt):Dt()}else Dt()},[tn.initialErrors,tn.initialStatus,tn.initialTouched,tn.onReset]);(0,c.useEffect)(function(){jt.current===!0&&!_()(Gn.current,tn.initialValues)&&$n&&(Gn.current=tn.initialValues,Nr(),Ht&&Vi(Gn.current))},[$n,tn.initialValues,Nr,Ht,Vi]),(0,c.useEffect)(function(){$n&&jt.current===!0&&!_()(Si.current,tn.initialErrors)&&(Si.current=tn.initialErrors||Zt,Kn({type:"SET_ERRORS",payload:tn.initialErrors||Zt}))},[$n,tn.initialErrors]),(0,c.useEffect)(function(){$n&&jt.current===!0&&!_()(nr.current,tn.initialTouched)&&(nr.current=tn.initialTouched||Mn,Kn({type:"SET_TOUCHED",payload:tn.initialTouched||Mn}))},[$n,tn.initialTouched]),(0,c.useEffect)(function(){$n&&jt.current===!0&&!_()(ln.current,tn.initialStatus)&&(ln.current=tn.initialStatus,Kn({type:"SET_STATUS",payload:tn.initialStatus}))},[$n,tn.initialStatus,tn.initialTouched]);var _i=Xe(function(de){if(Fn.current[de]&&dt(Fn.current[de].validate)){var _e=Xt(ni.values,de),Pe=Fn.current[de].validate(_e);return yt(Pe)?(Kn({type:"SET_ISVALIDATING",payload:!0}),Pe.then(function(rt){return rt}).then(function(rt){Kn({type:"SET_FIELD_ERROR",payload:{field:de,value:rt}}),Kn({type:"SET_ISVALIDATING",payload:!1})})):(Kn({type:"SET_FIELD_ERROR",payload:{field:de,value:Pe}}),Promise.resolve(Pe))}else if(tn.validationSchema)return Kn({type:"SET_ISVALIDATING",payload:!0}),$i(ni.values,de).then(function(rt){return rt}).then(function(rt){Kn({type:"SET_FIELD_ERROR",payload:{field:de,value:Xt(rt,de)}}),Kn({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Ci=(0,c.useCallback)(function(de,_e){var Pe=_e.validate;Fn.current[de]={validate:Pe}},[]),N=(0,c.useCallback)(function(de){delete Fn.current[de]},[]),he=Xe(function(de,_e){Kn({type:"SET_TOUCHED",payload:de});var Pe=_e===void 0?Ae:_e;return Pe?Vi(ni.values):Promise.resolve()}),je=(0,c.useCallback)(function(de){Kn({type:"SET_ERRORS",payload:de})},[]),Rt=Xe(function(de,_e){var Pe=dt(de)?de(ni.values):de;Kn({type:"SET_VALUES",payload:Pe});var rt=_e===void 0?X:_e;return rt?Vi(Pe):Promise.resolve()}),Qt=(0,c.useCallback)(function(de,_e){Kn({type:"SET_FIELD_ERROR",payload:{field:de,value:_e}})},[]),An=Xe(function(de,_e,Pe){Kn({type:"SET_FIELD_VALUE",payload:{field:de,value:_e}});var rt=Pe===void 0?X:Pe;return rt?Vi(dn(ni.values,de,_e)):Promise.resolve()}),qn=(0,c.useCallback)(function(de,_e){var Pe=_e,rt=de,_t;if(!Ve(de)){de.persist&&de.persist();var Dt=de.target?de.target:de.currentTarget,pn=Dt.type,In=Dt.name,Nn=Dt.id,Tn=Dt.value,di=Dt.checked,an=Dt.outerHTML,ki=Dt.options,Zn=Dt.multiple;Pe=_e||In||Nn,rt=/number|range/.test(pn)?(_t=parseFloat(Tn),isNaN(_t)?"":_t):/checkbox/.test(pn)?Wt(Xt(ni.values,Pe),di,Tn):ki&&Zn?cn(ki):Tn}Pe&&An(Pe,rt)},[An,ni.values]),Pn=Xe(function(de){if(Ve(de))return function(_e){return qn(_e,de)};qn(de)}),xn=Xe(function(de,_e,Pe){_e===void 0&&(_e=!0),Kn({type:"SET_FIELD_TOUCHED",payload:{field:de,value:_e}});var rt=Pe===void 0?Ae:Pe;return rt?Vi(ni.values):Promise.resolve()}),Xn=(0,c.useCallback)(function(de,_e){de.persist&&de.persist();var Pe=de.target,rt=Pe.name,_t=Pe.id,Dt=Pe.outerHTML,pn=_e||rt||_t;xn(pn,!0)},[xn]),li=Xe(function(de){if(Ve(de))return function(_e){return Xn(_e,de)};Xn(de)}),Ri=(0,c.useCallback)(function(de){dt(de)?Kn({type:"SET_FORMIK_STATE",payload:de}):Kn({type:"SET_FORMIK_STATE",payload:r(function(){return de},"payload")})},[]),zi=(0,c.useCallback)(function(de){Kn({type:"SET_STATUS",payload:de})},[]),gr=(0,c.useCallback)(function(de){Kn({type:"SET_ISSUBMITTING",payload:de})},[]),Fr=Xe(function(){return Kn({type:"SUBMIT_ATTEMPT"}),Vi().then(function(de){var _e=de instanceof Error,Pe=!_e&&Object.keys(de).length===0;if(Pe){var rt;try{if(rt=Rr(),rt===void 0)return}catch(_t){throw _t}return Promise.resolve(rt).then(function(_t){return jt.current&&Kn({type:"SUBMIT_SUCCESS"}),_t}).catch(function(_t){if(jt.current)throw Kn({type:"SUBMIT_FAILURE"}),_t})}else if(jt.current&&(Kn({type:"SUBMIT_FAILURE"}),_e))throw de})}),ri=Xe(function(de){if(de&&de.preventDefault&&dt(de.preventDefault)&&de.preventDefault(),de&&de.stopPropagation&&dt(de.stopPropagation)&&de.stopPropagation(),!1)var _e;Fr().catch(function(Pe){console.warn("Warning: An unhandled error was caught from submitForm()",Pe)})}),Er={resetForm:Nr,validateForm:Vi,validateField:_i,setErrors:je,setFieldError:Qt,setFieldTouched:xn,setFieldValue:An,setStatus:zi,setSubmitting:gr,setTouched:he,setValues:Rt,setFormikState:Ri,submitForm:Fr},Rr=Xe(function(){return Vn(ni.values,Er)}),ei=Xe(function(de){de&&de.preventDefault&&dt(de.preventDefault)&&de.preventDefault(),de&&de.stopPropagation&&dt(de.stopPropagation)&&de.stopPropagation(),Nr()}),hr=(0,c.useCallback)(function(de){return{value:Xt(ni.values,de),error:Xt(ni.errors,de),touched:!!Xt(ni.touched,de),initialValue:Xt(Gn.current,de),initialTouched:!!Xt(nr.current,de),initialError:Xt(Si.current,de)}},[ni.errors,ni.touched,ni.values]),si=(0,c.useCallback)(function(de){return{setValue:r(function(Pe,rt){return An(de,Pe,rt)},"setValue"),setTouched:r(function(Pe,rt){return xn(de,Pe,rt)},"setTouched"),setError:r(function(Pe){return Qt(de,Pe)},"setError")}},[An,xn,Qt]),Eo=(0,c.useCallback)(function(de){var _e=Ot(de),Pe=_e?de.name:de,rt=Xt(ni.values,Pe),_t={name:Pe,value:rt,onChange:Pn,onBlur:li};if(_e){var Dt=de.type,pn=de.value,In=de.as,Nn=de.multiple;Dt==="checkbox"?pn===void 0?_t.checked=!!rt:(_t.checked=!!(Array.isArray(rt)&&~rt.indexOf(pn)),_t.value=pn):Dt==="radio"?(_t.checked=rt===pn,_t.value=pn):In==="select"&&Nn&&(_t.value=_t.value||[],_t.multiple=!0)}return _t},[li,Pn,ni.values]),Jr=(0,c.useMemo)(function(){return!_()(Gn.current,ni.values)},[Gn.current,ni.values]),fo=(0,c.useMemo)(function(){return typeof Mt<"u"?Jr?ni.errors&&Object.keys(ni.errors).length===0:Mt!==!1&&dt(Mt)?Mt(tn):Mt:ni.errors&&Object.keys(ni.errors).length===0},[Mt,Jr,ni.errors,tn]),ho=ce({},ni,{initialValues:Gn.current,initialErrors:Si.current,initialTouched:nr.current,initialStatus:ln.current,handleBlur:li,handleChange:Pn,handleReset:ei,handleSubmit:ri,resetForm:Nr,setErrors:je,setFormikState:Ri,setFieldTouched:xn,setFieldValue:An,setFieldError:Qt,setStatus:zi,setSubmitting:gr,setTouched:he,setValues:Rt,submitForm:Fr,validateForm:Vi,validateField:_i,isValid:fo,dirty:Jr,unregisterField:N,registerField:Ci,getFieldProps:Eo,getFieldMeta:hr,getFieldHelpers:si,validateOnBlur:Ae,validateOnChange:X,validateOnMount:Ht});return ho}r(Wi,"useFormik");function Jn(se){var ue=Wi(se),X=se.component,lt=se.children,Ae=se.render,Ye=se.innerRef;return(0,c.useImperativeHandle)(Ye,function(){return ue}),(0,c.createElement)(Be,{value:ue},X?(0,c.createElement)(X,ue):Ae?Ae(ue):lt?dt(lt)?lt(ue):ct(lt)?null:c.Children.only(lt):null)}r(Jn,"Formik");function zn(se){var ue=se.htmlContent,X=se.documentationAnchorLink,lt=se.handlerName;console.warn("Warning: Formik called `"+lt+"`, but you forgot to pass an `id` or `name` attribute to your input:\n    "+ue+`
    Formik cannot determine which value to update. For more info see https://formik.org/docs/api/formik#`+X+`
  `)}r(zn,"warnAboutMissingIdentifier");function En(se){var ue={};if(se.inner){if(se.inner.length===0)return dn(ue,se.path,se.message);for(var Ae=se.inner,X=Array.isArray(Ae),lt=0,Ae=X?Ae:Ae[Symbol.iterator]();;){var Ye;if(X){if(lt>=Ae.length)break;Ye=Ae[lt++]}else{if(lt=Ae.next(),lt.done)break;Ye=lt.value}var Ht=Ye;Xt(ue,Ht.path)||(ue=dn(ue,Ht.path,Ht.message))}}return ue}r(En,"yupToFormErrors");function sn(se,ue,X,lt){X===void 0&&(X=!1);var Ae=oi(se);return ue[X?"validateSync":"validate"](Ae,{abortEarly:!1,context:lt||Ae})}r(sn,"validateYupSchema");function oi(se){var ue=Array.isArray(se)?[]:{};for(var X in se)if(Object.prototype.hasOwnProperty.call(se,X)){var lt=String(X);Array.isArray(se[lt])===!0?ue[lt]=se[lt].map(function(Ae){return Array.isArray(Ae)===!0||(0,S.A)(Ae)?oi(Ae):Ae!==""?Ae:void 0}):(0,S.A)(se[lt])?ue[lt]=oi(se[lt]):ue[lt]=se[lt]!==""?se[lt]:void 0}return ue}r(oi,"prepareDataForValidation");function rn(se,ue,X){var lt=se.slice();return ue.forEach(r(function(Ye,Ht){if(typeof lt[Ht]>"u"){var Mt=X.clone!==!1,Qn=Mt&&X.isMergeableObject(Ye);lt[Ht]=Qn?g(Array.isArray(Ye)?[]:{},Ye,X):Ye}else X.isMergeableObject(Ye)?lt[Ht]=g(se[Ht],Ye,X):se.indexOf(Ye)===-1&&lt.push(Ye)},"merge")),lt}r(rn,"arrayMerge");function cn(se){return Array.from(se).filter(function(ue){return ue.selected}).map(function(ue){return ue.value})}r(cn,"getSelectedValues");function Wt(se,ue,X){if(typeof se=="boolean")return Boolean(ue);var lt=[],Ae=!1,Ye=-1;if(Array.isArray(se))lt=se,Ye=se.indexOf(X),Ae=Ye>=0;else if(!X||X=="true"||X=="false")return Boolean(ue);return ue&&X&&!Ae?lt.concat(X):Ae?lt.slice(0,Ye).concat(lt.slice(Ye+1)):lt}r(Wt,"getValueForCheckbox");var J=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?c.useLayoutEffect:c.useEffect;function Xe(se){var ue=(0,c.useRef)(se);return J(function(){ue.current=se}),(0,c.useCallback)(function(){for(var X=arguments.length,lt=new Array(X),Ae=0;Ae<X;Ae++)lt[Ae]=arguments[Ae];return ue.current.apply(void 0,lt)},[])}r(Xe,"useEventCallback");function nt(se){var ue=Ze(),X=ue.getFieldProps,lt=ue.getFieldMeta,Ae=ue.getFieldHelpers,Ye=ue.registerField,Ht=ue.unregisterField,Mt=Ot(se),Qn=Mt?se:{name:se},$n=Qn.name,Vn=Qn.validate;(0,c.useEffect)(function(){return $n&&Ye($n,{validate:Vn}),function(){$n&&Ht($n)}},[Ye,Ht,$n,Vn]),$n||(0,E.A)(!1);var kn=(0,c.useMemo)(function(){return Ae($n)},[Ae,$n]);return[X(Qn),lt($n),kn]}r(nt,"useField");function st(se){var ue=se.validate,X=se.name,lt=se.render,Ae=se.children,Ye=se.as,Ht=se.component,Mt=se.className,Qn=ke(se,["validate","name","render","children","as","component","className"]),$n=Ze(),Vn=ke($n,["validate","validationSchema"]),kn=Vn.registerField,tn=Vn.unregisterField;(0,c.useEffect)(function(){return kn(X,{validate:ue}),function(){tn(X)}},[kn,tn,X,ue]);var Gn=Vn.getFieldProps(ce({name:X},Qn)),Si=Vn.getFieldMeta(X),nr={field:Gn,form:Vn};if(lt)return lt(ce({},nr,{meta:Si}));if(dt(Ae))return Ae(ce({},nr,{meta:Si}));if(Ht){if(typeof Ht=="string"){var ln=Qn.innerRef,jt=ke(Qn,["innerRef"]);return(0,c.createElement)(Ht,ce({ref:ln},Gn,jt,{className:Mt}),Ae)}return(0,c.createElement)(Ht,ce({field:Gn,form:Vn},Qn,{className:Mt}),Ae)}var Fn=Ye||"input";if(typeof Fn=="string"){var Hn=Qn.innerRef,wi=ke(Qn,["innerRef"]);return(0,c.createElement)(Fn,ce({ref:Hn},Gn,wi,{className:Mt}),Ae)}return(0,c.createElement)(Fn,ce({},Gn,Qn,{className:Mt}),Ae)}r(st,"Field");var pt=(0,c.forwardRef)(function(se,ue){var X=se.action,lt=ke(se,["action"]),Ae=X??"#",Ye=Ze(),Ht=Ye.handleReset,Mt=Ye.handleSubmit;return(0,c.createElement)("form",ce({onSubmit:Mt,ref:ue,onReset:Ht,action:Ae},lt))});pt.displayName="Form";function It(se){var ue=se.mapPropsToValues,X=ue===void 0?function(Ae){var Ye={};for(var Ht in Ae)Ae.hasOwnProperty(Ht)&&typeof Ae[Ht]!="function"&&(Ye[Ht]=Ae[Ht]);return Ye}:ue,lt=ke(se,["mapPropsToValues"]);return r(function(Ye){var Ht=Ye.displayName||Ye.name||Ye.constructor&&Ye.constructor.name||"Component",Mt=function(Qn){Te($n,Qn);function $n(){for(var kn,tn=arguments.length,Gn=new Array(tn),Si=0;Si<tn;Si++)Gn[Si]=arguments[Si];return kn=Qn.call.apply(Qn,[this].concat(Gn))||this,kn.validate=function(nr){return lt.validate(nr,kn.props)},kn.validationSchema=function(){return dt(lt.validationSchema)?lt.validationSchema(kn.props):lt.validationSchema},kn.handleSubmit=function(nr,ln){return lt.handleSubmit(nr,ce({},ln,{props:kn.props}))},kn.renderFormComponent=function(nr){return createElement(Ye,ce({},kn.props,nr))},kn}r($n,"C");var Vn=$n.prototype;return Vn.render=r(function(){var tn=this.props,Gn=ke(tn,["children"]);return createElement(Jn,ce({},Gn,lt,{validate:lt.validate&&this.validate,validationSchema:lt.validationSchema&&this.validationSchema,initialValues:X(this.props),initialStatus:lt.mapPropsToStatus&&lt.mapPropsToStatus(this.props),initialErrors:lt.mapPropsToErrors&&lt.mapPropsToErrors(this.props),initialTouched:lt.mapPropsToTouched&&lt.mapPropsToTouched(this.props),onSubmit:this.handleSubmit,children:this.renderFormComponent}))},"render"),$n}(Component);return Mt.displayName="WithFormik("+Ht+")",hoistNonReactStatics(Mt,Ye)},"createFormik")}r(It,"withFormik");function ve(se){var ue=r(function(Ae){return(0,c.createElement)($e,null,function(Ye){return Ye||(0,E.A)(!1),(0,c.createElement)(se,ce({},Ae,{formik:Ye}))})},"C"),X=se.displayName||se.name||se.constructor&&se.constructor.name||"Component";return ue.WrappedComponent=se,ue.displayName="FormikConnect("+X+")",q()(ue,se)}r(ve,"connect");var et=r(function(ue,X,lt){var Ae=Re(ue),Ye=Ae[X];return Ae.splice(X,1),Ae.splice(lt,0,Ye),Ae},"move"),G=r(function(ue,X,lt){var Ae=Re(ue),Ye=Ae[X];return Ae[X]=Ae[lt],Ae[lt]=Ye,Ae},"swap"),ne=r(function(ue,X,lt){var Ae=Re(ue);return Ae.splice(X,0,lt),Ae},"insert"),Me=r(function(ue,X,lt){var Ae=Re(ue);return Ae[X]=lt,Ae},"replace"),Re=r(function(ue){if(ue){if(Array.isArray(ue))return[].concat(ue);var X=Object.keys(ue).map(function(lt){return parseInt(lt)}).reduce(function(lt,Ae){return Ae>lt?Ae:lt},0);return Array.from(ce({},ue,{length:X+1}))}else return[]},"copyArrayLike"),Ft=r(function(ue,X){var lt=typeof ue=="function"?ue:X;return function(Ae){if(Array.isArray(Ae)||Ot(Ae)){var Ye=Re(Ae);return lt(Ye)}return Ae}},"createAlterationHandler"),ot=function(se){Te(ue,se);function ue(lt){var Ae;return Ae=se.call(this,lt)||this,Ae.updateArrayField=function(Ye,Ht,Mt){var Qn=Ae.props,$n=Qn.name,Vn=Qn.formik.setFormikState;Vn(function(kn){var tn=Ft(Mt,Ye),Gn=Ft(Ht,Ye),Si=dn(kn.values,$n,Ye(Xt(kn.values,$n))),nr=Mt?tn(Xt(kn.errors,$n)):void 0,ln=Ht?Gn(Xt(kn.touched,$n)):void 0;return Je(nr)&&(nr=void 0),Je(ln)&&(ln=void 0),ce({},kn,{values:Si,errors:Mt?dn(kn.errors,$n,nr):kn.errors,touched:Ht?dn(kn.touched,$n,ln):kn.touched})})},Ae.push=function(Ye){return Ae.updateArrayField(function(Ht){return[].concat(Re(Ht),[(0,ae.A)(Ye)])},!1,!1)},Ae.handlePush=function(Ye){return function(){return Ae.push(Ye)}},Ae.swap=function(Ye,Ht){return Ae.updateArrayField(function(Mt){return G(Mt,Ye,Ht)},!0,!0)},Ae.handleSwap=function(Ye,Ht){return function(){return Ae.swap(Ye,Ht)}},Ae.move=function(Ye,Ht){return Ae.updateArrayField(function(Mt){return et(Mt,Ye,Ht)},!0,!0)},Ae.handleMove=function(Ye,Ht){return function(){return Ae.move(Ye,Ht)}},Ae.insert=function(Ye,Ht){return Ae.updateArrayField(function(Mt){return ne(Mt,Ye,Ht)},function(Mt){return ne(Mt,Ye,null)},function(Mt){return ne(Mt,Ye,null)})},Ae.handleInsert=function(Ye,Ht){return function(){return Ae.insert(Ye,Ht)}},Ae.replace=function(Ye,Ht){return Ae.updateArrayField(function(Mt){return Me(Mt,Ye,Ht)},!1,!1)},Ae.handleReplace=function(Ye,Ht){return function(){return Ae.replace(Ye,Ht)}},Ae.unshift=function(Ye){var Ht=-1;return Ae.updateArrayField(function(Mt){var Qn=Mt?[Ye].concat(Mt):[Ye];return Ht=Qn.length,Qn},function(Mt){return Mt?[null].concat(Mt):[null]},function(Mt){return Mt?[null].concat(Mt):[null]}),Ht},Ae.handleUnshift=function(Ye){return function(){return Ae.unshift(Ye)}},Ae.handleRemove=function(Ye){return function(){return Ae.remove(Ye)}},Ae.handlePop=function(){return function(){return Ae.pop()}},Ae.remove=Ae.remove.bind(tt(Ae)),Ae.pop=Ae.pop.bind(tt(Ae)),Ae}r(ue,"FieldArrayInner");var X=ue.prototype;return X.componentDidUpdate=r(function(Ae){this.props.validateOnChange&&this.props.formik.validateOnChange&&!_()(Xt(Ae.formik.values,Ae.name),Xt(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},"componentDidUpdate"),X.remove=r(function(Ae){var Ye;return this.updateArrayField(function(Ht){var Mt=Ht?Re(Ht):[];return Ye||(Ye=Mt[Ae]),dt(Mt.splice)&&Mt.splice(Ae,1),dt(Mt.every)&&Mt.every(function(Qn){return Qn===void 0})?[]:Mt},!0,!0),Ye},"remove"),X.pop=r(function(){var Ae;return this.updateArrayField(function(Ye){var Ht=Ye.slice();return Ae||(Ae=Ht&&Ht.pop&&Ht.pop()),Ht},!0,!0),Ae},"pop"),X.render=r(function(){var Ae={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},Ye=this.props,Ht=Ye.component,Mt=Ye.render,Qn=Ye.children,$n=Ye.name,Vn=Ye.formik,kn=ke(Vn,["validate","validationSchema"]),tn=ce({},Ae,{form:kn,name:$n});return Ht?(0,c.createElement)(Ht,tn):Mt?Mt(tn):Qn?typeof Qn=="function"?Qn(tn):ct(Qn)?null:c.Children.only(Qn):null},"render"),ue}(c.Component);ot.defaultProps={validateOnChange:!0};var Tt=ve(ot),we=null,Ue=null,F=null,Oe=null},2053254856:(B,l)=>{l=B.exports=function(a){if(a&&typeof a=="object"){var s=a.which||a.keyCode||a.charCode;s&&(a=s)}if(typeof a=="number")return p[a];var i=String(a),e=d[i.toLowerCase()];if(e)return e;var e=u[i.toLowerCase()];if(e)return e;if(i.length===1)return i.charCodeAt(0)};var d=l.code=l.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},u=l.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(h=97;h<123;h++)d[String.fromCharCode(h)]=h-32;for(var h=48;h<58;h++)d[h-48]=h;for(h=1;h<13;h++)d["f"+h]=h+111;for(h=0;h<10;h++)d["numpad "+h]=h+96;var p=l.names=l.title={};for(h in d)p[d[h]]=h;for(var m in u)d[m]=u[m]},2228537078:B=>{"use strict";var l=Array.isArray,d=Object.keys,u=Object.prototype.hasOwnProperty,h=typeof Element<"u";function p(m,a){if(m===a)return!0;if(m&&a&&typeof m=="object"&&typeof a=="object"){var s=l(m),i=l(a),e,t,n;if(s&&i){if(t=m.length,t!=a.length)return!1;for(e=t;e--!==0;)if(!p(m[e],a[e]))return!1;return!0}if(s!=i)return!1;var o=m instanceof Date,f=a instanceof Date;if(o!=f)return!1;if(o&&f)return m.getTime()==a.getTime();var g=m instanceof RegExp,S=a instanceof RegExp;if(g!=S)return!1;if(g&&S)return m.toString()==a.toString();var c=d(m);if(t=c.length,t!==d(a).length)return!1;for(e=t;e--!==0;)if(!u.call(a,c[e]))return!1;if(h&&m instanceof Element&&a instanceof Element)return m===a;for(e=t;e--!==0;)if(n=c[e],!(n==="_owner"&&m.$$typeof)&&!p(m[n],a[n]))return!1;return!0}return m!==m&&a!==a}r(p,"equal"),B.exports=r(function(a,s){try{return p(a,s)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}},"exportedEqual")},344860614:(B,l,d)=>{"use strict";d.d(l,{zy:()=>ri,Zp:()=>si,wQ:()=>Er,g:()=>de});var u=d(3134334389),h=d.t(u,2);/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p(){return p=Object.assign?Object.assign.bind():function(oe){for(var fe=1;fe<arguments.length;fe++){var Ce=arguments[fe];for(var Ne in Ce)Object.prototype.hasOwnProperty.call(Ce,Ne)&&(oe[Ne]=Ce[Ne])}return oe},p.apply(this,arguments)}r(p,"_extends");var m;(function(oe){oe.Pop="POP",oe.Push="PUSH",oe.Replace="REPLACE"})(m||(m={}));const a="popstate";function s(oe){oe===void 0&&(oe={});let{initialEntries:fe=["/"],initialIndex:Ce,v5Compat:Ne=!1}=oe,Ge;Ge=fe.map((Cn,jn)=>en(Cn,typeof Cn=="string"?null:Cn.state,jn===0?"default":void 0));let Ct=$t(Ce??Ge.length-1),ht=m.Pop,Kt=null;function $t(Cn){return Math.min(Math.max(Cn,0),Ge.length-1)}r($t,"clampIndex");function on(){return Ge[Ct]}r(on,"getCurrentLocation");function en(Cn,jn,Bn){jn===void 0&&(jn=null);let wn=g(Ge?on().pathname:"/",Cn,jn,Bn);return n(wn.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(Cn)),wn}r(en,"createMemoryLocation");function gn(Cn){return typeof Cn=="string"?Cn:S(Cn)}return r(gn,"createHref"),{get index(){return Ct},get action(){return ht},get location(){return on()},createHref:gn,createURL(Cn){return new URL(gn(Cn),"http://localhost")},encodeLocation(Cn){let jn=typeof Cn=="string"?c(Cn):Cn;return{pathname:jn.pathname||"",search:jn.search||"",hash:jn.hash||""}},push(Cn,jn){ht=m.Push;let Bn=en(Cn,jn);Ct+=1,Ge.splice(Ct,Ge.length,Bn),Ne&&Kt&&Kt({action:ht,location:Bn,delta:1})},replace(Cn,jn){ht=m.Replace;let Bn=en(Cn,jn);Ge[Ct]=Bn,Ne&&Kt&&Kt({action:ht,location:Bn,delta:0})},go(Cn){ht=m.Pop;let jn=$t(Ct+Cn),Bn=Ge[jn];Ct=jn,Kt&&Kt({action:ht,location:Bn,delta:Cn})},listen(Cn){return Kt=Cn,()=>{Kt=null}}}}r(s,"router_createMemoryHistory");function i(oe){oe===void 0&&(oe={});function fe(Ne,Ge){let{pathname:Ct,search:ht,hash:Kt}=Ne.location;return g("",{pathname:Ct,search:ht,hash:Kt},Ge.state&&Ge.state.usr||null,Ge.state&&Ge.state.key||"default")}r(fe,"createBrowserLocation");function Ce(Ne,Ge){return typeof Ge=="string"?Ge:S(Ge)}return r(Ce,"createBrowserHref"),v(fe,Ce,null,oe)}r(i,"createBrowserHistory");function e(oe){oe===void 0&&(oe={});function fe(Ge,Ct){let{pathname:ht="/",search:Kt="",hash:$t=""}=c(Ge.location.hash.substr(1));return!ht.startsWith("/")&&!ht.startsWith(".")&&(ht="/"+ht),g("",{pathname:ht,search:Kt,hash:$t},Ct.state&&Ct.state.usr||null,Ct.state&&Ct.state.key||"default")}r(fe,"createHashLocation");function Ce(Ge,Ct){let ht=Ge.document.querySelector("base"),Kt="";if(ht&&ht.getAttribute("href")){let $t=Ge.location.href,on=$t.indexOf("#");Kt=on===-1?$t:$t.slice(0,on)}return Kt+"#"+(typeof Ct=="string"?Ct:S(Ct))}r(Ce,"createHashHref");function Ne(Ge,Ct){n(Ge.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(Ct)+")")}return r(Ne,"validateHashLocation"),v(fe,Ce,Ne,oe)}r(e,"createHashHistory");function t(oe,fe){if(oe===!1||oe===null||typeof oe>"u")throw new Error(fe)}r(t,"invariant");function n(oe,fe){if(!oe){typeof console<"u"&&console.warn(fe);try{throw new Error(fe)}catch{}}}r(n,"warning");function o(){return Math.random().toString(36).substr(2,8)}r(o,"createKey");function f(oe,fe){return{usr:oe.state,key:oe.key,idx:fe}}r(f,"getHistoryState");function g(oe,fe,Ce,Ne){return Ce===void 0&&(Ce=null),p({pathname:typeof oe=="string"?oe:oe.pathname,search:"",hash:""},typeof fe=="string"?c(fe):fe,{state:Ce,key:fe&&fe.key||Ne||o()})}r(g,"createLocation");function S(oe){let{pathname:fe="/",search:Ce="",hash:Ne=""}=oe;return Ce&&Ce!=="?"&&(fe+=Ce.charAt(0)==="?"?Ce:"?"+Ce),Ne&&Ne!=="#"&&(fe+=Ne.charAt(0)==="#"?Ne:"#"+Ne),fe}r(S,"createPath");function c(oe){let fe={};if(oe){let Ce=oe.indexOf("#");Ce>=0&&(fe.hash=oe.substr(Ce),oe=oe.substr(0,Ce));let Ne=oe.indexOf("?");Ne>=0&&(fe.search=oe.substr(Ne),oe=oe.substr(0,Ne)),oe&&(fe.pathname=oe)}return fe}r(c,"router_parsePath");function v(oe,fe,Ce,Ne){Ne===void 0&&(Ne={});let{window:Ge=document.defaultView,v5Compat:Ct=!1}=Ne,ht=Ge.history,Kt=m.Pop,$t=null,on=en();on==null&&(on=0,ht.replaceState(p({},ht.state,{idx:on}),""));function en(){return(ht.state||{idx:null}).idx}r(en,"getIndex");function gn(){Kt=m.Pop;let wn=en(),hn=wn==null?null:wn-on;on=wn,$t&&$t({action:Kt,location:Bn.location,delta:hn})}r(gn,"handlePop");function vn(wn,hn){Kt=m.Push;let ci=g(Bn.location,wn,hn);Ce&&Ce(ci,wn),on=en()+1;let Ki=f(ci,on),ar=Bn.createHref(ci);try{ht.pushState(Ki,"",ar)}catch(Tr){if(Tr instanceof DOMException&&Tr.name==="DataCloneError")throw Tr;Ge.location.assign(ar)}Ct&&$t&&$t({action:Kt,location:Bn.location,delta:1})}r(vn,"push");function Cn(wn,hn){Kt=m.Replace;let ci=g(Bn.location,wn,hn);Ce&&Ce(ci,wn),on=en();let Ki=f(ci,on),ar=Bn.createHref(ci);ht.replaceState(Ki,"",ar),Ct&&$t&&$t({action:Kt,location:Bn.location,delta:0})}r(Cn,"replace");function jn(wn){let hn=Ge.location.origin!=="null"?Ge.location.origin:Ge.location.href,ci=typeof wn=="string"?wn:S(wn);return ci=ci.replace(/ $/,"%20"),t(hn,"No window.location.(origin|href) available to create URL for href: "+ci),new URL(ci,hn)}r(jn,"createURL");let Bn={get action(){return Kt},get location(){return oe(Ge,ht)},listen(wn){if($t)throw new Error("A history only accepts one active listener");return Ge.addEventListener(a,gn),$t=wn,()=>{Ge.removeEventListener(a,gn),$t=null}},createHref(wn){return fe(Ge,wn)},createURL:jn,encodeLocation(wn){let hn=jn(wn);return{pathname:hn.pathname,search:hn.search,hash:hn.hash}},push:vn,replace:Cn,go(wn){return ht.go(wn)}};return Bn}r(v,"getUrlBasedHistory");var _;(function(oe){oe.data="data",oe.deferred="deferred",oe.redirect="redirect",oe.error="error"})(_||(_={}));const E=new Set(["lazy","caseSensitive","path","id","index","children"]);function b(oe){return oe.index===!0}r(b,"isIndexRoute");function T(oe,fe,Ce,Ne){return Ce===void 0&&(Ce=[]),Ne===void 0&&(Ne={}),oe.map((Ge,Ct)=>{let ht=[...Ce,Ct],Kt=typeof Ge.id=="string"?Ge.id:ht.join("-");if(t(Ge.index!==!0||!Ge.children,"Cannot specify children on an index route"),t(!Ne[Kt],'Found a route id collision on id "'+Kt+`".  Route id's must be globally unique within Data Router usages`),b(Ge)){let $t=p({},Ge,fe(Ge),{id:Kt});return Ne[Kt]=$t,$t}else{let $t=p({},Ge,fe(Ge),{id:Kt,children:void 0});return Ne[Kt]=$t,Ge.children&&($t.children=T(Ge.children,fe,ht,Ne)),$t}})}r(T,"convertRoutesToDataRoutes");function I(oe,fe,Ce){Ce===void 0&&(Ce="/");let Ne=typeof fe=="string"?c(fe):fe,Ge=Je(Ne.pathname||"/",Ce);if(Ge==null)return null;let Ct=w(oe);R(Ct);let ht=null;for(let Kt=0;ht==null&&Kt<Ct.length;++Kt){let $t=Ze(Ge);ht=tt(Ct[Kt],$t)}return ht}r(I,"router_matchRoutes");function O(oe,fe){let{route:Ce,pathname:Ne,params:Ge}=oe;return{id:Ce.id,pathname:Ne,params:Ge,data:fe[Ce.id],handle:Ce.handle}}r(O,"convertRouteMatchToUiMatch");function w(oe,fe,Ce,Ne){fe===void 0&&(fe=[]),Ce===void 0&&(Ce=[]),Ne===void 0&&(Ne="");let Ge=r((Ct,ht,Kt)=>{let $t={relativePath:Kt===void 0?Ct.path||"":Kt,caseSensitive:Ct.caseSensitive===!0,childrenIndex:ht,route:Ct};$t.relativePath.startsWith("/")&&(t($t.relativePath.startsWith(Ne),'Absolute route path "'+$t.relativePath+'" nested under path '+('"'+Ne+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),$t.relativePath=$t.relativePath.slice(Ne.length));let on=it([Ne,$t.relativePath]),en=Ce.concat($t);Ct.children&&Ct.children.length>0&&(t(Ct.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+on+'".')),w(Ct.children,fe,en,on)),!(Ct.path==null&&!Ct.index)&&fe.push({path:on,score:Te(on,Ct.index),routesMeta:en})},"flattenRoute");return oe.forEach((Ct,ht)=>{var Kt;if(Ct.path===""||!((Kt=Ct.path)!=null&&Kt.includes("?")))Ge(Ct,ht);else for(let $t of D(Ct.path))Ge(Ct,ht,$t)}),fe}r(w,"flattenRoutes");function D(oe){let fe=oe.split("/");if(fe.length===0)return[];let[Ce,...Ne]=fe,Ge=Ce.endsWith("?"),Ct=Ce.replace(/\?$/,"");if(Ne.length===0)return Ge?[Ct,""]:[Ct];let ht=D(Ne.join("/")),Kt=[];return Kt.push(...ht.map($t=>$t===""?Ct:[Ct,$t].join("/"))),Ge&&Kt.push(...ht),Kt.map($t=>oe.startsWith("/")&&$t===""?"/":$t)}r(D,"explodeOptionalSegments");function R(oe){oe.sort((fe,Ce)=>fe.score!==Ce.score?Ce.score-fe.score:ke(fe.routesMeta.map(Ne=>Ne.childrenIndex),Ce.routesMeta.map(Ne=>Ne.childrenIndex)))}r(R,"rankRouteBranches");const L=/^:[\w-]+$/,H=3,K=2,ee=1,q=10,ae=null,ce=r(oe=>oe==="*","isSplat");function Te(oe,fe){let Ce=oe.split("/"),Ne=Ce.length;return Ce.some(ce)&&(Ne+=ae),fe&&(Ne+=K),Ce.filter(Ge=>!ce(Ge)).reduce((Ge,Ct)=>Ge+(L.test(Ct)?H:Ct===""?ee:q),Ne)}r(Te,"computeScore");function ke(oe,fe){return oe.length===fe.length&&oe.slice(0,-1).every((Ne,Ge)=>Ne===fe[Ge])?oe[oe.length-1]-fe[fe.length-1]:0}r(ke,"compareIndexes");function tt(oe,fe){let{routesMeta:Ce}=oe,Ne={},Ge="/",Ct=[];for(let ht=0;ht<Ce.length;++ht){let Kt=Ce[ht],$t=ht===Ce.length-1,on=Ge==="/"?fe:fe.slice(Ge.length)||"/",en=Be({path:Kt.relativePath,caseSensitive:Kt.caseSensitive,end:$t},on);if(!en)return null;Object.assign(Ne,en.params);let gn=Kt.route;Ct.push({params:Ne,pathname:it([Ge,en.pathname]),pathnameBase:nn(it([Ge,en.pathnameBase])),route:gn}),en.pathnameBase!=="/"&&(Ge=it([Ge,en.pathnameBase]))}return Ct}r(tt,"matchRouteBranch");function At(oe,fe){fe===void 0&&(fe={});let Ce=oe;Ce.endsWith("*")&&Ce!=="*"&&!Ce.endsWith("/*")&&(n(!1,'Route path "'+Ce+'" will be treated as if it were '+('"'+Ce.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+Ce.replace(/\*$/,"/*")+'".')),Ce=Ce.replace(/\*$/,"/*"));const Ne=Ce.startsWith("/")?"/":"",Ge=r(ht=>ht==null?"":typeof ht=="string"?ht:String(ht),"stringify"),Ct=Ce.split(/\/+/).map((ht,Kt,$t)=>{if(Kt===$t.length-1&&ht==="*")return Ge(fe["*"]);const en=ht.match(/^:([\w-]+)(\??)$/);if(en){const[,gn,vn]=en;let Cn=fe[gn];return t(vn==="?"||Cn!=null,'Missing ":'+gn+'" param'),Ge(Cn)}return ht.replace(/\?$/g,"")}).filter(ht=>!!ht);return Ne+Ct.join("/")}r(At,"generatePath");function Be(oe,fe){typeof oe=="string"&&(oe={path:oe,caseSensitive:!1,end:!0});let[Ce,Ne]=$e(oe.path,oe.caseSensitive,oe.end),Ge=fe.match(Ce);if(!Ge)return null;let Ct=Ge[0],ht=Ct.replace(/(.)\/+$/,"$1"),Kt=Ge.slice(1);return{params:Ne.reduce((on,en,gn)=>{let{paramName:vn,isOptional:Cn}=en;if(vn==="*"){let Bn=Kt[gn]||"";ht=Ct.slice(0,Ct.length-Bn.length).replace(/(.)\/+$/,"$1")}const jn=Kt[gn];return Cn&&!jn?on[vn]=void 0:on[vn]=(jn||"").replace(/%2F/g,"/"),on},{}),pathname:Ct,pathnameBase:ht,pattern:oe}}r(Be,"router_matchPath");function $e(oe,fe,Ce){fe===void 0&&(fe=!1),Ce===void 0&&(Ce=!0),n(oe==="*"||!oe.endsWith("*")||oe.endsWith("/*"),'Route path "'+oe+'" will be treated as if it were '+('"'+oe.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+oe.replace(/\*$/,"/*")+'".'));let Ne=[],Ge="^"+oe.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(ht,Kt,$t)=>(Ne.push({paramName:Kt,isOptional:$t!=null}),$t?"/?([^\\/]+)?":"/([^\\/]+)"));return oe.endsWith("*")?(Ne.push({paramName:"*"}),Ge+=oe==="*"||oe==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):Ce?Ge+="\\/*$":oe!==""&&oe!=="/"&&(Ge+="(?:(?=\\/|$))"),[new RegExp(Ge,fe?void 0:"i"),Ne]}r($e,"compilePath");function Ze(oe){try{return oe.split("/").map(fe=>decodeURIComponent(fe).replace(/\//g,"%2F")).join("/")}catch(fe){return n(!1,'The URL path "'+oe+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+fe+").")),oe}}r(Ze,"decodePath");function Je(oe,fe){if(fe==="/")return oe;if(!oe.toLowerCase().startsWith(fe.toLowerCase()))return null;let Ce=fe.endsWith("/")?fe.length-1:fe.length,Ne=oe.charAt(Ce);return Ne&&Ne!=="/"?null:oe.slice(Ce)||"/"}r(Je,"router_stripBasename");function dt(oe,fe){fe===void 0&&(fe="/");let{pathname:Ce,search:Ne="",hash:Ge=""}=typeof oe=="string"?c(oe):oe;return{pathname:Ce?Ce.startsWith("/")?Ce:Ot(Ce,fe):fe,search:Xt(Ne),hash:dn(Ge)}}r(dt,"resolvePath");function Ot(oe,fe){let Ce=fe.replace(/\/+$/,"").split("/");return oe.split("/").forEach(Ge=>{Ge===".."?Ce.length>1&&Ce.pop():Ge!=="."&&Ce.push(Ge)}),Ce.length>1?Ce.join("/"):"/"}r(Ot,"resolvePathname");function Nt(oe,fe,Ce,Ne){return"Cannot include a '"+oe+"' character in a manually specified "+("`to."+fe+"` field ["+JSON.stringify(Ne)+"].  Please separate it out to the ")+("`to."+Ce+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}r(Nt,"getInvalidPathError");function Ve(oe){return oe.filter((fe,Ce)=>Ce===0||fe.route.path&&fe.route.path.length>0)}r(Ve,"getPathContributingMatches");function He(oe,fe){let Ce=Ve(oe);return fe?Ce.map((Ne,Ge)=>Ge===oe.length-1?Ne.pathname:Ne.pathnameBase):Ce.map(Ne=>Ne.pathnameBase)}r(He,"getResolveToMatches");function ct(oe,fe,Ce,Ne){Ne===void 0&&(Ne=!1);let Ge;typeof oe=="string"?Ge=c(oe):(Ge=p({},oe),t(!Ge.pathname||!Ge.pathname.includes("?"),Nt("?","pathname","search",Ge)),t(!Ge.pathname||!Ge.pathname.includes("#"),Nt("#","pathname","hash",Ge)),t(!Ge.search||!Ge.search.includes("#"),Nt("#","search","hash",Ge)));let Ct=oe===""||Ge.pathname==="",ht=Ct?"/":Ge.pathname,Kt;if(ht==null)Kt=Ce;else{let gn=fe.length-1;if(!Ne&&ht.startsWith("..")){let vn=ht.split("/");for(;vn[0]==="..";)vn.shift(),gn-=1;Ge.pathname=vn.join("/")}Kt=gn>=0?fe[gn]:"/"}let $t=dt(Ge,Kt),on=ht&&ht!=="/"&&ht.endsWith("/"),en=(Ct||ht===".")&&Ce.endsWith("/");return!$t.pathname.endsWith("/")&&(on||en)&&($t.pathname+="/"),$t}r(ct,"router_resolveTo");function yt(oe){return oe===""||oe.pathname===""?"/":typeof oe=="string"?c(oe).pathname:oe.pathname}r(yt,"getToPathname");const it=r(oe=>oe.join("/").replace(/\/\/+/g,"/"),"router_joinPaths"),nn=r(oe=>oe.replace(/\/+$/,"").replace(/^\/*/,"/"),"normalizePathname"),Xt=r(oe=>!oe||oe==="?"?"":oe.startsWith("?")?oe:"?"+oe,"normalizeSearch"),dn=r(oe=>!oe||oe==="#"?"":oe.startsWith("#")?oe:"#"+oe,"normalizeHash"),bn=r(function(fe,Ce){Ce===void 0&&(Ce={});let Ne=typeof Ce=="number"?{status:Ce}:Ce,Ge=new Headers(Ne.headers);return Ge.has("Content-Type")||Ge.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(fe),p({},Ne,{headers:Ge}))},"json");class Rn extends Error{}r(Rn,"AbortedDeferredError");class Zt{constructor(fe,Ce){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],t(fe&&typeof fe=="object"&&!Array.isArray(fe),"defer() only accepts plain objects");let Ne;this.abortPromise=new Promise((Ct,ht)=>Ne=ht),this.controller=new AbortController;let Ge=r(()=>Ne(new Rn("Deferred data aborted")),"onAbort");this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",Ge),this.controller.signal.addEventListener("abort",Ge),this.data=Object.entries(fe).reduce((Ct,ht)=>{let[Kt,$t]=ht;return Object.assign(Ct,{[Kt]:this.trackPromise(Kt,$t)})},{}),this.done&&this.unlistenAbortSignal(),this.init=Ce}trackPromise(fe,Ce){if(!(Ce instanceof Promise))return Ce;this.deferredKeys.push(fe),this.pendingKeysSet.add(fe);let Ne=Promise.race([Ce,this.abortPromise]).then(Ge=>this.onSettle(Ne,fe,void 0,Ge),Ge=>this.onSettle(Ne,fe,Ge));return Ne.catch(()=>{}),Object.defineProperty(Ne,"_tracked",{get:()=>!0}),Ne}onSettle(fe,Ce,Ne,Ge){if(this.controller.signal.aborted&&Ne instanceof Rn)return this.unlistenAbortSignal(),Object.defineProperty(fe,"_error",{get:()=>Ne}),Promise.reject(Ne);if(this.pendingKeysSet.delete(Ce),this.done&&this.unlistenAbortSignal(),Ne===void 0&&Ge===void 0){let Ct=new Error('Deferred data for key "'+Ce+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(fe,"_error",{get:()=>Ct}),this.emit(!1,Ce),Promise.reject(Ct)}return Ge===void 0?(Object.defineProperty(fe,"_error",{get:()=>Ne}),this.emit(!1,Ce),Promise.reject(Ne)):(Object.defineProperty(fe,"_data",{get:()=>Ge}),this.emit(!1,Ce),Ge)}emit(fe,Ce){this.subscribers.forEach(Ne=>Ne(fe,Ce))}subscribe(fe){return this.subscribers.add(fe),()=>this.subscribers.delete(fe)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((fe,Ce)=>this.pendingKeysSet.delete(Ce)),this.emit(!0)}async resolveData(fe){let Ce=!1;if(!this.done){let Ne=r(()=>this.cancel(),"onAbort");fe.addEventListener("abort",Ne),Ce=await new Promise(Ge=>{this.subscribe(Ct=>{fe.removeEventListener("abort",Ne),(Ct||this.done)&&Ge(Ct)})})}return Ce}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return t(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((fe,Ce)=>{let[Ne,Ge]=Ce;return Object.assign(fe,{[Ne]:Wi(Ge)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}r(Zt,"DeferredData");function Mn(oe){return oe instanceof Promise&&oe._tracked===!0}r(Mn,"isTrackedPromise");function Wi(oe){if(!Mn(oe))return oe;if(oe._error)throw oe._error;return oe._data}r(Wi,"unwrapTrackedPromise");const Jn=r(function(fe,Ce){Ce===void 0&&(Ce={});let Ne=typeof Ce=="number"?{status:Ce}:Ce;return new Zt(fe,Ne)},"defer"),zn=r(function(fe,Ce){Ce===void 0&&(Ce=302);let Ne=Ce;typeof Ne=="number"?Ne={status:Ne}:typeof Ne.status>"u"&&(Ne.status=302);let Ge=new Headers(Ne.headers);return Ge.set("Location",fe),new Response(null,p({},Ne,{headers:Ge}))},"redirect"),En=r((oe,fe)=>{let Ce=zn(oe,fe);return Ce.headers.set("X-Remix-Reload-Document","true"),Ce},"redirectDocument");class sn{constructor(fe,Ce,Ne,Ge){Ge===void 0&&(Ge=!1),this.status=fe,this.statusText=Ce||"",this.internal=Ge,Ne instanceof Error?(this.data=Ne.toString(),this.error=Ne):this.data=Ne}}r(sn,"ErrorResponseImpl");function oi(oe){return oe!=null&&typeof oe.status=="number"&&typeof oe.statusText=="string"&&typeof oe.internal=="boolean"&&"data"in oe}r(oi,"router_isRouteErrorResponse");const rn=["post","put","patch","delete"],cn=new Set(rn),Wt=["get",...rn],J=new Set(Wt),Xe=new Set([301,302,303,307,308]),nt=new Set([307,308]),st={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pt={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},It={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=r(oe=>({hasErrorBoundary:Boolean(oe.hasErrorBoundary)}),"defaultMapRouteProperties"),G="remix-router-transitions";function ne(oe){const fe=oe.window?oe.window:typeof window<"u"?window:void 0,Ce=typeof fe<"u"&&typeof fe.document<"u"&&typeof fe.document.createElement<"u",Ne=!Ce;t(oe.routes.length>0,"You must provide a non-empty routes array to createRouter");let Ge;if(oe.mapRouteProperties)Ge=oe.mapRouteProperties;else if(oe.detectErrorBoundary){let vt=oe.detectErrorBoundary;Ge=r(wt=>({hasErrorBoundary:vt(wt)}),"mapRouteProperties")}else Ge=et;let Ct={},ht=T(oe.routes,Ge,void 0,Ct),Kt,$t=oe.basename||"/",on=p({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},oe.future),en=null,gn=new Set,vn=null,Cn=null,jn=null,Bn=oe.hydrationData!=null,wn=I(ht,oe.history.location,$t),hn=null;if(wn==null){let vt=Gn(404,{pathname:oe.history.location.pathname}),{matches:wt,route:Jt}=tn(ht);wn=wt,hn={[Jt.id]:vt}}let ci,Ki=wn.some(vt=>vt.route.lazy),ar=wn.some(vt=>vt.route.loader);if(Ki)ci=!1;else if(!ar)ci=!0;else if(on.v7_partialHydration){let vt=oe.hydrationData?oe.hydrationData.loaderData:null,wt=oe.hydrationData?oe.hydrationData.errors:null;ci=wn.every(Jt=>Jt.route.loader&&Jt.route.loader.hydrate!==!0&&(vt&&vt[Jt.route.id]!==void 0||wt&&wt[Jt.route.id]!==void 0))}else ci=oe.hydrationData!=null;let Tr,Bt={historyAction:oe.history.action,location:oe.history.location,matches:wn,initialized:ci,navigation:st,restoreScrollPosition:oe.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:oe.hydrationData&&oe.hydrationData.loaderData||{},actionData:oe.hydrationData&&oe.hydrationData.actionData||null,errors:oe.hydrationData&&oe.hydrationData.errors||hn,fetchers:new Map,blockers:new Map},dr=m.Pop,cr=!1,Xi,Xr=!1,wo=new Map,Mr=null,go=!1,Oo=!1,ns=[],fs=[],Hr=new Map,gs=0,Ws=-1,Ss=new Map,ls=new Set,As=new Map,vs=new Map,Wo=new Set,Xo=new Map,zo=new Map,zs=!1;function Ra(){if(en=oe.history.listen(vt=>{let{action:wt,location:Jt,delta:_n}=vt;if(zs){zs=!1;return}n(zo.size===0||_n!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Yn=Gi({currentLocation:Bt.location,nextLocation:Jt,historyAction:wt});if(Yn&&_n!=null){zs=!0,oe.history.go(_n*-1),Ei(Yn,{state:"blocked",location:Jt,proceed(){Ei(Yn,{state:"proceeding",proceed:void 0,reset:void 0,location:Jt}),oe.history.go(_n)},reset(){let Ui=new Map(Bt.blockers);Ui.set(Yn,It),mi({blockers:Ui})}});return}return Os(wt,Jt)}),Ce){Rt(fe,wo);let vt=r(()=>Qt(fe,wo),"_saveAppliedTransitions");fe.addEventListener("pagehide",vt),Mr=r(()=>fe.removeEventListener("pagehide",vt),"removePageHideEventListener")}return Bt.initialized||Os(m.Pop,Bt.location,{initialHydration:!0}),Tr}r(Ra,"initialize");function Gs(){en&&en(),Mr&&Mr(),gn.clear(),Xi&&Xi.abort(),Bt.fetchers.forEach((vt,wt)=>qe(wt)),Bt.blockers.forEach((vt,wt)=>gi(wt))}r(Gs,"dispose");function Go(vt){return gn.add(vt),()=>gn.delete(vt)}r(Go,"subscribe");function mi(vt,wt){wt===void 0&&(wt={}),Bt=p({},Bt,vt);let Jt=[],_n=[];on.v7_fetcherPersist&&Bt.fetchers.forEach((Yn,Ui)=>{Yn.state==="idle"&&(Wo.has(Ui)?_n.push(Ui):Jt.push(Ui))}),[...gn].forEach(Yn=>Yn(Bt,{deletedFetchers:_n,unstable_viewTransitionOpts:wt.viewTransitionOpts,unstable_flushSync:wt.flushSync===!0})),on.v7_fetcherPersist&&(Jt.forEach(Yn=>Bt.fetchers.delete(Yn)),_n.forEach(Yn=>qe(Yn)))}r(mi,"updateState");function ys(vt,wt,Jt){var _n,Yn;let{flushSync:Ui}=Jt===void 0?{}:Jt,Oi=Bt.actionData!=null&&Bt.navigation.formMethod!=null&&$i(Bt.navigation.formMethod)&&Bt.navigation.state==="loading"&&((_n=vt.state)==null?void 0:_n._isRedirect)!==!0,Ti;wt.actionData?Object.keys(wt.actionData).length>0?Ti=wt.actionData:Ti=null:Oi?Ti=Bt.actionData:Ti=null;let Fi=wt.loaderData?Vn(Bt.loaderData,wt.loaderData,wt.matches||[],wt.errors):Bt.loaderData,ur=Bt.blockers;ur.size>0&&(ur=new Map(ur),ur.forEach((eo,Fo)=>ur.set(Fo,It)));let To=cr===!0||Bt.navigation.formMethod!=null&&$i(Bt.navigation.formMethod)&&((Yn=vt.state)==null?void 0:Yn._isRedirect)!==!0;Kt&&(ht=Kt,Kt=void 0),go||dr===m.Pop||(dr===m.Push?oe.history.push(vt,vt.state):dr===m.Replace&&oe.history.replace(vt,vt.state));let mr;if(dr===m.Pop){let eo=wo.get(Bt.location.pathname);eo&&eo.has(vt.pathname)?mr={currentLocation:Bt.location,nextLocation:vt}:wo.has(vt.pathname)&&(mr={currentLocation:vt,nextLocation:Bt.location})}else if(Xr){let eo=wo.get(Bt.location.pathname);eo?eo.add(vt.pathname):(eo=new Set([vt.pathname]),wo.set(Bt.location.pathname,eo)),mr={currentLocation:Bt.location,nextLocation:vt}}mi(p({},wt,{actionData:Ti,loaderData:Fi,historyAction:dr,location:vt,initialized:!0,navigation:st,revalidation:"idle",restoreScrollPosition:Wn(vt,wt.matches||Bt.matches),preventScrollReset:To,blockers:ur}),{viewTransitionOpts:mr,flushSync:Ui===!0}),dr=m.Pop,cr=!1,Xr=!1,go=!1,Oo=!1,ns=[],fs=[]}r(ys,"completeNavigation");async function yi(vt,wt){if(typeof vt=="number"){oe.history.go(vt);return}let Jt=we(Bt.location,Bt.matches,$t,on.v7_prependBasename,vt,on.v7_relativeSplatPath,wt==null?void 0:wt.fromRouteId,wt==null?void 0:wt.relative),{path:_n,submission:Yn,error:Ui}=Ue(on.v7_normalizeFormMethod,!1,Jt,wt),Oi=Bt.location,Ti=g(Bt.location,_n,wt&&wt.state);Ti=p({},Ti,oe.history.encodeLocation(Ti));let Fi=wt&&wt.replace!=null?wt.replace:void 0,ur=m.Push;Fi===!0?ur=m.Replace:Fi===!1||Yn!=null&&$i(Yn.formMethod)&&Yn.formAction===Bt.location.pathname+Bt.location.search&&(ur=m.Replace);let To=wt&&"preventScrollReset"in wt?wt.preventScrollReset===!0:void 0,mr=(wt&&wt.unstable_flushSync)===!0,eo=Gi({currentLocation:Oi,nextLocation:Ti,historyAction:ur});if(eo){Ei(eo,{state:"blocked",location:Ti,proceed(){Ei(eo,{state:"proceeding",proceed:void 0,reset:void 0,location:Ti}),yi(vt,wt)},reset(){let Fo=new Map(Bt.blockers);Fo.set(eo,It),mi({blockers:Fo})}});return}return await Os(ur,Ti,{submission:Yn,pendingError:Ui,preventScrollReset:To,replace:wt&&wt.replace,enableViewTransition:wt&&wt.unstable_viewTransition,flushSync:mr})}r(yi,"navigate");function ea(){if(me(),mi({revalidation:"loading"}),Bt.navigation.state!=="submitting"){if(Bt.navigation.state==="idle"){Os(Bt.historyAction,Bt.location,{startUninterruptedRevalidation:!0});return}Os(dr||Bt.historyAction,Bt.navigation.location,{overrideNavigation:Bt.navigation})}}r(ea,"revalidate");async function Os(vt,wt,Jt){Xi&&Xi.abort(),Xi=null,dr=vt,go=(Jt&&Jt.startUninterruptedRevalidation)===!0,Ji(Bt.location,Bt.matches),cr=(Jt&&Jt.preventScrollReset)===!0,Xr=(Jt&&Jt.enableViewTransition)===!0;let _n=Kt||ht,Yn=Jt&&Jt.overrideNavigation,Ui=I(_n,wt,$t),Oi=(Jt&&Jt.flushSync)===!0;if(!Ui){let Fo=Gn(404,{pathname:wt.pathname}),{matches:rs,route:xo}=tn(_n);qi(),ys(wt,{matches:rs,loaderData:{},errors:{[xo.id]:Fo}},{flushSync:Oi});return}if(Bt.initialized&&!Oo&&ln(Bt.location,wt)&&!(Jt&&Jt.submission&&$i(Jt.submission.formMethod))){ys(wt,{matches:Ui},{flushSync:Oi});return}Xi=new AbortController;let Ti=Ye(oe.history,wt,Xi.signal,Jt&&Jt.submission),Fi,ur;if(Jt&&Jt.pendingError)ur={[kn(Ui).route.id]:Jt.pendingError};else if(Jt&&Jt.submission&&$i(Jt.submission.formMethod)){let Fo=await Ca(Ti,wt,Jt.submission,Ui,{replace:Jt.replace,flushSync:Oi});if(Fo.shortCircuited)return;Fi=Fo.pendingActionData,ur=Fo.pendingActionError,Yn=_i(wt,Jt.submission),Oi=!1,Ti=new Request(Ti.url,{signal:Ti.signal})}let{shortCircuited:To,loaderData:mr,errors:eo}=await te(Ti,wt,Ui,Yn,Jt&&Jt.submission,Jt&&Jt.fetcherSubmission,Jt&&Jt.replace,Jt&&Jt.initialHydration===!0,Oi,Fi,ur);To||(Xi=null,ys(wt,p({matches:Ui},Fi?{actionData:Fi}:{},{loaderData:mr,errors:eo})))}r(Os,"startNavigation");async function Ca(vt,wt,Jt,_n,Yn){Yn===void 0&&(Yn={}),me();let Ui=Ci(wt,Jt);mi({navigation:Ui},{flushSync:Yn.flushSync===!0});let Oi,Ti=Vi(_n,wt);if(!Ti.route.action&&!Ti.route.lazy)Oi={type:_.error,error:Gn(405,{method:vt.method,pathname:wt.pathname,routeId:Ti.route.id})};else if(Oi=await Ae("action",vt,Ti,_n,Ct,Ge,$t,on.v7_relativeSplatPath),vt.signal.aborted)return{shortCircuited:!0};if(Hn(Oi)){let Fi;return Yn&&Yn.replace!=null?Fi=Yn.replace:Fi=Oi.location===Bt.location.pathname+Bt.location.search,await Y(Bt,Oi,{submission:Jt,replace:Fi}),{shortCircuited:!0}}if(Fn(Oi)){let Fi=kn(_n,Ti.route.id);return(Yn&&Yn.replace)!==!0&&(dr=m.Push),{pendingActionData:{},pendingActionError:{[Fi.route.id]:Oi.error}}}if(jt(Oi))throw Gn(400,{type:"defer-action"});return{pendingActionData:{[Ti.route.id]:Oi.data}}}r(Ca,"handleAction");async function te(vt,wt,Jt,_n,Yn,Ui,Oi,Ti,Fi,ur,To){let mr=_n||_i(wt,Yn),eo=Yn||Ui||Nr(mr),Fo=Kt||ht,[rs,xo]=Oe(oe.history,Bt,Jt,eo,wt,on.v7_partialHydration&&Ti===!0,Oo,ns,fs,Wo,As,ls,Fo,$t,ur,To);if(qi(xr=>!(Jt&&Jt.some(Kr=>Kr.route.id===xr))||rs&&rs.some(Kr=>Kr.route.id===xr)),Ws=++gs,rs.length===0&&xo.length===0){let xr=mn();return ys(wt,p({matches:Jt,loaderData:{},errors:To||null},ur?{actionData:ur}:{},xr?{fetchers:new Map(Bt.fetchers)}:{}),{flushSync:Fi}),{shortCircuited:!0}}if(!go&&(!on.v7_partialHydration||!Ti)){xo.forEach(Kr=>{let Do=Bt.fetchers.get(Kr.key),$s=N(void 0,Do?Do.data:void 0);Bt.fetchers.set(Kr.key,$s)});let xr=ur||Bt.actionData;mi(p({navigation:mr},xr?Object.keys(xr).length===0?{actionData:null}:{actionData:xr}:{},xo.length>0?{fetchers:new Map(Bt.fetchers)}:{}),{flushSync:Fi})}xo.forEach(xr=>{Hr.has(xr.key)&&at(xr.key),xr.controller&&Hr.set(xr.key,xr.controller)});let So=r(()=>xo.forEach(xr=>at(xr.key)),"abortPendingFetchRevalidations");Xi&&Xi.signal.addEventListener("abort",So);let{results:js,loaderResults:ta,fetcherResults:Ds}=await pe(Bt.matches,Jt,rs,xo,vt);if(vt.signal.aborted)return{shortCircuited:!0};Xi&&Xi.signal.removeEventListener("abort",So),xo.forEach(xr=>Hr.delete(xr.key));let Ns=Si(js);if(Ns){if(Ns.idx>=rs.length){let xr=xo[Ns.idx-rs.length].key;ls.add(xr)}return await Y(Bt,Ns.result,{replace:Oi}),{shortCircuited:!0}}let{loaderData:ua,errors:na}=$n(Bt,Jt,rs,ta,To,xo,Ds,Xo);Xo.forEach((xr,Kr)=>{xr.subscribe(Do=>{(Do||xr.done)&&Xo.delete(Kr)})}),on.v7_partialHydration&&Ti&&Bt.errors&&Object.entries(Bt.errors).filter(xr=>{let[Kr]=xr;return!rs.some(Do=>Do.route.id===Kr)}).forEach(xr=>{let[Kr,Do]=xr;na=Object.assign(na||{},{[Kr]:Do})});let Ma=mn(),ia=On(Ws),os=Ma||ia||xo.length>0;return p({loaderData:ua,errors:na},os?{fetchers:new Map(Bt.fetchers)}:{})}r(te,"handleLoaders");function ie(vt,wt,Jt,_n){if(Ne)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Hr.has(vt)&&at(vt);let Yn=(_n&&_n.unstable_flushSync)===!0,Ui=Kt||ht,Oi=we(Bt.location,Bt.matches,$t,on.v7_prependBasename,Jt,on.v7_relativeSplatPath,wt,_n==null?void 0:_n.relative),Ti=I(Ui,Oi,$t);if(!Ti){ze(vt,wt,Gn(404,{pathname:Oi}),{flushSync:Yn});return}let{path:Fi,submission:ur,error:To}=Ue(on.v7_normalizeFormMethod,!0,Oi,_n);if(To){ze(vt,wt,To,{flushSync:Yn});return}let mr=Vi(Ti,Fi);if(cr=(_n&&_n.preventScrollReset)===!0,ur&&$i(ur.formMethod)){$(vt,wt,Fi,mr,Ti,Yn,ur);return}As.set(vt,{routeId:wt,path:Fi}),P(vt,wt,Fi,mr,Ti,Yn,ur)}r(ie,"fetch");async function $(vt,wt,Jt,_n,Yn,Ui,Oi){if(me(),As.delete(vt),!_n.route.action&&!_n.route.lazy){let Kr=Gn(405,{method:Oi.formMethod,pathname:Jt,routeId:wt});ze(vt,wt,Kr,{flushSync:Ui});return}let Ti=Bt.fetchers.get(vt);De(vt,he(Oi,Ti),{flushSync:Ui});let Fi=new AbortController,ur=Ye(oe.history,Jt,Fi.signal,Oi);Hr.set(vt,Fi);let To=gs,mr=await Ae("action",ur,_n,Yn,Ct,Ge,$t,on.v7_relativeSplatPath);if(ur.signal.aborted){Hr.get(vt)===Fi&&Hr.delete(vt);return}if(on.v7_fetcherPersist&&Wo.has(vt)){if(Hn(mr)||Fn(mr)){De(vt,je(void 0));return}}else{if(Hn(mr))if(Hr.delete(vt),Ws>To){De(vt,je(void 0));return}else return ls.add(vt),De(vt,N(Oi)),Y(Bt,mr,{fetcherSubmission:Oi});if(Fn(mr)){ze(vt,wt,mr.error);return}}if(jt(mr))throw Gn(400,{type:"defer-action"});let eo=Bt.navigation.location||Bt.location,Fo=Ye(oe.history,eo,Fi.signal),rs=Kt||ht,xo=Bt.navigation.state!=="idle"?I(rs,Bt.navigation.location,$t):Bt.matches;t(xo,"Didn't find any matches after fetcher action");let So=++gs;Ss.set(vt,So);let js=N(Oi,mr.data);Bt.fetchers.set(vt,js);let[ta,Ds]=Oe(oe.history,Bt,xo,Oi,eo,!1,Oo,ns,fs,Wo,As,ls,rs,$t,{[_n.route.id]:mr.data},void 0);Ds.filter(Kr=>Kr.key!==vt).forEach(Kr=>{let Do=Kr.key,$s=Bt.fetchers.get(Do),_s=N(void 0,$s?$s.data:void 0);Bt.fetchers.set(Do,_s),Hr.has(Do)&&at(Do),Kr.controller&&Hr.set(Do,Kr.controller)}),mi({fetchers:new Map(Bt.fetchers)});let Ns=r(()=>Ds.forEach(Kr=>at(Kr.key)),"abortPendingFetchRevalidations");Fi.signal.addEventListener("abort",Ns);let{results:ua,loaderResults:na,fetcherResults:Ma}=await pe(Bt.matches,xo,ta,Ds,Fo);if(Fi.signal.aborted)return;Fi.signal.removeEventListener("abort",Ns),Ss.delete(vt),Hr.delete(vt),Ds.forEach(Kr=>Hr.delete(Kr.key));let ia=Si(ua);if(ia){if(ia.idx>=ta.length){let Kr=Ds[ia.idx-ta.length].key;ls.add(Kr)}return Y(Bt,ia.result)}let{loaderData:os,errors:xr}=$n(Bt,Bt.matches,ta,na,void 0,Ds,Ma,Xo);if(Bt.fetchers.has(vt)){let Kr=je(mr.data);Bt.fetchers.set(vt,Kr)}On(So),Bt.navigation.state==="loading"&&So>Ws?(t(dr,"Expected pending action"),Xi&&Xi.abort(),ys(Bt.navigation.location,{matches:xo,loaderData:os,errors:xr,fetchers:new Map(Bt.fetchers)})):(mi({errors:xr,loaderData:Vn(Bt.loaderData,os,xo,xr),fetchers:new Map(Bt.fetchers)}),Oo=!1)}r($,"handleFetcherAction");async function P(vt,wt,Jt,_n,Yn,Ui,Oi){let Ti=Bt.fetchers.get(vt);De(vt,N(Oi,Ti?Ti.data:void 0),{flushSync:Ui});let Fi=new AbortController,ur=Ye(oe.history,Jt,Fi.signal);Hr.set(vt,Fi);let To=gs,mr=await Ae("loader",ur,_n,Yn,Ct,Ge,$t,on.v7_relativeSplatPath);if(jt(mr)&&(mr=await Ai(mr,ur.signal,!0)||mr),Hr.get(vt)===Fi&&Hr.delete(vt),!ur.signal.aborted){if(Wo.has(vt)){De(vt,je(void 0));return}if(Hn(mr))if(Ws>To){De(vt,je(void 0));return}else{ls.add(vt),await Y(Bt,mr);return}if(Fn(mr)){ze(vt,wt,mr.error);return}t(!jt(mr),"Unhandled fetcher deferred data"),De(vt,je(mr.data))}}r(P,"handleFetcherLoader");async function Y(vt,wt,Jt){let{submission:_n,fetcherSubmission:Yn,replace:Ui}=Jt===void 0?{}:Jt;wt.revalidate&&(Oo=!0);let Oi=g(vt.location,wt.location,{_isRedirect:!0});if(t(Oi,"Expected a location on the redirect navigation"),Ce){let eo=!1;if(wt.reloadDocument)eo=!0;else if(ve.test(wt.location)){const Fo=oe.history.createURL(wt.location);eo=Fo.origin!==fe.location.origin||Je(Fo.pathname,$t)==null}if(eo){Ui?fe.location.replace(wt.location):fe.location.assign(wt.location);return}}Xi=null;let Ti=Ui===!0?m.Replace:m.Push,{formMethod:Fi,formAction:ur,formEncType:To}=vt.navigation;!_n&&!Yn&&Fi&&ur&&To&&(_n=Nr(vt.navigation));let mr=_n||Yn;if(nt.has(wt.status)&&mr&&$i(mr.formMethod))await Os(Ti,Oi,{submission:p({},mr,{formAction:wt.location}),preventScrollReset:cr});else{let eo=_i(Oi,_n);await Os(Ti,Oi,{overrideNavigation:eo,fetcherSubmission:Yn,preventScrollReset:cr})}}r(Y,"startRedirectNavigation");async function pe(vt,wt,Jt,_n,Yn){let Ui=await Promise.all([...Jt.map(Fi=>Ae("loader",Yn,Fi,wt,Ct,Ge,$t,on.v7_relativeSplatPath)),..._n.map(Fi=>Fi.matches&&Fi.match&&Fi.controller?Ae("loader",Ye(oe.history,Fi.path,Fi.controller.signal),Fi.match,Fi.matches,Ct,Ge,$t,on.v7_relativeSplatPath):{type:_.error,error:Gn(404,{pathname:Fi.path})})]),Oi=Ui.slice(0,Jt.length),Ti=Ui.slice(Jt.length);return await Promise.all([sr(vt,Jt,Oi,Oi.map(()=>Yn.signal),!1,Bt.loaderData),sr(vt,_n.map(Fi=>Fi.match),Ti,_n.map(Fi=>Fi.controller?Fi.controller.signal:null),!0)]),{results:Ui,loaderResults:Oi,fetcherResults:Ti}}r(pe,"callLoadersAndMaybeResolveData");function me(){Oo=!0,ns.push(...qi()),As.forEach((vt,wt)=>{Hr.has(wt)&&(fs.push(wt),at(wt))})}r(me,"interruptActiveLoads");function De(vt,wt,Jt){Jt===void 0&&(Jt={}),Bt.fetchers.set(vt,wt),mi({fetchers:new Map(Bt.fetchers)},{flushSync:(Jt&&Jt.flushSync)===!0})}r(De,"updateFetcherState");function ze(vt,wt,Jt,_n){_n===void 0&&(_n={});let Yn=kn(Bt.matches,wt);qe(vt),mi({errors:{[Yn.route.id]:Jt},fetchers:new Map(Bt.fetchers)},{flushSync:(_n&&_n.flushSync)===!0})}r(ze,"setFetcherError");function gt(vt){return on.v7_fetcherPersist&&(vs.set(vt,(vs.get(vt)||0)+1),Wo.has(vt)&&Wo.delete(vt)),Bt.fetchers.get(vt)||pt}r(gt,"getFetcher");function qe(vt){let wt=Bt.fetchers.get(vt);Hr.has(vt)&&!(wt&&wt.state==="loading"&&Ss.has(vt))&&at(vt),As.delete(vt),Ss.delete(vt),ls.delete(vt),Wo.delete(vt),Bt.fetchers.delete(vt)}r(qe,"deleteFetcher");function mt(vt){if(on.v7_fetcherPersist){let wt=(vs.get(vt)||0)-1;wt<=0?(vs.delete(vt),Wo.add(vt)):vs.set(vt,wt)}else qe(vt);mi({fetchers:new Map(Bt.fetchers)})}r(mt,"deleteFetcherAndUpdateState");function at(vt){let wt=Hr.get(vt);t(wt,"Expected fetch controller: "+vt),wt.abort(),Hr.delete(vt)}r(at,"abortFetcher");function qt(vt){for(let wt of vt){let Jt=gt(wt),_n=je(Jt.data);Bt.fetchers.set(wt,_n)}}r(qt,"markFetchersDone");function mn(){let vt=[],wt=!1;for(let Jt of ls){let _n=Bt.fetchers.get(Jt);t(_n,"Expected fetcher: "+Jt),_n.state==="loading"&&(ls.delete(Jt),vt.push(Jt),wt=!0)}return qt(vt),wt}r(mn,"markFetchRedirectsDone");function On(vt){let wt=[];for(let[Jt,_n]of Ss)if(_n<vt){let Yn=Bt.fetchers.get(Jt);t(Yn,"Expected fetcher: "+Jt),Yn.state==="loading"&&(at(Jt),Ss.delete(Jt),wt.push(Jt))}return qt(wt),wt.length>0}r(On,"abortStaleFetchLoads");function ai(vt,wt){let Jt=Bt.blockers.get(vt)||It;return zo.get(vt)!==wt&&zo.set(vt,wt),Jt}r(ai,"getBlocker");function gi(vt){Bt.blockers.delete(vt),zo.delete(vt)}r(gi,"deleteBlocker");function Ei(vt,wt){let Jt=Bt.blockers.get(vt)||It;t(Jt.state==="unblocked"&&wt.state==="blocked"||Jt.state==="blocked"&&wt.state==="blocked"||Jt.state==="blocked"&&wt.state==="proceeding"||Jt.state==="blocked"&&wt.state==="unblocked"||Jt.state==="proceeding"&&wt.state==="unblocked","Invalid blocker state transition: "+Jt.state+" -> "+wt.state);let _n=new Map(Bt.blockers);_n.set(vt,wt),mi({blockers:_n})}r(Ei,"updateBlocker");function Gi(vt){let{currentLocation:wt,nextLocation:Jt,historyAction:_n}=vt;if(zo.size===0)return;zo.size>1&&n(!1,"A router only supports one blocker at a time");let Yn=Array.from(zo.entries()),[Ui,Oi]=Yn[Yn.length-1],Ti=Bt.blockers.get(Ui);if(!(Ti&&Ti.state==="proceeding")&&Oi({currentLocation:wt,nextLocation:Jt,historyAction:_n}))return Ui}r(Gi,"shouldBlockNavigation");function qi(vt){let wt=[];return Xo.forEach((Jt,_n)=>{(!vt||vt(_n))&&(Jt.cancel(),wt.push(_n),Xo.delete(_n))}),wt}r(qi,"cancelActiveDeferreds");function rr(vt,wt,Jt){if(vn=vt,jn=wt,Cn=Jt||null,!Bn&&Bt.navigation===st){Bn=!0;let _n=Wn(Bt.location,Bt.matches);_n!=null&&mi({restoreScrollPosition:_n})}return()=>{vn=null,jn=null,Cn=null}}r(rr,"enableScrollRestoration");function Ir(vt,wt){return Cn&&Cn(vt,wt.map(_n=>O(_n,Bt.loaderData)))||vt.key}r(Ir,"getScrollKey");function Ji(vt,wt){if(vn&&jn){let Jt=Ir(vt,wt);vn[Jt]=jn()}}r(Ji,"saveScrollPosition");function Wn(vt,wt){if(vn){let Jt=Ir(vt,wt),_n=vn[Jt];if(typeof _n=="number")return _n}return null}r(Wn,"getSavedScrollPosition");function er(vt){Ct={},Kt=T(vt,Ge,void 0,Ct)}return r(er,"_internalSetRoutes"),Tr={get basename(){return $t},get future(){return on},get state(){return Bt},get routes(){return ht},get window(){return fe},initialize:Ra,subscribe:Go,enableScrollRestoration:rr,navigate:yi,fetch:ie,revalidate:ea,createHref:vt=>oe.history.createHref(vt),encodeLocation:vt=>oe.history.encodeLocation(vt),getFetcher:gt,deleteFetcher:mt,dispose:Gs,getBlocker:ai,deleteBlocker:gi,_internalFetchControllers:Hr,_internalActiveDeferreds:Xo,_internalSetRoutes:er},Tr}r(ne,"router_createRouter");const Me=Symbol("deferred");function Re(oe,fe){t(oe.length>0,"You must provide a non-empty routes array to createStaticHandler");let Ce={},Ne=(fe?fe.basename:null)||"/",Ge;if(fe!=null&&fe.mapRouteProperties)Ge=fe.mapRouteProperties;else if(fe!=null&&fe.detectErrorBoundary){let vn=fe.detectErrorBoundary;Ge=r(Cn=>({hasErrorBoundary:vn(Cn)}),"mapRouteProperties")}else Ge=et;let Ct=p({v7_relativeSplatPath:!1,v7_throwAbortReason:!1},fe?fe.future:null),ht=T(oe,Ge,void 0,Ce);async function Kt(vn,Cn){let{requestContext:jn}=Cn===void 0?{}:Cn,Bn=new URL(vn.url),wn=vn.method,hn=g("",S(Bn),null,"default"),ci=I(ht,hn,Ne);if(!ji(wn)&&wn!=="HEAD"){let ar=Gn(405,{method:wn}),{matches:Tr,route:Bt}=tn(ht);return{basename:Ne,location:hn,matches:Tr,loaderData:{},actionData:null,errors:{[Bt.id]:ar},statusCode:ar.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}else if(!ci){let ar=Gn(404,{pathname:hn.pathname}),{matches:Tr,route:Bt}=tn(ht);return{basename:Ne,location:hn,matches:Tr,loaderData:{},actionData:null,errors:{[Bt.id]:ar},statusCode:ar.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let Ki=await on(vn,hn,ci,jn);return Pi(Ki)?Ki:p({location:hn,basename:Ne},Ki)}r(Kt,"query");async function $t(vn,Cn){let{routeId:jn,requestContext:Bn}=Cn===void 0?{}:Cn,wn=new URL(vn.url),hn=vn.method,ci=g("",S(wn),null,"default"),Ki=I(ht,ci,Ne);if(!ji(hn)&&hn!=="HEAD"&&hn!=="OPTIONS")throw Gn(405,{method:hn});if(!Ki)throw Gn(404,{pathname:ci.pathname});let ar=jn?Ki.find(cr=>cr.route.id===jn):Vi(Ki,ci);if(jn&&!ar)throw Gn(403,{pathname:ci.pathname,routeId:jn});if(!ar)throw Gn(404,{pathname:ci.pathname});let Tr=await on(vn,ci,Ki,Bn,ar);if(Pi(Tr))return Tr;let Bt=Tr.errors?Object.values(Tr.errors)[0]:void 0;if(Bt!==void 0)throw Bt;if(Tr.actionData)return Object.values(Tr.actionData)[0];if(Tr.loaderData){var dr;let cr=Object.values(Tr.loaderData)[0];return(dr=Tr.activeDeferreds)!=null&&dr[ar.route.id]&&(cr[Me]=Tr.activeDeferreds[ar.route.id]),cr}}r($t,"queryRoute");async function on(vn,Cn,jn,Bn,wn){t(vn.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if($i(vn.method.toLowerCase()))return await en(vn,jn,wn||Vi(jn,Cn),Bn,wn!=null);let hn=await gn(vn,jn,Bn,wn);return Pi(hn)?hn:p({},hn,{actionData:null,actionHeaders:{}})}catch(hn){if(Kn(hn)){if(hn.type===_.error)throw hn.response;return hn.response}if(ni(hn))return hn;throw hn}}r(on,"queryImpl");async function en(vn,Cn,jn,Bn,wn){let hn;if(!jn.route.action&&!jn.route.lazy){let ar=Gn(405,{method:vn.method,pathname:new URL(vn.url).pathname,routeId:jn.route.id});if(wn)throw ar;hn={type:_.error,error:ar}}else hn=await Ae("action",vn,jn,Cn,Ce,Ge,Ne,Ct.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:wn,requestContext:Bn}),vn.signal.aborted&&ot(vn,wn,Ct);if(Hn(hn))throw new Response(null,{status:hn.status,headers:{Location:hn.location}});if(jt(hn)){let ar=Gn(400,{type:"defer-action"});if(wn)throw ar;hn={type:_.error,error:ar}}if(wn){if(Fn(hn))throw hn.error;return{matches:[jn],loaderData:{},actionData:{[jn.route.id]:hn.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(Fn(hn)){let ar=kn(Cn,jn.route.id),Tr=await gn(vn,Cn,Bn,void 0,{[ar.route.id]:hn.error});return p({},Tr,{statusCode:oi(hn.error)?hn.error.status:500,actionData:null,actionHeaders:p({},hn.headers?{[jn.route.id]:hn.headers}:{})})}let ci=new Request(vn.url,{headers:vn.headers,redirect:vn.redirect,signal:vn.signal}),Ki=await gn(ci,Cn,Bn);return p({},Ki,hn.statusCode?{statusCode:hn.statusCode}:{},{actionData:{[jn.route.id]:hn.data},actionHeaders:p({},hn.headers?{[jn.route.id]:hn.headers}:{})})}r(en,"submit");async function gn(vn,Cn,jn,Bn,wn){let hn=Bn!=null;if(hn&&!(Bn!=null&&Bn.route.loader)&&!(Bn!=null&&Bn.route.lazy))throw Gn(400,{method:vn.method,pathname:new URL(vn.url).pathname,routeId:Bn==null?void 0:Bn.route.id});let Ki=(Bn?[Bn]:F(Cn,Object.keys(wn||{})[0])).filter(cr=>cr.route.loader||cr.route.lazy);if(Ki.length===0)return{matches:Cn,loaderData:Cn.reduce((cr,Xi)=>Object.assign(cr,{[Xi.route.id]:null}),{}),errors:wn||null,statusCode:200,loaderHeaders:{},activeDeferreds:null};let ar=await Promise.all([...Ki.map(cr=>Ae("loader",vn,cr,Cn,Ce,Ge,Ne,Ct.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:hn,requestContext:jn}))]);vn.signal.aborted&&ot(vn,hn,Ct);let Tr=new Map,Bt=Qn(Cn,Ki,ar,wn,Tr),dr=new Set(Ki.map(cr=>cr.route.id));return Cn.forEach(cr=>{dr.has(cr.route.id)||(Bt.loaderData[cr.route.id]=null)}),p({},Bt,{matches:Cn,activeDeferreds:Tr.size>0?Object.fromEntries(Tr.entries()):null})}return r(gn,"loadRouteData"),{dataRoutes:ht,query:Kt,queryRoute:$t}}r(Re,"createStaticHandler");function Ft(oe,fe,Ce){return p({},fe,{statusCode:oi(Ce)?Ce.status:500,errors:{[fe._deepestRenderedBoundaryId||oe[0].id]:Ce}})}r(Ft,"getStaticContextFromError");function ot(oe,fe,Ce){if(Ce.v7_throwAbortReason&&oe.signal.reason!==void 0)throw oe.signal.reason;let Ne=fe?"queryRoute":"query";throw new Error(Ne+"() call aborted: "+oe.method+" "+oe.url)}r(ot,"throwStaticHandlerAbortedError");function Tt(oe){return oe!=null&&("formData"in oe&&oe.formData!=null||"body"in oe&&oe.body!==void 0)}r(Tt,"isSubmissionNavigation");function we(oe,fe,Ce,Ne,Ge,Ct,ht,Kt){let $t,on;if(ht){$t=[];for(let gn of fe)if($t.push(gn),gn.route.id===ht){on=gn;break}}else $t=fe,on=fe[fe.length-1];let en=ct(Ge||".",He($t,Ct),Je(oe.pathname,Ce)||oe.pathname,Kt==="path");return Ge==null&&(en.search=oe.search,en.hash=oe.hash),(Ge==null||Ge===""||Ge===".")&&on&&on.route.index&&!Lr(en.search)&&(en.search=en.search?en.search.replace(/^\?/,"?index&"):"?index"),Ne&&Ce!=="/"&&(en.pathname=en.pathname==="/"?Ce:it([Ce,en.pathname])),S(en)}r(we,"normalizeTo");function Ue(oe,fe,Ce,Ne){if(!Ne||!Tt(Ne))return{path:Ce};if(Ne.formMethod&&!ji(Ne.formMethod))return{path:Ce,error:Gn(405,{method:Ne.formMethod})};let Ge=r(()=>({path:Ce,error:Gn(400,{type:"invalid-body"})}),"getInvalidBodyError"),Ct=Ne.formMethod||"get",ht=oe?Ct.toUpperCase():Ct.toLowerCase(),Kt=nr(Ce);if(Ne.body!==void 0){if(Ne.formEncType==="text/plain"){if(!$i(ht))return Ge();let vn=typeof Ne.body=="string"?Ne.body:Ne.body instanceof FormData||Ne.body instanceof URLSearchParams?Array.from(Ne.body.entries()).reduce((Cn,jn)=>{let[Bn,wn]=jn;return""+Cn+Bn+"="+wn+`
`},""):String(Ne.body);return{path:Ce,submission:{formMethod:ht,formAction:Kt,formEncType:Ne.formEncType,formData:void 0,json:void 0,text:vn}}}else if(Ne.formEncType==="application/json"){if(!$i(ht))return Ge();try{let vn=typeof Ne.body=="string"?JSON.parse(Ne.body):Ne.body;return{path:Ce,submission:{formMethod:ht,formAction:Kt,formEncType:Ne.formEncType,formData:void 0,json:vn,text:void 0}}}catch{return Ge()}}}t(typeof FormData=="function","FormData is not available in this environment");let $t,on;if(Ne.formData)$t=Ht(Ne.formData),on=Ne.formData;else if(Ne.body instanceof FormData)$t=Ht(Ne.body),on=Ne.body;else if(Ne.body instanceof URLSearchParams)$t=Ne.body,on=Mt($t);else if(Ne.body==null)$t=new URLSearchParams,on=new FormData;else try{$t=new URLSearchParams(Ne.body),on=Mt($t)}catch{return Ge()}let en={formMethod:ht,formAction:Kt,formEncType:Ne&&Ne.formEncType||"application/x-www-form-urlencoded",formData:on,json:void 0,text:void 0};if($i(en.formMethod))return{path:Ce,submission:en};let gn=c(Ce);return fe&&gn.search&&Lr(gn.search)&&$t.append("index",""),gn.search="?"+$t,{path:S(gn),submission:en}}r(Ue,"normalizeNavigateOptions");function F(oe,fe){let Ce=oe;if(fe){let Ne=oe.findIndex(Ge=>Ge.route.id===fe);Ne>=0&&(Ce=oe.slice(0,Ne))}return Ce}r(F,"getLoaderMatchesUntilBoundary");function Oe(oe,fe,Ce,Ne,Ge,Ct,ht,Kt,$t,on,en,gn,vn,Cn,jn,Bn){let wn=Bn?Object.values(Bn)[0]:jn?Object.values(jn)[0]:void 0,hn=oe.createURL(fe.location),ci=oe.createURL(Ge),Ki=Bn?Object.keys(Bn)[0]:void 0,Tr=F(Ce,Ki).filter((dr,cr)=>{let{route:Xi}=dr;if(Xi.lazy)return!0;if(Xi.loader==null)return!1;if(Ct)return Xi.loader.hydrate?!0:fe.loaderData[Xi.id]===void 0&&(!fe.errors||fe.errors[Xi.id]===void 0);if(se(fe.loaderData,fe.matches[cr],dr)||Kt.some(Mr=>Mr===dr.route.id))return!0;let Xr=fe.matches[cr],wo=dr;return X(dr,p({currentUrl:hn,currentParams:Xr.params,nextUrl:ci,nextParams:wo.params},Ne,{actionResult:wn,defaultShouldRevalidate:ht||hn.pathname+hn.search===ci.pathname+ci.search||hn.search!==ci.search||ue(Xr,wo)}))}),Bt=[];return en.forEach((dr,cr)=>{if(Ct||!Ce.some(go=>go.route.id===dr.routeId)||on.has(cr))return;let Xi=I(vn,dr.path,Cn);if(!Xi){Bt.push({key:cr,routeId:dr.routeId,path:dr.path,matches:null,match:null,controller:null});return}let Xr=fe.fetchers.get(cr),wo=Vi(Xi,dr.path),Mr=!1;gn.has(cr)?Mr=!1:$t.includes(cr)?Mr=!0:Xr&&Xr.state!=="idle"&&Xr.data===void 0?Mr=ht:Mr=X(wo,p({currentUrl:hn,currentParams:fe.matches[fe.matches.length-1].params,nextUrl:ci,nextParams:Ce[Ce.length-1].params},Ne,{actionResult:wn,defaultShouldRevalidate:ht})),Mr&&Bt.push({key:cr,routeId:dr.routeId,path:dr.path,matches:Xi,match:wo,controller:new AbortController})}),[Tr,Bt]}r(Oe,"getMatchesToLoad");function se(oe,fe,Ce){let Ne=!fe||Ce.route.id!==fe.route.id,Ge=oe[Ce.route.id]===void 0;return Ne||Ge}r(se,"isNewLoader");function ue(oe,fe){let Ce=oe.route.path;return oe.pathname!==fe.pathname||Ce!=null&&Ce.endsWith("*")&&oe.params["*"]!==fe.params["*"]}r(ue,"isNewRouteInstance");function X(oe,fe){if(oe.route.shouldRevalidate){let Ce=oe.route.shouldRevalidate(fe);if(typeof Ce=="boolean")return Ce}return fe.defaultShouldRevalidate}r(X,"shouldRevalidateLoader");async function lt(oe,fe,Ce){if(!oe.lazy)return;let Ne=await oe.lazy();if(!oe.lazy)return;let Ge=Ce[oe.id];t(Ge,"No route found in manifest");let Ct={};for(let ht in Ne){let $t=Ge[ht]!==void 0&&ht!=="hasErrorBoundary";n(!$t,'Route "'+Ge.id+'" has a static property "'+ht+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+ht+'" will be ignored.')),!$t&&!E.has(ht)&&(Ct[ht]=Ne[ht])}Object.assign(Ge,Ct),Object.assign(Ge,p({},fe(Ge),{lazy:void 0}))}r(lt,"loadLazyRouteModule");async function Ae(oe,fe,Ce,Ne,Ge,Ct,ht,Kt,$t){$t===void 0&&($t={});let on,en,gn,vn=r(Bn=>{let wn,hn=new Promise((ci,Ki)=>wn=Ki);return gn=r(()=>wn(),"onReject"),fe.signal.addEventListener("abort",gn),Promise.race([Bn({request:fe,params:Ce.params,context:$t.requestContext}),hn])},"runHandler");try{let Bn=Ce.route[oe];if(Ce.route.lazy)if(Bn){let wn,hn=await Promise.all([vn(Bn).catch(ci=>{wn=ci}),lt(Ce.route,Ct,Ge)]);if(wn)throw wn;en=hn[0]}else if(await lt(Ce.route,Ct,Ge),Bn=Ce.route[oe],Bn)en=await vn(Bn);else if(oe==="action"){let wn=new URL(fe.url),hn=wn.pathname+wn.search;throw Gn(405,{method:fe.method,pathname:hn,routeId:Ce.route.id})}else return{type:_.data,data:void 0};else if(Bn)en=await vn(Bn);else{let wn=new URL(fe.url),hn=wn.pathname+wn.search;throw Gn(404,{pathname:hn})}t(en!==void 0,"You defined "+(oe==="action"?"an action":"a loader")+" for route "+('"'+Ce.route.id+"\" but didn't return anything from your `"+oe+"` ")+"function. Please return a value or `null`.")}catch(Bn){on=_.error,en=Bn}finally{gn&&fe.signal.removeEventListener("abort",gn)}if(Pi(en)){let Bn=en.status;if(Xe.has(Bn)){let hn=en.headers.get("Location");if(t(hn,"Redirects returned/thrown from loaders/actions must have a Location header"),!ve.test(hn))hn=we(new URL(fe.url),Ne.slice(0,Ne.indexOf(Ce)+1),ht,!0,hn,Kt);else if(!$t.isStaticRequest){let ci=new URL(fe.url),Ki=hn.startsWith("//")?new URL(ci.protocol+hn):new URL(hn),ar=Je(Ki.pathname,ht)!=null;Ki.origin===ci.origin&&ar&&(hn=Ki.pathname+Ki.search+Ki.hash)}if($t.isStaticRequest)throw en.headers.set("Location",hn),en;return{type:_.redirect,status:Bn,location:hn,revalidate:en.headers.get("X-Remix-Revalidate")!==null,reloadDocument:en.headers.get("X-Remix-Reload-Document")!==null}}if($t.isRouteRequest)throw{type:on===_.error?_.error:_.data,response:en};let wn;try{let hn=en.headers.get("Content-Type");hn&&/\bapplication\/json\b/.test(hn)?en.body==null?wn=null:wn=await en.json():wn=await en.text()}catch(hn){return{type:_.error,error:hn}}return on===_.error?{type:on,error:new sn(Bn,en.statusText,wn),headers:en.headers}:{type:_.data,data:wn,statusCode:en.status,headers:en.headers}}if(on===_.error)return{type:on,error:en};if(wi(en)){var Cn,jn;return{type:_.deferred,deferredData:en,statusCode:(Cn=en.init)==null?void 0:Cn.status,headers:((jn=en.init)==null?void 0:jn.headers)&&new Headers(en.init.headers)}}return{type:_.data,data:en}}r(Ae,"callLoaderOrAction");function Ye(oe,fe,Ce,Ne){let Ge=oe.createURL(nr(fe)).toString(),Ct={signal:Ce};if(Ne&&$i(Ne.formMethod)){let{formMethod:ht,formEncType:Kt}=Ne;Ct.method=ht.toUpperCase(),Kt==="application/json"?(Ct.headers=new Headers({"Content-Type":Kt}),Ct.body=JSON.stringify(Ne.json)):Kt==="text/plain"?Ct.body=Ne.text:Kt==="application/x-www-form-urlencoded"&&Ne.formData?Ct.body=Ht(Ne.formData):Ct.body=Ne.formData}return new Request(Ge,Ct)}r(Ye,"createClientSideRequest");function Ht(oe){let fe=new URLSearchParams;for(let[Ce,Ne]of oe.entries())fe.append(Ce,typeof Ne=="string"?Ne:Ne.name);return fe}r(Ht,"convertFormDataToSearchParams");function Mt(oe){let fe=new FormData;for(let[Ce,Ne]of oe.entries())fe.append(Ce,Ne);return fe}r(Mt,"convertSearchParamsToFormData");function Qn(oe,fe,Ce,Ne,Ge){let Ct={},ht=null,Kt,$t=!1,on={};return Ce.forEach((en,gn)=>{let vn=fe[gn].route.id;if(t(!Hn(en),"Cannot handle redirect results in processLoaderData"),Fn(en)){let Cn=kn(oe,vn),jn=en.error;Ne&&(jn=Object.values(Ne)[0],Ne=void 0),ht=ht||{},ht[Cn.route.id]==null&&(ht[Cn.route.id]=jn),Ct[vn]=void 0,$t||($t=!0,Kt=oi(en.error)?en.error.status:500),en.headers&&(on[vn]=en.headers)}else jt(en)?(Ge.set(vn,en.deferredData),Ct[vn]=en.deferredData.data):Ct[vn]=en.data,en.statusCode!=null&&en.statusCode!==200&&!$t&&(Kt=en.statusCode),en.headers&&(on[vn]=en.headers)}),Ne&&(ht=Ne,Ct[Object.keys(Ne)[0]]=void 0),{loaderData:Ct,errors:ht,statusCode:Kt||200,loaderHeaders:on}}r(Qn,"processRouteLoaderData");function $n(oe,fe,Ce,Ne,Ge,Ct,ht,Kt){let{loaderData:$t,errors:on}=Qn(fe,Ce,Ne,Ge,Kt);for(let en=0;en<Ct.length;en++){let{key:gn,match:vn,controller:Cn}=Ct[en];t(ht!==void 0&&ht[en]!==void 0,"Did not find corresponding fetcher result");let jn=ht[en];if(!(Cn&&Cn.signal.aborted))if(Fn(jn)){let Bn=kn(oe.matches,vn==null?void 0:vn.route.id);on&&on[Bn.route.id]||(on=p({},on,{[Bn.route.id]:jn.error})),oe.fetchers.delete(gn)}else if(Hn(jn))t(!1,"Unhandled fetcher revalidation redirect");else if(jt(jn))t(!1,"Unhandled fetcher deferred data");else{let Bn=je(jn.data);oe.fetchers.set(gn,Bn)}}return{loaderData:$t,errors:on}}r($n,"processLoaderData");function Vn(oe,fe,Ce,Ne){let Ge=p({},fe);for(let Ct of Ce){let ht=Ct.route.id;if(fe.hasOwnProperty(ht)?fe[ht]!==void 0&&(Ge[ht]=fe[ht]):oe[ht]!==void 0&&Ct.route.loader&&(Ge[ht]=oe[ht]),Ne&&Ne.hasOwnProperty(ht))break}return Ge}r(Vn,"mergeLoaderData");function kn(oe,fe){return(fe?oe.slice(0,oe.findIndex(Ne=>Ne.route.id===fe)+1):[...oe]).reverse().find(Ne=>Ne.route.hasErrorBoundary===!0)||oe[0]}r(kn,"findNearestBoundary");function tn(oe){let fe=oe.length===1?oe[0]:oe.find(Ce=>Ce.index||!Ce.path||Ce.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:fe}],route:fe}}r(tn,"getShortCircuitMatches");function Gn(oe,fe){let{pathname:Ce,routeId:Ne,method:Ge,type:Ct}=fe===void 0?{}:fe,ht="Unknown Server Error",Kt="Unknown @remix-run/router error";return oe===400?(ht="Bad Request",Ge&&Ce&&Ne?Kt="You made a "+Ge+' request to "'+Ce+'" but '+('did not provide a `loader` for route "'+Ne+'", ')+"so there is no way to handle the request.":Ct==="defer-action"?Kt="defer() is not supported in actions":Ct==="invalid-body"&&(Kt="Unable to encode submission body")):oe===403?(ht="Forbidden",Kt='Route "'+Ne+'" does not match URL "'+Ce+'"'):oe===404?(ht="Not Found",Kt='No route matches URL "'+Ce+'"'):oe===405&&(ht="Method Not Allowed",Ge&&Ce&&Ne?Kt="You made a "+Ge.toUpperCase()+' request to "'+Ce+'" but '+('did not provide an `action` for route "'+Ne+'", ')+"so there is no way to handle the request.":Ge&&(Kt='Invalid request method "'+Ge.toUpperCase()+'"')),new sn(oe||500,ht,new Error(Kt),!0)}r(Gn,"getInternalRouterError");function Si(oe){for(let fe=oe.length-1;fe>=0;fe--){let Ce=oe[fe];if(Hn(Ce))return{result:Ce,idx:fe}}}r(Si,"findRedirect");function nr(oe){let fe=typeof oe=="string"?c(oe):oe;return S(p({},fe,{hash:""}))}r(nr,"stripHashFromPath");function ln(oe,fe){return oe.pathname!==fe.pathname||oe.search!==fe.search?!1:oe.hash===""?fe.hash!=="":oe.hash===fe.hash?!0:fe.hash!==""}r(ln,"isHashChangeOnly");function jt(oe){return oe.type===_.deferred}r(jt,"isDeferredResult");function Fn(oe){return oe.type===_.error}r(Fn,"isErrorResult");function Hn(oe){return(oe&&oe.type)===_.redirect}r(Hn,"isRedirectResult");function wi(oe){let fe=oe;return fe&&typeof fe=="object"&&typeof fe.data=="object"&&typeof fe.subscribe=="function"&&typeof fe.cancel=="function"&&typeof fe.resolveData=="function"}r(wi,"isDeferredData");function Pi(oe){return oe!=null&&typeof oe.status=="number"&&typeof oe.statusText=="string"&&typeof oe.headers=="object"&&typeof oe.body<"u"}r(Pi,"isResponse");function ni(oe){if(!Pi(oe))return!1;let fe=oe.status,Ce=oe.headers.get("Location");return fe>=300&&fe<=399&&Ce!=null}r(ni,"isRedirectResponse");function Kn(oe){return oe&&Pi(oe.response)&&(oe.type===_.data||oe.type===_.error)}r(Kn,"isQueryRouteResponse");function ji(oe){return J.has(oe.toLowerCase())}r(ji,"isValidMethod");function $i(oe){return cn.has(oe.toLowerCase())}r($i,"isMutationMethod");async function sr(oe,fe,Ce,Ne,Ge,Ct){for(let ht=0;ht<Ce.length;ht++){let Kt=Ce[ht],$t=fe[ht];if(!$t)continue;let on=oe.find(gn=>gn.route.id===$t.route.id),en=on!=null&&!ue(on,$t)&&(Ct&&Ct[$t.route.id])!==void 0;if(jt(Kt)&&(Ge||en)){let gn=Ne[ht];t(gn,"Expected an AbortSignal for revalidating fetcher deferred result"),await Ai(Kt,gn,Ge).then(vn=>{vn&&(Ce[ht]=vn||Ce[ht])})}}}r(sr,"resolveDeferredResults");async function Ai(oe,fe,Ce){if(Ce===void 0&&(Ce=!1),!await oe.deferredData.resolveData(fe)){if(Ce)try{return{type:_.data,data:oe.deferredData.unwrappedData}}catch(Ge){return{type:_.error,error:Ge}}return{type:_.data,data:oe.deferredData.data}}}r(Ai,"resolveDeferredData");function Lr(oe){return new URLSearchParams(oe).getAll("index").some(fe=>fe==="")}r(Lr,"hasNakedIndexQuery");function Vi(oe,fe){let Ce=typeof fe=="string"?c(fe).search:fe.search;if(oe[oe.length-1].route.index&&Lr(Ce||""))return oe[oe.length-1];let Ne=Ve(oe);return Ne[Ne.length-1]}r(Vi,"getTargetMatch");function Nr(oe){let{formMethod:fe,formAction:Ce,formEncType:Ne,text:Ge,formData:Ct,json:ht}=oe;if(!(!fe||!Ce||!Ne)){if(Ge!=null)return{formMethod:fe,formAction:Ce,formEncType:Ne,formData:void 0,json:void 0,text:Ge};if(Ct!=null)return{formMethod:fe,formAction:Ce,formEncType:Ne,formData:Ct,json:void 0,text:void 0};if(ht!==void 0)return{formMethod:fe,formAction:Ce,formEncType:Ne,formData:void 0,json:ht,text:void 0}}}r(Nr,"getSubmissionFromNavigation");function _i(oe,fe){return fe?{state:"loading",location:oe,formMethod:fe.formMethod,formAction:fe.formAction,formEncType:fe.formEncType,formData:fe.formData,json:fe.json,text:fe.text}:{state:"loading",location:oe,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}r(_i,"getLoadingNavigation");function Ci(oe,fe){return{state:"submitting",location:oe,formMethod:fe.formMethod,formAction:fe.formAction,formEncType:fe.formEncType,formData:fe.formData,json:fe.json,text:fe.text}}r(Ci,"getSubmittingNavigation");function N(oe,fe){return oe?{state:"loading",formMethod:oe.formMethod,formAction:oe.formAction,formEncType:oe.formEncType,formData:oe.formData,json:oe.json,text:oe.text,data:fe}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:fe}}r(N,"getLoadingFetcher");function he(oe,fe){return{state:"submitting",formMethod:oe.formMethod,formAction:oe.formAction,formEncType:oe.formEncType,formData:oe.formData,json:oe.json,text:oe.text,data:fe?fe.data:void 0}}r(he,"getSubmittingFetcher");function je(oe){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:oe}}r(je,"getDoneFetcher");function Rt(oe,fe){try{let Ce=oe.sessionStorage.getItem(G);if(Ce){let Ne=JSON.parse(Ce);for(let[Ge,Ct]of Object.entries(Ne||{}))Ct&&Array.isArray(Ct)&&fe.set(Ge,new Set(Ct||[]))}}catch{}}r(Rt,"restoreAppliedTransitions");function Qt(oe,fe){if(fe.size>0){let Ce={};for(let[Ne,Ge]of fe)Ce[Ne]=[...Ge];try{oe.sessionStorage.setItem(G,JSON.stringify(Ce))}catch(Ne){n(!1,"Failed to save applied view transitions in sessionStorage ("+Ne+").")}}}r(Qt,"persistAppliedTransitions");/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function An(){return An=Object.assign?Object.assign.bind():function(oe){for(var fe=1;fe<arguments.length;fe++){var Ce=arguments[fe];for(var Ne in Ce)Object.prototype.hasOwnProperty.call(Ce,Ne)&&(oe[Ne]=Ce[Ne])}return oe},An.apply(this,arguments)}r(An,"dist_extends");const qn=u.createContext(null),Pn=null,xn=u.createContext(null),Xn=u.createContext(null),li=u.createContext(null),Ri=u.createContext({outlet:null,matches:[],isDataRoute:!1}),zi=u.createContext(null);function gr(oe,fe){let{relative:Ce}=fe===void 0?{}:fe;Fr()||UNSAFE_invariant(!1);let{basename:Ne,navigator:Ge}=React.useContext(Xn),{hash:Ct,pathname:ht,search:Kt}=_e(oe,{relative:Ce}),$t=ht;return Ne!=="/"&&($t=ht==="/"?Ne:joinPaths([Ne,ht])),Ge.createHref({pathname:$t,search:Kt,hash:Ct})}r(gr,"useHref");function Fr(){return u.useContext(li)!=null}r(Fr,"useInRouterContext");function ri(){return Fr()||t(!1),u.useContext(li).location}r(ri,"useLocation");function Er(){return u.useContext(li).navigationType}r(Er,"useNavigationType");function Rr(oe){Fr()||UNSAFE_invariant(!1);let{pathname:fe}=ri();return React.useMemo(()=>matchPath(oe,fe),[fe,oe])}r(Rr,"useMatch");const ei=null;function hr(oe){u.useContext(Xn).static||u.useLayoutEffect(oe)}r(hr,"useIsomorphicLayoutEffect");function si(){let{isDataRoute:oe}=u.useContext(Ri);return oe?is():Eo()}r(si,"useNavigate");function Eo(){Fr()||t(!1);let oe=u.useContext(qn),{basename:fe,future:Ce,navigator:Ne}=u.useContext(Xn),{matches:Ge}=u.useContext(Ri),{pathname:Ct}=ri(),ht=JSON.stringify(He(Ge,Ce.v7_relativeSplatPath)),Kt=u.useRef(!1);return hr(()=>{Kt.current=!0}),u.useCallback(function(on,en){if(en===void 0&&(en={}),!Kt.current)return;if(typeof on=="number"){Ne.go(on);return}let gn=ct(on,JSON.parse(ht),Ct,en.relative==="path");oe==null&&fe!=="/"&&(gn.pathname=gn.pathname==="/"?fe:it([fe,gn.pathname])),(en.replace?Ne.replace:Ne.push)(gn,en.state,en)},[fe,Ne,ht,Ct,oe])}r(Eo,"useNavigateUnstable");const Jr=null;function fo(){return React.useContext(Jr)}r(fo,"useOutletContext");function ho(oe){let fe=React.useContext(Ri).outlet;return fe&&React.createElement(Jr.Provider,{value:oe},fe)}r(ho,"useOutlet");function de(){let{matches:oe}=u.useContext(Ri),fe=oe[oe.length-1];return fe?fe.params:{}}r(de,"useParams");function _e(oe,fe){let{relative:Ce}=fe===void 0?{}:fe,{future:Ne}=React.useContext(Xn),{matches:Ge}=React.useContext(Ri),{pathname:Ct}=ri(),ht=JSON.stringify(UNSAFE_getResolveToMatches(Ge,Ne.v7_relativeSplatPath));return React.useMemo(()=>resolveTo(oe,JSON.parse(ht),Ct,Ce==="path"),[oe,ht,Ct,Ce])}r(_e,"useResolvedPath");function Pe(oe,fe){return rt(oe,fe)}r(Pe,"useRoutes");function rt(oe,fe,Ce,Ne){Fr()||UNSAFE_invariant(!1);let{navigator:Ge}=React.useContext(Xn),{matches:Ct}=React.useContext(Ri),ht=Ct[Ct.length-1],Kt=ht?ht.params:{},$t=ht?ht.pathname:"/",on=ht?ht.pathnameBase:"/",en=ht&&ht.route,gn=ri(),vn;if(fe){var Cn;let ci=typeof fe=="string"?parsePath(fe):fe;on==="/"||(Cn=ci.pathname)!=null&&Cn.startsWith(on)||UNSAFE_invariant(!1),vn=ci}else vn=gn;let jn=vn.pathname||"/",Bn=jn;if(on!=="/"){let ci=on.replace(/^\//,"").split("/");Bn="/"+jn.replace(/^\//,"").split("/").slice(ci.length).join("/")}let wn=matchRoutes(oe,{pathname:Bn}),hn=Nn(wn&&wn.map(ci=>Object.assign({},ci,{params:Object.assign({},Kt,ci.params),pathname:joinPaths([on,Ge.encodeLocation?Ge.encodeLocation(ci.pathname).pathname:ci.pathname]),pathnameBase:ci.pathnameBase==="/"?on:joinPaths([on,Ge.encodeLocation?Ge.encodeLocation(ci.pathnameBase).pathname:ci.pathnameBase])})),Ct,Ce,Ne);return fe&&hn?React.createElement(li.Provider,{value:{location:An({pathname:"/",search:"",hash:"",state:null,key:"default"},vn),navigationType:Action.Pop}},hn):hn}r(rt,"useRoutesImpl");function _t(){let oe=Mi(),fe=isRouteErrorResponse(oe)?oe.status+" "+oe.statusText:oe instanceof Error?oe.message:JSON.stringify(oe),Ce=oe instanceof Error?oe.stack:null,Ne="rgba(200,200,200, 0.5)",Ge={padding:"0.5rem",backgroundColor:Ne},Ct={padding:"2px 4px",backgroundColor:Ne},ht=null;return React.createElement(React.Fragment,null,React.createElement("h2",null,"Unexpected Application Error!"),React.createElement("h3",{style:{fontStyle:"italic"}},fe),Ce?React.createElement("pre",{style:Ge},Ce):null,ht)}r(_t,"DefaultErrorComponent");const Dt=null;class pn extends u.Component{constructor(fe){super(fe),this.state={location:fe.location,revalidation:fe.revalidation,error:fe.error}}static getDerivedStateFromError(fe){return{error:fe}}static getDerivedStateFromProps(fe,Ce){return Ce.location!==fe.location||Ce.revalidation!=="idle"&&fe.revalidation==="idle"?{error:fe.error,location:fe.location,revalidation:fe.revalidation}:{error:fe.error!==void 0?fe.error:Ce.error,location:Ce.location,revalidation:fe.revalidation||Ce.revalidation}}componentDidCatch(fe,Ce){console.error("React Router caught the following error during render",fe,Ce)}render(){return this.state.error!==void 0?u.createElement(Ri.Provider,{value:this.props.routeContext},u.createElement(zi.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}r(pn,"RenderErrorBoundary");function In(oe){let{routeContext:fe,match:Ce,children:Ne}=oe,Ge=React.useContext(qn);return Ge&&Ge.static&&Ge.staticContext&&(Ce.route.errorElement||Ce.route.ErrorBoundary)&&(Ge.staticContext._deepestRenderedBoundaryId=Ce.route.id),React.createElement(Ri.Provider,{value:fe},Ne)}r(In,"RenderedRoute");function Nn(oe,fe,Ce,Ne){var Ge;if(fe===void 0&&(fe=[]),Ce===void 0&&(Ce=null),Ne===void 0&&(Ne=null),oe==null){var Ct;if((Ct=Ce)!=null&&Ct.errors)oe=Ce.matches;else return null}let ht=oe,Kt=(Ge=Ce)==null?void 0:Ge.errors;if(Kt!=null){let en=ht.findIndex(gn=>gn.route.id&&(Kt==null?void 0:Kt[gn.route.id]));en>=0||UNSAFE_invariant(!1),ht=ht.slice(0,Math.min(ht.length,en+1))}let $t=!1,on=-1;if(Ce&&Ne&&Ne.v7_partialHydration)for(let en=0;en<ht.length;en++){let gn=ht[en];if((gn.route.HydrateFallback||gn.route.hydrateFallbackElement)&&(on=en),gn.route.id){let{loaderData:vn,errors:Cn}=Ce,jn=gn.route.loader&&vn[gn.route.id]===void 0&&(!Cn||Cn[gn.route.id]===void 0);if(gn.route.lazy||jn){$t=!0,on>=0?ht=ht.slice(0,on+1):ht=[ht[0]];break}}}return ht.reduceRight((en,gn,vn)=>{let Cn,jn=!1,Bn=null,wn=null;Ce&&(Cn=Kt&&gn.route.id?Kt[gn.route.id]:void 0,Bn=gn.route.errorElement||Dt,$t&&(on<0&&vn===0?(Yo("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),jn=!0,wn=null):on===vn&&(jn=!0,wn=gn.route.hydrateFallbackElement||null)));let hn=fe.concat(ht.slice(0,vn+1)),ci=r(()=>{let Ki;return Cn?Ki=Bn:jn?Ki=wn:gn.route.Component?Ki=React.createElement(gn.route.Component,null):gn.route.element?Ki=gn.route.element:Ki=en,React.createElement(In,{match:gn,routeContext:{outlet:en,matches:hn,isDataRoute:Ce!=null},children:Ki})},"getChildren");return Ce&&(gn.route.ErrorBoundary||gn.route.errorElement||vn===0)?React.createElement(pn,{location:Ce.location,revalidation:Ce.revalidation,component:Bn,error:Cn,children:ci(),routeContext:{outlet:null,matches:hn,isDataRoute:!0}}):ci()},null)}r(Nn,"_renderMatches");var Tn=function(oe){return oe.UseBlocker="useBlocker",oe.UseRevalidator="useRevalidator",oe.UseNavigateStable="useNavigate",oe}(Tn||{}),di=function(oe){return oe.UseBlocker="useBlocker",oe.UseLoaderData="useLoaderData",oe.UseActionData="useActionData",oe.UseRouteError="useRouteError",oe.UseNavigation="useNavigation",oe.UseRouteLoaderData="useRouteLoaderData",oe.UseMatches="useMatches",oe.UseRevalidator="useRevalidator",oe.UseNavigateStable="useNavigate",oe.UseRouteId="useRouteId",oe}(di||{});function an(oe){return oe+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}r(an,"getDataRouterConsoleError");function ki(oe){let fe=u.useContext(qn);return fe||t(!1),fe}r(ki,"useDataRouterContext");function Zn(oe){let fe=React.useContext(Pn);return fe||UNSAFE_invariant(!1),fe}r(Zn,"useDataRouterState");function lr(oe){let fe=u.useContext(Ri);return fe||t(!1),fe}r(lr,"useRouteContext");function br(oe){let fe=lr(oe),Ce=fe.matches[fe.matches.length-1];return Ce.route.id||t(!1),Ce.route.id}r(br,"useCurrentRouteId");function Cr(){return br(di.UseRouteId)}r(Cr,"useRouteId");function pi(){return Zn(di.UseNavigation).navigation}r(pi,"useNavigation");function vi(){let oe=ki(Tn.UseRevalidator),fe=Zn(di.UseRevalidator);return React.useMemo(()=>({revalidate:oe.router.revalidate,state:fe.revalidation}),[oe.router.revalidate,fe.revalidation])}r(vi,"useRevalidator");function Di(){let{matches:oe,loaderData:fe}=Zn(di.UseMatches);return React.useMemo(()=>oe.map(Ce=>UNSAFE_convertRouteMatchToUiMatch(Ce,fe)),[oe,fe])}r(Di,"useMatches");function Yi(){let oe=Zn(di.UseLoaderData),fe=br(di.UseLoaderData);if(oe.errors&&oe.errors[fe]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+fe+")");return}return oe.loaderData[fe]}r(Yi,"useLoaderData");function Or(oe){return Zn(di.UseRouteLoaderData).loaderData[oe]}r(Or,"useRouteLoaderData");function Zr(){let oe=Zn(di.UseActionData),fe=br(di.UseLoaderData);return oe.actionData?oe.actionData[fe]:void 0}r(Zr,"useActionData");function Mi(){var oe;let fe=React.useContext(zi),Ce=Zn(di.UseRouteError),Ne=br(di.UseRouteError);return fe!==void 0?fe:(oe=Ce.errors)==null?void 0:oe[Ne]}r(Mi,"useRouteError");function ro(){let oe=React.useContext(xn);return oe==null?void 0:oe._data}r(ro,"useAsyncValue");function pr(){let oe=React.useContext(xn);return oe==null?void 0:oe._error}r(pr,"useAsyncError");let qr=0;function es(oe){let{router:fe,basename:Ce}=ki(Tn.UseBlocker),Ne=Zn(di.UseBlocker),[Ge,Ct]=React.useState(""),ht=React.useCallback(Kt=>{if(typeof oe!="function")return!!oe;if(Ce==="/")return oe(Kt);let{currentLocation:$t,nextLocation:on,historyAction:en}=Kt;return oe({currentLocation:An({},$t,{pathname:stripBasename($t.pathname,Ce)||$t.pathname}),nextLocation:An({},on,{pathname:stripBasename(on.pathname,Ce)||on.pathname}),historyAction:en})},[Ce,oe]);return React.useEffect(()=>{let Kt=String(++qr);return Ct(Kt),()=>fe.deleteBlocker(Kt)},[fe]),React.useEffect(()=>{Ge!==""&&fe.getBlocker(Ge,ht)},[fe,Ge,ht]),Ge&&Ne.blockers.has(Ge)?Ne.blockers.get(Ge):IDLE_BLOCKER}r(es,"useBlocker");function is(){let{router:oe}=ki(Tn.UseNavigateStable),fe=br(di.UseNavigateStable),Ce=u.useRef(!1);return hr(()=>{Ce.current=!0}),u.useCallback(function(Ge,Ct){Ct===void 0&&(Ct={}),Ce.current&&(typeof Ge=="number"?oe.navigate(Ge):oe.navigate(Ge,An({fromRouteId:fe},Ct)))},[oe,fe])}r(is,"useNavigateStable");const Jo={};function Yo(oe,fe,Ce){!fe&&!Jo[oe]&&(Jo[oe]=!0)}r(Yo,"warningOnce");const Vo=h["startTransition"];function uo(oe){let{fallbackElement:fe,router:Ce,future:Ne}=oe,[Ge,Ct]=React.useState(Ce.state),{v7_startTransition:ht}=Ne||{},Kt=React.useCallback(gn=>{ht&&Vo?Vo(()=>Ct(gn)):Ct(gn)},[Ct,ht]);React.useLayoutEffect(()=>Ce.subscribe(Kt),[Ce,Kt]),React.useEffect(()=>{},[]);let $t=React.useMemo(()=>({createHref:Ce.createHref,encodeLocation:Ce.encodeLocation,go:gn=>Ce.navigate(gn),push:(gn,vn,Cn)=>Ce.navigate(gn,{state:vn,preventScrollReset:Cn==null?void 0:Cn.preventScrollReset}),replace:(gn,vn,Cn)=>Ce.navigate(gn,{replace:!0,state:vn,preventScrollReset:Cn==null?void 0:Cn.preventScrollReset})}),[Ce]),on=Ce.basename||"/",en=React.useMemo(()=>({router:Ce,navigator:$t,static:!1,basename:on}),[Ce,$t,on]);return React.createElement(React.Fragment,null,React.createElement(qn.Provider,{value:en},React.createElement(Pn.Provider,{value:Ge},React.createElement(Co,{basename:on,location:Ge.location,navigationType:Ge.historyAction,navigator:$t,future:{v7_relativeSplatPath:Ce.future.v7_relativeSplatPath}},Ge.initialized||Ce.future.v7_partialHydration?React.createElement(bo,{routes:Ce.routes,future:Ce.future,state:Ge}):fe))),null)}r(uo,"RouterProvider");function bo(oe){let{routes:fe,future:Ce,state:Ne}=oe;return rt(fe,void 0,Ne,Ce)}r(bo,"DataRoutes");function Io(oe){let{basename:fe,children:Ce,initialEntries:Ne,initialIndex:Ge,future:Ct}=oe,ht=React.useRef();ht.current==null&&(ht.current=createMemoryHistory({initialEntries:Ne,initialIndex:Ge,v5Compat:!0}));let Kt=ht.current,[$t,on]=React.useState({action:Kt.action,location:Kt.location}),{v7_startTransition:en}=Ct||{},gn=React.useCallback(vn=>{en&&Vo?Vo(()=>on(vn)):on(vn)},[on,en]);return React.useLayoutEffect(()=>Kt.listen(gn),[Kt,gn]),React.createElement(Co,{basename:fe,children:Ce,location:$t.location,navigationType:$t.action,navigator:Kt,future:Ct})}r(Io,"MemoryRouter");function so(oe){let{to:fe,replace:Ce,state:Ne,relative:Ge}=oe;Fr()||UNSAFE_invariant(!1);let{future:Ct,static:ht}=React.useContext(Xn),{matches:Kt}=React.useContext(Ri),{pathname:$t}=ri(),on=si(),en=resolveTo(fe,UNSAFE_getResolveToMatches(Kt,Ct.v7_relativeSplatPath),$t,Ge==="path"),gn=JSON.stringify(en);return React.useEffect(()=>on(JSON.parse(gn),{replace:Ce,state:Ne,relative:Ge}),[on,gn,Ge,Ce,Ne]),null}r(so,"Navigate");function ao(oe){return ho(oe.context)}r(ao,"Outlet");function Gr(oe){UNSAFE_invariant(!1)}r(Gr,"Route");function Co(oe){let{basename:fe="/",children:Ce=null,location:Ne,navigationType:Ge=Action.Pop,navigator:Ct,static:ht=!1,future:Kt}=oe;Fr()&&UNSAFE_invariant(!1);let $t=fe.replace(/^\/*/,"/"),on=React.useMemo(()=>({basename:$t,navigator:Ct,static:ht,future:An({v7_relativeSplatPath:!1},Kt)}),[$t,Kt,Ct,ht]);typeof Ne=="string"&&(Ne=parsePath(Ne));let{pathname:en="/",search:gn="",hash:vn="",state:Cn=null,key:jn="default"}=Ne,Bn=React.useMemo(()=>{let wn=stripBasename(en,$t);return wn==null?null:{location:{pathname:wn,search:gn,hash:vn,state:Cn,key:jn},navigationType:Ge}},[$t,en,gn,vn,Cn,jn,Ge]);return Bn==null?null:React.createElement(Xn.Provider,{value:on},React.createElement(li.Provider,{children:Ce,value:Bn}))}r(Co,"Router");function Ts(oe){let{children:fe,location:Ce}=oe;return Pe(Yr(fe),Ce)}r(Ts,"Routes");function Is(oe){let{children:fe,errorElement:Ce,resolve:Ne}=oe;return React.createElement(Vr,{resolve:Ne,errorElement:Ce},React.createElement(oo,null,fe))}r(Is,"Await");var po=function(oe){return oe[oe.pending=0]="pending",oe[oe.success=1]="success",oe[oe.error=2]="error",oe}(po||{});const Ho=new Promise(()=>{});class Vr extends u.Component{constructor(fe){super(fe),this.state={error:null}}static getDerivedStateFromError(fe){return{error:fe}}componentDidCatch(fe,Ce){console.error("<Await> caught the following error during render",fe,Ce)}render(){let{children:fe,errorElement:Ce,resolve:Ne}=this.props,Ge=null,Ct=po.pending;if(!(Ne instanceof Promise))Ct=po.success,Ge=Promise.resolve(),Object.defineProperty(Ge,"_tracked",{get:()=>!0}),Object.defineProperty(Ge,"_data",{get:()=>Ne});else if(this.state.error){Ct=po.error;let ht=this.state.error;Ge=Promise.reject().catch(()=>{}),Object.defineProperty(Ge,"_tracked",{get:()=>!0}),Object.defineProperty(Ge,"_error",{get:()=>ht})}else Ne._tracked?(Ge=Ne,Ct=Ge._error!==void 0?po.error:Ge._data!==void 0?po.success:po.pending):(Ct=po.pending,Object.defineProperty(Ne,"_tracked",{get:()=>!0}),Ge=Ne.then(ht=>Object.defineProperty(Ne,"_data",{get:()=>ht}),ht=>Object.defineProperty(Ne,"_error",{get:()=>ht})));if(Ct===po.error&&Ge._error instanceof Rn)throw Ho;if(Ct===po.error&&!Ce)throw Ge._error;if(Ct===po.error)return u.createElement(xn.Provider,{value:Ge,children:Ce});if(Ct===po.success)return u.createElement(xn.Provider,{value:Ge,children:fe});throw Ge}}r(Vr,"AwaitErrorBoundary");function oo(oe){let{children:fe}=oe,Ce=ro(),Ne=typeof fe=="function"?fe(Ce):fe;return React.createElement(React.Fragment,null,Ne)}r(oo,"ResolveAwait");function Yr(oe,fe){fe===void 0&&(fe=[]);let Ce=[];return React.Children.forEach(oe,(Ne,Ge)=>{if(!React.isValidElement(Ne))return;let Ct=[...fe,Ge];if(Ne.type===React.Fragment){Ce.push.apply(Ce,Yr(Ne.props.children,Ct));return}Ne.type!==Gr&&UNSAFE_invariant(!1),!Ne.props.index||!Ne.props.children||UNSAFE_invariant(!1);let ht={id:Ne.props.id||Ct.join("-"),caseSensitive:Ne.props.caseSensitive,element:Ne.props.element,Component:Ne.props.Component,index:Ne.props.index,path:Ne.props.path,loader:Ne.props.loader,action:Ne.props.action,errorElement:Ne.props.errorElement,ErrorBoundary:Ne.props.ErrorBoundary,hasErrorBoundary:Ne.props.ErrorBoundary!=null||Ne.props.errorElement!=null,shouldRevalidate:Ne.props.shouldRevalidate,handle:Ne.props.handle,lazy:Ne.props.lazy};Ne.props.children&&(ht.children=Yr(Ne.props.children,Ct)),Ce.push(ht)}),Ce}r(Yr,"createRoutesFromChildren");function mo(oe){return Nn(oe)}r(mo,"renderMatches");function lo(oe){let fe={hasErrorBoundary:oe.ErrorBoundary!=null||oe.errorElement!=null};return oe.Component&&Object.assign(fe,{element:React.createElement(oe.Component),Component:void 0}),oe.HydrateFallback&&Object.assign(fe,{hydrateFallbackElement:React.createElement(oe.HydrateFallback),HydrateFallback:void 0}),oe.ErrorBoundary&&Object.assign(fe,{errorElement:React.createElement(oe.ErrorBoundary),ErrorBoundary:void 0}),fe}r(lo,"mapRouteProperties");function ws(oe,fe){return createRouter({basename:fe==null?void 0:fe.basename,future:An({},fe==null?void 0:fe.future,{v7_prependBasename:!0}),history:createMemoryHistory({initialEntries:fe==null?void 0:fe.initialEntries,initialIndex:fe==null?void 0:fe.initialIndex}),hydrationData:fe==null?void 0:fe.hydrationData,routes:oe,mapRouteProperties:lo}).initialize()}r(ws,"createMemoryRouter")},105789326:(B,l,d)=>{"use strict";d.d(l,{e9:()=>ue,t$:()=>Qn,dl:()=>Gn,jS:()=>ln,VP:()=>Xr,wK:()=>gr,B8:()=>ho,_3:()=>on,XI:()=>go,PG:()=>Os,Mn:()=>bn});function u(te,ie){if(!(te instanceof ie))throw new TypeError("Cannot call a class as a function")}r(u,"_classCallCheck");function h(te,ie){for(var $=0;$<ie.length;$++){var P=ie[$];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(te,P.key,P)}}r(h,"_defineProperties");function p(te,ie,$){return ie&&h(te.prototype,ie),$&&h(te,$),Object.defineProperty(te,"prototype",{writable:!1}),te}r(p,"_createClass");function m(te){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},m(te)}r(m,"_typeof");function a(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}r(a,"_assertThisInitialized");function s(te,ie){if(ie&&(m(ie)==="object"||typeof ie=="function"))return ie;if(ie!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(te)}r(s,"_possibleConstructorReturn");function i(te){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():r(function($){return $.__proto__||Object.getPrototypeOf($)},"_getPrototypeOf"),i(te)}r(i,"_getPrototypeOf");function e(te,ie){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():r(function(P,Y){return P.__proto__=Y,P},"_setPrototypeOf"),e(te,ie)}r(e,"_setPrototypeOf");function t(te,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(ie&&ie.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),Object.defineProperty(te,"prototype",{writable:!1}),ie&&e(te,ie)}r(t,"_inherits");function n(te,ie,$){return ie in te?Object.defineProperty(te,ie,{value:$,enumerable:!0,configurable:!0,writable:!0}):te[ie]=$,te}r(n,"_defineProperty");var o=d(3134334389),f=d(9619874424);function g(){return g=Object.assign?Object.assign.bind():function(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie];for(var P in $)Object.prototype.hasOwnProperty.call($,P)&&(te[P]=$[P])}return te},g.apply(this,arguments)}r(g,"_extends");function S(te){var ie,$,P="";if(typeof te=="string"||typeof te=="number")P+=te;else if(typeof te=="object")if(Array.isArray(te))for(ie=0;ie<te.length;ie++)te[ie]&&($=S(te[ie]))&&(P&&(P+=" "),P+=$);else for(ie in te)te[ie]&&(P&&(P+=" "),P+=ie);return P}r(S,"r");function c(){for(var te,ie,$=0,P="";$<arguments.length;)(te=arguments[$++])&&(ie=S(te))&&(P&&(P+=" "),P+=ie);return P}r(c,"clsx");const v=c;function _(te){var ie=te.cellCount,$=te.cellSize,P=te.computeMetadataCallback,Y=te.computeMetadataCallbackProps,pe=te.nextCellsCount,me=te.nextCellSize,De=te.nextScrollToIndex,ze=te.scrollToIndex,gt=te.updateScrollOffsetForScrollToIndex;(ie!==pe||(typeof $=="number"||typeof me=="number")&&$!==me)&&(P(Y),ze>=0&&ze===De&&gt())}r(_,"calculateSizeAndPositionDataAndUpdateScrollOffset");function E(te,ie){if(te==null)return{};var $={},P=Object.keys(te),Y,pe;for(pe=0;pe<P.length;pe++)Y=P[pe],!(ie.indexOf(Y)>=0)&&($[Y]=te[Y]);return $}r(E,"_objectWithoutPropertiesLoose");function b(te,ie){if(te==null)return{};var $=E(te,ie),P,Y;if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(te);for(Y=0;Y<pe.length;Y++)P=pe[Y],!(ie.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(te,P)&&($[P]=te[P])}return $}r(b,"_objectWithoutProperties");var T=null,I=null,O=null,w=null,D=null,R=null,L=null,H=null,K=null,ee=null,q=null,ae=null,ce=null,Te=null,ke=null,tt=null,At=null,Be=null,$e=function(){function te(ie){var $=ie.cellCount,P=ie.cellSizeGetter,Y=ie.estimatedCellSize;u(this,te),n(this,"_cellSizeAndPositionData",{}),n(this,"_lastMeasuredIndex",-1),n(this,"_lastBatchedIndex",-1),n(this,"_cellCount",void 0),n(this,"_cellSizeGetter",void 0),n(this,"_estimatedCellSize",void 0),this._cellSizeGetter=P,this._cellCount=$,this._estimatedCellSize=Y}return r(te,"CellSizeAndPositionManager"),p(te,[{key:"areOffsetsAdjusted",value:r(function(){return!1},"areOffsetsAdjusted")},{key:"configure",value:r(function($){var P=$.cellCount,Y=$.estimatedCellSize,pe=$.cellSizeGetter;this._cellCount=P,this._estimatedCellSize=Y,this._cellSizeGetter=pe},"configure")},{key:"getCellCount",value:r(function(){return this._cellCount},"getCellCount")},{key:"getEstimatedCellSize",value:r(function(){return this._estimatedCellSize},"getEstimatedCellSize")},{key:"getLastMeasuredIndex",value:r(function(){return this._lastMeasuredIndex},"getLastMeasuredIndex")},{key:"getOffsetAdjustment",value:r(function(){return 0},"getOffsetAdjustment")},{key:"getSizeAndPositionOfCell",value:r(function($){if($<0||$>=this._cellCount)throw Error("Requested index ".concat($," is outside of range 0..").concat(this._cellCount));if($>this._lastMeasuredIndex)for(var P=this.getSizeAndPositionOfLastMeasuredCell(),Y=P.offset+P.size,pe=this._lastMeasuredIndex+1;pe<=$;pe++){var me=this._cellSizeGetter({index:pe});if(me===void 0||isNaN(me))throw Error("Invalid size returned for cell ".concat(pe," of value ").concat(me));me===null?(this._cellSizeAndPositionData[pe]={offset:Y,size:0},this._lastBatchedIndex=$):(this._cellSizeAndPositionData[pe]={offset:Y,size:me},Y+=me,this._lastMeasuredIndex=$)}return this._cellSizeAndPositionData[$]},"getSizeAndPositionOfCell")},{key:"getSizeAndPositionOfLastMeasuredCell",value:r(function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},"getSizeAndPositionOfLastMeasuredCell")},{key:"getTotalSize",value:r(function(){var $=this.getSizeAndPositionOfLastMeasuredCell(),P=$.offset+$.size,Y=this._cellCount-this._lastMeasuredIndex-1,pe=Y*this._estimatedCellSize;return P+pe},"getTotalSize")},{key:"getUpdatedOffsetForIndex",value:r(function($){var P=$.align,Y=P===void 0?"auto":P,pe=$.containerSize,me=$.currentOffset,De=$.targetIndex;if(pe<=0)return 0;var ze=this.getSizeAndPositionOfCell(De),gt=ze.offset,qe=gt-pe+ze.size,mt;switch(Y){case"start":mt=gt;break;case"end":mt=qe;break;case"center":mt=gt-(pe-ze.size)/2;break;default:mt=Math.max(qe,Math.min(gt,me));break}var at=this.getTotalSize();return Math.max(0,Math.min(at-pe,mt))},"getUpdatedOffsetForIndex")},{key:"getVisibleCellRange",value:r(function($){var P=$.containerSize,Y=$.offset,pe=this.getTotalSize();if(pe===0)return{};var me=Y+P,De=this._findNearestCell(Y),ze=this.getSizeAndPositionOfCell(De);Y=ze.offset+ze.size;for(var gt=De;Y<me&&gt<this._cellCount-1;)gt++,Y+=this.getSizeAndPositionOfCell(gt).size;return{start:De,stop:gt}},"getVisibleCellRange")},{key:"resetCell",value:r(function($){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,$-1)},"resetCell")},{key:"_binarySearch",value:r(function($,P,Y){for(;P<=$;){var pe=P+Math.floor(($-P)/2),me=this.getSizeAndPositionOfCell(pe).offset;if(me===Y)return pe;me<Y?P=pe+1:me>Y&&($=pe-1)}return P>0?P-1:0},"_binarySearch")},{key:"_exponentialSearch",value:r(function($,P){for(var Y=1;$<this._cellCount&&this.getSizeAndPositionOfCell($).offset<P;)$+=Y,Y*=2;return this._binarySearch(Math.min($,this._cellCount-1),Math.floor($/2),P)},"_exponentialSearch")},{key:"_findNearestCell",value:r(function($){if(isNaN($))throw Error("Invalid offset ".concat($," specified"));$=Math.max(0,$);var P=this.getSizeAndPositionOfLastMeasuredCell(),Y=Math.max(0,this._lastMeasuredIndex);return P.offset>=$?this._binarySearch(Y,0,$):this._exponentialSearch(Y,$)},"_findNearestCell")}]),te}(),Ze=15e5,Je=16777100,dt=r(function(){return typeof window<"u"},"isBrowser"),Ot=r(function(){return!!window.chrome},"isChrome"),Nt=r(function(){return dt()&&Ot()?Je:Ze},"getMaxElementSize"),Ve=function(){function te(ie){var $=ie.maxScrollSize,P=$===void 0?Nt():$,Y=b(ie,["maxScrollSize"]);u(this,te),n(this,"_cellSizeAndPositionManager",void 0),n(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new $e(Y),this._maxScrollSize=P}return r(te,"ScalingCellSizeAndPositionManager"),p(te,[{key:"areOffsetsAdjusted",value:r(function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize},"areOffsetsAdjusted")},{key:"configure",value:r(function($){this._cellSizeAndPositionManager.configure($)},"configure")},{key:"getCellCount",value:r(function(){return this._cellSizeAndPositionManager.getCellCount()},"getCellCount")},{key:"getEstimatedCellSize",value:r(function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()},"getEstimatedCellSize")},{key:"getLastMeasuredIndex",value:r(function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()},"getLastMeasuredIndex")},{key:"getOffsetAdjustment",value:r(function($){var P=$.containerSize,Y=$.offset,pe=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize(),De=this._getOffsetPercentage({containerSize:P,offset:Y,totalSize:me});return Math.round(De*(me-pe))},"getOffsetAdjustment")},{key:"getSizeAndPositionOfCell",value:r(function($){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell($)},"getSizeAndPositionOfCell")},{key:"getSizeAndPositionOfLastMeasuredCell",value:r(function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()},"getSizeAndPositionOfLastMeasuredCell")},{key:"getTotalSize",value:r(function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())},"getTotalSize")},{key:"getUpdatedOffsetForIndex",value:r(function($){var P=$.align,Y=P===void 0?"auto":P,pe=$.containerSize,me=$.currentOffset,De=$.targetIndex;me=this._safeOffsetToOffset({containerSize:pe,offset:me});var ze=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:Y,containerSize:pe,currentOffset:me,targetIndex:De});return this._offsetToSafeOffset({containerSize:pe,offset:ze})},"getUpdatedOffsetForIndex")},{key:"getVisibleCellRange",value:r(function($){var P=$.containerSize,Y=$.offset;return Y=this._safeOffsetToOffset({containerSize:P,offset:Y}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:P,offset:Y})},"getVisibleCellRange")},{key:"resetCell",value:r(function($){this._cellSizeAndPositionManager.resetCell($)},"resetCell")},{key:"_getOffsetPercentage",value:r(function($){var P=$.containerSize,Y=$.offset,pe=$.totalSize;return pe<=P?0:Y/(pe-P)},"_getOffsetPercentage")},{key:"_offsetToSafeOffset",value:r(function($){var P=$.containerSize,Y=$.offset,pe=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize();if(pe===me)return Y;var De=this._getOffsetPercentage({containerSize:P,offset:Y,totalSize:pe});return Math.round(De*(me-P))},"_offsetToSafeOffset")},{key:"_safeOffsetToOffset",value:r(function($){var P=$.containerSize,Y=$.offset,pe=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize();if(pe===me)return Y;var De=this._getOffsetPercentage({containerSize:P,offset:Y,totalSize:me});return Math.round(De*(pe-P))},"_safeOffsetToOffset")}]),te}();function He(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,ie={};return function($){var P=$.callback,Y=$.indices,pe=Object.keys(Y),me=!te||pe.every(function(ze){var gt=Y[ze];return Array.isArray(gt)?gt.length>0:gt>=0}),De=pe.length!==Object.keys(ie).length||pe.some(function(ze){var gt=ie[ze],qe=Y[ze];return Array.isArray(qe)?gt.join(",")!==qe.join(","):gt!==qe});ie=Y,me&&De&&P(Y)}}r(He,"createCallbackMemoizer");var ct=-1,yt=1,it="horizontal",nn="vertical";function Xt(te){var ie=te.cellCount,$=te.overscanCellsCount,P=te.scrollDirection,Y=te.startIndex,pe=te.stopIndex;return P===yt?{overscanStartIndex:Math.max(0,Y),overscanStopIndex:Math.min(ie-1,pe+$)}:{overscanStartIndex:Math.max(0,Y-$),overscanStopIndex:Math.min(ie-1,pe)}}r(Xt,"defaultOverscanIndicesGetter");function dn(te){var ie=te.cellSize,$=te.cellSizeAndPositionManager,P=te.previousCellsCount,Y=te.previousCellSize,pe=te.previousScrollToAlignment,me=te.previousScrollToIndex,De=te.previousSize,ze=te.scrollOffset,gt=te.scrollToAlignment,qe=te.scrollToIndex,mt=te.size,at=te.sizeJustIncreasedFromZero,qt=te.updateScrollIndexCallback,mn=$.getCellCount(),On=qe>=0&&qe<mn,ai=mt!==De||at||!Y||typeof ie=="number"&&ie!==Y;On&&(ai||gt!==pe||qe!==me)?qt(qe):!On&&mn>0&&(mt<De||mn<P)&&ze>$.getTotalSize()-mt&&qt(mn-1)}r(dn,"updateScrollIndexHelper");function bn(te){for(var ie=te.cellCache,$=te.cellRenderer,P=te.columnSizeAndPositionManager,Y=te.columnStartIndex,pe=te.columnStopIndex,me=te.deferredMeasurementCache,De=te.horizontalOffsetAdjustment,ze=te.isScrolling,gt=te.isScrollingOptOut,qe=te.parent,mt=te.rowSizeAndPositionManager,at=te.rowStartIndex,qt=te.rowStopIndex,mn=te.styleCache,On=te.verticalOffsetAdjustment,ai=te.visibleColumnIndices,gi=te.visibleRowIndices,Ei=[],Gi=P.areOffsetsAdjusted()||mt.areOffsetsAdjusted(),qi=!ze&&!Gi,rr=at;rr<=qt;rr++)for(var Ir=mt.getSizeAndPositionOfCell(rr),Ji=Y;Ji<=pe;Ji++){var Wn=P.getSizeAndPositionOfCell(Ji),er=Ji>=ai.start&&Ji<=ai.stop&&rr>=gi.start&&rr<=gi.stop,vt="".concat(rr,"-").concat(Ji),wt=void 0;qi&&mn[vt]?wt=mn[vt]:me&&!me.has(rr,Ji)?wt={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(wt={height:Ir.size,left:Wn.offset+De,position:"absolute",top:Ir.offset+On,width:Wn.size},mn[vt]=wt);var Jt={columnIndex:Ji,isScrolling:ze,isVisible:er,key:vt,parent:qe,rowIndex:rr,style:wt},_n=void 0;(gt||ze)&&!De&&!On?(ie[vt]||(ie[vt]=$(Jt)),_n=ie[vt]):_n=$(Jt),!(_n==null||_n===!1)&&Ei.push(_n)}return Ei}r(bn,"defaultCellRangeRenderer");function Rn(te,ie){}r(Rn,"warnAboutMissingStyle");const Zt=!!(typeof window<"u"&&window.document&&window.document.createElement);var Mn;function Wi(te){if((!Mn&&Mn!==0||te)&&Zt){var ie=document.createElement("div");ie.style.position="absolute",ie.style.top="-9999px",ie.style.width="50px",ie.style.height="50px",ie.style.overflow="scroll",document.body.appendChild(ie),Mn=ie.offsetWidth-ie.clientWidth,document.body.removeChild(ie)}return Mn}r(Wi,"scrollbarSize");var Jn;typeof window<"u"?Jn=window:typeof self<"u"?Jn=self:Jn={};var zn=Jn.requestAnimationFrame||Jn.webkitRequestAnimationFrame||Jn.mozRequestAnimationFrame||Jn.oRequestAnimationFrame||Jn.msRequestAnimationFrame||function(te){return Jn.setTimeout(te,1e3/60)},En=Jn.cancelAnimationFrame||Jn.webkitCancelAnimationFrame||Jn.mozCancelAnimationFrame||Jn.oCancelAnimationFrame||Jn.msCancelAnimationFrame||function(te){Jn.clearTimeout(te)},sn=zn,oi=En,rn=null,cn=r(function(ie){return oi(ie.id)},"cancelAnimationTimeout"),Wt=r(function(ie,$){var P;Promise.resolve().then(function(){P=Date.now()});var Y=r(function me(){Date.now()-P>=$?ie.call():pe.id=sn(me)},"timeout"),pe={id:sn(Y)};return pe},"requestAnimationTimeout"),J,Xe;function nt(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(nt,"ownKeys");function st(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?nt($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):nt($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(st,"_objectSpread");var pt=150,It={OBSERVED:"observed",REQUESTED:"requested"},ve=r(function(){return null},"renderNull"),et=(Xe=J=function(te){t(ie,te);function ie($){var P;u(this,ie),P=s(this,i(ie).call(this,$)),n(a(P),"_onGridRenderedMemoizer",He()),n(a(P),"_onScrollMemoizer",He(!1)),n(a(P),"_deferredInvalidateColumnIndex",null),n(a(P),"_deferredInvalidateRowIndex",null),n(a(P),"_recomputeScrollLeftFlag",!1),n(a(P),"_recomputeScrollTopFlag",!1),n(a(P),"_horizontalScrollBarSize",0),n(a(P),"_verticalScrollBarSize",0),n(a(P),"_scrollbarPresenceChanged",!1),n(a(P),"_scrollingContainer",void 0),n(a(P),"_childrenToDisplay",void 0),n(a(P),"_columnStartIndex",void 0),n(a(P),"_columnStopIndex",void 0),n(a(P),"_rowStartIndex",void 0),n(a(P),"_rowStopIndex",void 0),n(a(P),"_renderedColumnStartIndex",0),n(a(P),"_renderedColumnStopIndex",0),n(a(P),"_renderedRowStartIndex",0),n(a(P),"_renderedRowStopIndex",0),n(a(P),"_initialScrollTop",void 0),n(a(P),"_initialScrollLeft",void 0),n(a(P),"_disablePointerEventsTimeoutId",void 0),n(a(P),"_styleCache",{}),n(a(P),"_cellCache",{}),n(a(P),"_debounceScrollEndedCallback",function(){P._disablePointerEventsTimeoutId=null,P.setState({isScrolling:!1,needToResetStyleCache:!1})}),n(a(P),"_invokeOnGridRenderedHelper",function(){var me=P.props.onSectionRendered;P._onGridRenderedMemoizer({callback:me,indices:{columnOverscanStartIndex:P._columnStartIndex,columnOverscanStopIndex:P._columnStopIndex,columnStartIndex:P._renderedColumnStartIndex,columnStopIndex:P._renderedColumnStopIndex,rowOverscanStartIndex:P._rowStartIndex,rowOverscanStopIndex:P._rowStopIndex,rowStartIndex:P._renderedRowStartIndex,rowStopIndex:P._renderedRowStopIndex}})}),n(a(P),"_setScrollingContainerRef",function(me){P._scrollingContainer=me}),n(a(P),"_onScroll",function(me){me.target===P._scrollingContainer&&P.handleScrollEvent(me.target)});var Y=new Ve({cellCount:$.columnCount,cellSizeGetter:r(function(De){return ie._wrapSizeGetter($.columnWidth)(De)},"cellSizeGetter"),estimatedCellSize:ie._getEstimatedColumnSize($)}),pe=new Ve({cellCount:$.rowCount,cellSizeGetter:r(function(De){return ie._wrapSizeGetter($.rowHeight)(De)},"cellSizeGetter"),estimatedCellSize:ie._getEstimatedRowSize($)});return P.state={instanceProps:{columnSizeAndPositionManager:Y,rowSizeAndPositionManager:pe,prevColumnWidth:$.columnWidth,prevRowHeight:$.rowHeight,prevColumnCount:$.columnCount,prevRowCount:$.rowCount,prevIsScrolling:$.isScrolling===!0,prevScrollToColumn:$.scrollToColumn,prevScrollToRow:$.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:yt,scrollDirectionVertical:yt,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},$.scrollToRow>0&&(P._initialScrollTop=P._getCalculatedScrollTop($,P.state)),$.scrollToColumn>0&&(P._initialScrollLeft=P._getCalculatedScrollLeft($,P.state)),P}return r(ie,"Grid"),p(ie,[{key:"getOffsetForCell",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=P.alignment,pe=Y===void 0?this.props.scrollToAlignment:Y,me=P.columnIndex,De=me===void 0?this.props.scrollToColumn:me,ze=P.rowIndex,gt=ze===void 0?this.props.scrollToRow:ze,qe=st({},this.props,{scrollToAlignment:pe,scrollToColumn:De,scrollToRow:gt});return{scrollLeft:this._getCalculatedScrollLeft(qe),scrollTop:this._getCalculatedScrollTop(qe)}},"getOffsetForCell")},{key:"getTotalRowsHeight",value:r(function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()},"getTotalRowsHeight")},{key:"getTotalColumnsWidth",value:r(function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()},"getTotalColumnsWidth")},{key:"handleScrollEvent",value:r(function(P){var Y=P.scrollLeft,pe=Y===void 0?0:Y,me=P.scrollTop,De=me===void 0?0:me;if(!(De<0)){this._debounceScrollEnded();var ze=this.props,gt=ze.autoHeight,qe=ze.autoWidth,mt=ze.height,at=ze.width,qt=this.state.instanceProps,mn=qt.scrollbarSize,On=qt.rowSizeAndPositionManager.getTotalSize(),ai=qt.columnSizeAndPositionManager.getTotalSize(),gi=Math.min(Math.max(0,ai-at+mn),pe),Ei=Math.min(Math.max(0,On-mt+mn),De);if(this.state.scrollLeft!==gi||this.state.scrollTop!==Ei){var Gi=gi!==this.state.scrollLeft?gi>this.state.scrollLeft?yt:ct:this.state.scrollDirectionHorizontal,qi=Ei!==this.state.scrollTop?Ei>this.state.scrollTop?yt:ct:this.state.scrollDirectionVertical,rr={isScrolling:!0,scrollDirectionHorizontal:Gi,scrollDirectionVertical:qi,scrollPositionChangeReason:It.OBSERVED};gt||(rr.scrollTop=Ei),qe||(rr.scrollLeft=gi),rr.needToResetStyleCache=!1,this.setState(rr)}this._invokeOnScrollMemoizer({scrollLeft:gi,scrollTop:Ei,totalColumnsWidth:ai,totalRowsHeight:On})}},"handleScrollEvent")},{key:"invalidateCellSizeAfterRender",value:r(function(P){var Y=P.columnIndex,pe=P.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,Y):Y,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,pe):pe},"invalidateCellSizeAfterRender")},{key:"measureAllCells",value:r(function(){var P=this.props,Y=P.columnCount,pe=P.rowCount,me=this.state.instanceProps;me.columnSizeAndPositionManager.getSizeAndPositionOfCell(Y-1),me.rowSizeAndPositionManager.getSizeAndPositionOfCell(pe-1)},"measureAllCells")},{key:"recomputeGridSize",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=P.columnIndex,pe=Y===void 0?0:Y,me=P.rowIndex,De=me===void 0?0:me,ze=this.props,gt=ze.scrollToColumn,qe=ze.scrollToRow,mt=this.state.instanceProps;mt.columnSizeAndPositionManager.resetCell(pe),mt.rowSizeAndPositionManager.resetCell(De),this._recomputeScrollLeftFlag=gt>=0&&(this.state.scrollDirectionHorizontal===yt?pe<=gt:pe>=gt),this._recomputeScrollTopFlag=qe>=0&&(this.state.scrollDirectionVertical===yt?De<=qe:De>=qe),this._styleCache={},this._cellCache={},this.forceUpdate()},"recomputeGridSize")},{key:"scrollToCell",value:r(function(P){var Y=P.columnIndex,pe=P.rowIndex,me=this.props.columnCount,De=this.props;me>1&&Y!==void 0&&this._updateScrollLeftForScrollToColumn(st({},De,{scrollToColumn:Y})),pe!==void 0&&this._updateScrollTopForScrollToRow(st({},De,{scrollToRow:pe}))},"scrollToCell")},{key:"componentDidMount",value:r(function(){var P=this.props,Y=P.getScrollbarSize,pe=P.height,me=P.scrollLeft,De=P.scrollToColumn,ze=P.scrollTop,gt=P.scrollToRow,qe=P.width,mt=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),mt.scrollbarSizeMeasured||this.setState(function(mn){var On=st({},mn,{needToResetStyleCache:!1});return On.instanceProps.scrollbarSize=Y(),On.instanceProps.scrollbarSizeMeasured=!0,On}),typeof me=="number"&&me>=0||typeof ze=="number"&&ze>=0){var at=ie._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:me,scrollTop:ze});at&&(at.needToResetStyleCache=!1,this.setState(at))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var qt=pe>0&&qe>0;De>=0&&qt&&this._updateScrollLeftForScrollToColumn(),gt>=0&&qt&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:me||0,scrollTop:ze||0,totalColumnsWidth:mt.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:mt.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()},"componentDidMount")},{key:"componentDidUpdate",value:r(function(P,Y){var pe=this,me=this.props,De=me.autoHeight,ze=me.autoWidth,gt=me.columnCount,qe=me.height,mt=me.rowCount,at=me.scrollToAlignment,qt=me.scrollToColumn,mn=me.scrollToRow,On=me.width,ai=this.state,gi=ai.scrollLeft,Ei=ai.scrollPositionChangeReason,Gi=ai.scrollTop,qi=ai.instanceProps;this._handleInvalidatedGridSize();var rr=gt>0&&P.columnCount===0||mt>0&&P.rowCount===0;Ei===It.REQUESTED&&(!ze&&gi>=0&&(gi!==this._scrollingContainer.scrollLeft||rr)&&(this._scrollingContainer.scrollLeft=gi),!De&&Gi>=0&&(Gi!==this._scrollingContainer.scrollTop||rr)&&(this._scrollingContainer.scrollTop=Gi));var Ir=(P.width===0||P.height===0)&&qe>0&&On>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):dn({cellSizeAndPositionManager:qi.columnSizeAndPositionManager,previousCellsCount:P.columnCount,previousCellSize:P.columnWidth,previousScrollToAlignment:P.scrollToAlignment,previousScrollToIndex:P.scrollToColumn,previousSize:P.width,scrollOffset:gi,scrollToAlignment:at,scrollToIndex:qt,size:On,sizeJustIncreasedFromZero:Ir,updateScrollIndexCallback:r(function(){return pe._updateScrollLeftForScrollToColumn(pe.props)},"updateScrollIndexCallback")}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):dn({cellSizeAndPositionManager:qi.rowSizeAndPositionManager,previousCellsCount:P.rowCount,previousCellSize:P.rowHeight,previousScrollToAlignment:P.scrollToAlignment,previousScrollToIndex:P.scrollToRow,previousSize:P.height,scrollOffset:Gi,scrollToAlignment:at,scrollToIndex:mn,size:qe,sizeJustIncreasedFromZero:Ir,updateScrollIndexCallback:r(function(){return pe._updateScrollTopForScrollToRow(pe.props)},"updateScrollIndexCallback")}),this._invokeOnGridRenderedHelper(),gi!==Y.scrollLeft||Gi!==Y.scrollTop){var Ji=qi.rowSizeAndPositionManager.getTotalSize(),Wn=qi.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:gi,scrollTop:Gi,totalColumnsWidth:Wn,totalRowsHeight:Ji})}this._maybeCallOnScrollbarPresenceChange()},"componentDidUpdate")},{key:"componentWillUnmount",value:r(function(){this._disablePointerEventsTimeoutId&&cn(this._disablePointerEventsTimeoutId)},"componentWillUnmount")},{key:"render",value:r(function(){var P=this.props,Y=P.autoContainerWidth,pe=P.autoHeight,me=P.autoWidth,De=P.className,ze=P.containerProps,gt=P.containerRole,qe=P.containerStyle,mt=P.height,at=P.id,qt=P.noContentRenderer,mn=P.role,On=P.style,ai=P.tabIndex,gi=P.width,Ei=this.state,Gi=Ei.instanceProps,qi=Ei.needToResetStyleCache,rr=this._isScrolling(),Ir={boxSizing:"border-box",direction:"ltr",height:pe?"auto":mt,position:"relative",width:me?"auto":gi,WebkitOverflowScrolling:"touch",willChange:"transform"};qi&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var Ji=Gi.columnSizeAndPositionManager.getTotalSize(),Wn=Gi.rowSizeAndPositionManager.getTotalSize(),er=Wn>mt?Gi.scrollbarSize:0,vt=Ji>gi?Gi.scrollbarSize:0;(vt!==this._horizontalScrollBarSize||er!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=vt,this._verticalScrollBarSize=er,this._scrollbarPresenceChanged=!0),Ir.overflowX=Ji+er<=gi?"hidden":"auto",Ir.overflowY=Wn+vt<=mt?"hidden":"auto";var wt=this._childrenToDisplay,Jt=wt.length===0&&mt>0&&gi>0;return o.createElement("div",g({ref:this._setScrollingContainerRef},ze,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:v("ReactVirtualized__Grid",De),id:at,onScroll:this._onScroll,role:mn,style:st({},Ir,{},On),tabIndex:ai}),wt.length>0&&o.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:gt,style:st({width:Y?"auto":Ji,height:Wn,maxWidth:Ji,maxHeight:Wn,overflow:"hidden",pointerEvents:rr?"none":"",position:"relative"},qe)},wt),Jt&&qt())},"render")},{key:"_calculateChildrenToRender",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,pe=P.cellRenderer,me=P.cellRangeRenderer,De=P.columnCount,ze=P.deferredMeasurementCache,gt=P.height,qe=P.overscanColumnCount,mt=P.overscanIndicesGetter,at=P.overscanRowCount,qt=P.rowCount,mn=P.width,On=P.isScrollingOptOut,ai=Y.scrollDirectionHorizontal,gi=Y.scrollDirectionVertical,Ei=Y.instanceProps,Gi=this._initialScrollTop>0?this._initialScrollTop:Y.scrollTop,qi=this._initialScrollLeft>0?this._initialScrollLeft:Y.scrollLeft,rr=this._isScrolling(P,Y);if(this._childrenToDisplay=[],gt>0&&mn>0){var Ir=Ei.columnSizeAndPositionManager.getVisibleCellRange({containerSize:mn,offset:qi}),Ji=Ei.rowSizeAndPositionManager.getVisibleCellRange({containerSize:gt,offset:Gi}),Wn=Ei.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:mn,offset:qi}),er=Ei.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:gt,offset:Gi});this._renderedColumnStartIndex=Ir.start,this._renderedColumnStopIndex=Ir.stop,this._renderedRowStartIndex=Ji.start,this._renderedRowStopIndex=Ji.stop;var vt=mt({direction:"horizontal",cellCount:De,overscanCellsCount:qe,scrollDirection:ai,startIndex:typeof Ir.start=="number"?Ir.start:0,stopIndex:typeof Ir.stop=="number"?Ir.stop:-1}),wt=mt({direction:"vertical",cellCount:qt,overscanCellsCount:at,scrollDirection:gi,startIndex:typeof Ji.start=="number"?Ji.start:0,stopIndex:typeof Ji.stop=="number"?Ji.stop:-1}),Jt=vt.overscanStartIndex,_n=vt.overscanStopIndex,Yn=wt.overscanStartIndex,Ui=wt.overscanStopIndex;if(ze){if(!ze.hasFixedHeight()){for(var Oi=Yn;Oi<=Ui;Oi++)if(!ze.has(Oi,0)){Jt=0,_n=De-1;break}}if(!ze.hasFixedWidth()){for(var Ti=Jt;Ti<=_n;Ti++)if(!ze.has(0,Ti)){Yn=0,Ui=qt-1;break}}}this._childrenToDisplay=me({cellCache:this._cellCache,cellRenderer:pe,columnSizeAndPositionManager:Ei.columnSizeAndPositionManager,columnStartIndex:Jt,columnStopIndex:_n,deferredMeasurementCache:ze,horizontalOffsetAdjustment:Wn,isScrolling:rr,isScrollingOptOut:On,parent:this,rowSizeAndPositionManager:Ei.rowSizeAndPositionManager,rowStartIndex:Yn,rowStopIndex:Ui,scrollLeft:qi,scrollTop:Gi,styleCache:this._styleCache,verticalOffsetAdjustment:er,visibleColumnIndices:Ir,visibleRowIndices:Ji}),this._columnStartIndex=Jt,this._columnStopIndex=_n,this._rowStartIndex=Yn,this._rowStopIndex=Ui}},"_calculateChildrenToRender")},{key:"_debounceScrollEnded",value:r(function(){var P=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&cn(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Wt(this._debounceScrollEndedCallback,P)},"_debounceScrollEnded")},{key:"_handleInvalidatedGridSize",value:r(function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var P=this._deferredInvalidateColumnIndex,Y=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:P,rowIndex:Y})}},"_handleInvalidatedGridSize")},{key:"_invokeOnScrollMemoizer",value:r(function(P){var Y=this,pe=P.scrollLeft,me=P.scrollTop,De=P.totalColumnsWidth,ze=P.totalRowsHeight;this._onScrollMemoizer({callback:r(function(qe){var mt=qe.scrollLeft,at=qe.scrollTop,qt=Y.props,mn=qt.height,On=qt.onScroll,ai=qt.width;On({clientHeight:mn,clientWidth:ai,scrollHeight:ze,scrollLeft:mt,scrollTop:at,scrollWidth:De})},"callback"),indices:{scrollLeft:pe,scrollTop:me}})},"_invokeOnScrollMemoizer")},{key:"_isScrolling",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return Object.hasOwnProperty.call(P,"isScrolling")?Boolean(P.isScrolling):Boolean(Y.isScrolling)},"_isScrolling")},{key:"_maybeCallOnScrollbarPresenceChange",value:r(function(){if(this._scrollbarPresenceChanged){var P=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,P({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}},"_maybeCallOnScrollbarPresenceChange")},{key:"scrollToPosition",value:r(function(P){var Y=P.scrollLeft,pe=P.scrollTop,me=ie._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:Y,scrollTop:pe});me&&(me.needToResetStyleCache=!1,this.setState(me))},"scrollToPosition")},{key:"_getCalculatedScrollLeft",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return ie._getCalculatedScrollLeft(P,Y)},"_getCalculatedScrollLeft")},{key:"_updateScrollLeftForScrollToColumn",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,pe=ie._getScrollLeftForScrollToColumnStateUpdate(P,Y);pe&&(pe.needToResetStyleCache=!1,this.setState(pe))},"_updateScrollLeftForScrollToColumn")},{key:"_getCalculatedScrollTop",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return ie._getCalculatedScrollTop(P,Y)},"_getCalculatedScrollTop")},{key:"_resetStyleCache",value:r(function(){var P=this._styleCache,Y=this._cellCache,pe=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var me=this._rowStartIndex;me<=this._rowStopIndex;me++)for(var De=this._columnStartIndex;De<=this._columnStopIndex;De++){var ze="".concat(me,"-").concat(De);this._styleCache[ze]=P[ze],pe&&(this._cellCache[ze]=Y[ze])}},"_resetStyleCache")},{key:"_updateScrollTopForScrollToRow",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,pe=ie._getScrollTopForScrollToRowStateUpdate(P,Y);pe&&(pe.needToResetStyleCache=!1,this.setState(pe))},"_updateScrollTopForScrollToRow")}],[{key:"getDerivedStateFromProps",value:r(function(P,Y){var pe={};P.columnCount===0&&Y.scrollLeft!==0||P.rowCount===0&&Y.scrollTop!==0?(pe.scrollLeft=0,pe.scrollTop=0):(P.scrollLeft!==Y.scrollLeft&&P.scrollToColumn<0||P.scrollTop!==Y.scrollTop&&P.scrollToRow<0)&&Object.assign(pe,ie._getScrollToPositionStateUpdate({prevState:Y,scrollLeft:P.scrollLeft,scrollTop:P.scrollTop}));var me=Y.instanceProps;pe.needToResetStyleCache=!1,(P.columnWidth!==me.prevColumnWidth||P.rowHeight!==me.prevRowHeight)&&(pe.needToResetStyleCache=!0),me.columnSizeAndPositionManager.configure({cellCount:P.columnCount,estimatedCellSize:ie._getEstimatedColumnSize(P),cellSizeGetter:ie._wrapSizeGetter(P.columnWidth)}),me.rowSizeAndPositionManager.configure({cellCount:P.rowCount,estimatedCellSize:ie._getEstimatedRowSize(P),cellSizeGetter:ie._wrapSizeGetter(P.rowHeight)}),(me.prevColumnCount===0||me.prevRowCount===0)&&(me.prevColumnCount=0,me.prevRowCount=0),P.autoHeight&&P.isScrolling===!1&&me.prevIsScrolling===!0&&Object.assign(pe,{isScrolling:!1});var De,ze;return _({cellCount:me.prevColumnCount,cellSize:typeof me.prevColumnWidth=="number"?me.prevColumnWidth:null,computeMetadataCallback:r(function(){return me.columnSizeAndPositionManager.resetCell(0)},"computeMetadataCallback"),computeMetadataCallbackProps:P,nextCellsCount:P.columnCount,nextCellSize:typeof P.columnWidth=="number"?P.columnWidth:null,nextScrollToIndex:P.scrollToColumn,scrollToIndex:me.prevScrollToColumn,updateScrollOffsetForScrollToIndex:r(function(){De=ie._getScrollLeftForScrollToColumnStateUpdate(P,Y)},"updateScrollOffsetForScrollToIndex")}),_({cellCount:me.prevRowCount,cellSize:typeof me.prevRowHeight=="number"?me.prevRowHeight:null,computeMetadataCallback:r(function(){return me.rowSizeAndPositionManager.resetCell(0)},"computeMetadataCallback"),computeMetadataCallbackProps:P,nextCellsCount:P.rowCount,nextCellSize:typeof P.rowHeight=="number"?P.rowHeight:null,nextScrollToIndex:P.scrollToRow,scrollToIndex:me.prevScrollToRow,updateScrollOffsetForScrollToIndex:r(function(){ze=ie._getScrollTopForScrollToRowStateUpdate(P,Y)},"updateScrollOffsetForScrollToIndex")}),me.prevColumnCount=P.columnCount,me.prevColumnWidth=P.columnWidth,me.prevIsScrolling=P.isScrolling===!0,me.prevRowCount=P.rowCount,me.prevRowHeight=P.rowHeight,me.prevScrollToColumn=P.scrollToColumn,me.prevScrollToRow=P.scrollToRow,me.scrollbarSize=P.getScrollbarSize(),me.scrollbarSize===void 0?(me.scrollbarSizeMeasured=!1,me.scrollbarSize=0):me.scrollbarSizeMeasured=!0,pe.instanceProps=me,st({},pe,{},De,{},ze)},"getDerivedStateFromProps")},{key:"_getEstimatedColumnSize",value:r(function(P){return typeof P.columnWidth=="number"?P.columnWidth:P.estimatedColumnSize},"_getEstimatedColumnSize")},{key:"_getEstimatedRowSize",value:r(function(P){return typeof P.rowHeight=="number"?P.rowHeight:P.estimatedRowSize},"_getEstimatedRowSize")},{key:"_getScrollToPositionStateUpdate",value:r(function(P){var Y=P.prevState,pe=P.scrollLeft,me=P.scrollTop,De={scrollPositionChangeReason:It.REQUESTED};return typeof pe=="number"&&pe>=0&&(De.scrollDirectionHorizontal=pe>Y.scrollLeft?yt:ct,De.scrollLeft=pe),typeof me=="number"&&me>=0&&(De.scrollDirectionVertical=me>Y.scrollTop?yt:ct,De.scrollTop=me),typeof pe=="number"&&pe>=0&&pe!==Y.scrollLeft||typeof me=="number"&&me>=0&&me!==Y.scrollTop?De:{}},"_getScrollToPositionStateUpdate")},{key:"_wrapSizeGetter",value:r(function(P){return typeof P=="function"?P:function(){return P}},"_wrapSizeGetter")},{key:"_getCalculatedScrollLeft",value:r(function(P,Y){var pe=P.columnCount,me=P.height,De=P.scrollToAlignment,ze=P.scrollToColumn,gt=P.width,qe=Y.scrollLeft,mt=Y.instanceProps;if(pe>0){var at=pe-1,qt=ze<0?at:Math.min(at,ze),mn=mt.rowSizeAndPositionManager.getTotalSize(),On=mt.scrollbarSizeMeasured&&mn>me?mt.scrollbarSize:0;return mt.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:De,containerSize:gt-On,currentOffset:qe,targetIndex:qt})}return 0},"_getCalculatedScrollLeft")},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:r(function(P,Y){var pe=Y.scrollLeft,me=ie._getCalculatedScrollLeft(P,Y);return typeof me=="number"&&me>=0&&pe!==me?ie._getScrollToPositionStateUpdate({prevState:Y,scrollLeft:me,scrollTop:-1}):{}},"_getScrollLeftForScrollToColumnStateUpdate")},{key:"_getCalculatedScrollTop",value:r(function(P,Y){var pe=P.height,me=P.rowCount,De=P.scrollToAlignment,ze=P.scrollToRow,gt=P.width,qe=Y.scrollTop,mt=Y.instanceProps;if(me>0){var at=me-1,qt=ze<0?at:Math.min(at,ze),mn=mt.columnSizeAndPositionManager.getTotalSize(),On=mt.scrollbarSizeMeasured&&mn>gt?mt.scrollbarSize:0;return mt.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:De,containerSize:pe-On,currentOffset:qe,targetIndex:qt})}return 0},"_getCalculatedScrollTop")},{key:"_getScrollTopForScrollToRowStateUpdate",value:r(function(P,Y){var pe=Y.scrollTop,me=ie._getCalculatedScrollTop(P,Y);return typeof me=="number"&&me>=0&&pe!==me?ie._getScrollToPositionStateUpdate({prevState:Y,scrollLeft:-1,scrollTop:me}):{}},"_getScrollTopForScrollToRowStateUpdate")}]),ie}(o.PureComponent),n(J,"propTypes",null),Xe);n(et,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:bn,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:Wi,noContentRenderer:ve,onScroll:r(function(){},"onScroll"),onScrollbarPresenceChange:r(function(){},"onScrollbarPresenceChange"),onSectionRendered:r(function(){},"onSectionRendered"),overscanColumnCount:0,overscanIndicesGetter:Xt,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:pt,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),(0,f.polyfill)(et);const G=et;var ne=null,Me=1,Re="horizontal",Ft="vertical";function ot(te){var ie=te.cellCount,$=te.overscanCellsCount,P=te.scrollDirection,Y=te.startIndex,pe=te.stopIndex;return $=Math.max(1,$),P===Me?{overscanStartIndex:Math.max(0,Y-1),overscanStopIndex:Math.min(ie-1,pe+$)}:{overscanStartIndex:Math.max(0,Y-$),overscanStopIndex:Math.min(ie-1,pe+1)}}r(ot,"accessibilityOverscanIndicesGetter_defaultOverscanIndicesGetter");var Tt=null,we,Ue;function F(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(F,"ArrowKeyStepper_ownKeys");function Oe(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?F($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):F($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(Oe,"ArrowKeyStepper_objectSpread");var se=(Ue=we=function(te){t(ie,te);function ie(){var $,P;u(this,ie);for(var Y=arguments.length,pe=new Array(Y),me=0;me<Y;me++)pe[me]=arguments[me];return P=s(this,($=i(ie)).call.apply($,[this].concat(pe))),n(a(P),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),n(a(P),"_columnStartIndex",0),n(a(P),"_columnStopIndex",0),n(a(P),"_rowStartIndex",0),n(a(P),"_rowStopIndex",0),n(a(P),"_onKeyDown",function(De){var ze=P.props,gt=ze.columnCount,qe=ze.disabled,mt=ze.mode,at=ze.rowCount;if(!qe){var qt=P._getScrollState(),mn=qt.scrollToColumn,On=qt.scrollToRow,ai=P._getScrollState(),gi=ai.scrollToColumn,Ei=ai.scrollToRow;switch(De.key){case"ArrowDown":Ei=Math.min(mt==="cells"?Ei+1:P._rowStopIndex+1,at-1);break;case"ArrowLeft":gi=Math.max(mt==="cells"?gi-1:P._columnStartIndex-1,0);break;case"ArrowRight":gi=Math.min(mt==="cells"?gi+1:P._columnStopIndex+1,gt-1);break;case"ArrowUp":Ei=Math.max(mt==="cells"?Ei-1:P._rowStartIndex-1,0);break}(gi!==mn||Ei!==On)&&(De.preventDefault(),P._updateScrollState({scrollToColumn:gi,scrollToRow:Ei}))}}),n(a(P),"_onSectionRendered",function(De){var ze=De.columnStartIndex,gt=De.columnStopIndex,qe=De.rowStartIndex,mt=De.rowStopIndex;P._columnStartIndex=ze,P._columnStopIndex=gt,P._rowStartIndex=qe,P._rowStopIndex=mt}),P}return r(ie,"ArrowKeyStepper"),p(ie,[{key:"setScrollIndexes",value:r(function(P){var Y=P.scrollToColumn,pe=P.scrollToRow;this.setState({scrollToRow:pe,scrollToColumn:Y})},"setScrollIndexes")},{key:"render",value:r(function(){var P=this.props,Y=P.className,pe=P.children,me=this._getScrollState(),De=me.scrollToColumn,ze=me.scrollToRow;return o.createElement("div",{className:Y,onKeyDown:this._onKeyDown},pe({onSectionRendered:this._onSectionRendered,scrollToColumn:De,scrollToRow:ze}))},"render")},{key:"_getScrollState",value:r(function(){return this.props.isControlled?this.props:this.state},"_getScrollState")},{key:"_updateScrollState",value:r(function(P){var Y=P.scrollToColumn,pe=P.scrollToRow,me=this.props,De=me.isControlled,ze=me.onScrollToChange;typeof ze=="function"&&ze({scrollToColumn:Y,scrollToRow:pe}),De||this.setState({scrollToColumn:Y,scrollToRow:pe})},"_updateScrollState")}],[{key:"getDerivedStateFromProps",value:r(function(P,Y){return P.isControlled?{}:P.scrollToColumn!==Y.instanceProps.prevScrollToColumn||P.scrollToRow!==Y.instanceProps.prevScrollToRow?Oe({},Y,{scrollToColumn:P.scrollToColumn,scrollToRow:P.scrollToRow,instanceProps:{prevScrollToColumn:P.scrollToColumn,prevScrollToRow:P.scrollToRow}}):{}},"getDerivedStateFromProps")}]),ie}(o.PureComponent),n(we,"propTypes",null),Ue);n(se,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),(0,f.polyfill)(se);const ue=se;var X=r(()=>'<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',"resizeTriggersHtml");function lt(te,ie){var $;typeof ie<"u"?$=ie:typeof window<"u"?$=window:typeof self<"u"?$=self:$=d.g;var P=typeof $.document<"u"&&$.document.attachEvent;if(!P){var Y=function(){var Ji=$.requestAnimationFrame||$.mozRequestAnimationFrame||$.webkitRequestAnimationFrame||function(Wn){return $.setTimeout(Wn,20)};return function(Wn){return Ji(Wn)}}(),pe=function(){var Ji=$.cancelAnimationFrame||$.mozCancelAnimationFrame||$.webkitCancelAnimationFrame||$.clearTimeout;return function(Wn){return Ji(Wn)}}(),me=r(function(Wn){var er=Wn.__resizeTriggers__,vt=er.firstElementChild,wt=er.lastElementChild,Jt=vt.firstElementChild;wt.scrollLeft=wt.scrollWidth,wt.scrollTop=wt.scrollHeight,Jt.style.width=vt.offsetWidth+1+"px",Jt.style.height=vt.offsetHeight+1+"px",vt.scrollLeft=vt.scrollWidth,vt.scrollTop=vt.scrollHeight},"resetTriggers"),De=r(function(Wn){return Wn.offsetWidth!=Wn.__resizeLast__.width||Wn.offsetHeight!=Wn.__resizeLast__.height},"checkTriggers"),ze=r(function(Wn){if(!(Wn.target.className&&typeof Wn.target.className.indexOf=="function"&&Wn.target.className.indexOf("contract-trigger")<0&&Wn.target.className.indexOf("expand-trigger")<0)){var er=this;me(this),this.__resizeRAF__&&pe(this.__resizeRAF__),this.__resizeRAF__=Y(function(){De(er)&&(er.__resizeLast__.width=er.offsetWidth,er.__resizeLast__.height=er.offsetHeight,er.__resizeListeners__.forEach(function(vt){vt.call(er,Wn)}))})}},"scrollListener"),gt=!1,qe="",mt="animationstart",at="Webkit Moz O ms".split(" "),qt="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),mn="";{var On=$.document.createElement("fakeelement");if(On.style.animationName!==void 0&&(gt=!0),gt===!1){for(var ai=0;ai<at.length;ai++)if(On.style[at[ai]+"AnimationName"]!==void 0){mn=at[ai],qe="-"+mn.toLowerCase()+"-",mt=qt[ai],gt=!0;break}}}var gi="resizeanim",Ei="@"+qe+"keyframes "+gi+" { from { opacity: 0; } to { opacity: 0; } } ",Gi=qe+"animation: 1ms "+gi+"; "}var qi=r(function(Wn){if(!Wn.getElementById("detectElementResize")){var er=(Ei||"")+".resize-triggers { "+(Gi||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',vt=Wn.head||Wn.getElementsByTagName("head")[0],wt=Wn.createElement("style");wt.id="detectElementResize",wt.type="text/css",te!=null&&wt.setAttribute("nonce",te),wt.styleSheet?wt.styleSheet.cssText=er:wt.appendChild(Wn.createTextNode(er)),vt.appendChild(wt)}},"createStyles"),rr=r(function(Wn,er){if(P)Wn.attachEvent("onresize",er);else{if(!Wn.__resizeTriggers__){var vt=Wn.ownerDocument,wt=$.getComputedStyle(Wn);if(wt&&wt.position=="static"&&(Wn.style.position="relative"),qi(vt),Wn.__resizeLast__={},Wn.__resizeListeners__=[],(Wn.__resizeTriggers__=vt.createElement("div")).className="resize-triggers",window.trustedTypes){var Jt=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:X});Wn.__resizeTriggers__.innerHTML=Jt.createHTML("")}else Wn.__resizeTriggers__.innerHTML=X();Wn.appendChild(Wn.__resizeTriggers__),me(Wn),Wn.addEventListener("scroll",ze,!0),mt&&(Wn.__resizeTriggers__.__animationListener__=r(function(Yn){Yn.animationName==gi&&me(Wn)},"animationListener"),Wn.__resizeTriggers__.addEventListener(mt,Wn.__resizeTriggers__.__animationListener__))}Wn.__resizeListeners__.push(er)}},"addResizeListener"),Ir=r(function(Wn,er){if(P)Wn.detachEvent("onresize",er);else if(Wn.__resizeListeners__.splice(Wn.__resizeListeners__.indexOf(er),1),!Wn.__resizeListeners__.length){Wn.removeEventListener("scroll",ze,!0),Wn.__resizeTriggers__.__animationListener__&&(Wn.__resizeTriggers__.removeEventListener(mt,Wn.__resizeTriggers__.__animationListener__),Wn.__resizeTriggers__.__animationListener__=null);try{Wn.__resizeTriggers__=!Wn.removeChild(Wn.__resizeTriggers__)}catch{}}},"removeResizeListener");return{addResizeListener:rr,removeResizeListener:Ir}}r(lt,"createDetectElementResize");var Ae,Ye;function Ht(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(Ht,"AutoSizer_ownKeys");function Mt(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?Ht($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):Ht($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(Mt,"AutoSizer_objectSpread");var Qn=(Ye=Ae=function(te){t(ie,te);function ie(){var $,P;u(this,ie);for(var Y=arguments.length,pe=new Array(Y),me=0;me<Y;me++)pe[me]=arguments[me];return P=s(this,($=i(ie)).call.apply($,[this].concat(pe))),n(a(P),"state",{height:P.props.defaultHeight||0,width:P.props.defaultWidth||0}),n(a(P),"_parentNode",void 0),n(a(P),"_autoSizer",void 0),n(a(P),"_window",void 0),n(a(P),"_detectElementResize",void 0),n(a(P),"_onResize",function(){var De=P.props,ze=De.disableHeight,gt=De.disableWidth,qe=De.onResize;if(P._parentNode){var mt=P._parentNode.offsetHeight||0,at=P._parentNode.offsetWidth||0,qt=P._window||window,mn=qt.getComputedStyle(P._parentNode)||{},On=parseInt(mn.paddingLeft,10)||0,ai=parseInt(mn.paddingRight,10)||0,gi=parseInt(mn.paddingTop,10)||0,Ei=parseInt(mn.paddingBottom,10)||0,Gi=mt-gi-Ei,qi=at-On-ai;(!ze&&P.state.height!==Gi||!gt&&P.state.width!==qi)&&(P.setState({height:mt-gi-Ei,width:at-On-ai}),qe({height:mt,width:at}))}}),n(a(P),"_setRef",function(De){P._autoSizer=De}),P}return r(ie,"AutoSizer"),p(ie,[{key:"componentDidMount",value:r(function(){var P=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=lt(P,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())},"componentDidMount")},{key:"componentWillUnmount",value:r(function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)},"componentWillUnmount")},{key:"render",value:r(function(){var P=this.props,Y=P.children,pe=P.className,me=P.disableHeight,De=P.disableWidth,ze=P.style,gt=this.state,qe=gt.height,mt=gt.width,at={overflow:"visible"},qt={};return me||(at.height=0,qt.height=qe),De||(at.width=0,qt.width=mt),o.createElement("div",{className:pe,ref:this._setRef,style:Mt({},at,{},ze)},Y(qt))},"render")}]),ie}(o.Component),n(Ae,"propTypes",null),Ye);n(Qn,"defaultProps",{onResize:r(function(){},"onResize"),disableHeight:!1,disableWidth:!1,style:{}});var $n=d(9322124936),Vn=null,kn,tn,Gn=(tn=kn=function(te){t(ie,te);function ie(){var $,P;u(this,ie);for(var Y=arguments.length,pe=new Array(Y),me=0;me<Y;me++)pe[me]=arguments[me];return P=s(this,($=i(ie)).call.apply($,[this].concat(pe))),n(a(P),"_child",void 0),n(a(P),"_measure",function(){var De=P.props,ze=De.cache,gt=De.columnIndex,qe=gt===void 0?0:gt,mt=De.parent,at=De.rowIndex,qt=at===void 0?P.props.index||0:at,mn=P._getCellMeasurements(),On=mn.height,ai=mn.width;(On!==ze.getHeight(qt,qe)||ai!==ze.getWidth(qt,qe))&&(ze.set(qt,qe,ai,On),mt&&typeof mt.recomputeGridSize=="function"&&mt.recomputeGridSize({columnIndex:qe,rowIndex:qt}))}),n(a(P),"_registerChild",function(De){De&&!(De instanceof Element)&&console.warn("CellMeasurer registerChild expects to be passed Element or null"),P._child=De,De&&P._maybeMeasureCell()}),P}return r(ie,"CellMeasurer"),p(ie,[{key:"componentDidMount",value:r(function(){this._maybeMeasureCell()},"componentDidMount")},{key:"componentDidUpdate",value:r(function(){this._maybeMeasureCell()},"componentDidUpdate")},{key:"render",value:r(function(){var P=this.props.children;return typeof P=="function"?P({measure:this._measure,registerChild:this._registerChild}):P},"render")},{key:"_getCellMeasurements",value:r(function(){var P=this.props.cache,Y=this._child||(0,$n.findDOMNode)(this);if(Y&&Y.ownerDocument&&Y.ownerDocument.defaultView&&Y instanceof Y.ownerDocument.defaultView.HTMLElement){var pe=Y.style.width,me=Y.style.height;P.hasFixedWidth()||(Y.style.width="auto"),P.hasFixedHeight()||(Y.style.height="auto");var De=Math.ceil(Y.offsetHeight),ze=Math.ceil(Y.offsetWidth);return pe&&(Y.style.width=pe),me&&(Y.style.height=me),{height:De,width:ze}}else return{height:0,width:0}},"_getCellMeasurements")},{key:"_maybeMeasureCell",value:r(function(){var P=this.props,Y=P.cache,pe=P.columnIndex,me=pe===void 0?0:pe,De=P.parent,ze=P.rowIndex,gt=ze===void 0?this.props.index||0:ze;if(!Y.has(gt,me)){var qe=this._getCellMeasurements(),mt=qe.height,at=qe.width;Y.set(gt,me,at,mt),De&&typeof De.invalidateCellSizeAfterRender=="function"&&De.invalidateCellSizeAfterRender({columnIndex:me,rowIndex:gt})}},"_maybeMeasureCell")}]),ie}(o.PureComponent),n(kn,"propTypes",null),tn);n(Gn,"__internalCellMeasurerFlag",!1);var Si=30,nr=100,ln=function(){function te(){var ie=this,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};u(this,te),n(this,"_cellHeightCache",{}),n(this,"_cellWidthCache",{}),n(this,"_columnWidthCache",{}),n(this,"_rowHeightCache",{}),n(this,"_defaultHeight",void 0),n(this,"_defaultWidth",void 0),n(this,"_minHeight",void 0),n(this,"_minWidth",void 0),n(this,"_keyMapper",void 0),n(this,"_hasFixedHeight",void 0),n(this,"_hasFixedWidth",void 0),n(this,"_columnCount",0),n(this,"_rowCount",0),n(this,"columnWidth",function(qe){var mt=qe.index,at=ie._keyMapper(0,mt);return ie._columnWidthCache[at]!==void 0?ie._columnWidthCache[at]:ie._defaultWidth}),n(this,"rowHeight",function(qe){var mt=qe.index,at=ie._keyMapper(mt,0);return ie._rowHeightCache[at]!==void 0?ie._rowHeightCache[at]:ie._defaultHeight});var P=$.defaultHeight,Y=$.defaultWidth,pe=$.fixedHeight,me=$.fixedWidth,De=$.keyMapper,ze=$.minHeight,gt=$.minWidth;this._hasFixedHeight=pe===!0,this._hasFixedWidth=me===!0,this._minHeight=ze||0,this._minWidth=gt||0,this._keyMapper=De||jt,this._defaultHeight=Math.max(this._minHeight,typeof P=="number"?P:Si),this._defaultWidth=Math.max(this._minWidth,typeof Y=="number"?Y:nr)}return r(te,"CellMeasurerCache"),p(te,[{key:"clear",value:r(function($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Y=this._keyMapper($,P);delete this._cellHeightCache[Y],delete this._cellWidthCache[Y],this._updateCachedColumnAndRowSizes($,P)},"clear")},{key:"clearAll",value:r(function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0},"clearAll")},{key:"hasFixedHeight",value:r(function(){return this._hasFixedHeight},"hasFixedHeight")},{key:"hasFixedWidth",value:r(function(){return this._hasFixedWidth},"hasFixedWidth")},{key:"getHeight",value:r(function($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;var Y=this._keyMapper($,P);return this._cellHeightCache[Y]!==void 0?Math.max(this._minHeight,this._cellHeightCache[Y]):this._defaultHeight},"getHeight")},{key:"getWidth",value:r(function($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;var Y=this._keyMapper($,P);return this._cellWidthCache[Y]!==void 0?Math.max(this._minWidth,this._cellWidthCache[Y]):this._defaultWidth},"getWidth")},{key:"has",value:r(function($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Y=this._keyMapper($,P);return this._cellHeightCache[Y]!==void 0},"has")},{key:"set",value:r(function($,P,Y,pe){var me=this._keyMapper($,P);P>=this._columnCount&&(this._columnCount=P+1),$>=this._rowCount&&(this._rowCount=$+1),this._cellHeightCache[me]=pe,this._cellWidthCache[me]=Y,this._updateCachedColumnAndRowSizes($,P)},"set")},{key:"_updateCachedColumnAndRowSizes",value:r(function($,P){if(!this._hasFixedWidth){for(var Y=0,pe=0;pe<this._rowCount;pe++)Y=Math.max(Y,this.getWidth(pe,P));var me=this._keyMapper(0,P);this._columnWidthCache[me]=Y}if(!this._hasFixedHeight){for(var De=0,ze=0;ze<this._columnCount;ze++)De=Math.max(De,this.getHeight($,ze));var gt=this._keyMapper($,0);this._rowHeightCache[gt]=De}},"_updateCachedColumnAndRowSizes")},{key:"defaultHeight",get:r(function(){return this._defaultHeight},"get")},{key:"defaultWidth",get:r(function(){return this._defaultWidth},"get")}]),te}();function jt(te,ie){return"".concat(te,"-").concat(ie)}r(jt,"defaultKeyMapper");const Fn=null;function Hn(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(Hn,"CollectionView_ownKeys");function wi(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?Hn($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):Hn($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(wi,"CollectionView_objectSpread");var Pi=150,ni={OBSERVED:"observed",REQUESTED:"requested"},Kn=function(te){t(ie,te);function ie(){var $,P;u(this,ie);for(var Y=arguments.length,pe=new Array(Y),me=0;me<Y;me++)pe[me]=arguments[me];return P=s(this,($=i(ie)).call.apply($,[this].concat(pe))),n(a(P),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),n(a(P),"_calculateSizeAndPositionDataOnNextUpdate",!1),n(a(P),"_onSectionRenderedMemoizer",He()),n(a(P),"_onScrollMemoizer",He(!1)),n(a(P),"_invokeOnSectionRenderedHelper",function(){var De=P.props,ze=De.cellLayoutManager,gt=De.onSectionRendered;P._onSectionRenderedMemoizer({callback:gt,indices:{indices:ze.getLastRenderedIndices()}})}),n(a(P),"_setScrollingContainerRef",function(De){P._scrollingContainer=De}),n(a(P),"_updateScrollPositionForScrollToCell",function(){var De=P.props,ze=De.cellLayoutManager,gt=De.height,qe=De.scrollToAlignment,mt=De.scrollToCell,at=De.width,qt=P.state,mn=qt.scrollLeft,On=qt.scrollTop;if(mt>=0){var ai=ze.getScrollPositionForCell({align:qe,cellIndex:mt,height:gt,scrollLeft:mn,scrollTop:On,width:at});(ai.scrollLeft!==mn||ai.scrollTop!==On)&&P._setScrollPosition(ai)}}),n(a(P),"_onScroll",function(De){if(De.target===P._scrollingContainer){P._enablePointerEventsAfterDelay();var ze=P.props,gt=ze.cellLayoutManager,qe=ze.height,mt=ze.isScrollingChange,at=ze.width,qt=P._scrollbarSize,mn=gt.getTotalSize(),On=mn.height,ai=mn.width,gi=Math.max(0,Math.min(ai-at+qt,De.target.scrollLeft)),Ei=Math.max(0,Math.min(On-qe+qt,De.target.scrollTop));if(P.state.scrollLeft!==gi||P.state.scrollTop!==Ei){var Gi=De.cancelable?ni.OBSERVED:ni.REQUESTED;P.state.isScrolling||mt(!0),P.setState({isScrolling:!0,scrollLeft:gi,scrollPositionChangeReason:Gi,scrollTop:Ei})}P._invokeOnScrollMemoizer({scrollLeft:gi,scrollTop:Ei,totalWidth:ai,totalHeight:On})}}),P._scrollbarSize=Wi(),P._scrollbarSize===void 0?(P._scrollbarSizeMeasured=!1,P._scrollbarSize=0):P._scrollbarSizeMeasured=!0,P}return r(ie,"CollectionView"),p(ie,[{key:"recomputeCellSizesAndPositions",value:r(function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()},"recomputeCellSizesAndPositions")},{key:"componentDidMount",value:r(function(){var P=this.props,Y=P.cellLayoutManager,pe=P.scrollLeft,me=P.scrollToCell,De=P.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=Wi(),this._scrollbarSizeMeasured=!0,this.setState({})),me>=0?this._updateScrollPositionForScrollToCell():(pe>=0||De>=0)&&this._setScrollPosition({scrollLeft:pe,scrollTop:De}),this._invokeOnSectionRenderedHelper();var ze=Y.getTotalSize(),gt=ze.height,qe=ze.width;this._invokeOnScrollMemoizer({scrollLeft:pe||0,scrollTop:De||0,totalHeight:gt,totalWidth:qe})},"componentDidMount")},{key:"componentDidUpdate",value:r(function(P,Y){var pe=this.props,me=pe.height,De=pe.scrollToAlignment,ze=pe.scrollToCell,gt=pe.width,qe=this.state,mt=qe.scrollLeft,at=qe.scrollPositionChangeReason,qt=qe.scrollTop;at===ni.REQUESTED&&(mt>=0&&mt!==Y.scrollLeft&&mt!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=mt),qt>=0&&qt!==Y.scrollTop&&qt!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=qt)),(me!==P.height||De!==P.scrollToAlignment||ze!==P.scrollToCell||gt!==P.width)&&this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()},"componentDidUpdate")},{key:"componentWillUnmount",value:r(function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)},"componentWillUnmount")},{key:"render",value:r(function(){var P=this.props,Y=P.autoHeight,pe=P.cellCount,me=P.cellLayoutManager,De=P.className,ze=P.height,gt=P.horizontalOverscanSize,qe=P.id,mt=P.noContentRenderer,at=P.style,qt=P.verticalOverscanSize,mn=P.width,On=this.state,ai=On.isScrolling,gi=On.scrollLeft,Ei=On.scrollTop;(this._lastRenderedCellCount!==pe||this._lastRenderedCellLayoutManager!==me||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=pe,this._lastRenderedCellLayoutManager=me,this._calculateSizeAndPositionDataOnNextUpdate=!1,me.calculateSizeAndPositionData());var Gi=me.getTotalSize(),qi=Gi.height,rr=Gi.width,Ir=Math.max(0,gi-gt),Ji=Math.max(0,Ei-qt),Wn=Math.min(rr,gi+mn+gt),er=Math.min(qi,Ei+ze+qt),vt=ze>0&&mn>0?me.cellRenderers({height:er-Ji,isScrolling:ai,width:Wn-Ir,x:Ir,y:Ji}):[],wt={boxSizing:"border-box",direction:"ltr",height:Y?"auto":ze,position:"relative",WebkitOverflowScrolling:"touch",width:mn,willChange:"transform"},Jt=qi>ze?this._scrollbarSize:0,_n=rr>mn?this._scrollbarSize:0;return wt.overflowX=rr+Jt<=mn?"hidden":"auto",wt.overflowY=qi+_n<=ze?"hidden":"auto",o.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:v("ReactVirtualized__Collection",De),id:qe,onScroll:this._onScroll,role:"grid",style:wi({},wt,{},at),tabIndex:0},pe>0&&o.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:qi,maxHeight:qi,maxWidth:rr,overflow:"hidden",pointerEvents:ai?"none":"",width:rr}},vt),pe===0&&mt())},"render")},{key:"_enablePointerEventsAfterDelay",value:r(function(){var P=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){var Y=P.props.isScrollingChange;Y(!1),P._disablePointerEventsTimeoutId=null,P.setState({isScrolling:!1})},Pi)},"_enablePointerEventsAfterDelay")},{key:"_invokeOnScrollMemoizer",value:r(function(P){var Y=this,pe=P.scrollLeft,me=P.scrollTop,De=P.totalHeight,ze=P.totalWidth;this._onScrollMemoizer({callback:r(function(qe){var mt=qe.scrollLeft,at=qe.scrollTop,qt=Y.props,mn=qt.height,On=qt.onScroll,ai=qt.width;On({clientHeight:mn,clientWidth:ai,scrollHeight:De,scrollLeft:mt,scrollTop:at,scrollWidth:ze})},"callback"),indices:{scrollLeft:pe,scrollTop:me}})},"_invokeOnScrollMemoizer")},{key:"_setScrollPosition",value:r(function(P){var Y=P.scrollLeft,pe=P.scrollTop,me={scrollPositionChangeReason:ni.REQUESTED};Y>=0&&(me.scrollLeft=Y),pe>=0&&(me.scrollTop=pe),(Y>=0&&Y!==this.state.scrollLeft||pe>=0&&pe!==this.state.scrollTop)&&this.setState(me)},"_setScrollPosition")}],[{key:"getDerivedStateFromProps",value:r(function(P,Y){return P.cellCount===0&&(Y.scrollLeft!==0||Y.scrollTop!==0)?{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:ni.REQUESTED}:P.scrollLeft!==Y.scrollLeft||P.scrollTop!==Y.scrollTop?{scrollLeft:P.scrollLeft!=null?P.scrollLeft:Y.scrollLeft,scrollTop:P.scrollTop!=null?P.scrollTop:Y.scrollTop,scrollPositionChangeReason:ni.REQUESTED}:null},"getDerivedStateFromProps")}]),ie}(o.PureComponent);n(Kn,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:r(function(){return null},"noContentRenderer"),onScroll:r(function(){return null},"onScroll"),onSectionRendered:r(function(){return null},"onSectionRendered"),scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),Kn.propTypes={},(0,f.polyfill)(Kn);const ji=Kn;var $i=null,sr=null,Ai=null,Lr=null,Vi=null,Nr=function(){function te(ie){var $=ie.height,P=ie.width,Y=ie.x,pe=ie.y;u(this,te),this.height=$,this.width=P,this.x=Y,this.y=pe,this._indexMap={},this._indices=[]}return r(te,"Section"),p(te,[{key:"addCellIndex",value:r(function($){var P=$.index;this._indexMap[P]||(this._indexMap[P]=!0,this._indices.push(P))},"addCellIndex")},{key:"getCellIndices",value:r(function(){return this._indices},"getCellIndices")},{key:"toString",value:r(function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)},"toString")}]),te}(),_i=100,Ci=function(){function te(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_i;u(this,te),this._sectionSize=ie,this._cellMetadata=[],this._sections={}}return r(te,"SectionManager"),p(te,[{key:"getCellIndices",value:r(function($){var P=$.height,Y=$.width,pe=$.x,me=$.y,De={};return this.getSections({height:P,width:Y,x:pe,y:me}).forEach(function(ze){return ze.getCellIndices().forEach(function(gt){De[gt]=gt})}),Object.keys(De).map(function(ze){return De[ze]})},"getCellIndices")},{key:"getCellMetadata",value:r(function($){var P=$.index;return this._cellMetadata[P]},"getCellMetadata")},{key:"getSections",value:r(function($){for(var P=$.height,Y=$.width,pe=$.x,me=$.y,De=Math.floor(pe/this._sectionSize),ze=Math.floor((pe+Y-1)/this._sectionSize),gt=Math.floor(me/this._sectionSize),qe=Math.floor((me+P-1)/this._sectionSize),mt=[],at=De;at<=ze;at++)for(var qt=gt;qt<=qe;qt++){var mn="".concat(at,".").concat(qt);this._sections[mn]||(this._sections[mn]=new Nr({height:this._sectionSize,width:this._sectionSize,x:at*this._sectionSize,y:qt*this._sectionSize})),mt.push(this._sections[mn])}return mt},"getSections")},{key:"getTotalSectionCount",value:r(function(){return Object.keys(this._sections).length},"getTotalSectionCount")},{key:"toString",value:r(function(){var $=this;return Object.keys(this._sections).map(function(P){return $._sections[P].toString()})},"toString")},{key:"registerCell",value:r(function($){var P=$.cellMetadatum,Y=$.index;this._cellMetadata[Y]=P,this.getSections(P).forEach(function(pe){return pe.addCellIndex({index:Y})})},"registerCell")}]),te}();function N(te){for(var ie=te.cellCount,$=te.cellSizeAndPositionGetter,P=te.sectionSize,Y=[],pe=new Ci(P),me=0,De=0,ze=0;ze<ie;ze++){var gt=$({index:ze});if(gt.height==null||isNaN(gt.height)||gt.width==null||isNaN(gt.width)||gt.x==null||isNaN(gt.x)||gt.y==null||isNaN(gt.y))throw Error("Invalid metadata returned for cell ".concat(ze,`:
        x:`).concat(gt.x,", y:").concat(gt.y,", width:").concat(gt.width,", height:").concat(gt.height));me=Math.max(me,gt.y+gt.height),De=Math.max(De,gt.x+gt.width),Y[ze]=gt,pe.registerCell({cellMetadatum:gt,index:ze})}return{cellMetadata:Y,height:me,sectionManager:pe,width:De}}r(N,"calculateSizeAndPositionData_calculateSizeAndPositionData");function he(te){var ie=te.align,$=ie===void 0?"auto":ie,P=te.cellOffset,Y=te.cellSize,pe=te.containerSize,me=te.currentOffset,De=P,ze=De-pe+Y;switch($){case"start":return De;case"end":return ze;case"center":return De-(pe-Y)/2;default:return Math.max(ze,Math.min(De,me))}}r(he,"getUpdatedOffsetForIndex");var je=function(te){t(ie,te);function ie($,P){var Y;return u(this,ie),Y=s(this,i(ie).call(this,$,P)),Y._cellMetadata=[],Y._lastRenderedCellIndices=[],Y._cellCache=[],Y._isScrollingChange=Y._isScrollingChange.bind(a(Y)),Y._setCollectionViewRef=Y._setCollectionViewRef.bind(a(Y)),Y}return r(ie,"Collection"),p(ie,[{key:"forceUpdate",value:r(function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()},"forceUpdate")},{key:"recomputeCellSizesAndPositions",value:r(function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()},"recomputeCellSizesAndPositions")},{key:"render",value:r(function(){var P=g({},this.props);return o.createElement(ji,g({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},P))},"render")},{key:"calculateSizeAndPositionData",value:r(function(){var P=this.props,Y=P.cellCount,pe=P.cellSizeAndPositionGetter,me=P.sectionSize,De=N({cellCount:Y,cellSizeAndPositionGetter:pe,sectionSize:me});this._cellMetadata=De.cellMetadata,this._sectionManager=De.sectionManager,this._height=De.height,this._width=De.width},"calculateSizeAndPositionData")},{key:"getLastRenderedIndices",value:r(function(){return this._lastRenderedCellIndices},"getLastRenderedIndices")},{key:"getScrollPositionForCell",value:r(function(P){var Y=P.align,pe=P.cellIndex,me=P.height,De=P.scrollLeft,ze=P.scrollTop,gt=P.width,qe=this.props.cellCount;if(pe>=0&&pe<qe){var mt=this._cellMetadata[pe];De=he({align:Y,cellOffset:mt.x,cellSize:mt.width,containerSize:gt,currentOffset:De,targetIndex:pe}),ze=he({align:Y,cellOffset:mt.y,cellSize:mt.height,containerSize:me,currentOffset:ze,targetIndex:pe})}return{scrollLeft:De,scrollTop:ze}},"getScrollPositionForCell")},{key:"getTotalSize",value:r(function(){return{height:this._height,width:this._width}},"getTotalSize")},{key:"cellRenderers",value:r(function(P){var Y=this,pe=P.height,me=P.isScrolling,De=P.width,ze=P.x,gt=P.y,qe=this.props,mt=qe.cellGroupRenderer,at=qe.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:pe,width:De,x:ze,y:gt}),mt({cellCache:this._cellCache,cellRenderer:at,cellSizeAndPositionGetter:r(function(mn){var On=mn.index;return Y._sectionManager.getCellMetadata({index:On})},"cellSizeAndPositionGetter"),indices:this._lastRenderedCellIndices,isScrolling:me})},"cellRenderers")},{key:"_isScrollingChange",value:r(function(P){P||(this._cellCache=[])},"_isScrollingChange")},{key:"_setCollectionViewRef",value:r(function(P){this._collectionView=P},"_setCollectionViewRef")}]),ie}(o.PureComponent);n(je,"defaultProps",{"aria-label":"grid",cellGroupRenderer:Rt}),je.propTypes={};function Rt(te){var ie=te.cellCache,$=te.cellRenderer,P=te.cellSizeAndPositionGetter,Y=te.indices,pe=te.isScrolling;return Y.map(function(me){var De=P({index:me}),ze={index:me,isScrolling:pe,key:me,style:{height:De.height,left:De.x,position:"absolute",top:De.y,width:De.width}};return pe?(me in ie||(ie[me]=$(ze)),ie[me]):$(ze)}).filter(function(me){return!!me})}r(Rt,"defaultCellGroupRenderer");const Qt=null;var An=function(te){t(ie,te);function ie($,P){var Y;return u(this,ie),Y=s(this,i(ie).call(this,$,P)),Y._registerChild=Y._registerChild.bind(a(Y)),Y}return r(ie,"ColumnSizer"),p(ie,[{key:"componentDidUpdate",value:r(function(P){var Y=this.props,pe=Y.columnMaxWidth,me=Y.columnMinWidth,De=Y.columnCount,ze=Y.width;(pe!==P.columnMaxWidth||me!==P.columnMinWidth||De!==P.columnCount||ze!==P.width)&&this._registeredChild&&this._registeredChild.recomputeGridSize()},"componentDidUpdate")},{key:"render",value:r(function(){var P=this.props,Y=P.children,pe=P.columnMaxWidth,me=P.columnMinWidth,De=P.columnCount,ze=P.width,gt=me||1,qe=pe?Math.min(pe,ze):ze,mt=ze/De;mt=Math.max(gt,mt),mt=Math.min(qe,mt),mt=Math.floor(mt);var at=Math.min(ze,mt*De);return Y({adjustedWidth:at,columnWidth:mt,getColumnWidth:r(function(){return mt},"getColumnWidth"),registerChild:this._registerChild})},"render")},{key:"_registerChild",value:r(function(P){if(P&&typeof P.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=P,this._registeredChild&&this._registeredChild.recomputeGridSize()},"_registerChild")}]),ie}(o.PureComponent);An.propTypes={};const qn=null;function Pn(te,ie){(ie==null||ie>te.length)&&(ie=te.length);for(var $=0,P=new Array(ie);$<ie;$++)P[$]=te[$];return P}r(Pn,"_arrayLikeToArray");function xn(te){if(Array.isArray(te))return Pn(te)}r(xn,"_arrayWithoutHoles");function Xn(te){if(typeof Symbol<"u"&&te[Symbol.iterator]!=null||te["@@iterator"]!=null)return Array.from(te)}r(Xn,"_iterableToArray");function li(te,ie){if(te){if(typeof te=="string")return Pn(te,ie);var $=Object.prototype.toString.call(te).slice(8,-1);if($==="Object"&&te.constructor&&($=te.constructor.name),$==="Map"||$==="Set")return Array.from(te);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return Pn(te,ie)}}r(li,"_unsupportedIterableToArray");function Ri(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r(Ri,"_nonIterableSpread");function zi(te){return xn(te)||Xn(te)||li(te)||Ri()}r(zi,"_toConsumableArray");var gr=function(te){t(ie,te);function ie($,P){var Y;return u(this,ie),Y=s(this,i(ie).call(this,$,P)),Y._loadMoreRowsMemoizer=He(),Y._onRowsRendered=Y._onRowsRendered.bind(a(Y)),Y._registerChild=Y._registerChild.bind(a(Y)),Y}return r(ie,"InfiniteLoader"),p(ie,[{key:"resetLoadMoreRowsCache",value:r(function(P){this._loadMoreRowsMemoizer=He(),P&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)},"resetLoadMoreRowsCache")},{key:"render",value:r(function(){var P=this.props.children;return P({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})},"render")},{key:"_loadUnloadedRanges",value:r(function(P){var Y=this,pe=this.props.loadMoreRows;P.forEach(function(me){var De=pe(me);De&&De.then(function(){Fr({lastRenderedStartIndex:Y._lastRenderedStartIndex,lastRenderedStopIndex:Y._lastRenderedStopIndex,startIndex:me.startIndex,stopIndex:me.stopIndex})&&Y._registeredChild&&Er(Y._registeredChild,Y._lastRenderedStartIndex)})})},"_loadUnloadedRanges")},{key:"_onRowsRendered",value:r(function(P){var Y=P.startIndex,pe=P.stopIndex;this._lastRenderedStartIndex=Y,this._lastRenderedStopIndex=pe,this._doStuff(Y,pe)},"_onRowsRendered")},{key:"_doStuff",value:r(function(P,Y){var pe,me=this,De=this.props,ze=De.isRowLoaded,gt=De.minimumBatchSize,qe=De.rowCount,mt=De.threshold,at=ri({isRowLoaded:ze,minimumBatchSize:gt,rowCount:qe,startIndex:Math.max(0,P-mt),stopIndex:Math.min(qe-1,Y+mt)}),qt=(pe=[]).concat.apply(pe,zi(at.map(function(mn){var On=mn.startIndex,ai=mn.stopIndex;return[On,ai]})));this._loadMoreRowsMemoizer({callback:r(function(){me._loadUnloadedRanges(at)},"callback"),indices:{squashedUnloadedRanges:qt}})},"_doStuff")},{key:"_registerChild",value:r(function(P){this._registeredChild=P},"_registerChild")}]),ie}(o.PureComponent);n(gr,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),gr.propTypes={};function Fr(te){var ie=te.lastRenderedStartIndex,$=te.lastRenderedStopIndex,P=te.startIndex,Y=te.stopIndex;return!(P>$||Y<ie)}r(Fr,"isRangeVisible");function ri(te){for(var ie=te.isRowLoaded,$=te.minimumBatchSize,P=te.rowCount,Y=te.startIndex,pe=te.stopIndex,me=[],De=null,ze=null,gt=Y;gt<=pe;gt++){var qe=ie({index:gt});qe?ze!==null&&(me.push({startIndex:De,stopIndex:ze}),De=ze=null):(ze=gt,De===null&&(De=gt))}if(ze!==null){for(var mt=Math.min(Math.max(ze,De+$-1),P-1),at=ze+1;at<=mt&&!ie({index:at});at++)ze=at;me.push({startIndex:De,stopIndex:ze})}if(me.length)for(var qt=me[0];qt.stopIndex-qt.startIndex+1<$&&qt.startIndex>0;){var mn=qt.startIndex-1;if(!ie({index:mn}))qt.startIndex=mn;else break}return me}r(ri,"scanForUnloadedRanges");function Er(te){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=typeof te.recomputeGridSize=="function"?te.recomputeGridSize:te.recomputeRowHeights;$?$.call(te,ie):te.forceUpdate()}r(Er,"forceUpdateReactVirtualizedComponent");const Rr=null;var ei=null,hr=null,si=null,Eo=null,Jr,fo,ho=(fo=Jr=function(te){t(ie,te);function ie(){var $,P;u(this,ie);for(var Y=arguments.length,pe=new Array(Y),me=0;me<Y;me++)pe[me]=arguments[me];return P=s(this,($=i(ie)).call.apply($,[this].concat(pe))),n(a(P),"Grid",void 0),n(a(P),"_cellRenderer",function(De){var ze=De.parent,gt=De.rowIndex,qe=De.style,mt=De.isScrolling,at=De.isVisible,qt=De.key,mn=P.props.rowRenderer,On=Object.getOwnPropertyDescriptor(qe,"width");return On&&On.writable&&(qe.width="100%"),mn({index:gt,style:qe,isScrolling:mt,isVisible:at,key:qt,parent:ze})}),n(a(P),"_setRef",function(De){P.Grid=De}),n(a(P),"_onScroll",function(De){var ze=De.clientHeight,gt=De.scrollHeight,qe=De.scrollTop,mt=P.props.onScroll;mt({clientHeight:ze,scrollHeight:gt,scrollTop:qe})}),n(a(P),"_onSectionRendered",function(De){var ze=De.rowOverscanStartIndex,gt=De.rowOverscanStopIndex,qe=De.rowStartIndex,mt=De.rowStopIndex,at=P.props.onRowsRendered;at({overscanStartIndex:ze,overscanStopIndex:gt,startIndex:qe,stopIndex:mt})}),P}return r(ie,"List"),p(ie,[{key:"forceUpdateGrid",value:r(function(){this.Grid&&this.Grid.forceUpdate()},"forceUpdateGrid")},{key:"getOffsetForRow",value:r(function(P){var Y=P.alignment,pe=P.index;if(this.Grid){var me=this.Grid.getOffsetForCell({alignment:Y,rowIndex:pe,columnIndex:0}),De=me.scrollTop;return De}return 0},"getOffsetForRow")},{key:"invalidateCellSizeAfterRender",value:r(function(P){var Y=P.columnIndex,pe=P.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:pe,columnIndex:Y})},"invalidateCellSizeAfterRender")},{key:"measureAllRows",value:r(function(){this.Grid&&this.Grid.measureAllCells()},"measureAllRows")},{key:"recomputeGridSize",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=P.columnIndex,pe=Y===void 0?0:Y,me=P.rowIndex,De=me===void 0?0:me;this.Grid&&this.Grid.recomputeGridSize({rowIndex:De,columnIndex:pe})},"recomputeGridSize")},{key:"recomputeRowHeights",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:P,columnIndex:0})},"recomputeRowHeights")},{key:"scrollToPosition",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:P})},"scrollToPosition")},{key:"scrollToRow",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:P})},"scrollToRow")},{key:"render",value:r(function(){var P=this.props,Y=P.className,pe=P.noRowsRenderer,me=P.scrollToIndex,De=P.width,ze=v("ReactVirtualized__List",Y);return o.createElement(G,g({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:ze,columnWidth:De,columnCount:1,noContentRenderer:pe,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:me}))},"render")}]),ie}(o.PureComponent),n(Jr,"propTypes",null),fo);n(ho,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:r(function(){},"onScroll"),noRowsRenderer:r(function(){return null},"noRowsRenderer"),onRowsRendered:r(function(){},"onRowsRendered"),overscanIndicesGetter:ot,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});function de(te){if(Array.isArray(te))return te}r(de,"_arrayWithHoles");function _e(te,ie){var $=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if($!=null){var P=[],Y=!0,pe=!1,me,De;try{for($=$.call(te);!(Y=(me=$.next()).done)&&(P.push(me.value),!(ie&&P.length===ie));Y=!0);}catch(ze){pe=!0,De=ze}finally{try{!Y&&$.return!=null&&$.return()}finally{if(pe)throw De}}return P}}r(_e,"_iterableToArrayLimit");function Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r(Pe,"_nonIterableRest");function rt(te,ie){return de(te)||_e(te,ie)||li(te,ie)||Pe()}r(rt,"_slicedToArray");function _t(te,ie,$,P){for(var Y=$+1;ie<=$;){var pe=ie+$>>>1,me=te[pe];me>=P?(Y=pe,$=pe-1):ie=pe+1}return Y}r(_t,"_GEA");function Dt(te,ie,$,P,Y){for(var pe=$+1;ie<=$;){var me=ie+$>>>1,De=te[me];Y(De,P)>=0?(pe=me,$=me-1):ie=me+1}return pe}r(Dt,"_GEP");function pn(te,ie,$,P,Y){return typeof $=="function"?Dt(te,P===void 0?0:P|0,Y===void 0?te.length-1:Y|0,ie,$):_t(te,$===void 0?0:$|0,P===void 0?te.length-1:P|0,ie)}r(pn,"dispatchBsearchGE");function In(te,ie,$,P){for(var Y=$+1;ie<=$;){var pe=ie+$>>>1,me=te[pe];me>P?(Y=pe,$=pe-1):ie=pe+1}return Y}r(In,"_GTA");function Nn(te,ie,$,P,Y){for(var pe=$+1;ie<=$;){var me=ie+$>>>1,De=te[me];Y(De,P)>0?(pe=me,$=me-1):ie=me+1}return pe}r(Nn,"_GTP");function Tn(te,ie,$,P,Y){return typeof $=="function"?Nn(te,P===void 0?0:P|0,Y===void 0?te.length-1:Y|0,ie,$):In(te,$===void 0?0:$|0,P===void 0?te.length-1:P|0,ie)}r(Tn,"dispatchBsearchGT");function di(te,ie,$,P){for(var Y=ie-1;ie<=$;){var pe=ie+$>>>1,me=te[pe];me<P?(Y=pe,ie=pe+1):$=pe-1}return Y}r(di,"_LTA");function an(te,ie,$,P,Y){for(var pe=ie-1;ie<=$;){var me=ie+$>>>1,De=te[me];Y(De,P)<0?(pe=me,ie=me+1):$=me-1}return pe}r(an,"_LTP");function ki(te,ie,$,P,Y){return typeof $=="function"?an(te,P===void 0?0:P|0,Y===void 0?te.length-1:Y|0,ie,$):di(te,$===void 0?0:$|0,P===void 0?te.length-1:P|0,ie)}r(ki,"dispatchBsearchLT");function Zn(te,ie,$,P){for(var Y=ie-1;ie<=$;){var pe=ie+$>>>1,me=te[pe];me<=P?(Y=pe,ie=pe+1):$=pe-1}return Y}r(Zn,"_LEA");function lr(te,ie,$,P,Y){for(var pe=ie-1;ie<=$;){var me=ie+$>>>1,De=te[me];Y(De,P)<=0?(pe=me,ie=me+1):$=me-1}return pe}r(lr,"_LEP");function br(te,ie,$,P,Y){return typeof $=="function"?lr(te,P===void 0?0:P|0,Y===void 0?te.length-1:Y|0,ie,$):Zn(te,$===void 0?0:$|0,P===void 0?te.length-1:P|0,ie)}r(br,"dispatchBsearchLE");function Cr(te,ie,$,P){for(ie-1;ie<=$;){var Y=ie+$>>>1,pe=te[Y];if(pe===P)return Y;pe<=P?ie=Y+1:$=Y-1}return-1}r(Cr,"_EQA");function pi(te,ie,$,P,Y){for(ie-1;ie<=$;){var pe=ie+$>>>1,me=te[pe],De=Y(me,P);if(De===0)return pe;De<=0?ie=pe+1:$=pe-1}return-1}r(pi,"_EQP");function vi(te,ie,$,P,Y){return typeof $=="function"?pi(te,P===void 0?0:P|0,Y===void 0?te.length-1:Y|0,ie,$):Cr(te,$===void 0?0:$|0,P===void 0?te.length-1:P|0,ie)}r(vi,"dispatchBsearchEQ");const Di={ge:pn,gt:Tn,lt:ki,le:br,eq:vi};var Yi=0,Or=1,Zr=2;function Mi(te,ie,$,P,Y){this.mid=te,this.left=ie,this.right=$,this.leftPoints=P,this.rightPoints=Y,this.count=(ie?ie.count:0)+($?$.count:0)+P.length}r(Mi,"IntervalTreeNode");var ro=Mi.prototype;function pr(te,ie){te.mid=ie.mid,te.left=ie.left,te.right=ie.right,te.leftPoints=ie.leftPoints,te.rightPoints=ie.rightPoints,te.count=ie.count}r(pr,"copy");function qr(te,ie){var $=Io(ie);te.mid=$.mid,te.left=$.left,te.right=$.right,te.leftPoints=$.leftPoints,te.rightPoints=$.rightPoints,te.count=$.count}r(qr,"rebuild");function es(te,ie){var $=te.intervals([]);$.push(ie),qr(te,$)}r(es,"rebuildWithInterval");function is(te,ie){var $=te.intervals([]),P=$.indexOf(ie);return P<0?Yi:($.splice(P,1),qr(te,$),Or)}r(is,"rebuildWithoutInterval"),ro.intervals=function(te){return te.push.apply(te,this.leftPoints),this.left&&this.left.intervals(te),this.right&&this.right.intervals(te),te},ro.insert=function(te){var ie=this.count-this.leftPoints.length;if(this.count+=1,te[1]<this.mid)this.left?4*(this.left.count+1)>3*(ie+1)?es(this,te):this.left.insert(te):this.left=Io([te]);else if(te[0]>this.mid)this.right?4*(this.right.count+1)>3*(ie+1)?es(this,te):this.right.insert(te):this.right=Io([te]);else{var $=Di.ge(this.leftPoints,te,uo),P=Di.ge(this.rightPoints,te,bo);this.leftPoints.splice($,0,te),this.rightPoints.splice(P,0,te)}},ro.remove=function(te){var ie=this.count-this.leftPoints;if(te[1]<this.mid){if(!this.left)return Yi;var $=this.right?this.right.count:0;if(4*$>3*(ie-1))return is(this,te);var P=this.left.remove(te);return P===Zr?(this.left=null,this.count-=1,Or):(P===Or&&(this.count-=1),P)}else if(te[0]>this.mid){if(!this.right)return Yi;var Y=this.left?this.left.count:0;if(4*Y>3*(ie-1))return is(this,te);var P=this.right.remove(te);return P===Zr?(this.right=null,this.count-=1,Or):(P===Or&&(this.count-=1),P)}else{if(this.count===1)return this.leftPoints[0]===te?Zr:Yi;if(this.leftPoints.length===1&&this.leftPoints[0]===te){if(this.left&&this.right){for(var pe=this,me=this.left;me.right;)pe=me,me=me.right;if(pe===this)me.right=this.right;else{var De=this.left,P=this.right;pe.count-=me.count,pe.right=me.left,me.left=De,me.right=P}pr(this,me),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?pr(this,this.left):pr(this,this.right);return Or}for(var De=Di.ge(this.leftPoints,te,uo);De<this.leftPoints.length&&this.leftPoints[De][0]===te[0];++De)if(this.leftPoints[De]===te){this.count-=1,this.leftPoints.splice(De,1);for(var P=Di.ge(this.rightPoints,te,bo);P<this.rightPoints.length&&this.rightPoints[P][1]===te[1];++P)if(this.rightPoints[P]===te)return this.rightPoints.splice(P,1),Or}return Yi}};function Jo(te,ie,$){for(var P=0;P<te.length&&te[P][0]<=ie;++P){var Y=$(te[P]);if(Y)return Y}}r(Jo,"reportLeftRange");function Yo(te,ie,$){for(var P=te.length-1;P>=0&&te[P][1]>=ie;--P){var Y=$(te[P]);if(Y)return Y}}r(Yo,"reportRightRange");function ts(te,ie){for(var $=0;$<te.length;++$){var P=ie(te[$]);if(P)return P}}r(ts,"reportRange"),ro.queryPoint=function(te,ie){if(te<this.mid){if(this.left){var $=this.left.queryPoint(te,ie);if($)return $}return Jo(this.leftPoints,te,ie)}else if(te>this.mid){if(this.right){var $=this.right.queryPoint(te,ie);if($)return $}return Yo(this.rightPoints,te,ie)}else return ts(this.leftPoints,ie)},ro.queryInterval=function(te,ie,$){if(te<this.mid&&this.left){var P=this.left.queryInterval(te,ie,$);if(P)return P}if(ie>this.mid&&this.right){var P=this.right.queryInterval(te,ie,$);if(P)return P}return ie<this.mid?Jo(this.leftPoints,ie,$):te>this.mid?Yo(this.rightPoints,te,$):ts(this.leftPoints,$)};function Vo(te,ie){return te-ie}r(Vo,"compareNumbers");function uo(te,ie){var $=te[0]-ie[0];return $||te[1]-ie[1]}r(uo,"compareBegin");function bo(te,ie){var $=te[1]-ie[1];return $||te[0]-ie[0]}r(bo,"compareEnd");function Io(te){if(te.length===0)return null;for(var ie=[],$=0;$<te.length;++$)ie.push(te[$][0],te[$][1]);ie.sort(Vo);for(var P=ie[ie.length>>1],Y=[],pe=[],me=[],$=0;$<te.length;++$){var De=te[$];De[1]<P?Y.push(De):P<De[0]?pe.push(De):me.push(De)}var ze=me,gt=me.slice();return ze.sort(uo),gt.sort(bo),new Mi(P,Io(Y),Io(pe),ze,gt)}r(Io,"createIntervalTree");function so(te){this.root=te}r(so,"IntervalTree");var ao=so.prototype;ao.insert=function(te){this.root?this.root.insert(te):this.root=new Mi(te[0],null,null,[te],[te])},ao.remove=function(te){if(this.root){var ie=this.root.remove(te);return ie===Zr&&(this.root=null),ie!==Yi}return!1},ao.queryPoint=function(te,ie){if(this.root)return this.root.queryPoint(te,ie)},ao.queryInterval=function(te,ie,$){if(te<=ie&&this.root)return this.root.queryInterval(te,ie,$)},Object.defineProperty(ao,"count",{get:r(function(){return this.root?this.root.count:0},"get")}),Object.defineProperty(ao,"intervals",{get:r(function(){return this.root?this.root.intervals([]):[]},"get")});function Gr(te){return!te||te.length===0?new so(null):new so(Io(te))}r(Gr,"createWrapper");var Co=function(){function te(){u(this,te),n(this,"_columnSizeMap",{}),n(this,"_intervalTree",Gr()),n(this,"_leftMap",{})}return r(te,"PositionCache"),p(te,[{key:"estimateTotalHeight",value:r(function($,P,Y){var pe=$-this.count;return this.tallestColumnSize+Math.ceil(pe/P)*Y},"estimateTotalHeight")},{key:"range",value:r(function($,P,Y){var pe=this;this._intervalTree.queryInterval($,$+P,function(me){var De=rt(me,3),ze=De[0],gt=De[1],qe=De[2];return Y(qe,pe._leftMap[qe],ze)})},"range")},{key:"setPosition",value:r(function($,P,Y,pe){this._intervalTree.insert([Y,Y+pe,$]),this._leftMap[$]=P;var me=this._columnSizeMap,De=me[P];De===void 0?me[P]=Y+pe:me[P]=Math.max(De,Y+pe)},"setPosition")},{key:"count",get:r(function(){return this._intervalTree.count},"get")},{key:"shortestColumnSize",get:r(function(){var $=this._columnSizeMap,P=0;for(var Y in $){var pe=$[Y];P=P===0?pe:Math.min(P,pe)}return P},"get")},{key:"tallestColumnSize",get:r(function(){var $=this._columnSizeMap,P=0;for(var Y in $){var pe=$[Y];P=Math.max(P,pe)}return P},"get")}]),te}(),Ts,Is;function po(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(po,"Masonry_ownKeys");function Ho(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?po($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):po($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(Ho,"Masonry_objectSpread");var Vr={},oo=150,Yr=(Is=Ts=function(te){t(ie,te);function ie(){var $,P;u(this,ie);for(var Y=arguments.length,pe=new Array(Y),me=0;me<Y;me++)pe[me]=arguments[me];return P=s(this,($=i(ie)).call.apply($,[this].concat(pe))),n(a(P),"state",{isScrolling:!1,scrollTop:0}),n(a(P),"_debounceResetIsScrollingId",void 0),n(a(P),"_invalidateOnUpdateStartIndex",null),n(a(P),"_invalidateOnUpdateStopIndex",null),n(a(P),"_positionCache",new Co),n(a(P),"_startIndex",null),n(a(P),"_startIndexMemoized",null),n(a(P),"_stopIndex",null),n(a(P),"_stopIndexMemoized",null),n(a(P),"_debounceResetIsScrollingCallback",function(){P.setState({isScrolling:!1})}),n(a(P),"_setScrollingContainerRef",function(De){P._scrollingContainer=De}),n(a(P),"_onScroll",function(De){var ze=P.props.height,gt=De.currentTarget.scrollTop,qe=Math.min(Math.max(0,P._getEstimatedTotalHeight()-ze),gt);gt===qe&&(P._debounceResetIsScrolling(),P.state.scrollTop!==qe&&P.setState({isScrolling:!0,scrollTop:qe}))}),P}return r(ie,"Masonry"),p(ie,[{key:"clearCellPositions",value:r(function(){this._positionCache=new Co,this.forceUpdate()},"clearCellPositions")},{key:"invalidateCellSizeAfterRender",value:r(function(P){var Y=P.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=Y,this._invalidateOnUpdateStopIndex=Y):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,Y),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,Y))},"invalidateCellSizeAfterRender")},{key:"recomputeCellPositions",value:r(function(){var P=this._positionCache.count-1;this._positionCache=new Co,this._populatePositionCache(0,P),this.forceUpdate()},"recomputeCellPositions")},{key:"componentDidMount",value:r(function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()},"componentDidMount")},{key:"componentDidUpdate",value:r(function(P,Y){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==P.scrollTop&&this._debounceResetIsScrolling()},"componentDidUpdate")},{key:"componentWillUnmount",value:r(function(){this._debounceResetIsScrollingId&&cn(this._debounceResetIsScrollingId)},"componentWillUnmount")},{key:"render",value:r(function(){var P=this,Y=this.props,pe=Y.autoHeight,me=Y.cellCount,De=Y.cellMeasurerCache,ze=Y.cellRenderer,gt=Y.className,qe=Y.height,mt=Y.id,at=Y.keyMapper,qt=Y.overscanByPixels,mn=Y.role,On=Y.style,ai=Y.tabIndex,gi=Y.width,Ei=Y.rowDirection,Gi=this.state,qi=Gi.isScrolling,rr=Gi.scrollTop,Ir=[],Ji=this._getEstimatedTotalHeight(),Wn=this._positionCache.shortestColumnSize,er=this._positionCache.count,vt=0,wt;if(this._positionCache.range(Math.max(0,rr-qt),qe+qt*2,function(Yn,Ui,Oi){var Ti;typeof wt>"u"?(vt=Yn,wt=Yn):(vt=Math.min(vt,Yn),wt=Math.max(wt,Yn)),Ir.push(ze({index:Yn,isScrolling:qi,key:at(Yn),parent:P,style:(Ti={height:De.getHeight(Yn)},n(Ti,Ei==="ltr"?"left":"right",Ui),n(Ti,"position","absolute"),n(Ti,"top",Oi),n(Ti,"width",De.getWidth(Yn)),Ti)}))}),Wn<rr+qe+qt&&er<me)for(var Jt=Math.min(me-er,Math.ceil((rr+qe+qt-Wn)/De.defaultHeight*gi/De.defaultWidth)),_n=er;_n<er+Jt;_n++)wt=_n,Ir.push(ze({index:_n,isScrolling:qi,key:at(_n),parent:this,style:{width:De.getWidth(_n)}}));return this._startIndex=vt,this._stopIndex=wt,o.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:v("ReactVirtualized__Masonry",gt),id:mt,onScroll:this._onScroll,role:mn,style:Ho({boxSizing:"border-box",direction:"ltr",height:pe?"auto":qe,overflowX:"hidden",overflowY:Ji<qe?"hidden":"auto",position:"relative",width:gi,WebkitOverflowScrolling:"touch",willChange:"transform"},On),tabIndex:ai},o.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:Ji,maxWidth:"100%",maxHeight:Ji,overflow:"hidden",pointerEvents:qi?"none":"",position:"relative"}},Ir))},"render")},{key:"_checkInvalidateOnUpdate",value:r(function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var P=this._invalidateOnUpdateStartIndex,Y=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(P,Y),this.forceUpdate()}},"_checkInvalidateOnUpdate")},{key:"_debounceResetIsScrolling",value:r(function(){var P=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&cn(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Wt(this._debounceResetIsScrollingCallback,P)},"_debounceResetIsScrolling")},{key:"_getEstimatedTotalHeight",value:r(function(){var P=this.props,Y=P.cellCount,pe=P.cellMeasurerCache,me=P.width,De=Math.max(1,Math.floor(me/pe.defaultWidth));return this._positionCache.estimateTotalHeight(Y,De,pe.defaultHeight)},"_getEstimatedTotalHeight")},{key:"_invokeOnScrollCallback",value:r(function(){var P=this.props,Y=P.height,pe=P.onScroll,me=this.state.scrollTop;this._onScrollMemoized!==me&&(pe({clientHeight:Y,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:me}),this._onScrollMemoized=me)},"_invokeOnScrollCallback")},{key:"_invokeOnCellsRenderedCallback",value:r(function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){var P=this.props.onCellsRendered;P({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}},"_invokeOnCellsRenderedCallback")},{key:"_populatePositionCache",value:r(function(P,Y){for(var pe=this.props,me=pe.cellMeasurerCache,De=pe.cellPositioner,ze=P;ze<=Y;ze++){var gt=De(ze),qe=gt.left,mt=gt.top;this._positionCache.setPosition(ze,qe,mt,me.getHeight(ze))}},"_populatePositionCache")}],[{key:"getDerivedStateFromProps",value:r(function(P,Y){return P.scrollTop!==void 0&&Y.scrollTop!==P.scrollTop?{isScrolling:!0,scrollTop:P.scrollTop}:null},"getDerivedStateFromProps")}]),ie}(o.PureComponent),n(Ts,"propTypes",null),Is);n(Yr,"defaultProps",{autoHeight:!1,keyMapper:mo,onCellsRendered:lo,onScroll:lo,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:oo,style:Vr,tabIndex:0,rowDirection:"ltr"});function mo(te){return te}r(mo,"identity");function lo(){}r(lo,"noop");var ws=null;(0,f.polyfill)(Yr);const oe=null;var fe=null;function Ce(te){var ie=te.cellMeasurerCache,$=te.columnCount,P=te.columnWidth,Y=te.spacer,pe=Y===void 0?0:Y,me;ze();function De(qe){for(var mt=0,at=1;at<me.length;at++)me[at]<me[mt]&&(mt=at);var qt=mt*(P+pe),mn=me[mt]||0;return me[mt]=mn+ie.getHeight(qe)+pe,{left:qt,top:mn}}r(De,"cellPositioner");function ze(){me=[];for(var qe=0;qe<$;qe++)me[qe]=0}r(ze,"initOrResetDerivedValues");function gt(qe){$=qe.columnCount,P=qe.columnWidth,pe=qe.spacer,ze()}return r(gt,"reset"),De.reset=gt,De}r(Ce,"createCellPositioner");const Ne=null;var Ge=function(){function te(){var ie=this,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};u(this,te),n(this,"_cellMeasurerCache",void 0),n(this,"_columnIndexOffset",void 0),n(this,"_rowIndexOffset",void 0),n(this,"columnWidth",function(ze){var gt=ze.index;ie._cellMeasurerCache.columnWidth({index:gt+ie._columnIndexOffset})}),n(this,"rowHeight",function(ze){var gt=ze.index;ie._cellMeasurerCache.rowHeight({index:gt+ie._rowIndexOffset})});var P=$.cellMeasurerCache,Y=$.columnIndexOffset,pe=Y===void 0?0:Y,me=$.rowIndexOffset,De=me===void 0?0:me;this._cellMeasurerCache=P,this._columnIndexOffset=pe,this._rowIndexOffset=De}return r(te,"CellMeasurerCacheDecorator"),p(te,[{key:"clear",value:r(function($,P){this._cellMeasurerCache.clear($+this._rowIndexOffset,P+this._columnIndexOffset)},"clear")},{key:"clearAll",value:r(function(){this._cellMeasurerCache.clearAll()},"clearAll")},{key:"hasFixedHeight",value:r(function(){return this._cellMeasurerCache.hasFixedHeight()},"hasFixedHeight")},{key:"hasFixedWidth",value:r(function(){return this._cellMeasurerCache.hasFixedWidth()},"hasFixedWidth")},{key:"getHeight",value:r(function($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getHeight($+this._rowIndexOffset,P+this._columnIndexOffset)},"getHeight")},{key:"getWidth",value:r(function($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getWidth($+this._rowIndexOffset,P+this._columnIndexOffset)},"getWidth")},{key:"has",value:r(function($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.has($+this._rowIndexOffset,P+this._columnIndexOffset)},"has")},{key:"set",value:r(function($,P,Y,pe){this._cellMeasurerCache.set($+this._rowIndexOffset,P+this._columnIndexOffset,Y,pe)},"set")},{key:"defaultHeight",get:r(function(){return this._cellMeasurerCache.defaultHeight},"get")},{key:"defaultWidth",get:r(function(){return this._cellMeasurerCache.defaultWidth},"get")}]),te}();function Ct(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(Ct,"MultiGrid_ownKeys");function ht(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?Ct($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):Ct($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(ht,"MultiGrid_objectSpread");var Kt=20,$t=function(te){t(ie,te);function ie($,P){var Y;u(this,ie),Y=s(this,i(ie).call(this,$,P)),n(a(Y),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),n(a(Y),"_deferredInvalidateColumnIndex",null),n(a(Y),"_deferredInvalidateRowIndex",null),n(a(Y),"_bottomLeftGridRef",function(ze){Y._bottomLeftGrid=ze}),n(a(Y),"_bottomRightGridRef",function(ze){Y._bottomRightGrid=ze}),n(a(Y),"_cellRendererBottomLeftGrid",function(ze){var gt=ze.rowIndex,qe=b(ze,["rowIndex"]),mt=Y.props,at=mt.cellRenderer,qt=mt.fixedRowCount,mn=mt.rowCount;return gt===mn-qt?o.createElement("div",{key:qe.key,style:ht({},qe.style,{height:Kt})}):at(ht({},qe,{parent:a(Y),rowIndex:gt+qt}))}),n(a(Y),"_cellRendererBottomRightGrid",function(ze){var gt=ze.columnIndex,qe=ze.rowIndex,mt=b(ze,["columnIndex","rowIndex"]),at=Y.props,qt=at.cellRenderer,mn=at.fixedColumnCount,On=at.fixedRowCount;return qt(ht({},mt,{columnIndex:gt+mn,parent:a(Y),rowIndex:qe+On}))}),n(a(Y),"_cellRendererTopRightGrid",function(ze){var gt=ze.columnIndex,qe=b(ze,["columnIndex"]),mt=Y.props,at=mt.cellRenderer,qt=mt.columnCount,mn=mt.fixedColumnCount;return gt===qt-mn?o.createElement("div",{key:qe.key,style:ht({},qe.style,{width:Kt})}):at(ht({},qe,{columnIndex:gt+mn,parent:a(Y)}))}),n(a(Y),"_columnWidthRightGrid",function(ze){var gt=ze.index,qe=Y.props,mt=qe.columnCount,at=qe.fixedColumnCount,qt=qe.columnWidth,mn=Y.state,On=mn.scrollbarSize,ai=mn.showHorizontalScrollbar;return ai&&gt===mt-at?On:typeof qt=="function"?qt({index:gt+at}):qt}),n(a(Y),"_onScroll",function(ze){var gt=ze.scrollLeft,qe=ze.scrollTop;Y.setState({scrollLeft:gt,scrollTop:qe});var mt=Y.props.onScroll;mt&&mt(ze)}),n(a(Y),"_onScrollbarPresenceChange",function(ze){var gt=ze.horizontal,qe=ze.size,mt=ze.vertical,at=Y.state,qt=at.showHorizontalScrollbar,mn=at.showVerticalScrollbar;if(gt!==qt||mt!==mn){Y.setState({scrollbarSize:qe,showHorizontalScrollbar:gt,showVerticalScrollbar:mt});var On=Y.props.onScrollbarPresenceChange;typeof On=="function"&&On({horizontal:gt,size:qe,vertical:mt})}}),n(a(Y),"_onScrollLeft",function(ze){var gt=ze.scrollLeft;Y._onScroll({scrollLeft:gt,scrollTop:Y.state.scrollTop})}),n(a(Y),"_onScrollTop",function(ze){var gt=ze.scrollTop;Y._onScroll({scrollTop:gt,scrollLeft:Y.state.scrollLeft})}),n(a(Y),"_rowHeightBottomGrid",function(ze){var gt=ze.index,qe=Y.props,mt=qe.fixedRowCount,at=qe.rowCount,qt=qe.rowHeight,mn=Y.state,On=mn.scrollbarSize,ai=mn.showVerticalScrollbar;return ai&&gt===at-mt?On:typeof qt=="function"?qt({index:gt+mt}):qt}),n(a(Y),"_topLeftGridRef",function(ze){Y._topLeftGrid=ze}),n(a(Y),"_topRightGridRef",function(ze){Y._topRightGrid=ze});var pe=$.deferredMeasurementCache,me=$.fixedColumnCount,De=$.fixedRowCount;return Y._maybeCalculateCachedStyles(!0),pe&&(Y._deferredMeasurementCacheBottomLeftGrid=De>0?new Ge({cellMeasurerCache:pe,columnIndexOffset:0,rowIndexOffset:De}):pe,Y._deferredMeasurementCacheBottomRightGrid=me>0||De>0?new Ge({cellMeasurerCache:pe,columnIndexOffset:me,rowIndexOffset:De}):pe,Y._deferredMeasurementCacheTopRightGrid=me>0?new Ge({cellMeasurerCache:pe,columnIndexOffset:me,rowIndexOffset:0}):pe),Y}return r(ie,"MultiGrid"),p(ie,[{key:"forceUpdateGrids",value:r(function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()},"forceUpdateGrids")},{key:"invalidateCellSizeAfterRender",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=P.columnIndex,pe=Y===void 0?0:Y,me=P.rowIndex,De=me===void 0?0:me;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,pe):pe,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,De):De},"invalidateCellSizeAfterRender")},{key:"measureAllCells",value:r(function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()},"measureAllCells")},{key:"recomputeGridSize",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=P.columnIndex,pe=Y===void 0?0:Y,me=P.rowIndex,De=me===void 0?0:me,ze=this.props,gt=ze.fixedColumnCount,qe=ze.fixedRowCount,mt=Math.max(0,pe-gt),at=Math.max(0,De-qe);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:pe,rowIndex:at}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:mt,rowIndex:at}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:pe,rowIndex:De}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:mt,rowIndex:De}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)},"recomputeGridSize")},{key:"componentDidMount",value:r(function(){var P=this.props,Y=P.scrollLeft,pe=P.scrollTop;if(Y>0||pe>0){var me={};Y>0&&(me.scrollLeft=Y),pe>0&&(me.scrollTop=pe),this.setState(me)}this._handleInvalidatedGridSize()},"componentDidMount")},{key:"componentDidUpdate",value:r(function(){this._handleInvalidatedGridSize()},"componentDidUpdate")},{key:"render",value:r(function(){var P=this.props,Y=P.onScroll,pe=P.onSectionRendered,me=P.onScrollbarPresenceChange,De=P.scrollLeft,ze=P.scrollToColumn,gt=P.scrollTop,qe=P.scrollToRow,mt=b(P,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var at=this.state,qt=at.scrollLeft,mn=at.scrollTop;return o.createElement("div",{style:this._containerOuterStyle},o.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(mt),this._renderTopRightGrid(ht({},mt,{onScroll:Y,scrollLeft:qt}))),o.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(ht({},mt,{onScroll:Y,scrollTop:mn})),this._renderBottomRightGrid(ht({},mt,{onScroll:Y,onSectionRendered:pe,scrollLeft:qt,scrollToColumn:ze,scrollToRow:qe,scrollTop:mn}))))},"render")},{key:"_getBottomGridHeight",value:r(function(P){var Y=P.height,pe=this._getTopGridHeight(P);return Y-pe},"_getBottomGridHeight")},{key:"_getLeftGridWidth",value:r(function(P){var Y=P.fixedColumnCount,pe=P.columnWidth;if(this._leftGridWidth==null)if(typeof pe=="function"){for(var me=0,De=0;De<Y;De++)me+=pe({index:De});this._leftGridWidth=me}else this._leftGridWidth=pe*Y;return this._leftGridWidth},"_getLeftGridWidth")},{key:"_getRightGridWidth",value:r(function(P){var Y=P.width,pe=this._getLeftGridWidth(P);return Y-pe},"_getRightGridWidth")},{key:"_getTopGridHeight",value:r(function(P){var Y=P.fixedRowCount,pe=P.rowHeight;if(this._topGridHeight==null)if(typeof pe=="function"){for(var me=0,De=0;De<Y;De++)me+=pe({index:De});this._topGridHeight=me}else this._topGridHeight=pe*Y;return this._topGridHeight},"_getTopGridHeight")},{key:"_handleInvalidatedGridSize",value:r(function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var P=this._deferredInvalidateColumnIndex,Y=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:P,rowIndex:Y}),this.forceUpdate()}},"_handleInvalidatedGridSize")},{key:"_maybeCalculateCachedStyles",value:r(function(P){var Y=this.props,pe=Y.columnWidth,me=Y.enableFixedColumnScroll,De=Y.enableFixedRowScroll,ze=Y.height,gt=Y.fixedColumnCount,qe=Y.fixedRowCount,mt=Y.rowHeight,at=Y.style,qt=Y.styleBottomLeftGrid,mn=Y.styleBottomRightGrid,On=Y.styleTopLeftGrid,ai=Y.styleTopRightGrid,gi=Y.width,Ei=P||ze!==this._lastRenderedHeight||gi!==this._lastRenderedWidth,Gi=P||pe!==this._lastRenderedColumnWidth||gt!==this._lastRenderedFixedColumnCount,qi=P||qe!==this._lastRenderedFixedRowCount||mt!==this._lastRenderedRowHeight;(P||Ei||at!==this._lastRenderedStyle)&&(this._containerOuterStyle=ht({height:ze,overflow:"visible",width:gi},at)),(P||Ei||qi)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:gi},this._containerBottomStyle={height:ze-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:gi}),(P||qt!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=ht({left:0,overflowX:"hidden",overflowY:me?"auto":"hidden",position:"absolute"},qt)),(P||Gi||mn!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=ht({left:this._getLeftGridWidth(this.props),position:"absolute"},mn)),(P||On!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=ht({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},On)),(P||Gi||ai!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=ht({left:this._getLeftGridWidth(this.props),overflowX:De?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},ai)),this._lastRenderedColumnWidth=pe,this._lastRenderedFixedColumnCount=gt,this._lastRenderedFixedRowCount=qe,this._lastRenderedHeight=ze,this._lastRenderedRowHeight=mt,this._lastRenderedStyle=at,this._lastRenderedStyleBottomLeftGrid=qt,this._lastRenderedStyleBottomRightGrid=mn,this._lastRenderedStyleTopLeftGrid=On,this._lastRenderedStyleTopRightGrid=ai,this._lastRenderedWidth=gi},"_maybeCalculateCachedStyles")},{key:"_prepareForRender",value:r(function(){(this._lastRenderedColumnWidth!==this.props.columnWidth||this._lastRenderedFixedColumnCount!==this.props.fixedColumnCount)&&(this._leftGridWidth=null),(this._lastRenderedFixedRowCount!==this.props.fixedRowCount||this._lastRenderedRowHeight!==this.props.rowHeight)&&(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight},"_prepareForRender")},{key:"_renderBottomLeftGrid",value:r(function(P){var Y=P.enableFixedColumnScroll,pe=P.fixedColumnCount,me=P.fixedRowCount,De=P.rowCount,ze=P.hideBottomLeftGridScrollbar,gt=this.state.showVerticalScrollbar;if(!pe)return null;var qe=gt?1:0,mt=this._getBottomGridHeight(P),at=this._getLeftGridWidth(P),qt=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,mn=ze?at+qt:at,On=o.createElement(G,g({},P,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:pe,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:mt,onScroll:Y?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,De-me)+qe,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:mn}));return ze?o.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:ht({},this._bottomLeftGridStyle,{height:mt,width:at,overflowY:"hidden"})},On):On},"_renderBottomLeftGrid")},{key:"_renderBottomRightGrid",value:r(function(P){var Y=P.columnCount,pe=P.fixedColumnCount,me=P.fixedRowCount,De=P.rowCount,ze=P.scrollToColumn,gt=P.scrollToRow;return o.createElement(G,g({},P,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,Y-pe),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(P),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,De-me),rowHeight:this._rowHeightBottomGrid,scrollToColumn:ze-pe,scrollToRow:gt-me,style:this._bottomRightGridStyle,width:this._getRightGridWidth(P)}))},"_renderBottomRightGrid")},{key:"_renderTopLeftGrid",value:r(function(P){var Y=P.fixedColumnCount,pe=P.fixedRowCount;return!Y||!pe?null:o.createElement(G,g({},P,{className:this.props.classNameTopLeftGrid,columnCount:Y,height:this._getTopGridHeight(P),ref:this._topLeftGridRef,rowCount:pe,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(P)}))},"_renderTopLeftGrid")},{key:"_renderTopRightGrid",value:r(function(P){var Y=P.columnCount,pe=P.enableFixedRowScroll,me=P.fixedColumnCount,De=P.fixedRowCount,ze=P.scrollLeft,gt=P.hideTopRightGridScrollbar,qe=this.state,mt=qe.showHorizontalScrollbar,at=qe.scrollbarSize;if(!De)return null;var qt=mt?1:0,mn=this._getTopGridHeight(P),On=this._getRightGridWidth(P),ai=mt?at:0,gi=mn,Ei=this._topRightGridStyle;gt&&(gi=mn+ai,Ei=ht({},this._topRightGridStyle,{left:0}));var Gi=o.createElement(G,g({},P,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,Y-me)+qt,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:gi,onScroll:pe?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:De,scrollLeft:ze,style:Ei,tabIndex:null,width:On}));return gt?o.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:ht({},this._topRightGridStyle,{height:mn,width:On,overflowX:"hidden"})},Gi):Gi},"_renderTopRightGrid")}],[{key:"getDerivedStateFromProps",value:r(function(P,Y){return P.scrollLeft!==Y.scrollLeft||P.scrollTop!==Y.scrollTop?{scrollLeft:P.scrollLeft!=null&&P.scrollLeft>=0?P.scrollLeft:Y.scrollLeft,scrollTop:P.scrollTop!=null&&P.scrollTop>=0?P.scrollTop:Y.scrollTop}:null},"getDerivedStateFromProps")}]),ie}(o.PureComponent);n($t,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),$t.propTypes={},(0,f.polyfill)($t);const on=$t,en=null;var gn=function(te){t(ie,te);function ie($,P){var Y;return u(this,ie),Y=s(this,i(ie).call(this,$,P)),Y.state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},Y._onScroll=Y._onScroll.bind(a(Y)),Y}return r(ie,"ScrollSync"),p(ie,[{key:"render",value:r(function(){var P=this.props.children,Y=this.state,pe=Y.clientHeight,me=Y.clientWidth,De=Y.scrollHeight,ze=Y.scrollLeft,gt=Y.scrollTop,qe=Y.scrollWidth;return P({clientHeight:pe,clientWidth:me,onScroll:this._onScroll,scrollHeight:De,scrollLeft:ze,scrollTop:gt,scrollWidth:qe})},"render")},{key:"_onScroll",value:r(function(P){var Y=P.clientHeight,pe=P.clientWidth,me=P.scrollHeight,De=P.scrollLeft,ze=P.scrollTop,gt=P.scrollWidth;this.setState({clientHeight:Y,clientWidth:pe,scrollHeight:me,scrollLeft:De,scrollTop:ze,scrollWidth:gt})},"_onScroll")}]),ie}(o.PureComponent);gn.propTypes={};const vn=null;var Cn=null,jn=null,Bn=null,wn=null,hn=null;function ci(te){var ie=te.dataKey,$=te.rowData;return typeof $.get=="function"?$.get(ie):$[ie]}r(ci,"defaultCellDataGetter");function Ki(te){var ie=te.cellData;return ie==null?"":String(ie)}r(Ki,"defaultCellRenderer");function ar(te){var ie=te.className,$=te.columns,P=te.style;return o.createElement("div",{className:ie,role:"row",style:P},$)}r(ar,"defaultHeaderRowRenderer"),ar.propTypes=null;var Tr={ASC:"ASC",DESC:"DESC"};const Bt=Tr;function dr(te){var ie=te.sortDirection,$=v("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":ie===Bt.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":ie===Bt.DESC});return o.createElement("svg",{className:$,width:18,height:18,viewBox:"0 0 24 24"},ie===Bt.ASC?o.createElement("path",{d:"M7 14l5-5 5 5z"}):o.createElement("path",{d:"M7 10l5 5 5-5z"}),o.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}r(dr,"SortIndicator"),dr.propTypes={};function cr(te){var ie=te.dataKey,$=te.label,P=te.sortBy,Y=te.sortDirection,pe=P===ie,me=[o.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof $=="string"?$:null},$)];return pe&&me.push(o.createElement(dr,{key:"SortIndicator",sortDirection:Y})),me}r(cr,"defaultHeaderRenderer"),cr.propTypes=null;function Xi(te){var ie=te.className,$=te.columns,P=te.index,Y=te.key,pe=te.onRowClick,me=te.onRowDoubleClick,De=te.onRowMouseOut,ze=te.onRowMouseOver,gt=te.onRowRightClick,qe=te.rowData,mt=te.style,at={"aria-rowindex":P+1};return(pe||me||De||ze||gt)&&(at["aria-label"]="row",at.tabIndex=0,pe&&(at.onClick=function(qt){return pe({event:qt,index:P,rowData:qe})}),me&&(at.onDoubleClick=function(qt){return me({event:qt,index:P,rowData:qe})}),De&&(at.onMouseOut=function(qt){return De({event:qt,index:P,rowData:qe})}),ze&&(at.onMouseOver=function(qt){return ze({event:qt,index:P,rowData:qe})}),gt&&(at.onContextMenu=function(qt){return gt({event:qt,index:P,rowData:qe})})),o.createElement("div",g({},at,{className:ie,key:Y,role:"row",style:mt}),$)}r(Xi,"defaultRowRenderer"),Xi.propTypes=null;var Xr=function(te){t(ie,te);function ie(){return u(this,ie),s(this,i(ie).apply(this,arguments))}return r(ie,"Column"),ie}(o.Component);n(Xr,"defaultProps",{cellDataGetter:ci,cellRenderer:Ki,defaultSortDirection:Bt.ASC,flexGrow:0,flexShrink:1,headerRenderer:cr,style:{}}),Xr.propTypes={};function wo(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(wo,"Table_ownKeys");function Mr(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?wo($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):wo($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(Mr,"Table_objectSpread");var go=function(te){t(ie,te);function ie($){var P;return u(this,ie),P=s(this,i(ie).call(this,$)),P.state={scrollbarWidth:0},P._createColumn=P._createColumn.bind(a(P)),P._createRow=P._createRow.bind(a(P)),P._onScroll=P._onScroll.bind(a(P)),P._onSectionRendered=P._onSectionRendered.bind(a(P)),P._setRef=P._setRef.bind(a(P)),P}return r(ie,"Table"),p(ie,[{key:"forceUpdateGrid",value:r(function(){this.Grid&&this.Grid.forceUpdate()},"forceUpdateGrid")},{key:"getOffsetForRow",value:r(function(P){var Y=P.alignment,pe=P.index;if(this.Grid){var me=this.Grid.getOffsetForCell({alignment:Y,rowIndex:pe}),De=me.scrollTop;return De}return 0},"getOffsetForRow")},{key:"invalidateCellSizeAfterRender",value:r(function(P){var Y=P.columnIndex,pe=P.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:pe,columnIndex:Y})},"invalidateCellSizeAfterRender")},{key:"measureAllRows",value:r(function(){this.Grid&&this.Grid.measureAllCells()},"measureAllRows")},{key:"recomputeGridSize",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=P.columnIndex,pe=Y===void 0?0:Y,me=P.rowIndex,De=me===void 0?0:me;this.Grid&&this.Grid.recomputeGridSize({rowIndex:De,columnIndex:pe})},"recomputeGridSize")},{key:"recomputeRowHeights",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:P})},"recomputeRowHeights")},{key:"scrollToPosition",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:P})},"scrollToPosition")},{key:"scrollToRow",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:P})},"scrollToRow")},{key:"getScrollbarWidth",value:r(function(){if(this.Grid){var P=(0,$n.findDOMNode)(this.Grid),Y=P.clientWidth||0,pe=P.offsetWidth||0;return pe-Y}return 0},"getScrollbarWidth")},{key:"componentDidMount",value:r(function(){this._setScrollbarWidth()},"componentDidMount")},{key:"componentDidUpdate",value:r(function(){this._setScrollbarWidth()},"componentDidUpdate")},{key:"render",value:r(function(){var P=this,Y=this.props,pe=Y.children,me=Y.className,De=Y.disableHeader,ze=Y.gridClassName,gt=Y.gridStyle,qe=Y.headerHeight,mt=Y.headerRowRenderer,at=Y.height,qt=Y.id,mn=Y.noRowsRenderer,On=Y.rowClassName,ai=Y.rowStyle,gi=Y.scrollToIndex,Ei=Y.style,Gi=Y.width,qi=this.state.scrollbarWidth,rr=De?at:at-qe,Ir=typeof On=="function"?On({index:-1}):On,Ji=typeof ai=="function"?ai({index:-1}):ai;return this._cachedColumnStyles=[],o.Children.toArray(pe).forEach(function(Wn,er){var vt=P._getFlexStyleForColumn(Wn,Wn.props.style);P._cachedColumnStyles[er]=Mr({overflow:"hidden"},vt)}),o.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":o.Children.toArray(pe).length,"aria-rowcount":this.props.rowCount,className:v("ReactVirtualized__Table",me),id:qt,role:"grid",style:Ei},!De&&mt({className:v("ReactVirtualized__Table__headerRow",Ir),columns:this._getHeaderColumns(),style:Mr({height:qe,overflow:"hidden",paddingRight:qi,width:Gi},Ji)}),o.createElement(G,g({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:v("ReactVirtualized__Table__Grid",ze),cellRenderer:this._createRow,columnWidth:Gi,columnCount:1,height:rr,id:void 0,noContentRenderer:mn,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:qi,scrollToRow:gi,style:Mr({},gt,{overflowX:"hidden"})})))},"render")},{key:"_createColumn",value:r(function(P){var Y=P.column,pe=P.columnIndex,me=P.isScrolling,De=P.parent,ze=P.rowData,gt=P.rowIndex,qe=this.props.onColumnClick,mt=Y.props,at=mt.cellDataGetter,qt=mt.cellRenderer,mn=mt.className,On=mt.columnData,ai=mt.dataKey,gi=mt.id,Ei=at({columnData:On,dataKey:ai,rowData:ze}),Gi=qt({cellData:Ei,columnData:On,columnIndex:pe,dataKey:ai,isScrolling:me,parent:De,rowData:ze,rowIndex:gt}),qi=r(function(Wn){qe&&qe({columnData:On,dataKey:ai,event:Wn})},"onClick"),rr=this._cachedColumnStyles[pe],Ir=typeof Gi=="string"?Gi:null;return o.createElement("div",{"aria-colindex":pe+1,"aria-describedby":gi,className:v("ReactVirtualized__Table__rowColumn",mn),key:"Row"+gt+"-Col"+pe,onClick:qi,role:"gridcell",style:rr,title:Ir},Gi)},"_createColumn")},{key:"_createHeader",value:r(function(P){var Y=P.column,pe=P.index,me=this.props,De=me.headerClassName,ze=me.headerStyle,gt=me.onHeaderClick,qe=me.sort,mt=me.sortBy,at=me.sortDirection,qt=Y.props,mn=qt.columnData,On=qt.dataKey,ai=qt.defaultSortDirection,gi=qt.disableSort,Ei=qt.headerRenderer,Gi=qt.id,qi=qt.label,rr=!gi&&qe,Ir=v("ReactVirtualized__Table__headerColumn",De,Y.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:rr}),Ji=this._getFlexStyleForColumn(Y,Mr({},ze,{},Y.props.headerStyle)),Wn=Ei({columnData:mn,dataKey:On,disableSort:gi,label:qi,sortBy:mt,sortDirection:at}),er,vt,wt,Jt,_n;if(rr||gt){var Yn=mt!==On,Ui=Yn?ai:at===Bt.DESC?Bt.ASC:Bt.DESC,Oi=r(function(ur){rr&&qe({defaultSortDirection:ai,event:ur,sortBy:On,sortDirection:Ui}),gt&&gt({columnData:mn,dataKey:On,event:ur})},"onClick"),Ti=r(function(ur){(ur.key==="Enter"||ur.key===" ")&&Oi(ur)},"onKeyDown");_n=Y.props["aria-label"]||qi||On,Jt="none",wt=0,er=Oi,vt=Ti}return mt===On&&(Jt=at===Bt.ASC?"ascending":"descending"),o.createElement("div",{"aria-label":_n,"aria-sort":Jt,className:Ir,id:Gi,key:"Header-Col"+pe,onClick:er,onKeyDown:vt,role:"columnheader",style:Ji,tabIndex:wt},Wn)},"_createHeader")},{key:"_createRow",value:r(function(P){var Y=this,pe=P.rowIndex,me=P.isScrolling,De=P.key,ze=P.parent,gt=P.style,qe=this.props,mt=qe.children,at=qe.onRowClick,qt=qe.onRowDoubleClick,mn=qe.onRowRightClick,On=qe.onRowMouseOver,ai=qe.onRowMouseOut,gi=qe.rowClassName,Ei=qe.rowGetter,Gi=qe.rowRenderer,qi=qe.rowStyle,rr=this.state.scrollbarWidth,Ir=typeof gi=="function"?gi({index:pe}):gi,Ji=typeof qi=="function"?qi({index:pe}):qi,Wn=Ei({index:pe}),er=o.Children.toArray(mt).map(function(Jt,_n){return Y._createColumn({column:Jt,columnIndex:_n,isScrolling:me,parent:ze,rowData:Wn,rowIndex:pe,scrollbarWidth:rr})}),vt=v("ReactVirtualized__Table__row",Ir),wt=Mr({},gt,{height:this._getRowHeight(pe),overflow:"hidden",paddingRight:rr},Ji);return Gi({className:vt,columns:er,index:pe,isScrolling:me,key:De,onRowClick:at,onRowDoubleClick:qt,onRowRightClick:mn,onRowMouseOver:On,onRowMouseOut:ai,rowData:Wn,style:wt})},"_createRow")},{key:"_getFlexStyleForColumn",value:r(function(P){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe="".concat(P.props.flexGrow," ").concat(P.props.flexShrink," ").concat(P.props.width,"px"),me=Mr({},Y,{flex:pe,msFlex:pe,WebkitFlex:pe});return P.props.maxWidth&&(me.maxWidth=P.props.maxWidth),P.props.minWidth&&(me.minWidth=P.props.minWidth),me},"_getFlexStyleForColumn")},{key:"_getHeaderColumns",value:r(function(){var P=this,Y=this.props,pe=Y.children,me=Y.disableHeader,De=me?[]:o.Children.toArray(pe);return De.map(function(ze,gt){return P._createHeader({column:ze,index:gt})})},"_getHeaderColumns")},{key:"_getRowHeight",value:r(function(P){var Y=this.props.rowHeight;return typeof Y=="function"?Y({index:P}):Y},"_getRowHeight")},{key:"_onScroll",value:r(function(P){var Y=P.clientHeight,pe=P.scrollHeight,me=P.scrollTop,De=this.props.onScroll;De({clientHeight:Y,scrollHeight:pe,scrollTop:me})},"_onScroll")},{key:"_onSectionRendered",value:r(function(P){var Y=P.rowOverscanStartIndex,pe=P.rowOverscanStopIndex,me=P.rowStartIndex,De=P.rowStopIndex,ze=this.props.onRowsRendered;ze({overscanStartIndex:Y,overscanStopIndex:pe,startIndex:me,stopIndex:De})},"_onSectionRendered")},{key:"_setRef",value:r(function(P){this.Grid=P},"_setRef")},{key:"_setScrollbarWidth",value:r(function(){var P=this.getScrollbarWidth();this.setState({scrollbarWidth:P})},"_setScrollbarWidth")}]),ie}(o.PureComponent);n(go,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:r(function(){return null},"noRowsRenderer"),onRowsRendered:r(function(){return null},"onRowsRendered"),onScroll:r(function(){return null},"onScroll"),overscanIndicesGetter:ot,overscanRowCount:10,rowRenderer:Xi,headerRowRenderer:ar,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),go.propTypes={};const Oo=null;var ns=[],fs=null,Hr=null;function gs(){Hr&&(Hr=null,document.body&&fs!=null&&(document.body.style.pointerEvents=fs),fs=null)}r(gs,"enablePointerEventsIfDisabled");function Ws(){gs(),ns.forEach(function(te){return te.__resetIsScrolling()})}r(Ws,"enablePointerEventsAfterDelayCallback");function Ss(){Hr&&cn(Hr);var te=0;ns.forEach(function(ie){te=Math.max(te,ie.props.scrollingResetTimeInterval)}),Hr=Wt(Ws,te)}r(Ss,"enablePointerEventsAfterDelay");function ls(te){te.currentTarget===window&&fs==null&&document.body&&(fs=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),Ss(),ns.forEach(function(ie){ie.props.scrollElement===te.currentTarget&&ie.__handleWindowScrollEvent()})}r(ls,"onScrollWindow");function As(te,ie){ns.some(function($){return $.props.scrollElement===ie})||ie.addEventListener("scroll",ls),ns.push(te)}r(As,"registerScrollListener");function vs(te,ie){ns=ns.filter(function($){return $!==te}),ns.length||(ie.removeEventListener("scroll",ls),Hr&&(cn(Hr),gs()))}r(vs,"unregisterScrollListener");var Wo=r(function(ie){return ie===window},"isWindow"),Xo=r(function(ie){return ie.getBoundingClientRect()},"getBoundingBox");function zo(te,ie){if(te)if(Wo(te)){var $=window,P=$.innerHeight,Y=$.innerWidth;return{height:typeof P=="number"?P:0,width:typeof Y=="number"?Y:0}}else return Xo(te);else return{height:ie.serverHeight,width:ie.serverWidth}}r(zo,"getDimensions");function zs(te,ie){if(Wo(ie)&&document.documentElement){var $=document.documentElement,P=Xo(te),Y=Xo($);return{top:P.top-Y.top,left:P.left-Y.left}}else{var pe=Ra(ie),me=Xo(te),De=Xo(ie);return{top:me.top+pe.top-De.top,left:me.left+pe.left-De.left}}}r(zs,"getPositionOffset");function Ra(te){return Wo(te)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:te.scrollTop,left:te.scrollLeft}}r(Ra,"getScrollOffset");var Gs,Go;function mi(te,ie){var $=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);ie&&(P=P.filter(function(Y){return Object.getOwnPropertyDescriptor(te,Y).enumerable})),$.push.apply($,P)}return $}r(mi,"WindowScroller_ownKeys");function ys(te){for(var ie=1;ie<arguments.length;ie++){var $=arguments[ie]!=null?arguments[ie]:{};ie%2?mi($,!0).forEach(function(P){n(te,P,$[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors($)):mi($).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor($,P))})}return te}r(ys,"WindowScroller_objectSpread");var yi=150,ea=r(function(){return typeof window<"u"?window:void 0},"getWindow"),Os=(Go=Gs=function(te){t(ie,te);function ie(){var $,P;u(this,ie);for(var Y=arguments.length,pe=new Array(Y),me=0;me<Y;me++)pe[me]=arguments[me];return P=s(this,($=i(ie)).call.apply($,[this].concat(pe))),n(a(P),"_window",ea()),n(a(P),"_isMounted",!1),n(a(P),"_positionFromTop",0),n(a(P),"_positionFromLeft",0),n(a(P),"_detectElementResize",void 0),n(a(P),"_child",void 0),n(a(P),"state",ys({},zo(P.props.scrollElement,P.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),n(a(P),"_registerChild",function(De){De&&!(De instanceof Element)&&console.warn("WindowScroller registerChild expects to be passed Element or null"),P._child=De,P.updatePosition()}),n(a(P),"_onChildScroll",function(De){var ze=De.scrollTop;if(P.state.scrollTop!==ze){var gt=P.props.scrollElement;gt&&(typeof gt.scrollTo=="function"?gt.scrollTo(0,ze+P._positionFromTop):gt.scrollTop=ze+P._positionFromTop)}}),n(a(P),"_registerResizeListener",function(De){De===window?window.addEventListener("resize",P._onResize,!1):P._detectElementResize.addResizeListener(De,P._onResize)}),n(a(P),"_unregisterResizeListener",function(De){De===window?window.removeEventListener("resize",P._onResize,!1):De&&P._detectElementResize.removeResizeListener(De,P._onResize)}),n(a(P),"_onResize",function(){P.updatePosition()}),n(a(P),"__handleWindowScrollEvent",function(){if(P._isMounted){var De=P.props.onScroll,ze=P.props.scrollElement;if(ze){var gt=Ra(ze),qe=Math.max(0,gt.left-P._positionFromLeft),mt=Math.max(0,gt.top-P._positionFromTop);P.setState({isScrolling:!0,scrollLeft:qe,scrollTop:mt}),De({scrollLeft:qe,scrollTop:mt})}}}),n(a(P),"__resetIsScrolling",function(){P.setState({isScrolling:!1})}),P}return r(ie,"WindowScroller"),p(ie,[{key:"updatePosition",value:r(function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollElement,Y=this.props.onResize,pe=this.state,me=pe.height,De=pe.width,ze=this._child||$n.findDOMNode(this);if(ze instanceof Element&&P){var gt=zs(ze,P);this._positionFromTop=gt.top,this._positionFromLeft=gt.left}var qe=zo(P,this.props);(me!==qe.height||De!==qe.width)&&(this.setState({height:qe.height,width:qe.width}),Y({height:qe.height,width:qe.width}))},"updatePosition")},{key:"componentDidMount",value:r(function(){var P=this.props.scrollElement;this._detectElementResize=lt(),this.updatePosition(P),P&&(As(this,P),this._registerResizeListener(P)),this._isMounted=!0},"componentDidMount")},{key:"componentDidUpdate",value:r(function(P,Y){var pe=this.props.scrollElement,me=P.scrollElement;me!==pe&&me!=null&&pe!=null&&(this.updatePosition(pe),vs(this,me),As(this,pe),this._unregisterResizeListener(me),this._registerResizeListener(pe))},"componentDidUpdate")},{key:"componentWillUnmount",value:r(function(){var P=this.props.scrollElement;P&&(vs(this,P),this._unregisterResizeListener(P)),this._isMounted=!1},"componentWillUnmount")},{key:"render",value:r(function(){var P=this.props.children,Y=this.state,pe=Y.isScrolling,me=Y.scrollTop,De=Y.scrollLeft,ze=Y.height,gt=Y.width;return P({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:ze,isScrolling:pe,scrollLeft:De,scrollTop:me,width:gt})},"render")}]),ie}(o.PureComponent),n(Gs,"propTypes",null),Go);n(Os,"defaultProps",{onResize:r(function(){},"onResize"),onScroll:r(function(){},"onScroll"),scrollingResetTimeInterval:yi,scrollElement:ea(),serverHeight:0,serverWidth:0});const Ca=null},7763652800:(B,l,d)=>{"use strict";d.d(l,{P:()=>h});function u(m){return r(({dispatch:s,getState:i})=>e=>t=>typeof t=="function"?t(s,i,m):e(t),"middleware")}r(u,"createThunkMiddleware");var h=u(),p=null},3803027235:()=>{/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */String.fromCodePoint||function(){var B=function(){try{var h={},p=Object.defineProperty,m=p(h,h,h)&&p}catch{}return m}(),l=String.fromCharCode,d=Math.floor,u=r(function(h){var p=16384,m=[],a,s,i=-1,e=arguments.length;if(!e)return"";for(var t="";++i<e;){var n=Number(arguments[i]);if(!isFinite(n)||n<0||n>1114111||d(n)!=n)throw RangeError("Invalid code point: "+n);n<=65535?m.push(n):(n-=65536,a=(n>>10)+55296,s=n%1024+56320,m.push(a,s)),(i+1==e||m.length>p)&&(t+=l.apply(null,m),m.length=0)}return t},"fromCodePoint");B?B(String,"fromCodePoint",{value:u,configurable:!0,writable:!0}):String.fromCodePoint=u}()},8863079134:(B,l,d)=>{"use strict";d.d(l,{Q:()=>u,c:()=>h});var u;(function(p){p[p.ID=25]="ID",p[p.FRECENCY=0]="FRECENCY",p[p.RAW_FRECENCY=65]="RAW_FRECENCY",p[p.FRECENCY_BONUS=76]="FRECENCY_BONUS",p[p.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",p[p.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",p[p.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",p[p.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",p[p.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",p[p.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",p[p.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",p[p.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",p[p.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",p[p.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",p[p.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",p[p.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",p[p.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",p[p.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",p[p.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",p[p.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",p[p.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",p[p.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",p[p.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",p[p.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",p[p.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",p[p.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",p[p.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",p[p.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",p[p.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",p[p.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",p[p.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",p[p.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",p[p.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",p[p.TYPE_QUERY=6]="TYPE_QUERY",p[p.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",p[p.TYPE_EMOJI=178]="TYPE_EMOJI",p[p.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",p[p.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",p[p.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",p[p.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",p[p.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",p[p.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",p[p.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",p[p.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",p[p.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",p[p.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",p[p.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",p[p.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",p[p.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",p[p.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",p[p.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",p[p.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",p[p.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",p[p.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",p[p.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",p[p.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",p[p.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",p[p.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",p[p.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",p[p.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",p[p.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",p[p.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",p[p.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",p[p.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",p[p.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",p[p.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",p[p.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",p[p.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",p[p.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",p[p.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",p[p.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",p[p.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",p[p.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",p[p.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",p[p.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",p[p.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",p[p.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",p[p.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",p[p.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",p[p.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",p[p.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",p[p.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",p[p.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",p[p.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",p[p.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",p[p.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",p[p.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",p[p.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",p[p.QUERY_LENGTH=61]="QUERY_LENGTH",p[p.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",p[p.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",p[p.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",p[p.MPIM_PRIORITY=66]="MPIM_PRIORITY",p[p.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",p[p.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",p[p.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",p[p.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",p[p.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",p[p.FUZZY_SCORE=73]="FUZZY_SCORE",p[p.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",p[p.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",p[p.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",p[p.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",p[p.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",p[p.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",p[p.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",p[p.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",p[p.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",p[p.USER_PRIORITY=89]="USER_PRIORITY",p[p.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",p[p.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",p[p.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",p[p.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",p[p.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",p[p.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",p[p.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",p[p.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",p[p.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",p[p.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",p[p.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",p[p.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",p[p.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",p[p.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",p[p.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",p[p.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",p[p.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",p[p.HERE_KEYWORD=131]="HERE_KEYWORD",p[p.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",p[p.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",p[p.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",p[p.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",p[p.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",p[p.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",p[p.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",p[p.QUERY_IS_SELF=193]="QUERY_IS_SELF",p[p.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",p[p.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",p[p.USER_SAME_TEAM=235]="USER_SAME_TEAM",p[p.USER_IS_BOT=254]="USER_IS_BOT",p[p.MEMBER_OF_SEARCHER_DEFAULT_TEAM=294]="MEMBER_OF_SEARCHER_DEFAULT_TEAM",p[p.HAS_WORKSPACE_INTERSECTION_WITH_SEARCHER=295]="HAS_WORKSPACE_INTERSECTION_WITH_SEARCHER",p[p.NUM_WORKSPACES_INTERSECTING_WITH_SEARCHER=296]="NUM_WORKSPACES_INTERSECTING_WITH_SEARCHER",p[p.USER_IS_DEACTIVATED=297]="USER_IS_DEACTIVATED",p[p.USER_IS_IN_CURRENT_THREAD=298]="USER_IS_IN_CURRENT_THREAD",p[p.MEMBER_FILTER_USER_IN_CHANNEL=299]="MEMBER_FILTER_USER_IN_CHANNEL",p[p.FROM_AND_CHANNEL_FILTERS_USER_IN_CHANNEL=300]="FROM_AND_CHANNEL_FILTERS_USER_IN_CHANNEL",p[p.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",p[p.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",p[p.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",p[p.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",p[p.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",p[p.HISTORY_POSITION=232]="HISTORY_POSITION",p[p.USER_DM_NULL=179]="USER_DM_NULL",p[p.USER_DM_EMPTY=180]="USER_DM_EMPTY",p[p.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",p[p.USER_DM_OPEN=182]="USER_DM_OPEN",p[p.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",p[p.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",p[p.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",p[p.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",p[p.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",p[p.USER_HAS_DMED=284]="USER_HAS_DMED",p[p.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",p[p.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",p[p.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",p[p.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",p[p.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",p[p.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",p[p.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",p[p.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",p[p.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",p[p.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",p[p.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",p[p.USER_HAS_MPDMED=303]="USER_HAS_MPDMED",p[p.USER_MPIM_LOG1P_MEMBERSHIP_COUNT=304]="USER_MPIM_LOG1P_MEMBERSHIP_COUNT",p[p.USER_MPIM_GTE5_MEMBERSHIP_COUNT=305]="USER_MPIM_GTE5_MEMBERSHIP_COUNT",p[p.USER_MPIM_GTE25_MEMBERSHIP_COUNT=306]="USER_MPIM_GTE25_MEMBERSHIP_COUNT",p[p.USER_MPIM_READ_AGE_DECAY_7D_V2=307]="USER_MPIM_READ_AGE_DECAY_7D_V2",p[p.USER_MPIM_READ_AGE_DECAY_2H_V2=308]="USER_MPIM_READ_AGE_DECAY_2H_V2",p[p.MPIM_MEMBERS=166]="MPIM_MEMBERS",p[p.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",p[p.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",p[p.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",p[p.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",p[p.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",p[p.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",p[p.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",p[p.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",p[p.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",p[p.MPIM_NUM_OTHER_MEMBERS_EQUALS_NUM_QUERY_WORDS=301]="MPIM_NUM_OTHER_MEMBERS_EQUALS_NUM_QUERY_WORDS",p[p.MPIM_ALL_OTHER_MEMBERS_NAMES_HAVE_PREFIX_MATCH=302]="MPIM_ALL_OTHER_MEMBERS_NAMES_HAVE_PREFIX_MATCH",p[p.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",p[p.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",p[p.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",p[p.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",p[p.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",p[p.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",p[p.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",p[p.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",p[p.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",p[p.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",p[p.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",p[p.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",p[p.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",p[p.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",p[p.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",p[p.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",p[p.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",p[p.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",p[p.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",p[p.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",p[p.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",p[p.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",p[p.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",p[p.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",p[p.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",p[p.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",p[p.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",p[p.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",p[p.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",p[p.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",p[p.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",p[p.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",p[p.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",p[p.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",p[p.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",p[p.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",p[p.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",p[p.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",p[p.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",p[p.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",p[p.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",p[p.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",p[p.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",p[p.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",p[p.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",p[p.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",p[p.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",p[p.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",p[p.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",p[p.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",p[p.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",p[p.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",p[p.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",p[p.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",p[p.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",p[p.NUM_RESULTS=192]="NUM_RESULTS",p[p.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",p[p.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",p[p.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",p[p.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",p[p.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",p[p.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",p[p.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",p[p.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",p[p.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",p[p.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",p[p.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",p[p.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",p[p.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",p[p.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",p[p.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",p[p.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",p[p.FILE_USER_CTR=211]="FILE_USER_CTR",p[p.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",p[p.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",p[p.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",p[p.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",p[p.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",p[p.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",p[p.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",p[p.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",p[p.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",p[p.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",p[p.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",p[p.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",p[p.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",p[p.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",p[p.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",p[p.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",p[p.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",p[p.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",p[p.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",p[p.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",p[p.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",p[p.OS_APP_ACTION=228]="OS_APP_ACTION",p[p.TYPE_APP=216]="TYPE_APP",p[p.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",p[p.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",p[p.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",p[p.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",p[p.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",p[p.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",p[p.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",p[p.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",p[p.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",p[p.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",p[p.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",p[p.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",p[p.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",p[p.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",p[p.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",p[p.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",p[p.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",p[p.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",p[p.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",p[p.TEST_FEATURE_2=1001]="TEST_FEATURE_2",p[p.TEST_FEATURE_3=1002]="TEST_FEATURE_3",p[p.TEST_FEATURE_4=1003]="TEST_FEATURE_4",p[p.TEST_FEATURE_5=1004]="TEST_FEATURE_5",p[p.TEST_FEATURE_6=1005]="TEST_FEATURE_6",p[p.TEST_FEATURE_7=1006]="TEST_FEATURE_7",p[p.TEST_FEATURE_8=1007]="TEST_FEATURE_8",p[p.TEST_FEATURE_9=1008]="TEST_FEATURE_9",p[p.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(u||(u={}));var h;(function(p){p[p.NUMERICAL=1]="NUMERICAL",p[p.BINARY=2]="BINARY",p[p.TEXT=3]="TEXT"})(h||(h={}))},6542992125:(B,l,d)=>{"use strict";var u=d(4224187311),h=d.n(u);const p=u.Reader,m=u.Writer,a=u.util,s=u.roots.default||(u.roots.default={}),i=s.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const n={};return n.RecvMedia=function(){function o(g){if(g)for(let S=Object.keys(g),c=0;c<S.length;++c)g[S[c]]!=null&&(this[S[c]]=g[S[c]])}r(o,"RecvMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.fractionLost=0,o.prototype.jitter=0,o.prototype.packetsLost=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.userId="",o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let f;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(f=["audioStats","videoStats"]),set:a.oneOfSetter(f)}),o.create=r(function(S){return new o(S)},"create"),o.encode=r(function(S,c){return c||(c=m.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&c.uint32(8).uint64(S.peerId),S.bytesReceived!=null&&Object.hasOwnProperty.call(S,"bytesReceived")&&c.uint32(16).uint64(S.bytesReceived),S.packetsReceived!=null&&Object.hasOwnProperty.call(S,"packetsReceived")&&c.uint32(24).uint64(S.packetsReceived),S.fractionLost!=null&&Object.hasOwnProperty.call(S,"fractionLost")&&c.uint32(33).double(S.fractionLost),S.jitter!=null&&Object.hasOwnProperty.call(S,"jitter")&&c.uint32(41).double(S.jitter),S.packetsLost!=null&&Object.hasOwnProperty.call(S,"packetsLost")&&c.uint32(48).uint64(S.packetsLost),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&c.uint32(56).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&s.slack.calls.analytics.RecvMedia.Audio.encode(S.audioStats,c.uint32(66).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&s.slack.calls.analytics.RecvMedia.Video.encode(S.videoStats,c.uint32(74).fork()).ldelim(),S.userId!=null&&Object.hasOwnProperty.call(S,"userId")&&c.uint32(82).string(S.userId),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&c.uint32(90).string(S.peerIdString),c},"encode"),o.encodeDelimited=r(function(S,c){return this.encode(S,c).ldelim()},"encodeDelimited"),o.decode=r(function(S,c){S instanceof p||(S=p.create(S));let v=c===void 0?S.len:S.pos+c,_=new s.slack.calls.analytics.RecvMedia;for(;S.pos<v;){let E=S.uint32();switch(E>>>3){case 1:{_.peerId=S.uint64();break}case 2:{_.bytesReceived=S.uint64();break}case 3:{_.packetsReceived=S.uint64();break}case 4:{_.fractionLost=S.double();break}case 5:{_.jitter=S.double();break}case 6:{_.packetsLost=S.uint64();break}case 7:{_.codec=S.int32();break}case 10:{_.userId=S.string();break}case 11:{_.peerIdString=S.string();break}case 8:{_.audioStats=s.slack.calls.analytics.RecvMedia.Audio.decode(S,S.uint32());break}case 9:{_.videoStats=s.slack.calls.analytics.RecvMedia.Video.decode(S,S.uint32());break}default:S.skipType(E&7);break}}return _},"decode"),o.decodeDelimited=r(function(S){return S instanceof p||(S=new p(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=r(function(S){if(typeof S!="object"||S===null)return"object expected";let c={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&!a.isInteger(S.bytesReceived)&&!(S.bytesReceived&&a.isInteger(S.bytesReceived.low)&&a.isInteger(S.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&!a.isInteger(S.packetsReceived)&&!(S.packetsReceived&&a.isInteger(S.packetsReceived.low)&&a.isInteger(S.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&typeof S.fractionLost!="number")return"fractionLost: number expected";if(S.jitter!=null&&S.hasOwnProperty("jitter")&&typeof S.jitter!="number")return"jitter: number expected";if(S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&!a.isInteger(S.packetsLost)&&!(S.packetsLost&&a.isInteger(S.packetsLost.low)&&a.isInteger(S.packetsLost.high)))return"packetsLost: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.userId!=null&&S.hasOwnProperty("userId")&&!a.isString(S.userId))return"userId: string expected";if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){c.mediaType=1;{let v=s.slack.calls.analytics.RecvMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(c.mediaType===1)return"mediaType: multiple values";c.mediaType=1;{let v=s.slack.calls.analytics.RecvMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=r(function(S){if(S instanceof s.slack.calls.analytics.RecvMedia)return S;let c=new s.slack.calls.analytics.RecvMedia;switch(S.peerId!=null&&(a.Long?(c.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?c.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?c.peerId=S.peerId:typeof S.peerId=="object"&&(c.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesReceived!=null&&(a.Long?(c.bytesReceived=a.Long.fromValue(S.bytesReceived)).unsigned=!0:typeof S.bytesReceived=="string"?c.bytesReceived=parseInt(S.bytesReceived,10):typeof S.bytesReceived=="number"?c.bytesReceived=S.bytesReceived:typeof S.bytesReceived=="object"&&(c.bytesReceived=new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0))),S.packetsReceived!=null&&(a.Long?(c.packetsReceived=a.Long.fromValue(S.packetsReceived)).unsigned=!0:typeof S.packetsReceived=="string"?c.packetsReceived=parseInt(S.packetsReceived,10):typeof S.packetsReceived=="number"?c.packetsReceived=S.packetsReceived:typeof S.packetsReceived=="object"&&(c.packetsReceived=new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0))),S.fractionLost!=null&&(c.fractionLost=Number(S.fractionLost)),S.jitter!=null&&(c.jitter=Number(S.jitter)),S.packetsLost!=null&&(a.Long?(c.packetsLost=a.Long.fromValue(S.packetsLost)).unsigned=!0:typeof S.packetsLost=="string"?c.packetsLost=parseInt(S.packetsLost,10):typeof S.packetsLost=="number"?c.packetsLost=S.packetsLost:typeof S.packetsLost=="object"&&(c.packetsLost=new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){c.codec=S.codec;break}break;case"UNKNOWN":case 0:c.codec=0;break;case"OPUS":case 1:c.codec=1;break;case"VP8":case 2:c.codec=2;break;case"VP9":case 3:c.codec=3;break;case"H264":case 4:c.codec=4;break}if(S.userId!=null&&(c.userId=String(S.userId)),S.peerIdString!=null&&(c.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");c.audioStats=s.slack.calls.analytics.RecvMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");c.videoStats=s.slack.calls.analytics.RecvMedia.Video.fromObject(S.videoStats)}return c},"fromObject"),o.toObject=r(function(S,c){c||(c={});let v={};if(c.defaults){if(a.Long){let _=new a.Long(0,0,!0);v.peerId=c.longs===String?_.toString():c.longs===Number?_.toNumber():_}else v.peerId=c.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);v.bytesReceived=c.longs===String?_.toString():c.longs===Number?_.toNumber():_}else v.bytesReceived=c.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);v.packetsReceived=c.longs===String?_.toString():c.longs===Number?_.toNumber():_}else v.packetsReceived=c.longs===String?"0":0;if(v.fractionLost=0,v.jitter=0,a.Long){let _=new a.Long(0,0,!0);v.packetsLost=c.longs===String?_.toString():c.longs===Number?_.toNumber():_}else v.packetsLost=c.longs===String?"0":0;v.codec=c.enums===String?"UNKNOWN":0,v.userId="",v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=c.longs===String?String(S.peerId):S.peerId:v.peerId=c.longs===String?a.Long.prototype.toString.call(S.peerId):c.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&(typeof S.bytesReceived=="number"?v.bytesReceived=c.longs===String?String(S.bytesReceived):S.bytesReceived:v.bytesReceived=c.longs===String?a.Long.prototype.toString.call(S.bytesReceived):c.longs===Number?new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0):S.bytesReceived),S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&(typeof S.packetsReceived=="number"?v.packetsReceived=c.longs===String?String(S.packetsReceived):S.packetsReceived:v.packetsReceived=c.longs===String?a.Long.prototype.toString.call(S.packetsReceived):c.longs===Number?new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0):S.packetsReceived),S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&(v.fractionLost=c.json&&!isFinite(S.fractionLost)?String(S.fractionLost):S.fractionLost),S.jitter!=null&&S.hasOwnProperty("jitter")&&(v.jitter=c.json&&!isFinite(S.jitter)?String(S.jitter):S.jitter),S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&(typeof S.packetsLost=="number"?v.packetsLost=c.longs===String?String(S.packetsLost):S.packetsLost:v.packetsLost=c.longs===String?a.Long.prototype.toString.call(S.packetsLost):c.longs===Number?new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0):S.packetsLost),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=c.enums===String?s.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:s.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=s.slack.calls.analytics.RecvMedia.Audio.toObject(S.audioStats,c),c.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=s.slack.calls.analytics.RecvMedia.Video.toObject(S.videoStats,c),c.oneofs&&(v.mediaType="videoStats")),S.userId!=null&&S.hasOwnProperty("userId")&&(v.userId=S.userId),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),o.Audio=function(){function g(S){if(S)for(let c=Object.keys(S),v=0;v<c.length;++v)S[c[v]]!=null&&(this[c[v]]=S[c[v]])}return r(g,"Audio"),g.prototype.audioLevel=0,g.prototype.jitterBufferDelay=0,g.prototype.concealmentEvents=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.concealedSamples=a.Long?a.Long.fromBits(0,0,!0):0,g.create=r(function(c){return new g(c)},"create"),g.encode=r(function(c,v){return v||(v=m.create()),c.audioLevel!=null&&Object.hasOwnProperty.call(c,"audioLevel")&&v.uint32(9).double(c.audioLevel),c.jitterBufferDelay!=null&&Object.hasOwnProperty.call(c,"jitterBufferDelay")&&v.uint32(17).double(c.jitterBufferDelay),c.concealmentEvents!=null&&Object.hasOwnProperty.call(c,"concealmentEvents")&&v.uint32(24).uint64(c.concealmentEvents),c.concealedSamples!=null&&Object.hasOwnProperty.call(c,"concealedSamples")&&v.uint32(32).uint64(c.concealedSamples),v},"encode"),g.encodeDelimited=r(function(c,v){return this.encode(c,v).ldelim()},"encodeDelimited"),g.decode=r(function(c,v){c instanceof p||(c=p.create(c));let _=v===void 0?c.len:c.pos+v,E=new s.slack.calls.analytics.RecvMedia.Audio;for(;c.pos<_;){let b=c.uint32();switch(b>>>3){case 1:{E.audioLevel=c.double();break}case 2:{E.jitterBufferDelay=c.double();break}case 3:{E.concealmentEvents=c.uint64();break}case 4:{E.concealedSamples=c.uint64();break}default:c.skipType(b&7);break}}return E},"decode"),g.decodeDelimited=r(function(c){return c instanceof p||(c=new p(c)),this.decode(c,c.uint32())},"decodeDelimited"),g.verify=r(function(c){return typeof c!="object"||c===null?"object expected":c.audioLevel!=null&&c.hasOwnProperty("audioLevel")&&typeof c.audioLevel!="number"?"audioLevel: number expected":c.jitterBufferDelay!=null&&c.hasOwnProperty("jitterBufferDelay")&&typeof c.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":c.concealmentEvents!=null&&c.hasOwnProperty("concealmentEvents")&&!a.isInteger(c.concealmentEvents)&&!(c.concealmentEvents&&a.isInteger(c.concealmentEvents.low)&&a.isInteger(c.concealmentEvents.high))?"concealmentEvents: integer|Long expected":c.concealedSamples!=null&&c.hasOwnProperty("concealedSamples")&&!a.isInteger(c.concealedSamples)&&!(c.concealedSamples&&a.isInteger(c.concealedSamples.low)&&a.isInteger(c.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),g.fromObject=r(function(c){if(c instanceof s.slack.calls.analytics.RecvMedia.Audio)return c;let v=new s.slack.calls.analytics.RecvMedia.Audio;return c.audioLevel!=null&&(v.audioLevel=Number(c.audioLevel)),c.jitterBufferDelay!=null&&(v.jitterBufferDelay=Number(c.jitterBufferDelay)),c.concealmentEvents!=null&&(a.Long?(v.concealmentEvents=a.Long.fromValue(c.concealmentEvents)).unsigned=!0:typeof c.concealmentEvents=="string"?v.concealmentEvents=parseInt(c.concealmentEvents,10):typeof c.concealmentEvents=="number"?v.concealmentEvents=c.concealmentEvents:typeof c.concealmentEvents=="object"&&(v.concealmentEvents=new a.LongBits(c.concealmentEvents.low>>>0,c.concealmentEvents.high>>>0).toNumber(!0))),c.concealedSamples!=null&&(a.Long?(v.concealedSamples=a.Long.fromValue(c.concealedSamples)).unsigned=!0:typeof c.concealedSamples=="string"?v.concealedSamples=parseInt(c.concealedSamples,10):typeof c.concealedSamples=="number"?v.concealedSamples=c.concealedSamples:typeof c.concealedSamples=="object"&&(v.concealedSamples=new a.LongBits(c.concealedSamples.low>>>0,c.concealedSamples.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=r(function(c,v){v||(v={});let _={};if(v.defaults){if(_.audioLevel=0,_.jitterBufferDelay=0,a.Long){let E=new a.Long(0,0,!0);_.concealmentEvents=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.concealmentEvents=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.concealedSamples=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.concealedSamples=v.longs===String?"0":0}return c.audioLevel!=null&&c.hasOwnProperty("audioLevel")&&(_.audioLevel=v.json&&!isFinite(c.audioLevel)?String(c.audioLevel):c.audioLevel),c.jitterBufferDelay!=null&&c.hasOwnProperty("jitterBufferDelay")&&(_.jitterBufferDelay=v.json&&!isFinite(c.jitterBufferDelay)?String(c.jitterBufferDelay):c.jitterBufferDelay),c.concealmentEvents!=null&&c.hasOwnProperty("concealmentEvents")&&(typeof c.concealmentEvents=="number"?_.concealmentEvents=v.longs===String?String(c.concealmentEvents):c.concealmentEvents:_.concealmentEvents=v.longs===String?a.Long.prototype.toString.call(c.concealmentEvents):v.longs===Number?new a.LongBits(c.concealmentEvents.low>>>0,c.concealmentEvents.high>>>0).toNumber(!0):c.concealmentEvents),c.concealedSamples!=null&&c.hasOwnProperty("concealedSamples")&&(typeof c.concealedSamples=="number"?_.concealedSamples=v.longs===String?String(c.concealedSamples):c.concealedSamples:_.concealedSamples=v.longs===String?a.Long.prototype.toString.call(c.concealedSamples):v.longs===Number?new a.LongBits(c.concealedSamples.low>>>0,c.concealedSamples.high>>>0).toNumber(!0):c.concealedSamples),_},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),g}(),o.Video=function(){function g(S){if(S)for(let c=Object.keys(S),v=0;v<c.length;++v)S[c[v]]!=null&&(this[c[v]]=S[c[v]])}return r(g,"Video"),g.prototype.firCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.nackCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.pliCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.sliCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesPerSecond=0,g.prototype.framesCorrupted=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesDecoded=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesDropped=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesReceived=a.Long?a.Long.fromBits(0,0,!0):0,g.create=r(function(c){return new g(c)},"create"),g.encode=r(function(c,v){return v||(v=m.create()),c.firCount!=null&&Object.hasOwnProperty.call(c,"firCount")&&v.uint32(8).uint64(c.firCount),c.nackCount!=null&&Object.hasOwnProperty.call(c,"nackCount")&&v.uint32(16).uint64(c.nackCount),c.pliCount!=null&&Object.hasOwnProperty.call(c,"pliCount")&&v.uint32(24).uint64(c.pliCount),c.sliCount!=null&&Object.hasOwnProperty.call(c,"sliCount")&&v.uint32(32).uint64(c.sliCount),c.frameHeight!=null&&Object.hasOwnProperty.call(c,"frameHeight")&&v.uint32(40).uint64(c.frameHeight),c.frameWidth!=null&&Object.hasOwnProperty.call(c,"frameWidth")&&v.uint32(48).uint64(c.frameWidth),c.framesPerSecond!=null&&Object.hasOwnProperty.call(c,"framesPerSecond")&&v.uint32(57).double(c.framesPerSecond),c.framesCorrupted!=null&&Object.hasOwnProperty.call(c,"framesCorrupted")&&v.uint32(64).uint64(c.framesCorrupted),c.framesDecoded!=null&&Object.hasOwnProperty.call(c,"framesDecoded")&&v.uint32(72).uint64(c.framesDecoded),c.framesDropped!=null&&Object.hasOwnProperty.call(c,"framesDropped")&&v.uint32(80).uint64(c.framesDropped),c.framesReceived!=null&&Object.hasOwnProperty.call(c,"framesReceived")&&v.uint32(88).uint64(c.framesReceived),v},"encode"),g.encodeDelimited=r(function(c,v){return this.encode(c,v).ldelim()},"encodeDelimited"),g.decode=r(function(c,v){c instanceof p||(c=p.create(c));let _=v===void 0?c.len:c.pos+v,E=new s.slack.calls.analytics.RecvMedia.Video;for(;c.pos<_;){let b=c.uint32();switch(b>>>3){case 1:{E.firCount=c.uint64();break}case 2:{E.nackCount=c.uint64();break}case 3:{E.pliCount=c.uint64();break}case 4:{E.sliCount=c.uint64();break}case 5:{E.frameHeight=c.uint64();break}case 6:{E.frameWidth=c.uint64();break}case 7:{E.framesPerSecond=c.double();break}case 8:{E.framesCorrupted=c.uint64();break}case 9:{E.framesDecoded=c.uint64();break}case 10:{E.framesDropped=c.uint64();break}case 11:{E.framesReceived=c.uint64();break}default:c.skipType(b&7);break}}return E},"decode"),g.decodeDelimited=r(function(c){return c instanceof p||(c=new p(c)),this.decode(c,c.uint32())},"decodeDelimited"),g.verify=r(function(c){return typeof c!="object"||c===null?"object expected":c.firCount!=null&&c.hasOwnProperty("firCount")&&!a.isInteger(c.firCount)&&!(c.firCount&&a.isInteger(c.firCount.low)&&a.isInteger(c.firCount.high))?"firCount: integer|Long expected":c.nackCount!=null&&c.hasOwnProperty("nackCount")&&!a.isInteger(c.nackCount)&&!(c.nackCount&&a.isInteger(c.nackCount.low)&&a.isInteger(c.nackCount.high))?"nackCount: integer|Long expected":c.pliCount!=null&&c.hasOwnProperty("pliCount")&&!a.isInteger(c.pliCount)&&!(c.pliCount&&a.isInteger(c.pliCount.low)&&a.isInteger(c.pliCount.high))?"pliCount: integer|Long expected":c.sliCount!=null&&c.hasOwnProperty("sliCount")&&!a.isInteger(c.sliCount)&&!(c.sliCount&&a.isInteger(c.sliCount.low)&&a.isInteger(c.sliCount.high))?"sliCount: integer|Long expected":c.frameHeight!=null&&c.hasOwnProperty("frameHeight")&&!a.isInteger(c.frameHeight)&&!(c.frameHeight&&a.isInteger(c.frameHeight.low)&&a.isInteger(c.frameHeight.high))?"frameHeight: integer|Long expected":c.frameWidth!=null&&c.hasOwnProperty("frameWidth")&&!a.isInteger(c.frameWidth)&&!(c.frameWidth&&a.isInteger(c.frameWidth.low)&&a.isInteger(c.frameWidth.high))?"frameWidth: integer|Long expected":c.framesPerSecond!=null&&c.hasOwnProperty("framesPerSecond")&&typeof c.framesPerSecond!="number"?"framesPerSecond: number expected":c.framesCorrupted!=null&&c.hasOwnProperty("framesCorrupted")&&!a.isInteger(c.framesCorrupted)&&!(c.framesCorrupted&&a.isInteger(c.framesCorrupted.low)&&a.isInteger(c.framesCorrupted.high))?"framesCorrupted: integer|Long expected":c.framesDecoded!=null&&c.hasOwnProperty("framesDecoded")&&!a.isInteger(c.framesDecoded)&&!(c.framesDecoded&&a.isInteger(c.framesDecoded.low)&&a.isInteger(c.framesDecoded.high))?"framesDecoded: integer|Long expected":c.framesDropped!=null&&c.hasOwnProperty("framesDropped")&&!a.isInteger(c.framesDropped)&&!(c.framesDropped&&a.isInteger(c.framesDropped.low)&&a.isInteger(c.framesDropped.high))?"framesDropped: integer|Long expected":c.framesReceived!=null&&c.hasOwnProperty("framesReceived")&&!a.isInteger(c.framesReceived)&&!(c.framesReceived&&a.isInteger(c.framesReceived.low)&&a.isInteger(c.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),g.fromObject=r(function(c){if(c instanceof s.slack.calls.analytics.RecvMedia.Video)return c;let v=new s.slack.calls.analytics.RecvMedia.Video;return c.firCount!=null&&(a.Long?(v.firCount=a.Long.fromValue(c.firCount)).unsigned=!0:typeof c.firCount=="string"?v.firCount=parseInt(c.firCount,10):typeof c.firCount=="number"?v.firCount=c.firCount:typeof c.firCount=="object"&&(v.firCount=new a.LongBits(c.firCount.low>>>0,c.firCount.high>>>0).toNumber(!0))),c.nackCount!=null&&(a.Long?(v.nackCount=a.Long.fromValue(c.nackCount)).unsigned=!0:typeof c.nackCount=="string"?v.nackCount=parseInt(c.nackCount,10):typeof c.nackCount=="number"?v.nackCount=c.nackCount:typeof c.nackCount=="object"&&(v.nackCount=new a.LongBits(c.nackCount.low>>>0,c.nackCount.high>>>0).toNumber(!0))),c.pliCount!=null&&(a.Long?(v.pliCount=a.Long.fromValue(c.pliCount)).unsigned=!0:typeof c.pliCount=="string"?v.pliCount=parseInt(c.pliCount,10):typeof c.pliCount=="number"?v.pliCount=c.pliCount:typeof c.pliCount=="object"&&(v.pliCount=new a.LongBits(c.pliCount.low>>>0,c.pliCount.high>>>0).toNumber(!0))),c.sliCount!=null&&(a.Long?(v.sliCount=a.Long.fromValue(c.sliCount)).unsigned=!0:typeof c.sliCount=="string"?v.sliCount=parseInt(c.sliCount,10):typeof c.sliCount=="number"?v.sliCount=c.sliCount:typeof c.sliCount=="object"&&(v.sliCount=new a.LongBits(c.sliCount.low>>>0,c.sliCount.high>>>0).toNumber(!0))),c.frameHeight!=null&&(a.Long?(v.frameHeight=a.Long.fromValue(c.frameHeight)).unsigned=!0:typeof c.frameHeight=="string"?v.frameHeight=parseInt(c.frameHeight,10):typeof c.frameHeight=="number"?v.frameHeight=c.frameHeight:typeof c.frameHeight=="object"&&(v.frameHeight=new a.LongBits(c.frameHeight.low>>>0,c.frameHeight.high>>>0).toNumber(!0))),c.frameWidth!=null&&(a.Long?(v.frameWidth=a.Long.fromValue(c.frameWidth)).unsigned=!0:typeof c.frameWidth=="string"?v.frameWidth=parseInt(c.frameWidth,10):typeof c.frameWidth=="number"?v.frameWidth=c.frameWidth:typeof c.frameWidth=="object"&&(v.frameWidth=new a.LongBits(c.frameWidth.low>>>0,c.frameWidth.high>>>0).toNumber(!0))),c.framesPerSecond!=null&&(v.framesPerSecond=Number(c.framesPerSecond)),c.framesCorrupted!=null&&(a.Long?(v.framesCorrupted=a.Long.fromValue(c.framesCorrupted)).unsigned=!0:typeof c.framesCorrupted=="string"?v.framesCorrupted=parseInt(c.framesCorrupted,10):typeof c.framesCorrupted=="number"?v.framesCorrupted=c.framesCorrupted:typeof c.framesCorrupted=="object"&&(v.framesCorrupted=new a.LongBits(c.framesCorrupted.low>>>0,c.framesCorrupted.high>>>0).toNumber(!0))),c.framesDecoded!=null&&(a.Long?(v.framesDecoded=a.Long.fromValue(c.framesDecoded)).unsigned=!0:typeof c.framesDecoded=="string"?v.framesDecoded=parseInt(c.framesDecoded,10):typeof c.framesDecoded=="number"?v.framesDecoded=c.framesDecoded:typeof c.framesDecoded=="object"&&(v.framesDecoded=new a.LongBits(c.framesDecoded.low>>>0,c.framesDecoded.high>>>0).toNumber(!0))),c.framesDropped!=null&&(a.Long?(v.framesDropped=a.Long.fromValue(c.framesDropped)).unsigned=!0:typeof c.framesDropped=="string"?v.framesDropped=parseInt(c.framesDropped,10):typeof c.framesDropped=="number"?v.framesDropped=c.framesDropped:typeof c.framesDropped=="object"&&(v.framesDropped=new a.LongBits(c.framesDropped.low>>>0,c.framesDropped.high>>>0).toNumber(!0))),c.framesReceived!=null&&(a.Long?(v.framesReceived=a.Long.fromValue(c.framesReceived)).unsigned=!0:typeof c.framesReceived=="string"?v.framesReceived=parseInt(c.framesReceived,10):typeof c.framesReceived=="number"?v.framesReceived=c.framesReceived:typeof c.framesReceived=="object"&&(v.framesReceived=new a.LongBits(c.framesReceived.low>>>0,c.framesReceived.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=r(function(c,v){v||(v={});let _={};if(v.defaults){if(a.Long){let E=new a.Long(0,0,!0);_.firCount=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.firCount=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.nackCount=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.nackCount=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.pliCount=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.pliCount=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.sliCount=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.sliCount=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.frameHeight=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.frameHeight=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.frameWidth=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.frameWidth=v.longs===String?"0":0;if(_.framesPerSecond=0,a.Long){let E=new a.Long(0,0,!0);_.framesCorrupted=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.framesCorrupted=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.framesDecoded=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.framesDecoded=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.framesDropped=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.framesDropped=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.framesReceived=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.framesReceived=v.longs===String?"0":0}return c.firCount!=null&&c.hasOwnProperty("firCount")&&(typeof c.firCount=="number"?_.firCount=v.longs===String?String(c.firCount):c.firCount:_.firCount=v.longs===String?a.Long.prototype.toString.call(c.firCount):v.longs===Number?new a.LongBits(c.firCount.low>>>0,c.firCount.high>>>0).toNumber(!0):c.firCount),c.nackCount!=null&&c.hasOwnProperty("nackCount")&&(typeof c.nackCount=="number"?_.nackCount=v.longs===String?String(c.nackCount):c.nackCount:_.nackCount=v.longs===String?a.Long.prototype.toString.call(c.nackCount):v.longs===Number?new a.LongBits(c.nackCount.low>>>0,c.nackCount.high>>>0).toNumber(!0):c.nackCount),c.pliCount!=null&&c.hasOwnProperty("pliCount")&&(typeof c.pliCount=="number"?_.pliCount=v.longs===String?String(c.pliCount):c.pliCount:_.pliCount=v.longs===String?a.Long.prototype.toString.call(c.pliCount):v.longs===Number?new a.LongBits(c.pliCount.low>>>0,c.pliCount.high>>>0).toNumber(!0):c.pliCount),c.sliCount!=null&&c.hasOwnProperty("sliCount")&&(typeof c.sliCount=="number"?_.sliCount=v.longs===String?String(c.sliCount):c.sliCount:_.sliCount=v.longs===String?a.Long.prototype.toString.call(c.sliCount):v.longs===Number?new a.LongBits(c.sliCount.low>>>0,c.sliCount.high>>>0).toNumber(!0):c.sliCount),c.frameHeight!=null&&c.hasOwnProperty("frameHeight")&&(typeof c.frameHeight=="number"?_.frameHeight=v.longs===String?String(c.frameHeight):c.frameHeight:_.frameHeight=v.longs===String?a.Long.prototype.toString.call(c.frameHeight):v.longs===Number?new a.LongBits(c.frameHeight.low>>>0,c.frameHeight.high>>>0).toNumber(!0):c.frameHeight),c.frameWidth!=null&&c.hasOwnProperty("frameWidth")&&(typeof c.frameWidth=="number"?_.frameWidth=v.longs===String?String(c.frameWidth):c.frameWidth:_.frameWidth=v.longs===String?a.Long.prototype.toString.call(c.frameWidth):v.longs===Number?new a.LongBits(c.frameWidth.low>>>0,c.frameWidth.high>>>0).toNumber(!0):c.frameWidth),c.framesPerSecond!=null&&c.hasOwnProperty("framesPerSecond")&&(_.framesPerSecond=v.json&&!isFinite(c.framesPerSecond)?String(c.framesPerSecond):c.framesPerSecond),c.framesCorrupted!=null&&c.hasOwnProperty("framesCorrupted")&&(typeof c.framesCorrupted=="number"?_.framesCorrupted=v.longs===String?String(c.framesCorrupted):c.framesCorrupted:_.framesCorrupted=v.longs===String?a.Long.prototype.toString.call(c.framesCorrupted):v.longs===Number?new a.LongBits(c.framesCorrupted.low>>>0,c.framesCorrupted.high>>>0).toNumber(!0):c.framesCorrupted),c.framesDecoded!=null&&c.hasOwnProperty("framesDecoded")&&(typeof c.framesDecoded=="number"?_.framesDecoded=v.longs===String?String(c.framesDecoded):c.framesDecoded:_.framesDecoded=v.longs===String?a.Long.prototype.toString.call(c.framesDecoded):v.longs===Number?new a.LongBits(c.framesDecoded.low>>>0,c.framesDecoded.high>>>0).toNumber(!0):c.framesDecoded),c.framesDropped!=null&&c.hasOwnProperty("framesDropped")&&(typeof c.framesDropped=="number"?_.framesDropped=v.longs===String?String(c.framesDropped):c.framesDropped:_.framesDropped=v.longs===String?a.Long.prototype.toString.call(c.framesDropped):v.longs===Number?new a.LongBits(c.framesDropped.low>>>0,c.framesDropped.high>>>0).toNumber(!0):c.framesDropped),c.framesReceived!=null&&c.hasOwnProperty("framesReceived")&&(typeof c.framesReceived=="number"?_.framesReceived=v.longs===String?String(c.framesReceived):c.framesReceived:_.framesReceived=v.longs===String?a.Long.prototype.toString.call(c.framesReceived):v.longs===Number?new a.LongBits(c.framesReceived.low>>>0,c.framesReceived.high>>>0).toNumber(!0):c.framesReceived),_},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),g}(),o}(),n.SendMedia=function(){function o(g){if(g)for(let S=Object.keys(g),c=0;c<S.length;++c)g[S[c]]!=null&&(this[S[c]]=g[S[c]])}r(o,"SendMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let f;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(f=["audioStats","videoStats"]),set:a.oneOfSetter(f)}),o.create=r(function(S){return new o(S)},"create"),o.encode=r(function(S,c){return c||(c=m.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&c.uint32(8).uint64(S.peerId),S.bytesSent!=null&&Object.hasOwnProperty.call(S,"bytesSent")&&c.uint32(16).uint64(S.bytesSent),S.packetsSent!=null&&Object.hasOwnProperty.call(S,"packetsSent")&&c.uint32(24).uint64(S.packetsSent),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&c.uint32(32).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&s.slack.calls.analytics.SendMedia.Audio.encode(S.audioStats,c.uint32(42).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&s.slack.calls.analytics.SendMedia.Video.encode(S.videoStats,c.uint32(50).fork()).ldelim(),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&c.uint32(58).string(S.peerIdString),c},"encode"),o.encodeDelimited=r(function(S,c){return this.encode(S,c).ldelim()},"encodeDelimited"),o.decode=r(function(S,c){S instanceof p||(S=p.create(S));let v=c===void 0?S.len:S.pos+c,_=new s.slack.calls.analytics.SendMedia;for(;S.pos<v;){let E=S.uint32();switch(E>>>3){case 1:{_.peerId=S.uint64();break}case 2:{_.bytesSent=S.uint64();break}case 3:{_.packetsSent=S.uint64();break}case 4:{_.codec=S.int32();break}case 7:{_.peerIdString=S.string();break}case 5:{_.audioStats=s.slack.calls.analytics.SendMedia.Audio.decode(S,S.uint32());break}case 6:{_.videoStats=s.slack.calls.analytics.SendMedia.Video.decode(S,S.uint32());break}default:S.skipType(E&7);break}}return _},"decode"),o.decodeDelimited=r(function(S){return S instanceof p||(S=new p(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=r(function(S){if(typeof S!="object"||S===null)return"object expected";let c={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&!a.isInteger(S.bytesSent)&&!(S.bytesSent&&a.isInteger(S.bytesSent.low)&&a.isInteger(S.bytesSent.high)))return"bytesSent: integer|Long expected";if(S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&!a.isInteger(S.packetsSent)&&!(S.packetsSent&&a.isInteger(S.packetsSent.low)&&a.isInteger(S.packetsSent.high)))return"packetsSent: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){c.mediaType=1;{let v=s.slack.calls.analytics.SendMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(c.mediaType===1)return"mediaType: multiple values";c.mediaType=1;{let v=s.slack.calls.analytics.SendMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=r(function(S){if(S instanceof s.slack.calls.analytics.SendMedia)return S;let c=new s.slack.calls.analytics.SendMedia;switch(S.peerId!=null&&(a.Long?(c.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?c.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?c.peerId=S.peerId:typeof S.peerId=="object"&&(c.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesSent!=null&&(a.Long?(c.bytesSent=a.Long.fromValue(S.bytesSent)).unsigned=!0:typeof S.bytesSent=="string"?c.bytesSent=parseInt(S.bytesSent,10):typeof S.bytesSent=="number"?c.bytesSent=S.bytesSent:typeof S.bytesSent=="object"&&(c.bytesSent=new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0))),S.packetsSent!=null&&(a.Long?(c.packetsSent=a.Long.fromValue(S.packetsSent)).unsigned=!0:typeof S.packetsSent=="string"?c.packetsSent=parseInt(S.packetsSent,10):typeof S.packetsSent=="number"?c.packetsSent=S.packetsSent:typeof S.packetsSent=="object"&&(c.packetsSent=new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){c.codec=S.codec;break}break;case"UNKNOWN":case 0:c.codec=0;break;case"OPUS":case 1:c.codec=1;break;case"VP8":case 2:c.codec=2;break;case"VP9":case 3:c.codec=3;break;case"H264":case 4:c.codec=4;break}if(S.peerIdString!=null&&(c.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");c.audioStats=s.slack.calls.analytics.SendMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");c.videoStats=s.slack.calls.analytics.SendMedia.Video.fromObject(S.videoStats)}return c},"fromObject"),o.toObject=r(function(S,c){c||(c={});let v={};if(c.defaults){if(a.Long){let _=new a.Long(0,0,!0);v.peerId=c.longs===String?_.toString():c.longs===Number?_.toNumber():_}else v.peerId=c.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);v.bytesSent=c.longs===String?_.toString():c.longs===Number?_.toNumber():_}else v.bytesSent=c.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);v.packetsSent=c.longs===String?_.toString():c.longs===Number?_.toNumber():_}else v.packetsSent=c.longs===String?"0":0;v.codec=c.enums===String?"UNKNOWN":0,v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=c.longs===String?String(S.peerId):S.peerId:v.peerId=c.longs===String?a.Long.prototype.toString.call(S.peerId):c.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&(typeof S.bytesSent=="number"?v.bytesSent=c.longs===String?String(S.bytesSent):S.bytesSent:v.bytesSent=c.longs===String?a.Long.prototype.toString.call(S.bytesSent):c.longs===Number?new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0):S.bytesSent),S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&(typeof S.packetsSent=="number"?v.packetsSent=c.longs===String?String(S.packetsSent):S.packetsSent:v.packetsSent=c.longs===String?a.Long.prototype.toString.call(S.packetsSent):c.longs===Number?new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0):S.packetsSent),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=c.enums===String?s.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:s.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=s.slack.calls.analytics.SendMedia.Audio.toObject(S.audioStats,c),c.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=s.slack.calls.analytics.SendMedia.Video.toObject(S.videoStats,c),c.oneofs&&(v.mediaType="videoStats")),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),o.Audio=function(){function g(S){if(S)for(let c=Object.keys(S),v=0;v<c.length;++v)S[c[v]]!=null&&(this[c[v]]=S[c[v]])}return r(g,"Audio"),g.prototype.audioLevel=0,g.prototype.echoReturnLoss=0,g.prototype.echoReturnLossEnhancement=0,g.prototype.totalAudioEnergy=0,g.prototype.totalSamplesDuration=0,g.create=r(function(c){return new g(c)},"create"),g.encode=r(function(c,v){return v||(v=m.create()),c.audioLevel!=null&&Object.hasOwnProperty.call(c,"audioLevel")&&v.uint32(9).double(c.audioLevel),c.echoReturnLoss!=null&&Object.hasOwnProperty.call(c,"echoReturnLoss")&&v.uint32(17).double(c.echoReturnLoss),c.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(c,"echoReturnLossEnhancement")&&v.uint32(25).double(c.echoReturnLossEnhancement),c.totalAudioEnergy!=null&&Object.hasOwnProperty.call(c,"totalAudioEnergy")&&v.uint32(33).double(c.totalAudioEnergy),c.totalSamplesDuration!=null&&Object.hasOwnProperty.call(c,"totalSamplesDuration")&&v.uint32(41).double(c.totalSamplesDuration),v},"encode"),g.encodeDelimited=r(function(c,v){return this.encode(c,v).ldelim()},"encodeDelimited"),g.decode=r(function(c,v){c instanceof p||(c=p.create(c));let _=v===void 0?c.len:c.pos+v,E=new s.slack.calls.analytics.SendMedia.Audio;for(;c.pos<_;){let b=c.uint32();switch(b>>>3){case 1:{E.audioLevel=c.double();break}case 2:{E.echoReturnLoss=c.double();break}case 3:{E.echoReturnLossEnhancement=c.double();break}case 4:{E.totalAudioEnergy=c.double();break}case 5:{E.totalSamplesDuration=c.double();break}default:c.skipType(b&7);break}}return E},"decode"),g.decodeDelimited=r(function(c){return c instanceof p||(c=new p(c)),this.decode(c,c.uint32())},"decodeDelimited"),g.verify=r(function(c){return typeof c!="object"||c===null?"object expected":c.audioLevel!=null&&c.hasOwnProperty("audioLevel")&&typeof c.audioLevel!="number"?"audioLevel: number expected":c.echoReturnLoss!=null&&c.hasOwnProperty("echoReturnLoss")&&typeof c.echoReturnLoss!="number"?"echoReturnLoss: number expected":c.echoReturnLossEnhancement!=null&&c.hasOwnProperty("echoReturnLossEnhancement")&&typeof c.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":c.totalAudioEnergy!=null&&c.hasOwnProperty("totalAudioEnergy")&&typeof c.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":c.totalSamplesDuration!=null&&c.hasOwnProperty("totalSamplesDuration")&&typeof c.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),g.fromObject=r(function(c){if(c instanceof s.slack.calls.analytics.SendMedia.Audio)return c;let v=new s.slack.calls.analytics.SendMedia.Audio;return c.audioLevel!=null&&(v.audioLevel=Number(c.audioLevel)),c.echoReturnLoss!=null&&(v.echoReturnLoss=Number(c.echoReturnLoss)),c.echoReturnLossEnhancement!=null&&(v.echoReturnLossEnhancement=Number(c.echoReturnLossEnhancement)),c.totalAudioEnergy!=null&&(v.totalAudioEnergy=Number(c.totalAudioEnergy)),c.totalSamplesDuration!=null&&(v.totalSamplesDuration=Number(c.totalSamplesDuration)),v},"fromObject"),g.toObject=r(function(c,v){v||(v={});let _={};return v.defaults&&(_.audioLevel=0,_.echoReturnLoss=0,_.echoReturnLossEnhancement=0,_.totalAudioEnergy=0,_.totalSamplesDuration=0),c.audioLevel!=null&&c.hasOwnProperty("audioLevel")&&(_.audioLevel=v.json&&!isFinite(c.audioLevel)?String(c.audioLevel):c.audioLevel),c.echoReturnLoss!=null&&c.hasOwnProperty("echoReturnLoss")&&(_.echoReturnLoss=v.json&&!isFinite(c.echoReturnLoss)?String(c.echoReturnLoss):c.echoReturnLoss),c.echoReturnLossEnhancement!=null&&c.hasOwnProperty("echoReturnLossEnhancement")&&(_.echoReturnLossEnhancement=v.json&&!isFinite(c.echoReturnLossEnhancement)?String(c.echoReturnLossEnhancement):c.echoReturnLossEnhancement),c.totalAudioEnergy!=null&&c.hasOwnProperty("totalAudioEnergy")&&(_.totalAudioEnergy=v.json&&!isFinite(c.totalAudioEnergy)?String(c.totalAudioEnergy):c.totalAudioEnergy),c.totalSamplesDuration!=null&&c.hasOwnProperty("totalSamplesDuration")&&(_.totalSamplesDuration=v.json&&!isFinite(c.totalSamplesDuration)?String(c.totalSamplesDuration):c.totalSamplesDuration),_},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),g}(),o.Video=function(){function g(S){if(S)for(let c=Object.keys(S),v=0;v<c.length;++v)S[c[v]]!=null&&(this[c[v]]=S[c[v]])}return r(g,"Video"),g.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesPerSecond=0,g.prototype.framesSent=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesEncoded=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.hugeFramesSent=a.Long?a.Long.fromBits(0,0,!0):0,g.create=r(function(c){return new g(c)},"create"),g.encode=r(function(c,v){return v||(v=m.create()),c.frameHeight!=null&&Object.hasOwnProperty.call(c,"frameHeight")&&v.uint32(8).uint64(c.frameHeight),c.frameWidth!=null&&Object.hasOwnProperty.call(c,"frameWidth")&&v.uint32(16).uint64(c.frameWidth),c.framesPerSecond!=null&&Object.hasOwnProperty.call(c,"framesPerSecond")&&v.uint32(25).double(c.framesPerSecond),c.framesSent!=null&&Object.hasOwnProperty.call(c,"framesSent")&&v.uint32(32).uint64(c.framesSent),c.framesEncoded!=null&&Object.hasOwnProperty.call(c,"framesEncoded")&&v.uint32(40).uint64(c.framesEncoded),c.hugeFramesSent!=null&&Object.hasOwnProperty.call(c,"hugeFramesSent")&&v.uint32(48).uint64(c.hugeFramesSent),v},"encode"),g.encodeDelimited=r(function(c,v){return this.encode(c,v).ldelim()},"encodeDelimited"),g.decode=r(function(c,v){c instanceof p||(c=p.create(c));let _=v===void 0?c.len:c.pos+v,E=new s.slack.calls.analytics.SendMedia.Video;for(;c.pos<_;){let b=c.uint32();switch(b>>>3){case 1:{E.frameHeight=c.uint64();break}case 2:{E.frameWidth=c.uint64();break}case 3:{E.framesPerSecond=c.double();break}case 4:{E.framesSent=c.uint64();break}case 5:{E.framesEncoded=c.uint64();break}case 6:{E.hugeFramesSent=c.uint64();break}default:c.skipType(b&7);break}}return E},"decode"),g.decodeDelimited=r(function(c){return c instanceof p||(c=new p(c)),this.decode(c,c.uint32())},"decodeDelimited"),g.verify=r(function(c){return typeof c!="object"||c===null?"object expected":c.frameHeight!=null&&c.hasOwnProperty("frameHeight")&&!a.isInteger(c.frameHeight)&&!(c.frameHeight&&a.isInteger(c.frameHeight.low)&&a.isInteger(c.frameHeight.high))?"frameHeight: integer|Long expected":c.frameWidth!=null&&c.hasOwnProperty("frameWidth")&&!a.isInteger(c.frameWidth)&&!(c.frameWidth&&a.isInteger(c.frameWidth.low)&&a.isInteger(c.frameWidth.high))?"frameWidth: integer|Long expected":c.framesPerSecond!=null&&c.hasOwnProperty("framesPerSecond")&&typeof c.framesPerSecond!="number"?"framesPerSecond: number expected":c.framesSent!=null&&c.hasOwnProperty("framesSent")&&!a.isInteger(c.framesSent)&&!(c.framesSent&&a.isInteger(c.framesSent.low)&&a.isInteger(c.framesSent.high))?"framesSent: integer|Long expected":c.framesEncoded!=null&&c.hasOwnProperty("framesEncoded")&&!a.isInteger(c.framesEncoded)&&!(c.framesEncoded&&a.isInteger(c.framesEncoded.low)&&a.isInteger(c.framesEncoded.high))?"framesEncoded: integer|Long expected":c.hugeFramesSent!=null&&c.hasOwnProperty("hugeFramesSent")&&!a.isInteger(c.hugeFramesSent)&&!(c.hugeFramesSent&&a.isInteger(c.hugeFramesSent.low)&&a.isInteger(c.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),g.fromObject=r(function(c){if(c instanceof s.slack.calls.analytics.SendMedia.Video)return c;let v=new s.slack.calls.analytics.SendMedia.Video;return c.frameHeight!=null&&(a.Long?(v.frameHeight=a.Long.fromValue(c.frameHeight)).unsigned=!0:typeof c.frameHeight=="string"?v.frameHeight=parseInt(c.frameHeight,10):typeof c.frameHeight=="number"?v.frameHeight=c.frameHeight:typeof c.frameHeight=="object"&&(v.frameHeight=new a.LongBits(c.frameHeight.low>>>0,c.frameHeight.high>>>0).toNumber(!0))),c.frameWidth!=null&&(a.Long?(v.frameWidth=a.Long.fromValue(c.frameWidth)).unsigned=!0:typeof c.frameWidth=="string"?v.frameWidth=parseInt(c.frameWidth,10):typeof c.frameWidth=="number"?v.frameWidth=c.frameWidth:typeof c.frameWidth=="object"&&(v.frameWidth=new a.LongBits(c.frameWidth.low>>>0,c.frameWidth.high>>>0).toNumber(!0))),c.framesPerSecond!=null&&(v.framesPerSecond=Number(c.framesPerSecond)),c.framesSent!=null&&(a.Long?(v.framesSent=a.Long.fromValue(c.framesSent)).unsigned=!0:typeof c.framesSent=="string"?v.framesSent=parseInt(c.framesSent,10):typeof c.framesSent=="number"?v.framesSent=c.framesSent:typeof c.framesSent=="object"&&(v.framesSent=new a.LongBits(c.framesSent.low>>>0,c.framesSent.high>>>0).toNumber(!0))),c.framesEncoded!=null&&(a.Long?(v.framesEncoded=a.Long.fromValue(c.framesEncoded)).unsigned=!0:typeof c.framesEncoded=="string"?v.framesEncoded=parseInt(c.framesEncoded,10):typeof c.framesEncoded=="number"?v.framesEncoded=c.framesEncoded:typeof c.framesEncoded=="object"&&(v.framesEncoded=new a.LongBits(c.framesEncoded.low>>>0,c.framesEncoded.high>>>0).toNumber(!0))),c.hugeFramesSent!=null&&(a.Long?(v.hugeFramesSent=a.Long.fromValue(c.hugeFramesSent)).unsigned=!0:typeof c.hugeFramesSent=="string"?v.hugeFramesSent=parseInt(c.hugeFramesSent,10):typeof c.hugeFramesSent=="number"?v.hugeFramesSent=c.hugeFramesSent:typeof c.hugeFramesSent=="object"&&(v.hugeFramesSent=new a.LongBits(c.hugeFramesSent.low>>>0,c.hugeFramesSent.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=r(function(c,v){v||(v={});let _={};if(v.defaults){if(a.Long){let E=new a.Long(0,0,!0);_.frameHeight=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.frameHeight=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.frameWidth=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.frameWidth=v.longs===String?"0":0;if(_.framesPerSecond=0,a.Long){let E=new a.Long(0,0,!0);_.framesSent=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.framesSent=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.framesEncoded=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.framesEncoded=v.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);_.hugeFramesSent=v.longs===String?E.toString():v.longs===Number?E.toNumber():E}else _.hugeFramesSent=v.longs===String?"0":0}return c.frameHeight!=null&&c.hasOwnProperty("frameHeight")&&(typeof c.frameHeight=="number"?_.frameHeight=v.longs===String?String(c.frameHeight):c.frameHeight:_.frameHeight=v.longs===String?a.Long.prototype.toString.call(c.frameHeight):v.longs===Number?new a.LongBits(c.frameHeight.low>>>0,c.frameHeight.high>>>0).toNumber(!0):c.frameHeight),c.frameWidth!=null&&c.hasOwnProperty("frameWidth")&&(typeof c.frameWidth=="number"?_.frameWidth=v.longs===String?String(c.frameWidth):c.frameWidth:_.frameWidth=v.longs===String?a.Long.prototype.toString.call(c.frameWidth):v.longs===Number?new a.LongBits(c.frameWidth.low>>>0,c.frameWidth.high>>>0).toNumber(!0):c.frameWidth),c.framesPerSecond!=null&&c.hasOwnProperty("framesPerSecond")&&(_.framesPerSecond=v.json&&!isFinite(c.framesPerSecond)?String(c.framesPerSecond):c.framesPerSecond),c.framesSent!=null&&c.hasOwnProperty("framesSent")&&(typeof c.framesSent=="number"?_.framesSent=v.longs===String?String(c.framesSent):c.framesSent:_.framesSent=v.longs===String?a.Long.prototype.toString.call(c.framesSent):v.longs===Number?new a.LongBits(c.framesSent.low>>>0,c.framesSent.high>>>0).toNumber(!0):c.framesSent),c.framesEncoded!=null&&c.hasOwnProperty("framesEncoded")&&(typeof c.framesEncoded=="number"?_.framesEncoded=v.longs===String?String(c.framesEncoded):c.framesEncoded:_.framesEncoded=v.longs===String?a.Long.prototype.toString.call(c.framesEncoded):v.longs===Number?new a.LongBits(c.framesEncoded.low>>>0,c.framesEncoded.high>>>0).toNumber(!0):c.framesEncoded),c.hugeFramesSent!=null&&c.hasOwnProperty("hugeFramesSent")&&(typeof c.hugeFramesSent=="number"?_.hugeFramesSent=v.longs===String?String(c.hugeFramesSent):c.hugeFramesSent:_.hugeFramesSent=v.longs===String?a.Long.prototype.toString.call(c.hugeFramesSent):v.longs===Number?new a.LongBits(c.hugeFramesSent.low>>>0,c.hugeFramesSent.high>>>0).toNumber(!0):c.hugeFramesSent),_},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),g}(),o}(),n.MemoryInfo=function(){function o(f){if(f)for(let g=Object.keys(f),S=0;S<g.length;++S)f[g[S]]!=null&&(this[g[S]]=f[g[S]])}return r(o,"MemoryInfo"),o.prototype.workingSetSize=0,o.prototype.peakWorkingSetSize=0,o.create=r(function(g){return new o(g)},"create"),o.encode=r(function(g,S){return S||(S=m.create()),g.workingSetSize!=null&&Object.hasOwnProperty.call(g,"workingSetSize")&&S.uint32(9).double(g.workingSetSize),g.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(g,"peakWorkingSetSize")&&S.uint32(17).double(g.peakWorkingSetSize),S},"encode"),o.encodeDelimited=r(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=r(function(g,S){g instanceof p||(g=p.create(g));let c=S===void 0?g.len:g.pos+S,v=new s.slack.calls.analytics.MemoryInfo;for(;g.pos<c;){let _=g.uint32();switch(_>>>3){case 1:{v.workingSetSize=g.double();break}case 2:{v.peakWorkingSetSize=g.double();break}default:g.skipType(_&7);break}}return v},"decode"),o.decodeDelimited=r(function(g){return g instanceof p||(g=new p(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=r(function(g){return typeof g!="object"||g===null?"object expected":g.workingSetSize!=null&&g.hasOwnProperty("workingSetSize")&&typeof g.workingSetSize!="number"?"workingSetSize: number expected":g.peakWorkingSetSize!=null&&g.hasOwnProperty("peakWorkingSetSize")&&typeof g.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),o.fromObject=r(function(g){if(g instanceof s.slack.calls.analytics.MemoryInfo)return g;let S=new s.slack.calls.analytics.MemoryInfo;return g.workingSetSize!=null&&(S.workingSetSize=Number(g.workingSetSize)),g.peakWorkingSetSize!=null&&(S.peakWorkingSetSize=Number(g.peakWorkingSetSize)),S},"fromObject"),o.toObject=r(function(g,S){S||(S={});let c={};return S.defaults&&(c.workingSetSize=0,c.peakWorkingSetSize=0),g.workingSetSize!=null&&g.hasOwnProperty("workingSetSize")&&(c.workingSetSize=S.json&&!isFinite(g.workingSetSize)?String(g.workingSetSize):g.workingSetSize),g.peakWorkingSetSize!=null&&g.hasOwnProperty("peakWorkingSetSize")&&(c.peakWorkingSetSize=S.json&&!isFinite(g.peakWorkingSetSize)?String(g.peakWorkingSetSize):g.peakWorkingSetSize),c},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),o}(),n.AppMetrics=function(){function o(f){if(f)for(let g=Object.keys(f),S=0;S<g.length;++S)f[g[S]]!=null&&(this[g[S]]=f[g[S]])}return r(o,"AppMetrics"),o.prototype.cpu=0,o.prototype.memory=null,o.create=r(function(g){return new o(g)},"create"),o.encode=r(function(g,S){return S||(S=m.create()),g.cpu!=null&&Object.hasOwnProperty.call(g,"cpu")&&S.uint32(9).double(g.cpu),g.memory!=null&&Object.hasOwnProperty.call(g,"memory")&&s.slack.calls.analytics.MemoryInfo.encode(g.memory,S.uint32(18).fork()).ldelim(),S},"encode"),o.encodeDelimited=r(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=r(function(g,S){g instanceof p||(g=p.create(g));let c=S===void 0?g.len:g.pos+S,v=new s.slack.calls.analytics.AppMetrics;for(;g.pos<c;){let _=g.uint32();switch(_>>>3){case 1:{v.cpu=g.double();break}case 2:{v.memory=s.slack.calls.analytics.MemoryInfo.decode(g,g.uint32());break}default:g.skipType(_&7);break}}return v},"decode"),o.decodeDelimited=r(function(g){return g instanceof p||(g=new p(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=r(function(g){if(typeof g!="object"||g===null)return"object expected";if(g.cpu!=null&&g.hasOwnProperty("cpu")&&typeof g.cpu!="number")return"cpu: number expected";if(g.memory!=null&&g.hasOwnProperty("memory")){let S=s.slack.calls.analytics.MemoryInfo.verify(g.memory);if(S)return"memory."+S}return null},"verify"),o.fromObject=r(function(g){if(g instanceof s.slack.calls.analytics.AppMetrics)return g;let S=new s.slack.calls.analytics.AppMetrics;if(g.cpu!=null&&(S.cpu=Number(g.cpu)),g.memory!=null){if(typeof g.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");S.memory=s.slack.calls.analytics.MemoryInfo.fromObject(g.memory)}return S},"fromObject"),o.toObject=r(function(g,S){S||(S={});let c={};return S.defaults&&(c.cpu=0,c.memory=null),g.cpu!=null&&g.hasOwnProperty("cpu")&&(c.cpu=S.json&&!isFinite(g.cpu)?String(g.cpu):g.cpu),g.memory!=null&&g.hasOwnProperty("memory")&&(c.memory=s.slack.calls.analytics.MemoryInfo.toObject(g.memory,S)),c},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),o}(),n.Codec=function(){const o={},f=Object.create(o);return f[o[0]="UNKNOWN"]=0,f[o[1]="OPUS"]=1,f[o[2]="VP8"]=2,f[o[3]="VP9"]=3,f[o[4]="H264"]=4,f}(),n.Protocol=function(){const o={},f=Object.create(o);return f[o[0]="UDP"]=0,f[o[1]="TCP"]=1,f}(),n.PathType=function(){const o={},f=Object.create(o);return f[o[0]="DIRECT"]=0,f[o[1]="RELAY"]=1,f}(),n.Report=function(){function o(f){if(this.recv=[],this.send=[],f)for(let g=Object.keys(f),S=0;S<g.length;++S)f[g[S]]!=null&&(this[g[S]]=f[g[S]])}return r(o,"Report"),o.prototype.totalBytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalBytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalRoundTripTime=0,o.prototype.currentRoundTripTime=0,o.prototype.availableOutgoingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.protocol=0,o.prototype.pathType=0,o.prototype.recv=a.emptyArray,o.prototype.send=a.emptyArray,o.prototype.clientTime=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.availableIncomingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.appMetrics=null,o.create=r(function(g){return new o(g)},"create"),o.encode=r(function(g,S){if(S||(S=m.create()),g.totalBytesSent!=null&&Object.hasOwnProperty.call(g,"totalBytesSent")&&S.uint32(8).uint64(g.totalBytesSent),g.totalBytesReceived!=null&&Object.hasOwnProperty.call(g,"totalBytesReceived")&&S.uint32(16).uint64(g.totalBytesReceived),g.totalRoundTripTime!=null&&Object.hasOwnProperty.call(g,"totalRoundTripTime")&&S.uint32(25).double(g.totalRoundTripTime),g.currentRoundTripTime!=null&&Object.hasOwnProperty.call(g,"currentRoundTripTime")&&S.uint32(33).double(g.currentRoundTripTime),g.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(g,"availableOutgoingBitrate")&&S.uint32(40).uint64(g.availableOutgoingBitrate),g.protocol!=null&&Object.hasOwnProperty.call(g,"protocol")&&S.uint32(48).int32(g.protocol),g.pathType!=null&&Object.hasOwnProperty.call(g,"pathType")&&S.uint32(56).int32(g.pathType),g.recv!=null&&g.recv.length)for(let c=0;c<g.recv.length;++c)s.slack.calls.analytics.RecvMedia.encode(g.recv[c],S.uint32(66).fork()).ldelim();if(g.send!=null&&g.send.length)for(let c=0;c<g.send.length;++c)s.slack.calls.analytics.SendMedia.encode(g.send[c],S.uint32(74).fork()).ldelim();return g.clientTime!=null&&Object.hasOwnProperty.call(g,"clientTime")&&S.uint32(80).uint64(g.clientTime),g.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(g,"availableIncomingBitrate")&&S.uint32(88).uint64(g.availableIncomingBitrate),g.appMetrics!=null&&Object.hasOwnProperty.call(g,"appMetrics")&&s.slack.calls.analytics.AppMetrics.encode(g.appMetrics,S.uint32(98).fork()).ldelim(),S},"encode"),o.encodeDelimited=r(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=r(function(g,S){g instanceof p||(g=p.create(g));let c=S===void 0?g.len:g.pos+S,v=new s.slack.calls.analytics.Report;for(;g.pos<c;){let _=g.uint32();switch(_>>>3){case 1:{v.totalBytesSent=g.uint64();break}case 2:{v.totalBytesReceived=g.uint64();break}case 3:{v.totalRoundTripTime=g.double();break}case 4:{v.currentRoundTripTime=g.double();break}case 5:{v.availableOutgoingBitrate=g.uint64();break}case 6:{v.protocol=g.int32();break}case 7:{v.pathType=g.int32();break}case 8:{v.recv&&v.recv.length||(v.recv=[]),v.recv.push(s.slack.calls.analytics.RecvMedia.decode(g,g.uint32()));break}case 9:{v.send&&v.send.length||(v.send=[]),v.send.push(s.slack.calls.analytics.SendMedia.decode(g,g.uint32()));break}case 10:{v.clientTime=g.uint64();break}case 11:{v.availableIncomingBitrate=g.uint64();break}case 12:{v.appMetrics=s.slack.calls.analytics.AppMetrics.decode(g,g.uint32());break}default:g.skipType(_&7);break}}return v},"decode"),o.decodeDelimited=r(function(g){return g instanceof p||(g=new p(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=r(function(g){if(typeof g!="object"||g===null)return"object expected";if(g.totalBytesSent!=null&&g.hasOwnProperty("totalBytesSent")&&!a.isInteger(g.totalBytesSent)&&!(g.totalBytesSent&&a.isInteger(g.totalBytesSent.low)&&a.isInteger(g.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(g.totalBytesReceived!=null&&g.hasOwnProperty("totalBytesReceived")&&!a.isInteger(g.totalBytesReceived)&&!(g.totalBytesReceived&&a.isInteger(g.totalBytesReceived.low)&&a.isInteger(g.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(g.totalRoundTripTime!=null&&g.hasOwnProperty("totalRoundTripTime")&&typeof g.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(g.currentRoundTripTime!=null&&g.hasOwnProperty("currentRoundTripTime")&&typeof g.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(g.availableOutgoingBitrate!=null&&g.hasOwnProperty("availableOutgoingBitrate")&&!a.isInteger(g.availableOutgoingBitrate)&&!(g.availableOutgoingBitrate&&a.isInteger(g.availableOutgoingBitrate.low)&&a.isInteger(g.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(g.protocol!=null&&g.hasOwnProperty("protocol"))switch(g.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(g.pathType!=null&&g.hasOwnProperty("pathType"))switch(g.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(g.recv!=null&&g.hasOwnProperty("recv")){if(!Array.isArray(g.recv))return"recv: array expected";for(let S=0;S<g.recv.length;++S){let c=s.slack.calls.analytics.RecvMedia.verify(g.recv[S]);if(c)return"recv."+c}}if(g.send!=null&&g.hasOwnProperty("send")){if(!Array.isArray(g.send))return"send: array expected";for(let S=0;S<g.send.length;++S){let c=s.slack.calls.analytics.SendMedia.verify(g.send[S]);if(c)return"send."+c}}if(g.clientTime!=null&&g.hasOwnProperty("clientTime")&&!a.isInteger(g.clientTime)&&!(g.clientTime&&a.isInteger(g.clientTime.low)&&a.isInteger(g.clientTime.high)))return"clientTime: integer|Long expected";if(g.availableIncomingBitrate!=null&&g.hasOwnProperty("availableIncomingBitrate")&&!a.isInteger(g.availableIncomingBitrate)&&!(g.availableIncomingBitrate&&a.isInteger(g.availableIncomingBitrate.low)&&a.isInteger(g.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(g.appMetrics!=null&&g.hasOwnProperty("appMetrics")){let S=s.slack.calls.analytics.AppMetrics.verify(g.appMetrics);if(S)return"appMetrics."+S}return null},"verify"),o.fromObject=r(function(g){if(g instanceof s.slack.calls.analytics.Report)return g;let S=new s.slack.calls.analytics.Report;switch(g.totalBytesSent!=null&&(a.Long?(S.totalBytesSent=a.Long.fromValue(g.totalBytesSent)).unsigned=!0:typeof g.totalBytesSent=="string"?S.totalBytesSent=parseInt(g.totalBytesSent,10):typeof g.totalBytesSent=="number"?S.totalBytesSent=g.totalBytesSent:typeof g.totalBytesSent=="object"&&(S.totalBytesSent=new a.LongBits(g.totalBytesSent.low>>>0,g.totalBytesSent.high>>>0).toNumber(!0))),g.totalBytesReceived!=null&&(a.Long?(S.totalBytesReceived=a.Long.fromValue(g.totalBytesReceived)).unsigned=!0:typeof g.totalBytesReceived=="string"?S.totalBytesReceived=parseInt(g.totalBytesReceived,10):typeof g.totalBytesReceived=="number"?S.totalBytesReceived=g.totalBytesReceived:typeof g.totalBytesReceived=="object"&&(S.totalBytesReceived=new a.LongBits(g.totalBytesReceived.low>>>0,g.totalBytesReceived.high>>>0).toNumber(!0))),g.totalRoundTripTime!=null&&(S.totalRoundTripTime=Number(g.totalRoundTripTime)),g.currentRoundTripTime!=null&&(S.currentRoundTripTime=Number(g.currentRoundTripTime)),g.availableOutgoingBitrate!=null&&(a.Long?(S.availableOutgoingBitrate=a.Long.fromValue(g.availableOutgoingBitrate)).unsigned=!0:typeof g.availableOutgoingBitrate=="string"?S.availableOutgoingBitrate=parseInt(g.availableOutgoingBitrate,10):typeof g.availableOutgoingBitrate=="number"?S.availableOutgoingBitrate=g.availableOutgoingBitrate:typeof g.availableOutgoingBitrate=="object"&&(S.availableOutgoingBitrate=new a.LongBits(g.availableOutgoingBitrate.low>>>0,g.availableOutgoingBitrate.high>>>0).toNumber(!0))),g.protocol){default:if(typeof g.protocol=="number"){S.protocol=g.protocol;break}break;case"UDP":case 0:S.protocol=0;break;case"TCP":case 1:S.protocol=1;break}switch(g.pathType){default:if(typeof g.pathType=="number"){S.pathType=g.pathType;break}break;case"DIRECT":case 0:S.pathType=0;break;case"RELAY":case 1:S.pathType=1;break}if(g.recv){if(!Array.isArray(g.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");S.recv=[];for(let c=0;c<g.recv.length;++c){if(typeof g.recv[c]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");S.recv[c]=s.slack.calls.analytics.RecvMedia.fromObject(g.recv[c])}}if(g.send){if(!Array.isArray(g.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");S.send=[];for(let c=0;c<g.send.length;++c){if(typeof g.send[c]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");S.send[c]=s.slack.calls.analytics.SendMedia.fromObject(g.send[c])}}if(g.clientTime!=null&&(a.Long?(S.clientTime=a.Long.fromValue(g.clientTime)).unsigned=!0:typeof g.clientTime=="string"?S.clientTime=parseInt(g.clientTime,10):typeof g.clientTime=="number"?S.clientTime=g.clientTime:typeof g.clientTime=="object"&&(S.clientTime=new a.LongBits(g.clientTime.low>>>0,g.clientTime.high>>>0).toNumber(!0))),g.availableIncomingBitrate!=null&&(a.Long?(S.availableIncomingBitrate=a.Long.fromValue(g.availableIncomingBitrate)).unsigned=!0:typeof g.availableIncomingBitrate=="string"?S.availableIncomingBitrate=parseInt(g.availableIncomingBitrate,10):typeof g.availableIncomingBitrate=="number"?S.availableIncomingBitrate=g.availableIncomingBitrate:typeof g.availableIncomingBitrate=="object"&&(S.availableIncomingBitrate=new a.LongBits(g.availableIncomingBitrate.low>>>0,g.availableIncomingBitrate.high>>>0).toNumber(!0))),g.appMetrics!=null){if(typeof g.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");S.appMetrics=s.slack.calls.analytics.AppMetrics.fromObject(g.appMetrics)}return S},"fromObject"),o.toObject=r(function(g,S){S||(S={});let c={};if((S.arrays||S.defaults)&&(c.recv=[],c.send=[]),S.defaults){if(a.Long){let v=new a.Long(0,0,!0);c.totalBytesSent=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else c.totalBytesSent=S.longs===String?"0":0;if(a.Long){let v=new a.Long(0,0,!0);c.totalBytesReceived=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else c.totalBytesReceived=S.longs===String?"0":0;if(c.totalRoundTripTime=0,c.currentRoundTripTime=0,a.Long){let v=new a.Long(0,0,!0);c.availableOutgoingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else c.availableOutgoingBitrate=S.longs===String?"0":0;if(c.protocol=S.enums===String?"UDP":0,c.pathType=S.enums===String?"DIRECT":0,a.Long){let v=new a.Long(0,0,!0);c.clientTime=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else c.clientTime=S.longs===String?"0":0;if(a.Long){let v=new a.Long(0,0,!0);c.availableIncomingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else c.availableIncomingBitrate=S.longs===String?"0":0;c.appMetrics=null}if(g.totalBytesSent!=null&&g.hasOwnProperty("totalBytesSent")&&(typeof g.totalBytesSent=="number"?c.totalBytesSent=S.longs===String?String(g.totalBytesSent):g.totalBytesSent:c.totalBytesSent=S.longs===String?a.Long.prototype.toString.call(g.totalBytesSent):S.longs===Number?new a.LongBits(g.totalBytesSent.low>>>0,g.totalBytesSent.high>>>0).toNumber(!0):g.totalBytesSent),g.totalBytesReceived!=null&&g.hasOwnProperty("totalBytesReceived")&&(typeof g.totalBytesReceived=="number"?c.totalBytesReceived=S.longs===String?String(g.totalBytesReceived):g.totalBytesReceived:c.totalBytesReceived=S.longs===String?a.Long.prototype.toString.call(g.totalBytesReceived):S.longs===Number?new a.LongBits(g.totalBytesReceived.low>>>0,g.totalBytesReceived.high>>>0).toNumber(!0):g.totalBytesReceived),g.totalRoundTripTime!=null&&g.hasOwnProperty("totalRoundTripTime")&&(c.totalRoundTripTime=S.json&&!isFinite(g.totalRoundTripTime)?String(g.totalRoundTripTime):g.totalRoundTripTime),g.currentRoundTripTime!=null&&g.hasOwnProperty("currentRoundTripTime")&&(c.currentRoundTripTime=S.json&&!isFinite(g.currentRoundTripTime)?String(g.currentRoundTripTime):g.currentRoundTripTime),g.availableOutgoingBitrate!=null&&g.hasOwnProperty("availableOutgoingBitrate")&&(typeof g.availableOutgoingBitrate=="number"?c.availableOutgoingBitrate=S.longs===String?String(g.availableOutgoingBitrate):g.availableOutgoingBitrate:c.availableOutgoingBitrate=S.longs===String?a.Long.prototype.toString.call(g.availableOutgoingBitrate):S.longs===Number?new a.LongBits(g.availableOutgoingBitrate.low>>>0,g.availableOutgoingBitrate.high>>>0).toNumber(!0):g.availableOutgoingBitrate),g.protocol!=null&&g.hasOwnProperty("protocol")&&(c.protocol=S.enums===String?s.slack.calls.analytics.Protocol[g.protocol]===void 0?g.protocol:s.slack.calls.analytics.Protocol[g.protocol]:g.protocol),g.pathType!=null&&g.hasOwnProperty("pathType")&&(c.pathType=S.enums===String?s.slack.calls.analytics.PathType[g.pathType]===void 0?g.pathType:s.slack.calls.analytics.PathType[g.pathType]:g.pathType),g.recv&&g.recv.length){c.recv=[];for(let v=0;v<g.recv.length;++v)c.recv[v]=s.slack.calls.analytics.RecvMedia.toObject(g.recv[v],S)}if(g.send&&g.send.length){c.send=[];for(let v=0;v<g.send.length;++v)c.send[v]=s.slack.calls.analytics.SendMedia.toObject(g.send[v],S)}return g.clientTime!=null&&g.hasOwnProperty("clientTime")&&(typeof g.clientTime=="number"?c.clientTime=S.longs===String?String(g.clientTime):g.clientTime:c.clientTime=S.longs===String?a.Long.prototype.toString.call(g.clientTime):S.longs===Number?new a.LongBits(g.clientTime.low>>>0,g.clientTime.high>>>0).toNumber(!0):g.clientTime),g.availableIncomingBitrate!=null&&g.hasOwnProperty("availableIncomingBitrate")&&(typeof g.availableIncomingBitrate=="number"?c.availableIncomingBitrate=S.longs===String?String(g.availableIncomingBitrate):g.availableIncomingBitrate:c.availableIncomingBitrate=S.longs===String?a.Long.prototype.toString.call(g.availableIncomingBitrate):S.longs===Number?new a.LongBits(g.availableIncomingBitrate.low>>>0,g.availableIncomingBitrate.high>>>0).toNumber(!0):g.availableIncomingBitrate),g.appMetrics!=null&&g.hasOwnProperty("appMetrics")&&(c.appMetrics=s.slack.calls.analytics.AppMetrics.toObject(g.appMetrics,S)),c},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.Report"},"getTypeUrl"),o}(),n}(),t}(),e})()},9662350539:(B,l,d)=>{"use strict";d.d(l,{Y:()=>i});var u=d(4224187311),h=d.n(u);const p=u.Reader,m=u.Writer,a=u.util,s=u.roots.default||(u.roots.default={}),i=s.PeerMessage=(()=>{function e(t){if(t)for(let n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}return r(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.prototype.recordingStartNotification=null,e.create=r(function(n){return new e(n)},"create"),e.encode=r(function(n,o){return o||(o=m.create()),n.reacji!=null&&Object.hasOwnProperty.call(n,"reacji")&&s.PeerMessage.Reacji.encode(n.reacji,o.uint32(10).fork()).ldelim(),n.draw!=null&&Object.hasOwnProperty.call(n,"draw")&&s.PeerMessage.Draw.encode(n.draw,o.uint32(18).fork()).ldelim(),n.fromPeerId!=null&&Object.hasOwnProperty.call(n,"fromPeerId")&&o.uint32(24).uint64(n.fromPeerId),n.fromPeerIdString!=null&&Object.hasOwnProperty.call(n,"fromPeerIdString")&&o.uint32(34).string(n.fromPeerIdString),n.capabilities!=null&&Object.hasOwnProperty.call(n,"capabilities")&&s.PeerMessage.Capabilities.encode(n.capabilities,o.uint32(42).fork()).ldelim(),n.background!=null&&Object.hasOwnProperty.call(n,"background")&&s.PeerMessage.Background.encode(n.background,o.uint32(50).fork()).ldelim(),n.muteRequest!=null&&Object.hasOwnProperty.call(n,"muteRequest")&&s.PeerMessage.MuteRequest.encode(n.muteRequest,o.uint32(82).fork()).ldelim(),n.awarenessBroadcast!=null&&Object.hasOwnProperty.call(n,"awarenessBroadcast")&&s.PeerMessage.AwarenessBroadcast.encode(n.awarenessBroadcast,o.uint32(90).fork()).ldelim(),n.awarenessQuery!=null&&Object.hasOwnProperty.call(n,"awarenessQuery")&&s.PeerMessage.AwarenessQuery.encode(n.awarenessQuery,o.uint32(98).fork()).ldelim(),n.awarenessClose!=null&&Object.hasOwnProperty.call(n,"awarenessClose")&&s.PeerMessage.AwarenessClose.encode(n.awarenessClose,o.uint32(106).fork()).ldelim(),n.jukeboxRequest!=null&&Object.hasOwnProperty.call(n,"jukeboxRequest")&&s.PeerMessage.JukeboxRequest.encode(n.jukeboxRequest,o.uint32(114).fork()).ldelim(),n.contentShareDetails!=null&&Object.hasOwnProperty.call(n,"contentShareDetails")&&s.PeerMessage.ContentShareDetails.encode(n.contentShareDetails,o.uint32(122).fork()).ldelim(),n.recordingStartNotification!=null&&Object.hasOwnProperty.call(n,"recordingStartNotification")&&s.PeerMessage.RecordingStartNotification.encode(n.recordingStartNotification,o.uint32(130).fork()).ldelim(),o},"encode"),e.encodeDelimited=r(function(n,o){return this.encode(n,o).ldelim()},"encodeDelimited"),e.decode=r(function(n,o){n instanceof p||(n=p.create(n));let f=o===void 0?n.len:n.pos+o,g=new s.PeerMessage;for(;n.pos<f;){let S=n.uint32();switch(S>>>3){case 1:{g.reacji=s.PeerMessage.Reacji.decode(n,n.uint32());break}case 2:{g.draw=s.PeerMessage.Draw.decode(n,n.uint32());break}case 3:{g.fromPeerId=n.uint64();break}case 4:{g.fromPeerIdString=n.string();break}case 5:{g.capabilities=s.PeerMessage.Capabilities.decode(n,n.uint32());break}case 6:{g.background=s.PeerMessage.Background.decode(n,n.uint32());break}case 10:{g.muteRequest=s.PeerMessage.MuteRequest.decode(n,n.uint32());break}case 11:{g.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.decode(n,n.uint32());break}case 12:{g.awarenessQuery=s.PeerMessage.AwarenessQuery.decode(n,n.uint32());break}case 13:{g.awarenessClose=s.PeerMessage.AwarenessClose.decode(n,n.uint32());break}case 14:{g.jukeboxRequest=s.PeerMessage.JukeboxRequest.decode(n,n.uint32());break}case 15:{g.contentShareDetails=s.PeerMessage.ContentShareDetails.decode(n,n.uint32());break}case 16:{g.recordingStartNotification=s.PeerMessage.RecordingStartNotification.decode(n,n.uint32());break}default:n.skipType(S&7);break}}return g},"decode"),e.decodeDelimited=r(function(n){return n instanceof p||(n=new p(n)),this.decode(n,n.uint32())},"decodeDelimited"),e.verify=r(function(n){if(typeof n!="object"||n===null)return"object expected";if(n.reacji!=null&&n.hasOwnProperty("reacji")){let o=s.PeerMessage.Reacji.verify(n.reacji);if(o)return"reacji."+o}if(n.draw!=null&&n.hasOwnProperty("draw")){let o=s.PeerMessage.Draw.verify(n.draw);if(o)return"draw."+o}if(n.fromPeerId!=null&&n.hasOwnProperty("fromPeerId")&&!a.isInteger(n.fromPeerId)&&!(n.fromPeerId&&a.isInteger(n.fromPeerId.low)&&a.isInteger(n.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(n.fromPeerIdString!=null&&n.hasOwnProperty("fromPeerIdString")&&!a.isString(n.fromPeerIdString))return"fromPeerIdString: string expected";if(n.capabilities!=null&&n.hasOwnProperty("capabilities")){let o=s.PeerMessage.Capabilities.verify(n.capabilities);if(o)return"capabilities."+o}if(n.background!=null&&n.hasOwnProperty("background")){let o=s.PeerMessage.Background.verify(n.background);if(o)return"background."+o}if(n.muteRequest!=null&&n.hasOwnProperty("muteRequest")){let o=s.PeerMessage.MuteRequest.verify(n.muteRequest);if(o)return"muteRequest."+o}if(n.awarenessBroadcast!=null&&n.hasOwnProperty("awarenessBroadcast")){let o=s.PeerMessage.AwarenessBroadcast.verify(n.awarenessBroadcast);if(o)return"awarenessBroadcast."+o}if(n.awarenessQuery!=null&&n.hasOwnProperty("awarenessQuery")){let o=s.PeerMessage.AwarenessQuery.verify(n.awarenessQuery);if(o)return"awarenessQuery."+o}if(n.awarenessClose!=null&&n.hasOwnProperty("awarenessClose")){let o=s.PeerMessage.AwarenessClose.verify(n.awarenessClose);if(o)return"awarenessClose."+o}if(n.jukeboxRequest!=null&&n.hasOwnProperty("jukeboxRequest")){let o=s.PeerMessage.JukeboxRequest.verify(n.jukeboxRequest);if(o)return"jukeboxRequest."+o}if(n.contentShareDetails!=null&&n.hasOwnProperty("contentShareDetails")){let o=s.PeerMessage.ContentShareDetails.verify(n.contentShareDetails);if(o)return"contentShareDetails."+o}if(n.recordingStartNotification!=null&&n.hasOwnProperty("recordingStartNotification")){let o=s.PeerMessage.RecordingStartNotification.verify(n.recordingStartNotification);if(o)return"recordingStartNotification."+o}return null},"verify"),e.fromObject=r(function(n){if(n instanceof s.PeerMessage)return n;let o=new s.PeerMessage;if(n.reacji!=null){if(typeof n.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");o.reacji=s.PeerMessage.Reacji.fromObject(n.reacji)}if(n.draw!=null){if(typeof n.draw!="object")throw TypeError(".PeerMessage.draw: object expected");o.draw=s.PeerMessage.Draw.fromObject(n.draw)}if(n.fromPeerId!=null&&(a.Long?(o.fromPeerId=a.Long.fromValue(n.fromPeerId)).unsigned=!0:typeof n.fromPeerId=="string"?o.fromPeerId=parseInt(n.fromPeerId,10):typeof n.fromPeerId=="number"?o.fromPeerId=n.fromPeerId:typeof n.fromPeerId=="object"&&(o.fromPeerId=new a.LongBits(n.fromPeerId.low>>>0,n.fromPeerId.high>>>0).toNumber(!0))),n.fromPeerIdString!=null&&(o.fromPeerIdString=String(n.fromPeerIdString)),n.capabilities!=null){if(typeof n.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");o.capabilities=s.PeerMessage.Capabilities.fromObject(n.capabilities)}if(n.background!=null){if(typeof n.background!="object")throw TypeError(".PeerMessage.background: object expected");o.background=s.PeerMessage.Background.fromObject(n.background)}if(n.muteRequest!=null){if(typeof n.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");o.muteRequest=s.PeerMessage.MuteRequest.fromObject(n.muteRequest)}if(n.awarenessBroadcast!=null){if(typeof n.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");o.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.fromObject(n.awarenessBroadcast)}if(n.awarenessQuery!=null){if(typeof n.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");o.awarenessQuery=s.PeerMessage.AwarenessQuery.fromObject(n.awarenessQuery)}if(n.awarenessClose!=null){if(typeof n.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");o.awarenessClose=s.PeerMessage.AwarenessClose.fromObject(n.awarenessClose)}if(n.jukeboxRequest!=null){if(typeof n.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");o.jukeboxRequest=s.PeerMessage.JukeboxRequest.fromObject(n.jukeboxRequest)}if(n.contentShareDetails!=null){if(typeof n.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");o.contentShareDetails=s.PeerMessage.ContentShareDetails.fromObject(n.contentShareDetails)}if(n.recordingStartNotification!=null){if(typeof n.recordingStartNotification!="object")throw TypeError(".PeerMessage.recordingStartNotification: object expected");o.recordingStartNotification=s.PeerMessage.RecordingStartNotification.fromObject(n.recordingStartNotification)}return o},"fromObject"),e.toObject=r(function(n,o){o||(o={});let f={};if(o.defaults){if(f.reacji=null,f.draw=null,a.Long){let g=new a.Long(0,0,!0);f.fromPeerId=o.longs===String?g.toString():o.longs===Number?g.toNumber():g}else f.fromPeerId=o.longs===String?"0":0;f.fromPeerIdString="",f.capabilities=null,f.background=null,f.muteRequest=null,f.awarenessBroadcast=null,f.awarenessQuery=null,f.awarenessClose=null,f.jukeboxRequest=null,f.contentShareDetails=null,f.recordingStartNotification=null}return n.reacji!=null&&n.hasOwnProperty("reacji")&&(f.reacji=s.PeerMessage.Reacji.toObject(n.reacji,o)),n.draw!=null&&n.hasOwnProperty("draw")&&(f.draw=s.PeerMessage.Draw.toObject(n.draw,o)),n.fromPeerId!=null&&n.hasOwnProperty("fromPeerId")&&(typeof n.fromPeerId=="number"?f.fromPeerId=o.longs===String?String(n.fromPeerId):n.fromPeerId:f.fromPeerId=o.longs===String?a.Long.prototype.toString.call(n.fromPeerId):o.longs===Number?new a.LongBits(n.fromPeerId.low>>>0,n.fromPeerId.high>>>0).toNumber(!0):n.fromPeerId),n.fromPeerIdString!=null&&n.hasOwnProperty("fromPeerIdString")&&(f.fromPeerIdString=n.fromPeerIdString),n.capabilities!=null&&n.hasOwnProperty("capabilities")&&(f.capabilities=s.PeerMessage.Capabilities.toObject(n.capabilities,o)),n.background!=null&&n.hasOwnProperty("background")&&(f.background=s.PeerMessage.Background.toObject(n.background,o)),n.muteRequest!=null&&n.hasOwnProperty("muteRequest")&&(f.muteRequest=s.PeerMessage.MuteRequest.toObject(n.muteRequest,o)),n.awarenessBroadcast!=null&&n.hasOwnProperty("awarenessBroadcast")&&(f.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.toObject(n.awarenessBroadcast,o)),n.awarenessQuery!=null&&n.hasOwnProperty("awarenessQuery")&&(f.awarenessQuery=s.PeerMessage.AwarenessQuery.toObject(n.awarenessQuery,o)),n.awarenessClose!=null&&n.hasOwnProperty("awarenessClose")&&(f.awarenessClose=s.PeerMessage.AwarenessClose.toObject(n.awarenessClose,o)),n.jukeboxRequest!=null&&n.hasOwnProperty("jukeboxRequest")&&(f.jukeboxRequest=s.PeerMessage.JukeboxRequest.toObject(n.jukeboxRequest,o)),n.contentShareDetails!=null&&n.hasOwnProperty("contentShareDetails")&&(f.contentShareDetails=s.PeerMessage.ContentShareDetails.toObject(n.contentShareDetails,o)),n.recordingStartNotification!=null&&n.hasOwnProperty("recordingStartNotification")&&(f.recordingStartNotification=s.PeerMessage.RecordingStartNotification.toObject(n.recordingStartNotification,o)),f},"toObject"),e.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),e.getTypeUrl=r(function(n){return n===void 0&&(n="type.googleapis.com"),n+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.prototype.emojiUrl="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.emoji!=null&&Object.hasOwnProperty.call(o,"emoji")&&f.uint32(10).string(o.emoji),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(16).int32(o.type),o.emojiUrl!=null&&Object.hasOwnProperty.call(o,"emojiUrl")&&f.uint32(26).string(o.emojiUrl),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.Reacji;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.emoji=o.string();break}case 2:{S.type=o.int32();break}case 3:{S.emojiUrl=o.string();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.emoji!=null&&o.hasOwnProperty("emoji")&&!a.isString(o.emoji))return"emoji: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}return o.emojiUrl!=null&&o.hasOwnProperty("emojiUrl")&&!a.isString(o.emojiUrl)?"emojiUrl: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Reacji)return o;let f=new s.PeerMessage.Reacji;switch(o.emoji!=null&&(f.emoji=String(o.emoji)),o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"Unknown_reaction_type":case 0:f.type=0;break;case"Effect":case 1:f.type=1;break;case"Standard":case 2:f.type=2;break;case"Gif":case 3:f.type=3;break}return o.emojiUrl!=null&&(f.emojiUrl=String(o.emojiUrl)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.emoji="",g.type=f.enums===String?"Unknown_reaction_type":0,g.emojiUrl=""),o.emoji!=null&&o.hasOwnProperty("emoji")&&(g.emoji=o.emoji),o.type!=null&&o.hasOwnProperty("type")&&(g.type=f.enums===String?s.PeerMessage.Reacji.Type[o.type]===void 0?o.type:s.PeerMessage.Reacji.Type[o.type]:o.type),o.emojiUrl!=null&&o.hasOwnProperty("emojiUrl")&&(g.emojiUrl=o.emojiUrl),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const n={},o=Object.create(n);return o[n[0]="Unknown_reaction_type"]=0,o[n[1]="Effect"]=1,o[n[2]="Standard"]=2,o[n[3]="Gif"]=3,o}(),t}(),e.Point=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&f.uint32(9).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&f.uint32(17).double(o.y),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.Point;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.x=o.double();break}case 2:{S.y=o.double();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Point)return o;let f=new s.PeerMessage.Point;return o.x!=null&&(f.x=Number(o.x)),o.y!=null&&(f.y=Number(o.y)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.x=0,g.y=0),o.x!=null&&o.hasOwnProperty("x")&&(g.x=f.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(g.y=f.json&&!isFinite(o.y)?String(o.y):o.y),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.a!=null&&Object.hasOwnProperty.call(o,"a")&&s.PeerMessage.Point.encode(o.a,f.uint32(10).fork()).ldelim(),o.b!=null&&Object.hasOwnProperty.call(o,"b")&&s.PeerMessage.Point.encode(o.b,f.uint32(18).fork()).ldelim(),o.c!=null&&Object.hasOwnProperty.call(o,"c")&&s.PeerMessage.Point.encode(o.c,f.uint32(26).fork()).ldelim(),o.d!=null&&Object.hasOwnProperty.call(o,"d")&&s.PeerMessage.Point.encode(o.d,f.uint32(34).fork()).ldelim(),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.Segment;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.a=s.PeerMessage.Point.decode(o,o.uint32());break}case 2:{S.b=s.PeerMessage.Point.decode(o,o.uint32());break}case 3:{S.c=s.PeerMessage.Point.decode(o,o.uint32());break}case 4:{S.d=s.PeerMessage.Point.decode(o,o.uint32());break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.a!=null&&o.hasOwnProperty("a")){let f=s.PeerMessage.Point.verify(o.a);if(f)return"a."+f}if(o.b!=null&&o.hasOwnProperty("b")){let f=s.PeerMessage.Point.verify(o.b);if(f)return"b."+f}if(o.c!=null&&o.hasOwnProperty("c")){let f=s.PeerMessage.Point.verify(o.c);if(f)return"c."+f}if(o.d!=null&&o.hasOwnProperty("d")){let f=s.PeerMessage.Point.verify(o.d);if(f)return"d."+f}return null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Segment)return o;let f=new s.PeerMessage.Segment;if(o.a!=null){if(typeof o.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");f.a=s.PeerMessage.Point.fromObject(o.a)}if(o.b!=null){if(typeof o.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");f.b=s.PeerMessage.Point.fromObject(o.b)}if(o.c!=null){if(typeof o.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");f.c=s.PeerMessage.Point.fromObject(o.c)}if(o.d!=null){if(typeof o.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");f.d=s.PeerMessage.Point.fromObject(o.d)}return f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.a=null,g.b=null,g.c=null,g.d=null),o.a!=null&&o.hasOwnProperty("a")&&(g.a=s.PeerMessage.Point.toObject(o.a,f)),o.b!=null&&o.hasOwnProperty("b")&&(g.b=s.PeerMessage.Point.toObject(o.b,f)),o.c!=null&&o.hasOwnProperty("c")&&(g.c=s.PeerMessage.Point.toObject(o.c,f)),o.d!=null&&o.hasOwnProperty("d")&&(g.d=s.PeerMessage.Point.toObject(o.d,f)),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(8).int32(o.type),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&s.PeerMessage.Segment.encode(o.segment,f.uint32(18).fork()).ldelim(),o.hue!=null&&Object.hasOwnProperty.call(o,"hue")&&f.uint32(24).int32(o.hue),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&f.uint32(34).string(o.itemId),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&f.uint32(41).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&f.uint32(49).double(o.y),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.Draw;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.type=o.int32();break}case 2:{S.segment=s.PeerMessage.Segment.decode(o,o.uint32());break}case 3:{S.hue=o.int32();break}case 4:{S.itemId=o.string();break}case 5:{S.x=o.double();break}case 6:{S.y=o.double();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(o.segment!=null&&o.hasOwnProperty("segment")){let f=s.PeerMessage.Segment.verify(o.segment);if(f)return"segment."+f}return o.hue!=null&&o.hasOwnProperty("hue")&&!a.isInteger(o.hue)?"hue: integer expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Draw)return o;let f=new s.PeerMessage.Draw;switch(o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:f.type=0;break;case"NEW":case 1:f.type=1;break;case"EDIT":case 2:f.type=2;break;case"END":case 3:f.type=3;break;case"CHANGE_HUE":case 4:f.type=4;break;case"POSITION":case 5:f.type=5;break}if(o.segment!=null){if(typeof o.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");f.segment=s.PeerMessage.Segment.fromObject(o.segment)}return o.hue!=null&&(f.hue=o.hue|0),o.itemId!=null&&(f.itemId=String(o.itemId)),o.x!=null&&(f.x=Number(o.x)),o.y!=null&&(f.y=Number(o.y)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.type=f.enums===String?"UNKNOWN_DRAW_TYPE":0,g.segment=null,g.hue=0,g.itemId="",g.x=0,g.y=0),o.type!=null&&o.hasOwnProperty("type")&&(g.type=f.enums===String?s.PeerMessage.Draw.Type[o.type]===void 0?o.type:s.PeerMessage.Draw.Type[o.type]:o.type),o.segment!=null&&o.hasOwnProperty("segment")&&(g.segment=s.PeerMessage.Segment.toObject(o.segment,f)),o.hue!=null&&o.hasOwnProperty("hue")&&(g.hue=o.hue),o.itemId!=null&&o.hasOwnProperty("itemId")&&(g.itemId=o.itemId),o.x!=null&&o.hasOwnProperty("x")&&(g.x=f.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(g.y=f.json&&!isFinite(o.y)?String(o.y):o.y),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const n={},o=Object.create(n);return o[n[0]="UNKNOWN_DRAW_TYPE"]=0,o[n[1]="NEW"]=1,o[n[2]="EDIT"]=2,o[n[3]="END"]=3,o[n[4]="CHANGE_HUE"]=4,o[n[5]="POSITION"]=5,o}(),t}(),e.Capabilities=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.isDrawEnabled!=null&&Object.hasOwnProperty.call(o,"isDrawEnabled")&&f.uint32(8).bool(o.isDrawEnabled),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.Capabilities;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.isDrawEnabled=o.bool();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&typeof o.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Capabilities)return o;let f=new s.PeerMessage.Capabilities;return o.isDrawEnabled!=null&&(f.isDrawEnabled=Boolean(o.isDrawEnabled)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.isDrawEnabled=!1),o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&(g.isDrawEnabled=o.isDrawEnabled),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.sourceType!=null&&Object.hasOwnProperty.call(o,"sourceType")&&f.uint32(10).string(o.sourceType),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&f.uint32(18).string(o.itemId),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.ContentShareDetails;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.sourceType=o.string();break}case 2:{S.itemId=o.string();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.sourceType!=null&&o.hasOwnProperty("sourceType")&&!a.isString(o.sourceType)?"sourceType: string expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.ContentShareDetails)return o;let f=new s.PeerMessage.ContentShareDetails;return o.sourceType!=null&&(f.sourceType=String(o.sourceType)),o.itemId!=null&&(f.itemId=String(o.itemId)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.sourceType="",g.itemId=""),o.sourceType!=null&&o.hasOwnProperty("sourceType")&&(g.sourceType=o.sourceType),o.itemId!=null&&o.hasOwnProperty("itemId")&&(g.itemId=o.itemId),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"Background"),t.prototype.url="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.url!=null&&Object.hasOwnProperty.call(o,"url")&&f.uint32(10).string(o.url),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.Background;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.url=o.string();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.url!=null&&o.hasOwnProperty("url")&&!a.isString(o.url)?"url: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Background)return o;let f=new s.PeerMessage.Background;return o.url!=null&&(f.url=String(o.url)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.url=""),o.url!=null&&o.hasOwnProperty("url")&&(g.url=o.url),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"MuteRequest"),t.prototype.peerId="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.peerId!=null&&Object.hasOwnProperty.call(o,"peerId")&&f.uint32(10).string(o.peerId),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.MuteRequest;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.peerId=o.string();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.peerId!=null&&o.hasOwnProperty("peerId")&&!a.isString(o.peerId)?"peerId: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.MuteRequest)return o;let f=new s.PeerMessage.MuteRequest;return o.peerId!=null&&(f.peerId=String(o.peerId)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.peerId=""),o.peerId!=null&&o.hasOwnProperty("peerId")&&(g.peerId=o.peerId),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.songKey!=null&&Object.hasOwnProperty.call(o,"songKey")&&f.uint32(10).string(o.songKey),o.stop!=null&&Object.hasOwnProperty.call(o,"stop")&&f.uint32(16).bool(o.stop),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.JukeboxRequest;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.songKey=o.string();break}case 2:{S.stop=o.bool();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.songKey!=null&&o.hasOwnProperty("songKey")&&!a.isString(o.songKey)?"songKey: string expected":o.stop!=null&&o.hasOwnProperty("stop")&&typeof o.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.JukeboxRequest)return o;let f=new s.PeerMessage.JukeboxRequest;return o.songKey!=null&&(f.songKey=String(o.songKey)),o.stop!=null&&(f.stop=Boolean(o.stop)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.songKey="",g.stop=!1),o.songKey!=null&&o.hasOwnProperty("songKey")&&(g.songKey=o.songKey),o.stop!=null&&o.hasOwnProperty("stop")&&(g.stop=o.stop),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.RecordingStartNotification=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"RecordingStartNotification"),t.prototype.type=0,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(8).int32(o.type),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.RecordingStartNotification;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.type=o.int32();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:break}return null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.RecordingStartNotification)return o;let f=new s.PeerMessage.RecordingStartNotification;switch(o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"UNKNOWN_TYPE":case 0:f.type=0;break;case"SUMMARY":case 1:f.type=1;break}return f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.type=f.enums===String?"UNKNOWN_TYPE":0),o.type!=null&&o.hasOwnProperty("type")&&(g.type=f.enums===String?s.PeerMessage.RecordingStartNotification.Type[o.type]===void 0?o.type:s.PeerMessage.RecordingStartNotification.Type[o.type]:o.type),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.RecordingStartNotification"},"getTypeUrl"),t.Type=function(){const n={},o=Object.create(n);return o[n[0]="UNKNOWN_TYPE"]=0,o[n[1]="SUMMARY"]=1,o}(),t}(),e.AwarenessPayload=function(){function t(o){if(o)for(let f=Object.keys(o),g=0;g<f.length;++g)o[f[g]]!=null&&(this[f[g]]=o[f[g]])}r(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let n;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:a.oneOfGetter(n=["fieldTimestampMs"]),set:a.oneOfSetter(n)}),t.create=r(function(f){return new t(f)},"create"),t.encode=r(function(f,g){return g||(g=m.create()),f.fieldName!=null&&Object.hasOwnProperty.call(f,"fieldName")&&g.uint32(10).string(f.fieldName),f.fieldValue!=null&&Object.hasOwnProperty.call(f,"fieldValue")&&g.uint32(18).string(f.fieldValue),f.fieldTimestampMs!=null&&Object.hasOwnProperty.call(f,"fieldTimestampMs")&&g.uint32(24).int64(f.fieldTimestampMs),g},"encode"),t.encodeDelimited=r(function(f,g){return this.encode(f,g).ldelim()},"encodeDelimited"),t.decode=r(function(f,g){f instanceof p||(f=p.create(f));let S=g===void 0?f.len:f.pos+g,c=new s.PeerMessage.AwarenessPayload;for(;f.pos<S;){let v=f.uint32();switch(v>>>3){case 1:{c.fieldName=f.string();break}case 2:{c.fieldValue=f.string();break}case 3:{c.fieldTimestampMs=f.int64();break}default:f.skipType(v&7);break}}return c},"decode"),t.decodeDelimited=r(function(f){return f instanceof p||(f=new p(f)),this.decode(f,f.uint32())},"decodeDelimited"),t.verify=r(function(f){if(typeof f!="object"||f===null)return"object expected";let g={};return f.fieldName!=null&&f.hasOwnProperty("fieldName")&&!a.isString(f.fieldName)?"fieldName: string expected":f.fieldValue!=null&&f.hasOwnProperty("fieldValue")&&!a.isString(f.fieldValue)?"fieldValue: string expected":f.fieldTimestampMs!=null&&f.hasOwnProperty("fieldTimestampMs")&&(g._fieldTimestampMs=1,!a.isInteger(f.fieldTimestampMs)&&!(f.fieldTimestampMs&&a.isInteger(f.fieldTimestampMs.low)&&a.isInteger(f.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=r(function(f){if(f instanceof s.PeerMessage.AwarenessPayload)return f;let g=new s.PeerMessage.AwarenessPayload;return f.fieldName!=null&&(g.fieldName=String(f.fieldName)),f.fieldValue!=null&&(g.fieldValue=String(f.fieldValue)),f.fieldTimestampMs!=null&&(a.Long?(g.fieldTimestampMs=a.Long.fromValue(f.fieldTimestampMs)).unsigned=!1:typeof f.fieldTimestampMs=="string"?g.fieldTimestampMs=parseInt(f.fieldTimestampMs,10):typeof f.fieldTimestampMs=="number"?g.fieldTimestampMs=f.fieldTimestampMs:typeof f.fieldTimestampMs=="object"&&(g.fieldTimestampMs=new a.LongBits(f.fieldTimestampMs.low>>>0,f.fieldTimestampMs.high>>>0).toNumber())),g},"fromObject"),t.toObject=r(function(f,g){g||(g={});let S={};return g.defaults&&(S.fieldName="",S.fieldValue=""),f.fieldName!=null&&f.hasOwnProperty("fieldName")&&(S.fieldName=f.fieldName),f.fieldValue!=null&&f.hasOwnProperty("fieldValue")&&(S.fieldValue=f.fieldValue),f.fieldTimestampMs!=null&&f.hasOwnProperty("fieldTimestampMs")&&(typeof f.fieldTimestampMs=="number"?S.fieldTimestampMs=g.longs===String?String(f.fieldTimestampMs):f.fieldTimestampMs:S.fieldTimestampMs=g.longs===String?a.Long.prototype.toString.call(f.fieldTimestampMs):g.longs===Number?new a.LongBits(f.fieldTimestampMs.low>>>0,f.fieldTimestampMs.high>>>0).toNumber():f.fieldTimestampMs,g.oneofs&&(S._fieldTimestampMs="fieldTimestampMs")),S},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(n){if(this.awarenessState=[],n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=a.emptyArray,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){if(f||(f=m.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),o.awarenessState!=null&&o.awarenessState.length)for(let g=0;g<o.awarenessState.length;++g)s.PeerMessage.AwarenessPayload.encode(o.awarenessState[g],f.uint32(26).fork()).ldelim();return f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.AwarenessBroadcast;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}case 3:{S.awarenessState&&S.awarenessState.length||(S.awarenessState=[]),S.awarenessState.push(s.PeerMessage.AwarenessPayload.decode(o,o.uint32()));break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel))return"channel: string expected";if(o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user))return"user: string expected";if(o.awarenessState!=null&&o.hasOwnProperty("awarenessState")){if(!Array.isArray(o.awarenessState))return"awarenessState: array expected";for(let f=0;f<o.awarenessState.length;++f){let g=s.PeerMessage.AwarenessPayload.verify(o.awarenessState[f]);if(g)return"awarenessState."+g}}return null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.AwarenessBroadcast)return o;let f=new s.PeerMessage.AwarenessBroadcast;if(o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),o.awarenessState){if(!Array.isArray(o.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");f.awarenessState=[];for(let g=0;g<o.awarenessState.length;++g){if(typeof o.awarenessState[g]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");f.awarenessState[g]=s.PeerMessage.AwarenessPayload.fromObject(o.awarenessState[g])}}return f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};if((f.arrays||f.defaults)&&(g.awarenessState=[]),f.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),o.awarenessState&&o.awarenessState.length){g.awarenessState=[];for(let S=0;S<o.awarenessState.length;++S)g.awarenessState[S]=s.PeerMessage.AwarenessPayload.toObject(o.awarenessState[S],f)}return g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.AwarenessQuery;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.AwarenessQuery)return o;let f=new s.PeerMessage.AwarenessQuery;return o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(n){if(n)for(let o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return r(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,f){return f||(f=m.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),f},"encode"),t.encodeDelimited=r(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=r(function(o,f){o instanceof p||(o=p.create(o));let g=f===void 0?o.len:o.pos+f,S=new s.PeerMessage.AwarenessClose;for(;o.pos<g;){let c=o.uint32();switch(c>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(c&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.AwarenessClose)return o;let f=new s.PeerMessage.AwarenessClose;return o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),f},"fromObject"),t.toObject=r(function(o,f){f||(f={});let g={};return f.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},8853366040:(B,l,d)=>{"use strict";d.d(l,{X:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidCursor:"invalid_cursor",InvalidArguments:"invalid_arguments"},i=(0,p.A)("activity.feed generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"activity.feed",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to activity.feed
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcheractivityFeedFetcher",description:"activity.feed generated fetcher"}},4128196744:(B,l,d)=>{"use strict";d.d(l,{P:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={UnknownMethod:"unknown_method",InternalError:"internal_error",InvalidArguments:"invalid_arguments",InvalidCursor:"invalid_cursor"},i=(0,p.A)("ai.activity.topics generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"ai.activity.topics",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to ai.activity.topics
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcheraiActivityTopicsFetcher",description:"ai.activity.topics generated fetcher"}},5091058320:(B,l,d)=>{"use strict";d.d(l,{$:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={MethodNotSupported:"method_not_supported",AppNotFound:"app_not_found",AppNotInstalled:"app_not_installed",ProviderNotFound:"provider_not_found",UnknownWorkflowId:"unknown_workflow_id",UnknownFunctionId:"unknown_function_id",FunctionBelongsToAnotherApp:"function_belongs_to_another_app",ScopeGroupNotFound:"scope_group_not_found"},i=(0,p.A)("apps.auth.external.start generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"apps.auth.external.start",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to apps.auth.external.start
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherappsAuthExternalStartFetcher",description:"apps.auth.external.start generated fetcher"}},9954566755:(B,l,d)=>{"use strict";d.d(l,{O:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited"},i=(0,p.A)("connectInvites.list generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"connectInvites.list",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to connectInvites.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherconnectInvitesListFetcher",description:"connectInvites.list generated fetcher"}},3107518051:(B,l,d)=>{"use strict";d.d(l,{T:()=>s,W:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},i=(0,p.A)("conversations.acceptSharedInvite generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.acceptSharedInvite",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to conversations.acceptSharedInvite
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},3234482903:(B,l,d)=>{"use strict";d.d(l,{_:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={ChannelNotFound:"channel_not_found",MissingScope:"missing_scope",TeamAccessNotGranted:"team_access_not_granted",UserNotFound:"user_not_found",UserRemovedFromTeam:"user_removed_from_team"},i=(0,p.A)("conversations.info generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.info",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to conversations.info
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherconversationsInfoFetcher",description:"conversations.info generated fetcher"}},5019885664:(B,l,d)=>{"use strict";d.d(l,{U:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={FeatureNotEnabled:"feature_not_enabled",ChannelNotFound:"channel_not_found",ErrorFetchingChannelPrefs:"error_fetching_channel_prefs"},i=(0,p.A)("conversations.listPrefs generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.listPrefs",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to conversations.listPrefs
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherconversationsListPrefsFetcher",description:"conversations.listPrefs generated fetcher"}},9667109180:(B,l,d)=>{"use strict";d.d(l,{Sv:()=>s,a0:()=>e,jB:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},i={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",DomainClaimed:"domain_claimed"},e=(0,p.A)("conversations.sharedInviteAcceptanceEligibility generated fetcher",(t,n,o)=>new u.S((f,g)=>{const{reason:S,...c}=o,v=(0,a.VA)(c);t((0,h.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:v,reason:S})).then(_=>{f(_)}).catch(_=>{(0,m.Ay)({getState:n}).error(`API call to conversations.sharedInviteAcceptanceEligibility
						with reason ${S} failed, initiated by generated fetcher`),g(_)})}));e.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},794667355:(B,l,d)=>{"use strict";d.d(l,{R:()=>s,a:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidChannel:"invalid_channel",InvalidDraft:"invalid_draft",InvalidThreadTs:"invalid_thread_ts",InvalidClientMsgId:"invalid_client_msg_id",MustProvideThreadTsAndBroadcast:"must_provide_thread_ts_and_broadcast",InvalidUnattachedThreadDraft:"invalid_unattached_thread_draft",BothBlocksAndTextProvided:"both_blocks_and_text_provided",MustProvideBlocksOrText:"must_provide_blocks_or_text",BothUserIdsAndChannelIdProvidedInDestination:"both_user_ids_and_channel_id_provided_in_destination",InvalidDestinationsCount:"invalid_destinations_count",AttachedDraftExists:"attached_draft_exists",InvalidMessage:"invalid_message",MsgBlocksTooLong:"msg_blocks_too_long",FileNotFound:"file_not_found",InvalidUserIds:"invalid_user_ids",InvalidTime:"invalid_time",TimeInPast:"time_in_past",TimeTooFar:"time_too_far",ErrorSettingTimer:"error_setting_timer",UnableToCreateDraft:"unable_to_create_draft",ScheduledDraftCannotBeAttached:"scheduled_draft_cannot_be_attached",InvalidUnfurlFormat:"invalid_unfurl_format",InvalidUnfurlArgument:"invalid_unfurl_argument",InvalidUnfurlUrlTooLong:"invalid_unfurl_url_too_long",InvalidUnfurlUrlExpression:"invalid_unfurl_url_expression",InvalidFilePermissionsFormat:"invalid_file_permissions_format",InvalidFilePermissionsGrant:"invalid_file_permissions_grant",InvalidFilePermissionsFileId:"invalid_file_permissions_file_id",MessageLimitExceeded:"message_limit_exceeded"},i=(0,p.A)("drafts.create generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"drafts.create",args:c,reason:g})).then(v=>{o((0,a.XK)(v))}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to drafts.create
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherdraftsCreateFetcher",description:"drafts.create generated fetcher"}},8978332228:(B,l,d)=>{"use strict";d.d(l,{$:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={DraftNotFound:"draft_not_found",UnableToDeleteDraft:"unable_to_delete_draft",DraftHasConflict:"draft_has_conflict",DraftDeleteInvalid:"draft_delete_invalid"},i=(0,p.A)("drafts.delete generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"drafts.delete",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to drafts.delete
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherdraftsDeleteFetcher",description:"drafts.delete generated fetcher"}},4361310107:(B,l,d)=>{"use strict";d.d(l,{U:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={UnableToFetchDrafts:"unable_to_fetch_drafts"},i=(0,p.A)("drafts.list generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"drafts.list",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to drafts.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherdraftsListFetcher",description:"drafts.list generated fetcher"}},8545309420:(B,l,d)=>{"use strict";d.d(l,{W:()=>s,l:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorLowerCaseNamesOnly:"error_lower_case_names_only",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",FailedToAddEmoji:"failed_to_add_emoji",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},i=(0,p.A)("emoji.add generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"emoji.add",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to emoji.add
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},6996845722:(B,l,d)=>{"use strict";d.d(l,{$:()=>s,i:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={ConnectorNotFound:"connector_not_found",FunctionDisabled:"function_disabled",NotConnected:"not_connected",FunctionNotFound:"function_not_found",InvalidRecordId:"invalid_record_id"},i=(0,p.A)("enterpriseSearch.getEntity generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"enterpriseSearch.getEntity",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to enterpriseSearch.getEntity
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherenterpriseSearchGetEntityFetcher",description:"enterpriseSearch.getEntity generated fetcher"}},6109527008:(B,l,d)=>{"use strict";d.d(l,{D:()=>i,G:()=>s});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={FeatureNotEnabled:"feature_not_enabled",InviteNotFound:"invite_not_found",WorkspaceNotFound:"workspace_not_found",OperationNotAllowed:"operation_not_allowed",ExternalWorkspaceLimitReached:"external_workspace_limit_reached",FailedToFetchTermsOfService:"failed_to_fetch_terms_of_service",TermsOfServiceNotAccepted:"terms_of_service_not_accepted",GuestUserNotAllowed:"guest_user_not_allowed",EmailDoesNotMatch:"email_does_not_match",InvalidRecipientTeam:"invalid_recipient_team",DomainClaimed:"domain_claimed",NotPaid:"not_paid"},i=(0,p.A)("externalWorkspaces.invites.accept generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"externalWorkspaces.invites.accept",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to externalWorkspaces.invites.accept
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesAcceptFetcher",description:"externalWorkspaces.invites.accept generated fetcher"}},9283169796:(B,l,d)=>{"use strict";d.d(l,{I:()=>s,l:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InviteNotFound:"invite_not_found",InviteInvalid:"invite_invalid",RateLimited:"rate_limited",InviteUsed:"invite_used",FailedGeneratingInviteOutput:"failed_generating_invite_output"},i=(0,p.A)("externalWorkspaces.invites.info generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"externalWorkspaces.invites.info",args:c,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to externalWorkspaces.invites.info
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesInfoFetcher",description:"externalWorkspaces.invites.info generated fetcher"}},3744975169:(B,l,d)=>{"use strict";d.d(l,{x:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={FileNotFound:"file_not_found",UnknownMethod:"unknown_method",FiletypeNotSupported:"filetype_not_supported",CannotUpgradeAccess:"cannot_upgrade_access",UpgradeNotSupported:"upgrade_not_supported"},i=(0,p.A)("files.requestPermission generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"files.requestPermission",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to files.requestPermission
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherfilesRequestPermissionFetcher",description:"files.requestPermission generated fetcher"}},4019387120:(B,l,d)=>{"use strict";d.d(l,{I:()=>s});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s=(0,p.A)("help.issues.ticketStats generated fetcher",(i,e,t)=>new u.S((n,o)=>{const{reason:f,...g}=t,S=(0,a.VA)(g);i((0,h.apiCall)({method:"help.issues.ticketStats",args:S,reason:f})).then(c=>{n(c)}).catch(c=>{(0,m.Ay)({getState:e}).error(`API call to help.issues.ticketStats
						with reason ${f} failed, initiated by generated fetcher`),o(c)})}));s.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},9573689842:(B,l,d)=>{"use strict";d.d(l,{l:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={},i=(0,p.A)("help.productHelpCard.list generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"help.productHelpCard.list",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to help.productHelpCard.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},1884870561:(B,l,d)=>{"use strict";d.d(l,{G:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},i=(0,p.A)("helpdesk.categories generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.categories",args:c,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to helpdesk.categories
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},2738283699:(B,l,d)=>{"use strict";d.d(l,{h:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={CouldNotFetchSections:"could_not_fetch_sections"},i=(0,p.A)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:c,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},3530559799:(B,l,d)=>{"use strict";d.d(l,{a:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},i=(0,p.A)("helpdesk.get generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.get",args:c,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to helpdesk.get
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},9095778707:(B,l,d)=>{"use strict";d.d(l,{V:()=>s,o:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={ChannelNotFound:"channel_not_found",MissingScope:"missing_scope",InvalidApp:"invalid_app",InternalError:"internal_error",UriNotHandledByApp:"uri_not_handled_by_app",UriNotFoundInMessage:"uri_not_found_in_message",EmailNotVerified:"email_not_verified",UnsupportedEmailAddress:"unsupported_email_address",InvalidClientCache:"invalid_client_cache",SsoNotAllowed:"sso_not_allowed"},i=(0,p.A)("links.getTransferPayload generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"links.getTransferPayload",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to links.getTransferPayload
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherlinksGetTransferPayloadFetcher",description:"links.getTransferPayload generated fetcher"}},2183297536:(B,l,d)=>{"use strict";d.d(l,{z:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor",SortsNotSupported:"sorts_not_supported",FiltersNotSupported:"filters_not_supported",ArchiveNotSupported:"archive_not_supported",IncludeSuggestedNotSupported:"include_suggested_not_supported"},i=(0,p.A)("lists.records.list generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"lists.records.list",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to lists.records.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},8087802044:(B,l,d)=>{"use strict";d.d(l,{a:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},i=(0,p.A)("megaphone.setNotificationAsSeen generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"megaphone.setNotificationAsSeen",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to megaphone.setNotificationAsSeen
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},2755563660:(B,l,d)=>{"use strict";d.d(l,{l:()=>s});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942);const a={InternalError:"internal_error"},s=(0,p.A)("onboarding.fetch generated fetcher",(i,e,t)=>new u.S((n,o)=>{const{reason:f,...g}=t,S=g;i((0,h.apiCall)({method:"onboarding.fetch",args:S,reason:f})).then(c=>{n(c)}).catch(c=>{(0,m.Ay)({getState:e}).error(`API call to onboarding.fetch
						with reason ${f} failed, initiated by generated fetcher`),o(c)})}));s.meta={name:"createFetcher",key:"createFetcheronboardingFetchFetcher",description:"onboarding.fetch generated fetcher"}},6619653240:(B,l,d)=>{"use strict";d.d(l,{n:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={NotImplemented:"not_implemented",NoProductSelected:"no_product_selected",InvalidRequest:"invalid_request",UnableToSetProductId:"unable_to_set_product_id",UnableToSetAddonIds:"unable_to_set_addon_ids",InvalidProductId:"invalid_product_id",AddonListTooLong:"addon_list_too_long",InvalidAddonIdInList:"invalid_addon_id_in_list",MultipleAddonsWithSameType:"multiple_addons_with_same_type"},i=(0,p.A)("payments.checkout.config generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"payments.checkout.config",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to payments.checkout.config
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherpaymentsCheckoutConfigFetcher",description:"payments.checkout.config generated fetcher"}},4623317806:(B,l,d)=>{"use strict";d.d(l,{T:()=>i,W:()=>s});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={AlreadyPinned:"already_pinned",BadTimestamp:"bad_timestamp",ChannelNotFound:"channel_not_found",ExternalChannelMigrating:"external_channel_migrating",FileNotFound:"file_not_found",FileNotShared:"file_not_shared",MessageNotFound:"message_not_found",NoItemSpecified:"no_item_specified",NotInChannel:"not_in_channel",NotPinnable:"not_pinnable",RestrictedAction:"restricted_action",TooManyPins:"too_many_pins"},i=(0,p.A)("pins.add generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"pins.add",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to pins.add
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherpinsAddFetcher",description:"pins.add generated fetcher"}},6798336995:(B,l,d)=>{"use strict";d.d(l,{u:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={ChannelNotFound:"channel_not_found",NotInChannel:"not_in_channel",ReconnectFailed:"reconnect_failed",UserRemovedFromTeam:"user_removed_from_team",RestrictedAction:"restricted_action"},i=(0,p.A)("pins.list generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"pins.list",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to pins.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherpinsListFetcher",description:"pins.list generated fetcher"}},9470148207:(B,l,d)=>{"use strict";d.d(l,{w:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={BadTimestamp:"bad_timestamp",ChannelNotFound:"channel_not_found",ExternalChannelMigrating:"external_channel_migrating",FileCommentNotFound:"file_comment_not_found",FileNotFound:"file_not_found",MessageNotFound:"message_not_found",NoItemSpecified:"no_item_specified",NoPin:"no_pin",NotPinned:"not_pinned",RestrictedAction:"restricted_action"},i=(0,p.A)("pins.remove generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"pins.remove",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to pins.remove
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherpinsRemoveFetcher",description:"pins.remove generated fetcher"}},6112135410:(B,l,d)=>{"use strict";d.d(l,{Q:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},i=(0,p.A)("rooms.inviteResponse generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.inviteResponse",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.inviteResponse
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},961883039:(B,l,d)=>{"use strict";d.d(l,{g:()=>s});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidUser:"invalid_user",ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id",PermissionDenied:"permission_denied",CannotInviteExternal:"cannot_invite_external",InviteFailed:"invite_failed",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",MaxPotentialParticipants:"max_potential_participants",RecipientHuddlesDisabled:"recipient_huddles_disabled",FreemiumMaxParticipants:"freemium_max_participants"},i=(0,p.A)("rooms.notifyMember generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.notifyMember",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.notifyMember
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherroomsNotifyMemberFetcher",description:"rooms.notifyMember generated fetcher"}},1752680116:(B,l,d)=>{"use strict";d.d(l,{i:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied",InvalidLocale:"invalid_locale"},i=(0,p.A)("rooms.startTranscription generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.startTranscription",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.startTranscription
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},3311224630:(B,l,d)=>{"use strict";d.d(l,{W:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},i=(0,p.A)("rooms.stopTranscription generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.stopTranscription",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.stopTranscription
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},5605178122:(B,l,d)=>{"use strict";d.d(l,{z:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={},i=(0,p.A)("search.autocomplete.topEngagedFiles generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"search.autocomplete.topEngagedFiles",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to search.autocomplete.topEngagedFiles
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTopEngagedFilesFetcher",description:"search.autocomplete.topEngagedFiles generated fetcher"}},70306884:(B,l,d)=>{"use strict";d.d(l,{v:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={AuthError:"auth_error"},i=(0,p.A)("search.autocomplete.triggers generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"search.autocomplete.triggers",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to search.autocomplete.triggers
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},9906715974:(B,l,d)=>{"use strict";d.d(l,{k:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={},i=(0,p.A)("sfdc.orgInfo generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"sfdc.orgInfo",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to sfdc.orgInfo
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchersfdcOrgInfoFetcher",description:"sfdc.orgInfo generated fetcher"}},5465753304:(B,l,d)=>{"use strict";d.d(l,{Z:()=>i,q:()=>s});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team",InviteNotFound:"invite_not_found"},i=(0,p.A)("sharedInvites.accept generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"sharedInvites.accept",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to sharedInvites.accept
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},8256037714:(B,l,d)=>{"use strict";d.d(l,{d:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InternalError:"internal_error"},i=(0,p.A)("sharedInvites.canGetLink generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"sharedInvites.canGetLink",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to sharedInvites.canGetLink
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchersharedInvitesCanGetLinkFetcher",description:"sharedInvites.canGetLink generated fetcher"}},477544047:(B,l,d)=>{"use strict";d.d(l,{M:()=>s,b:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={NoEmail:"no_email",NoCode:"no_code",Failed:"failed",Expired:"expired",Ratelimited:"ratelimited",MagicLoginFailed:"magic_login_failed",CaptchaFailed:"captcha_failed"},i=(0,p.A)("signin.confirmCode generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"signin.confirmCode",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to signin.confirmCode
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchersigninConfirmCodeFetcher",description:"signin.confirmCode generated fetcher"}},3066574952:(B,l,d)=>{"use strict";d.d(l,{i:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={NoEmail:"no_email",InvalidEmail:"invalid_email",ConfirmEmailFailed:"confirm_email_failed",Ratelimited:"ratelimited",InvalidDeviceId:"invalid_device_id",MissingArgument:"missing_argument",WorkspaceLimitExceeded:"workspace_limit_exceeded",UnsupportedArguments:"unsupported_arguments",BadEmailDomain:"bad_email_domain",CodeRequestLimitReached:"code_request_limit_reached",CaptchaFailed:"captcha_failed",DomainNotFound:"domain_not_found",CaptchaEmpty:"captcha_empty"},i=(0,p.A)("signup.confirmEmail generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"signup.confirmEmail",args:c,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to signup.confirmEmail
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetchersignupConfirmEmailFetcher",description:"signup.confirmEmail generated fetcher"}},2379172929:(B,l,d)=>{"use strict";d.d(l,{K:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidRequest:"invalid_request",InternalError:"internal_error"},i=(0,p.A)("team.feature.request generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"team.feature.request",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to team.feature.request
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherteamFeatureRequestFetcher",description:"team.feature.request generated fetcher"}},1298266756:(B,l,d)=>{"use strict";d.d(l,{a:()=>s,p:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={NoSelfVip:"no_self_vip",NoBotVip:"no_bot_vip",UserNotFound:"user_not_found",TooManyVips:"too_many_vips"},i=(0,p.A)("users.priority.add generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"users.priority.add",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to users.priority.add
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherusersPriorityAddFetcher",description:"users.priority.add generated fetcher"}},7497467541:(B,l,d)=>{"use strict";d.d(l,{O:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={UserNotFound:"user_not_found"},i=(0,p.A)("users.priority.remove generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"users.priority.remove",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to users.priority.remove
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherusersPriorityRemoveFetcher",description:"users.priority.remove generated fetcher"}},5060479402:(B,l,d)=>{"use strict";d.d(l,{k:()=>s,n:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken",CannotUpdateStatus:"cannot_update_status",PermissionDenied:"permission_denied",UsernameSame:"username_same",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidOooMessage:"invalid_ooo_message",InvalidStartsWithAt:"invalid_starts_with_at"},i=(0,p.A)("users.profile.set generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"users.profile.set",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to users.profile.set
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},5780280082:(B,l,d)=>{"use strict";d.d(l,{o:()=>i});var u=d(1985486637),h=d(9204569428),p=d(3320534337),m=d(2691514942),a=d(2580172240);const s={InvalidEntityId:"invalid_entity_id",InvalidApp:"invalid_app",InvalidAppId:"invalid_app_id",MessageNotFound:"message_not_found",ChannelNotFound:"channel_not_found",InvalidEntityDetails:"invalid_entity_details",EntityNotFound:"entity_not_found",NotImplemented:"not_implemented",InternalError:"internal_error",ConnectorNotFound:"connector_not_found",FunctionDisabled:"function_disabled",NotConnected:"not_connected",FunctionNotFound:"function_not_found",InvalidRecordId:"invalid_record_id",FailedToRequestForEntityDetails:"failed_to_request_for_entity_details"},i=(0,p.A)("workObjects.getEntity generated fetcher",(e,t,n)=>new u.S((o,f)=>{const{reason:g,...S}=n,c=(0,a.VA)(S);e((0,h.apiCall)({method:"workObjects.getEntity",args:c,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to workObjects.getEntity
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));i.meta={name:"createFetcher",key:"createFetcherworkObjectsGetEntityFetcher",description:"workObjects.getEntity generated fetcher"}},881599141:(B,l,d)=>{"use strict";d.d(l,{k:()=>u});const u={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"}},9541240844:(B,l,d)=>{"use strict";d.r(l),d.d(l,{$Command:()=>mi,AllowNotifications:()=>fm,AssociateChannelFlowCommand:()=>sc,BadRequestException:()=>Kl,BatchChannelMembershipsFilterSensitiveLog:()=>sf,BatchCreateChannelMembershipCommand:()=>dd,BatchCreateChannelMembershipResponseFilterSensitiveLog:()=>af,ChannelAssociatedWithFlowSummaryFilterSensitiveLog:()=>df,ChannelBanFilterSensitiveLog:()=>cf,ChannelBanSummaryFilterSensitiveLog:()=>uf,ChannelFilterSensitiveLog:()=>lf,ChannelFlowCallbackCommand:()=>Vs,ChannelFlowCallbackRequestFilterSensitiveLog:()=>pf,ChannelFlowFilterSensitiveLog:()=>ff,ChannelFlowSummaryFilterSensitiveLog:()=>mf,ChannelMembershipFilterSensitiveLog:()=>gf,ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:()=>jc,ChannelMembershipPreferencesFilterSensitiveLog:()=>Zd,ChannelMembershipSummaryFilterSensitiveLog:()=>vf,ChannelMembershipType:()=>hm,ChannelMessageCallbackFilterSensitiveLog:()=>hf,ChannelMessageFilterSensitiveLog:()=>yf,ChannelMessagePersistenceType:()=>Em,ChannelMessageStatus:()=>bm,ChannelMessageSummaryFilterSensitiveLog:()=>_f,ChannelMessageType:()=>Cm,ChannelMode:()=>gm,ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:()=>$c,ChannelModeratorFilterSensitiveLog:()=>Ef,ChannelModeratorSummaryFilterSensitiveLog:()=>bf,ChannelPrivacy:()=>Sm,ChannelSummaryFilterSensitiveLog:()=>rd,ChimeSDKMessaging:()=>x,ChimeSDKMessagingClient:()=>Es,ChimeSDKMessagingServiceException:()=>ps,ConflictException:()=>Jl,CreateChannelBanCommand:()=>ol,CreateChannelBanResponseFilterSensitiveLog:()=>Tf,CreateChannelCommand:()=>sl,CreateChannelFlowCommand:()=>cd,CreateChannelFlowRequestFilterSensitiveLog:()=>If,CreateChannelMembershipCommand:()=>Wa,CreateChannelMembershipResponseFilterSensitiveLog:()=>wf,CreateChannelModeratorCommand:()=>al,CreateChannelModeratorResponseFilterSensitiveLog:()=>Af,CreateChannelRequestFilterSensitiveLog:()=>Cf,DeleteChannelBanCommand:()=>Ia,DeleteChannelCommand:()=>ll,DeleteChannelFlowCommand:()=>ud,DeleteChannelMembershipCommand:()=>fd,DeleteChannelMessageCommand:()=>hd,DeleteChannelModeratorCommand:()=>pd,DeleteMessagingStreamingConfigurationsCommand:()=>md,DescribeChannelBanCommand:()=>gd,DescribeChannelBanResponseFilterSensitiveLog:()=>Df,DescribeChannelCommand:()=>ac,DescribeChannelFlowCommand:()=>dl,DescribeChannelFlowResponseFilterSensitiveLog:()=>Rf,DescribeChannelMembershipCommand:()=>cl,DescribeChannelMembershipForAppInstanceUserCommand:()=>ga,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:()=>Pf,DescribeChannelMembershipResponseFilterSensitiveLog:()=>Mf,DescribeChannelModeratedByAppInstanceUserCommand:()=>ul,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>kf,DescribeChannelModeratorCommand:()=>Sa,DescribeChannelModeratorResponseFilterSensitiveLog:()=>Lf,DescribeChannelResponseFilterSensitiveLog:()=>Of,DisassociateChannelFlowCommand:()=>fl,ErrorCode:()=>pm,ExpirationCriterion:()=>mm,FallbackAction:()=>ym,ForbiddenException:()=>Yl,GetChannelMembershipPreferencesCommand:()=>hl,GetChannelMembershipPreferencesResponseFilterSensitiveLog:()=>Nf,GetChannelMessageCommand:()=>Sd,GetChannelMessageResponseFilterSensitiveLog:()=>Ff,GetChannelMessageStatusCommand:()=>pl,GetMessagingSessionEndpointCommand:()=>za,GetMessagingStreamingConfigurationsCommand:()=>vd,IdentityFilterSensitiveLog:()=>jo,InvocationType:()=>vm,ListChannelBansCommand:()=>ml,ListChannelBansRequestFilterSensitiveLog:()=>xf,ListChannelBansResponseFilterSensitiveLog:()=>Bf,ListChannelFlowsCommand:()=>gl,ListChannelFlowsRequestFilterSensitiveLog:()=>Uf,ListChannelFlowsResponseFilterSensitiveLog:()=>Vf,ListChannelMembershipsCommand:()=>Sl,ListChannelMembershipsForAppInstanceUserCommand:()=>Qo,ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:()=>zf,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:()=>Gf,ListChannelMembershipsRequestFilterSensitiveLog:()=>Hf,ListChannelMembershipsResponseFilterSensitiveLog:()=>Wf,ListChannelMessagesCommand:()=>Ga,ListChannelMessagesRequestFilterSensitiveLog:()=>jf,ListChannelMessagesResponseFilterSensitiveLog:()=>$f,ListChannelModeratorsCommand:()=>vl,ListChannelModeratorsRequestFilterSensitiveLog:()=>Kf,ListChannelModeratorsResponseFilterSensitiveLog:()=>Jf,ListChannelsAssociatedWithChannelFlowCommand:()=>yl,ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:()=>Qf,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:()=>Zf,ListChannelsCommand:()=>va,ListChannelsModeratedByAppInstanceUserCommand:()=>ja,ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:()=>qf,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>eh,ListChannelsRequestFilterSensitiveLog:()=>Yf,ListChannelsResponseFilterSensitiveLog:()=>Xf,ListSubChannelsCommand:()=>Ys,ListSubChannelsRequestFilterSensitiveLog:()=>th,ListSubChannelsResponseFilterSensitiveLog:()=>nh,ListTagsForResourceCommand:()=>wa,ListTagsForResourceResponseFilterSensitiveLog:()=>ih,MessageAttributeValueFilterSensitiveLog:()=>id,MessagingDataType:()=>Tm,NotFoundException:()=>Xl,ProcessorFilterSensitiveLog:()=>nd,PushNotificationConfigurationFilterSensitiveLog:()=>Gc,PushNotificationPreferencesFilterSensitiveLog:()=>Sf,PushNotificationType:()=>_m,PutChannelExpirationSettingsCommand:()=>la,PutChannelMembershipPreferencesCommand:()=>yd,PutChannelMembershipPreferencesRequestFilterSensitiveLog:()=>rh,PutChannelMembershipPreferencesResponseFilterSensitiveLog:()=>oh,PutMessagingStreamingConfigurationsCommand:()=>lc,RedactChannelMessageCommand:()=>_d,ResourceLimitExceededException:()=>td,SearchChannelsCommand:()=>_l,SearchChannelsRequestFilterSensitiveLog:()=>sh,SearchChannelsResponseFilterSensitiveLog:()=>ah,SearchFieldKey:()=>wm,SearchFieldOperator:()=>Am,SendChannelMessageCommand:()=>Ed,SendChannelMessageRequestFilterSensitiveLog:()=>lh,ServiceFailureException:()=>Ql,ServiceUnavailableException:()=>Zl,SortOrder:()=>Im,TagFilterSensitiveLog:()=>od,TagResourceCommand:()=>El,TagResourceRequestFilterSensitiveLog:()=>dh,ThrottledClientException:()=>ql,UnauthorizedClientException:()=>ed,UntagResourceCommand:()=>Aa,UntagResourceRequestFilterSensitiveLog:()=>ch,UpdateChannelCommand:()=>bd,UpdateChannelFlowCommand:()=>Cd,UpdateChannelFlowRequestFilterSensitiveLog:()=>fh,UpdateChannelMessageCommand:()=>Td,UpdateChannelMessageRequestFilterSensitiveLog:()=>hh,UpdateChannelReadMarkerCommand:()=>Id,UpdateChannelRequestFilterSensitiveLog:()=>uh,__Client:()=>wn,paginateListChannelBans:()=>V,paginateListChannelFlows:()=>Q,paginateListChannelMemberships:()=>be,paginateListChannelMembershipsForAppInstanceUser:()=>ge,paginateListChannelMessages:()=>Se,paginateListChannelModerators:()=>Fe,paginateListChannels:()=>ft,paginateListChannelsAssociatedWithChannelFlow:()=>Qe,paginateListChannelsModeratedByAppInstanceUser:()=>Ke,paginateListSubChannels:()=>kt,paginateSearchChannels:()=>Vt});const u=r(y=>{let C=y.httpHandler;return{setHttpHandler(A){C=A},httpHandler(){return C},updateHttpClientConfig(A,M){C.updateHttpClientConfig(A,M)},httpHandlerConfigs(){return C.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),h=r(y=>({httpHandler:y.httpHandler()}),"resolveHttpHandlerRuntimeConfig");var p;(function(y){y.HEADER="header",y.QUERY="query"})(p||(p={}));var m;(function(y){y.HEADER="header",y.QUERY="query"})(m||(m={}));var a;(function(y){y.HTTP="http",y.HTTPS="https"})(a||(a={}));var s;(function(y){y.MD5="md5",y.CRC32="crc32",y.CRC32C="crc32c",y.SHA1="sha1",y.SHA256="sha256"})(s||(s={}));const i=r(y=>{const C=[];return y.sha256!==void 0&&C.push({algorithmId:()=>s.SHA256,checksumConstructor:()=>y.sha256}),y.md5!=null&&C.push({algorithmId:()=>s.MD5,checksumConstructor:()=>y.md5}),{_checksumAlgorithms:C,addChecksumAlgorithm(A){this._checksumAlgorithms.push(A)},checksumAlgorithms(){return this._checksumAlgorithms}}},"checksum_getChecksumConfiguration"),e=r(y=>{const C={};return y.checksumAlgorithms().forEach(A=>{C[A.algorithmId()]=A.checksumConstructor()}),C},"checksum_resolveChecksumRuntimeConfig"),t=r(y=>({...getChecksumConfiguration(y)}),"getDefaultClientConfiguration"),n=r(y=>({...resolveChecksumRuntimeConfig(y)}),"resolveDefaultRuntimeConfig");var o;(function(y){y[y.HEADER=0]="HEADER",y[y.TRAILER=1]="TRAILER"})(o||(o={}));const f="__smithy_context";var g;(function(y){y.PROFILE="profile",y.SSO_SESSION="sso-session",y.SERVICES="services"})(g||(g={}));var S;(function(y){y.HTTP_0_9="http/0.9",y.HTTP_1_0="http/1.0",y.TDS_8_0="tds/8.0"})(S||(S={}));class c{constructor({name:C,kind:A=FieldPosition.HEADER,values:M=[]}){this.name=C,this.kind=A,this.values=M}add(C){this.values.push(C)}set(C){this.values=C}remove(C){this.values=this.values.filter(A=>A!==C)}toString(){return this.values.map(C=>C.includes(",")||C.includes(" ")?`"${C}"`:C).join(", ")}get(){return this.values}}r(c,"Field");class v{constructor(C){this.method=C.method||"GET",this.hostname=C.hostname||"localhost",this.port=C.port,this.query=C.query||{},this.headers=C.headers||{},this.body=C.body,this.protocol=C.protocol?C.protocol.slice(-1)!==":"?`${C.protocol}:`:C.protocol:"https:",this.path=C.path?C.path.charAt(0)!=="/"?`/${C.path}`:C.path:"/",this.username=C.username,this.password=C.password,this.fragment=C.fragment}static clone(C){const A=new v({...C,headers:{...C.headers}});return A.query&&(A.query=_(A.query)),A}static isInstance(C){if(!C)return!1;const A=C;return"method"in A&&"protocol"in A&&"hostname"in A&&"path"in A&&typeof A.query=="object"&&typeof A.headers=="object"}clone(){return v.clone(this)}}r(v,"httpRequest_HttpRequest");function _(y){return Object.keys(y).reduce((C,A)=>{const M=y[A];return{...C,[A]:Array.isArray(M)?[...M]:M}},{})}r(_,"cloneQuery");class E{constructor(C){this.statusCode=C.statusCode,this.reason=C.reason,this.headers=C.headers||{},this.body=C.body}static isInstance(C){if(!C)return!1;const A=C;return typeof A.statusCode=="number"&&typeof A.headers=="object"}}r(E,"HttpResponse");function b(y){return y}r(b,"resolveHostHeaderConfig");const T=r(y=>C=>async A=>{if(!v.isInstance(A.request))return C(A);const{request:M}=A,{handlerProtocol:W=""}=y.requestHandler.metadata||{};if(W.indexOf("h2")>=0&&!M.headers[":authority"])delete M.headers.host,M.headers[":authority"]=M.hostname+(M.port?":"+M.port:"");else if(!M.headers.host){let Z=M.hostname;M.port!=null&&(Z+=`:${M.port}`),M.headers.host=Z}return C(A)},"hostHeaderMiddleware"),I={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},O=r(y=>({applyToStack:C=>{C.add(T(y),I)}}),"getHostHeaderPlugin"),w=r(()=>(y,C)=>async A=>{try{var M;const Z=await y(A),{clientName:ye,commandName:Ie,logger:We,dynamoDbDocumentClientOptions:Le={}}=C,{overrideInputFilterSensitiveLog:St,overrideOutputFilterSensitiveLog:Et}=Le,xt=St??C.inputFilterSensitiveLog,Gt=Et??C.outputFilterSensitiveLog,{$metadata:Dn,...ui}=Z.output;return We==null||(M=We.info)===null||M===void 0||M.call(We,{clientName:ye,commandName:Ie,input:xt(A.input),output:Gt(ui),metadata:Dn}),Z}catch(Z){var W;const{clientName:ye,commandName:Ie,logger:We,dynamoDbDocumentClientOptions:Le={}}=C,{overrideInputFilterSensitiveLog:St}=Le,Et=St??C.inputFilterSensitiveLog;throw We==null||(W=We.error)===null||W===void 0||W.call(We,{clientName:ye,commandName:Ie,input:Et(A.input),error:Z,metadata:Z.$metadata}),Z}},"loggerMiddleware"),D={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},R=r(y=>({applyToStack:C=>{C.add(w(),D)}}),"getLoggerPlugin"),L="X-Amzn-Trace-Id",H="AWS_LAMBDA_FUNCTION_NAME",K="_X_AMZN_TRACE_ID",ee=r(y=>C=>async A=>{const{request:M}=A;if(!v.isInstance(M)||y.runtime!=="node"||M.headers.hasOwnProperty(L))return C(A);const W={NODE_ENV:"production"}[H],Z={NODE_ENV:"production"}[K],ye=r(Ie=>typeof Ie=="string"&&Ie.length>0,"nonEmptyString");return ye(W)&&ye(Z)&&(M.headers[L]=Z),C({...A,request:M})},"recursionDetectionMiddleware"),q={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ae=r(y=>({applyToStack:C=>{C.add(ee(y),q)}}),"getRecursionDetectionPlugin");function ce(y){return{...y,customUserAgent:typeof y.customUserAgent=="string"?[[y.customUserAgent]]:y.customUserAgent}}r(ce,"resolveUserAgentConfig");class Te{constructor({size:C,params:A}){this.data=new Map,this.parameters=[],this.capacity=C??50,A&&(this.parameters=A)}get(C,A){const M=this.hash(C);if(M===!1)return A();if(!this.data.has(M)){if(this.data.size>this.capacity+10){const W=this.data.keys();let Z=0;for(;;){const{value:ye,done:Ie}=W.next();if(this.data.delete(ye),Ie||++Z>10)break}}this.data.set(M,A())}return this.data.get(M)}size(){return this.data.size}hash(C){let A="";const{parameters:M}=this;if(M.length===0)return!1;for(const W of M){const Z=String(C[W]??"");if(Z.includes("|;"))return!1;A+=Z+"|;"}return A}}r(Te,"EndpointCache");const ke=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),tt=r(y=>ke.test(y)||y.startsWith("[")&&y.endsWith("]"),"isIpAddress"),At=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Be=r((y,C=!1)=>{if(!C)return At.test(y);const A=y.split(".");for(const M of A)if(!Be(M))return!1;return!0},"isValidHostLabel"),$e={},Ze="endpoints";function Je(y){return typeof y!="object"||y==null?y:"ref"in y?`$${Je(y.ref)}`:"fn"in y?`${y.fn}(${(y.argv||[]).map(Je).join(", ")})`:JSON.stringify(y,null,2)}r(Je,"toDebugString");class dt extends Error{constructor(C){super(C),this.name="EndpointError"}}r(dt,"EndpointError");const Ot=r((y,C)=>y===C,"booleanEquals"),Nt=r(y=>{const C=y.split("."),A=[];for(const M of C){const W=M.indexOf("[");if(W!==-1){if(M.indexOf("]")!==M.length-1)throw new dt(`Path: '${y}' does not end with ']'`);const Z=M.slice(W+1,-1);if(Number.isNaN(parseInt(Z)))throw new dt(`Invalid array index: '${Z}' in path: '${y}'`);W!==0&&A.push(M.slice(0,W)),A.push(Z)}else A.push(M)}return A},"getAttrPathList"),Ve=r((y,C)=>Nt(C).reduce((A,M)=>{if(typeof A!="object")throw new dt(`Index '${M}' in '${C}' not found in '${JSON.stringify(y)}'`);return Array.isArray(A)?A[parseInt(M)]:A[M]},y),"getAttr"),He=r(y=>y!=null,"isSet"),ct=r(y=>!y,"not"),yt={[a.HTTP]:80,[a.HTTPS]:443},bn={booleanEquals:Ot,getAttr:Ve,isSet:He,isValidHostLabel:Be,not:ct,parseURL:r(y=>{const C=(()=>{try{if(y instanceof URL)return y;if(typeof y=="object"&&"hostname"in y){const{hostname:xt,port:Gt,protocol:Dn="",path:ui="",query:Ln={}}=y,Bi=new URL(`${Dn}//${xt}${Gt?`:${Gt}`:""}${ui}`);return Bi.search=Object.entries(Ln).map(([ir,ko])=>`${ir}=${ko}`).join("&"),Bi}return new URL(y)}catch{return null}})();if(!C)return console.error(`Unable to parse ${JSON.stringify(y)} as a whatwg URL.`),null;const A=C.href,{host:M,hostname:W,pathname:Z,protocol:ye,search:Ie}=C;if(Ie)return null;const We=ye.slice(0,-1);if(!Object.values(a).includes(We))return null;const Le=tt(W),St=A.includes(`${M}:${yt[We]}`)||typeof y=="string"&&y.includes(`${M}:${yt[We]}`),Et=`${M}${St?`:${yt[We]}`:""}`;return{scheme:We,authority:Et,path:Z,normalizedPath:Z.endsWith("/")?Z:`${Z}/`,isIp:Le}},"parseURL"),stringEquals:r((y,C)=>y===C,"stringEquals"),substring:r((y,C,A,M)=>C>=A||y.length<A?null:M?y.substring(y.length-A,y.length-C):y.substring(C,A),"substring"),uriEncode:r(y=>encodeURIComponent(y).replace(/[!*'()]/g,C=>`%${C.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode")},Rn=r((y,C)=>{const A=[],M={...C.endpointParams,...C.referenceRecord};let W=0;for(;W<y.length;){const Z=y.indexOf("{",W);if(Z===-1){A.push(y.slice(W));break}A.push(y.slice(W,Z));const ye=y.indexOf("}",Z);if(ye===-1){A.push(y.slice(Z));break}y[Z+1]==="{"&&y[ye+1]==="}"&&(A.push(y.slice(Z+1,ye)),W=ye+2);const Ie=y.substring(Z+1,ye);if(Ie.includes("#")){const[We,Le]=Ie.split("#");A.push(Ve(M[We],Le))}else A.push(M[Ie]);W=ye+1}return A.join("")},"evaluateTemplate"),Zt=r(({ref:y},C)=>({...C.endpointParams,...C.referenceRecord})[y],"getReferenceValue"),Mn=r((y,C,A)=>{if(typeof y=="string")return Rn(y,A);if(y.fn)return Wi(y,A);if(y.ref)return Zt(y,A);throw new dt(`'${C}': ${String(y)} is not a string, function or reference.`)},"evaluateExpression"),Wi=r(({fn:y,argv:C},A)=>{const M=C.map(Z=>["boolean","number"].includes(typeof Z)?Z:Mn(Z,"arg",A)),W=y.split(".");return W[0]in $e&&W[1]!=null?$e[W[0]][W[1]](...M):bn[y](...M)},"callFunction"),Jn=r(({assign:y,...C},A)=>{var W,Z;if(y&&y in A.referenceRecord)throw new dt(`'${y}' is already defined in Reference Record.`);const M=Wi(C,A);return(Z=(W=A.logger)==null?void 0:W.debug)==null||Z.call(W,`${Ze} evaluateCondition: ${Je(C)} = ${Je(M)}`),{result:M===""?!0:!!M,...y!=null&&{toAssign:{name:y,value:M}}}},"evaluateCondition"),zn=r((y=[],C)=>{var M,W;const A={};for(const Z of y){const{result:ye,toAssign:Ie}=Jn(Z,{...C,referenceRecord:{...C.referenceRecord,...A}});if(!ye)return{result:ye};Ie&&(A[Ie.name]=Ie.value,(W=(M=C.logger)==null?void 0:M.debug)==null||W.call(M,`${Ze} assign: ${Ie.name} := ${Je(Ie.value)}`))}return{result:!0,referenceRecord:A}},"evaluateConditions"),En=r((y,C)=>Object.entries(y).reduce((A,[M,W])=>({...A,[M]:W.map(Z=>{const ye=Mn(Z,"Header value entry",C);if(typeof ye!="string")throw new dt(`Header '${M}' value '${ye}' is not a string`);return ye})}),{}),"getEndpointHeaders"),sn=r((y,C)=>{if(Array.isArray(y))return y.map(A=>sn(A,C));switch(typeof y){case"string":return Rn(y,C);case"object":if(y===null)throw new dt(`Unexpected endpoint property: ${y}`);return oi(y,C);case"boolean":return y;default:throw new dt(`Unexpected endpoint property type: ${typeof y}`)}},"getEndpointProperty"),oi=r((y,C)=>Object.entries(y).reduce((A,[M,W])=>({...A,[M]:sn(W,C)}),{}),"getEndpointProperties"),rn=r((y,C)=>{const A=Mn(y,"Endpoint URL",C);if(typeof A=="string")try{return new URL(A)}catch(M){throw console.error(`Failed to construct URL with ${A}`,M),M}throw new dt(`Endpoint URL must be a string, got ${typeof A}`)},"getEndpointUrl"),cn=r((y,C)=>{var St,Et;const{conditions:A,endpoint:M}=y,{result:W,referenceRecord:Z}=zn(A,C);if(!W)return;const ye={...C,referenceRecord:{...C.referenceRecord,...Z}},{url:Ie,properties:We,headers:Le}=M;return(Et=(St=C.logger)==null?void 0:St.debug)==null||Et.call(St,`${Ze} Resolving endpoint from template: ${Je(M)}`),{...Le!=null&&{headers:En(Le,ye)},...We!=null&&{properties:oi(We,ye)},url:rn(Ie,ye)}},"evaluateEndpointRule"),Wt=r((y,C)=>{const{conditions:A,error:M}=y,{result:W,referenceRecord:Z}=zn(A,C);if(W)throw new dt(Mn(M,"Error",{...C,referenceRecord:{...C.referenceRecord,...Z}}))},"evaluateErrorRule"),J=r((y,C)=>{const{conditions:A,rules:M}=y,{result:W,referenceRecord:Z}=zn(A,C);if(W)return Xe(M,{...C,referenceRecord:{...C.referenceRecord,...Z}})},"evaluateTreeRule"),Xe=r((y,C)=>{for(const A of y)if(A.type==="endpoint"){const M=cn(A,C);if(M)return M}else if(A.type==="error")Wt(A,C);else if(A.type==="tree"){const M=J(A,C);if(M)return M}else throw new dt(`Unknown endpoint rule: ${A}`);throw new dt("Rules evaluation failed")},"evaluateRules"),nt=r((y,C)=>{var Le,St,Et,xt;const{endpointParams:A,logger:M}=C,{parameters:W,rules:Z}=y;(St=(Le=C.logger)==null?void 0:Le.debug)==null||St.call(Le,`${Ze} Initial EndpointParams: ${Je(A)}`);const ye=Object.entries(W).filter(([,Gt])=>Gt.default!=null).map(([Gt,Dn])=>[Gt,Dn.default]);if(ye.length>0)for(const[Gt,Dn]of ye)A[Gt]=A[Gt]??Dn;const Ie=Object.entries(W).filter(([,Gt])=>Gt.required).map(([Gt])=>Gt);for(const Gt of Ie)if(A[Gt]==null)throw new dt(`Missing required parameter: '${Gt}'`);const We=Xe(Z,{endpointParams:A,logger:M,referenceRecord:{}});return(xt=(Et=C.logger)==null?void 0:Et.debug)==null||xt.call(Et,`${Ze} Resolved endpoint: ${Je(We)}`),We},"resolveEndpoint"),st=r(function(y){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const A of y.split("."))if(!st(A))return!1;return!0}return!(!Be(y)||y.length<3||y.length>63||y!==y.toLowerCase()||tt(y))},"isVirtualHostableS3Bucket"),pt=":",It="/",ve=r(y=>{const C=y.split(pt);if(C.length<6)return null;const[A,M,W,Z,ye,...Ie]=C;if(A!=="arn"||M===""||W===""||Ie.join(pt)==="")return null;const We=Ie.map(Le=>Le.split(It)).flat();return{partition:M,service:W,region:Z,accountId:ye,resourceId:We}},"parseArn");var et=d(1209174152),G=d.n(et);let ne=G(),Me="";const Re=r(y=>{const{partitions:C}=ne;for(const M of C){const{regions:W,outputs:Z}=M;for(const[ye,Ie]of Object.entries(W))if(ye===y)return{...Z,...Ie}}for(const M of C){const{regionRegex:W,outputs:Z}=M;if(new RegExp(W).test(y))return{...Z}}const A=C.find(M=>M.id==="aws");if(!A)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...A.outputs}},"partition"),Ft=r(function(y){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";ne=y,Me=C},"setPartitionInfo"),ot=r(()=>{Ft(partitionsInfo,"")},"useDefaultPartitionInfo"),Tt=r(()=>Me,"getUserAgentPrefix"),we={isVirtualHostableS3Bucket:st,parseArn:ve,partition:Re};$e.aws=we;const Ue="user-agent",F="x-amz-user-agent",Oe=" ",se="/",ue=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,X=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,lt="-",Ae=r(y=>(C,A)=>async M=>{var W,Z;const{request:ye}=M;if(!v.isInstance(ye))return C(M);const{headers:Ie}=ye,We=(A==null||(W=A.userAgent)===null||W===void 0?void 0:W.map(Ye))||[],Le=(await y.defaultUserAgentProvider()).map(Ye),St=(y==null||(Z=y.customUserAgent)===null||Z===void 0?void 0:Z.map(Ye))||[],Et=Tt(),xt=(Et?[Et]:[]).concat([...Le,...We,...St]).join(Oe),Gt=[...Le.filter(Dn=>Dn.startsWith("aws-sdk-")),...St].join(Oe);return y.runtime!=="browser"?(Gt&&(Ie[F]=Ie[F]?`${Ie[Ue]} ${Gt}`:Gt),Ie[Ue]=xt):Ie[F]=xt,C({...M,request:ye})},"userAgentMiddleware"),Ye=r(y=>{var C;const A=y[0].split(se).map(Ie=>Ie.replace(ue,lt)).join(se),M=(C=y[1])===null||C===void 0?void 0:C.replace(X,lt),W=A.indexOf(se),Z=A.substring(0,W);let ye=A.substring(W+1);return Z==="api"&&(ye=ye.toLowerCase()),[Z,ye,M].filter(Ie=>Ie&&Ie.length>0).reduce((Ie,We,Le)=>{switch(Le){case 0:return We;case 1:return`${Ie}/${We}`;default:return`${Ie}#${We}`}},"")},"escapeUserAgent"),Ht={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Mt=r(y=>({applyToStack:C=>{C.add(Ae(y),Ht)}}),"getUserAgentPlugin"),Qn=r((y,C,A)=>{if(C in y){if(y[C]==="true")return!0;if(y[C]==="false")return!1;throw new Error(`Cannot load ${A} "${C}". Expected "true" or "false", got ${y[C]}.`)}},"booleanSelector");var $n;(function(y){y.ENV="env",y.CONFIG="shared config entry"})($n||($n={}));const Vn="AWS_USE_DUALSTACK_ENDPOINT",kn="use_dualstack_endpoint",tn=!1,Gn={environmentVariableSelector:y=>Qn(y,Vn,$n.ENV),configFileSelector:y=>Qn(y,kn,$n.CONFIG),default:!1},Si="AWS_USE_FIPS_ENDPOINT",nr="use_fips_endpoint",ln=!1,jt={environmentVariableSelector:y=>Qn(y,Si,$n.ENV),configFileSelector:y=>Qn(y,nr,$n.CONFIG),default:!1},Fn=r(y=>y[f]||(y[f]={}),"getSmithyContext"),Hn=r(y=>{if(typeof y=="function")return y;const C=Promise.resolve(y);return()=>C},"normalizeProvider_normalizeProvider"),wi=r(y=>{const{endpoint:C,urlParser:A}=y;return{...y,tls:y.tls??!0,endpoint:normalizeProvider(typeof C=="string"?A(C):C),isCustomEndpoint:!0,useDualstackEndpoint:normalizeProvider(y.useDualstackEndpoint??!1)}},"resolveCustomEndpointsConfig"),Pi=r(y=>{const C=normalizeProvider(y.useDualstackEndpoint??!1),{endpoint:A,useFipsEndpoint:M,urlParser:W}=y;return{...y,tls:y.tls??!0,endpoint:A?normalizeProvider(typeof A=="string"?W(A):A):()=>getEndpointFromRegion({...y,useDualstackEndpoint:C,useFipsEndpoint:M}),isCustomEndpoint:!!A,useDualstackEndpoint:C}},"resolveEndpointsConfig"),ni="AWS_REGION",Kn="region",ji={environmentVariableSelector:y=>y[ni],configFileSelector:y=>y[Kn],default:()=>{throw new Error("Region is missing")}},$i={preferredFile:"credentials"},sr=r(y=>typeof y=="string"&&(y.startsWith("fips-")||y.endsWith("-fips")),"isFipsRegion"),Ai=r(y=>sr(y)?["fips-aws-global","aws-fips"].includes(y)?"us-east-1":y.replace(/fips-(dkr-|prod-)?|-fips/,""):y,"getRealRegion"),Lr=r(y=>{const{region:C,useFipsEndpoint:A}=y;if(!C)throw new Error("Region is missing");return{...y,region:async()=>{if(typeof C=="string")return Ai(C);const M=await C();return Ai(M)},useFipsEndpoint:async()=>{const M=typeof C=="string"?C:await C();return sr(M)?!0:typeof A!="function"?Promise.resolve(!!A):A()}}},"resolveRegionConfig");function Vi(y){const C=new Map;for(const A of y)C.set(A.schemeId,A);return C}r(Vi,"convertHttpAuthSchemesToMap");const Nr=r((y,C)=>(A,M)=>async W=>{var Le;const Z=y.httpAuthSchemeProvider(await C.httpAuthSchemeParametersProvider(y,M,W.input)),ye=Vi(y.httpAuthSchemes),Ie=Fn(M),We=[];for(const St of Z){const Et=ye.get(St.schemeId);if(!Et){We.push(`HttpAuthScheme \`${St.schemeId}\` was not enabled for this service.`);continue}const xt=Et.identityProvider(await C.identityProviderConfigProvider(y));if(!xt){We.push(`HttpAuthScheme \`${St.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:Gt={},signingProperties:Dn={}}=((Le=St.propertiesExtractor)==null?void 0:Le.call(St,y,M))||{};St.identityProperties=Object.assign(St.identityProperties||{},Gt),St.signingProperties=Object.assign(St.signingProperties||{},Dn),Ie.selectedHttpAuthScheme={httpAuthOption:St,identity:await xt(St.identityProperties),signer:Et.signer};break}if(!Ie.selectedHttpAuthScheme)throw new Error(We.join(`
`));return A(W)},"httpAuthSchemeMiddleware_httpAuthSchemeMiddleware"),_i=r(async y=>{const C=(y==null?void 0:y.Bucket)||"";if(typeof y.Bucket=="string"&&(y.Bucket=C.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),An(C)){if(y.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Qt(C)||C.indexOf(".")!==-1&&!String(y.Endpoint).startsWith("http:")||C.toLowerCase()!==C||C.length<3)&&(y.ForcePathStyle=!0);return y.DisableMultiRegionAccessPoints&&(y.disableMultiRegionAccessPoints=!0,y.DisableMRAP=!0),y},"resolveParamsForS3"),Ci=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,N=/(\d+\.){3}\d+/,he=/\.\./,je=/\./,Rt=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Qt=r(y=>Ci.test(y)&&!N.test(y)&&!he.test(y),"isDnsCompatibleBucketName"),An=r(y=>{const[C,A,M,,,W]=y.split(":"),Z=C==="arn"&&y.split(":").length>=6,ye=Boolean(Z&&A&&M&&W);if(Z&&!ye)throw new Error(`Invalid ARN: ${y} was an invalid ARN.`);return ye},"isArnBucketName"),qn=r((y,C,A)=>{const M=r(async()=>{const W=A[y]??A[C];return typeof W=="function"?W():W},"configProvider");return y==="credentialScope"||C==="CredentialScope"?async()=>{const W=typeof A.credentials=="function"?await A.credentials():A.credentials;return(W==null?void 0:W.credentialScope)??(W==null?void 0:W.CredentialScope)}:y==="accountId"||C==="AccountId"?async()=>{const W=typeof A.credentials=="function"?await A.credentials():A.credentials;return(W==null?void 0:W.accountId)??(W==null?void 0:W.AccountId)}:y==="endpoint"||C==="endpoint"?async()=>{const W=await M();if(W&&typeof W=="object"){if("url"in W)return W.url.href;if("hostname"in W){const{protocol:Z,hostname:ye,port:Ie,path:We}=W;return`${Z}//${ye}${Ie?":"+Ie:""}${We}`}}return W}:M},"createConfigValueProvider"),Pn=r(async y=>{},"getEndpointFromConfig");function xn(y){const C={};if(y=y.replace(/^\?/,""),y)for(const A of y.split("&")){let[M,W=null]=A.split("=");M=decodeURIComponent(M),W&&(W=decodeURIComponent(W)),M in C?Array.isArray(C[M])?C[M].push(W):C[M]=[C[M],W]:C[M]=W}return C}r(xn,"parseQueryString");const Xn=r(y=>{if(typeof y=="string")return Xn(new URL(y));const{hostname:C,pathname:A,port:M,protocol:W,search:Z}=y;let ye;return Z&&(ye=xn(Z)),{hostname:C,port:M?parseInt(M):void 0,protocol:W,path:A,query:ye}},"parseUrl"),li=r(y=>typeof y=="object"?"url"in y?Xn(y.url):y:Xn(y),"toEndpointV1"),Ri=r(async(y,C,A,M)=>{if(!A.endpoint){let ye;A.serviceConfiguredEndpoint?ye=await A.serviceConfiguredEndpoint():ye=await Pn(A.serviceId),ye&&(A.endpoint=()=>Promise.resolve(li(ye)))}const W=await zi(y,C,A);if(typeof A.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return A.endpointProvider(W,M)},"getEndpointFromInstructions"),zi=r(async(y,C,A)=>{var Z;const M={},W=((Z=C==null?void 0:C.getEndpointParameterInstructions)==null?void 0:Z.call(C))||{};for(const[ye,Ie]of Object.entries(W))switch(Ie.type){case"staticContextParams":M[ye]=Ie.value;break;case"contextParams":M[ye]=y[Ie.name];break;case"clientContextParams":case"builtInParams":M[ye]=await qn(Ie.name,ye,A)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(Ie))}return Object.keys(W).length===0&&Object.assign(M,A),String(A.serviceId).toLowerCase()==="s3"&&await _i(M),M},"resolveParams"),gr=r(({config:y,instructions:C})=>(A,M)=>async W=>{var Ie,We,Le;const Z=await Ri(W.input,{getEndpointParameterInstructions(){return C}},{...y},M);M.endpointV2=Z,M.authSchemes=(Ie=Z.properties)==null?void 0:Ie.authSchemes;const ye=(We=M.authSchemes)==null?void 0:We[0];if(ye){M.signing_region=ye.signingRegion,M.signing_service=ye.signingName;const St=Fn(M),Et=(Le=St==null?void 0:St.selectedHttpAuthScheme)==null?void 0:Le.httpAuthOption;Et&&(Et.signingProperties=Object.assign(Et.signingProperties||{},{signing_region:ye.signingRegion,signingRegion:ye.signingRegion,signing_service:ye.signingName,signingName:ye.signingName,signingRegionSet:ye.signingRegionSet},ye.properties))}return A({...W})},"endpointMiddleware"),Fr=r((y,C)=>A=>async M=>{const{response:W}=await A(M);try{const Z=await C(W,y);return{response:W,output:Z}}catch(Z){if(Object.defineProperty(Z,"$response",{value:W}),!("$metadata"in Z)){const ye="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";Z.message+=`
  `+ye,typeof Z.$responseBodyText<"u"&&Z.$response&&(Z.$response.body=Z.$responseBodyText)}throw Z}},"deserializerMiddleware"),ri=r((y,C)=>(A,M)=>async W=>{var Ie;const Z=(Ie=M.endpointV2)!=null&&Ie.url&&y.urlParser?async()=>y.urlParser(M.endpointV2.url):y.endpoint;if(!Z)throw new Error("No valid endpoint provider available.");const ye=await C(W.input,{...y,endpoint:Z});return A({...W,request:ye})},"serializerMiddleware"),Er={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Rr={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function ei(y,C,A){return{applyToStack:M=>{M.add(Fr(y,A),Er),M.add(ri(y,C),Rr)}}}r(ei,"getSerdePlugin");const hr={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Rr.name},si=r((y,C)=>({applyToStack:A=>{A.addRelativeTo(gr({config:y,instructions:C}),hr)}}),"getEndpointPlugin"),Eo=r(y=>{const C=y.tls??!0,{endpoint:A}=y,M=A!=null?async()=>li(await Hn(A)()):void 0,Z={...y,endpoint:M,tls:C,isCustomEndpoint:!!A,useDualstackEndpoint:Hn(y.useDualstackEndpoint??!1),useFipsEndpoint:Hn(y.useFipsEndpoint??!1)};let ye;return Z.serviceConfiguredEndpoint=async()=>(y.serviceId&&!ye&&(ye=Pn(y.serviceId)),ye),Z},"resolveEndpointConfig"),Jr={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:hr.name},fo=r((y,{httpAuthSchemeParametersProvider:C,identityProviderConfigProvider:A})=>({applyToStack:M=>{M.addRelativeTo(Nr(y,{httpAuthSchemeParametersProvider:C,identityProviderConfigProvider:A}),Jr)}}),"getHttpAuthSchemeEndpointRuleSetPlugin"),ho={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Rr.name},de=r((y,{httpAuthSchemeParametersProvider:C,identityProviderConfigProvider:A})=>({applyToStack:M=>{M.addRelativeTo(httpAuthSchemeMiddleware(y,{httpAuthSchemeParametersProvider:C,identityProviderConfigProvider:A}),ho)}}),"getHttpAuthSchemePlugin"),_e=r(y=>C=>{throw C},"defaultErrorHandler"),Pe=r((y,C)=>{},"defaultSuccessHandler"),rt=r(y=>(C,A)=>async M=>{if(!v.isInstance(M.request))return C(M);const Z=Fn(A).selectedHttpAuthScheme;if(!Z)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:ye={}},identity:Ie,signer:We}=Z,Le=await C({...M,request:await We.sign(M.request,Ie,ye)}).catch((We.errorHandler||_e)(ye));return(We.successHandler||Pe)(Le.response,ye),Le},"httpSigningMiddleware");var _t;(function(y){y.STANDARD="standard",y.ADAPTIVE="adaptive"})(_t||(_t={}));const Dt=3,pn=_t.STANDARD,In=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Nn=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Tn=["TimeoutError","RequestTimeout","RequestTimeoutException"],di=[500,502,503,504],an=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],ki=r(y=>y.$retryable!==void 0,"isRetryableByTrait"),Zn=r(y=>In.includes(y.name),"isClockSkewError"),lr=r(y=>{var C;return(C=y.$metadata)==null?void 0:C.clockSkewCorrected},"isClockSkewCorrectedError"),br=r(y=>{var C,A;return((C=y.$metadata)==null?void 0:C.httpStatusCode)===429||Nn.includes(y.name)||((A=y.$retryable)==null?void 0:A.throttling)==!0},"isThrottlingError"),Cr=r(y=>{var C;return lr(y)||Tn.includes(y.name)||an.includes((y==null?void 0:y.code)||"")||di.includes(((C=y.$metadata)==null?void 0:C.httpStatusCode)||0)},"isTransientError"),pi=r(y=>{var C;if(((C=y.$metadata)==null?void 0:C.httpStatusCode)!==void 0){const A=y.$metadata.httpStatusCode;return 500<=A&&A<=599&&!Cr(y)}return!1},"isServerError");class vi{constructor(C){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(C==null?void 0:C.beta)??.7,this.minCapacity=(C==null?void 0:C.minCapacity)??1,this.minFillRate=(C==null?void 0:C.minFillRate)??.5,this.scaleConstant=(C==null?void 0:C.scaleConstant)??.4,this.smooth=(C==null?void 0:C.smooth)??.8;const A=this.getCurrentTimeInSeconds();this.lastThrottleTime=A,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(C){if(this.enabled){if(this.refillTokenBucket(),C>this.currentCapacity){const A=(C-this.currentCapacity)/this.fillRate*1e3;await new Promise(M=>setTimeout(M,A))}this.currentCapacity=this.currentCapacity-C}}refillTokenBucket(){const C=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=C;return}const A=(C-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+A),this.lastTimestamp=C}updateClientSendingRate(C){let A;if(this.updateMeasuredRate(),br(C)){const W=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=W,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),A=this.cubicThrottle(W),this.enableTokenBucket()}else this.calculateTimeWindow(),A=this.cubicSuccess(this.getCurrentTimeInSeconds());const M=Math.min(A,2*this.measuredTxRate);this.updateTokenBucketRate(M)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(C){return this.getPrecise(C*this.beta)}cubicSuccess(C){return this.getPrecise(this.scaleConstant*Math.pow(C-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(C){this.refillTokenBucket(),this.fillRate=Math.max(C,this.minFillRate),this.maxCapacity=Math.max(C,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const C=this.getCurrentTimeInSeconds(),A=Math.floor(C*2)/2;if(this.requestCount++,A>this.lastTxRateBucket){const M=this.requestCount/(A-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(M*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=A}}getPrecise(C){return parseFloat(C.toFixed(8))}}r(vi,"DefaultRateLimiter");const Di=100,Yi=20*1e3,Or=500,Zr=500,Mi=5,ro=10,pr=1,qr="amz-sdk-invocation-id",es="amz-sdk-request",is=r(()=>{let y=Di;return{computeNextBackoffDelay:r(M=>Math.floor(Math.min(Yi,Math.random()*2**M*y)),"computeNextBackoffDelay"),setDelayBase:r(M=>{y=M},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),Jo=r(({retryDelay:y,retryCount:C,retryCost:A})=>({getRetryCount:r(()=>C,"getRetryCount"),getRetryDelay:r(()=>Math.min(Yi,y),"getRetryDelay"),getRetryCost:r(()=>A,"getRetryCost")}),"createDefaultRetryToken");class Yo{constructor(C){this.maxAttempts=C,this.mode=_t.STANDARD,this.capacity=Zr,this.retryBackoffStrategy=is(),this.maxAttemptsProvider=typeof C=="function"?C:async()=>C}async acquireInitialRetryToken(C){return Jo({retryDelay:Di,retryCount:0})}async refreshRetryTokenForRetry(C,A){const M=await this.getMaxAttempts();if(this.shouldRetry(C,A,M)){const W=A.errorType;this.retryBackoffStrategy.setDelayBase(W==="THROTTLING"?Or:Di);const Z=this.retryBackoffStrategy.computeNextBackoffDelay(C.getRetryCount()),ye=A.retryAfterHint?Math.max(A.retryAfterHint.getTime()-Date.now()||0,Z):Z,Ie=this.getCapacityCost(W);return this.capacity-=Ie,Jo({retryDelay:ye,retryCount:C.getRetryCount()+1,retryCost:Ie})}throw new Error("No retry token available")}recordSuccess(C){this.capacity=Math.max(Zr,this.capacity+(C.getRetryCost()??pr))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Dt}`),Dt}}shouldRetry(C,A,M){return C.getRetryCount()+1<M&&this.capacity>=this.getCapacityCost(A.errorType)&&this.isRetryableError(A.errorType)}getCapacityCost(C){return C==="TRANSIENT"?ro:Mi}isRetryableError(C){return C==="THROTTLING"||C==="TRANSIENT"}}r(Yo,"StandardRetryStrategy");class ts{constructor(C,A){this.maxAttemptsProvider=C,this.mode=_t.ADAPTIVE;const{rateLimiter:M}=A??{};this.rateLimiter=M??new vi,this.standardRetryStrategy=new Yo(C)}async acquireInitialRetryToken(C){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(C)}async refreshRetryTokenForRetry(C,A){return this.rateLimiter.updateClientSendingRate(A),this.standardRetryStrategy.refreshRetryTokenForRetry(C,A)}recordSuccess(C){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(C)}}r(ts,"AdaptiveRetryStrategy");class Vo extends Yo{constructor(C,A=Di){super(typeof C=="function"?C:async()=>C),typeof A=="number"?this.computeNextBackoffDelay=()=>A:this.computeNextBackoffDelay=A}async refreshRetryTokenForRetry(C,A){const M=await super.refreshRetryTokenForRetry(C,A);return M.getRetryDelay=()=>this.computeNextBackoffDelay(M.getRetryCount()),M}}r(Vo,"ConfiguredRetryStrategy");const bo={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Io;const so=new Uint8Array(16);function ao(){if(!Io&&(Io=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Io))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Io(so)}r(ao,"rng");const Gr=[];for(let y=0;y<256;++y)Gr.push((y+256).toString(16).slice(1));function Co(y,C=0){return Gr[y[C+0]]+Gr[y[C+1]]+Gr[y[C+2]]+Gr[y[C+3]]+"-"+Gr[y[C+4]]+Gr[y[C+5]]+"-"+Gr[y[C+6]]+Gr[y[C+7]]+"-"+Gr[y[C+8]]+Gr[y[C+9]]+"-"+Gr[y[C+10]]+Gr[y[C+11]]+Gr[y[C+12]]+Gr[y[C+13]]+Gr[y[C+14]]+Gr[y[C+15]]}r(Co,"unsafeStringify");function Ts(y,C=0){const A=Co(y,C);if(!validate(A))throw TypeError("Stringified UUID is invalid");return A}r(Ts,"stringify");const Is=null;function po(y,C,A){if(bo.randomUUID&&!C&&!y)return bo.randomUUID();y=y||{};const M=y.random||(y.rng||ao)();if(M[6]=M[6]&15|64,M[8]=M[8]&63|128,C){A=A||0;for(let W=0;W<16;++W)C[A+W]=M[W];return C}return Co(M)}r(po,"v4");const Ho=po,Vr=r((y,C)=>{const A=y,M=(C==null?void 0:C.noRetryIncrement)??pr,W=(C==null?void 0:C.retryCost)??Mi,Z=(C==null?void 0:C.timeoutRetryCost)??ro;let ye=y;const Ie=r(Et=>Et.name==="TimeoutError"?Z:W,"getCapacityAmount"),We=r(Et=>Ie(Et)<=ye,"hasRetryTokens");return Object.freeze({hasRetryTokens:We,retrieveRetryTokens:r(Et=>{if(!We(Et))throw new Error("No retry token available");const xt=Ie(Et);return ye-=xt,xt},"retrieveRetryTokens"),releaseRetryTokens:r(Et=>{ye+=Et??M,ye=Math.min(ye,A)},"releaseRetryTokens")})},"getDefaultRetryQuota"),oo=r((y,C)=>Math.floor(Math.min(Yi,Math.random()*2**C*y)),"defaultDelayDecider"),Yr=r(y=>y?ki(y)||Zn(y)||br(y)||Cr(y):!1,"defaultRetryDecider"),mo=r(y=>y instanceof Error?y:y instanceof Object?Object.assign(new Error,y):typeof y=="string"?new Error(y):new Error(`AWS SDK error wrapper for ${y}`),"asSdkError");class lo{constructor(C,A){this.maxAttemptsProvider=C,this.mode=_t.STANDARD,this.retryDecider=(A==null?void 0:A.retryDecider)??Yr,this.delayDecider=(A==null?void 0:A.delayDecider)??oo,this.retryQuota=(A==null?void 0:A.retryQuota)??Vr(Zr)}shouldRetry(C,A,M){return A<M&&this.retryDecider(C)&&this.retryQuota.hasRetryTokens(C)}async getMaxAttempts(){let C;try{C=await this.maxAttemptsProvider()}catch{C=Dt}return C}async retry(C,A,M){let W,Z=0,ye=0;const Ie=await this.getMaxAttempts(),{request:We}=A;for(v.isInstance(We)&&(We.headers[qr]=Ho());;)try{v.isInstance(We)&&(We.headers[es]=`attempt=${Z+1}; max=${Ie}`),M!=null&&M.beforeRequest&&await M.beforeRequest();const{response:Le,output:St}=await C(A);return M!=null&&M.afterRequest&&M.afterRequest(Le),this.retryQuota.releaseRetryTokens(W),St.$metadata.attempts=Z+1,St.$metadata.totalRetryDelay=ye,{response:Le,output:St}}catch(Le){const St=mo(Le);if(Z++,this.shouldRetry(St,Z,Ie)){W=this.retryQuota.retrieveRetryTokens(St);const Et=this.delayDecider(br(St)?Or:Di,Z),xt=ws(St.$response),Gt=Math.max(xt||0,Et);ye+=Gt,await new Promise(Dn=>setTimeout(Dn,Gt));continue}throw St.$metadata||(St.$metadata={}),St.$metadata.attempts=Z,St.$metadata.totalRetryDelay=ye,St}}}r(lo,"StandardRetryStrategy_StandardRetryStrategy");const ws=r(y=>{if(!E.isInstance(y))return;const C=Object.keys(y.headers).find(Z=>Z.toLowerCase()==="retry-after");if(!C)return;const A=y.headers[C],M=Number(A);return Number.isNaN(M)?new Date(A).getTime()-Date.now():M*1e3},"getDelayFromRetryAfterHeader");class oe extends lo{constructor(C,A){const{rateLimiter:M,...W}=A??{};super(C,W),this.rateLimiter=M??new vi,this.mode=_t.ADAPTIVE}async retry(C,A){return super.retry(C,A,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:M=>{this.rateLimiter.updateClientSendingRate(M)}})}}r(oe,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");const fe="AWS_MAX_ATTEMPTS",Ce="max_attempts",Ne={environmentVariableSelector:y=>{const C=y[fe];if(!C)return;const A=parseInt(C);if(Number.isNaN(A))throw new Error(`Environment variable ${fe} mast be a number, got "${C}"`);return A},configFileSelector:y=>{const C=y[Ce];if(!C)return;const A=parseInt(C);if(Number.isNaN(A))throw new Error(`Shared config file entry ${Ce} mast be a number, got "${C}"`);return A},default:Dt},Ge=r(y=>{const{retryStrategy:C}=y,A=Hn(y.maxAttempts??Dt);return{...y,maxAttempts:A,retryStrategy:async()=>C||(await Hn(y.retryMode)()===_t.ADAPTIVE?new ts(A):new Yo(A))}},"resolveRetryConfig"),Ct="AWS_RETRY_MODE",ht="retry_mode",Kt={environmentVariableSelector:y=>y[Ct],configFileSelector:y=>y[ht],default:pn},$t=r(()=>y=>async C=>{const{request:A}=C;return HttpRequest.isInstance(A)&&(delete A.headers[INVOCATION_ID_HEADER],delete A.headers[REQUEST_HEADER]),y(C)},"omitRetryHeadersMiddleware"),on={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},en=r(y=>({applyToStack:C=>{C.addRelativeTo($t(),on)}}),"getOmitRetryHeadersPlugin"),gn=r((y,C)=>{const A=[];if(y&&A.push(y),C)for(const M of C)A.push(M);return A},"getAllAliases"),vn=r((y,C)=>`${y||"anonymous"}${C&&C.length>0?` (a.k.a. ${C.join(",")})`:""}`,"getMiddlewareNameWithAliases"),Cn=r(()=>{let y=[],C=[],A=!1;const M=new Set,W=r(Et=>Et.sort((xt,Gt)=>jn[Gt.step]-jn[xt.step]||Bn[Gt.priority||"normal"]-Bn[xt.priority||"normal"]),"sort"),Z=r(Et=>{let xt=!1;const Gt=r(Dn=>{const ui=gn(Dn.name,Dn.aliases);if(ui.includes(Et)){xt=!0;for(const Ln of ui)M.delete(Ln);return!1}return!0},"filterCb");return y=y.filter(Gt),C=C.filter(Gt),xt},"removeByName"),ye=r(Et=>{let xt=!1;const Gt=r(Dn=>{if(Dn.middleware===Et){xt=!0;for(const ui of gn(Dn.name,Dn.aliases))M.delete(ui);return!1}return!0},"filterCb");return y=y.filter(Gt),C=C.filter(Gt),xt},"removeByReference"),Ie=r(Et=>{var xt;return y.forEach(Gt=>{Et.add(Gt.middleware,{...Gt})}),C.forEach(Gt=>{Et.addRelativeTo(Gt.middleware,{...Gt})}),(xt=Et.identifyOnResolve)==null||xt.call(Et,St.identifyOnResolve()),Et},"cloneTo"),We=r(Et=>{const xt=[];return Et.before.forEach(Gt=>{Gt.before.length===0&&Gt.after.length===0?xt.push(Gt):xt.push(...We(Gt))}),xt.push(Et),Et.after.reverse().forEach(Gt=>{Gt.before.length===0&&Gt.after.length===0?xt.push(Gt):xt.push(...We(Gt))}),xt},"expandRelativeMiddlewareList"),Le=r((Et=!1)=>{const xt=[],Gt=[],Dn={};return y.forEach(Ln=>{const Bi={...Ln,before:[],after:[]};for(const ir of gn(Bi.name,Bi.aliases))Dn[ir]=Bi;xt.push(Bi)}),C.forEach(Ln=>{const Bi={...Ln,before:[],after:[]};for(const ir of gn(Bi.name,Bi.aliases))Dn[ir]=Bi;Gt.push(Bi)}),Gt.forEach(Ln=>{if(Ln.toMiddleware){const Bi=Dn[Ln.toMiddleware];if(Bi===void 0){if(Et)return;throw new Error(`${Ln.toMiddleware} is not found when adding ${vn(Ln.name,Ln.aliases)} middleware ${Ln.relation} ${Ln.toMiddleware}`)}Ln.relation==="after"&&Bi.after.push(Ln),Ln.relation==="before"&&Bi.before.push(Ln)}}),W(xt).map(We).reduce((Ln,Bi)=>(Ln.push(...Bi),Ln),[])},"getMiddlewareList"),St={add:(Et,xt={})=>{const{name:Gt,override:Dn,aliases:ui}=xt,Ln={step:"initialize",priority:"normal",middleware:Et,...xt},Bi=gn(Gt,ui);if(Bi.length>0){if(Bi.some(ir=>M.has(ir))){if(!Dn)throw new Error(`Duplicate middleware name '${vn(Gt,ui)}'`);for(const ir of Bi){const ko=y.findIndex(Ls=>{var Hs;return Ls.name===ir||((Hs=Ls.aliases)==null?void 0:Hs.some(wd=>wd===ir))});if(ko===-1)continue;const _o=y[ko];if(_o.step!==Ln.step||Ln.priority!==_o.priority)throw new Error(`"${vn(_o.name,_o.aliases)}" middleware with ${_o.priority} priority in ${_o.step} step cannot be overridden by "${vn(Gt,ui)}" middleware with ${Ln.priority} priority in ${Ln.step} step.`);y.splice(ko,1)}}for(const ir of Bi)M.add(ir)}y.push(Ln)},addRelativeTo:(Et,xt)=>{const{name:Gt,override:Dn,aliases:ui}=xt,Ln={middleware:Et,...xt},Bi=gn(Gt,ui);if(Bi.length>0){if(Bi.some(ir=>M.has(ir))){if(!Dn)throw new Error(`Duplicate middleware name '${vn(Gt,ui)}'`);for(const ir of Bi){const ko=C.findIndex(Ls=>{var Hs;return Ls.name===ir||((Hs=Ls.aliases)==null?void 0:Hs.some(wd=>wd===ir))});if(ko===-1)continue;const _o=C[ko];if(_o.toMiddleware!==Ln.toMiddleware||_o.relation!==Ln.relation)throw new Error(`"${vn(_o.name,_o.aliases)}" middleware ${_o.relation} "${_o.toMiddleware}" middleware cannot be overridden by "${vn(Gt,ui)}" middleware ${Ln.relation} "${Ln.toMiddleware}" middleware.`);C.splice(ko,1)}}for(const ir of Bi)M.add(ir)}C.push(Ln)},clone:()=>Ie(Cn()),use:Et=>{Et.applyToStack(St)},remove:Et=>typeof Et=="string"?Z(Et):ye(Et),removeByTag:Et=>{let xt=!1;const Gt=r(Dn=>{const{tags:ui,name:Ln,aliases:Bi}=Dn;if(ui&&ui.includes(Et)){const ir=gn(Ln,Bi);for(const ko of ir)M.delete(ko);return xt=!0,!1}return!0},"filterCb");return y=y.filter(Gt),C=C.filter(Gt),xt},concat:Et=>{var Gt;const xt=Ie(Cn());return xt.use(Et),xt.identifyOnResolve(A||xt.identifyOnResolve()||(((Gt=Et.identifyOnResolve)==null?void 0:Gt.call(Et))??!1)),xt},applyToStack:Ie,identify:()=>Le(!0).map(Et=>{const xt=Et.step??Et.relation+" "+Et.toMiddleware;return vn(Et.name,Et.aliases)+" - "+xt}),identifyOnResolve(Et){return typeof Et=="boolean"&&(A=Et),A},resolve:(Et,xt)=>{for(const Gt of Le().map(Dn=>Dn.middleware).reverse())Et=Gt(Et,xt);return A&&console.log(St.identify()),Et}};return St},"constructStack"),jn={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Bn={high:3,normal:2,low:1};class wn{constructor(C){this.config=C,this.middlewareStack=Cn()}send(C,A,M){const W=typeof A!="function"?A:void 0,Z=typeof A=="function"?A:M,ye=W===void 0&&this.config.cacheMiddleware===!0;let Ie;if(ye){this.handlers||(this.handlers=new WeakMap);const We=this.handlers;We.has(C.constructor)?Ie=We.get(C.constructor):(Ie=C.resolveMiddleware(this.middlewareStack,this.config,W),We.set(C.constructor,Ie))}else delete this.handlers,Ie=C.resolveMiddleware(this.middlewareStack,this.config,W);if(Z)Ie(C).then(We=>Z(null,We.output),We=>Z(We)).catch(()=>{});else return Ie(C).then(We=>We.output)}destroy(){var C,A,M;(M=(A=(C=this.config)==null?void 0:C.requestHandler)==null?void 0:A.destroy)==null||M.call(A),delete this.handlers}}r(wn,"Client");const hn={},ci=new Array(64);for(let y=0,C="A".charCodeAt(0),A="Z".charCodeAt(0);y+C<=A;y++){const M=String.fromCharCode(y+C);hn[M]=y,ci[y]=M}for(let y=0,C="a".charCodeAt(0),A="z".charCodeAt(0);y+C<=A;y++){const M=String.fromCharCode(y+C),W=y+26;hn[M]=W,ci[W]=M}for(let y=0;y<10;y++){hn[y.toString(10)]=y+52;const C=y.toString(10),A=y+52;hn[C]=A,ci[A]=C}hn["+"]=62,ci[62]="+",hn["/"]=63,ci[63]="/";const Ki=6,ar=8,Tr=63,Bt=r(y=>{let C=y.length/4*3;y.slice(-2)==="=="?C-=2:y.slice(-1)==="="&&C--;const A=new ArrayBuffer(C),M=new DataView(A);for(let W=0;W<y.length;W+=4){let Z=0,ye=0;for(let Le=W,St=W+3;Le<=St;Le++)if(y[Le]!=="="){if(!(y[Le]in hn))throw new TypeError(`Invalid character ${y[Le]} in base64 string.`);Z|=hn[y[Le]]<<(St-Le)*Ki,ye+=Ki}else Z>>=Ki;const Ie=W/4*3;Z>>=ye%ar;const We=Math.floor(ye/ar);for(let Le=0;Le<We;Le++){const St=(We-Le-1)*ar;M.setUint8(Ie+Le,(Z&255<<St)>>St)}}return new Uint8Array(A)},"fromBase64"),dr=r(y=>new TextEncoder().encode(y),"fromUtf8");function cr(y){let C;typeof y=="string"?C=dr(y):C=y;const A=typeof C=="object"&&typeof C.length=="number",M=typeof C=="object"&&typeof C.byteOffset=="number"&&typeof C.byteLength=="number";if(!A&&!M)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let W="";for(let Z=0;Z<C.length;Z+=3){let ye=0,Ie=0;for(let Le=Z,St=Math.min(Z+3,C.length);Le<St;Le++)ye|=C[Le]<<(St-Le-1)*ar,Ie+=ar;const We=Math.ceil(Ie/Ki);ye<<=We*Ki-Ie;for(let Le=1;Le<=We;Le++){const St=(We-Le)*Ki;W+=ci[(ye&Tr<<St)>>St]}W+="==".slice(0,4-We)}return W}r(cr,"toBase64_browser_toBase64");const Xi=r(y=>{if(typeof y=="string")return y;if(typeof y!="object"||typeof y.byteOffset!="number"||typeof y.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(y)},"toUtf8_browser_toUtf8");function Xr(y,C="utf-8"){return C==="base64"?cr(y):Xi(y)}r(Xr,"transformToString");function wo(y,C){return C==="base64"?Mr.mutate(Bt(y)):Mr.mutate(dr(y))}r(wo,"transformFromString");class Mr extends Uint8Array{static fromString(C,A="utf-8"){switch(typeof C){case"string":return wo(C,A);default:throw new Error(`Unsupported conversion from ${typeof C} to Uint8ArrayBlobAdapter.`)}}static mutate(C){return Object.setPrototypeOf(C,Mr.prototype),C}transformToString(C="utf-8"){return Xr(this,C)}}r(Mr,"Uint8ArrayBlobAdapter");const go=r(y=>encodeURIComponent(y).replace(/[!'()*]/g,Oo),"escapeUri"),Oo=r(y=>`%${y.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode");function ns(y){const C=[];for(let A of Object.keys(y).sort()){const M=y[A];if(A=go(A),Array.isArray(M))for(let W=0,Z=M.length;W<Z;W++)C.push(`${A}=${go(M[W])}`);else{let W=A;(M||typeof M=="string")&&(W+=`=${go(M)}`),C.push(W)}}return C.join("&")}r(ns,"buildQueryString");function fs(y=0){return new Promise((C,A)=>{y&&setTimeout(()=>{const M=new Error(`Request did not complete within ${y} ms`);M.name="TimeoutError",A(M)},y)})}r(fs,"requestTimeout");const Hr={supported:void 0};class gs{static create(C){return typeof(C==null?void 0:C.handle)=="function"?C:new gs(C)}constructor(C){typeof C=="function"?this.configProvider=C().then(A=>A||{}):(this.config=C??{},this.configProvider=Promise.resolve(this.config)),Hr.supported===void 0&&(Hr.supported=Boolean(typeof Request<"u"&&"keepalive"in new Request("https://[::1]")))}destroy(){}async handle(C,{abortSignal:A}={}){var Bi;this.config||(this.config=await this.configProvider);const M=this.config.requestTimeout,W=this.config.keepAlive===!0,Z=this.config.credentials;if(A!=null&&A.aborted){const ir=new Error("Request aborted");return ir.name="AbortError",Promise.reject(ir)}let ye=C.path;const Ie=ns(C.query||{});Ie&&(ye+=`?${Ie}`),C.fragment&&(ye+=`#${C.fragment}`);let We="";if(C.username!=null||C.password!=null){const ir=C.username??"",ko=C.password??"";We=`${ir}:${ko}@`}const{port:Le,method:St}=C,Et=`${C.protocol}//${We}${C.hostname}${Le?`:${Le}`:""}${ye}`,xt=St==="GET"||St==="HEAD"?void 0:C.body,Gt={body:xt,headers:new Headers(C.headers),method:St,credentials:Z};(Bi=this.config)!=null&&Bi.cache&&(Gt.cache=this.config.cache),xt&&(Gt.duplex="half"),typeof AbortController<"u"&&(Gt.signal=A),Hr.supported&&(Gt.keepalive=W),typeof this.config.requestInit=="function"&&Object.assign(Gt,this.config.requestInit(C));let Dn=r(()=>{},"removeSignalEventListener");const ui=new Request(Et,Gt),Ln=[fetch(ui).then(ir=>{const ko=ir.headers,_o={};for(const Hs of ko.entries())_o[Hs[0]]=Hs[1];return ir.body!=null?{response:new E({headers:_o,reason:ir.statusText,statusCode:ir.status,body:ir.body})}:ir.blob().then(Hs=>({response:new E({headers:_o,reason:ir.statusText,statusCode:ir.status,body:Hs})}))}),fs(M)];return A&&Ln.push(new Promise((ir,ko)=>{const _o=r(()=>{const Ls=new Error("Request aborted");Ls.name="AbortError",ko(Ls)},"onAbort");if(typeof A.addEventListener=="function"){const Ls=A;Ls.addEventListener("abort",_o,{once:!0}),Dn=r(()=>Ls.removeEventListener("abort",_o),"removeSignalEventListener")}else A.onabort=_o})),Promise.race(Ln).finally(Dn)}updateHttpClientConfig(C,A){this.config=void 0,this.configProvider=this.configProvider.then(M=>(M[C]=A,M))}httpHandlerConfigs(){return this.config??{}}}r(gs,"FetchHttpHandler");const Ws=r(y=>typeof Blob=="function"&&y instanceof Blob?Ss(y):ls(y),"stream_collector_streamCollector");async function Ss(y){const C=await As(y),A=Bt(C);return new Uint8Array(A)}r(Ss,"collectBlob");async function ls(y){const C=[],A=y.getReader();let M=!1,W=0;for(;!M;){const{done:Ie,value:We}=await A.read();We&&(C.push(We),W+=We.length),M=Ie}const Z=new Uint8Array(W);let ye=0;for(const Ie of C)Z.set(Ie,ye),ye+=Ie.length;return Z}r(ls,"collectStream");function As(y){return new Promise((C,A)=>{const M=new FileReader;M.onloadend=()=>{if(M.readyState!==2)return A(new Error("Reader aborted too early"));const W=M.result??"",Z=W.indexOf(","),ye=Z>-1?Z+1:W.length;C(W.substring(ye))},M.onabort=()=>A(new Error("Read aborted")),M.onerror=()=>A(M.error),M.readAsDataURL(y)})}r(As,"readToBase64");const vs={},Wo={};for(let y=0;y<256;y++){let C=y.toString(16).toLowerCase();C.length===1&&(C=`0${C}`),vs[y]=C,Wo[C]=y}function Xo(y){if(y.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const C=new Uint8Array(y.length/2);for(let A=0;A<y.length;A+=2){const M=y.slice(A,A+2).toLowerCase();if(M in Wo)C[A/2]=Wo[M];else throw new Error(`Cannot decode unrecognized sequence ${M} as hexadecimal`)}return C}r(Xo,"fromHex");function zo(y){let C="";for(let A=0;A<y.byteLength;A++)C+=vs[y[A]];return C}r(zo,"dist_es_toHex");const zs="The stream has already been transformed.",Ra=r(y=>{var W,Z;if(!Gs(y)&&!isReadableStream(y)){const ye=((Z=(W=y==null?void 0:y.__proto__)==null?void 0:W.constructor)==null?void 0:Z.name)||y;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${ye}`)}let C=!1;const A=r(async()=>{if(C)throw new Error(zs);return C=!0,await streamCollector(y)},"transformToByteArray"),M=r(ye=>{if(typeof ye.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return ye.stream()},"blobToWebStream");return Object.assign(y,{transformToByteArray:A,transformToString:async ye=>{const Ie=await A();if(ye==="base64")return toBase64(Ie);if(ye==="hex")return toHex(Ie);if(ye===void 0||ye==="utf8"||ye==="utf-8")return toUtf8(Ie);if(typeof TextDecoder=="function")return new TextDecoder(ye).decode(Ie);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(C)throw new Error(zs);if(C=!0,Gs(y))return M(y);if(isReadableStream(y))return y;throw new Error(`Cannot transform payload to web stream, got ${y}`)}})},"sdkStreamMixin"),Gs=r(y=>typeof Blob=="function"&&y instanceof Blob,"isBlobInstance"),Go=r(async(y=new Uint8Array,C)=>{if(y instanceof Uint8Array)return Mr.mutate(y);if(!y)return Mr.mutate(new Uint8Array);const A=C.streamCollector(y);return Mr.mutate(await A)},"collect_stream_body_collectBody");class mi{constructor(){this.middlewareStack=Cn()}static classBuilder(){return new ys}resolveMiddlewareWithContext(C,A,M,{middlewareFn:W,clientName:Z,commandName:ye,inputFilterSensitiveLog:Ie,outputFilterSensitiveLog:We,smithyContext:Le,additionalContext:St,CommandCtor:Et}){for(const Ln of W.bind(this)(Et,C,A,M))this.middlewareStack.use(Ln);const xt=C.concat(this.middlewareStack),{logger:Gt}=A,Dn={logger:Gt,clientName:Z,commandName:ye,inputFilterSensitiveLog:Ie,outputFilterSensitiveLog:We,[f]:{commandInstance:this,...Le},...St},{requestHandler:ui}=A;return xt.resolve(Ln=>ui.handle(Ln.request,M||{}),Dn)}}r(mi,"Command");class ys{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=C=>C,this._outputFilterSensitiveLog=C=>C,this._serializer=null,this._deserializer=null}init(C){this._init=C}ep(C){return this._ep=C,this}m(C){return this._middlewareFn=C,this}s(C,A,M={}){return this._smithyContext={service:C,operation:A,...M},this}c(C={}){return this._additionalContext=C,this}n(C,A){return this._clientName=C,this._commandName=A,this}f(C=M=>M,A=M=>M){return this._inputFilterSensitiveLog=C,this._outputFilterSensitiveLog=A,this}ser(C){return this._serializer=C,this}de(C){return this._deserializer=C,this}build(){const C=this;let A;return A=r(class extends mi{static getEndpointParameterInstructions(){return C._ep}constructor(...[M]){super(),this.serialize=C._serializer,this.deserialize=C._deserializer,this.input=M??{},C._init(this)}resolveMiddleware(M,W,Z){return this.resolveMiddlewareWithContext(M,W,Z,{CommandCtor:A,middlewareFn:C._middlewareFn,clientName:C._clientName,commandName:C._commandName,inputFilterSensitiveLog:C._inputFilterSensitiveLog,outputFilterSensitiveLog:C._outputFilterSensitiveLog,smithyContext:C._smithyContext,additionalContext:C._additionalContext})}},"CommandRef")}}r(ys,"ClassBuilder");const yi="***SensitiveInformation***",ea=r((y,C)=>{for(const A of Object.keys(y)){const M=y[A],W=r(async function(ye,Ie,We){const Le=new M(ye);if(typeof Ie=="function")this.send(Le,Ie);else if(typeof We=="function"){if(typeof Ie!="object")throw new Error(`Expected http options but got ${typeof Ie}`);this.send(Le,Ie||{},We)}else return this.send(Le,Ie)},"methodImpl"),Z=(A[0].toLowerCase()+A.slice(1)).replace(/Command$/,"");C.prototype[Z]=W}},"createAggregatedClient"),Os=r(y=>{switch(y){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${y}"`)}},"parseBoolean"),Ca=r(y=>{if(y!=null){if(typeof y=="number"){if((y===0||y===1)&&Yn.warn(_n(`Expected boolean, got ${typeof y}: ${y}`)),y===0)return!1;if(y===1)return!0}if(typeof y=="string"){const C=y.toLowerCase();if((C==="false"||C==="true")&&Yn.warn(_n(`Expected boolean, got ${typeof y}: ${y}`)),C==="false")return!1;if(C==="true")return!0}if(typeof y=="boolean")return y;throw new TypeError(`Expected boolean, got ${typeof y}: ${y}`)}},"expectBoolean"),te=r(y=>{if(y!=null){if(typeof y=="string"){const C=parseFloat(y);if(!Number.isNaN(C))return String(C)!==String(y)&&Yn.warn(_n(`Expected number but observed string: ${y}`)),C}if(typeof y=="number")return y;throw new TypeError(`Expected number, got ${typeof y}: ${y}`)}},"expectNumber"),ie=Math.ceil(2**127*(2-2**-23)),$=r(y=>{const C=te(y);if(C!==void 0&&!Number.isNaN(C)&&C!==1/0&&C!==-1/0&&Math.abs(C)>ie)throw new TypeError(`Expected 32-bit float, got ${y}`);return C},"expectFloat32"),P=r(y=>{if(y!=null){if(Number.isInteger(y)&&!Number.isNaN(y))return y;throw new TypeError(`Expected integer, got ${typeof y}: ${y}`)}},"expectLong"),Y=null,pe=r(y=>ze(y,32),"expectInt32"),me=r(y=>ze(y,16),"expectShort"),De=r(y=>ze(y,8),"expectByte"),ze=r((y,C)=>{const A=P(y);if(A!==void 0&&gt(A,C)!==A)throw new TypeError(`Expected ${C}-bit integer, got ${y}`);return A},"expectSizedInt"),gt=r((y,C)=>{switch(C){case 32:return Int32Array.of(y)[0];case 16:return Int16Array.of(y)[0];case 8:return Int8Array.of(y)[0]}},"castInt"),qe=r((y,C)=>{if(y==null)throw C?new TypeError(`Expected a non-null value for ${C}`):new TypeError("Expected a non-null value");return y},"expectNonNull"),mt=r(y=>{if(y==null)return;if(typeof y=="object"&&!Array.isArray(y))return y;const C=Array.isArray(y)?"array":typeof y;throw new TypeError(`Expected object, got ${C}: ${y}`)},"expectObject"),at=r(y=>{if(y!=null){if(typeof y=="string")return y;if(["boolean","number","bigint"].includes(typeof y))return Yn.warn(_n(`Expected string, got ${typeof y}: ${y}`)),String(y);throw new TypeError(`Expected string, got ${typeof y}: ${y}`)}},"expectString"),qt=r(y=>{if(y==null)return;const C=mt(y),A=Object.entries(C).filter(([,M])=>M!=null).map(([M])=>M);if(A.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(A.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${A} were not null.`);return C},"expectUnion"),mn=r(y=>te(typeof y=="string"?Ei(y):y),"strictParseDouble"),On=null,ai=r(y=>$(typeof y=="string"?Ei(y):y),"parse_utils_strictParseFloat32"),gi=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ei=r(y=>{const C=y.match(gi);if(C===null||C[0].length!==y.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(y)},"parseNumber"),Gi=r(y=>typeof y=="string"?Ji(y):te(y),"limitedParseDouble"),qi=null,rr=null,Ir=r(y=>typeof y=="string"?Ji(y):$(y),"limitedParseFloat32"),Ji=r(y=>{switch(y){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${y}`)}},"parseFloatString"),Wn=r(y=>P(typeof y=="string"?Ei(y):y),"strictParseLong"),er=null,vt=r(y=>pe(typeof y=="string"?Ei(y):y),"strictParseInt32"),wt=r(y=>me(typeof y=="string"?Ei(y):y),"parse_utils_strictParseShort"),Jt=r(y=>De(typeof y=="string"?Ei(y):y),"parse_utils_strictParseByte"),_n=r(y=>String(new TypeError(y).stack||y).split(`
`).slice(0,5).filter(C=>!C.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),Yn={warn:console.warn},Ui=null,Oi=null;function Ti(y){const C=y.getUTCFullYear(),A=y.getUTCMonth(),M=y.getUTCDay(),W=y.getUTCDate(),Z=y.getUTCHours(),ye=y.getUTCMinutes(),Ie=y.getUTCSeconds(),We=W<10?`0${W}`:`${W}`,Le=Z<10?`0${Z}`:`${Z}`,St=ye<10?`0${ye}`:`${ye}`,Et=Ie<10?`0${Ie}`:`${Ie}`;return`${Ui[M]}, ${We} ${Oi[A]} ${C} ${Le}:${St}:${Et} GMT`}r(Ti,"dateToUtcString");const Fi=null,ur=r(y=>{if(y==null)return;if(typeof y!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const C=Fi.exec(y);if(!C)throw new TypeError("Invalid RFC-3339 date-time value");const[A,M,W,Z,ye,Ie,We,Le]=C,St=strictParseShort(Do(M)),Et=os(W,"month",1,12),xt=os(Z,"day",1,31);return js(St,Et,xt,{hours:ye,minutes:Ie,seconds:We,fractionalMilliseconds:Le})},"parseRfc3339DateTime"),To=null,mr=r(y=>{if(y==null)return;if(typeof y!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const C=To.exec(y);if(!C)throw new TypeError("Invalid RFC-3339 date-time value");const[A,M,W,Z,ye,Ie,We,Le,St]=C,Et=strictParseShort(Do(M)),xt=os(W,"month",1,12),Gt=os(Z,"day",1,31),Dn=js(Et,xt,Gt,{hours:ye,minutes:Ie,seconds:We,fractionalMilliseconds:Le});return St.toUpperCase()!="Z"&&Dn.setTime(Dn.getTime()-Kr(St)),Dn},"parseRfc3339DateTimeWithOffset"),eo=null,Fo=null,rs=null,xo=r(y=>{if(y==null)return;if(typeof y!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let C=eo.exec(y);if(C){const[A,M,W,Z,ye,Ie,We,Le]=C;return js(strictParseShort(Do(Z)),ua(W),os(M,"day",1,31),{hours:ye,minutes:Ie,seconds:We,fractionalMilliseconds:Le})}if(C=Fo.exec(y),C){const[A,M,W,Z,ye,Ie,We,Le]=C;return Ns(js(ta(Z),ua(W),os(M,"day",1,31),{hours:ye,minutes:Ie,seconds:We,fractionalMilliseconds:Le}))}if(C=rs.exec(y),C){const[A,M,W,Z,ye,Ie,We,Le]=C;return js(strictParseShort(Do(Le)),ua(M),os(W.trimLeft(),"day",1,31),{hours:Z,minutes:ye,seconds:Ie,fractionalMilliseconds:We})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),So=r(y=>{if(y==null)return;let C;if(typeof y=="number")C=y;else if(typeof y=="string")C=mn(y);else if(typeof y=="object"&&y.tag===1)C=y.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(C)||C===1/0||C===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(C*1e3))},"parseEpochTimestamp"),js=r((y,C,A,M)=>{const W=C-1;return Ma(y,W,A),new Date(Date.UTC(y,W,A,os(M.hours,"hour",0,23),os(M.minutes,"minute",0,59),os(M.seconds,"seconds",0,60),xr(M.fractionalMilliseconds)))},"buildDate"),ta=r(y=>{const C=new Date().getUTCFullYear(),A=Math.floor(C/100)*100+strictParseShort(Do(y));return A<C?A+100:A},"parseTwoDigitYear"),Ds=null,Ns=r(y=>y.getTime()-new Date().getTime()>Ds?new Date(Date.UTC(y.getUTCFullYear()-100,y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds())):y,"adjustRfc850Year"),ua=r(y=>{const C=Oi.indexOf(y);if(C<0)throw new TypeError(`Invalid month: ${y}`);return C+1},"parseMonthByShortName"),na=null,Ma=r((y,C,A)=>{let M=na[C];if(C===1&&ia(y)&&(M=29),A>M)throw new TypeError(`Invalid day for ${Oi[C]} in ${y}: ${A}`)},"validateDayOfMonth"),ia=r(y=>y%4===0&&(y%100!==0||y%400===0),"isLeapYear"),os=r((y,C,A,M)=>{const W=strictParseByte(Do(y));if(W<A||W>M)throw new TypeError(`${C} must be between ${A} and ${M}, inclusive`);return W},"parseDateValue"),xr=r(y=>y==null?0:strictParseFloat32("0."+y)*1e3,"parseMilliseconds"),Kr=r(y=>{const C=y[0];let A=1;if(C=="+")A=1;else if(C=="-")A=-1;else throw new TypeError(`Offset direction, ${C}, must be "+" or "-"`);const M=Number(y.substring(1,3)),W=Number(y.substring(4,6));return A*(M*60+W)*60*1e3},"parseOffsetToMilliseconds"),Do=r(y=>{let C=0;for(;C<y.length-1&&y.charAt(C)==="0";)C++;return C===0?y:y.slice(C)},"stripLeadingZeroes");class $s extends Error{constructor(C){super(C.message),Object.setPrototypeOf(this,$s.prototype),this.name=C.name,this.$fault=C.$fault,this.$metadata=C.$metadata}}r($s,"ServiceException");const _s=r((y,C={})=>{Object.entries(C).filter(([,M])=>M!==void 0).forEach(([M,W])=>{(y[M]==null||y[M]==="")&&(y[M]=W)});const A=y.message||y.Message||"UnknownError";return y.message=A,delete y.Message,y},"decorateServiceException"),gc=r(({output:y,parsedBody:C,exceptionCtor:A,errorCode:M})=>{const W=vc(y),Z=W.httpStatusCode?W.httpStatusCode+"":void 0,ye=new A({name:(C==null?void 0:C.code)||(C==null?void 0:C.Code)||M||Z||"UnknownError",$fault:"client",$metadata:W});throw _s(ye,C)},"throwDefaultError"),Sc=r(y=>({output:C,parsedBody:A,errorCode:M})=>{gc({output:C,parsedBody:A,exceptionCtor:y,errorCode:M})},"withBaseException"),vc=r(y=>({httpStatusCode:y.statusCode,requestId:y.headers["x-amzn-requestid"]??y.headers["x-amzn-request-id"]??y.headers["x-amz-request-id"],extendedRequestId:y.headers["x-amz-id-2"],cfId:y.headers["x-amz-cf-id"]}),"deserializeMetadata"),yc=r(y=>{switch(y){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),_c=r(y=>{const C=[];for(const A in s){const M=s[A];y[M]!==void 0&&C.push({algorithmId:()=>M,checksumConstructor:()=>y[M]})}return{_checksumAlgorithms:C,addChecksumAlgorithm(A){this._checksumAlgorithms.push(A)},checksumAlgorithms(){return this._checksumAlgorithms}}},"extensions_checksum_getChecksumConfiguration"),Ec=r(y=>{const C={};return y.checksumAlgorithms().forEach(A=>{C[A.algorithmId()]=A.checksumConstructor()}),C},"extensions_checksum_resolveChecksumRuntimeConfig"),bc=r(y=>{let C=y.retryStrategy;return{setRetryStrategy(A){C=A},retryStrategy(){return C}}},"getRetryConfiguration"),Cc=r(y=>{const C={};return C.retryStrategy=y.retryStrategy(),C},"resolveRetryRuntimeConfig"),Tc=r(y=>({..._c(y),...bc(y)}),"getDefaultExtensionConfiguration"),Du=null,Ic=r(y=>({...Ec(y),...Cc(y)}),"defaultExtensionConfiguration_resolveDefaultRuntimeConfig"),Ar=r(y=>y!=null,"isSerializableHeaderValue"),Rl=r(function(){const y=Object.getPrototypeOf(this).constructor,C=Function.bind.apply(String,[null,...arguments]),A=new C;return Object.setPrototypeOf(A,y.prototype),A},"StringWrapper");Rl.prototype=Object.create(String.prototype,{constructor:{value:Rl,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Rl,String);class Pa extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(C){return C instanceof Pa?C:C instanceof String||typeof C=="string"?new Pa(C):new Pa(JSON.stringify(C))}}r(Pa,"LazyJsonString");class Ml{trace(){}debug(){}info(){}warn(){}error(){}}r(Ml,"NoOpLogger");function un(y,C,A){let M,W,Z;if(typeof C>"u"&&typeof A>"u")M={},Z=y;else{if(M=y,typeof C=="function")return W=C,Z=A,wc(M,W,Z);Z=C}for(const ye of Object.keys(Z)){if(!Array.isArray(Z[ye])){M[ye]=Z[ye];continue}Qa(M,null,Z,ye)}return M}r(un,"map");const Ru=r(y=>{const C={};for(const[A,M]of Object.entries(y||{}))C[A]=[,M];return C},"convertMap"),ii=r((y,C)=>{const A={};for(const M in C)Qa(A,y,C,M);return A},"take"),wc=r((y,C,A)=>un(y,Object.entries(A).reduce((M,[W,Z])=>(Array.isArray(Z)?M[W]=Z:typeof Z=="function"?M[W]=[C,Z()]:M[W]=[C,Z],M),{})),"mapWithFilter"),Qa=r((y,C,A,M)=>{if(C!==null){let ye=A[M];typeof ye=="function"&&(ye=[,ye]);const[Ie=Pl,We=Bd,Le=M]=ye;(typeof Ie=="function"&&Ie(C[Le])||typeof Ie!="function"&&Ie)&&(y[M]=We(C[Le]));return}let[W,Z]=A[M];if(typeof Z=="function"){let ye;const Ie=W===void 0&&(ye=Z())!=null,We=typeof W=="function"&&!!W(void 0)||typeof W!="function"&&!!W;Ie?y[M]=ye:We&&(y[M]=Z())}else{const ye=W===void 0&&Z!=null,Ie=typeof W=="function"&&!!W(Z)||typeof W!="function"&&!!W;(ye||Ie)&&(y[M]=Z)}},"applyInstruction"),Pl=r(y=>y!=null,"nonNullish"),Bd=r(y=>y,"pass");function kl(y){return encodeURIComponent(y).replace(/[!'()*]/g,function(C){return"%"+C.charCodeAt(0).toString(16).toUpperCase()})}r(kl,"extendedEncodeURIComponent");const Ac=r((y,C,A,M,W,Z)=>{if(C!=null&&C[A]!==void 0){const ye=M();if(ye.length<=0)throw new Error("Empty value provided for input HTTP label: "+A+".");y=y.replace(W,Z?ye.split("/").map(Ie=>kl(Ie)).join("/"):kl(ye))}else throw new Error("No value provided for input HTTP label: "+A+".");return y},"resolvedPath"),Mu=r(y=>{if(y!==y)return"NaN";switch(y){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return y}},"serializeFloat"),Fs=r(y=>y.toISOString().replace(".000Z","Z"),"serializeDateTime"),bi=r(y=>{if(y==null)return{};if(Array.isArray(y))return y.filter(C=>C!=null).map(bi);if(typeof y=="object"){const C={};for(const A of Object.keys(y))y[A]!=null&&(C[A]=bi(y[A]));return C}return y},"_json"),Oc=r(y=>(y==null?void 0:y.body)instanceof ReadableStream,"isStreamingPayload"),Dc=r(y=>(C,A)=>async M=>{var ye;let W=await y.retryStrategy();const Z=await y.maxAttempts();if(Ud(W)){W=W;let Ie=await W.acquireInitialRetryToken(A.partition_id),We=new Error,Le=0,St=0;const{request:Et}=M,xt=v.isInstance(Et);for(xt&&(Et.headers[qr]=Ho());;)try{xt&&(Et.headers[es]=`attempt=${Le+1}; max=${Z}`);const{response:Gt,output:Dn}=await C(M);return W.recordSuccess(Ie),Dn.$metadata.attempts=Le+1,Dn.$metadata.totalRetryDelay=St,{response:Gt,output:Dn}}catch(Gt){const Dn=Rc(Gt);if(We=mo(Gt),xt&&Oc(Et))throw(ye=A.logger instanceof Ml?console:A.logger)==null||ye.warn("An error was encountered in a non-retryable streaming request."),We;try{Ie=await W.refreshRetryTokenForRetry(Ie,Dn)}catch{throw We.$metadata||(We.$metadata={}),We.$metadata.attempts=Le+1,We.$metadata.totalRetryDelay=St,We}Le=Ie.getRetryCount();const ui=Ie.getRetryDelay();St+=ui,await new Promise(Ln=>setTimeout(Ln,ui))}}else return W=W,W!=null&&W.mode&&(A.userAgent=[...A.userAgent||[],["cfg/retry-mode",W.mode]]),W.retry(C,M)},"retryMiddleware"),Ud=r(y=>typeof y.acquireInitialRetryToken<"u"&&typeof y.refreshRetryTokenForRetry<"u"&&typeof y.recordSuccess<"u","isRetryStrategyV2"),Rc=r(y=>{const C={error:y,errorType:Vd(y)},A=Mc(y.$response);return A&&(C.retryAfterHint=A),C},"getRetryErrorInfo"),Vd=r(y=>br(y)?"THROTTLING":Cr(y)?"TRANSIENT":pi(y)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),Hd={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ka=r(y=>({applyToStack:C=>{C.add(Dc(y),Hd)}}),"getRetryPlugin"),Mc=r(y=>{if(!E.isInstance(y))return;const C=Object.keys(y.headers).find(Z=>Z.toLowerCase()==="retry-after");if(!C)return;const A=y.headers[C],M=Number(A);return Number.isNaN(M)?new Date(A):new Date(M*1e3)},"getRetryAfterHint"),Wd={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:Hd.name},Pc=r(y=>({applyToStack:C=>{C.addRelativeTo(rt(y),Wd)}}),"getHttpSigningPlugin");class k{constructor(C){this.authSchemes=new Map;for(const[A,M]of Object.entries(C))M!==void 0&&this.authSchemes.set(A,M)}getIdentityProvider(C){return this.authSchemes.get(C)}}r(k,"DefaultIdentityProviderConfig");class U{async sign(C,A,M){if(!M)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!M.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!M.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!A.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");const W=HttpRequest.clone(C);if(M.in===HttpApiKeyAuthLocation.QUERY)W.query[M.name]=A.apiKey;else if(M.in===HttpApiKeyAuthLocation.HEADER)W.headers[M.name]=M.scheme?`${M.scheme} ${A.apiKey}`:A.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+M.in+"`");return W}}r(U,"HttpApiKeyAuthSigner");class z{async sign(C,A,M){const W=HttpRequest.clone(C);if(!A.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return W.headers.Authorization=`Bearer ${A.token}`,W}}r(z,"HttpBearerAuthSigner");const xe=r(y=>C=>ut(C)&&C.expiration.getTime()-Date.now()<y,"createIsIdentityExpiredFunction")(3e5),ut=r(y=>y.expiration!==void 0,"doesIdentityRequireRefresh"),Pt=r((y,C,A)=>{if(y===void 0)return;const M=typeof y!="function"?async()=>Promise.resolve(y):y;let W,Z,ye,Ie=!1;const We=r(async Le=>{Z||(Z=M(Le));try{W=await Z,ye=!0,Ie=!1}finally{Z=void 0}return W},"coalesceProvider");return C===void 0?async Le=>((!ye||Le!=null&&Le.forceRefresh)&&(W=await We(Le)),W):async Le=>((!ye||Le!=null&&Le.forceRefresh)&&(W=await We(Le)),Ie?W:A(W)?(C(W)&&await We(Le),W):(Ie=!0,W))},"memoizeIdentityProvider"),bt=r(y=>y[SMITHY_CONTEXT_KEY]||(y[SMITHY_CONTEXT_KEY]={}),"getSmithyContext_getSmithyContext"),Yt=r(y=>{if(typeof y=="function")return y;const C=Promise.resolve(y);return()=>C},"dist_es_normalizeProvider_normalizeProvider");function Ut(y,C){return new fn(y,C)}r(Ut,"requestBuilder");class fn{constructor(C,A){this.input=C,this.context=A,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:C,protocol:A="https",port:M,path:W}=await this.context.endpoint();this.path=W;for(const Z of this.resolvePathStack)Z(this.path);return new v({protocol:A,hostname:this.hostname||C,port:M,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(C){return this.hostname=C,this}bp(C){return this.resolvePathStack.push(A=>{this.path=`${A!=null&&A.endsWith("/")?A.slice(0,-1):A||""}`+C}),this}p(C,A,M,W){return this.resolvePathStack.push(Z=>{this.path=Ac(Z,this.input,C,A,M,W)}),this}h(C){return this.headers=C,this}q(C){return this.query=C,this}b(C){return this.body=C,this}m(C){return this.method=C,this}}r(fn,"RequestBuilder");const yn=r(async(y,C,A,...M)=>await C.send(new y(A),...M),"makePagedClientRequest");function Un(y,C,A,M,W){return r(async function*(ye,Ie,...We){let Le=ye.startingToken||void 0,St=!0,Et;for(;St;){if(Ie[A]=Le,W&&(Ie[W]=Ie[W]??ye.pageSize),ye.client instanceof y)Et=await yn(C,ye.client,Ie,...We);else throw new Error(`Invalid client, expected instance of ${y.name}`);yield Et;const xt=Le;Le=ti(Et,M),St=!!(Le&&(!ye.stopOnSameToken||Le!==xt))}return void 0},"paginateOperation")}r(Un,"createPaginator");const ti=r((y,C)=>{let A=y;const M=C.split(".");for(const W of M){if(!A||typeof A!="object")return;A=A[W]}return A},"get"),Ii="content-length";function or(y){return C=>async A=>{const M=A.request;if(v.isInstance(M)){const{body:W,headers:Z}=M;if(W&&Object.keys(Z).map(ye=>ye.toLowerCase()).indexOf(Ii)===-1)try{const ye=y(W);M.headers={...M.headers,[Ii]:String(ye)}}catch{}}return C({...A,request:M})}}r(or,"contentLengthMiddleware");const xi={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Sr=r(y=>({applyToStack:C=>{C.add(or(y.bodyLengthChecker),xi)}}),"getContentLengthPlugin"),Wr=r(y=>typeof y=="string"?dr(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y),"toUint8Array"),zr="X-Amz-Algorithm",vo="X-Amz-Credential",fr="X-Amz-Date",Li="X-Amz-SignedHeaders",Dr="X-Amz-Expires",Ao="X-Amz-Signature",Ni="X-Amz-Security-Token",vr="X-Amz-Region-Set",co="authorization",Mo=fr.toLowerCase(),ss=[co,Mo,"date"],to=Ao.toLowerCase(),ds="x-amz-content-sha256",Uo=Ni.toLowerCase(),Rs="host",Ks={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},kc=/^proxy-/,Ll=/^sec-/,Nl=null,La="AWS4-HMAC-SHA256",zd="AWS4-ECDSA-P256-SHA256",Fl="AWS4-HMAC-SHA256-PAYLOAD",xl="UNSIGNED-PAYLOAD",Gd=50,Na="aws4_request",jd=60*60*24*7,Ta={},Za=[],Js=r((y,C,A)=>`${y}/${C}/${A}/${Na}`,"createScope"),fa=r(async(y,C,A,M,W)=>{const Z=await Bl(y,C.secretAccessKey,C.accessKeyId),ye=`${A}:${M}:${W}:${zo(Z)}:${C.sessionToken}`;if(ye in Ta)return Ta[ye];for(Za.push(ye);Za.length>Gd;)delete Ta[Za.shift()];let Ie=`AWS4${C.secretAccessKey}`;for(const We of[A,M,W,Na])Ie=await Bl(y,Ie,We);return Ta[ye]=Ie},"getSigningKey"),$d=r(()=>{Za.length=0,Object.keys(Ta).forEach(y=>{delete Ta[y]})},"clearCredentialCache"),Bl=r((y,C,A)=>{const M=new y(C);return M.update(Wr(A)),M.digest()},"hmac"),Fa=r(({headers:y},C,A)=>{const M={};for(const W of Object.keys(y).sort()){if(y[W]==null)continue;const Z=W.toLowerCase();(Z in Ks||C!=null&&C.has(Z)||kc.test(Z)||Ll.test(Z))&&(!A||A&&!A.has(Z))||(M[Z]=y[W].trim().replace(/\s+/g," "))}return M},"getCanonicalHeaders"),Ul=r(({query:y={}})=>{const C=[],A={};for(const M of Object.keys(y)){if(M.toLowerCase()===to)continue;const W=go(M);C.push(W);const Z=y[M];typeof Z=="string"?A[W]=`${W}=${go(Z)}`:Array.isArray(Z)&&(A[W]=Z.slice(0).reduce((ye,Ie)=>ye.concat([`${W}=${go(Ie)}`]),[]).sort().join("&"))}return C.sort().map(M=>A[M]).filter(M=>M).join("&")},"getCanonicalQuery"),jr=r(y=>typeof ArrayBuffer=="function"&&y instanceof ArrayBuffer||Object.prototype.toString.call(y)==="[object ArrayBuffer]","isArrayBuffer"),hs=r(async({headers:y,body:C},A)=>{for(const M of Object.keys(y))if(M.toLowerCase()===ds)return y[M];if(C==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof C=="string"||ArrayBuffer.isView(C)||jr(C)){const M=new A;return M.update(Wr(C)),zo(await M.digest())}return xl},"getPayloadHash");class Br{format(C){const A=[];for(const Z of Object.keys(C)){const ye=dr(Z);A.push(Uint8Array.from([ye.byteLength]),ye,this.formatHeaderValue(C[Z]))}const M=new Uint8Array(A.reduce((Z,ye)=>Z+ye.byteLength,0));let W=0;for(const Z of A)M.set(Z,W),W+=Z.byteLength;return M}formatHeaderValue(C){switch(C.type){case"boolean":return Uint8Array.from([C.value?0:1]);case"byte":return Uint8Array.from([2,C.value]);case"short":const A=new DataView(new ArrayBuffer(3));return A.setUint8(0,3),A.setInt16(1,C.value,!1),new Uint8Array(A.buffer);case"integer":const M=new DataView(new ArrayBuffer(5));return M.setUint8(0,4),M.setInt32(1,C.value,!1),new Uint8Array(M.buffer);case"long":const W=new Uint8Array(9);return W[0]=5,W.set(C.value.bytes,1),W;case"binary":const Z=new DataView(new ArrayBuffer(3+C.value.byteLength));Z.setUint8(0,6),Z.setUint16(1,C.value.byteLength,!1);const ye=new Uint8Array(Z.buffer);return ye.set(C.value,3),ye;case"string":const Ie=dr(C.value),We=new DataView(new ArrayBuffer(3+Ie.byteLength));We.setUint8(0,7),We.setUint16(1,Ie.byteLength,!1);const Le=new Uint8Array(We.buffer);return Le.set(Ie,3),Le;case"timestamp":const St=new Uint8Array(9);return St[0]=8,St.set(xs.fromNumber(C.value.valueOf()).bytes,1),St;case"uuid":if(!$r.test(C.value))throw new Error(`Invalid UUID received: ${C.value}`);const Et=new Uint8Array(17);return Et[0]=9,Et.set(Xo(C.value.replace(/\-/g,"")),1),Et}}}r(Br,"HeaderFormatter");var yo;(function(y){y[y.boolTrue=0]="boolTrue",y[y.boolFalse=1]="boolFalse",y[y.byte=2]="byte",y[y.short=3]="short",y[y.integer=4]="integer",y[y.long=5]="long",y[y.byteArray=6]="byteArray",y[y.string=7]="string",y[y.timestamp=8]="timestamp",y[y.uuid=9]="uuid"})(yo||(yo={}));const $r=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class xs{constructor(C){if(this.bytes=C,C.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(C){if(C>9223372036854776e3||C<-9223372036854776e3)throw new Error(`${C} is too large (or, if negative, too small) to represent as an Int64`);const A=new Uint8Array(8);for(let M=7,W=Math.abs(Math.round(C));M>-1&&W>0;M--,W/=256)A[M]=W;return C<0&&Kd(A),new xs(A)}valueOf(){const C=this.bytes.slice(0),A=C[0]&128;return A&&Kd(C),parseInt(zo(C),16)*(A?-1:1)}toString(){return String(this.valueOf())}}r(xs,"Int64");function Kd(y){for(let C=0;C<8;C++)y[C]^=255;for(let C=7;C>-1&&(y[C]++,y[C]===0);C--);}r(Kd,"negate");const Kh=r((y,C)=>{y=y.toLowerCase();for(const A of Object.keys(C))if(y===A.toLowerCase())return!0;return!1},"hasHeader"),VS=r((y,C)=>{y=y.toLowerCase();for(const A of Object.keys(C))if(y===A.toLowerCase())return C[A]},"getHeaderValue"),HS=r((y,C)=>{y=y.toLowerCase();for(const A of Object.keys(C))y===A.toLowerCase()&&delete C[A]},"deleteHeader"),Jh=r((y,C={})=>{var W,Z;const{headers:A,query:M={}}=v.clone(y);for(const ye of Object.keys(A)){const Ie=ye.toLowerCase();(Ie.slice(0,6)==="x-amz-"&&!((W=C.unhoistableHeaders)!=null&&W.has(Ie))||(Z=C.hoistableHeaders)!=null&&Z.has(Ie))&&(M[ye]=A[ye],delete A[ye])}return{...y,headers:A,query:M}},"moveHeadersToQuery"),Pu=r(y=>{y=v.clone(y);for(const C of Object.keys(y.headers))ss.indexOf(C.toLowerCase())>-1&&delete y.headers[C];return y},"prepareRequest"),Yh=r(y=>Xh(y).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),Xh=r(y=>typeof y=="number"?new Date(y*1e3):typeof y=="string"?Number(y)?new Date(Number(y)*1e3):new Date(y):y,"toDate");class Lc{constructor({applyChecksum:C,credentials:A,region:M,service:W,sha256:Z,uriEscapePath:ye=!0}){this.headerFormatter=new Br,this.service=W,this.sha256=Z,this.uriEscapePath=ye,this.applyChecksum=typeof C=="boolean"?C:!0,this.regionProvider=Hn(M),this.credentialProvider=Hn(A)}async presign(C,A={}){const{signingDate:M=new Date,expiresIn:W=3600,unsignableHeaders:Z,unhoistableHeaders:ye,signableHeaders:Ie,hoistableHeaders:We,signingRegion:Le,signingService:St}=A,Et=await this.credentialProvider();this.validateResolvedCredentials(Et);const xt=Le??await this.regionProvider(),{longDate:Gt,shortDate:Dn}=Jd(M);if(W>jd)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const ui=Js(Dn,xt,St??this.service),Ln=Jh(Pu(C),{unhoistableHeaders:ye,hoistableHeaders:We});Et.sessionToken&&(Ln.query[Ni]=Et.sessionToken),Ln.query[zr]=La,Ln.query[vo]=`${Et.accessKeyId}/${ui}`,Ln.query[fr]=Gt,Ln.query[Dr]=W.toString(10);const Bi=Fa(Ln,Z,Ie);return Ln.query[Li]=ku(Bi),Ln.query[Ao]=await this.getSignature(Gt,ui,this.getSigningKey(Et,xt,Dn,St),this.createCanonicalRequest(Ln,Bi,await hs(C,this.sha256))),Ln}async sign(C,A){return typeof C=="string"?this.signString(C,A):C.headers&&C.payload?this.signEvent(C,A):C.message?this.signMessage(C,A):this.signRequest(C,A)}async signEvent({headers:C,payload:A},{signingDate:M=new Date,priorSignature:W,signingRegion:Z,signingService:ye}){const Ie=Z??await this.regionProvider(),{shortDate:We,longDate:Le}=Jd(M),St=Js(We,Ie,ye??this.service),Et=await hs({headers:{},body:A},this.sha256),xt=new this.sha256;xt.update(C);const Gt=zo(await xt.digest()),Dn=[Fl,Le,St,W,Gt,Et].join(`
`);return this.signString(Dn,{signingDate:M,signingRegion:Ie,signingService:ye})}async signMessage(C,{signingDate:A=new Date,signingRegion:M,signingService:W}){return this.signEvent({headers:this.headerFormatter.format(C.message.headers),payload:C.message.body},{signingDate:A,signingRegion:M,signingService:W,priorSignature:C.priorSignature}).then(ye=>({message:C.message,signature:ye}))}async signString(C,{signingDate:A=new Date,signingRegion:M,signingService:W}={}){const Z=await this.credentialProvider();this.validateResolvedCredentials(Z);const ye=M??await this.regionProvider(),{shortDate:Ie}=Jd(A),We=new this.sha256(await this.getSigningKey(Z,ye,Ie,W));return We.update(Wr(C)),zo(await We.digest())}async signRequest(C,{signingDate:A=new Date,signableHeaders:M,unsignableHeaders:W,signingRegion:Z,signingService:ye}={}){const Ie=await this.credentialProvider();this.validateResolvedCredentials(Ie);const We=Z??await this.regionProvider(),Le=Pu(C),{longDate:St,shortDate:Et}=Jd(A),xt=Js(Et,We,ye??this.service);Le.headers[Mo]=St,Ie.sessionToken&&(Le.headers[Uo]=Ie.sessionToken);const Gt=await hs(Le,this.sha256);!Kh(ds,Le.headers)&&this.applyChecksum&&(Le.headers[ds]=Gt);const Dn=Fa(Le,W,M),ui=await this.getSignature(St,xt,this.getSigningKey(Ie,We,Et,ye),this.createCanonicalRequest(Le,Dn,Gt));return Le.headers[co]=`${La} Credential=${Ie.accessKeyId}/${xt}, SignedHeaders=${ku(Dn)}, Signature=${ui}`,Le}createCanonicalRequest(C,A,M){const W=Object.keys(A).sort();return`${C.method}
${this.getCanonicalPath(C)}
${Ul(C)}
${W.map(Z=>`${Z}:${A[Z]}`).join(`
`)}

${W.join(";")}
${M}`}async createStringToSign(C,A,M){const W=new this.sha256;W.update(Wr(M));const Z=await W.digest();return`${La}
${C}
${A}
${zo(Z)}`}getCanonicalPath({path:C}){if(this.uriEscapePath){const A=[];for(const Z of C.split("/"))(Z==null?void 0:Z.length)!==0&&Z!=="."&&(Z===".."?A.pop():A.push(Z));const M=`${C!=null&&C.startsWith("/")?"/":""}${A.join("/")}${A.length>0&&(C!=null&&C.endsWith("/"))?"/":""}`;return go(M).replace(/%2F/g,"/")}return C}async getSignature(C,A,M,W){const Z=await this.createStringToSign(C,A,W),ye=new this.sha256(await M);return ye.update(Wr(Z)),zo(await ye.digest())}getSigningKey(C,A,M,W){return fa(this.sha256,C,M,A,W||this.service)}validateResolvedCredentials(C){if(typeof C!="object"||typeof C.accessKeyId!="string"||typeof C.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}r(Lc,"SignatureV4");const Jd=r(y=>{const C=Yh(y).replace(/[\-:]/g,"");return{longDate:C,shortDate:C.slice(0,8)}},"formatDate"),ku=r(y=>Object.keys(y).sort().join(";"),"getCanonicalHeaderList"),Qh=r(y=>{let C;y.credentials&&(C=Pt(y.credentials,xe,ut)),C||(y.credentialDefaultProvider?C=Yt(y.credentialDefaultProvider(Object.assign({},y,{parentClientConfig:y}))):C=r(async()=>{throw new Error("`credentials` is missing")},"normalizedCreds"));const{signingEscapePath:A=!0,systemClockOffset:M=y.systemClockOffset||0,sha256:W}=y;let Z;return y.signer?Z=Yt(y.signer):y.regionInfoProvider?Z=r(()=>Yt(y.region)().then(async ye=>[await y.regionInfoProvider(ye,{useFipsEndpoint:await y.useFipsEndpoint(),useDualstackEndpoint:await y.useDualstackEndpoint()})||{},ye]).then(ye=>{let[Ie,We]=ye;const{signingRegion:Le,signingService:St}=Ie;y.signingRegion=y.signingRegion||Le||We,y.signingName=y.signingName||St||y.serviceId;const Et={...y,credentials:C,region:y.signingRegion,service:y.signingName,sha256:W,uriEscapePath:A},xt=y.signerConstructor||Lc;return new xt(Et)}),"signer"):Z=r(async ye=>{ye=Object.assign({},{name:"sigv4",signingName:y.signingName||y.defaultSigningName,signingRegion:await Yt(y.region)(),properties:{}},ye);const Ie=ye.signingRegion,We=ye.signingName;y.signingRegion=y.signingRegion||Ie,y.signingName=y.signingName||We||y.serviceId;const Le={...y,credentials:C,region:y.signingRegion,service:y.signingName,sha256:W,uriEscapePath:A},St=y.signerConstructor||Lc;return new St(Le)},"signer"),{...y,systemClockOffset:M,signingEscapePath:A,credentials:C,signer:Z}},"resolveAwsSdkSigV4Config"),WS=null,Zh=r(async(y,C,A)=>({operation:Fn(C).operation,region:await Hn(y.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),"defaultChimeSDKMessagingHttpAuthSchemeParametersProvider");function qh(y){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"chime",region:y.region},propertiesExtractor:(C,A)=>({signingProperties:{config:C,context:A}})}}r(qh,"createAwsAuthSigv4HttpAuthOption");const ep=r(y=>{const C=[];switch(y.operation){default:C.push(qh(y))}return C},"defaultChimeSDKMessagingHttpAuthSchemeProvider"),tp=r(y=>({...Qh(y)}),"resolveHttpAuthSchemeConfig"),np=r(y=>{var C,A;return{...y,useDualstackEndpoint:(C=y.useDualstackEndpoint)!==null&&C!==void 0?C:!1,useFipsEndpoint:(A=y.useFipsEndpoint)!==null&&A!==void 0?A:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters"),tr={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var ip=d(7229287800),rp=d.n(ip);const op=r(y=>new TextEncoder().encode(y),"fromUtf8_browser_fromUtf8");var sp=typeof Buffer<"u"&&Buffer.from?function(y){return Buffer.from(y,"utf8")}:op;function Vl(y){return y instanceof Uint8Array?y:typeof y=="string"?sp(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}r(Vl,"convertToBuffer");function Nc(y){return typeof y=="string"?y.length===0:y.byteLength===0}r(Nc,"isEmptyData");var Lu={name:"SHA-256"},Nu={name:"HMAC",hash:Lu},ap=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const lp={};function Yd(){return typeof window<"u"?window:typeof self<"u"?self:lp}r(Yd,"locateWindow");var dp=function(){function y(C){this.toHash=new Uint8Array(0),this.secret=C,this.reset()}return r(y,"Sha256"),y.prototype.update=function(C){if(!Nc(C)){var A=Vl(C),M=new Uint8Array(this.toHash.byteLength+A.byteLength);M.set(this.toHash,0),M.set(A,this.toHash.byteLength),this.toHash=M}},y.prototype.digest=function(){var C=this;return this.key?this.key.then(function(A){return Yd().crypto.subtle.sign(Nu,A,C.toHash).then(function(M){return new Uint8Array(M)})}):Nc(this.toHash)?Promise.resolve(ap):Promise.resolve().then(function(){return Yd().crypto.subtle.digest(Lu,C.toHash)}).then(function(A){return Promise.resolve(new Uint8Array(A))})},y.prototype.reset=function(){var C=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(A,M){Yd().crypto.subtle.importKey("raw",Vl(C.secret),Nu,!1,["sign"]).then(A,M)}),this.key.catch(function(){}))},y}(),Fc=r(function(y,C){return Fc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,M){A.__proto__=M}||function(A,M){for(var W in M)Object.prototype.hasOwnProperty.call(M,W)&&(A[W]=M[W])},Fc(y,C)},"extendStatics");function cp(y,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");Fc(y,C);function A(){this.constructor=y}r(A,"__"),y.prototype=C===null?Object.create(C):(A.prototype=C.prototype,new A)}r(cp,"__extends");var xc=r(function(){return xc=Object.assign||r(function(C){for(var A,M=1,W=arguments.length;M<W;M++){A=arguments[M];for(var Z in A)Object.prototype.hasOwnProperty.call(A,Z)&&(C[Z]=A[Z])}return C},"__assign"),xc.apply(this,arguments)},"__assign");function up(y,C){var A={};for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&C.indexOf(M)<0&&(A[M]=y[M]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var W=0,M=Object.getOwnPropertySymbols(y);W<M.length;W++)C.indexOf(M[W])<0&&Object.prototype.propertyIsEnumerable.call(y,M[W])&&(A[M[W]]=y[M[W]]);return A}r(up,"__rest");function fp(y,C,A,M){var W=arguments.length,Z=W<3?C:M===null?M=Object.getOwnPropertyDescriptor(C,A):M,ye;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(y,C,A,M);else for(var Ie=y.length-1;Ie>=0;Ie--)(ye=y[Ie])&&(Z=(W<3?ye(Z):W>3?ye(C,A,Z):ye(C,A))||Z);return W>3&&Z&&Object.defineProperty(C,A,Z),Z}r(fp,"__decorate");function hp(y,C){return function(A,M){C(A,M,y)}}r(hp,"__param");function zS(y,C,A,M,W,Z){function ye(Bi){if(Bi!==void 0&&typeof Bi!="function")throw new TypeError("Function expected");return Bi}r(ye,"accept");for(var Ie=M.kind,We=Ie==="getter"?"get":Ie==="setter"?"set":"value",Le=!C&&y?M.static?y:y.prototype:null,St=C||(Le?Object.getOwnPropertyDescriptor(Le,M.name):{}),Et,xt=!1,Gt=A.length-1;Gt>=0;Gt--){var Dn={};for(var ui in M)Dn[ui]=ui==="access"?{}:M[ui];for(var ui in M.access)Dn.access[ui]=M.access[ui];Dn.addInitializer=function(Bi){if(xt)throw new TypeError("Cannot add initializers after decoration has completed");Z.push(ye(Bi||null))};var Ln=(0,A[Gt])(Ie==="accessor"?{get:St.get,set:St.set}:St[We],Dn);if(Ie==="accessor"){if(Ln===void 0)continue;if(Ln===null||typeof Ln!="object")throw new TypeError("Object expected");(Et=ye(Ln.get))&&(St.get=Et),(Et=ye(Ln.set))&&(St.set=Et),(Et=ye(Ln.init))&&W.unshift(Et)}else(Et=ye(Ln))&&(Ie==="field"?W.unshift(Et):St[We]=Et)}Le&&Object.defineProperty(Le,M.name,St),xt=!0}r(zS,"__esDecorate");function GS(y,C,A){for(var M=arguments.length>2,W=0;W<C.length;W++)A=M?C[W].call(y,A):C[W].call(y);return M?A:void 0}r(GS,"__runInitializers");function jS(y){return typeof y=="symbol"?y:"".concat(y)}r(jS,"__propKey");function $S(y,C,A){return typeof C=="symbol"&&(C=C.description?"[".concat(C.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:A?"".concat(A," ",C):C})}r($S,"__setFunctionName");function pp(y,C){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(y,C)}r(pp,"__metadata");function Fu(y,C,A,M){function W(Z){return Z instanceof A?Z:new A(function(ye){ye(Z)})}return r(W,"adopt"),new(A||(A=Promise))(function(Z,ye){function Ie(St){try{Le(M.next(St))}catch(Et){ye(Et)}}r(Ie,"fulfilled");function We(St){try{Le(M.throw(St))}catch(Et){ye(Et)}}r(We,"rejected");function Le(St){St.done?Z(St.value):W(St.value).then(Ie,We)}r(Le,"step"),Le((M=M.apply(y,C||[])).next())})}r(Fu,"tslib_es6_awaiter");function xu(y,C){var A={label:0,sent:function(){if(Z[0]&1)throw Z[1];return Z[1]},trys:[],ops:[]},M,W,Z,ye;return ye={next:Ie(0),throw:Ie(1),return:Ie(2)},typeof Symbol=="function"&&(ye[Symbol.iterator]=function(){return this}),ye;function Ie(Le){return function(St){return We([Le,St])}}function We(Le){if(M)throw new TypeError("Generator is already executing.");for(;ye&&(ye=0,Le[0]&&(A=0)),A;)try{if(M=1,W&&(Z=Le[0]&2?W.return:Le[0]?W.throw||((Z=W.return)&&Z.call(W),0):W.next)&&!(Z=Z.call(W,Le[1])).done)return Z;switch(W=0,Z&&(Le=[Le[0]&2,Z.value]),Le[0]){case 0:case 1:Z=Le;break;case 4:return A.label++,{value:Le[1],done:!1};case 5:A.label++,W=Le[1],Le=[0];continue;case 7:Le=A.ops.pop(),A.trys.pop();continue;default:if(Z=A.trys,!(Z=Z.length>0&&Z[Z.length-1])&&(Le[0]===6||Le[0]===2)){A=0;continue}if(Le[0]===3&&(!Z||Le[1]>Z[0]&&Le[1]<Z[3])){A.label=Le[1];break}if(Le[0]===6&&A.label<Z[1]){A.label=Z[1],Z=Le;break}if(Z&&A.label<Z[2]){A.label=Z[2],A.ops.push(Le);break}Z[2]&&A.ops.pop(),A.trys.pop();continue}Le=C.call(y,A)}catch(St){Le=[6,St],W=0}finally{M=Z=0}if(Le[0]&5)throw Le[1];return{value:Le[0]?Le[1]:void 0,done:!0}}}r(xu,"tslib_es6_generator");var Bc=Object.create?function(y,C,A,M){M===void 0&&(M=A);var W=Object.getOwnPropertyDescriptor(C,A);(!W||("get"in W?!C.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return C[A]}}),Object.defineProperty(y,M,W)}:function(y,C,A,M){M===void 0&&(M=A),y[M]=C[A]};function mp(y,C){for(var A in y)A!=="default"&&!Object.prototype.hasOwnProperty.call(C,A)&&Bc(C,y,A)}r(mp,"__exportStar");function Uc(y){var C=typeof Symbol=="function"&&Symbol.iterator,A=C&&y[C],M=0;if(A)return A.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&M>=y.length&&(y=void 0),{value:y&&y[M++],done:!y}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}r(Uc,"__values");function Bu(y,C){var A=typeof Symbol=="function"&&y[Symbol.iterator];if(!A)return y;var M=A.call(y),W,Z=[],ye;try{for(;(C===void 0||C-- >0)&&!(W=M.next()).done;)Z.push(W.value)}catch(Ie){ye={error:Ie}}finally{try{W&&!W.done&&(A=M.return)&&A.call(M)}finally{if(ye)throw ye.error}}return Z}r(Bu,"__read");function gp(){for(var y=[],C=0;C<arguments.length;C++)y=y.concat(Bu(arguments[C]));return y}r(gp,"__spread");function Sp(){for(var y=0,C=0,A=arguments.length;C<A;C++)y+=arguments[C].length;for(var M=Array(y),W=0,C=0;C<A;C++)for(var Z=arguments[C],ye=0,Ie=Z.length;ye<Ie;ye++,W++)M[W]=Z[ye];return M}r(Sp,"__spreadArrays");function vp(y,C,A){if(A||arguments.length===2)for(var M=0,W=C.length,Z;M<W;M++)(Z||!(M in C))&&(Z||(Z=Array.prototype.slice.call(C,0,M)),Z[M]=C[M]);return y.concat(Z||Array.prototype.slice.call(C))}r(vp,"__spreadArray");function Hl(y){return this instanceof Hl?(this.v=y,this):new Hl(y)}r(Hl,"__await");function yp(y,C,A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A.apply(y,C||[]),W,Z=[];return W={},ye("next"),ye("throw"),ye("return"),W[Symbol.asyncIterator]=function(){return this},W;function ye(xt){M[xt]&&(W[xt]=function(Gt){return new Promise(function(Dn,ui){Z.push([xt,Gt,Dn,ui])>1||Ie(xt,Gt)})})}function Ie(xt,Gt){try{We(M[xt](Gt))}catch(Dn){Et(Z[0][3],Dn)}}function We(xt){xt.value instanceof Hl?Promise.resolve(xt.value.v).then(Le,St):Et(Z[0][2],xt)}function Le(xt){Ie("next",xt)}function St(xt){Ie("throw",xt)}function Et(xt,Gt){xt(Gt),Z.shift(),Z.length&&Ie(Z[0][0],Z[0][1])}}r(yp,"__asyncGenerator");function _p(y){var C,A;return C={},M("next"),M("throw",function(W){throw W}),M("return"),C[Symbol.iterator]=function(){return this},C;function M(W,Z){C[W]=y[W]?function(ye){return(A=!A)?{value:Hl(y[W](ye)),done:!1}:Z?Z(ye):ye}:Z}}r(_p,"__asyncDelegator");function Ep(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=y[Symbol.asyncIterator],A;return C?C.call(y):(y=typeof Uc=="function"?Uc(y):y[Symbol.iterator](),A={},M("next"),M("throw"),M("return"),A[Symbol.asyncIterator]=function(){return this},A);function M(Z){A[Z]=y[Z]&&function(ye){return new Promise(function(Ie,We){ye=y[Z](ye),W(Ie,We,ye.done,ye.value)})}}function W(Z,ye,Ie,We){Promise.resolve(We).then(function(Le){Z({value:Le,done:Ie})},ye)}}r(Ep,"__asyncValues");function bp(y,C){return Object.defineProperty?Object.defineProperty(y,"raw",{value:C}):y.raw=C,y}r(bp,"__makeTemplateObject");var Cp=Object.create?function(y,C){Object.defineProperty(y,"default",{enumerable:!0,value:C})}:function(y,C){y.default=C};function Tp(y){if(y&&y.__esModule)return y;var C={};if(y!=null)for(var A in y)A!=="default"&&Object.prototype.hasOwnProperty.call(y,A)&&Bc(C,y,A);return Cp(C,y),C}r(Tp,"__importStar");function Ip(y){return y&&y.__esModule?y:{default:y}}r(Ip,"__importDefault");function wp(y,C,A,M){if(A==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof C=="function"?y!==C||!M:!C.has(y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?M:A==="a"?M.call(y):M?M.value:C.get(y)}r(wp,"__classPrivateFieldGet");function Ap(y,C,A,M,W){if(M==="m")throw new TypeError("Private method is not writable");if(M==="a"&&!W)throw new TypeError("Private accessor was defined without a setter");if(typeof C=="function"?y!==C||!W:!C.has(y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return M==="a"?W.call(y,A):W?W.value=A:C.set(y,A),A}r(Ap,"__classPrivateFieldSet");function Op(y,C){if(C===null||typeof C!="object"&&typeof C!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof y=="function"?C===y:y.has(C)}r(Op,"__classPrivateFieldIn");function Dp(y,C,A){if(C!=null){if(typeof C!="object"&&typeof C!="function")throw new TypeError("Object expected.");var M;if(A){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");M=C[Symbol.asyncDispose]}if(M===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");M=C[Symbol.dispose]}if(typeof M!="function")throw new TypeError("Object not disposable.");y.stack.push({value:C,dispose:M,async:A})}else A&&y.stack.push({async:!0});return C}r(Dp,"__addDisposableResource");var Rp=typeof SuppressedError=="function"?SuppressedError:function(y,C,A){var M=new Error(A);return M.name="SuppressedError",M.error=y,M.suppressed=C,M};function Mp(y){function C(M){y.error=y.hasError?new Rp(M,y.error,"An error was suppressed during disposal."):M,y.hasError=!0}r(C,"fail");function A(){for(;y.stack.length;){var M=y.stack.pop();try{var W=M.dispose&&M.dispose.call(M.value);if(M.async)return Promise.resolve(W).then(A,function(Z){return C(Z),A()})}catch(Z){C(Z)}}if(y.hasError)throw y.error}return r(A,"next"),A()}r(Mp,"__disposeResources");const KS={__extends:cp,__assign:xc,__rest:up,__decorate:fp,__param:hp,__metadata:pp,__awaiter:Fu,__generator:xu,__createBinding:Bc,__exportStar:mp,__values:Uc,__read:Bu,__spread:gp,__spreadArrays:Sp,__spreadArray:vp,__await:Hl,__asyncGenerator:yp,__asyncDelegator:_p,__asyncValues:Ep,__makeTemplateObject:bp,__importStar:Tp,__importDefault:Ip,__classPrivateFieldGet:wp,__classPrivateFieldSet:Ap,__classPrivateFieldIn:Op,__addDisposableResource:Dp,__disposeResources:Mp};var Bs=64,Pp=32,kp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lp=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Np=Math.pow(2,53)-1,Xd=function(){function y(){this.state=Int32Array.from(Lp),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r(y,"RawSha256"),y.prototype.update=function(C){if(this.finished)throw new Error("Attempted to update an already finished hash.");var A=0,M=C.byteLength;if(this.bytesHashed+=M,this.bytesHashed*8>Np)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;M>0;)this.buffer[this.bufferLength++]=C[A++],M--,this.bufferLength===Bs&&(this.hashBuffer(),this.bufferLength=0)},y.prototype.digest=function(){if(!this.finished){var C=this.bytesHashed*8,A=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),M=this.bufferLength;if(A.setUint8(this.bufferLength++,128),M%Bs>=Bs-8){for(var W=this.bufferLength;W<Bs;W++)A.setUint8(W,0);this.hashBuffer(),this.bufferLength=0}for(var W=this.bufferLength;W<Bs-8;W++)A.setUint8(W,0);A.setUint32(Bs-8,Math.floor(C/4294967296),!0),A.setUint32(Bs-4,C),this.hashBuffer(),this.finished=!0}for(var Z=new Uint8Array(Pp),W=0;W<8;W++)Z[W*4]=this.state[W]>>>24&255,Z[W*4+1]=this.state[W]>>>16&255,Z[W*4+2]=this.state[W]>>>8&255,Z[W*4+3]=this.state[W]>>>0&255;return Z},y.prototype.hashBuffer=function(){for(var C=this,A=C.buffer,M=C.state,W=M[0],Z=M[1],ye=M[2],Ie=M[3],We=M[4],Le=M[5],St=M[6],Et=M[7],xt=0;xt<Bs;xt++){if(xt<16)this.temp[xt]=(A[xt*4]&255)<<24|(A[xt*4+1]&255)<<16|(A[xt*4+2]&255)<<8|A[xt*4+3]&255;else{var Gt=this.temp[xt-2],Dn=(Gt>>>17|Gt<<15)^(Gt>>>19|Gt<<13)^Gt>>>10;Gt=this.temp[xt-15];var ui=(Gt>>>7|Gt<<25)^(Gt>>>18|Gt<<14)^Gt>>>3;this.temp[xt]=(Dn+this.temp[xt-7]|0)+(ui+this.temp[xt-16]|0)}var Ln=(((We>>>6|We<<26)^(We>>>11|We<<21)^(We>>>25|We<<7))+(We&Le^~We&St)|0)+(Et+(kp[xt]+this.temp[xt]|0)|0)|0,Bi=((W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10))+(W&Z^W&ye^Z&ye)|0;Et=St,St=Le,Le=We,We=Ie+Ln|0,Ie=ye,ye=Z,Z=W,W=Ln+Bi|0}M[0]+=W,M[1]+=Z,M[2]+=ye,M[3]+=Ie,M[4]+=We,M[5]+=Le,M[6]+=St,M[7]+=Et},y}(),Fp=function(){function y(C){this.secret=C,this.hash=new Xd,this.reset()}return r(y,"Sha256"),y.prototype.update=function(C){if(!(Nc(C)||this.error))try{this.hash.update(Vl(C))}catch(A){this.error=A}},y.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},y.prototype.digest=function(){return Fu(this,void 0,void 0,function(){return xu(this,function(C){return[2,this.digestSync()]})})},y.prototype.reset=function(){if(this.hash=new Xd,this.secret){this.outer=new Xd;var C=xp(this.secret),A=new Uint8Array(Bs);A.set(C);for(var M=0;M<Bs;M++)C[M]^=54,A[M]^=92;this.hash.update(C),this.outer.update(A);for(var M=0;M<C.byteLength;M++)C[M]=0}},y}();function xp(y){var C=Vl(y);if(C.byteLength>Bs){var A=new Xd;A.update(C),C=A.digest()}var M=new Uint8Array(Bs);return M.set(C),M}r(xp,"bufferFromSecret");var Bp=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Up(y){if(Vp(y)&&typeof y.crypto.subtle=="object"){var C=y.crypto.subtle;return Uu(C)}return!1}r(Up,"supportsWebCrypto");function Vp(y){if(typeof y=="object"&&typeof y.crypto=="object"){var C=y.crypto.getRandomValues;return typeof C=="function"}return!1}r(Vp,"supportsSecureRandom");function Uu(y){return y&&Bp.every(function(C){return typeof y[C]=="function"})}r(Uu,"supportsSubtleCrypto");function JS(y){return __awaiter(this,void 0,void 0,function(){var C,A,M;return __generator(this,function(W){switch(W.label){case 0:if(!Uu(y))return[2,!1];W.label=1;case 1:return W.trys.push([1,4,,5]),[4,y.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return C=W.sent(),[4,y.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},C,new Uint8Array(0))];case 3:return A=W.sent(),[2,A.byteLength===16];case 4:return M=W.sent(),[2,!1];case 5:return[2]}})})}r(JS,"supportsZeroByteGCM");var Hp=function(){function y(C){Up(Yd())?this.hash=new dp(C):this.hash=new Fp(C)}return r(y,"Sha256"),y.prototype.update=function(C,A){this.hash.update(Vl(C))},y.prototype.digest=function(){return this.hash.digest()},y.prototype.reset=function(){this.hash.reset()},y}(),Wp=d(1874409785),Vu=d.n(Wp);const zp=r(y=>{let{serviceId:C,clientVersion:A}=y;return async()=>{var M,W,Z,ye,Ie;const We=typeof window<"u"&&(!(window==null||(M=window.navigator)===null||M===void 0)&&M.userAgent)?Vu().parse(window.navigator.userAgent):void 0;var Le,St;const Et=[["aws-sdk-js",A],["ua","2.0"],[`os/${(We==null||(W=We.os)===null||W===void 0?void 0:W.name)||"other"}`,We==null||(Z=We.os)===null||Z===void 0?void 0:Z.version],["lang/js"],["md/browser",`${(Le=We==null||(ye=We.browser)===null||ye===void 0?void 0:ye.name)!==null&&Le!==void 0?Le:"unknown"}_${(St=We==null||(Ie=We.browser)===null||Ie===void 0?void 0:Ie.version)!==null&&St!==void 0?St:"unknown"}`]];return C&&Et.push([`api/${C}`,A]),Et}},"defaultUserAgent"),Gp=r(y=>()=>Promise.reject(y),"invalidProvider"),Hu=typeof TextEncoder=="function"?new TextEncoder:null,jp=r(y=>{if(typeof y=="string"){if(Hu)return Hu.encode(y).byteLength;let C=y.length;for(let A=C-1;A>=0;A--){const M=y.charCodeAt(A);M>127&&M<=2047?C++:M>2047&&M<=65535&&(C+=2),M>=56320&&M<=57343&&A--}return C}else{if(typeof y.byteLength=="number")return y.byteLength;if(typeof y.size=="number")return y.size}throw new Error(`Body Length computation failed for ${y}`)},"calculateBodyLength"),Wu=r(y=>new Date(Date.now()+y),"getSkewCorrectedDate");var Vc;const zu=r(y=>{var C,A;return E.isInstance(y)?(Vc=(C=y.headers)===null||C===void 0?void 0:C.date)!==null&&Vc!==void 0?Vc:(A=y.headers)===null||A===void 0?void 0:A.Date:void 0},"getDateHeader"),$p=r((y,C)=>Math.abs(Wu(C).getTime()-y)>=3e5,"isClockSkewed"),Gu=r((y,C)=>{const A=Date.parse(y);return $p(A,C)?A-Date.now():C},"getUpdatedSystemClockOffset"),Wl=r((y,C)=>{if(!C)throw new Error(`Property \`${y}\` is not resolved for AWS SDK SigV4Auth`);return C},"throwSigningPropertyError"),Kp=r(async y=>{var C,A,M;const W=Wl("context",y.context),Z=Wl("config",y.config),ye=(C=W.endpointV2)===null||C===void 0||(A=C.properties)===null||A===void 0||(M=A.authSchemes)===null||M===void 0?void 0:M[0],We=await Wl("signer",Z.signer)(ye),Le=y==null?void 0:y.signingRegion,St=y==null?void 0:y.signingRegionSet,Et=y==null?void 0:y.signingName;return{config:Z,signer:We,signingRegion:Le,signingRegionSet:St,signingName:Et}},"validateSigningProperties");class ju{async sign(C,A,M){var W;if(!v.isInstance(C))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const Z=await Kp(M),{config:ye,signer:Ie}=Z;let{signingRegion:We,signingName:Le}=Z;const St=M.context;var Et;if((Et=St==null||(W=St.authSchemes)===null||W===void 0?void 0:W.length)!==null&&Et!==void 0?Et:0>1){const[ui,Ln]=St.authSchemes;if((ui==null?void 0:ui.name)==="sigv4a"&&(Ln==null?void 0:Ln.name)==="sigv4"){var xt;We=(xt=Ln==null?void 0:Ln.signingRegion)!==null&&xt!==void 0?xt:We;var Gt;Le=(Gt=Ln==null?void 0:Ln.signingName)!==null&&Gt!==void 0?Gt:Le}}return await Ie.sign(C,{signingDate:Wu(ye.systemClockOffset),signingRegion:We,signingService:Le})}errorHandler(C){return A=>{var M;const W=(M=A.ServerTime)!==null&&M!==void 0?M:zu(A.$response);if(W){const Z=Wl("config",C.config),ye=Z.systemClockOffset;Z.systemClockOffset=Gu(W,Z.systemClockOffset),Z.systemClockOffset!==ye&&A.$metadata&&(A.$metadata.clockSkewCorrected=!0)}throw A}}successHandler(C,A){const M=zu(C);if(M){const W=Wl("config",A.config);W.systemClockOffset=Gu(M,W.systemClockOffset)}}}r(ju,"AwsSdkSigV4Signer");const YS=null,$u="required",ra="fn",oa="argv",qa="ref",Ku=!0,Ju="isSet",zl="booleanEquals",el="error",Gl="endpoint",ha="tree",Hc="PartitionResult",Yu={[$u]:!1,type:"String"},Xu={[$u]:!0,default:!1,type:"Boolean"},Qu={[qa]:"Endpoint"},Zu={[ra]:zl,[oa]:[{[qa]:"UseFIPS"},!0]},qu={[ra]:zl,[oa]:[{[qa]:"UseDualStack"},!0]},sa={},ef={[ra]:"getAttr",[oa]:[{[qa]:Hc},"supportsFIPS"]},tf={[ra]:zl,[oa]:[!0,{[ra]:"getAttr",[oa]:[{[qa]:Hc},"supportsDualStack"]}]},nf=[Zu],rf=[qu],of=[{[qa]:"Region"}],Jp={version:"1.0",parameters:{Region:Yu,UseDualStack:Xu,UseFIPS:Xu,Endpoint:Yu},rules:[{conditions:[{[ra]:Ju,[oa]:[Qu]}],rules:[{conditions:nf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:el},{conditions:rf,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:el},{endpoint:{url:Qu,properties:sa,headers:sa},type:Gl}],type:ha},{conditions:[{[ra]:Ju,[oa]:of}],rules:[{conditions:[{[ra]:"aws.partition",[oa]:of,assign:Hc}],rules:[{conditions:[Zu,qu],rules:[{conditions:[{[ra]:zl,[oa]:[Ku,ef]},tf],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:sa,headers:sa},type:Gl}],type:ha},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:el}],type:ha},{conditions:nf,rules:[{conditions:[{[ra]:zl,[oa]:[ef,Ku]}],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:sa,headers:sa},type:Gl}],type:ha},{error:"FIPS is enabled but this partition does not support FIPS",type:el}],type:ha},{conditions:rf,rules:[{conditions:[tf],rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:sa,headers:sa},type:Gl}],type:ha},{error:"DualStack is enabled but this partition does not support DualStack",type:el}],type:ha},{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:sa,headers:sa},type:Gl}],type:ha}],type:ha},{error:"Invalid Configuration: Missing Region",type:el}]},Yp=new Te({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Xp=r(function(y){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yp.get(y,()=>nt(Jp,{endpointParams:y,logger:C.logger}))},"defaultEndpointResolver");$e.aws=we;const Qp=r(y=>{var C,A,M,W,Z,ye,Ie,We,Le,St,Et,xt;return{apiVersion:"2021-05-15",base64Decoder:(C=y==null?void 0:y.base64Decoder)!==null&&C!==void 0?C:Bt,base64Encoder:(A=y==null?void 0:y.base64Encoder)!==null&&A!==void 0?A:cr,disableHostPrefix:(M=y==null?void 0:y.disableHostPrefix)!==null&&M!==void 0?M:!1,endpointProvider:(W=y==null?void 0:y.endpointProvider)!==null&&W!==void 0?W:Xp,extensions:(Z=y==null?void 0:y.extensions)!==null&&Z!==void 0?Z:[],httpAuthSchemeProvider:(ye=y==null?void 0:y.httpAuthSchemeProvider)!==null&&ye!==void 0?ye:ep,httpAuthSchemes:(Ie=y==null?void 0:y.httpAuthSchemes)!==null&&Ie!==void 0?Ie:[{schemeId:"aws.auth#sigv4",identityProvider:Gt=>Gt.getIdentityProvider("aws.auth#sigv4"),signer:new ju}],logger:(We=y==null?void 0:y.logger)!==null&&We!==void 0?We:new Ml,serviceId:(Le=y==null?void 0:y.serviceId)!==null&&Le!==void 0?Le:"Chime SDK Messaging",urlParser:(St=y==null?void 0:y.urlParser)!==null&&St!==void 0?St:Xn,utf8Decoder:(Et=y==null?void 0:y.utf8Decoder)!==null&&Et!==void 0?Et:dr,utf8Encoder:(xt=y==null?void 0:y.utf8Encoder)!==null&&xt!==void 0?xt:Xi}},"getRuntimeConfig");class jl extends Error{constructor(C,A=!0){var Z;let M,W=!0;typeof A=="boolean"?(M=void 0,W=A):A!=null&&typeof A=="object"&&(M=A.logger,W=A.tryNextLink??!0),super(C),this.name="ProviderError",this.tryNextLink=W,Object.setPrototypeOf(this,jl.prototype),(Z=M==null?void 0:M.debug)==null||Z.call(M,`@smithy/property-provider ${W?"->":"(!)"} ${C}`)}static from(C,A=!0){return Object.assign(new this(C.message,A),C)}}r(jl,"ProviderError_ProviderError");class Wc extends jl{constructor(C,A=!0){super(C,A),this.name="CredentialsProviderError",Object.setPrototypeOf(this,Wc.prototype)}}r(Wc,"CredentialsProviderError");class zc extends jl{constructor(C,A=!0){super(C,A),this.name="TokenProviderError",Object.setPrototypeOf(this,zc.prototype)}}r(zc,"TokenProviderError");const QS=r((...y)=>async()=>{if(y.length===0)throw new ProviderError("No providers in chain");let C;for(const A of y)try{return await A()}catch(M){if(C=M,M!=null&&M.tryNextLink)continue;throw M}throw C},"chain"),Zp=r((y,C,A)=>{let M,W,Z,ye=!1;const Ie=r(async()=>{W||(W=y());try{M=await W,Z=!0,ye=!1}finally{W=void 0}return M},"coalesceProvider");return C===void 0?async We=>((!Z||We!=null&&We.forceRefresh)&&(M=await Ie()),M):async We=>((!Z||We!=null&&We.forceRefresh)&&(M=await Ie()),ye?M:A&&!A(M)?(ye=!0,M):(C(M)&&await Ie(),M))},"memoize"),qp=["in-region","cross-region","mobile","standard","legacy"],em=r(({defaultsMode:y}={})=>Zp(async()=>{const C=typeof y=="function"?await y():y;switch(C==null?void 0:C.toLowerCase()){case"auto":return Promise.resolve(tm()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(C==null?void 0:C.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${qp.join(", ")}, got ${C}`)}}),"resolveDefaultsModeConfig"),tm=r(()=>{var A,M;const y=typeof window<"u"&&((A=window==null?void 0:window.navigator)!=null&&A.userAgent)?Vu().parse(window.navigator.userAgent):void 0,C=(M=y==null?void 0:y.platform)==null?void 0:M.type;return C==="tablet"||C==="mobile"},"isMobileBrowser"),nm=r(y=>{const C=em(y),A=r(()=>C().then(yc),"defaultConfigProvider"),M=Qp(y);var W,Z,ye,Ie,We,Le,St,Et,xt,Gt,Dn;return{...M,...y,runtime:"browser",defaultsMode:C,bodyLengthChecker:(W=y==null?void 0:y.bodyLengthChecker)!==null&&W!==void 0?W:jp,credentialDefaultProvider:(Z=y==null?void 0:y.credentialDefaultProvider)!==null&&Z!==void 0?Z:ui=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(ye=y==null?void 0:y.defaultUserAgentProvider)!==null&&ye!==void 0?ye:zp({serviceId:M.serviceId,clientVersion:rp().version}),maxAttempts:(Ie=y==null?void 0:y.maxAttempts)!==null&&Ie!==void 0?Ie:Dt,region:(We=y==null?void 0:y.region)!==null&&We!==void 0?We:Gp("Region is missing"),requestHandler:gs.create((Le=y==null?void 0:y.requestHandler)!==null&&Le!==void 0?Le:A),retryMode:(St=y==null?void 0:y.retryMode)!==null&&St!==void 0?St:async()=>(await A()).retryMode||pn,sha256:(Et=y==null?void 0:y.sha256)!==null&&Et!==void 0?Et:Hp,streamCollector:(xt=y==null?void 0:y.streamCollector)!==null&&xt!==void 0?xt:Ws,useDualstackEndpoint:(Gt=y==null?void 0:y.useDualstackEndpoint)!==null&&Gt!==void 0?Gt:()=>Promise.resolve(tn),useFipsEndpoint:(Dn=y==null?void 0:y.useFipsEndpoint)!==null&&Dn!==void 0?Dn:()=>Promise.resolve(ln)}},"runtimeConfig_browser_getRuntimeConfig"),im=r(y=>{let C=r(async()=>{if(y.region===void 0)throw new Error("Region is missing from runtimeConfig");const A=y.region;return typeof A=="string"?A:A()},"runtimeConfigRegion");return{setRegion(A){C=A},region(){return C}}},"getAwsRegionExtensionConfiguration"),rm=r(y=>({region:y.region()}),"resolveAwsRegionExtensionConfiguration"),om="AWS_REGION",sm="region",ZS={environmentVariableSelector:y=>y[om],configFileSelector:y=>y[sm],default:()=>{throw new Error("Region is missing")}},qS={preferredFile:"credentials"},am=r(y=>{const C=y.httpAuthSchemes;let A=y.httpAuthSchemeProvider,M=y.credentials;return{setHttpAuthScheme(W){const Z=C.findIndex(ye=>ye.schemeId===W.schemeId);Z===-1?C.push(W):C.splice(Z,1,W)},httpAuthSchemes(){return C},setHttpAuthSchemeProvider(W){A=W},httpAuthSchemeProvider(){return A},setCredentials(W){M=W},credentials(){return M}}},"getHttpAuthExtensionConfiguration"),lm=r(y=>({httpAuthSchemes:y.httpAuthSchemes(),httpAuthSchemeProvider:y.httpAuthSchemeProvider(),credentials:y.credentials()}),"resolveHttpAuthRuntimeConfig"),Qd=r(y=>y,"asPartial"),$l=r((y,C)=>{const A={...Qd(im(y)),...Qd(Tc(y)),...Qd(u(y)),...Qd(am(y))};return C.forEach(M=>M.configure(A)),{...y,...rm(A),...Ic(A),...h(A),...lm(A)}},"resolveRuntimeExtensions");class Es extends wn{destroy(){super.destroy()}constructor(...[C]){const A=nm(C||{}),M=np(A),W=ce(M),Z=Ge(W),ye=Lr(Z),Ie=ye,We=Eo(Ie),Le=tp(We),St=$l(Le,(C==null?void 0:C.extensions)||[]);super(St),this.config=St,this.middlewareStack.use(Mt(this.config)),this.middlewareStack.use(ka(this.config)),this.middlewareStack.use(Sr(this.config)),this.middlewareStack.use(O(this.config)),this.middlewareStack.use(R(this.config)),this.middlewareStack.use(ae(this.config)),this.middlewareStack.use(fo(this.config,{httpAuthSchemeParametersProvider:Zh,identityProviderConfigProvider:async Et=>new k({"aws.auth#sigv4":Et.credentials})})),this.middlewareStack.use(Pc(this.config))}}r(Es,"ChimeSDKMessagingClient");const dm=r((y,C)=>Go(y,C).then(A=>C.utf8Encoder(A)),"collectBodyString"),yr=r((y,C)=>dm(y,C).then(A=>{if(A.length)try{return JSON.parse(A)}catch(M){throw(M==null?void 0:M.name)==="SyntaxError"&&Object.defineProperty(M,"$responseBodyText",{value:A}),M}return{}}),"parseJsonBody"),cm=r(async(y,C)=>{const A=await yr(y,C);var M;return A.message=(M=A.message)!==null&&M!==void 0?M:A.Message,A},"parseJsonErrorBody"),um=r((y,C)=>{const A=r((Z,ye)=>Object.keys(Z).find(Ie=>Ie.toLowerCase()===ye.toLowerCase()),"findKey"),M=r(Z=>{let ye=Z;return typeof ye=="number"&&(ye=ye.toString()),ye.indexOf(",")>=0&&(ye=ye.split(",")[0]),ye.indexOf(":")>=0&&(ye=ye.split(":")[0]),ye.indexOf("#")>=0&&(ye=ye.split("#")[1]),ye},"sanitizeErrorCode"),W=A(y.headers,"x-amzn-errortype");if(W!==void 0)return M(y.headers[W]);if(C.code!==void 0)return M(C.code);if(C.__type!==void 0)return M(C.__type)},"loadRestJsonErrorCode");class ps extends $s{constructor(C){super(C),Object.setPrototypeOf(this,ps.prototype)}}r(ps,"ChimeSDKMessagingServiceException");const fm={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},hm={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},pm={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class Kl extends ps{constructor(C){super({name:"BadRequestException",$fault:"client",...C}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Kl.prototype),this.Code=C.Code,this.Message=C.Message}}r(Kl,"BadRequestException");class Jl extends ps{constructor(C){super({name:"ConflictException",$fault:"client",...C}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,Jl.prototype),this.Code=C.Code,this.Message=C.Message}}r(Jl,"ConflictException");class Yl extends ps{constructor(C){super({name:"ForbiddenException",$fault:"client",...C}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,Yl.prototype),this.Code=C.Code,this.Message=C.Message}}r(Yl,"ForbiddenException");class Xl extends ps{constructor(C){super({name:"NotFoundException",$fault:"client",...C}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,Xl.prototype),this.Code=C.Code,this.Message=C.Message}}r(Xl,"NotFoundException");class Ql extends ps{constructor(C){super({name:"ServiceFailureException",$fault:"server",...C}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,Ql.prototype),this.Code=C.Code,this.Message=C.Message}}r(Ql,"ServiceFailureException");class Zl extends ps{constructor(C){super({name:"ServiceUnavailableException",$fault:"server",...C}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,Zl.prototype),this.Code=C.Code,this.Message=C.Message}}r(Zl,"ServiceUnavailableException");class ql extends ps{constructor(C){super({name:"ThrottledClientException",$fault:"client",...C}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,ql.prototype),this.Code=C.Code,this.Message=C.Message}}r(ql,"ThrottledClientException");class ed extends ps{constructor(C){super({name:"UnauthorizedClientException",$fault:"client",...C}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,ed.prototype),this.Code=C.Code,this.Message=C.Message}}r(ed,"UnauthorizedClientException");class td extends ps{constructor(C){super({name:"ResourceLimitExceededException",$fault:"client",...C}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,td.prototype),this.Code=C.Code,this.Message=C.Message}}r(td,"ResourceLimitExceededException");const mm={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},gm={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},Sm={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},vm={ASYNC:"ASYNC"},ym={ABORT:"ABORT",CONTINUE:"CONTINUE"},_m={DEFAULT:"DEFAULT",VOIP:"VOIP"},Em={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},bm={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},Cm={CONTROL:"CONTROL",STANDARD:"STANDARD"},Tm={Channel:"Channel",ChannelMessage:"ChannelMessage"},Im={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},wm={MEMBERS:"MEMBERS"},Am={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},jo=r(y=>({...y,...y.Name&&{Name:yi}}),"IdentityFilterSensitiveLog"),sf=r(y=>({...y,...y.InvitedBy&&{InvitedBy:jo(y.InvitedBy)},...y.Members&&{Members:y.Members.map(C=>jo(C))}}),"BatchChannelMembershipsFilterSensitiveLog"),af=r(y=>({...y,...y.BatchChannelMemberships&&{BatchChannelMemberships:sf(y.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),lf=r(y=>({...y,...y.Name&&{Name:yi},...y.Metadata&&{Metadata:yi},...y.CreatedBy&&{CreatedBy:jo(y.CreatedBy)}}),"ChannelFilterSensitiveLog"),df=r(y=>({...y,...y.Name&&{Name:yi},...y.Metadata&&{Metadata:yi}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),cf=r(y=>({...y,...y.Member&&{Member:jo(y.Member)},...y.CreatedBy&&{CreatedBy:jo(y.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),uf=r(y=>({...y,...y.Member&&{Member:jo(y.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),nd=r(y=>({...y,...y.Name&&{Name:yi}}),"ProcessorFilterSensitiveLog"),ff=r(y=>({...y,...y.Processors&&{Processors:y.Processors.map(C=>nd(C))},...y.Name&&{Name:yi}}),"ChannelFlowFilterSensitiveLog"),id=r(y=>({...y,...y.StringValues&&{StringValues:yi}}),"MessageAttributeValueFilterSensitiveLog"),Gc=r(y=>({...y,...y.Title&&{Title:yi},...y.Body&&{Body:yi}}),"PushNotificationConfigurationFilterSensitiveLog"),hf=r(y=>({...y,...y.Content&&{Content:yi},...y.Metadata&&{Metadata:yi},...y.PushNotification&&{PushNotification:Gc(y.PushNotification)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((C,A)=>{let[M,W]=A;return C[M]=id(W),C},{})},...y.ContentType&&{ContentType:yi}}),"ChannelMessageCallbackFilterSensitiveLog"),pf=r(y=>({...y,...y.ChannelMessage&&{ChannelMessage:hf(y.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),mf=r(y=>({...y,...y.Name&&{Name:yi},...y.Processors&&{Processors:y.Processors.map(C=>nd(C))}}),"ChannelFlowSummaryFilterSensitiveLog"),gf=r(y=>({...y,...y.InvitedBy&&{InvitedBy:jo(y.InvitedBy)},...y.Member&&{Member:jo(y.Member)}}),"ChannelMembershipFilterSensitiveLog"),rd=r(y=>({...y,...y.Name&&{Name:yi},...y.Metadata&&{Metadata:yi}}),"ChannelSummaryFilterSensitiveLog"),jc=r(y=>({...y,...y.ChannelSummary&&{ChannelSummary:rd(y.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),Sf=r(y=>({...y,...y.FilterRule&&{FilterRule:yi}}),"PushNotificationPreferencesFilterSensitiveLog"),Zd=r(y=>({...y,...y.PushNotifications&&{PushNotifications:Sf(y.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),vf=r(y=>({...y,...y.Member&&{Member:jo(y.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),yf=r(y=>({...y,...y.Content&&{Content:yi},...y.Metadata&&{Metadata:yi},...y.Sender&&{Sender:jo(y.Sender)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((C,A)=>{let[M,W]=A;return C[M]=id(W),C},{})},...y.ContentType&&{ContentType:yi}}),"ChannelMessageFilterSensitiveLog"),_f=r(y=>({...y,...y.Content&&{Content:yi},...y.Metadata&&{Metadata:yi},...y.Sender&&{Sender:jo(y.Sender)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((C,A)=>{let[M,W]=A;return C[M]=id(W),C},{})},...y.ContentType&&{ContentType:yi}}),"ChannelMessageSummaryFilterSensitiveLog"),$c=r(y=>({...y,...y.ChannelSummary&&{ChannelSummary:rd(y.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),Ef=r(y=>({...y,...y.Moderator&&{Moderator:jo(y.Moderator)},...y.CreatedBy&&{CreatedBy:jo(y.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),bf=r(y=>({...y,...y.Moderator&&{Moderator:jo(y.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),od=r(y=>({...y,...y.Key&&{Key:yi},...y.Value&&{Value:yi}}),"TagFilterSensitiveLog"),Cf=r(y=>({...y,...y.Name&&{Name:yi},...y.Metadata&&{Metadata:yi},...y.ClientRequestToken&&{ClientRequestToken:yi},...y.Tags&&{Tags:y.Tags.map(C=>od(C))},...y.ChannelId&&{ChannelId:yi}}),"CreateChannelRequestFilterSensitiveLog"),Tf=r(y=>({...y,...y.Member&&{Member:jo(y.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),If=r(y=>({...y,...y.Processors&&{Processors:y.Processors.map(C=>nd(C))},...y.Name&&{Name:yi},...y.Tags&&{Tags:y.Tags.map(C=>od(C))},...y.ClientRequestToken&&{ClientRequestToken:yi}}),"CreateChannelFlowRequestFilterSensitiveLog"),wf=r(y=>({...y,...y.Member&&{Member:jo(y.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),Af=r(y=>({...y,...y.ChannelModerator&&{ChannelModerator:jo(y.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),Of=r(y=>({...y,...y.Channel&&{Channel:lf(y.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),Df=r(y=>({...y,...y.ChannelBan&&{ChannelBan:cf(y.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),Rf=r(y=>({...y,...y.ChannelFlow&&{ChannelFlow:ff(y.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),Mf=r(y=>({...y,...y.ChannelMembership&&{ChannelMembership:gf(y.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),Pf=r(y=>({...y,...y.ChannelMembership&&{ChannelMembership:jc(y.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),kf=r(y=>({...y,...y.Channel&&{Channel:$c(y.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),Lf=r(y=>({...y,...y.ChannelModerator&&{ChannelModerator:Ef(y.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),Nf=r(y=>({...y,...y.Member&&{Member:jo(y.Member)},...y.Preferences&&{Preferences:Zd(y.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),Ff=r(y=>({...y,...y.ChannelMessage&&{ChannelMessage:yf(y.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),xf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelBansRequestFilterSensitiveLog"),Bf=r(y=>({...y,...y.NextToken&&{NextToken:yi},...y.ChannelBans&&{ChannelBans:y.ChannelBans.map(C=>uf(C))}}),"ListChannelBansResponseFilterSensitiveLog"),Uf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelFlowsRequestFilterSensitiveLog"),Vf=r(y=>({...y,...y.ChannelFlows&&{ChannelFlows:y.ChannelFlows.map(C=>mf(C))},...y.NextToken&&{NextToken:yi}}),"ListChannelFlowsResponseFilterSensitiveLog"),Hf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelMembershipsRequestFilterSensitiveLog"),Wf=r(y=>({...y,...y.ChannelMemberships&&{ChannelMemberships:y.ChannelMemberships.map(C=>vf(C))},...y.NextToken&&{NextToken:yi}}),"ListChannelMembershipsResponseFilterSensitiveLog"),zf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),Gf=r(y=>({...y,...y.ChannelMemberships&&{ChannelMemberships:y.ChannelMemberships.map(C=>jc(C))},...y.NextToken&&{NextToken:yi}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),jf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelMessagesRequestFilterSensitiveLog"),$f=r(y=>({...y,...y.NextToken&&{NextToken:yi},...y.ChannelMessages&&{ChannelMessages:y.ChannelMessages.map(C=>_f(C))}}),"ListChannelMessagesResponseFilterSensitiveLog"),Kf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelModeratorsRequestFilterSensitiveLog"),Jf=r(y=>({...y,...y.NextToken&&{NextToken:yi},...y.ChannelModerators&&{ChannelModerators:y.ChannelModerators.map(C=>bf(C))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),Yf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelsRequestFilterSensitiveLog"),Xf=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(C=>rd(C))},...y.NextToken&&{NextToken:yi}}),"ListChannelsResponseFilterSensitiveLog"),Qf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),Zf=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(C=>df(C))},...y.NextToken&&{NextToken:yi}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),qf=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),eh=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(C=>$c(C))},...y.NextToken&&{NextToken:yi}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),th=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListSubChannelsRequestFilterSensitiveLog"),nh=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"ListSubChannelsResponseFilterSensitiveLog"),ih=r(y=>({...y,...y.Tags&&{Tags:y.Tags.map(C=>od(C))}}),"ListTagsForResourceResponseFilterSensitiveLog"),rh=r(y=>({...y,...y.Preferences&&{Preferences:Zd(y.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),oh=r(y=>({...y,...y.Member&&{Member:jo(y.Member)},...y.Preferences&&{Preferences:Zd(y.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),sh=r(y=>({...y,...y.NextToken&&{NextToken:yi}}),"SearchChannelsRequestFilterSensitiveLog"),ah=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(C=>rd(C))},...y.NextToken&&{NextToken:yi}}),"SearchChannelsResponseFilterSensitiveLog"),lh=r(y=>({...y,...y.Content&&{Content:yi},...y.Metadata&&{Metadata:yi},...y.ClientRequestToken&&{ClientRequestToken:yi},...y.PushNotification&&{PushNotification:Gc(y.PushNotification)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((C,A)=>{let[M,W]=A;return C[M]=id(W),C},{})},...y.ContentType&&{ContentType:yi}}),"SendChannelMessageRequestFilterSensitiveLog"),dh=r(y=>({...y,...y.Tags&&{Tags:y.Tags.map(C=>od(C))}}),"TagResourceRequestFilterSensitiveLog"),ch=r(y=>({...y,...y.TagKeys&&{TagKeys:yi}}),"UntagResourceRequestFilterSensitiveLog"),uh=r(y=>({...y,...y.Name&&{Name:yi},...y.Metadata&&{Metadata:yi}}),"UpdateChannelRequestFilterSensitiveLog"),fh=r(y=>({...y,...y.Processors&&{Processors:y.Processors.map(C=>nd(C))},...y.Name&&{Name:yi}}),"UpdateChannelFlowRequestFilterSensitiveLog"),hh=r(y=>({...y,...y.Content&&{Content:yi},...y.Metadata&&{Metadata:yi},...y.ContentType&&{ContentType:yi}}),"UpdateChannelMessageRequestFilterSensitiveLog"),Om=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/channel-flow"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return W=JSON.stringify(ii(y,{ChannelFlowArn:[]})),A.m("PUT").h(M).b(W),A.build()},"se_AssociateChannelFlowCommand"),Dm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/memberships"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Ua]:[,"batch-create"]});let Z;return Z=JSON.stringify(ii(y,{MemberArns:ye=>bi(ye),SubChannelId:[],Type:[]})),A.m("POST").h(M).q(W).b(Z),A.build()},"se_BatchCreateChannelMembershipCommand"),Rm=r(async(y,C)=>{const A=Ut(y,C),M={"content-type":"application/json"};A.bp("/channels/{ChannelArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Ua]:[,"channel-flow-callback"]});let Z;return Z=JSON.stringify(ii(y,{CallbackId:[!0,ye=>ye??Ho()],ChannelMessage:ye=>bi(ye),DeleteResource:[]})),A.m("POST").h(M).q(W).b(Z),A.build()},"se_ChannelFlowCallbackCommand"),Mm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels");let W;return W=JSON.stringify(ii(y,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,Z=>Z??Ho()],ElasticChannelConfiguration:Z=>bi(Z),ExpirationSettings:Z=>bi(Z),MemberArns:Z=>bi(Z),Metadata:[],Mode:[],ModeratorArns:Z=>bi(Z),Name:[],Privacy:[],Tags:Z=>bi(Z)})),A.m("POST").h(M).b(W),A.build()},"se_CreateChannelCommand"),Pm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/bans"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return W=JSON.stringify(ii(y,{MemberArn:[]})),A.m("POST").h(M).b(W),A.build()},"se_CreateChannelBanCommand"),km=r(async(y,C)=>{const A=Ut(y,C),M={"content-type":"application/json"};A.bp("/channel-flows");let W;return W=JSON.stringify(ii(y,{AppInstanceArn:[],ClientRequestToken:[!0,Z=>Z??Ho()],Name:[],Processors:Z=>bi(Z),Tags:Z=>bi(Z)})),A.m("POST").h(M).b(W),A.build()},"se_CreateChannelFlowCommand"),Lm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/memberships"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return W=JSON.stringify(ii(y,{MemberArn:[],SubChannelId:[],Type:[]})),A.m("POST").h(M).b(W),A.build()},"se_CreateChannelMembershipCommand"),Nm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/moderators"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return W=JSON.stringify(ii(y,{ChannelModeratorArn:[]})),A.m("POST").h(M).b(W),A.build()},"se_CreateChannelModeratorCommand"),Fm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return A.m("DELETE").h(M).b(W),A.build()},"se_DeleteChannelCommand"),xm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/bans/{MemberArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let W;return A.m("DELETE").h(M).b(W),A.build()},"se_DeleteChannelBanCommand"),Bm=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/channel-flows/{ChannelFlowArn}"),A.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let W;return A.m("DELETE").h(M).b(W),A.build()},"se_DeleteChannelFlowCommand"),Um=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);const W=un({[ma]:[,y[pa]]});let Z;return A.m("DELETE").h(M).q(W).b(Z),A.build()},"se_DeleteChannelMembershipCommand"),Vm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/messages/{MessageId}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const W=un({[ma]:[,y[pa]]});let Z;return A.m("DELETE").h(M).q(W).b(Z),A.build()},"se_DeleteChannelMessageCommand"),Hm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("ChannelModeratorArn",()=>y.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let W;return A.m("DELETE").h(M).b(W),A.build()},"se_DeleteChannelModeratorCommand"),Wm=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),A.p("AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let W;return A.m("DELETE").h(M).b(W),A.build()},"se_DeleteMessagingStreamingConfigurationsCommand"),zm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return A.m("GET").h(M).b(W),A.build()},"se_DescribeChannelCommand"),Gm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/bans/{MemberArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let W;return A.m("GET").h(M).b(W),A.build()},"se_DescribeChannelBanCommand"),jm=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/channel-flows/{ChannelFlowArn}"),A.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let W;return A.m("GET").h(M).b(W),A.build()},"se_DescribeChannelFlowCommand"),$m=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);const W=un({[ma]:[,y[pa]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_DescribeChannelMembershipCommand"),Km=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Va]:[,"app-instance-user-membership"],[ld]:[,qe(y[aa],"AppInstanceUserArn")]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_DescribeChannelMembershipForAppInstanceUserCommand"),Jm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Va]:[,"app-instance-user-moderated-channel"],[ld]:[,qe(y[aa],"AppInstanceUserArn")]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_DescribeChannelModeratedByAppInstanceUserCommand"),Ym=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("ChannelModeratorArn",()=>y.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let W;return A.m("GET").h(M).b(W),A.build()},"se_DescribeChannelModeratorCommand"),Xm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let W;return A.m("DELETE").h(M).b(W),A.build()},"se_DisassociateChannelFlowCommand"),Qm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let W;return A.m("GET").h(M).b(W),A.build()},"se_GetChannelMembershipPreferencesCommand"),Zm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/messages/{MessageId}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const W=un({[ma]:[,y[pa]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_GetChannelMessageCommand"),qm=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/messages/{MessageId}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const W=un({[Va]:[,"message-status"],[ma]:[,y[pa]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_GetChannelMessageStatusCommand"),eg=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/endpoints/messaging-session");let W;return A.m("GET").h(M).b(W),A.build()},"se_GetMessagingSessionEndpointCommand"),tg=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),A.p("AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let W;return A.m("GET").h(M).b(W),A.build()},"se_GetMessagingStreamingConfigurationsCommand"),ng=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/bans"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelBansCommand"),ig=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/channel-flows");const W=un({[Cs]:[,qe(y[Ms],"AppInstanceArn")],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelFlowsCommand"),rg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/memberships"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Ha]:[,y[du]],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]],[ma]:[,y[pa]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelMembershipsCommand"),og=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels");const W=un({[Va]:[,"app-instance-user-memberships"],[ld]:[,y[aa]],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelMembershipsForAppInstanceUserCommand"),sg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/messages"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Ah]:[,y[oc]],[fu]:[()=>y.NotBefore!==void 0,()=>Fs(y[rl]).toString()],[uu]:[()=>y.NotAfter!==void 0,()=>Fs(y[bh]).toString()],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]],[ma]:[,y[pa]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelMessagesCommand"),ag=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/moderators"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelModeratorsCommand"),lg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels");const W=un({[Cs]:[,qe(y[Ms],"AppInstanceArn")],[wh]:[,y[Ch]],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelsCommand"),dg=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/channels");const W=un({[Va]:[,"channel-flow-associations"],[Ih]:[,qe(y[Eh],"ChannelFlowArn")],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelsAssociatedWithChannelFlowCommand"),cg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels");const W=un({[Va]:[,"app-instance-user-moderated-channels"],[ld]:[,y[aa]],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListChannelsModeratedByAppInstanceUserCommand"),ug=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/subchannels"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const W=un({[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListSubChannelsCommand"),fg=r(async(y,C)=>{const A=Ut(y,C),M={};A.bp("/tags");const W=un({[cu]:[,qe(y[Th],"ResourceARN")]});let Z;return A.m("GET").h(M).q(W).b(Z),A.build()},"se_ListTagsForResourceCommand"),hg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/expiration-settings"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return W=JSON.stringify(ii(y,{ExpirationSettings:Z=>bi(Z)})),A.m("PUT").h(M).b(W),A.build()},"se_PutChannelExpirationSettingsCommand"),ph=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let W;return W=JSON.stringify(ii(y,{Preferences:Z=>bi(Z)})),A.m("PUT").h(M).b(W),A.build()},"se_PutChannelMembershipPreferencesCommand"),pg=r(async(y,C)=>{const A=Ut(y,C),M={"content-type":"application/json"};A.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),A.p("AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let W;return W=JSON.stringify(ii(y,{StreamingConfigurations:Z=>bi(Z)})),A.m("PUT").h(M).b(W),A.build()},"se_PutMessagingStreamingConfigurationsCommand"),mg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/messages/{MessageId}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const W=un({[Ua]:[,"redact"]});let Z;return Z=JSON.stringify(ii(y,{SubChannelId:[]})),A.m("POST").h(M).q(W).b(Z),A.build()},"se_RedactChannelMessageCommand"),gg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels");const W=un({[Ua]:[,"search"],[Ps]:[()=>y.MaxResults!==void 0,()=>y[bs].toString()],[ks]:[,y[ms]]});let Z;return Z=JSON.stringify(ii(y,{Fields:ye=>bi(ye)})),A.m("POST").h(M).q(W).b(Z),A.build()},"se_SearchChannelsCommand"),Sg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/messages"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return W=JSON.stringify(ii(y,{ClientRequestToken:[!0,Z=>Z??Ho()],Content:[],ContentType:[],MessageAttributes:Z=>bi(Z),Metadata:[],Persistence:[],PushNotification:Z=>bi(Z),SubChannelId:[],Target:Z=>bi(Z),Type:[]})),A.m("POST").h(M).b(W),A.build()},"se_SendChannelMessageCommand"),vg=r(async(y,C)=>{const A=Ut(y,C),M={"content-type":"application/json"};A.bp("/tags");const W=un({[Ua]:[,"tag-resource"]});let Z;return Z=JSON.stringify(ii(y,{ResourceARN:[],Tags:ye=>bi(ye)})),A.m("POST").h(M).q(W).b(Z),A.build()},"se_TagResourceCommand"),yg=r(async(y,C)=>{const A=Ut(y,C),M={"content-type":"application/json"};A.bp("/tags");const W=un({[Ua]:[,"untag-resource"]});let Z;return Z=JSON.stringify(ii(y,{ResourceARN:[],TagKeys:ye=>bi(ye)})),A.m("POST").h(M).q(W).b(Z),A.build()},"se_UntagResourceCommand"),_g=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return W=JSON.stringify(ii(y,{Metadata:[],Mode:[],Name:[]})),A.m("PUT").h(M).b(W),A.build()},"se_UpdateChannelCommand"),Eg=r(async(y,C)=>{const A=Ut(y,C),M={"content-type":"application/json"};A.bp("/channel-flows/{ChannelFlowArn}"),A.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let W;return W=JSON.stringify(ii(y,{Name:[],Processors:Z=>bi(Z)})),A.m("PUT").h(M).b(W),A.build()},"se_UpdateChannelFlowCommand"),bg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{"content-type":"application/json",[wr]:y[_r]});A.bp("/channels/{ChannelArn}/messages/{MessageId}"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),A.p("MessageId",()=>y.MessageId,"{MessageId}",!1);let W;return W=JSON.stringify(ii(y,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),A.m("PUT").h(M).b(W),A.build()},"se_UpdateChannelMessageCommand"),Cg=r(async(y,C)=>{const A=Ut(y,C),M=un({},Ar,{[wr]:y[_r]});A.bp("/channels/{ChannelArn}/readMarker"),A.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let W;return A.m("PUT").h(M).b(W),A.build()},"se_UpdateChannelReadMarkerCommand"),Tg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_AssociateChannelFlowCommand"),Ig=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{BatchChannelMemberships:bi,Errors:bi});return Object.assign(A,W),A},"de_BatchCreateChannelMembershipCommand"),wg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{CallbackId:at,ChannelArn:at});return Object.assign(A,W),A},"de_ChannelFlowCallbackCommand"),Ag=r(async(y,C)=>{if(y.statusCode!==201&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at});return Object.assign(A,W),A},"de_CreateChannelCommand"),Og=r(async(y,C)=>{if(y.statusCode!==201&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,Member:bi});return Object.assign(A,W),A},"de_CreateChannelBanCommand"),Dg=r(async(y,C)=>{if(y.statusCode!==201&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelFlowArn:at});return Object.assign(A,W),A},"de_CreateChannelFlowCommand"),Rg=r(async(y,C)=>{if(y.statusCode!==201&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,Member:bi,SubChannelId:at});return Object.assign(A,W),A},"de_CreateChannelMembershipCommand"),Mg=r(async(y,C)=>{if(y.statusCode!==201&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,ChannelModerator:bi});return Object.assign(A,W),A},"de_CreateChannelModeratorCommand"),Pg=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DeleteChannelCommand"),kg=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DeleteChannelBanCommand"),Lg=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DeleteChannelFlowCommand"),Ng=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DeleteChannelMembershipCommand"),Fg=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DeleteChannelMessageCommand"),xg=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DeleteChannelModeratorCommand"),Bg=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DeleteMessagingStreamingConfigurationsCommand"),Ug=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Channel:Z=>Qr(Z,C)});return Object.assign(A,W),A},"de_DescribeChannelCommand"),Vg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelBan:Z=>nu(Z,C)});return Object.assign(A,W),A},"de_DescribeChannelBanCommand"),Hg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelFlow:Z=>iu(Z,C)});return Object.assign(A,W),A},"de_DescribeChannelFlowCommand"),j=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelMembership:Z=>yh(Z,C)});return Object.assign(A,W),A},"de_DescribeChannelMembershipCommand"),Wg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelMembership:Z=>ru(Z,C)});return Object.assign(A,W),A},"de_DescribeChannelMembershipForAppInstanceUserCommand"),zg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Channel:Z=>ou(Z,C)});return Object.assign(A,W),A},"de_DescribeChannelModeratedByAppInstanceUserCommand"),Gg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelModerator:Z=>il(Z,C)});return Object.assign(A,W),A},"de_DescribeChannelModeratorCommand"),jg=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_DisassociateChannelFlowCommand"),$g=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,Member:bi,Preferences:bi});return Object.assign(A,W),A},"de_GetChannelMembershipPreferencesCommand"),Kg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelMessage:Z=>_h(Z,C)});return Object.assign(A,W),A},"de_GetChannelMessageCommand"),Jg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Status:bi});return Object.assign(A,W),A},"de_GetChannelMessageStatusCommand"),Yg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Endpoint:bi});return Object.assign(A,W),A},"de_GetMessagingSessionEndpointCommand"),Xg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{StreamingConfigurations:bi});return Object.assign(A,W),A},"de_GetMessagingStreamingConfigurationsCommand"),Qg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,ChannelBans:bi,NextToken:at});return Object.assign(A,W),A},"de_ListChannelBansCommand"),Zg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelFlows:bi,NextToken:at});return Object.assign(A,W),A},"de_ListChannelFlowsCommand"),qg=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,ChannelMemberships:bi,NextToken:at});return Object.assign(A,W),A},"de_ListChannelMembershipsCommand"),no=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelMemberships:Z=>nc(Z,C),NextToken:at});return Object.assign(A,W),A},"de_ListChannelMembershipsForAppInstanceUserCommand"),Hi=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,ChannelMessages:Z=>ic(Z,C),NextToken:at,SubChannelId:at});return Object.assign(A,W),A},"de_ListChannelMessagesCommand"),qd=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,ChannelModerators:bi,NextToken:at});return Object.assign(A,W),A},"de_ListChannelModeratorsCommand"),Kc=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Channels:Z=>au(Z,C),NextToken:at});return Object.assign(A,W),A},"de_ListChannelsCommand"),Ro=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Channels:bi,NextToken:at});return Object.assign(A,W),A},"de_ListChannelsAssociatedWithChannelFlowCommand"),Jc=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Channels:Z=>su(Z,C),NextToken:at});return Object.assign(A,W),A},"de_ListChannelsModeratedByAppInstanceUserCommand"),Po=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,NextToken:at,SubChannels:bi});return Object.assign(A,W),A},"de_ListSubChannelsCommand"),zt=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Tags:bi});return Object.assign(A,W),A},"de_ListTagsForResourceCommand"),Us=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,ExpirationSettings:bi});return Object.assign(A,W),A},"de_PutChannelExpirationSettingsCommand"),Yc=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,Member:bi,Preferences:bi});return Object.assign(A,W),A},"de_PutChannelMembershipPreferencesCommand"),Ur=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{StreamingConfigurations:bi});return Object.assign(A,W),A},"de_PutMessagingStreamingConfigurationsCommand"),cs=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,MessageId:at,SubChannelId:at});return Object.assign(A,W),A},"de_RedactChannelMessageCommand"),as=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{Channels:Z=>au(Z,C),NextToken:at});return Object.assign(A,W),A},"de_SearchChannelsCommand"),Xc=r(async(y,C)=>{if(y.statusCode!==201&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,MessageId:at,Status:bi,SubChannelId:at});return Object.assign(A,W),A},"de_SendChannelMessageCommand"),tl=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_TagResourceCommand"),Sn=r(async(y,C)=>{if(y.statusCode!==204&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)});return await Go(y.body,C),A},"de_UntagResourceCommand"),us=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at});return Object.assign(A,W),A},"de_UpdateChannelCommand"),mh=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelFlowArn:at});return Object.assign(A,W),A},"de_UpdateChannelFlowCommand"),gh=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at,MessageId:at,Status:bi,SubChannelId:at});return Object.assign(A,W),A},"de_UpdateChannelMessageCommand"),Qc=r(async(y,C)=>{if(y.statusCode!==200&&y.statusCode>=300)return Qi(y,C);const A=un({$metadata:Lt(y)}),M=qe(mt(await yr(y.body,C)),"body"),W=ii(M,{ChannelArn:at});return Object.assign(A,W),A},"de_UpdateChannelReadMarkerCommand"),Qi=r(async(y,C)=>{const A={...y,body:await cm(y.body,C)},M=um(y,A.body);switch(M){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await nl(A,C);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await ec(A,C);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await qc(A,C);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await eu(A,C);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Sh(A,C);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await vh(A,C);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await tu(A,C);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await sd(A,C);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await tc(A,C);default:const W=A.body;return Zc({output:y,parsedBody:W,errorCode:M})}},"de_CommandError"),Zc=Sc(ps),nl=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new Kl({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_BadRequestExceptionRes"),ec=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new Jl({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_ConflictExceptionRes"),qc=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new Yl({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_ForbiddenExceptionRes"),eu=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new Xl({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_NotFoundExceptionRes"),tc=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new td({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_ResourceLimitExceededExceptionRes"),Sh=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new Ql({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_ServiceFailureExceptionRes"),vh=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new Zl({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_ServiceUnavailableExceptionRes"),tu=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new ql({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_ThrottledClientExceptionRes"),sd=r(async(y,C)=>{const A=un({}),M=y.body,W=ii(M,{Code:at,Message:at});Object.assign(A,W);const Z=new ed({$metadata:Lt(y),...A});return _s(Z,y.body)},"de_UnauthorizedClientExceptionRes"),io=r((y,C)=>ii(y,{ReadMarkerTimestamp:A=>qe(So(te(A))),SubChannelId:at,Type:at}),"de_AppInstanceUserMembershipSummary"),Qr=r((y,C)=>ii(y,{ChannelArn:at,ChannelFlowArn:at,CreatedBy:bi,CreatedTimestamp:A=>qe(So(te(A))),ElasticChannelConfiguration:bi,ExpirationSettings:bi,LastMessageTimestamp:A=>qe(So(te(A))),LastUpdatedTimestamp:A=>qe(So(te(A))),Metadata:at,Mode:at,Name:at,Privacy:at}),"de_Channel"),nu=r((y,C)=>ii(y,{ChannelArn:at,CreatedBy:bi,CreatedTimestamp:A=>qe(So(te(A))),Member:bi}),"de_ChannelBan"),iu=r((y,C)=>ii(y,{ChannelFlowArn:at,CreatedTimestamp:A=>qe(So(te(A))),LastUpdatedTimestamp:A=>qe(So(te(A))),Name:at,Processors:bi}),"de_ChannelFlow"),yh=r((y,C)=>ii(y,{ChannelArn:at,CreatedTimestamp:A=>qe(So(te(A))),InvitedBy:bi,LastUpdatedTimestamp:A=>qe(So(te(A))),Member:bi,SubChannelId:at,Type:at}),"de_ChannelMembership"),ru=r((y,C)=>ii(y,{AppInstanceUserMembershipSummary:A=>io(A,C),ChannelSummary:A=>ad(A,C)}),"de_ChannelMembershipForAppInstanceUserSummary"),nc=r((y,C)=>(y||[]).filter(M=>M!=null).map(M=>ru(M,C)),"de_ChannelMembershipForAppInstanceUserSummaryList"),_h=r((y,C)=>ii(y,{ChannelArn:at,Content:at,ContentType:at,CreatedTimestamp:A=>qe(So(te(A))),LastEditedTimestamp:A=>qe(So(te(A))),LastUpdatedTimestamp:A=>qe(So(te(A))),MessageAttributes:bi,MessageId:at,Metadata:at,Persistence:at,Redacted:Ca,Sender:bi,Status:bi,SubChannelId:at,Target:bi,Type:at}),"de_ChannelMessage"),xa=r((y,C)=>ii(y,{Content:at,ContentType:at,CreatedTimestamp:A=>qe(So(te(A))),LastEditedTimestamp:A=>qe(So(te(A))),LastUpdatedTimestamp:A=>qe(So(te(A))),MessageAttributes:bi,MessageId:at,Metadata:at,Redacted:Ca,Sender:bi,Status:bi,Target:bi,Type:at}),"de_ChannelMessageSummary"),ic=r((y,C)=>(y||[]).filter(M=>M!=null).map(M=>xa(M,C)),"de_ChannelMessageSummaryList"),ou=r((y,C)=>ii(y,{ChannelSummary:A=>ad(A,C)}),"de_ChannelModeratedByAppInstanceUserSummary"),su=r((y,C)=>(y||[]).filter(M=>M!=null).map(M=>ou(M,C)),"de_ChannelModeratedByAppInstanceUserSummaryList"),il=r((y,C)=>ii(y,{ChannelArn:at,CreatedBy:bi,CreatedTimestamp:A=>qe(So(te(A))),Moderator:bi}),"de_ChannelModerator"),ad=r((y,C)=>ii(y,{ChannelArn:at,LastMessageTimestamp:A=>qe(So(te(A))),Metadata:at,Mode:at,Name:at,Privacy:at}),"de_ChannelSummary"),au=r((y,C)=>(y||[]).filter(M=>M!=null).map(M=>ad(M,C)),"de_ChannelSummaryList");var Ba,rc;const Lt=r(y=>({httpStatusCode:y.statusCode,requestId:(rc=(Ba=y.headers["x-amzn-requestid"])!==null&&Ba!==void 0?Ba:y.headers["x-amzn-request-id"])!==null&&rc!==void 0?rc:y.headers["x-amz-request-id"],extendedRequestId:y.headers["x-amz-id-2"],cfId:y.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),lu=r((y,C)=>collectBody(y,C).then(A=>C.utf8Encoder(A)),"Aws_restJson1_collectBodyString"),Ms="AppInstanceArn",aa="AppInstanceUserArn",_r="ChimeBearer",Eh="ChannelFlowArn",bs="MaxResults",bh="NotAfter",rl="NotBefore",ms="NextToken",Ch="Privacy",Th="ResourceARN",pa="SubChannelId",oc="SortOrder",du="Type",cu="arn",Cs="app-instance-arn",ld="app-instance-user-arn",Ih="channel-flow-arn",Ps="max-results",uu="not-after",fu="not-before",ks="next-token",Ua="operation",wh="privacy",Va="scope",ma="sub-channel-id",Ah="sort-order",Ha="type",wr="x-amz-chime-bearer";class sc extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","AssociateChannelFlow",{}).n("ChimeSDKMessagingClient","AssociateChannelFlowCommand").f(void 0,void 0).ser(Om).de(Tg).build(){}r(sc,"AssociateChannelFlowCommand");class dd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","BatchCreateChannelMembership",{}).n("ChimeSDKMessagingClient","BatchCreateChannelMembershipCommand").f(void 0,af).ser(Dm).de(Ig).build(){}r(dd,"BatchCreateChannelMembershipCommand");class Vs extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ChannelFlowCallback",{}).n("ChimeSDKMessagingClient","ChannelFlowCallbackCommand").f(pf,void 0).ser(Rm).de(wg).build(){}r(Vs,"ChannelFlowCallbackCommand");class ol extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelBan",{}).n("ChimeSDKMessagingClient","CreateChannelBanCommand").f(void 0,Tf).ser(Pm).de(Og).build(){}r(ol,"CreateChannelBanCommand");class sl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannel",{}).n("ChimeSDKMessagingClient","CreateChannelCommand").f(Cf,void 0).ser(Mm).de(Ag).build(){}r(sl,"CreateChannelCommand");class cd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelFlow",{}).n("ChimeSDKMessagingClient","CreateChannelFlowCommand").f(If,void 0).ser(km).de(Dg).build(){}r(cd,"CreateChannelFlowCommand");class Wa extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelMembership",{}).n("ChimeSDKMessagingClient","CreateChannelMembershipCommand").f(void 0,wf).ser(Lm).de(Rg).build(){}r(Wa,"CreateChannelMembershipCommand");class al extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelModerator",{}).n("ChimeSDKMessagingClient","CreateChannelModeratorCommand").f(void 0,Af).ser(Nm).de(Mg).build(){}r(al,"CreateChannelModeratorCommand");class Ia extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelBan",{}).n("ChimeSDKMessagingClient","DeleteChannelBanCommand").f(void 0,void 0).ser(xm).de(kg).build(){}r(Ia,"DeleteChannelBanCommand");class ll extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannel",{}).n("ChimeSDKMessagingClient","DeleteChannelCommand").f(void 0,void 0).ser(Fm).de(Pg).build(){}r(ll,"DeleteChannelCommand");class ud extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelFlow",{}).n("ChimeSDKMessagingClient","DeleteChannelFlowCommand").f(void 0,void 0).ser(Bm).de(Lg).build(){}r(ud,"DeleteChannelFlowCommand");class fd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelMembership",{}).n("ChimeSDKMessagingClient","DeleteChannelMembershipCommand").f(void 0,void 0).ser(Um).de(Ng).build(){}r(fd,"DeleteChannelMembershipCommand");class hd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelMessage",{}).n("ChimeSDKMessagingClient","DeleteChannelMessageCommand").f(void 0,void 0).ser(Vm).de(Fg).build(){}r(hd,"DeleteChannelMessageCommand");class pd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelModerator",{}).n("ChimeSDKMessagingClient","DeleteChannelModeratorCommand").f(void 0,void 0).ser(Hm).de(xg).build(){}r(pd,"DeleteChannelModeratorCommand");class md extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","DeleteMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(Wm).de(Bg).build(){}r(md,"DeleteMessagingStreamingConfigurationsCommand");class gd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelBan",{}).n("ChimeSDKMessagingClient","DescribeChannelBanCommand").f(void 0,Df).ser(Gm).de(Vg).build(){}r(gd,"DescribeChannelBanCommand");class ac extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannel",{}).n("ChimeSDKMessagingClient","DescribeChannelCommand").f(void 0,Of).ser(zm).de(Ug).build(){}r(ac,"DescribeChannelCommand");class dl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelFlow",{}).n("ChimeSDKMessagingClient","DescribeChannelFlowCommand").f(void 0,Rf).ser(jm).de(Hg).build(){}r(dl,"DescribeChannelFlowCommand");class cl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelMembership",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipCommand").f(void 0,Mf).ser($m).de(j).build(){}r(cl,"DescribeChannelMembershipCommand");class ga extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelMembershipForAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipForAppInstanceUserCommand").f(void 0,Pf).ser(Km).de(Wg).build(){}r(ga,"DescribeChannelMembershipForAppInstanceUserCommand");class ul extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratedByAppInstanceUserCommand").f(void 0,kf).ser(Jm).de(zg).build(){}r(ul,"DescribeChannelModeratedByAppInstanceUserCommand");class Sa extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelModerator",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratorCommand").f(void 0,Lf).ser(Ym).de(Gg).build(){}r(Sa,"DescribeChannelModeratorCommand");class fl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DisassociateChannelFlow",{}).n("ChimeSDKMessagingClient","DisassociateChannelFlowCommand").f(void 0,void 0).ser(Xm).de(jg).build(){}r(fl,"DisassociateChannelFlowCommand");class hl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","GetChannelMembershipPreferencesCommand").f(void 0,Nf).ser(Qm).de($g).build(){}r(hl,"GetChannelMembershipPreferencesCommand");class Sd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMessage",{}).n("ChimeSDKMessagingClient","GetChannelMessageCommand").f(void 0,Ff).ser(Zm).de(Kg).build(){}r(Sd,"GetChannelMessageCommand");class pl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMessageStatus",{}).n("ChimeSDKMessagingClient","GetChannelMessageStatusCommand").f(void 0,void 0).ser(qm).de(Jg).build(){}r(pl,"GetChannelMessageStatusCommand");class za extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetMessagingSessionEndpoint",{}).n("ChimeSDKMessagingClient","GetMessagingSessionEndpointCommand").f(void 0,void 0).ser(eg).de(Yg).build(){}r(za,"GetMessagingSessionEndpointCommand");class vd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","GetMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(tg).de(Xg).build(){}r(vd,"GetMessagingStreamingConfigurationsCommand");class ml extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelBans",{}).n("ChimeSDKMessagingClient","ListChannelBansCommand").f(xf,Bf).ser(ng).de(Qg).build(){}r(ml,"ListChannelBansCommand");class gl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelFlows",{}).n("ChimeSDKMessagingClient","ListChannelFlowsCommand").f(Uf,Vf).ser(ig).de(Zg).build(){}r(gl,"ListChannelFlowsCommand");class Sl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMemberships",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsCommand").f(Hf,Wf).ser(rg).de(qg).build(){}r(Sl,"ListChannelMembershipsCommand");class Qo extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMembershipsForAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsForAppInstanceUserCommand").f(zf,Gf).ser(og).de(no).build(){}r(Qo,"ListChannelMembershipsForAppInstanceUserCommand");class Ga extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMessages",{}).n("ChimeSDKMessagingClient","ListChannelMessagesCommand").f(jf,$f).ser(sg).de(Hi).build(){}r(Ga,"ListChannelMessagesCommand");class vl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelModerators",{}).n("ChimeSDKMessagingClient","ListChannelModeratorsCommand").f(Kf,Jf).ser(ag).de(qd).build(){}r(vl,"ListChannelModeratorsCommand");class yl extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelsAssociatedWithChannelFlow",{}).n("ChimeSDKMessagingClient","ListChannelsAssociatedWithChannelFlowCommand").f(Qf,Zf).ser(dg).de(Ro).build(){}r(yl,"ListChannelsAssociatedWithChannelFlowCommand");class va extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannels",{}).n("ChimeSDKMessagingClient","ListChannelsCommand").f(Yf,Xf).ser(lg).de(Kc).build(){}r(va,"ListChannelsCommand");class ja extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelsModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelsModeratedByAppInstanceUserCommand").f(qf,eh).ser(cg).de(Jc).build(){}r(ja,"ListChannelsModeratedByAppInstanceUserCommand");class Ys extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListSubChannels",{}).n("ChimeSDKMessagingClient","ListSubChannelsCommand").f(th,nh).ser(ug).de(Po).build(){}r(Ys,"ListSubChannelsCommand");class wa extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListTagsForResource",{}).n("ChimeSDKMessagingClient","ListTagsForResourceCommand").f(void 0,ih).ser(fg).de(zt).build(){}r(wa,"ListTagsForResourceCommand");class la extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutChannelExpirationSettings",{}).n("ChimeSDKMessagingClient","PutChannelExpirationSettingsCommand").f(void 0,void 0).ser(hg).de(Us).build(){}r(la,"PutChannelExpirationSettingsCommand");class yd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","PutChannelMembershipPreferencesCommand").f(rh,oh).ser(ph).de(Yc).build(){}r(yd,"PutChannelMembershipPreferencesCommand");class lc extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","PutMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(pg).de(Ur).build(){}r(lc,"PutMessagingStreamingConfigurationsCommand");class _d extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","RedactChannelMessage",{}).n("ChimeSDKMessagingClient","RedactChannelMessageCommand").f(void 0,void 0).ser(mg).de(cs).build(){}r(_d,"RedactChannelMessageCommand");class _l extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","SearchChannels",{}).n("ChimeSDKMessagingClient","SearchChannelsCommand").f(sh,ah).ser(gg).de(as).build(){}r(_l,"SearchChannelsCommand");class Ed extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","SendChannelMessage",{}).n("ChimeSDKMessagingClient","SendChannelMessageCommand").f(lh,void 0).ser(Sg).de(Xc).build(){}r(Ed,"SendChannelMessageCommand");class El extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","TagResource",{}).n("ChimeSDKMessagingClient","TagResourceCommand").f(dh,void 0).ser(vg).de(tl).build(){}r(El,"TagResourceCommand");class Aa extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UntagResource",{}).n("ChimeSDKMessagingClient","UntagResourceCommand").f(ch,void 0).ser(yg).de(Sn).build(){}r(Aa,"UntagResourceCommand");class bd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannel",{}).n("ChimeSDKMessagingClient","UpdateChannelCommand").f(uh,void 0).ser(_g).de(us).build(){}r(bd,"UpdateChannelCommand");class Cd extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelFlow",{}).n("ChimeSDKMessagingClient","UpdateChannelFlowCommand").f(fh,void 0).ser(Eg).de(mh).build(){}r(Cd,"UpdateChannelFlowCommand");class Td extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelMessage",{}).n("ChimeSDKMessagingClient","UpdateChannelMessageCommand").f(hh,void 0).ser(bg).de(gh).build(){}r(Td,"UpdateChannelMessageCommand");class Id extends mi.classBuilder().ep(tr).m(function(C,A,M,W){return[ei(M,this.serialize,this.deserialize),si(M,C.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelReadMarker",{}).n("ChimeSDKMessagingClient","UpdateChannelReadMarkerCommand").f(void 0,void 0).ser(Cg).de(Qc).build(){}r(Id,"UpdateChannelReadMarkerCommand");const le={AssociateChannelFlowCommand:sc,BatchCreateChannelMembershipCommand:dd,ChannelFlowCallbackCommand:Vs,CreateChannelCommand:sl,CreateChannelBanCommand:ol,CreateChannelFlowCommand:cd,CreateChannelMembershipCommand:Wa,CreateChannelModeratorCommand:al,DeleteChannelCommand:ll,DeleteChannelBanCommand:Ia,DeleteChannelFlowCommand:ud,DeleteChannelMembershipCommand:fd,DeleteChannelMessageCommand:hd,DeleteChannelModeratorCommand:pd,DeleteMessagingStreamingConfigurationsCommand:md,DescribeChannelCommand:ac,DescribeChannelBanCommand:gd,DescribeChannelFlowCommand:dl,DescribeChannelMembershipCommand:cl,DescribeChannelMembershipForAppInstanceUserCommand:ga,DescribeChannelModeratedByAppInstanceUserCommand:ul,DescribeChannelModeratorCommand:Sa,DisassociateChannelFlowCommand:fl,GetChannelMembershipPreferencesCommand:hl,GetChannelMessageCommand:Sd,GetChannelMessageStatusCommand:pl,GetMessagingSessionEndpointCommand:za,GetMessagingStreamingConfigurationsCommand:vd,ListChannelBansCommand:ml,ListChannelFlowsCommand:gl,ListChannelMembershipsCommand:Sl,ListChannelMembershipsForAppInstanceUserCommand:Qo,ListChannelMessagesCommand:Ga,ListChannelModeratorsCommand:vl,ListChannelsCommand:va,ListChannelsAssociatedWithChannelFlowCommand:yl,ListChannelsModeratedByAppInstanceUserCommand:ja,ListSubChannelsCommand:Ys,ListTagsForResourceCommand:wa,PutChannelExpirationSettingsCommand:la,PutChannelMembershipPreferencesCommand:yd,PutMessagingStreamingConfigurationsCommand:lc,RedactChannelMessageCommand:_d,SearchChannelsCommand:_l,SendChannelMessageCommand:Ed,TagResourceCommand:El,UntagResourceCommand:Aa,UpdateChannelCommand:bd,UpdateChannelFlowCommand:Cd,UpdateChannelMessageCommand:Td,UpdateChannelReadMarkerCommand:Id};class x extends Es{}r(x,"ChimeSDKMessaging"),ea(le,x);const V=Un(Es,ml,"NextToken","NextToken","MaxResults"),Q=Un(Es,gl,"NextToken","NextToken","MaxResults"),ge=Un(Es,Qo,"NextToken","NextToken","MaxResults"),be=Un(Es,Sl,"NextToken","NextToken","MaxResults"),Se=Un(Es,Ga,"NextToken","NextToken","MaxResults"),Fe=Un(Es,vl,"NextToken","NextToken","MaxResults"),Qe=Un(Es,yl,"NextToken","NextToken","MaxResults"),Ke=Un(Es,ja,"NextToken","NextToken","MaxResults"),ft=Un(Es,va,"NextToken","NextToken","MaxResults"),kt=Un(Es,Ys,"NextToken","NextToken","MaxResults"),Vt=Un(Es,_l,"NextToken","NextToken","MaxResults")},5527154335:(B,l,d)=>{"use strict";d.r(l),d.d(l,{fromHex:()=>p,toHex:()=>m});const u={},h={};for(let a=0;a<256;a++){let s=a.toString(16).toLowerCase();s.length===1&&(s=`0${s}`),u[a]=s,h[s]=a}function p(a){if(a.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const s=new Uint8Array(a.length/2);for(let i=0;i<a.length;i+=2){const e=a.slice(i,i+2).toLowerCase();if(e in h)s[i/2]=h[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return s}r(p,"fromHex");function m(a){let s="";for(let i=0;i<a.byteLength;i++)s+=u[a[i]];return s}r(m,"toHex")},5771355735:(B,l,d)=>{"use strict";d.r(l),d.d(l,{fromUtf8:()=>a,toUtf8:()=>s});const u=r(i=>{const e=[];for(let t=0,n=i.length;t<n;t++){const o=i.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<i.length&&(o&64512)===55296&&(i.charCodeAt(t+1)&64512)===56320){const f=65536+((o&1023)<<10)+(i.charCodeAt(++t)&1023);e.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},"fromUtf8"),h=r(i=>{let e="";for(let t=0,n=i.length;t<n;t++){const o=i[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){const f=i[++t];e+=String.fromCharCode((o&31)<<6|f&63)}else if(240<=o&&o<365){const g="%"+[o,i[++t],i[++t],i[++t]].map(S=>S.toString(16)).join("%");e+=decodeURIComponent(g)}else e+=String.fromCharCode((o&15)<<12|(i[++t]&63)<<6|i[++t]&63)}return e},"toUtf8");function p(i){return new TextEncoder().encode(i)}r(p,"whatwgEncodingApi_fromUtf8");function m(i){return new TextDecoder("utf-8").decode(i)}r(m,"whatwgEncodingApi_toUtf8");const a=r(i=>typeof TextEncoder=="function"?p(i):u(i),"dist_es_fromUtf8"),s=r(i=>typeof TextDecoder=="function"?m(i):h(i),"dist_es_toUtf8")},9618816399:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7080398225));let m=r(class{needUpdate(s){return this.activeSpeakers?this.speakerScores[s]===0&&this.activeSpeakers.includes(s)||this.speakerScores[s]>0&&!this.activeSpeakers.includes(s):!0}updateActiveSpeakers(s,i,e){if(!this.needUpdate(e))return;const t=[],n=Object.keys(this.speakerScores);for(let c=0;c<n.length;c++){const v=n[c];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((c,v)=>v.activeScore-c.activeScore).filter(function(c){return c.activeScore>0}).map(function(c){return c.attendeeId});this.activeSpeakers=o,i(o);const g=o.length>0&&o[0]===this.selfAttendeeId&&s.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==g&&(this.hasBandwidthPriority=g,this.hasBandwidthPriorityCallback(g))}updateScore(s,i,e,t,n){const o=s.calculateScore(e,t,n);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(s,i,e))}subscribe(s,i,e,t){const n=r((f,g)=>{if(!g){this.speakerScores[f]=0,this.mostRecentUpdateTimestamp[f]=Date.now(),this.updateActiveSpeakers(s,i,f);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(f,(S,c,v,_)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(s,i,S,c,v)})},"handler");this.detectorCallbackToHandler.set(i,n);const o=new p.default(this.updateIntervalMs);if(o.start(()=>{for(const f in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[f]>this.waitIntervalMs&&this.updateScore(s,i,f,0,this.speakerMuteState[f])}),this.detectorCallbackToActivityTimer.set(i,o),e&&t){const f=new p.default(t);f.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,f)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)}unsubscribe(s){const i=this.detectorCallbackToHandler.get(s);this.detectorCallbackToHandler.delete(s),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(s);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(s));const t=this.detectorCallbackToScoresTimer.get(s);t&&(t.stop(),this.detectorCallbackToHandler.delete(s))}destroy(){return u(this,void 0,void 0,function*(){for(const s of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s);for(const s of this.detectorCallbackToActivityTimer.values())s.stop();for(const s of this.detectorCallbackToScoresTimer.values())s.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(s,i,e,t=1e3,n=200){this.realtimeController=s,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=n,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=m},8734152567:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{calculateScore(h,p,m){(m||p===null)&&(p=0),this.volumes.hasOwnProperty(h)||(this.volumes[h]=0),p>this.silenceThreshold?p=1:p=0;const a=this.volumes[h]*this.speakerWeight+p*(1-this.speakerWeight);this.volumes[h]=a;for(const s in this.volumes)s!==h&&(this.volumes[s]=Math.max(this.volumes[s]-this.takeoverRate*p,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(h=.9,p=.01,m=.2,a=.2){this.speakerWeight=h,this.cutoffThreshold=p,this.silenceThreshold=m,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=d},2782081498:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class nS{static create(h,p){const m=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!h||h.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!m.test(h))throw new Error(`appName must satisfy ${m} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!p||p.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(p))throw new Error("appVersion must satisfy Semantic Versioning format");return new nS(h,p)}constructor(h,p){this.appName=h,this.appVersion=p}},"ApplicationMetadata");l.default=d},2911000564:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Attendee");l.default=d},5974247229:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(570155317)),m=h(d(7416186200));let a=r(class{bindAudioElement(i){return u(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return u(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return u(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)m.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return u(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(c=>{t&&c.meetingAudioStreamBecameInactive(t),this.audioStream&&c.meetingAudioStreamBecameActive(this.audioStream)});const n=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(n&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",f=this.audioElement.sinkId;if(o===f)return;const g=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=null),n)try{yield g.setSinkId(o)}catch(c){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${c}`),c}this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=S)})}getCurrentMeetingAudioStream(){return u(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return u(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new p.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},3416082494:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(570155317));let p=r(class mu{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new mu(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new mu(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new mu(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,s=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new h.default().supportsAudioRedundancy()&&s}},"AudioProfile");l.default=p},742803803:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let d=r(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null,this.isSessionConnected=!1}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null,this.isSessionConnected=!1}},"AudioVideoControllerState");l.default=d},1043709165:function(B,l,d){"use strict";var u=this&&this.__createBinding||(Object.create?function(G,ne,Me,Re){Re===void 0&&(Re=Me),Object.defineProperty(G,Re,{enumerable:!0,get:function(){return ne[Me]}})}:function(G,ne,Me,Re){Re===void 0&&(Re=Me),G[Re]=ne[Me]}),h=this&&this.__setModuleDefault||(Object.create?function(G,ne){Object.defineProperty(G,"default",{enumerable:!0,value:ne})}:function(G,ne){G.default=ne}),p=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var ne={};if(G!=null)for(var Me in G)Me!=="default"&&Object.prototype.hasOwnProperty.call(G,Me)&&u(ne,G,Me);return h(ne,G),ne},m=this&&this.__awaiter||function(G,ne,Me,Re){function Ft(ot){return ot instanceof Me?ot:new Me(function(Tt){Tt(ot)})}return r(Ft,"adopt"),new(Me||(Me=Promise))(function(ot,Tt){function we(Oe){try{F(Re.next(Oe))}catch(se){Tt(se)}}r(we,"fulfilled");function Ue(Oe){try{F(Re.throw(Oe))}catch(se){Tt(se)}}r(Ue,"rejected");function F(Oe){Oe.done?ot(Oe.value):Ft(Oe.value).then(we,Ue)}r(F,"step"),F((Re=Re.apply(G,ne||[])).next())})},a=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(9618816399)),i=a(d(5974247229)),e=a(d(3416082494)),t=a(d(570155317)),n=a(d(4203297362)),o=a(d(3308537260)),f=a(d(78129611)),g=a(d(8363971156)),S=a(d(4474236581)),c=a(d(1240186630)),v=a(d(5519271617)),_=a(d(4680116077)),E=a(d(2461656181)),b=a(d(7416186200)),T=a(d(6160394281)),I=a(d(2981760980)),O=a(d(728914651)),w=a(d(5798697844)),D=a(d(8384002519)),R=p(d(498975381)),L=a(d(201131498)),H=a(d(3566593278)),K=d(7344258710),ee=a(d(6017023892)),q=a(d(44274307)),ae=a(d(7344467851)),ce=a(d(5438824562)),Te=a(d(38878034)),ke=a(d(320218677)),tt=a(d(2568010183)),At=a(d(887979666)),Be=a(d(8813893041)),$e=a(d(4016680554)),Ze=a(d(4246373854)),Je=a(d(9816353112)),dt=a(d(5061413178)),Ot=a(d(3517731918)),Nt=a(d(5932071943)),Ve=a(d(9360452255)),He=a(d(4608327356)),ct=a(d(4327951460)),yt=a(d(9769959402)),it=a(d(1690462647)),nn=a(d(4784106923)),Xt=a(d(3516966482)),dn=a(d(7537455207)),bn=a(d(8265718271)),Rn=a(d(4133266271)),Zt=a(d(1636523053)),Mn=a(d(618497857)),Wi=a(d(8588089957)),Jn=a(d(8838701689)),zn=d(8479756130),En=a(d(1203283221)),sn=a(d(7176913269)),oi=a(d(7676538085)),rn=d(4165080297),cn=a(d(5814977413)),Wt=a(d(3420631425)),J=a(d(1509578473)),Xe=a(d(3338407955)),nt=a(d(6875957405)),st=a(d(659149118)),pt=a(d(8001836114)),It=a(d(3805322525)),ve=a(d(742803803));let et=r(class gu{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new s.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(ne){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(ne):null}setAudioProfile(ne){this._audioProfile=ne}addObserver(ne){this.logger.info("adding meeting observer"),this.observerQueue.add(ne)}removeObserver(ne){this.logger.info("removing meeting observer"),this.observerQueue.delete(ne)}forEachObserver(ne){for(const Me of this.observerQueue)b.default.nextTick(()=>{this.observerQueue.has(Me)&&ne(Me)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new ve.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new D.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const ne=r(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(Me){Me.type===L.default.WebSocketClosed&&ne()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(ne=>{this.logger.error(`Signaling task pre-start failed: ${ne}`),this.signalingTask=void 0})}start(ne){this.startReturningPromise(ne).then(()=>{this.logger.info("start completed")}).catch(Me=>{this.logger.error(`start failed: ${Me}`)})}startReturningPromise(ne){return(ne==null?void 0:ne.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((Me,Re)=>{this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!1).then(Me).catch(Re)})}))}connectWithPromises(ne){const Me=this.meetingSessionContext,Re=r((X,lt)=>new bn.default(this.logger,lt,X),"timeout");this.monitorTask=new Ze.default(Me,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const Ft=this.monitorTask.once(),ot=new Nt.default(Me).once();this.receiveIndexTask=new ct.default(Me),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Tt=new it.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new $e.default(Me),new yt.default(Me),new At.default(Me),this.receiveIndexTask]).once(),we=new Te.default(Me).once(Tt),Ue=new q.default(Me).once(we,ot),F=new ke.default(Me).once(Ue),Oe=new nn.default(Me).once(F),se=new tt.default(Me).once(Oe),ue=new dn.default(Me).once(se);return this.receiveRemotePauseResumeTask=new Ve.default(Me),this.receiveRemotePauseResumeTask.once(ue),new it.default(this.logger,this.wrapTaskName("AudioVideoStart"),[Ft,Re(this.configuration.connectionTimeoutMs,new it.default(this.logger,"Peer",[ue,this.receiveRemotePauseResumeTask,ne?new bn.default(this.logger,new dt.default(this.logger,"FinalizeConnection",[new Rn.default(Me),new Xt.default(Me)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new Xt.default(Me)]))])}actionConnect(ne){var Me;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const Re=!!this.configuration.urls.audioHostURL;if(Re?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Mn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Wi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Zt.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new Jn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new It.default(this.logger,this._realtimeController,gu.MIN_VOLUME_DECIBELS,gu.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Tt=this.meetingSessionContext.videoUplinkBandwidthPolicy;Tt||(Tt=new st.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Tt),Tt.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new oi.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new J.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Wt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new pt.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new sn.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const Tt=this.configuration.meetingFeatures.contentMaxResolution===f.default.VideoResolutionUHD;Tt&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Tt)}else{const Tt=this.configuration.meetingFeatures.videoMaxResolution===f.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Tt)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new c.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new En.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new cn.default,this.meetingSessionContext.videosPaused=new cn.default,this.meetingSessionContext.statsCollector=new ee.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new _.default(this.meetingSessionContext.signalingClient,gu.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},this._videoTileController.registerVideoTileResolutionObserver(this.meetingSessionContext.statsCollector),ne||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Tt=>{zn.Maybe.of(Tt.audioVideoDidStartConnecting).map(we=>we.bind(Tt)(!1))}),(Me=this.eventController)===null||Me===void 0||Me.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const Ft=Re&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+Ft);const ot=this.connectWithPromises(Ft);try{yield ot.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Tt){this.signalingTask=void 0;const we=new g.default(this.getMeetingStatusCode(Tt)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${we} due to error ${Tt}.`),this.sessionStateController.state()===O.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(I.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(we,!0,Tt),this.handleMeetingSessionStatus(we,Tt)||this.notifyStop(we,Tt)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new bn.default(this.logger,new Je.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=K.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.meetingSessionContext.isSessionConnected=!0,this.forEachObserver(ne=>{zn.Maybe.of(ne.audioVideoDidStart).map(Me=>Me.bind(ne)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var ne;return this._reconnectController.disableReconnect(),this.sessionStateController.state()===O.default.NotConnected?((ne=this.meetingSessionContext.signalingClient)===null||ne===void 0||ne.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((Me,Re)=>{this.sessionStateController.perform(I.default.Disconnect,()=>{this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new g.default(S.default.Left),!1,null).then(Me).catch(Re)})})}stop(){this.stopReturningPromise()}actionDisconnect(ne,Me,Re){return m(this,void 0,void 0,function*(){try{yield new it.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new bn.default(this.logger,new Be.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const Ft=[new bn.default(this.logger,new ce.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new it.default(this.logger,this.wrapTaskName("AudioVideoClean"),Ft).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(I.default.FinishDisconnecting,()=>{Me||this.notifyStop(ne,Re)}),this._videoTileController.removeVideoTileResolutionObserver(this.meetingSessionContext.statsCollector)})}update(){let Me=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(Me||(Me=this.meetingSessionContext.peer===void 0),Me||(Me=!this.updateRemoteVideosFromPolicy()),Me||(Me=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!Me)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const Re=this.sessionStateController.perform(I.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return Re===w.default.Transitioned||Re===w.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!R.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===R.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const ne=this.detectChangesInVideosToReceive();if(ne===void 0)return!1;const Me=ne.added,Re=ne.simulcastStreamUpdates,Ft=ne.removed,ot=this.meetingSessionContext,Tt=[];for(const[we,Ue]of Re.entries()){const F=new H.default;if(F.streamId=Ue,F.attendeeId=ot.videoStreamIndex.attendeeIdForStreamId(Ue),F.mid=ot.transceiverController.getMidForStreamId(we),F.mid===void 0)return this.logger.info(`No MID found for stream ID ${we}, cannot update stream without renegotiation`),!1;if(Tt.push(F),ot.transceiverController.setStreamIdForMid(F.mid,Ue),ot.videoStreamIndex.overrideStreamIdMappings(we,Ue),ot.videoTileController.haveVideoTileForAttendeeId(F.attendeeId)){const Oe=ot.videoTileController.getVideoTileForAttendeeId(F.attendeeId);if(!Oe.setStreamId)return!1;Oe.setStreamId(Ue)}}return Tt.length!==0&&ot.signalingClient.remoteVideoUpdate(Tt,[]),Me.length!==0||Ft.length!==0?!1:(ot.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const ne=this.meetingSessionContext;if(ne.videosToReceive===null||!ne.transceiverController||!ne.transceiverController.getMidForStreamId||!ne.transceiverController.setStreamIdForMid||!ne.videosToReceive.forEach||!ne.signalingClient.remoteVideoUpdate||!ne.videoStreamIndex.overrideStreamIdMappings)return;let Me=[];const Re=new Map;let Ft=[];if(ne.lastVideosToReceive===null)Me=ne.videosToReceive.array();else{const ot=ne.videoStreamIndex;ne.videosToReceive.forEach(Tt=>{if(ne.lastVideosToReceive.contain(Tt))return;let we=!1;ne.lastVideosToReceive.forEach(Ue=>{we||ot.StreamIdsInSameGroup(Ue,Tt)&&(Re.set(Ue,Tt),we=!0)}),we||Me.push(Tt)}),Ft=ne.lastVideosToReceive.array().filter(Tt=>{const we=ne.videosToReceive.contain(Tt),Ue=Re.has(Tt);return!we&&!Ue})}return this.logger.info(`Request to update remote videos with added: [${Me}], updated: [${Array.from(Re.entries()).map(ot=>{let[Tt,we]=ot;return`${Tt}->${we}`}).join(",")}], removed: [${Ft}]`),{added:Me,removed:Ft,simulcastStreamUpdates:Re}}isNotAddingOrRemovingStreams(){const ne=this.detectChangesInVideosToReceive();if(ne===void 0)return!1;const Me=ne.added,Re=ne.removed;return Me.length!==0||Re.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const ne=this.meetingSessionContext;if(ne.videosToReceive===null)return!1;const Me=ne.videosToReceive.array().map(we=>ne.videoStreamIndex.groupIdForStreamId(we));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(Me));const Re=rn.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(ne,Me,ne.videoDownlinkBandwidthPolicy.getVideoPreferences()),Ft=new Map,ot=[];for(const we of Re){let Ue=!1;if(!ne.lastVideoSubscriptionConfiguration.has(we.groupId))Ue=!0;else{const F=ne.lastVideoSubscriptionConfiguration.get(we.groupId);we.equals(F)||(this.logger.debug(`${JSON.stringify(we)} does not equal ${JSON.stringify(F)}, sending update`),Ue=!0)}Ft.set(we.groupId,we),Ue&&ot.push(we)}ne.lastVideoSubscriptionConfiguration=Ft;const Tt=[];if(ne.lastVideosToReceive!==null){const we=new Set(Me);for(const Ue of ne.lastVideosToReceive.array()){const F=ne.videoStreamIndex.groupIdForStreamId(Ue);if(!we.has(F)){const Oe=ne.transceiverController.getMidForGroupId(F);if(Oe===void 0){ne.logger.warn(`Could not find MID for group ID to remove: ${F}`);continue}Tt.push(Oe)}}}return(ot.length!==0||Tt.length!==0)&&ne.signalingClient.remoteVideoUpdate(ot,Tt),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const ne=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(ne)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const ne=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!ne||!ne.headerExtensions?!1:ne.headerExtensions.some(Me=>Me.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(ne){const Me=r(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),ne()}),"restartVideo"),Re=this.sessionStateController.perform(I.default.Update,()=>{Me()});return Re===w.default.Transitioned||Re===w.default.DeferredTransition}replaceLocalVideo(ne){return m(this,void 0,void 0,function*(){if(!ne||ne.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const Me=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(Me){const Re=Me.state(),Ft=ne.getVideoTracks()[0].getSettings();Me.bindVideoStream(Re.boundAttendeeId,!0,ne,Ft.width,Ft.height,Re.streamId,Re.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(ne.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=ne,this.logger.info("Local video input is updated")})}replaceLocalAudio(ne){return m(this,void 0,void 0,function*(){if(!ne||ne.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(ne.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=ne,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(ne){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new it.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new He.default(this.meetingSessionContext),new bn.default(this.logger,new it.default(this.logger,"UpdateSession",[new q.default(this.meetingSessionContext),new ke.default(this.meetingSessionContext),new nn.default(this.meetingSessionContext),new tt.default(this.meetingSessionContext),new dn.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),ne&&this.sessionStateController.perform(I.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(Me){this.sessionStateController.perform(I.default.FinishUpdating,()=>{const Re=new g.default(this.getMeetingStatusCode(Me)||S.default.TaskFailed);Re.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(Re,Me)})}})}notifyStop(ne,Me){var Re;if(this.forEachObserver(Ft=>{zn.Maybe.of(Ft.audioVideoDidStop).map(ot=>ot.bind(Ft)(ne))}),this.eventController){const{signalingOpenDurationMs:Ft,poorConnectionCount:ot,startTimeMs:Tt,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ue,meetingStartDurationMs:F}=this.meetingSessionContext,Oe={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Tt===null?0:Math.round(Date.now()-Tt),meetingStatus:S.default[ne.statusCode()],signalingOpenDurationMs:Ft,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ue,poorConnectionCount:ot,meetingStartDurationMs:F,retryCount:this.totalRetryCount},se=Me&&Me.message||((Re=ne.toString)===null||Re===void 0?void 0:Re.call(ne))||"";Oe.meetingDurationMs===0?(Oe.meetingErrorMessage=se,delete Oe.meetingDurationMs,delete Oe.attendeePresenceDurationMs,delete Oe.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Oe)):ne.isFailure()||ne.isAudioConnectionFailure()?(Oe.meetingErrorMessage=se,this.eventController.publishEvent("meetingFailed",Oe)):this.eventController.publishEvent("meetingEnded",Oe)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const ne=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(ne)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(ne,Me){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(Ft=>{zn.Maybe.of(Ft.audioVideoWasDemotedFromPrimaryMeeting).map(ot=>ot.bind(Ft)(new g.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const Re=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===O.default.NotConnected?this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(I.default.Reconnect,()=>{this.actionReconnect(ne)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return Re||this.sessionStateController.perform(I.default.Fail,()=>{this.actionDisconnect(ne,!1,Me)}),Re}actionReconnect(ne){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(Me=>{zn.Maybe.of(Me.audioVideoDidStartConnecting).map(Re=>Re.bind(Me)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Ve.default(this.meetingSessionContext);try{yield new it.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new bn.default(this.logger,new it.default(this.logger,"Media",[new ae.default(this.meetingSessionContext),new it.default(this.logger,"Signaling",[new Je.default(this.meetingSessionContext),new At.default(this.meetingSessionContext)]),new Te.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new He.default(this.meetingSessionContext),new bn.default(this.logger,new it.default(this.logger,"UpdateSession",[new q.default(this.meetingSessionContext),new ke.default(this.meetingSessionContext),new nn.default(this.meetingSessionContext),new tt.default(this.meetingSessionContext),new dn.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(I.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:Me,poorConnectionCount:Re,startTimeMs:Ft,iceGatheringDurationMs:ot,attendeePresenceDurationMs:Tt,meetingStartDurationMs:we}=this.meetingSessionContext,Ue={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-Ft),meetingStatus:S.default[ne.statusCode()],signalingOpenDurationMs:Me,iceGatheringDurationMs:ot,attendeePresenceDurationMs:Tt,poorConnectionCount:Re,meetingStartDurationMs:we,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Ue)}this.actionFinishConnecting()})}catch(Me){this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const Re=new g.default(this.getMeetingStatusCode(Me)||S.default.TaskFailed);this.handleMeetingSessionStatus(Re,Me)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(ne){return`${ne}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(ne){const Me=/the meeting status code: (\d+)/.exec(ne&&ne.message);return Me&&Me.length>1?Number.parseInt(Me[1],10):null}enforceBandwidthLimitationForSender(ne){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(ne)})}handleMeetingSessionStatus(ne,Me){if(this.logger.info(`handling status: ${S.default[ne.statusCode()]}`),ne.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(ne),ne.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(ne.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(Re=>{zn.Maybe.of(Re.videoSendDidBecomeUnavailable).map(Ft=>Ft.bind(Re)())}),!1;if(ne.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(Re=>{zn.Maybe.of(Re.audioVideoWasDemotedFromPrimaryMeeting).map(Ft=>Ft.bind(Re)(ne))}),!1;if(ne.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(ne.isFailure()||ne.isTerminal())&&this.meetingSessionContext.reconnectController){const Re=this.reconnect(ne,Me);return Re?this.logger.warn(`The audio video controller will reconnect due to status code ${S.default[ne.statusCode()]}${Me?` and error: ${Me.message}`:""}`):this.logger.error(`The audio video controller failed with status code ${S.default[ne.statusCode()]}${Me?` and error: ${Me.message}`:""}`),Re}return!1}setVideoMaxBandwidthKbps(ne){if(ne<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${ne} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(ne)),this.maxUplinkBandwidthKbps=ne}handleHasBandwidthPriority(ne){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ne),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const Me=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ne);const Re=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();Me!==Re&&(this.logger.info(`video send bandwidth priority ${ne} max has changed from ${Me} kbps to ${Re} kbps`),yield this.enforceBandwidthLimitationForSender(Re))}})}pauseReceivingStream(ne){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([ne])}resumeReceivingStream(ne){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([ne])}setVideoCodecSendPreferences(ne){this.videoSendCodecPreferences=ne,this.meetingSessionContext.videoSendCodecPreferences=ne,this.sessionStateController.state()!==O.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:ne}=this.meetingSessionContext;if(!ne)return this.logger.info("meeting has not started"),[];const Me=this.configuration.credentials.attendeeId;return ne.allVideoSendingSourcesExcludingSelf(Me)}encodingSimulcastLayersDidChange(ne){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(Me=>{zn.Maybe.of(Me.encodingSimulcastLayersDidChange).map(Re=>Re.bind(Me)(ne))})}promoteToPrimaryMeeting(ne){return this.actionPromoteToPrimaryMeeting(ne)}actionPromoteToPrimaryMeeting(ne){return m(this,void 0,void 0,function*(){let Me=new g.default(S.default.SignalingRequestFailed);return yield new it.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new bn.default(this.logger,new Ot.default(this.meetingSessionContext,ne,Re=>{Me=Re}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=Me.statusCode()===S.default.OK,Me})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(ne=>{zn.Maybe.of(ne.audioVideoWasDemotedFromPrimaryMeeting).map(Me=>Me.bind(ne)(new g.default(S.default.OK)))})}videoInputDidChange(ne){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(ne?yield this.replaceLocalVideo(ne):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(ne){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!ne)try{ne=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(ne)})}constructor(ne,Me,Re,Ft,ot,Tt){this._audioProfile=new e.default,this.connectionHealthData=new n.default,this.observerQueue=new Set,this.meetingSessionContext=new ve.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=Me,this.sessionStateController=new T.default(this._logger),this._configuration=ne,this._webSocketAdapter=Re,this._realtimeController=new E.default(Ft),this._realtimeController.realtimeSetLocalAttendeeId(ne.credentials.attendeeId,ne.credentials.externalUserId),this._mediaStreamBroker=Ft,this._reconnectController=ot,this._videoTileController=new Xe.default(new nt.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Tt}},"DefaultAudioVideoController");l.default=et,et.MIN_VOLUME_DECIBELS=-42,et.MAX_VOLUME_DECIBELS=-14,et.PING_PONG_INTERVAL_MS=1e4},7444592474:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4953773007)),p=u(d(3682464637)),m=u(d(3975743347)),a=u(d(1632645482)),s=u(d(4283440356)),i=u(d(3981501552)),e=u(d(8363971156)),t=u(d(4474236581)),n=u(d(5992906328)),o=u(d(8543192315)),f=u(d(7482759477)),g=u(d(1043709165));let S=r(class extends g.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const _=new s.default;_.meetingId="",_.externalMeetingId="",_.credentials=new i.default,_.credentials.attendeeId="",_.credentials.joinToken="",_.urls=new n.default,_.urls.turnControlURL="",_.urls.audioHostURL="",_.urls.signalingURL="wss://localhost/";const E=new m.default;super(v||_,E,new f.default(new m.default),new a.default,new o.default(0,new h.default(0,0,0)),new p.default(v||_,E))}},"NoOpAudioVideoController");l.default=S},2033348765:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,n){function o(S){try{g(i.next(S))}catch(c){n(c)}}r(o,"fulfilled");function f(S){try{g(i.throw(S))}catch(c){n(c)}}r(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}r(g,"step"),g((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(9009314017);let p=r(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const s=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,s),s}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,s){this.videoTileController.bindVideoElement(a,s),this.trace("bindVideoElement",{tileId:a,videoElementId:s.id})}unbindVideoElement(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,s),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:s})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const s=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),s}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const s=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,s),s}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const s=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),s}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,s){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,s),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,s){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,s),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,s)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,s,i){this.realtimeController.realtimeSendDataMessage(a,s,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,s){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,s),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,s,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,s,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,s),s})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const s=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,s),s})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,s),s})}startAudioInput(a){return u(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return u(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const s=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),s}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const s=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),s}chooseVideoInputQuality(a,s,i){this.deviceController.chooseVideoInputQuality(a,s,i),this.trace("chooseVideoInputQuality",{width:a,height:s,frameRate:i})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,s){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,s)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const s=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),s}startContentShareFromScreenCapture(a,s){const i=this.contentShareController.startContentShareFromScreenCapture(a,s);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,s,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let n=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof s<"u"&&(n+=` ${JSON.stringify(s)}`),typeof i<"u"&&(n+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(n)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const s=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,s),s}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,s,i,e,t,n){this.audioVideoController=a,this.videoTileController=s,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=n}},"DefaultAudioVideoFacade");l.default=p},1653706789:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4337256121)),m=d(4384549035);let a=r(class extends p.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:n,targetCanvas:o}=this,{width:f,height:g}=o;if(!e||!t){n.clearRect(0,0,f,g);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),n.save(),n.clearRect(0,0,f,g),n.drawImage(this.scaledCanvas,0,0,f,g),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,f,g),n.globalCompositeOperation="destination-over",n.drawImage(this.blurCanvas,0,0,f,g),n.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return u(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},4337256121:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3095125652)),m=d(4384549035),a=h(d(7181071237));let s=r(class extends p.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:f}=this,{width:g,height:S}=f;o.save(),o.clearRect(0,0,g,S),o.drawImage(this.scaledCanvas,0,0,g,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,g,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,f.width,f.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return u(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: { blurStrength: ${t.blurStrength}, filterCPUUtilization: ${t.filterCPUUtilization}, reportingPeriodMillis: ${t.reportingPeriodMillis}}`)}},"BackgroundBlurProcessorProvided");l.default=s},4384549035:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const d={LOW:7,MEDIUM:15,HIGH:30};let u=r(class{static getBlurAmount(p,m){if(p<=0)throw new Error(`invalid value for blur strength: ${p}`);return Math.round(p*m.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=u,u.BLUR_STRENGTH_DIVISOR=540,l.default=d},8163389666:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(f,g,S,c){function v(_){return _ instanceof S?_:new S(function(E){E(_)})}return r(v,"adopt"),new(S||(S=Promise))(function(_,E){function b(O){try{I(c.next(O))}catch(w){E(w)}}r(b,"fulfilled");function T(O){try{I(c.throw(O))}catch(w){E(w)}}r(T,"rejected");function I(O){O.done?_(O.value):v(O.value).then(b,T)}r(I,"step"),I((c=c.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8119752156)),m=h(d(3667484237)),a=h(d(4918602332)),s=h(d(4008876858)),i=h(d(1653706789)),e=h(d(4337256121)),t=h(d(4384549035));let n=r(class extends s.default{setBlurStrength(){}loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=r(class Od extends p.default{static create(g,S){return u(this,void 0,void 0,function*(){g=Od.resolveSpec(g),S=Od.resolveOptions(S);const{logger:c}=S,v=yield Od.isSupported(g,S);if(c.info(`processor is ${v?"":"not"} supported`),!v)return c.warn("Using no-op processor because background blur is not supported"),new n;let _;return(yield e.default.isSupported())?(c.info("Using browser-provided background blur"),_=new e.default(g,S)):(c.info("Using built-in background blur"),_=new i.default(g,S)),yield _.loadAssets(),_})}static resolveOptions(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},g);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new m.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(g,S){return g=Od.resolveSpec(g),S=Od.resolveOptions(S),super.isSupported(g,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},7181071237:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(5679209067));let p=r(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=p},2214063486:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class iS{static builder(){return new iS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const h={height:144,width:256,range:[0,1],channels:3},p={height:144,width:256,range:[0,1],channels:1},m="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=m,this.input=h,this.output=p,this}withPath(h){return this.path=h,this}withInput(h){return this.input=h,this}withOutput(h){return this.output=h,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=d},5063230687:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=.8;let u=r(class{reportEvent(p){const m=p-this.lastReportedEventTimestamp;if(m>=this.reportingPeriodMillis){const a=this.filterCount,s=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=p,this.framerate===0||a===0)return;const i=Math.round(s/a),e=Math.round(this.framerate*(m/1e3))-a,t=Math.round(100*s/m);i>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:i,framerate:this.framerate,periodMillis:m}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:s,periodMillis:m})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*d)}frameReceived(p){p!==this.framerate&&(this.framerate=p,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const m=Date.now();this.reportEvent(m)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(p,m,a,s){this.delegate=p,this.reportingPeriodMillis=m,this.filterCPUUtilization=a,this.logger=s,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=u},3095125652:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(t,n,o,f){function g(S){return S instanceof o?S:new o(function(c){c(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,c){function v(b){try{E(f.next(b))}catch(T){c(T)}}r(v,"fulfilled");function _(b){try{E(f.throw(b))}catch(T){c(T)}}r(_,"rejected");function E(b){b.done?S(b.value):g(b.value).then(v,_)}r(E,"step"),E((f=f.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const p=d(8408264373),m=h(d(6011658084)),a=h(d(5063230687));let s=r(class{whenNext(){return this.promise||(this.promise=new Promise(n=>this.resolve=n)),this.promise}next(n){this.value=n,this.resolve(n),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=r(class Dh{static createWorkerPromise(){const n={resolve:null,reject:null,promise:null};return n.promise=new Promise((o,f)=>{n.resolve=o,n.reject=f}),n}validateSpec(n){if(!n)throw new Error("processor has null spec");if(!n.model)throw new Error("processor spec has null model");if(!n.paths)throw new Error("processor spec has null paths")}validateOptions(n){if(!n)throw new Error("processor has null options");if(!n.logger)throw new Error("processor has null options - logger");if(!n.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!n.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(n){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,n.reportingPeriodMillis,n.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(n){return JSON.stringify(n,null,2)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(n){if(this.logger.info(`received load model message: ${this.stringify(n)}`),n.payload!==2){this.logger.error("failed to load model! status: "+n.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+n.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(n){this.mask$.next(n.payload.output)}handleWorkerEvent(n){const o=n.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield p.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",n=>this.handleWorkerEvent(n)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(n){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${n.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(n){return u(this,void 0,void 0,function*(){if(this.destroyed)return n;this.frameCounter.frameReceived(n[0].framerate),this.cpuMonitor.frameReceived();const o=n[0].asCanvasElement();if(!o)return n;if(!this.modelInitialized)return n[0]=this.canvasVideoFrameBuffer,n;const f=o.width,g=o.height;if(f===0||g===0)return n;this.sourceWidth===0&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==f||this.sourceHeight!==g)&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const c=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const _=this.scaledCanvas.getContext("2d");_.save(),_.scale(c,v),_.drawImage(o,0,0),_.restore();const E=_.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const b=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:E},[E.data.buffer]),S=yield b}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),n}finally{this.frameCounter.filterComplete(),this.frameNumber++}return n[0]=this.canvasVideoFrameBuffer,n})}updateVideoFramesPerFilterUpdate(n){n!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=n,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var n,o,f,g;return u(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(n=this.worker)===null||n===void 0||n.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(f=this.targetCanvas)===null||f===void 0||f.remove(),this.targetCanvas=void 0,(g=this.scaledCanvas)===null||g===void 0||g.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(n,o,f,g,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new s,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Dh.createWorkerPromise(),this.loadModelPromise=Dh.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=n,this.validateSpec(o),this.validateOptions(f),this.spec=o,this.logger=f.logger,this.delegate=g,this.initCPUMonitor(f),this.eventController=S}},"BackgroundFilterProcessor");l.default=i;let e=r(class{filterCPUUtilizationHigh(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=n,this.observer.reduceCPUUtilization())}frameReceived(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=n,this.observer.increaseCPUUtilization())}constructor(n,o){this.monitoringPeriodMillis=n,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},8119752156:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(f,g,S,c){function v(_){return _ instanceof S?_:new S(function(E){E(_)})}return r(v,"adopt"),new(S||(S=Promise))(function(_,E){function b(O){try{I(c.next(O))}catch(w){E(w)}}r(b,"fulfilled");function T(O){try{I(c.throw(O))}catch(w){E(w)}}r(T,"rejected");function I(O){O.done?_(O.value):v(O.value).then(b,T)}r(I,"step"),I((c=c.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(8408264373),m=d(7737065561),a=h(d(2214063486)),s=h(d(570155317)),i=h(d(1877666836)),e=r(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",n={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=r(class{static defaultAssetSpec(){const g=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${g.major}.${g.minor}`}}static createUrlWithParams(g,S){const c=new URL(g),v=Object.keys(S);for(const _ of v)S[_]!==void 0&&c.searchParams.set(_,S[_]);return c.toString()}static resolveSpec(g){const{paths:S=n,model:c=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:_=this.defaultAssetSpec().revisionID}=g||{},E={assetGroup:v,revisionID:_,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,E),S.wasm=this.createUrlWithParams(S.wasm,E),S.simd=this.createUrlWithParams(S.simd,E),c.path=this.createUrlWithParams(c.path,E),{paths:S,model:c,assetGroup:v,revisionID:_}}static resolveOptions(g){g.reportingPeriodMillis||(g.reportingPeriodMillis=1e3);const S=30;return g.filterCPUUtilization?(g.filterCPUUtilization<0||g.filterCPUUtilization>100)&&(g.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),g.filterCPUUtilization=S):g.filterCPUUtilization=S,g}static isSupported(g,S){const{logger:c}=S;return typeof globalThis>"u"?(c.info("Browser does not have globalThis."),Promise.resolve(!1)):new s.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,c)?this.supportsBackgroundFilter(globalThis,g,c):(c.info("Browser does not support WASM."),Promise.resolve(!1)):(c.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0;return u(this,void 0,void 0,function*(){if(!m.supportsWorker(g,c))return c.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const _=yield p.loadWorker(v,"BackgroundFilterWorker",{},null);try{_.terminate()}catch(E){c.info(`Failed to terminate worker. ${E.message}`)}return!0}catch(_){return c.info(`Failed to fetch and instantiate test worker ${_.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},5679209067:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}filterFrameDurationHigh(h){var p;for(const m of this.observers)(p=m.filterFrameDurationHigh)===null||p===void 0||p.call(m,h)}filterCPUUtilizationHigh(h){var p;for(const m of this.observers)(p=m.filterCPUUtilizationHigh)===null||p===void 0||p.call(m,h)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=d},4603175154:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3095125652)),m=h(d(9396352123));let a=r(class Rh extends p.default{setImageBlob(i){return u(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield Rh.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:n,targetCanvas:o}=this,{width:f,height:g}=o;n.save(),n.clearRect(0,0,f,g),n.drawImage(this.scaledCanvas,0,0,f,g),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,f,g),n.globalCompositeOperation="destination-over",n.drawImage(this.replacementImage,0,0,o.width,o.height),n.restore()}static loadImageExecutor(i,e,t){const n=new Image;n.crossOrigin="Anonymous",n.addEventListener("load",()=>{i(n)},!1),n.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${n.src}: ${o.message}`))},!1),n.src=t}static loadImage(i){return u(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return u(this,void 0,void 0,function*(){this.replacementImage=yield Rh.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return u(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: { filterCPUUtilization: ${e.filterCPUUtilization}, reportingPeriodMillis: ${e.reportingPeriodMillis}}`)}},"BackgroundReplacementFilter");l.default=a},9876192012:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(n,o,f,g){function S(c){return c instanceof f?c:new f(function(v){v(c)})}return r(S,"adopt"),new(f||(f=Promise))(function(c,v){function _(T){try{b(g.next(T))}catch(I){v(I)}}r(_,"fulfilled");function E(T){try{b(g.throw(T))}catch(I){v(I)}}r(E,"rejected");function b(T){T.done?c(T.value):S(T.value).then(_,E)}r(b,"step"),b((g=g.apply(n,o||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8119752156)),m=h(d(3667484237)),a=h(d(4918602332)),s=h(d(4008876858)),i=h(d(4603175154));let e=r(class extends s.default{loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return u(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=r(class rS extends p.default{static create(o,f){return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const{logger:g}=f;if(!(yield rS.isSupported(o,f)))return g.warn("Using no-op processor because background replacement is not supported"),new e;g.info("Using background replacement filter");const c=new i.default(o,f);return yield c.loadAssets(),c})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const f=Object.assign({},o);return f.logger||(f.logger=new m.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(f)}static resolveOptionsAsync(o){return u(this,void 0,void 0,function*(){if(!o.imageBlob){const f=document.createElement("canvas");f.width=100,f.height=100;const g=f.getContext("2d");g.fillStyle="blue",g.fillRect(0,0,100,100);const S=yield new Promise(c=>{f.toBlob(c)});o.imageBlob=S}})}static isSupported(o,f){const g=Object.create(null,{isSupported:{get:()=>super.isSupported}});return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const S=f.imageBlob,c=URL.createObjectURL(S);try{yield i.default.loadImage(c)}catch(v){return f.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(c)}return g.isSupported.call(this,o,f)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},9396352123:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(5679209067));let p=r(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=p},4953773007:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const h=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,h}constructor(h,p,m){this.fixedWaitMs=h,this.shortBackoffMs=p,this.longBackoffMs=m,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=d},4991842071:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4953773007)),p=u(d(1690170483));let m=r(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(s){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,s)}constructor(s,i,e){this.fixedWaitMs=s,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=m},1690170483:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4953773007));let p=r(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,s,i,e){super(a,s,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=p},570155317:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(585669709),p=d(5037727051);let m=r(class Mh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const s of this.chromeLike)if(s===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const s of this.webkitBrowsers)if(s===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Mh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Mh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(s,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(s/64)*64,Math.ceil(i/64)*64]:[s,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const s=[];for(const i in this.browserSupport)s.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return s.join(", ")}supportedVideoCodecs(){return u(this,void 0,void 0,function*(){const s=new RTCPeerConnection;return s.addTransceiver("video",{direction:"inactive",streams:[]}),(yield s.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return this.isIOS()&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}requiresAudioContextResetOnDeviceFailureForWebAudio(){return this.isIOS()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}isIOS(){return this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox()}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},6504123882:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7344258710),p=u(d(9228821375)),m=u(d(8620705262)),a=u(d(7241560938));let s=r(class oS{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case p.default.UPSTREAM:return this.audioUpstreamMetricMap;case p.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case p.default.UPSTREAM:return this.videoUpstreamMetricMap;case p.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:f,source:g}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const c=this.streamMetricReports[S];if(c.direction===t.dir&&c.mediaType===t.media)return f(g||t.source,Number(S))}else return f(g||t.source);return 0}getObservableVideoMetricValue(e,t){const n=this.observableVideoMetricSpec[e],f=this.getMetricMap(n.media,n.dir)[n.source],{transform:g,source:S}=f;return g(S||n.source,t)}getVideoUpstreamSsrcs(){const e=[];for(const t in this.streamMetricReports)this.streamMetricReports[t].mediaType===m.default.VIDEO&&this.streamMetricReports[t].direction===p.default.UPSTREAM&&e.push(Number(t));return e}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const n={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const c=this.getObservableVideoMetricValue(S,Number(t));isNaN(c)||(n[S]=c)}const o=this.streamMetricReports[t].groupId,f=this.streamMetricReports[t].streamId;let g="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?g=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:g=f?this.videoStreamIndex.attendeeIdForStreamId(f):this.selfAttendeeId,e[g]=e[g]?e[g]:{},e[g][t]=n}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new oS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,n){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=n,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o])},this.decoderLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.concealedSamples-(g.previousMetrics.concealedSamples||0),c=g.currentMetrics.totalSamplesReceived-(g.previousMetrics.totalSamplesReceived||0);return c<=0||c-S<=0?0:S/c*100},this.packetLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics[o]-(g.previousMetrics[o]||0),c=g.currentMetrics.packetsLost-(g.previousMetrics.packetsLost||0),v=S+c;return v<=0||c<=0?0:c*100/v},this.jitterBufferMs=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.jitterBufferDelay-(g.previousMetrics.jitterBufferDelay||0),c=g.currentMetrics.jitterBufferEmittedCount-(g.previousMetrics.jitterBufferEmittedCount||0);return S<=0||c<=0?0:S/c*1e3},this.countPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const c=g.currentMetrics[o]-(g.previousMetrics[o]||0);return c<=0?0:Math.trunc(c/S)},this.bitsPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const c=(g.currentMetrics[o]-(g.previousMetrics[o]||0))*8;return c<=0?0:Math.trunc(c/S)},this.secondsToMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const c=g.currentMetrics[o]-(g.previousMetrics[o]||0);return c<=0?0:c*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,f)=>{const g=this.streamMetricReports[f];if(g.previousObjectMetrics[o]===void 0||g.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let c=0,v=0;for(const[E,b]of Object.entries(g.previousObjectMetrics[o]))E==="cpu"&&(c=b);for(const[E,b]of Object.entries(g.currentObjectMetrics[o]))E==="cpu"&&(v=b);const _=v-c;return _<=0?0:_*1e3/S},this.isHardwareImplementation=(o,f)=>{const g=this.streamMetricReports[f];if(g.currentStringMetrics[o]===void 0)return NaN;const S=String(g.currentStringMetrics[o]),c=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return c&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_JITTER_MS},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE},videoInputWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_WIDTH},videoInputHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_HEIGHT}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS},videoRenderWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_WIDTH},videoRenderHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_HEIGHT}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:p.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:p.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:p.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=s},9228821375:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var d;(function(u){u[u.UPSTREAM=0]="UPSTREAM",u[u.DOWNSTREAM=1]="DOWNSTREAM"})(d=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=d},8620705262:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var d;(function(u){u[u.AUDIO=0]="AUDIO",u[u.VIDEO=1]="VIDEO"})(d=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=d},8445379153:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"ClientVideoStreamReceivingReport");l.default=d},7241560938:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=d},9193449927:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=d},2245405125:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=d},9125397317:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(h){this.currentData=h}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const h=this.health();return h!==this.currentHealth?(this.currentHealth=h,h):null}constructor(h,p,m){this.minHealth=h.minHealth,this.maxHealth=h.maxHealth,this.currentHealth=h.initialHealth,this.currentData=p.clone(),this.name=m}},"BaseConnectionHealthPolicy");l.default=d},4203297362:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class bl{static isTimestampRecent(h,p){return Date.now()<h+p}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(h){return bl.isTimestampRecent(this.connectionStartTimestampMs,h)}isLastPacketLossRecent(h){return bl.isTimestampRecent(this.lastPacketLossInboundTimestampMs,h)}isGoodSignalRecent(h){return bl.isTimestampRecent(this.lastGoodSignalTimestampMs,h)}isWeakSignalRecent(h){return bl.isTimestampRecent(this.lastWeakSignalTimestampMs,h)}isNoSignalRecent(h){return bl.isTimestampRecent(this.lastNoSignalTimestampMs,h)}clone(){const h=new bl;return h.connectionStartTimestampMs=this.connectionStartTimestampMs,h.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,h.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,h.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,h.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,h.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,h.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,h.consecutiveMissedPongs=this.consecutiveMissedPongs,h.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),h.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),h.audioSpeakerDelayMs=this.audioSpeakerDelayMs,h.isVideoEncoderHardware=this.isVideoEncoderHardware,h.videoEncodingTimeInMs=this.videoEncodingTimeInMs,h.videoEncodingTimePerFrameInMs=this.videoEncodingTimePerFrameInMs,h.cpuLimitationDuration=this.cpuLimitationDuration,h.videoInputFps=this.videoInputFps,h.videoEncodeFps=this.videoEncodeFps,h}setConsecutiveMissedPongs(h){this.consecutiveMissedPongs=h}setConsecutiveStatsWithNoPackets(h){this.consecutiveStatsWithNoPackets=h}setConsecutiveStatsWithNoAudioPacketsSent(h){this.consecutiveStatsWithNoAudioPacketsSent=h}setLastPacketLossInboundTimestampMs(h){this.lastPacketLossInboundTimestampMs=h}setLastNoSignalTimestampMs(h){this.lastNoSignalTimestampMs=h}setLastWeakSignalTimestampMs(h){this.lastWeakSignalTimestampMs=h}setLastGoodSignalTimestampMs(h){this.lastGoodSignalTimestampMs=h}setAudioSpeakerDelayMs(h){this.audioSpeakerDelayMs=h}setIsVideoEncoderHardware(h){this.isVideoEncoderHardware=h}setVideoEncodingTimeInMs(h){this.videoEncodingTimeInMs=h}setVideoEncodingTimePerFrameInMs(h){this.videoEncodingTimePerFrameInMs=h}setCpuLimitationDuration(h){this.cpuLimitationDuration=h}setVideoInputFps(h){this.videoInputFps=h}setVideoEncodeFps(h){this.videoEncodeFps=h}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=d},7393946074:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(5224309264)),p=u(d(8519113441));let m=r(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[h.default,p.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.highEncodeCpuMsPerFrameThreshold=15,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=m},4705746645:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9125397317));let p=r(class da extends h.default{health(){if(this.currentData.isConnectionStartRecent(da.CONNECTION_WAIT_TIME_MS))return 1;const s=this.currentData.consecutiveStatsWithNoPackets>=da.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=da.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>da.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>da.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),s||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${s}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(a,s,i){super(s,i,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,da.CONNECTION_UNHEALTHY_THRESHOLD=s.connectionUnhealthyThreshold,da.CONNECTION_WAIT_TIME_MS=s.connectionWaitTimeMs,da.MISSED_PONGS_THRESHOLD=s.missedPongsUpperThreshold,da.MAXIMUM_AUDIO_DELAY_MS=s.maximumAudioDelayMs,da.MAXIMUM_AUDIO_DELAY_DATA_POINTS=s.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=p},7549473166:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9125397317));let p=r(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),s=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&s}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,s,i){super(s,i,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=s.sendingAudioFailureSamplesToConsider>0?s.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=s.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=s.maximumTimesToWarn,this.coolDownTimeMs=s.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=p},1168113665:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9125397317));let p=r(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,s=a*this.packetsExpected;let i=0;for(let e=0;e<a;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/s,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,s){super(a,s,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=p},9225479537:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var d;(function(u){u.VideoEncodingCpuHealth="Video Encoding CPU Health",u.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(d=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=d},5224309264:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9125397317)),p=u(d(9225479537));let m=r(class extends h.default{health(){const s=this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold&&this.currentData.videoEncodingTimePerFrameInMs>=this.highEncodeCpuMsPerFrameThreshold;if(!this.currentData.isVideoEncoderHardware&&(s||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(s,i){super(s,i,p.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=s.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=s.highEncodeCpuMsThreshold,this.highEncodeCpuMsPerFrameThreshold=s.highEncodeCpuMsPerFrameThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=m},8519113441:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9125397317)),p=u(d(9225479537));let m=r(class extends h.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(s,i){super(s,i,p.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=s.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=m},3308537260:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(8479756130);let h=r(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,a,s){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",s),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let a=0,s=0;const i=m.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,n=i.audioSpeakerDelayMs;typeof n=="number"&&!isNaN(n)&&this.connectionHealthData.setAudioSpeakerDelayMs(n);const o=m.getRTCStatsReport();let f=0,g=0;o.forEach(v=>{v.type==="candidate-pair"&&(v.bytesReceived&&(f+=v.bytesReceived),v.requestsReceived&&(g+=v.requestsReceived),v.responsesReceived&&(g+=v.responsesReceived))});const S=f-this.lastTotalBytesReceived;this.lastTotalBytesReceived=f;const c=g-this.lastTotalStunMessagesReceived;if(this.lastTotalStunMessagesReceived=g,typeof e=="number"&&typeof t=="number"){if(a=e,s=t,a<0||s<0||S<0||c<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,s),S>0||c>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||s>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateVideoEncodingHealth(m),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(m){const a=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),s=m.getVideoUpstreamSsrcs();if(!a||s.length===0){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}let i=!1,e=0,t=0,n=0,o=0;for(const g of s)i||(i=Boolean(m.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",g))),e+=m.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",g),t+=m.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",g),n+=m.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",g),o+=m.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",g);const f=o>0?e/o:0;this.connectionHealthData.setIsVideoEncoderHardware(Boolean(i)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(f),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(n),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(m,a){m.unshift(a),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{u.Maybe.of(m.connectionHealthDidChange).map(a=>a.bind(m)(this.connectionHealthData.clone()))})}constructor(m,a,s,i,e){this.audioVideoController=m,this.realtimeController=a,this.connectionHealthData=s,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.lastTotalStunMessagesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},9946496941:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.Modality="#content"})(d||(d={})),l.default=d},813510865:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(570155317)),m=h(d(5903145429));let a=r(class Ph{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return u(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return u(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new p.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||Ph.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||Ph.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},3061658033:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(g,S,c,v){function _(E){return E instanceof c?E:new c(function(b){b(E)})}return r(_,"adopt"),new(c||(c=Promise))(function(E,b){function T(w){try{O(v.next(w))}catch(D){b(D)}}r(T,"fulfilled");function I(w){try{O(v.throw(w))}catch(D){b(D)}}r(I,"rejected");function O(w){w.done?E(w.value):_(w.value).then(T,I)}r(O,"step"),O((v=v.apply(g,S||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(78129611)),m=h(d(4283440356)),a=h(d(3981501552)),s=h(d(5519271617)),i=h(d(7416186200)),e=d(8479756130),t=h(d(256606391)),n=h(d(9623039021)),o=h(d(9946496941));let f=r(class{static createContentShareMeetingSessionConfigure(S){const c=new m.default;return c.meetingId=S.meetingId,c.externalMeetingId=S.externalMeetingId,c.urls=S.urls,c.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,c.credentials=new a.default,c.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,c.credentials.externalUserId=S.credentials.externalUserId,c.credentials.joinToken=S.credentials.joinToken+o.default.Modality,c.meetingFeatures=S.meetingFeatures.clone(),c.videoDownlinkBandwidthPolicy=new t.default,c}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,c){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new n.default(this.contentAudioVideo.logger,c)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return u(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===p.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let c=0;c<this.mediaStreamBroker.mediaStream.getTracks().length;c++)this.mediaStreamBroker.mediaStream.getTracks()[c].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,c){return u(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,c);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(c=>c.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(c=>c.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return u(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const c of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(c)&&S(c)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(c=>{e.Maybe.of(c.contentShareDidStop).map(v=>v.call(c))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,c,v,_)=>{const E=new s.default(S).hasModality(s.default.MODALITY_CONTENT),b=new s.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!E||!b||!c||this.contentShareTile)return;const T=this.mediaStreamBroker.mediaStream;if(T!=null&&T.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const I=T.getVideoTracks()[0];let O,w;if(I.getSettings){const D=I.getSettings();O=D.width,w=D.height}else{const D=I.getCapabilities();O=D.width,w=D.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,T,O,w,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(I=>{e.Maybe.of(I.contentShareDidStart).map(O=>O.call(I))})})}constructor(S,c,v){this.mediaStreamBroker=S,this.contentAudioVideo=c,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=f},8532769532:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let u=r(class Xs{static register(){!("document"in d.g)||!document.addEventListener||Xs.shouldRegisterCSPMonitor&&(Xs.added||(document.addEventListener("securitypolicyviolation",Xs.listener),Xs.added=!0))}static unregister(){!("document"in d.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Xs.listener),Xs.loggers=new Set,Xs.added=!1)}static disable(){Xs.shouldRegisterCSPMonitor=!1,Xs.unregister()}static addLogger(p){p&&Xs.loggers.add(p)}static removeLogger(p){p&&Xs.loggers.delete(p)}},"CSPMonitor");l.default=u,u.loggers=new Set,u.shouldRegisterCSPMonitor=!0,u.added=!1,u.listener=h=>{const p=`Security Policy Violation
Blocked URI: ${h.blockedURI}
Violated Directive: ${h.violatedDirective}
Original Policy: ${h.originalPolicy}
Document URI: ${h.documentURI}
Source File: ${h.sourceFile}
Line No.: ${h.lineNumber}
`;for(const m of u.loggers)m.error(p);u.loggers.size===0&&console.error(p)}},2771660234:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(h,p,m,a,s,i){this.timestampMs=h,this.topic=p,this.data=m,this.senderAttendeeId=a,this.senderExternalUserId=s,this.throttled=!!i}},"DataMessage");l.default=d},4037901050:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function d(u){return u&&"destroy"in u}r(d,"isDestroyable"),l.isDestroyable=d},7527964870:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function d(u){return!!u&&typeof u=="object"&&"mute"in u&&"stop"in u&&"intrinsicDevice"in u}r(d,"isAudioTransformDevice"),l.isAudioTransformDevice=d},5903145429:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(O,w,D,R){function L(H){return H instanceof D?H:new D(function(K){K(H)})}return r(L,"adopt"),new(D||(D=Promise))(function(H,K){function ee(ce){try{ae(R.next(ce))}catch(Te){K(Te)}}r(ee,"fulfilled");function q(ce){try{ae(R.throw(ce))}catch(Te){K(Te)}}r(q,"rejected");function ae(ce){ce.done?H(ce.value):L(ce.value).then(ee,q)}r(ae,"step"),ae((R=R.apply(O,w||[])).next())})},h=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(570155317)),m=h(d(7597464201)),a=h(d(7416186200)),s=h(d(7763852557)),i=d(8479756130),e=h(d(1552134416)),t=h(d(8228544095)),n=d(7527964870),o=h(d(265897750)),f=h(d(6761005763)),g=h(d(1633866641)),S=h(d(6586096691)),c=h(d(7387765922)),v=h(d(4976434844)),_=h(d(6582440864)),E=h(d(78129611)),b=d(9009314017);let T=r(class Pr{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(w=this.mediaDeviceWrapper)===null||w===void 0||w.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(w=this.mediaDeviceWrapper)===null||w===void 0||w.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return u(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audioinput",w);return this.trace("listAudioInputDevices",w,D),D})}listVideoInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("videoinput",w);return this.trace("listVideoInputDevices",w,D),D})}listAudioOutputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audiooutput",w);return this.trace("listAudioOutputDevices",w,D),D})}pushAudioMeetingStateForPermissions(w){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(w===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(w){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(w===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(w){return u(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(w))})}startAudioInputTask(w){var D;return u(this,void 0,void 0,function*(){if(w===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return n.isAudioTransformDevice(w)?(this.logger.info(`Choosing transform input device ${w}`),yield this.chooseAudioTransformInputDevice(w)):(this.logger.info(`Choosing intrinsic audio input device ${w}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",w)),this.trace("startAudioInputDevice",w,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(D=this.transform)===null||D===void 0?void 0:D.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(R){throw R}})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return u(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(w){var D;return u(this,void 0,void 0,function*(){if(((D=this.transform)===null||D===void 0?void 0:D.device)===w)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const R=Pr.getAudioContext();if(!(R instanceof OfflineAudioContext))switch(R.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield R.resume()}let L;try{L=yield w.createAudioNode(R)}catch(K){throw this.logger.error(`Unable to create transform device node: ${K}.`),K}const H=yield w.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",H),this.logger.debug(`Got inner stream: ${H}.`),this.setTransform(w,L)})}chooseVideoTransformInputDevice(w){var D;return u(this,void 0,void 0,function*(){if(this.eventController&&w instanceof e.default&&w.passEventControllerToProcessors(this.eventController),w===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const R=this.chosenVideoTransformDevice;R&&this.logger.info("Switched from previous VideoTransformDevice");const L=!!R,H=yield w.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((D=this.activeDevices.video)===null||D===void 0?void 0:D.stream,H)){this.logger.info("video transform device needs new intrinsic device"),L&&R.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=w,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",H),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=w,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield w.transformStream(this.activeDevices.video.stream)})}startVideoInput(w){return u(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(w))})}startVideoInputTask(w){return u(this,void 0,void 0,function*(){if(!w){this.logger.error("Invalid video input device");return}try{return b.isVideoTransformDevice(w)?(this.logger.info(`Choosing video transform device ${w}`),yield this.chooseVideoTransformInputDevice(w),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",w),this.trace("startVideoInputDevice",w),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(D){throw D}})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return u(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(w){return u(this,void 0,void 0,function*(){this.audioOutputDeviceId=w,this.watchForDeviceChangesIfNecessary();const D=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(D),this.trace("chooseAudioOutput",w,null)})}addDeviceChangeObserver(w){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(w),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(w){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(w),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var w,D;if(!this.activeDevices.audio)return null;const R=(D=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||D===void 0?void 0:D.end;if(R){const L=R.context.createAnalyser();return L.removeOriginalInputs=()=>{try{R.disconnect(L)}catch{}},R.connect(L),L}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(w){const D=Pr.getAudioContext(),R=D.createAnalyser(),L=D.createMediaStreamSource(w);return L.connect(R),this.trace("createAnalyserNodeForAudioInput"),R.removeOriginalInputs=()=>{try{L.disconnect(R)}catch{}},R}startVideoPreviewForVideoInput(w){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",w.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,w,!0),this.trace("startVideoPreviewForVideoInput",w.id)}stopVideoPreviewForVideoInput(w){t.default.disconnectVideoStreamFromVideoElement(w,!1),this.trace("stopVideoPreviewForVideoInput",w.id)}setDeviceLabelTrigger(w){if(this.deviceInfoCache){for(const D of this.deviceInfoCache)if(!D.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=w,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(w){let D=null;return this.useWebAudio?(D=Pr.getAudioContext().createMediaStreamSource(w),D.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",w.id),D}chooseVideoInputQuality(w,D,R){const L=this.browserBehavior.requiresResolutionAlignment(w,D);this.videoInputQualitySettings=new E.default(L[0],L[1],R)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(w){return u(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(w){const D=this.activeDevices[w];if(!D)return;const R=D.endedCallback,L=D.trackMuteCallback,H=D.trackUnmuteCallback;for(const K of D.stream.getTracks())K.stop(),R&&K.removeEventListener("ended",R),L&&K.removeEventListener("mute",L),H&&K.removeEventListener("unmute",H),delete D.endedCallback,delete D.trackMuteCallback,delete D.trackUnmuteCallback,delete this.activeDevices[w]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(w){var D;let R=this.activeDevices.audio;if(this.useWebAudio&&(R=this.getMediaStreamDestinationNode()),!!R){for(const L of R.stream.getTracks())L.enabled!==w&&(L.enabled=w);this.muted!==!w&&(this.muted=!w,(D=this.transform)===null||D===void 0||D.device.mute(this.muted))}}static getIntrinsicDeviceId(w){if(!w)return;if(typeof w=="string")return w;if(w.id)return w.id;const R=w.deviceId;if(!R)return;if(typeof R=="string"||Array.isArray(R))return R;const L=R;if(typeof L.exact=="string"||Array.isArray(L.exact))return L.exact}static createEmptyAudioDevice(){return Pr.synthesizeAudioDevice(0)}static synthesizeAudioDevice(w){const D=Pr.getAudioContext(),R=D.createMediaStreamDestination();if(w){const L=D.createGain();L.gain.value=.1,L.connect(R);const H=D.createOscillator();H.frequency.value=w,H.connect(L),H.start()}else{const L=D.createBufferSource();try{L.buffer=D.createBuffer(1,D.sampleRate*5,D.sampleRate)}catch(H){if(H&&H.name==="NotSupportedError")L.buffer=D.createBuffer(1,Pr.defaultSampleRate*5,Pr.defaultSampleRate);else throw H}L.buffer.getChannelData(0)[0]=3e-4,L.loop=!0,L.connect(R),L.start()}return R.stream}listDevicesOfKind(w,D){return u(this,void 0,void 0,function*(){return(D||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(w)})}updateDeviceInfoCacheFromBrowser(){var w;return u(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let R=yield navigator.mediaDevices.enumerateDevices(),L=!0;for(const H of R)if(!H.label){L=!1;break}if(!L)try{this.logger.info("attempting to trigger media device labels since they are hidden");const H=yield this.deviceLabelTrigger();R=yield navigator.mediaDevices.enumerateDevices();for(const K of H.getTracks())K.stop()}catch(H){this.logger.info("unable to get media device labels"),(w=this.eventController)===null||w===void 0||w.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(H)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(R)}`),this.deviceInfoCache=R})}listCachedDevicesOfKind(w){const D=[];if(this.deviceInfoCache)for(const R of this.deviceInfoCache)R.kind===w&&D.push(R);return D}handleDeviceChange(){return u(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const w=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),R=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const L=this.listCachedDevicesOfKind("audioinput"),H=this.listCachedDevicesOfKind("videoinput"),K=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(ee=>{this.areDeviceListsEqual(w,L)||i.Maybe.of(ee.audioInputsChanged).map(q=>q.bind(ee)(L)),this.areDeviceListsEqual(D,H)||i.Maybe.of(ee.videoInputsChanged).map(q=>q.bind(ee)(H)),this.areDeviceListsEqual(R,K)||i.Maybe.of(ee.audioOutputsChanged).map(q=>q.bind(ee)(K))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(w,D){return u(this,void 0,void 0,function*(){try{w==="audio"?(this.useWebAudio&&this.browserBehavior.requiresAudioContextResetOnDeviceFailureForWebAudio()?(this.logger.warn("Audio input device which was active is no longer available, suspending and resuming audio context before resetting to empty device to ensure packets are sent"),yield this.stopAudioInput(),Pr.suspendAudioContext(),Pr.resumeAudioContext()):this.logger.warn("Audio input device which was active is no longer available, resetting to empty device to ensure packets are sent"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}w==="audio"?this.forEachObserver(R=>{i.Maybe.of(R.audioInputStreamEnded).map(L=>L.bind(R)(D))}):this.forEachObserver(R=>{i.Maybe.of(R.videoInputStreamEnded).map(L=>L.bind(R)(D))})})}forEachObserver(w){for(const D of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(D)&&w(D)})}forEachMediaStreamBrokerObserver(w){for(const D of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(D)&&w(D)})}areDeviceListsEqual(w,D){return JSON.stringify(w.map(R=>JSON.stringify(R)).sort())===JSON.stringify(D.map(R=>JSON.stringify(R)).sort())}intrinsicDeviceAsMediaStream(w){return w&&w.id?w:null}hasSameMediaStreamId(w,D,R){var L,H,K,ee;let q;return w==="audio"?(q=R==null?void 0:R.audio.streamId,!!q&&q===((H=(L=D.constraints)===null||L===void 0?void 0:L.audio)===null||H===void 0?void 0:H.streamId)):(q=R==null?void 0:R.video.streamId,!!q&&q===((ee=(K=D==null?void 0:D.constraints)===null||K===void 0?void 0:K.video)===null||ee===void 0?void 0:ee.streamId))}hasSameGroupId(w,D,R){if(w==="")return!0;const L=Pr.getIntrinsicDeviceId(R);return this.logger.debug(`Checking deviceIds ${L} of type ${typeof L} with groupId ${w}`),typeof L=="string"&&w===this.getGroupIdFromDeviceId(D,L)}getGroupIdFromDeviceId(w,D){if(this.deviceInfoCache!==null){const R=this.listCachedDevicesOfKind(`${w}input`).find(L=>L.deviceId===D);if(R&&R.groupId)return this.logger.debug(`GroupId of deviceId ${D} found in cache is ${R.groupId}`),R.groupId}return this.logger.debug(`GroupId of deviceId ${D} found in cache is empty`),""}handleGetUserMediaError(w,D){if(!w)throw new f.default(w);switch(w.name){case"NotReadableError":case"TrackStartError":throw new S.default(w);case"NotFoundError":case"DevicesNotFoundError":throw new g.default(w);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw D&&D<Pr.permissionDeniedOriginDetectionThresholdMs?new v.default(w,"Permission denied by browser"):new v.default(w,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new c.default(w);case"TypeError":throw new _.default(w);case"AbortError":default:throw new f.default(w)}}matchesDeviceSelection(w,D,R,L){return R&&R.stream.active&&(this.hasSameMediaStreamId(w,R,L)||R.groupId!==null&&this.hasSameGroupId(R.groupId,w,D))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(R.constraints)} to proposed constraints ${JSON.stringify(L)}`),R.matchesConstraints(L)):!1}chooseInputIntrinsicDevice(w,D){var R,L;return u(this,void 0,void 0,function*(){const H=this.getMediaStreamConstraints(w,D);if(this.matchesDeviceSelection(w,D,this.activeDevices[w],H)){this.logger.info(`reusing existing ${w} input device`);return}this.activeDevices[w]&&this.activeDevices[w].stream&&this.stopTracksAndRemoveCallbacks(w);const K=Date.now(),ee=new o.default;try{this.logger.info(`requesting new ${w} device with constraint ${JSON.stringify(H)}`);const q=this.intrinsicDeviceAsMediaStream(D);w==="audio"&&D===null?(ee.stream=Pr.createEmptyAudioDevice(),ee.constraints=null):q?(this.logger.info(`using media stream ${q.id} for ${w} device`),ee.stream=q,ee.constraints=H):(ee.stream=yield navigator.mediaDevices.getUserMedia(H),ee.constraints=H),yield this.handleNewInputDevice(w,ee)}catch(q){const ae=this.getErrorMessage(q);w==="audio"?(R=this.eventController)===null||R===void 0||R.publishEvent("audioInputFailed",{audioInputErrorMessage:ae}):(L=this.eventController)===null||L===void 0||L.publishEvent("videoInputFailed",{videoInputErrorMessage:ae}),this.logger.error(`failed to get ${w} device for constraints ${JSON.stringify(H)}: ${ae}`);let ce=!0;if(q&&"constraint"in q&&(this.logger.error(`Over-constrained by constraint: ${q.constraint}`),this.useMediaConstraintsFallback)){const Te=this.getMediaStreamConstraints(w,D,!0),ke=JSON.stringify(Te);if(ke!==JSON.stringify(H)){this.logger.info(`retry requesting new ${w} device with minimal constraint ${ke}`);try{ee.stream=yield navigator.mediaDevices.getUserMedia(Te),ee.constraints=Te,yield this.handleNewInputDevice(w,ee),ce=!1}catch(tt){this.logger.error(`failed to get ${w} device for constraints ${ke}: ${this.getErrorMessage(tt)}`)}}}if(ce){if(w==="audio"){this.logger.info(`choosing null ${w} device instead`);try{ee.stream=Pr.createEmptyAudioDevice(),ee.constraints=null,yield this.handleNewInputDevice(w,ee)}catch(Te){this.logger.error(`failed to choose null ${w} device. ${Te.name}: ${Te.message}`)}}this.handleGetUserMediaError(q,Date.now()-K)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(w){return w?w.name&&w.message?`${w.name}: ${w.message}`:w.name?w.name:w.message?w.message:"UnknownError":"UnknownError"}handleNewInputDevice(w,D){var R;return u(this,void 0,void 0,function*(){this.logger.info(`got ${w} device for constraints ${JSON.stringify(D.constraints)}`);const L=(R=this.getMediaTrackSettings(D.stream))===null||R===void 0?void 0:R.deviceId;D.groupId=L?this.getGroupIdFromDeviceId(w,L):"",this.activeDevices[w]=D,this.logger.debug(`Set activeDevice to ${JSON.stringify(D)}`),this.watchForDeviceChangesIfNecessary();const H=D.stream.getTracks()[0];if(H&&(D.endedCallback=()=>{this.activeDevices[w]&&this.activeDevices[w].stream===D.stream&&(this.handleDeviceStreamEnded(w,L),delete D.endedCallback)},H.addEventListener("ended",D.endedCallback,{once:!0})),w==="audio"){const K=D.stream.getAudioTracks()[0];if(K){const ee=K.getSettings().deviceId||D.stream;D.trackMuteCallback=()=>{this.mediaStreamMuteObserver(ee,!0)},D.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(ee,!1)},K.addEventListener("mute",D.trackMuteCallback,{once:!1}),K.addEventListener("unmute",D.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),K.muted?D.trackMuteCallback():D.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(w,D,R,L){if(L&&this.listCachedDevicesOfKind(`${w}input`).length===1)return!0;const H={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?H.deviceId=D:H.deviceId={exact:D},R&&(H.groupId=R),L?H:w==="video"?(H.width={ideal:this.videoInputQualitySettings.videoWidth},H.height={ideal:this.videoInputQualitySettings.videoHeight},H.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},H):(this.supportSampleRateConstraint()&&(H.sampleRate={ideal:Pr.defaultSampleRate}),this.supportSampleSizeConstraint()&&(H.sampleSize={ideal:Pr.defaultSampleSize}),this.supportChannelCountConstraint()&&(H.channelCount={ideal:Pr.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},H))}getMediaStreamConstraintsFromTrackConstraints(w,D){return w==="audio"?{audio:D}:{video:D}}getMediaStreamConstraints(w,D){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L={};if(!D)return null;const H=this.intrinsicDeviceAsMediaStream(D);if(H)return L.streamId=H.id,this.getMediaStreamConstraintsFromTrackConstraints(w,L);if(typeof D=="string"){let K="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?K=this.getGroupIdFromDeviceId(w,D):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),L=this.calculateMediaStreamConstraints(w,D,K,R),this.getMediaStreamConstraintsFromTrackConstraints(w,L)}return I(D)?(L=this.calculateMediaStreamConstraints(w,D.deviceId,D.groupId,R),this.getMediaStreamConstraintsFromTrackConstraints(w,L)):(L=D,this.getMediaStreamConstraintsFromTrackConstraints(w,L))}deviceInfoFromDeviceId(w,D){if(this.deviceInfoCache===null)return null;for(const R of this.deviceInfoCache)if(R.kind===w&&R.deviceId===D)return R;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(w,D){if(!w||!w.active||!D)return!1;if(D.id)return w.id===D.id;const R=this.getMediaTrackSettings(w);if(!R.deviceId)return!1;const L=Pr.getIntrinsicDeviceId(D);return typeof L=="string"?R.deviceId===L:!1}getMediaTrackSettings(w){var D;return(D=w.getTracks()[0])===null||D===void 0?void 0:D.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const w=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(w)}setTransform(w,D){var R,L;(L=(R=this.transform)===null||R===void 0?void 0:R.nodes)===null||L===void 0||L.end.disconnect(),this.transform={nodes:D,device:w};const H=D==null?void 0:D.end,K=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${H} to destination ${K}.`),H==null||H.connect(K),this.reconnectAudioInputs()}removeTransform(){var w;const D=this.transform;if(D)return(w=this.transform.nodes)===null||w===void 0||w.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),D}attachAudioInputStreamToAudioContext(w){var D;(D=this.audioInputSourceNode)===null||D===void 0||D.disconnect(),this.audioInputSourceNode=Pr.getAudioContext().createMediaStreamSource(w);const R=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(R)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Pr.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var w,D;return((D=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||D===void 0?void 0:D.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(w){Pr.defaultLatencyHint=w}static getAudioContext(){if(!Pr.audioContext){const w={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(w.sampleRate=Pr.defaultSampleRate),new p.default().requiresPlaybackLatencyHintForAudioContext()&&(w.latencyHint="playback"),Pr.defaultLatencyHint&&(w.latencyHint=Pr.defaultLatencyHint),Pr.audioContext=new(window.AudioContext||window.webkitAudioContext)(w)}return Pr.audioContext}static suspendAudioContext(){return u(this,void 0,void 0,function*(){return Pr.audioContext?Pr.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return u(this,void 0,void 0,function*(){return Pr.audioContext?Pr.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(Pr.audioContext)try{Pr.audioContext.close()}catch{}Pr.audioContext=null}addMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.add(w)}removeMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.delete(w)}publishVideoInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(D=>{D.videoInputDidChange&&D.videoInputDidChange(w)}),this.pushVideoMeetingStateForPermissions(w)}publishAudioInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(D=>{D.audioInputDidChange&&D.audioInputDidChange(w)}),this.pushAudioMeetingStateForPermissions(w)}publishAudioOutputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(D=>{D.audioOutputDidChange&&D.audioOutputDidChange(w)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(w,D,R){let L=`API/DefaultDeviceController/${w}`;typeof D<"u"&&(L+=` ${JSON.stringify(D)}`),typeof R<"u"&&(L+=` -> ${JSON.stringify(R)}`),this.logger.info(L)}constructor(w,D,R=new p.default,L){this.logger=w,this.browserBehavior=R,this.eventController=L,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new s.default,this.videoInputTaskQueue=new s.default,this.muted=!1,this.mediaStreamMuteObserver=(q,ae)=>{for(const ce of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(ce)&&ce.audioInputMuteStateChanged&&ce.audioInputMuteStateChanged(q,ae)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:H=!1,useMediaConstraintsFallback:K=!0}=D||{};this.useWebAudio=H,this.useMediaConstraintsFallback=K,this.videoInputQualitySettings=new E.default(Pr.defaultVideoWidth,Pr.defaultVideoHeight,Pr.defaultVideoFrameRate);const ee=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=ee[0],this.videoInputQualitySettings.videoHeight=ee[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const q=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(q)}`)}catch(q){w.error(q.message)}}},"DefaultDeviceController");l.default=T,T.permissionDeniedOriginDetectionThresholdMs=500,T.defaultVideoWidth=960,T.defaultVideoHeight=540,T.defaultVideoFrameRate=15,T.defaultSampleRate=48e3,T.defaultSampleSize=16,T.defaultChannelCount=1,T.audioContext=null;function I(O){return typeof O=="object"&&"deviceId"in O&&"groupId"in O&&"kind"in O&&"label"in O}r(I,"isMediaDeviceInfo")},265897750:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{matchesConstraints(h){return JSON.stringify(this.constraints)===JSON.stringify(h)}constructor(){this.groupId=""}},"DeviceSelection");l.default=d},6761005763:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class extends Error{constructor(h,p){super(p||"Error fetching device."),this.cause=h,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=d},5373022036:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const p=h(d(1632645482)),m=h(d(78129611));let a=r(class extends p.default{destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,n){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let s=r(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=s},1633866641:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6761005763));let p=r(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=p},6586096691:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6761005763));let p=r(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=p},7387765922:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6761005763));let p=r(class extends h.default{constructor(a,s){super(a),this.constraint=s,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=p},4976434844:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6761005763));let p=r(class extends h.default{constructor(a,s){super(a,s),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=p},371229070:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{mute(p){return d(this,void 0,void 0,function*(){})}stop(){var p;return d(this,void 0,void 0,function*(){(p=this.node)===null||p===void 0||p.disconnect()})}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.inner})}createAudioNode(p){var m;return d(this,void 0,void 0,function*(){return(m=this.node)===null||m===void 0||m.disconnect(),this.node=yield this.createSingleAudioNode(p),{start:this.node,end:this.node}})}constructor(p){this.inner=p}},"SingleNodeAudioTransformDevice");l.default=u},6582440864:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6761005763));let p=r(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=p},78129611:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return this.videoWidth===h.videoWidth&&this.videoHeight===h.videoHeight&&this.videoFrameRate===h.videoFrameRate}constructor(h,p,m){this.videoWidth=h,this.videoHeight=p,this.videoFrameRate=m}},"VideoQualitySettings");l.default=d,d.VideoDisabled=new d(0,0,0),d.VideoResolutionHD=new d(1280,720,30),d.VideoResolutionFHD=new d(1920,1080,30),d.VideoResolutionUHD=new d(3840,2160,30)},9009314017:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function d(u){return!!u&&typeof u=="object"&&"transformStream"in u&&"stop"in u&&"intrinsicDevice"in u}r(d,"isVideoTransformDevice"),l.isVideoTransformDevice=d},626864851:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{destroy(){return d(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(p){this.observerQueue.add(p),p.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(p){this.observerQueue.delete(p)}constructor(p,m){if(this.devicePixelRatioSource=p,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(s=>{s.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):m.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=u},249203560:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=d},259435216:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(t,n,o,f){function g(S){return S instanceof o?S:new o(function(c){c(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,c){function v(b){try{E(f.next(b))}catch(T){c(T)}}r(v,"fulfilled");function _(b){try{E(f.throw(b))}catch(T){c(T)}}r(_,"rejected");function E(b){b.done?S(b.value):g(b.value).then(v,_)}r(E,"step"),E((f=f.apply(t,n||[])).next())})},h=this&&this.__rest||function(t,n){var o={};for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&n.indexOf(f)<0&&(o[f]=t[f]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,f=Object.getOwnPropertySymbols(t);g<f.length;g++)n.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(t,f[g])&&(o[f[g]]=t[f[g]]);return o},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=p(d(4953773007)),a=p(d(7080398225)),s=p(d(5318074243)),i=d(759573094);let e=r(class Ka{addEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.addEventListener||!("document"in d.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(n){(n.type==="visibilitychange"&&document.visibilityState==="hidden"||n.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.removeEventListener||!("document"in d.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var n;this.removeEventListeners(),this.addEventListeners(),(n=this.intervalScheduler)===null||n===void 0||n.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var n;(n=this.intervalScheduler)===null||n===void 0||n.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(n){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(n)}`);const{name:o,ts:f,attributes:g}=n,S=g&&this.filterAttributes(g,this.attributesToFilter),c=Object.assign({name:o,ts:f},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(c)}`);const v=this.getSize(c);if(v>Ka.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${Ka.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(c)}`),this.sendEventImmediately({name:o,ts:f,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(c),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const _=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(_),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(n,o){const f=new Set(o);return Object.keys(n).filter(S=>f.has(S)).forEach(S=>delete n[S]),n}initializeAndGetCurrentIngestionEvent(){const n={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(n),n}bufferItemThresholdReached(n){return n+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Ka.MAX_PAYLOAD_ITEMS}getSize(n){let o=0;if(typeof n=="object")for(const[f,g]of Object.entries(n))o+=this.getPrimitiveSize(f),o+=this.getSize(g);else o+=this.getPrimitiveSize(n);return o}getPrimitiveSize(n){let o=0;return typeof n=="string"?o+=n.length*2:typeof n=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(n=Math.min(this.buffer.length,n+1),this.buffer.splice(o,n))}makeBeaconRequestBody(n){const o={metadata:this.metadata,events:n,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(n){const o={metadata:this.metadata,events:n};return JSON.stringify(o)}sendEventImmediately(n){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(n)}`);const{name:o,ts:f,attributes:g}=n,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:f},g)]};let c=!1,v=null;const _=this.makeRequestBody([S]);try{if(v=yield this.send(_),v.ok){try{const E=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${_}, message: ${JSON.stringify(E)}`)}catch(E){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${E} for event ${_}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${_} with response status ${v.status}`),c=!0}catch(E){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${_} to the ingestion endpoint ${E}.`),c=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const b=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${b}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,b)?c=!1:c=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${_}`),c=!0}}c&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${_}`),this.failedIngestionEvents.push(S))})}send(n){return u(this,void 0,void 0,function*(){const o=new m.default(Ka.RETRY_FIXED_BACKOFF_WAIT_MS,Ka.RETRY_SHORT_BACKOFF_MS,Ka.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:n});if(g.ok||!Ka.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${n} due to status code ${g.status}.`),f++,f<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield i.wait(S)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${n}`)}catch(f){throw f}})}sendBeacon(){return u(this,void 0,void 0,function*(){const n=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(n)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);n.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));n.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{n.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),n.length===0)return;const o=this.makeBeaconRequestBody(n);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(n,o,f,g,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=H=>({type:H.type,v:H.v,payloads:[...H.payloads]}),this.sendEvents=()=>u(this,void 0,void 0,function*(){if(this.lock)return;const H=this.getItems(this.flushSize);if(H.length===0)return;this.lock=!0;const K=this.makeRequestBody(H);let ee=!1;const q=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(q,H);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${K}`);const ae=yield this.send(K);if(this.cancellableEvents.delete(q),!ae.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${K} with response status ${ae.status}`),ee=!0;else try{const ce=yield ae.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${K} message: ${JSON.stringify(ce)}`)}catch(ce){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ce} for events ${K}`)}}catch(ae){ee=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${K} to the ingestion endpoint ${ae}`)}finally{this.lock=!1}ee&&(this.cancellableEvents.delete(q),this.failedIngestionEvents.push(...H))});const c=new s.default(S).getParserResult(),{browserMajorVersion:v}=c,_=h(c,["browserMajorVersion"]),E=o.toJSON(),{type:b,v:T}=E,I=h(E,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},_),I),Object.keys(this.metadata).forEach(H=>this.attributesToFilter.push(H)),this.type=b,this.v=T,this.ingestionURL=f,this.logger=S,this.importantEvents=new Set(g);const{maxBufferCapacityKb:O,totalBufferItems:w,flushSize:D,flushIntervalMs:R,retryCountLimit:L}=n;this.maxBufferCapacityBytes=O*1024,this.totalBufferItems=w,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/w),this.flushIntervalMs=R,this.flushSize=D,this.retryCountLimit=L,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=H=>this.beaconEventHandler(H),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},9897074932:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h=5e3,p=2,m=64,a=100,s=15){this.flushIntervalMs=h,this.flushSize=p,this.maxBufferCapacityKb=m,this.totalBufferItems=a,this.retryCountLimit=s}},"EventBufferConfiguration");l.default=d},3682464637:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(f,g,S,c){function v(_){return _ instanceof S?_:new S(function(E){E(_)})}return r(v,"adopt"),new(S||(S=Promise))(function(_,E){function b(O){try{I(c.next(O))}catch(w){E(w)}}r(b,"fulfilled");function T(O){try{I(c.throw(O))}catch(w){E(w)}}r(T,"rejected");function I(O){O.done?_(O.value):v(O.value).then(b,T)}r(I,"step"),I((c=c.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(5037727051),m=d(4037901050),a=h(d(7434755214)),s=h(d(9496487200)),i=h(d(9137110465)),e=h(d(7416186200)),t=h(d(1877666836)),n=h(d(4385454145));let o=r(class Cl{addObserver(g){this.observerSet.add(g)}removeObserver(g){this.observerSet.delete(g)}forEachObserver(g){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&g(S)})}publishEvent(g,S){return u(this,void 0,void 0,function*(){const c=Date.now();this.meetingHistoryStates.push({name:g,timestampMs:c});const v=Object.freeze(Object.assign(this.getAttributes(c),S));this.forEachObserver(_=>{_.eventDidReceive(g,v)}),this.reportEvent(g,c,S)})}reportEvent(g,S,c){var v;return u(this,void 0,void 0,function*(){let _;try{c&&(_=n.default(c)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,g,_)}catch(E){this.logger.error(`Error reporting event ${E}`)}})}setupEventReporter(g,S,c){if(c)this._eventReporter=c;else if(g.urls){const v=g.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:_,credentials:{attendeeId:E,joinToken:b}}=g,T=new i.default(_,E,b),I=new a.default(T,v);this._eventReporter=new s.default(I,S)}}}getAttributes(g){var S,c;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||Cl.UNAVAILABLE,osVersion:((c=this.parserResult)===null||c===void 0?void 0:c.os.version)||Cl.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:g}}get eventReporter(){return this._eventReporter}destroy(){return u(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(g,S,c){var v,_,E,b,T,I,O;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=g,this.setupEventReporter(g,S,c);try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null}catch(w){this.logger.error(w.message)}this.browserMajorVersion=((E=(_=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||_===void 0?void 0:_.version)===null||E===void 0?void 0:E.split(".")[0])||Cl.UNAVAILABLE,this.browserName=((b=this.parserResult)===null||b===void 0?void 0:b.browser.name)||Cl.UNAVAILABLE,this.browserVersion=((T=this.parserResult)===null||T===void 0?void 0:T.browser.version)||Cl.UNAVAILABLE,this.deviceName=[((I=this.parserResult)===null||I===void 0?void 0:I.device.vendor)||"",((O=this.parserResult)===null||O===void 0?void 0:O.device.model)||""].join(" ").trim()||Cl.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},4385454145:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=r(u=>{const h={};for(const[p,m]of Object.entries(u))if(!(m==null||m===""))if(typeof m=="number"||typeof m=="string")h[p]=m;else throw new TypeError("Unhandled type received while flattening attributes.");return h},"flattenEventAttributes");l.default=d},7434755214:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9897074932));let p=r(class{constructor(a,s,i=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=s,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");l.default=p},9496487200:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(4037901050),m=h(d(259435216));let a=r(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return u(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(n){this.logger.error(`Event Reporting - Error adding event to buffer ${n}`)}})}destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),p.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:n,eventBufferConfiguration:o}=i,{eventsToIgnore:f}=t;this.eventBuffer=new m.default(o,t,n,this.importantEvents,e),this.logger=e,this.eventsToIgnore=f,this.start()}},"DefaultMeetingEventReporter");l.default=a},1778130182:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reportEvent(h,p,m){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=d},9137110465:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const h={};return h.type=this.type,h.v=this.v,h.meetingId=this.meetingId,h.attendeeId=this.attendeeId,h}constructor(h,p,m,a=[]){this.type="Meet",this.v=1,this.meetingId=h,this.attendeeId=p,this.eventsToIgnore=a,this.authenticationToken=m}},"MeetingEventsClientConfiguration");l.default=d},4378636601:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(Oo){return Oo&&Oo.__esModule?Oo:{default:Oo}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoElementResolutionMonitor=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=l.MeetingReadinessCheckerConfiguration=void 0,l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=l.RedundantAudioEncoderWorkerCode=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=l.VideoEncodingCpuConnectionHealthPolicy=void 0;const h=u(d(7176913269));l.AllHighestVideoBandwidthPolicy=h.default;const p=u(d(2782081498));l.ApplicationMetadata=p.default;const m=u(d(7416186200));l.AsyncScheduler=m.default;const a=u(d(44274307));l.AttachMediaInputTask=a.default;const s=u(d(2911000564));l.Attendee=s.default;const i=u(d(5018804390));l.AudioLogEvent=i.default;const e=u(d(3416082494));l.AudioProfile=e.default;const t=u(d(742803803));l.AudioVideoControllerState=t.default;const n=u(d(4384549035));l.BackgroundBlurStrength=n.default;const o=u(d(8163389666));l.BackgroundBlurVideoFrameProcessor=o.default;const f=u(d(8119752156));l.BackgroundFilterVideoFrameProcessor=f.default;const g=u(d(9876192012));l.BackgroundReplacementVideoFrameProcessor=g.default;const S=u(d(9125397317));l.BaseConnectionHealthPolicy=S.default;const c=u(d(9651796943));l.BaseTask=c.default;const v=u(d(4492438224));l.BitrateParameters=v.default;const _=u(d(8532769532));l.CSPMonitor=_.default;const E=u(d(6011658084));l.CanvasVideoFrameBuffer=E.default;const b=u(d(2582524442));l.CheckAudioConnectivityFeedback=b.default;const T=u(d(669515725));l.CheckAudioInputFeedback=T.default;const I=u(d(3543665272));l.CheckAudioOutputFeedback=I.default;const O=u(d(7210624450));l.CheckCameraResolutionFeedback=O.default;const w=u(d(7107479208));l.CheckContentShareConnectivityFeedback=w.default;const D=u(d(2314522361));l.CheckNetworkTCPConnectivityFeedback=D.default;const R=u(d(1696503949));l.CheckNetworkUDPConnectivityFeedback=R.default;const L=u(d(635336275));l.CheckVideoConnectivityFeedback=L.default;const H=u(d(503480918));l.CheckVideoInputFeedback=H.default;const K=u(d(7344467851));l.CleanRestartedSessionTask=K.default;const ee=u(d(5438824562));l.CleanStoppedSessionTask=ee.default;const q=u(d(6504123882));l.ClientMetricReport=q.default;const ae=u(d(9228821375));l.ClientMetricReportDirection=ae.default;const ce=u(d(8620705262));l.ClientMetricReportMediaType=ce.default;const Te=u(d(8445379153));l.ClientVideoStreamReceivingReport=Te.default;const ke=u(d(4203297362));l.ConnectionHealthData=ke.default;const tt=u(d(7393946074));l.ConnectionHealthPolicyConfiguration=tt.default;const At=u(d(3667484237));l.ConsoleLogger=At.default;const Be=u(d(9946496941));l.ContentShareConstants=Be.default;const $e=u(d(813510865));l.ContentShareMediaStreamBroker=$e.default;const Ze=u(d(38878034));l.CreatePeerConnectionTask=Ze.default;const Je=u(d(320218677));l.CreateSDPTask=Je.default;const dt=u(d(2771660234));l.DataMessage=dt.default;const Ot=u(d(9618816399));l.DefaultActiveSpeakerDetector=Ot.default;const Nt=u(d(8734152567));l.DefaultActiveSpeakerPolicy=Nt.default;const Ve=u(d(5974247229));l.DefaultAudioMixController=Ve.default;const He=u(d(1043709165));l.DefaultAudioVideoController=He.default;const ct=u(d(2033348765));l.DefaultAudioVideoFacade=ct.default;const yt=u(d(570155317));l.DefaultBrowserBehavior=yt.default;const it=u(d(3061658033));l.DefaultContentShareController=it.default;const nn=u(d(5903145429));l.DefaultDeviceController=nn.default;const Xt=u(d(626864851));l.DefaultDevicePixelRatioMonitor=Xt.default;const dn=u(d(3682464637));l.DefaultEventController=dn.default;const bn=u(d(7597464201));l.DefaultMediaDeviceFactory=bn.default;const Rn=u(d(9496487200));l.DefaultMeetingEventReporter=Rn.default;const Zt=u(d(2130074373));l.DefaultMeetingReadinessChecker=Zt.default;const Mn=u(d(606430973));l.DefaultMeetingSession=Mn.default;const Wi=u(d(5753440409));l.DefaultMessagingSession=Wi.default;const Jn=u(d(5519271617));l.DefaultModality=Jn.default;const zn=u(d(4680116077));l.DefaultPingPong=zn.default;const En=u(d(2461656181));l.DefaultRealtimeController=En.default;const sn=u(d(8543192315));l.DefaultReconnectController=sn.default;const oi=u(d(6160394281));l.DefaultSessionStateController=oi.default;const rn=u(d(4859482891));l.DefaultSigV4=rn.default;const cn=u(d(8384002519));l.DefaultSignalingClient=cn.default;const Wt=u(d(659149118));l.DefaultSimulcastUplinkPolicy=Wt.default;const J=u(d(9623039021));l.DefaultSimulcastUplinkPolicyForContentShare=J.default;const Xe=u(d(1636523053));l.DefaultTransceiverController=Xe.default;const nt=u(d(9292265093));l.DefaultTranscriptionController=nt.default;const st=u(d(5318074243));l.DefaultUserAgentParser=st.default;const pt=u(d(1203283221));l.DefaultVideoCaptureAndEncodeParameter=pt.default;const It=u(d(7141843743));l.DefaultVideoElementResolutionMonitor=It.default;const ve=u(d(5153707095));l.DefaultVideoFrameProcessorPipeline=ve.default;const et=u(d(4586125494));l.DefaultVideoFrameProcessorTimer=et.default;const G=u(d(5814977413));l.DefaultVideoStreamIdSet=G.default;const ne=u(d(3420631425));l.DefaultVideoStreamIndex=ne.default;const Me=u(d(8228544095));l.DefaultVideoTile=Me.default;const Re=u(d(3338407955));l.DefaultVideoTileController=Re.default;const Ft=u(d(6875957405));l.DefaultVideoTileFactory=Ft.default;const ot=u(d(1552134416));l.DefaultVideoTransformDevice=ot.default;const Tt=u(d(3805322525));l.DefaultVolumeIndicatorAdapter=Tt.default;const we=u(d(7482759477));l.DefaultWebSocketAdapter=we.default;const Ue=u(d(249203560));l.DevicePixelRatioWindowSource=Ue.default;const F=u(d(265897750));l.DeviceSelection=F.default;const Oe=u(d(9897074932));l.EventBufferConfiguration=Oe.default;const se=u(d(7434755214));l.EventIngestionConfiguration=se.default;const ue=u(d(2568010183));l.FinishGatheringICECandidatesTask=ue.default;const X=u(d(4953773007));l.FullJitterBackoff=X.default;const lt=u(d(4991842071));l.FullJitterBackoffFactory=lt.default;const Ae=u(d(1690170483));l.FullJitterLimitedBackoff=Ae.default;const Ye=u(d(6761005763));l.GetUserMediaError=Ye.default;const Ht=u(d(7241560938));l.GlobalMetricReport=Ht.default;const Mt=u(d(259435216));l.InMemoryJSONEventBuffer=Mt.default;const Qn=u(d(7080398225));l.IntervalScheduler=Qn.default;const $n=u(d(887979666));l.JoinAndReceiveIndexTask=$n.default;const Vn=u(d(8813893041));l.LeaveAndReceiveLeaveAckTask=Vn.default;const kn=u(d(4016680554));l.ListenForVolumeIndicatorsTask=kn.default;const tn=u(d(622992054));l.Log=tn.default;const Gn=u(d(4918602332));l.LogLevel=Gn.default;const Si=u(d(3648270746));l.MediaDeviceProxyHandler=Si.default;const nr=u(d(9137110465));l.MeetingEventsClientConfiguration=nr.default;const ln=u(d(7101830889));l.MeetingFeatures=ln.default;const jt=u(d(9073497328));l.MeetingReadinessCheckerConfiguration=jt.default;const Fn=u(d(4283440356));l.MeetingSessionConfiguration=Fn.default;const Hn=u(d(3981501552));l.MeetingSessionCredentials=Hn.default;const wi=u(d(7111900270));l.MeetingSessionLifecycleEvent=wi.default;const Pi=u(d(8191739119));l.MeetingSessionLifecycleEventCondition=Pi.default;const ni=u(d(8363971156));l.MeetingSessionStatus=ni.default;const Kn=u(d(4474236581));l.MeetingSessionStatusCode=Kn.default;const ji=u(d(4418554613));l.MeetingSessionTURNCredentials=ji.default;const $i=u(d(5992906328));l.MeetingSessionURLs=$i.default;const sr=u(d(1240186630));l.MeetingSessionVideoAvailability=sr.default;const Ai=u(d(2732224314));l.Message=Ai.default;const Lr=u(d(1119407758));l.MessagingSessionConfiguration=Lr.default;const Vi=u(d(2214063486));l.ModelSpecBuilder=Vi.default;const Nr=u(d(4246373854));l.MonitorTask=Nr.default;const _i=u(d(3592211861));l.MultiLogger=_i.default;const Ci=u(d(8001836114));l.NScaleVideoUplinkBandwidthPolicy=Ci.default;const N=u(d(7444592474));l.NoOpAudioVideoController=N.default;const he=u(d(3975743347));l.NoOpDebugLogger=he.default;const je=u(d(5373022036));l.NoOpDeviceController=je.default;const Rt=u(d(1778130182));l.NoOpEventReporter=Rt.default;const Qt=u(d(5350537240));l.NoOpLogger=Qt.default;const An=u(d(1632645482));l.NoOpMediaStreamBroker=An.default;const qn=u(d(9228434098));l.NoOpTask=qn.default;const Pn=u(d(3455625450));l.NoOpVideoElementFactory=Pn.default;const xn=u(d(4008876858));l.NoOpVideoFrameProcessor=xn.default;const Xn=u(d(256606391));l.NoVideoDownlinkBandwidthPolicy=Xn.default;const li=u(d(8577743225));l.NoVideoUplinkBandwidthPolicy=li.default;const Ri=u(d(1633866641));l.NotFoundError=Ri.default;const zi=u(d(6586096691));l.NotReadableError=zi.default;const gr=u(d(7977267467));l.OnceTask=gr.default;const Fr=u(d(9816353112));l.OpenSignalingConnectionTask=Fr.default;const ri=u(d(7387765922));l.OverconstrainedError=ri.default;const Er=u(d(1656097358));l.POSTLogger=Er.default;const Rr=u(d(5061413178));l.ParallelGroupTask=Rr.default;const ei=u(d(4976434844));l.PermissionDeniedError=ei.default;const hr=u(d(5639131082));l.PrefetchOn=hr.default;const si=u(d(4936200234));l.PrefetchSortBy=si.default;const Eo=u(d(7763852557));l.PromiseQueue=Eo.default;const Jr=u(d(3517731918));l.PromoteToPrimaryMeetingTask=Jr.default;const fo=u(d(8504263577));l.RealtimeAttendeePositionInFrame=fo.default;const ho=u(d(6424577011));l.RealtimeState=ho.default;const de=u(d(8830437557));l.RealtimeVolumeIndicator=de.default;const _e=u(d(5932071943));l.ReceiveAudioInputTask=_e.default;const Pe=u(d(9360452255));l.ReceiveRemoteVideoPauseResumeTask=Pe.default;const rt=u(d(4608327356));l.ReceiveVideoInputTask=rt.default;const _t=u(d(4327951460));l.ReceiveVideoStreamIndexTask=_t.default;const Dt=u(d(4705746645));l.ReconnectionHealthPolicy=Dt.default;const pn=u(d(2944630562));l.RedundantAudioEncoder=pn.default;const In=u(d(5110921698));l.RedundantAudioEncoderWorkerCode=In.default;const Nn=u(d(9193449927));l.RedundantAudioRecoveryMetricReport=Nn.default;const Tn=u(d(3087881035));l.RunnableTask=Tn.default;const di=u(d(5603242550));l.SDP=di.default;const an=u(d(4526495239));l.SDPCandidateType=an.default;const ki=u(d(4041719349));l.SDPMediaSection=ki.default;const Zn=u(d(9769959402));l.SendAndReceiveDataMessagesTask=Zn.default;const lr=u(d(7549473166));l.SendingAudioFailureConnectionHealthPolicy=lr.default;const br=u(d(1690462647));l.SerialGroupTask=br.default;const Cr=u(d(498975381));l.ServerSideNetworkAdaption=Cr.default;const pi=u(d(2981760980));l.SessionStateControllerAction=pi.default;const vi=u(d(1929156046));l.SessionStateControllerDeferPriority=vi.default;const Di=u(d(728914651));l.SessionStateControllerState=Di.default;const Yi=u(d(5798697844));l.SessionStateControllerTransitionResult=Yi.default;const Or=u(d(4784106923));l.SetLocalDescriptionTask=Or.default;const Zr=u(d(3516966482));l.SetRemoteDescriptionTask=Zr.default;const Mi=u(d(3308537260));l.SignalingAndMetricsConnectionMonitor=Mi.default;const ro=u(d(6963141047));l.SignalingClientConnectionRequest=ro.default;const pr=u(d(5787590482));l.SignalingClientEvent=pr.default;const qr=u(d(201131498));l.SignalingClientEventType=qr.default;const es=u(d(7090195098));l.SignalingClientJoin=es.default;const is=u(d(718687226));l.SignalingClientSubscribe=is.default;const Jo=u(d(3566593278));l.SignalingClientVideoSubscriptionConfiguration=Jo.default;const Yo=u(d(618497857));l.SimulcastContentShareTransceiverController=Yo.default;const ts=u(d(7833098058));l.SimulcastLayers=ts.default;const Vo=u(d(8588089957));l.SimulcastTransceiverController=Vo.default;const uo=u(d(1509578473));l.SimulcastVideoStreamIndex=uo.default;const bo=u(d(371229070));l.SingleNodeAudioTransformDevice=bo.default;const Io=u(d(2245405125));l.StreamMetricReport=Io.default;const so=u(d(7537455207));l.SubscribeAndReceiveSubscribeAckTask=so.default;const ao=u(d(7477937414));l.TargetDisplaySize=ao.default;const Gr=u(d(3274536108));l.TaskStatus=Gr.default;const Co=u(d(6376806429));l.TimeoutScheduler=Co.default;const Ts=u(d(8265718271));l.TimeoutTask=Ts.default;const Is=u(d(4943490552));l.Transcript=Is.default;const po=u(d(3089406687));l.TranscriptAlternative=po.default;const Ho=u(d(6199310771));l.TranscriptEntity=Ho.default;const Vr=u(d(7682636203));l.TranscriptItem=Vr.default;const oo=u(d(5487209475));l.TranscriptItemType=oo.default;const Yr=u(d(3554880400));l.TranscriptLanguageWithScore=Yr.default;const mo=u(d(5311871957));l.TranscriptResult=mo.default;const lo=u(d(9072755684));l.TranscriptionStatus=lo.default;const ws=u(d(8890069556));l.TranscriptionStatusType=ws.default;const oe=u(d(6582440864));l.TypeError=oe.default;const fe=u(d(1168113665));l.UnusableAudioWarningConnectionHealthPolicy=fe.default;const Ce=u(d(1877666836));l.Versioning=Ce.default;const Ne=u(d(7676538085));l.VideoAdaptiveProbePolicy=Ne.default;const Ge=u(d(6375844864));l.VideoCodecCapability=Ge.default;const Ct=u(d(9225479537));l.VideoEncodingConnectionHealthPolicyName=Ct.default;const ht=u(d(5224309264));l.VideoEncodingCpuConnectionHealthPolicy=ht.default;const Kt=u(d(8519113441));l.VideoEncodingFramerateConnectionHealthPolicy=Kt.default;const $t=u(d(8042793250));l.VideoFxProcessor=$t.default;const on=u(d(4954547171));l.VideoLogEvent=on.default;const en=u(d(8838701689));l.VideoOnlyTransceiverController=en.default;const gn=u(d(4924969612));l.VideoPreference=gn.default;const vn=u(d(4165080297));l.VideoPreferences=vn.default;const Cn=u(d(6836981326));l.VideoPriorityBasedPolicy=Cn.default;const jn=u(d(7255041548));l.VideoPriorityBasedPolicyConfig=jn.default;const Bn=u(d(9648677690));l.VideoQualityAdaptationPreference=Bn.default;const wn=u(d(78129611));l.VideoQualitySettings=wn.default;const hn=u(d(1771494510));l.VideoSource=hn.default;const ci=u(d(8784832088));l.VideoStreamDescription=ci.default;const Ki=u(d(2733652283));l.VideoTileState=Ki.default;const ar=u(d(2830670825));l.VoiceFocusDeviceTransformer=ar.default;const Tr=u(d(8455559234));l.VoiceFocusTransformDevice=Tr.default;const Bt=u(d(4133266271));l.WaitForAttendeePresenceTask=Bt.default;const dr=u(d(6363507833));l.WebSocketReadyState=dr.default;const cr=u(d(9530736010));l.ZLIBTextCompressor=cr.default;const Xi=d(4165080297);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return Xi.MutableVideoPreferences}});const Xr=d(8479756130);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return Xr.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return Xr.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return Xr.Maybe}});const wo=d(7527964870);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return wo.isAudioTransformDevice}});const Mr=d(4037901050);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return Mr.isDestroyable}});const go=d(9009314017);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return go.isVideoTransformDevice}})},3667484237:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4918602332));let p=r(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,s){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${s}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,s=h.default.WARN){this.name=a,this.level=s}},"ConsoleLogger");l.default=p},622992054:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a){this.sequenceNumber=h,this.message=p,this.timestampMs=m,this.logLevel=a}},"Log");l.default=d},4918602332:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var d;(function(u){u[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF"})(d=l.LogLevel||(l.LogLevel={})),l.default=d},3592211861:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4918602332));let p=r(class{info(a){for(const s of this._loggers)s.info(a)}warn(a){for(const s of this._loggers)s.warn(a)}error(a){for(const s of this._loggers)s.error(a)}debug(a){let s,i;typeof a=="string"?i=a:a?i=r(()=>(s||(s=a()),s),"memoized"):i=""+a;for(const e of this._loggers)e.debug(i)}setLogLevel(a){for(const s of this._loggers)s.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=p},3975743347:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4918602332)),p=u(d(5350537240));let m=r(class extends p.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=m},5350537240:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4918602332));let p=r(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=p},1656097358:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7080398225)),m=h(d(622992054)),a=h(d(4918602332));let s=r(class kh{addEventListener(){!this.eventListener||!("window"in d.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in d.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new p.default(this.intervalMs),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(n){console.warn("[POSTLogger] "+n.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const n=Date.now();this.logCapture.push(new m.default(this.sequenceNumber,t,n,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:n=kh.BATCH_SIZE,intervalMs:o=kh.INTERVAL_MS,logLevel:f=a.default.WARN,metadata:g,headers:S}=e;this.url=t,this.batchSize=n,this.intervalMs=o,this.logLevel=f,this.metadata=g,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=s,s.BATCH_SIZE=85,s.INTERVAL_MS=2e3},7597464201:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(3648270746));let p=r(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=p},3648270746:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7416186200)),m=h(d(7080398225));let a=r(class sS{sortedDeviceList(){return u(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)p.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const n=Reflect.get(i,e,t);return typeof n=="function"?n.bind(i):n},this.patchAddEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.add(f),this.scheduler||(this.scheduler=new m.default(sS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(n,i,[o,f,g])}},this.patchRemoveEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.delete(f),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(n,i,[o,f,g])}},this.pollDeviceLists=()=>u(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,n)=>t.deviceId!==this.devices[n].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},1632645482:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(h){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(h){}removeMediaStreamBrokerObserver(h){}},"NoOpMediaStreamBroker");l.default=d},2582524442:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.AudioInputRequestFailed=1]="AudioInputRequestFailed",u[u.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.AudioNotReceived=4]="AudioNotReceived"})(d=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=d},669515725:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(d=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=d},3543665272:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed"})(d=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=d},7210624450:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.ResolutionNotSupported=2]="ResolutionNotSupported",u[u.PermissionDenied=3]="PermissionDenied"})(d=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=d},7107479208:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied",u[u.TimedOut=3]="TimedOut",u[u.ConnectionFailed=4]="ConnectionFailed"})(d=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=d},2314522361:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=d},1696503949:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=d},635336275:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.VideoInputRequestFailed=1]="VideoInputRequestFailed",u[u.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.VideoNotSent=4]="VideoNotSent"})(d=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=d},503480918:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(d=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=d},2130074373:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(T,I,O,w){function D(R){return R instanceof O?R:new O(function(L){L(R)})}return r(D,"adopt"),new(O||(O=Promise))(function(R,L){function H(q){try{ee(w.next(q))}catch(ae){L(ae)}}r(H,"fulfilled");function K(q){try{ee(w.throw(q))}catch(ae){L(ae)}}r(K,"rejected");function ee(q){q.done?R(q.value):D(q.value).then(H,K)}r(ee,"step"),ee((w=w.apply(T,I||[])).next())})},h=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5974247229)),m=h(d(570155317)),a=h(d(5903145429)),s=h(d(4976434844)),i=h(d(9651796943)),e=h(d(8265718271)),t=h(d(2582524442)),n=h(d(669515725)),o=h(d(3543665272)),f=h(d(7210624450)),g=h(d(7107479208)),S=h(d(2314522361)),c=h(d(1696503949)),v=h(d(635336275)),_=h(d(503480918)),E=h(d(9073497328));let b=r(class aS{static delay(I){return u(this,void 0,void 0,function*(){return new Promise(O=>setTimeout(O,I))})}checkAudioInput(I){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(I),yield this.meetingSession.audioVideo.stopAudioInput(),n.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${O}`),O instanceof s.default?n.default.PermissionDenied:n.default.Failed}})}checkAudioOutput(I,O){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return u(this,void 0,void 0,function*(){try{const D=I?a.default.getIntrinsicDeviceId(I):"";return yield this.playTone(D,this.configuration.audioOutputFrequency,w),(yield O())?o.default.Succeeded:o.default.Failed}catch(D){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${D}`),o.default.Failed}finally{this.stopTone()}})}playTone(I,O,w){return u(this,void 0,void 0,function*(){const R=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=O,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const H=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,H),this.gainNode.gain.linearRampToValueAtTime(R,H+.1),this.oscillatorNode.start();const K=new p.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield K.bindAudioDevice({deviceId:I}))}catch(ee){this.logger.error(`Failed to bind audio device: ${ee}`)}try{yield K.bindAudioElement(w||new Audio)}catch(ee){this.logger.error(`Failed to bind audio element: ${ee}`)}yield K.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const I=1,O=.1,w=this.configuration.audioOutputGain,D=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(w,D+O+I),this.gainNode.gain.linearRampToValueAtTime(0,D+O*2+I),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(I){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(I),yield this.meetingSession.audioVideo.stopVideoInput(),_.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${O}`),O instanceof s.default?_.default.PermissionDenied:_.default.Failed}})}checkCameraResolution(I,O,w){return u(this,void 0,void 0,function*(){let D;try{const R=a.default.getIntrinsicDeviceId(I),L={video:this.calculateVideoConstraint(R,O,w)};D=yield navigator.mediaDevices.getUserMedia(L)}catch(R){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${O} height ${w} failed with error ${R}`),R&&R.name==="OverconstrainedError"?f.default.ResolutionNotSupported:R&&R.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{D&&D.getTracks().forEach(function(R){R.stop()})}return f.default.Succeeded})}calculateVideoConstraint(I,O,w){const D=this.browserBehavior.requiresResolutionAlignment(O,w),R={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(R.deviceId=I,R.width=O,R.height=w):(R.deviceId={exact:I},R.width={exact:D[0]},R.height={exact:D[1]}),R}checkContentShareConnectivity(I){return u(this,void 0,void 0,function*(){let O=!1,w=!1;const D={contentShareDidStart:()=>{O=!0}},R={audioVideoDidStart:()=>{w=!0}};try{return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(D),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(I),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w&&O})),w?(yield this.stopMeeting(),O?g.default.Succeeded:g.default.TimedOut):g.default.ConnectionFailed}catch(L){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${L}`),L.name==="NotAllowedError"?g.default.PermissionDenied:g.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(R),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(D)}})}checkAudioConnectivity(I){return u(this,void 0,void 0,function*(){let O=!1;const w={packetsReceived:0},D=this.meetingSession.audioVideo,R={metricsDidReceive(H){H.getRTCStatsReport().forEach(K=>{K.type==="inbound-rtp"&&(K.mediaType==="audio"||K.kind==="audio")&&(w.packetsReceived=K.packetsReceived)})}},L=r((H,K,ee,q)=>{H===this.meetingSession.configuration.credentials.attendeeId&&K&&(O=!0)},"attendeePresenceHandler");try{yield D.startAudioInput(I)}catch(H){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${H}`),H instanceof s.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return D.realtimeSubscribeToAttendeeIdPresence(L),D.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(O,w)})),D.removeObserver(R),D.realtimeUnsubscribeToAttendeeIdPresence(L),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(O,w)?t.default.Succeeded:t.default.AudioNotReceived):(D.removeObserver(R),D.realtimeUnsubscribeToAttendeeIdPresence(L),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(I){return u(this,void 0,void 0,function*(){const O=this.meetingSession.audioVideo;let w=0;const D={metricsDidReceive(R){R.getRTCStatsReport().forEach(H=>{H.type==="outbound-rtp"&&(H.mediaType==="video"||H.kind==="video")&&(w=H.packetsSent)})}};try{yield O.startVideoInput(I)}catch(R){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${R}`),R instanceof s.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return O.addObserver(D),(yield this.startMeeting())?(O.startLocalVideoTile(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w>0})),yield O.stopVideoInput(),yield this.stopMeeting(),O.removeObserver(D),w<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return u(this,void 0,void 0,function*(){let I=!1;const O={metricsDidReceive(D){D.getRTCStatsReport().forEach(L=>{L.type==="candidate-pair"&&L.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),c.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const R=this.originalURLRewriter(D);return R.includes("transport=tcp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(O),I?c.default.Succeeded:c.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,c.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return u(this,void 0,void 0,function*(){let I=!1;const O={metricsDidReceive(D){D.getRTCStatsReport().forEach(L=>{L.type==="candidate-pair"&&L.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const R=this.originalURLRewriter(D);return R.includes("transport=udp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(O),I?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return u(this,void 0,void 0,function*(){let I=!1;const O={audioVideoDidStart:()=>{I=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(O),I})}stopMeeting(){return u(this,void 0,void 0,function*(){let I=!1;const O={audioVideoDidStop:w=>{I=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(O),I})}executeTimeoutTask(I){return u(this,void 0,void 0,function*(){let O=!1,w=r(class extends i.default{cancel(){this.isCancelled=!0}run(){return u(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield I()){O=!0;break}yield aS.delay(this.waitDurationMs)}})}constructor(L,H){super(L),this.waitDurationMs=H,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new w(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),O})}isAudioConnectionSuccessful(I,O){return I&&O.packetsReceived>0}constructor(I,O,w=new E.default){this.logger=I,this.meetingSession=O,this.configuration=w,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");l.default=b},9073497328:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=d},606430973:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(c,v,_,E){function b(T){return T instanceof _?T:new _(function(I){I(T)})}return r(b,"adopt"),new(_||(_=Promise))(function(T,I){function O(R){try{D(E.next(R))}catch(L){I(L)}}r(O,"fulfilled");function w(R){try{D(E.throw(R))}catch(L){I(L)}}r(w,"rejected");function D(R){R.done?T(R.value):b(R.value).then(O,w)}r(D,"step"),D((E=E.apply(c,v||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1043709165)),m=h(d(2033348765)),a=h(d(4953773007)),s=h(d(570155317)),i=h(d(813510865)),e=h(d(3061658033)),t=h(d(8532769532)),n=d(4037901050),o=h(d(3682464637)),f=h(d(8543192315)),g=h(d(7482759477));let S=r(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return u(this,void 0,void 0,function*(){n.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),n.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),n.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new s.default,_=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${_}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,_,E,b){this._eventController=b,this._configuration=v,this._logger=_,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,_)),E.eventController||(E.eventController=this.eventController),this.audioVideoController=new p.default(this._configuration,this._logger,new g.default(this._logger),E,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=E,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const T=new i.default(this._logger);this.contentShareController=new e.default(T,new p.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new g.default(this._logger),T,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},7101830889:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(78129611));let p=r(class lS{clone(){return new lS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,s=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=s}},"MeetingFeatures");l.default=p},4283440356:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(7393946074)),p=u(d(78129611)),m=d(759573094),a=u(d(7101830889)),s=u(d(3981501552)),i=u(d(5992906328));let e=r(class{constructor(n,o){var f,g;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,n){n=m.toLowerCasePropertyNames(n),n.meeting&&(n=n.meeting),this.meetingId=n.meetingid,this.externalMeetingId=n.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=n.mediaplacement.audiohosturl,this.urls.signalingURL=n.mediaplacement.signalingurl,this.urls.turnControlURL=n.mediaplacement.turncontrolurl,n.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=n.mediaplacement.eventingestionurl);const S=r((c,v)=>{switch(c){case"None":return p.default.VideoDisabled;case"HD":return p.default.VideoResolutionHD;case"FHD":return p.default.VideoResolutionFHD;case"UHD":return p.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((f=n.meetingfeatures)===null||f===void 0?void 0:f.video)!==void 0||((g=n.meetingfeatures)===null||g===void 0?void 0:g.content)!==void 0){const c=n.meetingfeatures.video===void 0?"HD":n.meetingfeatures.video.maxresolution,v=n.meetingfeatures.content===void 0?"FHD":n.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(c,p.default.VideoResolutionHD),S(v,p.default.VideoResolutionFHD))}}o&&(o=m.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new s.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},3981501552:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=d},7111900270:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var d;(function(u){u[u.Connecting=0]="Connecting",u[u.Started=1]="Started",u[u.Stopped=2]="Stopped"})(d=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=d},8191739119:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var d;(function(u){u[u.ConnectingNew=0]="ConnectingNew",u[u.ReconnectingExisting=1]="ReconnectingExisting",u[u.StartedNew=2]="StartedNew",u[u.StartedExisting=3]="StartedExisting",u[u.StartedAfterReconnect=4]="StartedAfterReconnect",u[u.StoppedCleanly=5]="StoppedCleanly",u[u.StoppedWithFailure=6]="StoppedWithFailure"})(d=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=d},8363971156:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7344258710),p=u(d(4474236581));let m=r(class Lo{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:case p.default.VideoCallAtSourceCapacity:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.ICEGatheringTimeoutWorkaround:case p.default.ConnectionHealthReconnect:case p.default.RealtimeApiFailed:case p.default.TaskFailed:case p.default.NoAttendeePresent:case p.default.SignalingChannelClosedUnexpectedly:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case p.default.Left:case p.default.AudioJoinedFromAnotherDevice:case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.MeetingEnded:case p.default.AudioDisconnected:case p.default.TURNCredentialsForbidden:case p.default.SignalingBadRequest:case p.default.SignalingRequestFailed:case p.default.VideoCallAtSourceCapacity:case p.default.RealtimeApiFailed:case p.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.ICEGatheringTimeoutWorkaround:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.RealtimeApiFailed:case p.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case p.default.OK:return"Everything is OK so far.";case p.default.Left:return"The attendee left the meeting.";case p.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case p.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case p.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case p.default.MeetingEnded:return"The meeting ended.";case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:return"The audio connection failed.";case p.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case p.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:return"The signaling connection failed.";case p.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case p.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case p.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case p.default.TaskFailed:return"The connection failed. See the error message for more details.";case p.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case p.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case p.default.NoAttendeePresent:return"The attendee was not present.";case p.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case p.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case p.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case p.default.AudioDisconnectAudio:return"The audio connection failed.";case p.default.SignalingChannelClosedUnexpectedly:return"The signaling channel was closed unexpectedly. This may be due to a network change or backend detected failure.";default:{const s=this._statusCode;throw new Error(`Unhandled case: ${s}`)}}}static fromSignalFrame(s){return s.error&&s.error.status?this.fromSignalingStatus(s.error.status):s.type===h.SdkSignalFrame.Type.AUDIO_STATUS?s.audioStatus?this.fromAudioStatus(s.audioStatus.audioStatus):new Lo(p.default.SignalingRequestFailed):s.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new Lo(p.default.AudioVideoWasRemovedFromPrimaryMeeting):new Lo(p.default.OK)}static fromAudioStatus(s){switch(s){case 200:return new Lo(p.default.OK);case 301:return new Lo(p.default.AudioJoinedFromAnotherDevice);case 302:return new Lo(p.default.AudioDisconnectAudio);case 403:return new Lo(p.default.AudioAuthenticationRejected);case 409:return new Lo(p.default.AudioCallAtCapacity);case 410:return new Lo(p.default.MeetingEnded);case 411:return new Lo(p.default.AudioAttendeeRemoved);case 500:return new Lo(p.default.AudioInternalServerError);case 503:return new Lo(p.default.AudioServiceUnavailable);default:switch(Math.floor(s/100)){case 2:return new Lo(p.default.OK);default:return new Lo(p.default.AudioDisconnected)}}}static fromSignalingStatus(s){switch(s){case 206:return new Lo(p.default.VideoCallSwitchToViewOnly);case 509:return new Lo(p.default.VideoCallAtSourceCapacity);case 403:return new Lo(p.default.AudioAuthenticationRejected);case 409:return new Lo(p.default.AudioCallAtCapacity);default:switch(Math.floor(s/100)){case 2:return new Lo(p.default.OK);case 4:return new Lo(p.default.SignalingBadRequest);case 5:return new Lo(p.default.SignalingInternalServerError);default:return new Lo(p.default.SignalingRequestFailed)}}}constructor(s){this._statusCode=s}},"MeetingSessionStatus");l.default=m},4474236581:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var d;(function(u){u[u.OK=0]="OK",u[u.Left=1]="Left",u[u.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",u[u.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",u[u.AudioCallAtCapacity=4]="AudioCallAtCapacity",u[u.MeetingEnded=5]="MeetingEnded",u[u.AudioInternalServerError=6]="AudioInternalServerError",u[u.AudioServiceUnavailable=7]="AudioServiceUnavailable",u[u.AudioDisconnected=8]="AudioDisconnected",u[u.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",u[u.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",u[u.SignalingBadRequest=11]="SignalingBadRequest",u[u.SignalingInternalServerError=12]="SignalingInternalServerError",u[u.SignalingRequestFailed=13]="SignalingRequestFailed",u[u.SignalingChannelClosedUnexpectedly=14]="SignalingChannelClosedUnexpectedly",u[u.ICEGatheringTimeoutWorkaround=15]="ICEGatheringTimeoutWorkaround",u[u.ConnectionHealthReconnect=16]="ConnectionHealthReconnect",u[u.RealtimeApiFailed=17]="RealtimeApiFailed",u[u.TaskFailed=18]="TaskFailed",u[u.IncompatibleSDP=19]="IncompatibleSDP",u[u.TURNCredentialsForbidden=20]="TURNCredentialsForbidden",u[u.NoAttendeePresent=21]="NoAttendeePresent",u[u.AudioAttendeeRemoved=22]="AudioAttendeeRemoved",u[u.AudioVideoWasRemovedFromPrimaryMeeting=23]="AudioVideoWasRemovedFromPrimaryMeeting",u[u.AudioVideoDisconnectedWhilePromoted=24]="AudioVideoDisconnectedWhilePromoted",u[u.AudioDisconnectAudio=25]="AudioDisconnectAudio"})(d=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=d},4418554613:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=d},5992906328:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(h){this._audioHostURL=h}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(h){this._signalingURL=h}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(h){this._turnControlURL=h}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(h){this._eventIngestionURL=h}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=h=>h}},"MeetingSessionURLs");l.default=d},1240186630:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class dS{equal(h){return this.remoteVideoAvailable===h.remoteVideoAvailable&&this.canStartLocalVideo===h.canStartLocalVideo}clone(){const h=new dS;return h.remoteVideoAvailable=this.remoteVideoAvailable,h.canStartLocalVideo=this.canStartLocalVideo,h}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=d},2732224314:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m){this.type=h,this.headers=p,this.payload=m}},"Message");l.default=d},5753440409:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(S,c,v,_){function E(b){return b instanceof v?b:new v(function(T){T(b)})}return r(E,"adopt"),new(v||(v=Promise))(function(b,T){function I(D){try{w(_.next(D))}catch(R){T(R)}}r(I,"fulfilled");function O(D){try{w(_.throw(D))}catch(R){T(R)}}r(O,"rejected");function w(D){D.done?b(D.value):E(D.value).then(I,O)}r(w,"step"),w((_=_.apply(S,c||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(9541240844),m=h(d(4953773007)),a=h(d(8532769532)),s=h(d(2732224314)),i=h(d(8543192315)),e=h(d(7416186200)),t=h(d(4859482891)),n=h(d(7482759477)),o=h(d(6363507833)),f=h(d(5639131082));let g=r(class{addObserver(c){this.logger.info("adding messaging observer"),this.observerQueue.add(c)}removeObserver(c){this.logger.info("removing messaging observer"),this.observerQueue.delete(c)}start(){return u(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(c){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&c(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",c=>{this.receiveMessageHandler(c.data)}),this.webSocket.addEventListener("close",c=>{this.closeEventHandler(c)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(c){return u(this,void 0,void 0,function*(){return yield this.startConnectingInternal(c),yield new Promise((v,_)=>{this.bootstrapResolved=v,this.bootstrapRejected=_})})}startConnectingInternal(c){var v;return u(this,void 0,void 0,function*(){let _=this.configuration.endpointUrl;if(c||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),c||_===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const b=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=b.Endpoint)===null||v===void 0)&&v.Url?_=b.Endpoint.Url:_=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else _=(yield this.configuration.chimeClient.send(new p.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${_}`)}catch(b){this.logger.error(`Messaging Session failed to resolve endpoint: ${b}`);const T=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(T);return}const E=yield this.prepareWebSocketUrl(_);this.logger.info(`opening connection to ${E}`),c||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(E,[],!0),this.forEachObserver(b=>{b.messagingSessionDidStartConnecting&&b.messagingSessionDidStartConnecting(c)}),this.setUpEventListeners()})}prepareWebSocketUrl(c){return u(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===f.default.Connect&&v.set("prefetch-on",[f.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",c,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(c){try{const v=JSON.parse(c),_=v.Headers["x-amz-chime-event-type"],E=new s.default(_,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&_==="SESSION_ESTABLISHED"){this.forEachObserver(T=>{T.messagingSessionDidStart&&T.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const b=this.preBootstrapMessages.length;for(let T=0;T<b;T++){const I=this.preBootstrapMessages.shift();this.forEachObserver(O=>{this.sendMessageToObserver(O,I)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(E);return}this.forEachObserver(b=>{this.sendMessageToObserver(b,E)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(c,v){c.messagingSessionDidReceiveMessage&&c.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>u(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(c){this.logger.info(`WebSocket close: ${c.code} ${c.reason}`),c.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(c.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(c)}):this.bootstrapRejected(c))}canReconnect(c){return c===1001||c===1006||c>=1011&&c<=1014||c>4e3&&c!==4002&&c!==4003&&c!==4401}constructor(c,v,_,E,b){this.configuration=c,this.logger=v,this.webSocket=_,this.reconnectController=E,this.sigV4=b,this.observerQueue=new Set,this.webSocket||(this.webSocket=new n.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(c.reconnectTimeoutMs,new m.default(c.reconnectFixedWaitMs,c.reconnectShortBackoffMs,c.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=g},1119407758:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(759573094);let h=r(class{generateSessionId(){const m=new Uint32Array(1);return u.getRandomValues(m),m[0].toString()}constructor(m,a,s,i){this.userArn=m,this.messagingSessionId=a,this.endpointUrl=s,this.chimeClient=i,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=h},5639131082:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.Connect="connect"})(d||(d={})),l.default=d},4936200234:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.Unread="unread",u.LastMessageTimestamp="last-message-timestamp"})(d||(d={})),l.default=d},5519271617:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9946496941));let p=r(class Tl{id(){return this._id}base(){return this._id?this._id.split(Tl.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Tl.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const s=new Tl(this.base()+Tl.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Tl(s._id).modality()!==a?new Tl(this.base()):s}constructor(a){this._id=a}},"DefaultModality");l.default=p,p.MODALITY_SEPARATOR=h.default.Modality[0],p.MODALITY_CONTENT=h.default.Modality.substring(1)},4680116077:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(7416186200)),p=u(d(7080398225)),m=u(d(201131498)),a=d(7344258710),s=d(8479756130);let i=r(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(n)&&t(n)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(n=>{s.Maybe.of(n.didMissPongs).map(o=>o.bind(n)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const n=a.SdkPingPongFrame.create();n.pingId=t,n.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(n)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const n=t.message.pingPong.pingId;if(n!==this.pingId){this.logger.warn(`unexpected ping id ${n} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${n} with timestamp ${o}`);const g=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-g/2),c=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${c}ms from ping-pong time=${g}ms`),this.forEachObserver(v=>{s.Maybe.of(v.didReceivePong).map(_=>_.bind(v)(n,c,g))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,n,o){this.signalingClient=t,this.intervalMs=n,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new p.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=i},2461656181:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9292265093)),p=d(759573094),m=u(d(6424577011)),a=u(d(8830437557));let s=r(class{realtimeSetLocalAttendeeId(e,t){this.state.localAttendeeId=e,this.state.localExternalUserId=t}realtimeSetAttendeeIdPresence(e,t,n,o,f){try{t&&(this.state.attendeeIdToExternalUserId[e]=n);for(const g of this.state.attendeeIdChangesCallbacks)g(e,t,n,o,f)}catch(g){this.onError(g)}}realtimeSubscribeToAttendeeIdPresence(e){try{this.state.attendeeIdChangesCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToAttendeeIdPresence(e){try{const t=this.state.attendeeIdChangesCallbacks.indexOf(e);t!==-1&&this.state.attendeeIdChangesCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSetCanUnmuteLocalAudio(e){try{if(this.state.canUnmute===e)return;this.state.canUnmute=e;for(const t of this.state.setCanUnmuteLocalAudioCallbacks)t(e)}catch(t){this.onError(t)}}realtimeSubscribeToSetCanUnmuteLocalAudio(e){try{this.state.setCanUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){try{const t=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!0)}catch(e){this.onError(e)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!1);return!0}catch(e){return this.onError(e),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){try{const t=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(e,t){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(e)||(this.state.volumeIndicatorCallbacks[e]=[]),this.state.volumeIndicatorCallbacks[e].push(t),this.sendVolumeIndicatorChange(e,!0,!0,!0,this.state.attendeeIdToExternalUserId[e])}catch(n){this.onError(n)}}realtimeUnsubscribeFromVolumeIndicator(e,t){if(this.state.volumeIndicatorCallbacks[e])if(t){const o=this.state.volumeIndicatorCallbacks[e].indexOf(t);o>=0&&this.state.volumeIndicatorCallbacks[e].splice(o,1)}else delete this.state.volumeIndicatorCallbacks[e]}realtimeUpdateVolumeIndicator(e,t,n,o,f){try{n=this.applyLocalMuteOverride(e,n);const g=this.getVolumeIndicatorState(e);let S=!1,c=!1,v=!1;n!==null&&g.muted!==n&&(g.muted=n,c=!0,g.muted&&g.volume!==0&&(g.volume=0,S=!0)),!g.muted&&t!==null&&(g.volume!==t&&(g.volume=t,S=!0),g.muted===null&&(g.muted=!1,c=!0)),o!==null&&g.signalStrength!==o&&(g.signalStrength=o,v=!0),this.sendVolumeIndicatorChange(e,S,c,v,f)}catch(g){this.onError(g)}}realtimeSubscribeToLocalSignalStrengthChange(e){try{if(this.state.localSignalStrengthChangeCallbacks.push(e),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(t){this.onError(t)}}realtimeUnsubscribeToLocalSignalStrengthChange(e){try{const t=this.state.localSignalStrengthChangeCallbacks.indexOf(e);t!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSubscribeToSendDataMessage(e){try{this.state.sendDataMessageCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeFromSendDataMessage(e){try{const t=this.state.sendDataMessageCallbacks.indexOf(e);t!==-1&&this.state.sendDataMessageCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSendDataMessage(e,t,n){try{for(const o of this.state.sendDataMessageCallbacks)o(e,t,n)}catch(o){this.onError(o)}}realtimeSubscribeToReceiveDataMessage(e,t){try{this.state.receiveDataMessageCallbacks.has(e)?this.state.receiveDataMessageCallbacks.get(e).push(t):this.state.receiveDataMessageCallbacks.set(e,[t])}catch(n){this.onError(n)}}realtimeUnsubscribeFromReceiveDataMessage(e){try{this.state.receiveDataMessageCallbacks.delete(e)}catch(t){this.onError(t)}}realtimeReceiveDataMessage(e){try{p.iterateEvery(this.state.receiveDataMessageCallbacks.get(e.topic),t=>{t(e)})}catch(t){Promise.reject(t)}}realtimeSubscribeToFatalError(e){try{this.state.fatalErrorCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToFatalError(e){try{const t=this.state.fatalErrorCallbacks.indexOf(e);t!==-1&&this.state.fatalErrorCallbacks.splice(t,1)}catch(t){this.onError(t)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(e){e?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(e,t){const n=this.state.localAttendeeId,o=this.state.muted;return e!==n||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?t:o}sendVolumeIndicatorChange(e,t,n,o,f){if(this.sendLocalSignalStrengthChange(e,o),!this.state.volumeIndicatorCallbacks.hasOwnProperty(e))return;const g=this.getVolumeIndicatorState(e),S=new a.default;if(t&&(S.volume=g.volume),n&&(S.muted=g.muted),o&&(S.signalStrength=g.signalStrength),!this.stateIsEmpty(S))for(const c of this.state.volumeIndicatorCallbacks[e])c(e,S.volume,S.muted,S.signalStrength,f)}sendLocalSignalStrengthChange(e,t){if(!t||e!==this.state.localAttendeeId)return;const o=this.getVolumeIndicatorState(e).signalStrength;if(o!==null)for(const f of this.state.localSignalStrengthChangeCallbacks)f(o)}getVolumeIndicatorState(e){return this.state.volumeIndicatorState.hasOwnProperty(e)||(this.state.volumeIndicatorState[e]=new a.default),this.state.volumeIndicatorState[e]}stateIsEmpty(e){return e.volume===null&&e.muted===null&&e.signalStrength===null}onError(e){try{for(const t of this.state.fatalErrorCallbacks)t(e)}catch(t){try{console.error(e),console.error(t)}catch{}}}constructor(e,t){this.mediaStreamBroker=e,this.state=new m.default,this._transcriptionController=t||new h.default(this)}},"DefaultRealtimeController");l.default=s},8504263577:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=d},6424577011:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=d},8830437557:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=d},8543192315:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6376806429));let p=r(class cS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,s){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=s,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new cS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,s){this.reconnectTimeoutMs=a,this.backoffPolicy=s,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=p},2944630562:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class Qs{static initializeWorker(){Qs.log("Initializing RedundantAudioEncoder");const h=new Qs;self.RTCRtpScriptTransformer&&(self.onrtctransform=p=>{p.transformer.options.type==="SenderTransform"?h.setupSenderTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="ReceiverTransform"?h.setupReceiverTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="PassthroughTransform"&&h.setupPassthroughTransform(p.transformer.readable,p.transformer.writable)}),self.onmessage=p=>{p.data.msgType==="StartRedWorker"?(h.setupSenderTransform(p.data.send.readable,p.data.send.writable),h.setupReceiverTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="PassthroughTransform"?(h.setupPassthroughTransform(p.data.send.readable,p.data.send.writable),h.setupPassthroughTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="RedPayloadType"?h.setRedPayloadType(p.data.payloadType):p.data.msgType==="OpusPayloadType"?h.setOpusPayloadType(p.data.payloadType):p.data.msgType==="UpdateNumRedundantEncodings"?h.setNumRedundantEncodings(p.data.numRedundantEncodings):p.data.msgType==="Enable"?h.setRedundancyEnabled(!0):p.data.msgType==="Disable"&&h.setRedundancyEnabled(!1)}}static log(h){Qs.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${h}`})}static getNumRedundantEncodingsForPacketLoss(h){let p=0,m=!1;return h<=8?p=0:h<=18?p=1:h<=75?p=2:(p=0,m=!0),[p,m]}setupPassthroughTransform(h,p){Qs.log("Setting up passthrough transform"),h.pipeTo(p)}setupSenderTransform(h,p){Qs.log("Setting up sender RED transform");const m=new TransformStream({transform:this.senderTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setupReceiverTransform(h,p){Qs.log("Setting up receiver RED transform");const m=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setRedPayloadType(h){this.redPayloadType=h,Qs.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(h){this.opusPayloadType=h,Qs.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(h){this.numRedundantEncodings=h,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),Qs.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(h){this.redundancyEnabled=h,Qs.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(h,p){h.data.byteLength>this.maxAudioPayloadSizeBytes||p.enqueue(h)}senderTransform(h,p){if(h.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.getPrimaryPayload(h.timestamp,h.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const s=this.encode(h.timestamp,a);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}h.data=s,this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}getPrimaryPayload(h,p){const m=this.splitEncodings(h,p);return!m||m.length<1?null:m[m.length-1].payload}splitEncodings(h,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const s=new DataView(p);let i=s.byteLength,e=0,t=0,n=0,o=0,f=!1;const g=new Array,S=new Array,c=new Array;for(;i>0;)if(f=(s.getUint8(o)&128)===0,f){if((s.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=s.byteLength))return null;n=s.byteLength-e;break}else{if(i<this.redHeaderSizeBytes)return null;const I=((s.getUint8(o+2)&3)<<8)+s.getUint8(o+3);S.push(I);const O=s.getUint16(o+1)>>2,w=h-O;c.push(w),e+=I+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,i-=this.redHeaderSizeBytes}if(!f)return a!==void 0?(g.push({payload:p,isRedundant:!1,seq:a}),g):null;let v=t;for(let I=0;I<c.length;I++){const O=new ArrayBuffer(S[I]);new Uint8Array(O).set(new Uint8Array(s.buffer,v,S[I]),0);const D={timestamp:c[I],payload:O,isRedundant:!0};m&&(D.hasFec=this.opusPacketHasFec(new DataView(O),O.byteLength)),g.push(D),v+=S[I]}const _=s.byteLength-n,E=new ArrayBuffer(n);new Uint8Array(E).set(new Uint8Array(s.buffer,_,n),0);const T={timestamp:h,payload:E,isRedundant:!1,seq:a};return m&&(T.hasFec=this.opusPacketHasFec(new DataView(E),E.byteLength)),g.push(T),g}encode(h,p){const m=p.byteLength;if(m===0||m>=this.maxRedPacketSizeBytes||m>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let s=this.redLastHeaderSizeBytes,i=m,e=this.maxAudioPayloadSizeBytes-m-s;const t=new Array,n=new Array;if(this.redundancyEnabled){let c=this.uint32WrapAround(h-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<a&&!(this.uint32WrapAround(h-c)>=this.maxRedTimestampOffset);v++){let _=c,E=this.encodingHistory.find(b=>b.timestamp===_);if(E||(_=this.uint32WrapAround(c-this.redPacketizationTime),E=this.encodingHistory.find(b=>b.timestamp===_)),E){const b=E.payload.byteLength;if(e<this.redHeaderSizeBytes+b)break;e-=this.redHeaderSizeBytes+b,s+=this.redHeaderSizeBytes,i+=b,t.unshift(E.timestamp),n.unshift(E.payload)}c-=this.redPacketizationTime*this.redPacketDistance,c=this.uint32WrapAround(c)}}const o=new ArrayBuffer(s+i),f=new DataView(o);let g=0;for(let c=0;c<t.length;c++){const v=h-t[c];f.setUint8(g,this.opusPayloadType|128),f.setUint16(g+1,v<<2|n[c].byteLength>>8),f.setUint8(g+3,n[c].byteLength&255),g+=this.redHeaderSizeBytes}f.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let c=0;c<n.length;c++)S.set(new Uint8Array(n[c]),g),g+=n[c].byteLength;return S.set(new Uint8Array(p),g),g+=p.byteLength,g!==s+i?null:(this.updateEncodingHistory(h,p),o)}updateEncodingHistory(h,p){for(const a of this.encodingHistory){const s=this.redPacketizationTime*this.redMaxRecoveryDistance;if(h-a.timestamp>=s)this.encodingHistory.shift();else break}const m=new DataView(p);(this.opusPacketIsCeltOnly(m)||this.opusPacketHasVoiceActivity(m,m.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:h,payload:p}))}initializePacketLogs(){const h=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(h),index:0,windowSize:h},this.redRecoveryLog={window:new Array(h),index:0,windowSize:h},this.fecRecoveryLog={window:new Array(h),index:0,windowSize:h},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(h,p){const m=h.getMetadata();if(m.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.splitEncodings(h.timestamp,h.data,!0,m.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}for(let s=a.length-1;s>=0;s--)this.updateLossStats(a[s])&&(this.updateRedStats(a[s]),this.updateFecStats(a[s]));this.maybeReportLossStats(m.synchronizationSource,a[a.length-1].timestamp),this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}updateLossStats(h){if(h.isRedundant)return!0;const p=h.timestamp,m=h.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=m,this.addTimestamp(this.primaryPacketLog,p),!0;const a=this.int16(m-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,p)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,p),this.removeFromRecoveryWindows(p)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=h.seq,this.addTimestamp(this.primaryPacketLog,p)),!0)}updateRedStats(h){if(!h.isRedundant||this.totalAudioPacketsLost===0)return;const p=h.timestamp;this.hasTimestamp(this.primaryPacketLog,p)||(this.hasTimestamp(this.redRecoveryLog,p)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,p)),this.removeTimestamp(this.fecRecoveryLog,p)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(h){if(!h.hasFec||this.totalAudioPacketsLost===0)return;const p=h.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,p)||this.hasTimestamp(this.redRecoveryLog,p)||this.hasTimestamp(this.fecRecoveryLog,p)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,p))}maybeReportLossStats(h,p){p===void 0||p-this.lastLossReportTimestamp<this.lossReportInterval||(Qs.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:h,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=p)}addTimestamp(h,p){p!==void 0&&(h.window[h.index]=p,h.index=(h.index+1)%h.windowSize)}hasTimestamp(h,p){return!!h.window.find(a=>a===p)}removeTimestamp(h,p){const m=h.window.indexOf(p);return m>=0?(h.window[m]=void 0,!0):!1}removeFromRecoveryWindows(h){let p=this.removeTimestamp(this.redRecoveryLog,h);p&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,p=this.removeTimestamp(this.fecRecoveryLog,h),p&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(h){let m=h;return h>=4294967296?m=h-4294967296:h<0&&(m=4294967296+h),m}int16(h){return h<<16>>16}opusPacketIsCeltOnly(h){return!!(h.getUint8(0)&128)}opusPacketGetSamplesPerFrame(h,p){p=Math.round(p),p=Math.min(Math.max(p,-Math.pow(2,32)),Math.pow(2,32)-1);let m,a;return this.opusPacketIsCeltOnly(h)?(a=h.getUint8(0)>>3&3,m=(p<<a)/400):(h.getUint8(0)&96)===96?m=h.getUint8(0)&8?p/50:p/100:(a=h.getUint8(0)>>3&3,a===3?m=p*60/1e3:m=(p<<a)/100),m}opusNumSilkFrames(h){let p=this.opusPacketGetSamplesPerFrame(h,48e3)/48;switch(p<10&&(p=10),p){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(h){return h.getUint8(0)&4?2:1}opusParseSize(h,p,m,a){return m<1?(a[0]=-1,-1):h.getUint8(p)<252?(a[0]=h.getUint8(p),1):m<2?(a[0]=-1,-1):(a[0]=4*h.getUint8(p+1)+h.getUint8(p),2)}opusPacketParseImpl(h,p,m,a,s,i,e,t){if(!i||p<0)return this.OPUS_BAD_ARG;if(p===0)return this.OPUS_INVALID_PACKET;let n,o,f=0,g=!1;const S=h.getUint8(0);a&&(a[0]=S);let c=p-1,v=1,_=c;switch(S&3){case 0:n=1;break;case 1:if(n=2,g=!0,!m){if(c&1)return this.OPUS_INVALID_PACKET;_=c/2,i[0][0]=_}break;case 2:if(n=2,o=this.opusParseSize(h,v,c,i[0]),c-=o,i[0][0]<0||i[0][0]>c)return this.OPUS_INVALID_PACKET;v+=o,_=c-i[0][0];break;default:if(c<1)return this.OPUS_INVALID_PACKET;const E=h.getUint8(v++);if(--c,n=E&63,n<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(h,48e3)*n>5760)return this.OPUS_INVALID_PACKET;if(E&64){let T,I;do{if(c<=0)return this.OPUS_INVALID_PACKET;T=h.getUint8(v++),--c,I=T===255?254:T,c-=I,f+=I}while(T===255)}if(c<0)return this.OPUS_INVALID_PACKET;if(g=!(E&128),g){if(!m){if(_=Math.trunc(c/n),_*n!==c)return this.OPUS_INVALID_PACKET;for(let T=0;T<n-1;++T)i[T][0]=_}}else{_=c;for(let T=0;T<n-1;++T){if(o=this.opusParseSize(h,v,c,i[T]),c-=o,i[T][0]<0||i[T][0]>c)return this.OPUS_INVALID_PACKET;v+=o,_-=o+i[T][0]}if(_<0)return this.OPUS_INVALID_PACKET}}if(m){if(o=this.opusParseSize(h,v,c,i[n-1]),c-=o,i[n-1][0]<0||i[n-1][0]>c)return this.OPUS_INVALID_PACKET;if(v+=o,g){if(i[n-1][0]*n>c)return this.OPUS_INVALID_PACKET;for(let E=0;E<n-1;++E)i[E][0]=i[n-1][0]}else if(!(o+i[n-1][0]<=_))return this.OPUS_INVALID_PACKET}else{if(_>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;i[n-1][0]=_}e&&(e[0]=v);for(let E=0;E<n;++E)s&&(s[E][0]=v),v+=i[E][0];return t&&(t[0]=v+f),n}opusPacketParse(h,p,m,a,s,i){return this.opusPacketParseImpl(h,p,!1,m,a,s,i,null)}opusPacketHasVoiceActivity(h,p){if(!h||p<=0)return 0;if(this.opusPacketIsCeltOnly(h))return-1;const m=this.opusNumSilkFrames(h);if(m===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],s[e]=[void 0];const i=this.opusPacketParse(h,p,null,a,s,null);if(i<0)return-1;for(let e=0;e<i;++e){if(s[e][0]<1)continue;if(h.getUint8(a[e][0])>>8-m||this.opusPacketGetNumChannels(h)===2&&h.getUint8(a[e][0])<<m+1>>8-m)return 1}return 0}opusPacketHasFec(h,p){if(!h||p<=0||this.opusPacketIsCeltOnly(h))return!1;const m=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)m[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(h,p,null,m,a,null)<0||a[0][0]<=1)return!1;const i=this.opusNumSilkFrames(h);if(i===0)return!1;const e=this.opusPacketGetNumChannels(h);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(h.getUint8(m[0][0])&128>>(t+1)*(i+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=d,d.shouldLog=!1,d.shouldReportStats=!1},5110921698:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. The packet we received
        // does not have a good RED payload.
        if (!gotLastBlock) {
            // Note that sequence numbers only exist for
            // incoming audio frames.
            if (primarySequenceNumber !== undefined) {
                // This could be a possible padding packet used
                // for BWE with a good sequence number.
                // Create a dummy encoding to make sure loss values
                // are calculated correctly by consuming sequence number.
                // Note that for the receive side, we process packets only
                // for loss/recovery calculations and forward the original
                // packet without changing it even in the error case.
                encodings.push({
                    payload: frame,
                    isRedundant: false,
                    seq: primarySequenceNumber,
                });
                return encodings;
            }
            // This is a bad packet.
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(frameMetadata.synchronizationSource, encodings[encodings.length - 1].timestamp);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(ssrc, timestamp) {
        if (timestamp === undefined ||
            timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        if (timestamp === undefined) {
            return;
        }
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=d},7416186200:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6376806429));let p=r(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=p},7080398225:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setInterval(h,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(h){this.intervalMs=h}},"IntervalScheduler");l.default=d},6376806429:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),h()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(h){this.timeoutMs=h,this.timer=null}},"TimeoutScheduler");l.default=d},5603242550:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4526495239)),p=u(d(4041719349)),m=u(d(6375844864));let a=r(class fi{clone(){return new fi(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new fi(i.join(fi.CRLF))}static candidateTypeFromString(i){switch(i){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:fi.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,n)=>(n>0?"m="+t:t).trim()+fi.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const n of i){if(/^m=video/.test(n)&&(n.indexOf("sendrecv")>-1||n.indexOf("sendonly")===-1&&n.indexOf("recvonly")===-1&&n.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return fi.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(fi.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return fi.linesToSDP(this.lines().filter(e=>fi.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,fi.rfc7587LowestBitrate),fi.rfc7587HighestBitrate));const e=this.lines(),t=fi.findOpusFmtpAttributes(e),n=fi.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return fi.linesToSDP(n)}withStereoAudio(){const i=this.lines(),e=fi.findOpusFmtpAttributes(i),t=fi.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return fi.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const n=[];for(const o of i)if(o.startsWith("m=audio")&&(n.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const f=e.exec(o);f!==null&&(n[n.length-1]=`a=fmtp:${f[1]} `)}return n}static updateOpusFmtpAttributes(i,e,t){const n=[];let o=0,f=null;for(const g of i)if(g.startsWith("m=audio")&&(f=e[o],o++),g.startsWith("m=video")&&(f=null),f&&g.startsWith(f)){const S=g.slice(f.length).split(";"),c=[];for(const v of S)t.findIndex(E=>E.startsWith(v.split("=")[0]))<0&&c.push(v);for(const v of t)c.push(v);n.push(f+c.join(";"))}else n.push(g);return n}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new fi(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const n of i)if(/^a=extmap:/.test(n.trim())){const f=+n.split("a=extmap:")[1].split(" ")[0];e.includes(f)||e.push(f)}e.sort((n,o)=>n-o);let t=0;for(const n of e){if(n-t>1)return t+1;t=n}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,fi.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,fi.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=fi.splitLines(this.sdp).filter(e=>!e.includes(fi.dependencyDescriptorRtpHeaderExtensionUrl));return new fi(i.join(fi.CRLF)+fi.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,n=t===-1?this.getUniqueRtpHeaderExtensionId(fi.splitLines(this.sdp)):t,o=fi.splitSections(this.sdp),f=[];for(let S of o){if(/^m=video/.test(S)&&fi.getRtpHeaderExtensionIdInSection(S,e)===-1){const c=fi.splitLines(S),v=[];if(n===-1||this.hasRtpHeaderExtensionId(n)){f.push(S);continue}for(const _ of c)if(v.push(_),/^a=sendrecv/.test(_.trim())){const E="a=extmap:"+n+" "+e;v.push(E)}S=v.join(fi.CRLF)+fi.CRLF}else if(t!==-1&&/^m=video/.test(S)&&fi.getRtpHeaderExtensionIdInSection(S,e)!==t){const c=fi.splitLines(S),v=[];for(const _ of c){if(/^a=extmap:/.test(_.trim())&&_.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const b="a=extmap:"+t+" "+e;v.push(b)}continue}v.push(_)}S=v.join(fi.CRLF)+fi.CRLF}f.push(S)}const g=f.join("");return new fi(g)}ssrcForVideoSendingSection(){const i=this.sdp,e=fi.splitSections(i);if(e.length<2)return"";const t=fi.findActiveCameraSection(e);if(t===-1)return"";const n=fi.matchPrefix(e[t],"a=ssrc-group:FID ");if(n.length<1)return"";const o=fi.extractSSRCsFromFIDGroupLine(n[0]),[f]=o.split(" ").map(g=>parseInt(g,10));return f.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const n=parseInt(e,10),o=parseInt(t,10);return n!==o}removeH264SupportFromSendSection(){const i=this.sdp,e=fi.splitSections(i),t=fi.findActiveCameraSection(e);if(t===-1)return new fi(this.sdp);const n=e[t],o=fi.splitLines(n),f=[],g=new Map;o.forEach(_=>{if(/^a=rtpmap:/.test(_)){const E=/^a=rtpmap:([0-9]+)\s/.exec(_);E&&_.toLowerCase().includes("h264")&&f.push(parseInt(E[1],10))}if(/^a=fmtp:/.test(_)){const E=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(_);if(E&&E.length===3){const b=parseInt(E[1],10),T=parseInt(E[2],10);g.has(T)?g.get(T).push(b):g.set(T,[b])}}});const S=new Set;for(const _ of f){S.add(_);const E=g.get(_);if(E)for(const b of E)S.add(b)}if(f.length>0){const _=o[0].split(" ");o[0]=_.filter(E=>!S.has(parseInt(E))).join(" ")}const c=o.filter(_=>{if(!_.includes("rtpmap")&&!_.includes("rtcp-fb")&&!_.includes("fmtp"))return!0;for(const E of S)if(_.includes(E.toString()))return!1;return!0});e[t]=c.join(fi.CRLF)+fi.CRLF;const v=e.join("");return new fi(v)}mediaSections(){const i=fi.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const n=new p.default,o=fi.splitLines(i[t]);for(const f of o){const g=fi.mediaType(f);if(g!==void 0){n.mediaType=g;continue}const S=fi.direction(f);if(S!==void 0){n.direction=S;continue}const c=fi.mid(f);if(c!==void 0){n.mid=c;continue}}e.push(n)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=fi.splitLines(i);for(const n of t)if(/^a=extmap:/.test(n.trim())){const o=n.split("a=extmap:")[1].split(" "),f=+o[0];if(o[1]===e)return f}return-1}getRtpHeaderExtensionId(i){const e=fi.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const n=fi.getRtpHeaderExtensionIdInSection(t,i);if(n!==-1)return n}return-1}hasRtpHeaderExtensionId(i){const e=fi.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=fi.splitSections(e),n=fi.findActiveCameraSection(t);if(n===-1)return new fi(this.sdp);t[n]=this.sectionWithCodecPreferences(t[n],i);const o=t.join("");return new fi(o)}sectionWithCodecPreferences(i,e){const t=new Map,n=fi.splitLines(i);n.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const c=/^a=rtpmap:(\d+)\s/.exec(S);if(!c)return;const v=c[1];for(const _ of e){if(!S.includes(`${_.codecName}/${_.codecCapability.clockRate}`))continue;let E=!1;if(_.codecCapability.sdpFmtpLine!==void 0){let b=!1;for(const T of n){if(_.fmtpLineMatches(T,parseInt(v))){E=!0;break}b||(b=T.startsWith(`a=fmtp:${v} profile-id=`))}_.equals(m.default.vp9Profile0())&&!b&&(E=!0)}else E=!0;if(E){t.set(v,_);break}}});const o=new Set(t.keys()),f=n[0].split(" ").filter(S=>!o.has(S)),g=Array.from(t.entries()).sort((S,c)=>{let[v,_]=S,[E,b]=c;const T=e.indexOf(_),I=e.indexOf(b);return T-I}).map(S=>{let[c,v]=S;return c});return f.splice(3,0,...g),n[0]=f.join(" "),n.join(fi.CRLF)+fi.CRLF}highestPriorityVideoSendCodec(){const i=this.prioritizedSendVideoCodecCapabilities();return i.length>0?i[0]:void 0}prioritizedSendVideoCodecCapabilities(){const i=this.sdp,e=fi.splitSections(i),t=fi.findActiveCameraSection(e);if(t===-1)return[];const n=fi.splitLines(e[t]),o=n[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(n,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(i,e){let t,n,o;for(const f of i){const g=/^a=rtpmap:([0-9]+)\s/.exec(f);if(g&&g[1]===e){const c=f.split(" ")[1].split("/");c.length>=2&&(t=c[0],n=c[1])}f.startsWith(`a=fmtp:${e} `)&&(o=f.split(" ")[1])}if(t!==void 0)return new m.default(t,{clockRate:parseInt(n),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=fi.splitSections(e);return i.set("opus",fi.findAudioPayloadType("opus",t)),i.set("red",fi.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,n=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const f=n.exec(o);if(f!==null)return Number(f[1])}return 0}withStartingVideoSendBitrate(i){const e=fi.splitSections(this.sdp),t=fi.findActiveCameraSection(e);if(t===-1)return this;const n=fi.splitLines(e[t]),o=[];for(const g of n)if(/^a=fmtp:\d*/.test(g)){const S=g+`;x-google-start-bitrate=${i}`;o.push(S)}else o.push(g);e[t]=o.join(fi.CRLF)+fi.CRLF;const f=e.join("");return new fi(f)}constructor(i){this.sdp=i}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},4526495239:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var d;(function(u){u.Host="host",u.ServerReflexive="srflx",u.PeerReflexive="prflx",u.Relay="relay"})(d=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=d},4041719349:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"SDPMediaSection");l.default=d},6375844864:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(7344258710);let h=r(class Zo{equals(m){if(m===void 0||this.codecName!==m.codecName||this.codecCapability.mimeType!==m.codecCapability.mimeType||this.codecCapability.clockRate!==m.codecCapability.clockRate)return!1;const a=this.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(this.codecCapability.sdpFmtpLine,this.codecName):"",s=m.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(m.codecCapability.sdpFmtpLine,m.codecName):"";return a===s}fmtpLineMatches(m,a){const s=this.codecCapability.sdpFmtpLine;if(!s)return!1;const i=`a=fmtp:${a} `;if(!m.startsWith(i))return!1;const e=m.substring(i.length);return this.cleanupFmtpLine(e,this.codecName)===this.cleanupFmtpLine(s,this.codecName)}cleanupFmtpLine(m,a){const s=/;x-google-start-bitrate=\d+/g;let i=m.replace(s,"");if(a==="H264"){const e=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i;i=i.replace(e,"profile-level-id=$1")}return i}static vp8(){return new Zo("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new Zo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new Zo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new Zo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new Zo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new Zo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return Zo.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new Zo("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return Zo.vp9Profile0()}static av1Main(){return new Zo("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return Zo.av1Main()}static fromSignaled(m){switch(m){case u.SdkVideoCodecCapability.VP8:return Zo.vp8();case u.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return Zo.h264BaselineProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return Zo.h264ConstrainedBaselineProfile();case u.SdkVideoCodecCapability.H264_MAIN_PROFILE:return Zo.h264MainProfile();case u.SdkVideoCodecCapability.H264_HIGH_PROFILE:return Zo.h264HighProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return Zo.h264ConstrainedHighProfile();case u.SdkVideoCodecCapability.VP9_PROFILE_0:return Zo.vp9Profile0();case u.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return Zo.av1Main();default:return}}constructor(m,a){this.codecName=m,this.codecCapability=a}},"VideoCodecCapability");l.default=h},9530736010:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(8188990747);let h=r(class Su{compress(m,a){if(a.length>0){const e=Math.min(a.length,Su.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={memLevel:Su.Z_MEM_LEVEL,dictionary:a};return u.deflateRaw(m,s)}decompress(m,a){if(a.length>0){const e=Math.min(a.length,Su.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={to:"string",dictionary:a,chunkSize:4096};let i="";try{i=u.inflateRaw(m,s)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(m){this.logger=m}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},6160394281:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(2981760980),h=d(1929156046),p=d(728914651),m=d(5798697844);let a=r(class{perform(i,e){const t=this.currentState;if(t===p.SessionStateControllerState.NotConnected&&i===u.SessionStateControllerAction.Connect)this.transition(p.SessionStateControllerState.Connecting,i);else if(t===p.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.FinishConnecting)this.transition(p.SessionStateControllerState.Connected,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Disconnect)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Reconnect)this.transition(p.SessionStateControllerState.Connecting,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Update)this.transition(p.SessionStateControllerState.Updating,i);else if(t===p.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.FinishUpdating)this.transition(p.SessionStateControllerState.Connected,i);else if(t===p.SessionStateControllerState.Disconnecting&&i===u.SessionStateControllerAction.FinishDisconnecting)this.transition(p.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${p.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),this.deferAction(i,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${p.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(n){return this.logger.error(`error during state ${p.SessionStateControllerState[this.currentState]} with action ${u.SessionStateControllerAction[i]}: ${n}`),this.logger.info(`rolling back transition to ${p.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${p.SessionStateControllerState[this.currentState]} to ${p.SessionStateControllerState[i]} with ${u.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case u.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case u.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case u.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case u.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===p.SessionStateControllerState.Connecting||this.currentState===p.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${u.SessionStateControllerAction[i]}`),this.perform(i,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${u.SessionStateControllerAction[i]} in state ${p.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=p.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},2981760980:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var d;(function(u){u[u.Connect=0]="Connect",u[u.FinishConnecting=1]="FinishConnecting",u[u.Update=2]="Update",u[u.FinishUpdating=3]="FinishUpdating",u[u.Reconnect=4]="Reconnect",u[u.Disconnect=5]="Disconnect",u[u.Fail=6]="Fail",u[u.FinishDisconnecting=7]="FinishDisconnecting"})(d=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=d},1929156046:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var d;(function(u){u[u.DoNotDefer=0]="DoNotDefer",u[u.Low=1]="Low",u[u.Medium=2]="Medium",u[u.High=3]="High",u[u.VeryHigh=4]="VeryHigh"})(d=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=d},728914651:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var d;(function(u){u[u.NotConnected=0]="NotConnected",u[u.Connecting=1]="Connecting",u[u.Connected=2]="Connected",u[u.Updating=3]="Updating",u[u.Disconnecting=4]="Disconnecting"})(d=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=d},5798697844:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var d;(function(u){u[u.Transitioned=0]="Transitioned",u[u.NoTransitionAvailable=1]="NoTransitionAvailable",u[u.DeferredTransition=2]="DeferredTransition",u[u.TransitionFailed=3]="TransitionFailed"})(d=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=d},8384002519:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(570155317)),p=u(d(6376806429)),m=d(7344258710),a=d(759573094),s=u(d(1877666836)),i=u(d(9648677690)),e=u(d(6363507833)),t=d(498975381),n=u(d(5787590482)),o=u(d(201131498));let f=r(class cc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const c=m.SdkSignalFrame.create();return c.type=m.SdkSignalFrame.Type.PING_PONG,c.pingPong=S,this.sendMessage(c),c.timestampMs}join(S){this.logger.info("sending join");const c=m.SdkJoinFrame.create();c.protocolVersion=2,c.flags=m.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new h.default,_={platformName:v.name(),platformVersion:v.version(),clientSource:s.default.sdkName,chimeSdkVersion:s.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:b,appVersion:T}=S.applicationMetadata;_.appName=b,_.appVersion=T}c.clientDetails=m.SdkClientDetails.create(_),c.audioSessionId=this.audioSessionId,c.wantsCompressedSdp=cc.CLIENT_SUPPORTS_COMPRESSION,c.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,c.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),c.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),c.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const E=m.SdkSignalFrame.create();E.type=m.SdkSignalFrame.Type.JOIN,E.join=c,this.sendMessage(E)}subscribe(S){const c=m.SdkSubscribeFrame.create();if(c.sendStreams=[],c.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(c.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(c.audioCheckin=S.audioCheckin,c.audioHost=S.audioHost,c.audioMuted=S.audioMuted,!S.audioCheckin)){const _=m.SdkStreamDescriptor.create();_.mediaType=m.SdkStreamMediaType.AUDIO,_.trackLabel="AmazonChimeExpressAudio",_.attendeeId=S.attendeeId,_.streamId=1,_.groupId=1,_.framerate=15,_.maxBitrateKbps=600,_.avgBitrateBps=4e5,c.sendStreams.push(_)}if(c.compressedSdpOffer=S.compressedSdpOffer,c.duplex=m.SdkStreamServiceType.RX,S.localVideoEnabled){c.duplex=m.SdkStreamServiceType.DUPLEX;for(let _=0;_<S.videoStreamDescriptions.length;_++){const E=S.videoStreamDescriptions[_].clone();E.attendeeId=S.attendeeId,c.sendStreams.push(E.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(c.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=m.SdkSignalFrame.create();v.type=m.SdkSignalFrame.Type.SUBSCRIBE,v.sub=c,this.sendMessage(v)}remoteVideoUpdate(S,c){const v=m.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=c;const _=m.SdkSignalFrame.create();_.type=m.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,_.remoteVideoUpdate=v,this.sendMessage(_)}convertSignalingClientVideoSubscriptionConfiguration(S){const c=new m.SdkVideoSubscriptionConfiguration;switch(c.mid=S.mid,c.attendeeId=S.attendeeId,c.streamId=S.streamId,c.groupId=S.groupId,c.priority=S.priority,c.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case i.default.Balanced:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED;break;case i.default.MaintainFramerate:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case i.default.MaintainResolution:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED}return c}leave(){const S=m.SdkSignalFrame.create();S.type=m.SdkSignalFrame.Type.LEAVE,S.leave=m.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.CLIENT_METRIC,c.clientMetric=S,this.sendMessage(c)}sendDataMessage(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.DATA_MESSAGE,c.dataMessage=S,this.sendMessage(c)}closeConnection(){var S,c;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new n.default(this,o.default.WebSocketClosing,null));const v=new p.default(cc.CLOSE_EVENT_TIMEOUT_MS),_=r(E=>{var b,T;(T=(b=this.webSocket).removeEventListener)===null||T===void 0||T.call(b,"close",_),v.stop(),this.closeEventHandler(E)},"handler");(c=(S=this.webSocket).removeEventListener)===null||c===void 0||c.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",_),v.start(()=>{_(new CloseEvent("close",{wasClean:!1,code:1005,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.AUDIO_CONTROL;const v=m.SdkAudioControlFrame.create();v.muted=S,c.audioControl=v,this.sendMessage(c)}pause(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.PAUSE,c.pause=m.SdkPauseResumeFrame.create(),c.pause.streamIds=S,this.sendMessage(c)}resume(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.RESUME,c.pause=m.SdkPauseResumeFrame.create(),c.pause.streamIds=S,this.sendMessage(c)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const c=this.prependWithFrameTypeRTC(m.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(c)){this.sendEvent(new n.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new n.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new n.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let c;try{c=m.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new n.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(c)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new n.default(this,o.default.ReceivedSignalFrame,c)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(c)}`)}stripFrameTypeRTC(S){const c=S[0];return c!==cc.FRAME_TYPE_RTC&&c!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${c}`),S.slice(1)}prependWithFrameTypeRTC(S){const c=new Uint8Array(S.length+1);return c[0]=cc.FRAME_TYPE_RTC,c.set(S,1),c}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new n.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;case o.default.WebSocketClosed:this.logger.info(`notifying event: ${o.default[S.type]}, 
              code: ${S.closeCode} reason: ${S.closeReason}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const c of this.observerQueue)c.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new n.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new n.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("Signaling WebSocket ignoring error closing while connecting");return}this.wasOpened?(this.logger.error("Signaling WebSocket received error while connected"),this.sendEvent(new n.default(this,o.default.WebSocketError,null))):(this.logger.error("Signaling WebSocket received error while connecting"),this.sendEvent(new n.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=d.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=d.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const c=m.SdkMeetingSessionCredentials.create();c.attendeeId=S.attendeeId,c.externalUserId=S.externalUserId,c.joinToken=S.joinToken;const v=m.SdkPrimaryMeetingJoinFrame.create();v.credentials=c;const _=m.SdkSignalFrame.create();_.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,_.primaryMeetingJoin=v,this.sendMessage(_)}demoteFromPrimaryMeeting(){const S=m.SdkPrimaryMeetingLeaveFrame.create(),c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,c.primaryMeetingLeave=S,this.sendMessage(c)}constructor(S,c){this.webSocket=S,this.logger=c,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new n.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0},498975381:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const u=d(7344258710);var h;(function(s){s[s.Default=0]="Default",s[s.None=1]="None",s[s.BandwidthProbing=2]="BandwidthProbing",s[s.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function p(s){return s===h.None||s===h.Default}r(p,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=p;function m(s){switch(s){case u.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case u.SdkServerSideNetworkAdaption.NONE:return h.None;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}r(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=m;function a(s){switch(s){case h.Default:return u.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return u.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}r(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},6963141047:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(h,p){this.signalingURL=h,this.joinToken=p}},"SignalingClientConnectionRequest");l.default=d},5787590482:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(201131498));let p=r(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,s,i,e,t){this.client=a,this.type=s,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=p},201131498:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var d;(function(u){u[u.WebSocketConnecting=0]="WebSocketConnecting",u[u.WebSocketOpen=1]="WebSocketOpen",u[u.WebSocketError=2]="WebSocketError",u[u.WebSocketClosing=3]="WebSocketClosing",u[u.WebSocketClosed=4]="WebSocketClosed",u[u.WebSocketFailed=5]="WebSocketFailed",u[u.WebSocketMessage=6]="WebSocketMessage",u[u.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",u[u.WebSocketSentMessage=8]="WebSocketSentMessage",u[u.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",u[u.ReceivedSignalFrame=10]="ReceivedSignalFrame",u[u.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(d=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=d},7090195098:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(498975381));let p=r(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=p},718687226:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a,s,i,e,t,n,o){this.attendeeId=h,this.sdpOffer=p,this.audioHost=m,this.audioMuted=a,this.audioCheckin=s,this.receiveStreamIds=i,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=n,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=d},3566593278:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return h!==void 0&&this.mid===h.mid&&this.attendeeId===h.attendeeId&&this.streamId===h.streamId&&this.groupId===h.groupId&&this.priority===h.priority&&this.targetBitrateKbps===h.targetBitrateKbps&&this.qualityAdaptationPreference===h.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=d},7344258710:(B,l,d)=>{"use strict";var u=d(4572474409),h=u.Reader,p=u.Writer,m=u.util,a=u.roots.default||(u.roots.default={});a.SdkSignalFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkSignalFrame"),s.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.type=1,s.prototype.error=null,s.prototype.join=null,s.prototype.joinack=null,s.prototype.sub=null,s.prototype.suback=null,s.prototype.index=null,s.prototype.pause=null,s.prototype.leave=null,s.prototype.leaveAck=null,s.prototype.bitrates=null,s.prototype.audioControl=null,s.prototype.audioMetadata=null,s.prototype.audioStreamIdInfo=null,s.prototype.pingPong=null,s.prototype.audioStatus=null,s.prototype.clientMetric=null,s.prototype.dataMessage=null,s.prototype.remoteVideoUpdate=null,s.prototype.primaryMeetingJoin=null,s.prototype.primaryMeetingJoinAck=null,s.prototype.primaryMeetingLeave=null,s.prototype.notification=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(m.Long){var o=new m.Long(0,0,!0);n.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.timestampMs=t.longs===String?"0":0;n.type=t.enums===String?"JOIN":1,n.error=null,n.join=null,n.joinack=null,n.sub=null,n.suback=null,n.index=null,n.pause=null,n.leave=null,n.leaveAck=null,n.bitrates=null,n.audioControl=null,n.audioMetadata=null,n.audioStreamIdInfo=null,n.pingPong=null,n.audioStatus=null,n.clientMetric=null,n.dataMessage=null,n.remoteVideoUpdate=null,n.primaryMeetingJoin=null,n.primaryMeetingJoinAck=null,n.primaryMeetingLeave=null,n.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(n.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(n.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(n.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(n.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(n.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(n.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(n.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(n.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(n.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(n.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(n.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(n.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(n.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(n.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(n.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(n.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(n.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(n.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(n.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(n.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(n.notification=a.SdkNotificationFrame.toObject(e.notification,t)),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),s}(),a.SdkErrorFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkErrorFrame"),s.prototype.status=0,s.prototype.description="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.status=0,n.description=""),e.status!=null&&e.hasOwnProperty("status")&&(n.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(n.description=e.description),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),s}(),a.SdkJoinFlags=function(){var s={},i=Object.create(s);return i[s[2]="HAS_STREAM_UPDATE"]=2,i[s[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[s[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),a.SdkClientDetails=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkClientDetails"),s.prototype.appName="",s.prototype.appVersion="",s.prototype.deviceModel="",s.prototype.deviceMake="",s.prototype.platformName="",s.prototype.platformVersion="",s.prototype.clientSource="",s.prototype.chimeSdkVersion="",s.prototype.clientUtcOffset="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.appName="",n.appVersion="",n.deviceModel="",n.deviceMake="",n.platformName="",n.platformVersion="",n.clientSource="",n.chimeSdkVersion="",n.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(n.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(n.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(n.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(n.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(n.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(n.clientUtcOffset=e.clientUtcOffset),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),s}(),a.SdkServerSideNetworkAdaption=function(){var s={},i=Object.create(s);return i[s[1]="DEFAULT"]=1,i[s[2]="NONE"]=2,i[s[3]="BANDWIDTH_PROBING"]=3,i[s[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),a.SdkJoinFrame=function(){function s(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkJoinFrame"),s.prototype.protocolVersion=2,s.prototype.maxNumOfVideos=0,s.prototype.flags=0,s.prototype.clientDetails=null,s.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.wantsCompressedSdp=!1,s.prototype.serverSideNetworkAdaption=1,s.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,s.prototype.wantsAllTemporalLayersInIndex=!1,s.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[n]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:if(typeof e.supportedServerSideNetworkAdaptions[n]=="number"){t.supportedServerSideNetworkAdaptions[n]=e.supportedServerSideNetworkAdaptions[n];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[n]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[n]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[n]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[n]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.supportedServerSideNetworkAdaptions=[]),t.defaults){if(n.protocolVersion=2,n.maxNumOfVideos=0,n.flags=0,n.clientDetails=null,m.Long){var o=new m.Long(0,0,!0);n.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.audioSessionId=t.longs===String?"0":0;n.wantsCompressedSdp=!1,n.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,n.wantsAllTemporalLayersInIndex=!1,n.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(n.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(n.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(n.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?n.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:n.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(n.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){n.supportedServerSideNetworkAdaptions=[];for(var f=0;f<e.supportedServerSideNetworkAdaptions.length;++f)n.supportedServerSideNetworkAdaptions[f]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]===void 0?e.supportedServerSideNetworkAdaptions[f]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]:e.supportedServerSideNetworkAdaptions[f]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(n.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(n.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),s}(),a.SdkJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkJoinAckFrame"),s.prototype.turnCredentials=null,s.prototype.videoSubscriptionLimit=0,s.prototype.wantsCompressedSdp=!1,s.prototype.defaultServerSideNetworkAdaption=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.turnCredentials=null,n.videoSubscriptionLimit=0,n.wantsCompressedSdp=!1,n.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(n.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(n.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),s}(),a.SdkLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),s}(),a.SdkLeaveAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkLeaveAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),s}(),a.SdkStreamServiceType=function(){var s={},i=Object.create(s);return i[s[1]="RX"]=1,i[s[2]="TX"]=2,i[s[3]="DUPLEX"]=3,i}(),a.SdkStreamMediaType=function(){var s={},i=Object.create(s);return i[s[1]="AUDIO"]=1,i[s[2]="VIDEO"]=2,i}(),a.SdkSubscribeFrame=function(){function s(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkSubscribeFrame"),s.prototype.duplex=1,s.prototype.sendStreams=m.emptyArray,s.prototype.receiveStreamIds=m.emptyArray,s.prototype.sdpOffer="",s.prototype.audioHost="",s.prototype.audioCheckin=!1,s.prototype.audioMuted=!1,s.prototype.compressedSdpOffer=m.newBuffer([]),s.prototype.videoSubscriptionConfiguration=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var n=0;n<e.sendStreams.length;++n)a.SdkStreamDescriptor.encode(e.sendStreams[n],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var n=0;n<e.receiveStreamIds.length;++n)t.uint32(24).uint32(e.receiveStreamIds[n]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var n=0;n<e.videoSubscriptionConfiguration.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[n],t.uint32(74).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var n=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(n)return"sendStreams."+n}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(n)return"videoSubscriptionConfiguration."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n){if(typeof e.sendStreams[n]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[n]=a.SdkStreamDescriptor.fromObject(e.sendStreams[n])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var n=0;n<e.receiveStreamIds.length;++n)t.receiveStreamIds[n]=e.receiveStreamIds[n]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var n=0;n<e.videoSubscriptionConfiguration.length;++n){if(typeof e.videoSubscriptionConfiguration[n]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sendStreams=[],n.receiveStreamIds=[],n.videoSubscriptionConfiguration=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpOffer="",n.audioHost="",n.audioCheckin=!1,n.audioMuted=!1,t.bytes===String?n.compressedSdpOffer="":(n.compressedSdpOffer=[],t.bytes!==Array&&(n.compressedSdpOffer=m.newBuffer(n.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){n.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)n.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){n.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)n.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(n.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(n.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(n.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(n.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(n.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){n.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)n.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),s}(),a.SdkSubscribeAckFrame=function(){function s(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkSubscribeAckFrame"),s.prototype.duplex=1,s.prototype.allocations=m.emptyArray,s.prototype.sdpAnswer="",s.prototype.tracks=m.emptyArray,s.prototype.compressedSdpAnswer=m.newBuffer([]),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var n=0;n<e.allocations.length;++n)a.SdkStreamAllocation.encode(e.allocations[n],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var n=0;n<e.tracks.length;++n)a.SdkTrackMapping.encode(e.tracks[n],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var n=a.SdkStreamAllocation.verify(e.allocations[t]);if(n)return"allocations."+n}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var n=a.SdkTrackMapping.verify(e.tracks[t]);if(n)return"tracks."+n}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var n=0;n<e.allocations.length;++n){if(typeof e.allocations[n]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[n]=a.SdkStreamAllocation.fromObject(e.allocations[n])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var n=0;n<e.tracks.length;++n){if(typeof e.tracks[n]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[n]=a.SdkTrackMapping.fromObject(e.tracks[n])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.allocations=[],n.tracks=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpAnswer="",t.bytes===String?n.compressedSdpAnswer="":(n.compressedSdpAnswer=[],t.bytes!==Array&&(n.compressedSdpAnswer=m.newBuffer(n.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){n.allocations=[];for(var o=0;o<e.allocations.length;++o)n.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(n.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){n.tracks=[];for(var o=0;o<e.tracks.length;++o)n.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(n.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),s}(),a.SdkIndexFrame=function(){function s(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkIndexFrame"),s.prototype.atCapacity=!1,s.prototype.sources=m.emptyArray,s.prototype.pausedAtSourceIds=m.emptyArray,s.prototype.numParticipants=0,s.prototype.supportedReceiveCodecIntersection=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var n=0;n<e.sources.length;++n)a.SdkStreamDescriptor.encode(e.sources[n],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var n=0;n<e.pausedAtSourceIds.length;++n)t.uint32(24).uint32(e.pausedAtSourceIds[n]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)t.uint32(40).int32(e.supportedReceiveCodecIntersection[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var n=a.SdkStreamDescriptor.verify(e.sources[t]);if(n)return"sources."+n}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var n=0;n<e.sources.length;++n){if(typeof e.sources[n]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[n]=a.SdkStreamDescriptor.fromObject(e.sources[n])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var n=0;n<e.pausedAtSourceIds.length;++n)t.pausedAtSourceIds[n]=e.pausedAtSourceIds[n]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)switch(e.supportedReceiveCodecIntersection[n]){default:if(typeof e.supportedReceiveCodecIntersection[n]=="number"){t.supportedReceiveCodecIntersection[n]=e.supportedReceiveCodecIntersection[n];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[n]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[n]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[n]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[n]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[n]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[n]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[n]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[n]=11;break}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sources=[],n.pausedAtSourceIds=[],n.supportedReceiveCodecIntersection=[]),t.defaults&&(n.atCapacity=!1,n.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(n.atCapacity=e.atCapacity),e.sources&&e.sources.length){n.sources=[];for(var o=0;o<e.sources.length;++o)n.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){n.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)n.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(n.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){n.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)n.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),s}(),a.SdkPauseResumeFrame=function(){function s(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPauseResumeFrame"),s.prototype.streamIds=m.emptyArray,s.prototype.groupIds=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamIds!=null&&e.streamIds.length)for(var n=0;n<e.streamIds.length;++n)t.uint32(8).uint32(e.streamIds[n]);if(e.groupIds!=null&&e.groupIds.length)for(var n=0;n<e.groupIds.length;++n)t.uint32(16).uint32(e.groupIds[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var n=0;n<e.streamIds.length;++n)t.streamIds[n]=e.streamIds[n]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var n=0;n<e.groupIds.length;++n)t.groupIds[n]=e.groupIds[n]>>>0}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streamIds=[],n.groupIds=[]),e.streamIds&&e.streamIds.length){n.streamIds=[];for(var o=0;o<e.streamIds.length;++o)n.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){n.groupIds=[];for(var o=0;o<e.groupIds.length;++o)n.groupIds[o]=e.groupIds[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),s}(),a.SdkBitrateFrame=function(){function s(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkBitrateFrame"),s.prototype.bitrates=m.emptyArray,s.prototype.serverAvailableOutgoingBitrate=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.bitrates!=null&&e.bitrates.length)for(var n=0;n<e.bitrates.length;++n)a.SdkBitrate.encode(e.bitrates[n],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var n=a.SdkBitrate.verify(e.bitrates[t]);if(n)return"bitrates."+n}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var n=0;n<e.bitrates.length;++n){if(typeof e.bitrates[n]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[n]=a.SdkBitrate.fromObject(e.bitrates[n])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.bitrates=[]),t.defaults&&(n.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){n.bitrates=[];for(var o=0;o<e.bitrates.length;++o)n.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(n.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),s}(),a.SdkStreamDescriptor=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamDescriptor"),s.prototype.streamId=0,s.prototype.framerate=0,s.prototype.maxBitrateKbps=0,s.prototype.trackLabel="",s.prototype.groupId=0,s.prototype.avgBitrateBps=0,s.prototype.attendeeId="",s.prototype.mediaType=1,s.prototype.externalUserId="",s.prototype.width=0,s.prototype.height=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.framerate=0,n.maxBitrateKbps=0,n.trackLabel="",n.groupId=0,n.avgBitrateBps=0,n.attendeeId="",n.mediaType=t.enums===String?"AUDIO":1,n.externalUserId="",n.width=0,n.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(n.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(n.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(n.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(n.height=e.height),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),s}(),a.SdkStreamAllocation=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamAllocation"),s.prototype.trackLabel="",s.prototype.streamId=0,s.prototype.groupId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.trackLabel="",n.streamId=0,n.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),s}(),a.SdkTrackMapping=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTrackMapping"),s.prototype.streamId=0,s.prototype.ssrc=0,s.prototype.trackLabel="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.ssrc=0,n.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(n.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),s}(),a.SdkBitrate=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkBitrate"),s.prototype.sourceStreamId=0,s.prototype.avgBitrateBps=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceStreamId=0,n.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(n.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),s}(),a.SdkAudioControlFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioControlFrame"),s.prototype.muted=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),s}(),a.SdkAudioMetadataFrame=function(){function s(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioMetadataFrame"),s.prototype.attendeeStates=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var n=0;n<e.attendeeStates.length;++n)a.SdkAudioAttendeeState.encode(e.attendeeStates[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var n=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(n)return"attendeeStates."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n){if(typeof e.attendeeStates[n]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[n]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){n.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)n.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),s}(),a.SdkAudioAttendeeState=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioAttendeeState"),s.prototype.audioStreamId=0,s.prototype.volume=0,s.prototype.muted=!1,s.prototype.signalStrength=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.volume=0,n.muted=!1,n.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(n.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(n.signalStrength=e.signalStrength),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfoFrame=function(){function s(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioStreamIdInfoFrame"),s.prototype.streams=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streams!=null&&e.streams.length)for(var n=0;n<e.streams.length;++n)a.SdkAudioStreamIdInfo.encode(e.streams[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var n=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(n)return"streams."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var n=0;n<e.streams.length;++n){if(typeof e.streams[n]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[n]=a.SdkAudioStreamIdInfo.fromObject(e.streams[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streams=[]),e.streams&&e.streams.length){n.streams=[];for(var o=0;o<e.streams.length;++o)n.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfo=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioStreamIdInfo"),s.prototype.audioStreamId=0,s.prototype.attendeeId="",s.prototype.muted=!1,s.prototype.externalUserId="",s.prototype.dropped=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.attendeeId="",n.muted=!1,n.externalUserId="",n.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(n.dropped=e.dropped),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),s}(),a.SdkPingPongType=function(){var s={},i=Object.create(s);return i[s[1]="PING"]=1,i[s[2]="PONG"]=2,i}(),a.SdkPingPongFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPingPongFrame"),s.prototype.type=1,s.prototype.pingId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"PING":1,n.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(n.pingId=e.pingId),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),s}(),a.SdkAudioStatusFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioStatusFrame"),s.prototype.audioStatus=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=e.audioStatus),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),s}(),a.SdkMetric=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkMetric"),s.prototype.type=1,s.prototype.value=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 60:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_INPUT_HEIGHT":case 60:t.type=60;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break;case"VIDEO_RENDER_HEIGHT":case 105:t.type=105;break;case"VIDEO_RENDER_WIDTH":case 106:t.type=106;break;case"VIDEO_INPUT_WIDTH":case 107:t.type=107;break;case"VIDEO_SENT_JITTER_MS":case 108:t.type=108;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,n.value=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[60]="VIDEO_INPUT_HEIGHT"]=60,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[i[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[i[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e[i[105]="VIDEO_RENDER_HEIGHT"]=105,e[i[106]="VIDEO_RENDER_WIDTH"]=106,e[i[107]="VIDEO_INPUT_WIDTH"]=107,e[i[108]="VIDEO_SENT_JITTER_MS"]=108,e}(),s}(),a.SdkStreamMetricFrame=function(){function s(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamMetricFrame"),s.prototype.streamId=0,s.prototype.groupId=0,s.prototype.metrics=m.emptyArray,s.prototype.dimensions=m.emptyArray,s.prototype.mediaType=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var n=0;n<e.metrics.length;++n)a.SdkMetric.encode(e.metrics[n],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var n=0;n<e.dimensions.length;++n)a.SdkStreamDimension.encode(e.dimensions[n],t.uint32(50).fork()).ldelim();return e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(56).int32(e.mediaType),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}case 7:{o.mediaType=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var n=a.SdkMetric.verify(e.metrics[t]);if(n)return"metrics."+n}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var n=a.SdkStreamDimension.verify(e.dimensions[t]);if(n)return"dimensions."+n}}if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var n=0;n<e.metrics.length;++n){if(typeof e.metrics[n]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[n]=a.SdkMetric.fromObject(e.metrics[n])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var n=0;n<e.dimensions.length;++n){if(typeof e.dimensions[n]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[n]=a.SdkStreamDimension.fromObject(e.dimensions[n])}}switch(e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.metrics=[],n.dimensions=[]),t.defaults&&(n.streamId=0,n.groupId=0,n.mediaType=t.enums===String?"AUDIO":1),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.metrics&&e.metrics.length){n.metrics=[];for(var o=0;o<e.metrics.length;++o)n.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){n.dimensions=[];for(var o=0;o<e.dimensions.length;++o)n.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),s}(),a.SdkClientMetricFrame=function(){function s(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkClientMetricFrame"),s.prototype.globalMetrics=m.emptyArray,s.prototype.streamMetricFrames=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var n=0;n<e.globalMetrics.length;++n)a.SdkMetric.encode(e.globalMetrics[n],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var n=0;n<e.streamMetricFrames.length;++n)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[n],t.uint32(18).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var n=a.SdkMetric.verify(e.globalMetrics[t]);if(n)return"globalMetrics."+n}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var n=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(n)return"streamMetricFrames."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n){if(typeof e.globalMetrics[n]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[n]=a.SdkMetric.fromObject(e.globalMetrics[n])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var n=0;n<e.streamMetricFrames.length;++n){if(typeof e.streamMetricFrames[n]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[n]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.globalMetrics=[],n.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){n.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)n.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){n.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)n.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),s}(),a.SdkStreamDimension=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamDimension"),s.prototype.type=1,s.prototype.value=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ENCODER_NAME":1,n.value=null),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=a.SdkDimensionValue.toObject(e.value,t)),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),s}(),a.SdkDimensionValue=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkDimensionValue"),s.prototype.stringValue="",s.prototype.boolValue=!1,s.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults)if(n.stringValue="",n.boolValue=!1,m.Long){var o=new m.Long(0,0,!0);n.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(n.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(n.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?n.uintValue=t.longs===String?String(e.uintValue):e.uintValue:n.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),s}(),a.SdkDataMessageFrame=function(){function s(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkDataMessageFrame"),s.prototype.messages=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)a.SdkDataMessagePayload.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=a.SdkDataMessagePayload.verify(e.messages[t]);if(n)return"messages."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if(typeof e.messages[n]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[n]=a.SdkDataMessagePayload.fromObject(e.messages[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var o=0;o<e.messages.length;++o)n.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),s}(),a.SdkDataMessagePayload=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkDataMessagePayload"),s.prototype.topic="",s.prototype.data=m.newBuffer([]),s.prototype.lifetimeMs=0,s.prototype.senderAttendeeId="",s.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.senderExternalUserId="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.topic="",t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=m.newBuffer(n.data))),n.lifetimeMs=0,n.senderAttendeeId="",m.Long){var o=new m.Long(0,0,!1);n.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.ingestTimeNs=t.longs===String?"0":0;n.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(n.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(n.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(n.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?n.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:n.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(n.senderExternalUserId=e.senderExternalUserId),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),s}(),a.SdkTurnCredentials=function(){function s(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTurnCredentials"),s.prototype.username="",s.prototype.password="",s.prototype.ttl=0,s.prototype.uris=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var n=0;n<e.uris.length;++n)t.uint32(34).string(e.uris[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var n=0;n<e.uris.length;++n)t.uris[n]=String(e.uris[n])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.uris=[]),t.defaults&&(n.username="",n.password="",n.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(n.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(n.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(n.ttl=e.ttl),e.uris&&e.uris.length){n.uris=[];for(var o=0;o<e.uris.length;++o)n.uris[o]=e.uris[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),s}(),a.SdkTranscriptItem=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptItem"),s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.speakerAttendeeId="",s.prototype.speakerExternalUserId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type=1,s.prototype.vocabularyFilterMatch=!1,s.prototype.confidence=0,s.prototype.stable=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.content="",m.Long){var o=new m.Long(0,0,!1);n.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.endTime=t.longs===String?"0":0;if(n.speakerAttendeeId="",n.speakerExternalUserId="",m.Long){var o=new m.Long(0,0,!1);n.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.startTime=t.longs===String?"0":0;n.type=t.enums===String?"PRONUNCIATION":1,n.vocabularyFilterMatch=!1,n.confidence=0,n.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(n.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(n.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(n.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(n.stable=e.stable),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),s}(),a.SdkTranscriptEntity=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptEntity"),s.prototype.category="",s.prototype.confidence=0,s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.category="",n.confidence=0,n.content="",m.Long){var o=new m.Long(0,0,!1);n.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.endTime=t.longs===String?"0":0;if(m.Long){var o=new m.Long(0,0,!1);n.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.startTime=t.longs===String?"0":0;n.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(n.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=e.type),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),s}(),a.SdkTranscriptAlternative=function(){function s(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptAlternative"),s.prototype.items=m.emptyArray,s.prototype.transcript="",s.prototype.entities=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.items!=null&&e.items.length)for(var n=0;n<e.items.length;++n)a.SdkTranscriptItem.encode(e.items[n],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var n=0;n<e.entities.length;++n)a.SdkTranscriptEntity.encode(e.entities[n],t.uint32(26).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var n=a.SdkTranscriptItem.verify(e.items[t]);if(n)return"items."+n}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var n=a.SdkTranscriptEntity.verify(e.entities[t]);if(n)return"entities."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var n=0;n<e.items.length;++n){if(typeof e.items[n]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[n]=a.SdkTranscriptItem.fromObject(e.items[n])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var n=0;n<e.entities.length;++n){if(typeof e.entities[n]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[n]=a.SdkTranscriptEntity.fromObject(e.entities[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.items=[],n.entities=[]),t.defaults&&(n.transcript=""),e.items&&e.items.length){n.items=[];for(var o=0;o<e.items.length;++o)n.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(n.transcript=e.transcript),e.entities&&e.entities.length){n.entities=[];for(var o=0;o<e.entities.length;++o)n.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),s}(),a.SdkTranscriptLanguageWithScore=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptLanguageWithScore"),s.prototype.languageCode="",s.prototype.score=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.languageCode="",n.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(n.score=t.json&&!isFinite(e.score)?String(e.score):e.score),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),s}(),a.SdkTranscriptResult=function(){function s(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptResult"),s.prototype.alternatives=m.emptyArray,s.prototype.channelId="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.isPartial=!1,s.prototype.resultId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.languageCode="",s.prototype.languageIdentification=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.alternatives!=null&&e.alternatives.length)for(var n=0;n<e.alternatives.length;++n)a.SdkTranscriptAlternative.encode(e.alternatives[n],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var n=0;n<e.languageIdentification.length;++n)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[n],t.uint32(66).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var n=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(n)return"alternatives."+n}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var n=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(n)return"languageIdentification."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var n=0;n<e.alternatives.length;++n){if(typeof e.alternatives[n]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[n]=a.SdkTranscriptAlternative.fromObject(e.alternatives[n])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var n=0;n<e.languageIdentification.length;++n){if(typeof e.languageIdentification[n]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[n]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.alternatives=[],n.languageIdentification=[]),t.defaults){if(n.channelId="",m.Long){var o=new m.Long(0,0,!1);n.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.endTime=t.longs===String?"0":0;if(n.isPartial=!1,n.resultId="",m.Long){var o=new m.Long(0,0,!1);n.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.startTime=t.longs===String?"0":0;n.languageCode=""}if(e.alternatives&&e.alternatives.length){n.alternatives=[];for(var f=0;f<e.alternatives.length;++f)n.alternatives[f]=a.SdkTranscriptAlternative.toObject(e.alternatives[f],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(n.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(n.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(n.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){n.languageIdentification=[];for(var f=0;f<e.languageIdentification.length;++f)n.languageIdentification[f]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[f],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),s}(),a.SdkTranscript=function(){function s(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscript"),s.prototype.results=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.results!=null&&e.results.length)for(var n=0;n<e.results.length;++n)a.SdkTranscriptResult.encode(e.results[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var n=a.SdkTranscriptResult.verify(e.results[t]);if(n)return"results."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var n=0;n<e.results.length;++n){if(typeof e.results[n]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[n]=a.SdkTranscriptResult.fromObject(e.results[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.results=[]),e.results&&e.results.length){n.results=[];for(var o=0;o<e.results.length;++o)n.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),s}(),a.SdkTranscriptionStatus=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptionStatus"),s.prototype.type=1,s.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.transcriptionRegion="",s.prototype.transcriptionConfiguration="",s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.type=t.enums===String?"STARTED":1,m.Long){var o=new m.Long(0,0,!1);n.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.eventTime=t.longs===String?"0":0;n.transcriptionRegion="",n.transcriptionConfiguration="",n.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?n.eventTime=t.longs===String?String(e.eventTime):e.eventTime:n.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(n.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(n.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),s}(),a.SdkTranscriptEvent=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}r(s,"SdkTranscriptEvent"),s.prototype.status=null,s.prototype.transcript=null;var i;return Object.defineProperty(s.prototype,"Event",{get:m.oneOfGetter(i=["status","transcript"]),set:m.oneOfSetter(i)}),s.create=r(function(t){return new s(t)},"create"),s.encode=r(function(t,n){return n||(n=p.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,n.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,n.uint32(18).fork()).ldelim(),n},"encode"),s.encodeDelimited=r(function(t,n){return this.encode(t,n).ldelim()},"encodeDelimited"),s.decode=r(function(t,n){t instanceof h||(t=h.create(t));for(var o=n===void 0?t.len:t.pos+n,f=new a.SdkTranscriptEvent;t.pos<o;){var g=t.uint32();switch(g>>>3){case 1:{f.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{f.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(g&7);break}}return f},"decode"),s.decodeDelimited=r(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),s.verify=r(function(t){if(typeof t!="object"||t===null)return"object expected";var n={};if(t.status!=null&&t.hasOwnProperty("status")){n.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(n.Event===1)return"Event: multiple values";n.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),s.fromObject=r(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var n=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");n.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");n.transcript=a.SdkTranscript.fromObject(t.transcript)}return n},"fromObject"),s.toObject=r(function(t,n){n||(n={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,n),n.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,n),n.oneofs&&(o.Event="transcript")),o},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),s}(),a.SdkTranscriptFrame=function(){function s(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptFrame"),s.prototype.events=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.events!=null&&e.events.length)for(var n=0;n<e.events.length;++n)a.SdkTranscriptEvent.encode(e.events[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var n=a.SdkTranscriptEvent.verify(e.events[t]);if(n)return"events."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var n=0;n<e.events.length;++n){if(typeof e.events[n]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[n]=a.SdkTranscriptEvent.fromObject(e.events[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.events=[]),e.events&&e.events.length){n.events=[];for(var o=0;o<e.events.length;++o)n.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),s}(),a.SdkRemoteVideoUpdateFrame=function(){function s(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkRemoteVideoUpdateFrame"),s.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,s.prototype.removedVideoSubscriptionMids=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[n],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.uint32(18).string(e.removedVideoSubscriptionMids[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(n)return"addedOrUpdatedVideoSubscriptions."+n}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n){if(typeof e.addedOrUpdatedVideoSubscriptions[n]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[n])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.removedVideoSubscriptionMids[n]=String(e.removedVideoSubscriptionMids[n])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addedOrUpdatedVideoSubscriptions=[],n.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){n.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)n.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){n.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)n.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),s}(),a.SdkVideoQualityAdaptationPreference=function(){var s={},i=Object.create(s);return i[s[1]="BALANCED"]=1,i[s[2]="MAINTAIN_FRAMERATE"]=2,i[s[3]="MAINTAIN_RESOLUTION"]=3,i}(),a.SdkVideoSubscriptionConfiguration=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkVideoSubscriptionConfiguration"),s.prototype.mid="",s.prototype.attendeeId="",s.prototype.streamId=0,s.prototype.priority=0,s.prototype.targetBitrateKbps=0,s.prototype.groupId=0,s.prototype.qualityAdaptationPreference=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.mid="",n.attendeeId="",n.streamId=0,n.priority=0,n.targetBitrateKbps=0,n.groupId=0,n.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(n.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(n.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(n.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(n.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),s}(),a.SdkNotificationFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkNotificationFrame"),s.prototype.level=3,s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.level=t.enums===String?"ERROR":3,n.message=""),e.level!=null&&e.hasOwnProperty("level")&&(n.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),s.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),s}(),a.SdkPrimaryMeetingJoinFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPrimaryMeetingJoinFrame"),s.prototype.credentials=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(n.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPrimaryMeetingJoinAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPrimaryMeetingLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),s}(),a.SdkMeetingSessionCredentials=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkMeetingSessionCredentials"),s.prototype.attendeeId="",s.prototype.externalUserId="",s.prototype.joinToken="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.attendeeId="",n.externalUserId="",n.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(n.joinToken=e.joinToken),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),s}(),a.SdkVideoCodecCapability=function(){var s={},i=Object.create(s);return i[s[1]="VP8"]=1,i[s[2]="H264_BASELINE_PROFILE"]=2,i[s[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[s[4]="H264_MAIN_PROFILE"]=4,i[s[5]="H264_HIGH_PROFILE"]=5,i[s[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,i[s[8]="VP9_PROFILE_0"]=8,i[s[11]="AV1_MAIN_PROFILE"]=11,i}(),B.exports=a,m.Long=void 0,u.configure()},4859482891:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(8985570388),m=d(5527154335),a=h(d(1877666836));let s=r(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const n=new p.Sha256(t);return n.update(e),n.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,n,o){return u(this,void 0,void 0,function*(){const f=yield this.hmac(t,"AWS4"+e),g=yield this.hmac(n,f),S=yield this.hmac(o,g);return yield this.hmac("aws4_request",S)})}signURL(e,t,n,o,f,g,S){return u(this,void 0,void 0,function*(){const c=this.getDateTimeString(),v=this.getDateString(c),_="AWS4-HMAC-SHA256";let E="";this.chimeClient.config.region instanceof Function?E=yield this.chimeClient.config.region():E=this.chimeClient.config.region;const b="host",T="host:"+o.toLowerCase()+`
`,I=v+"/"+E+"/"+n+"/aws4_request";let O;this.chimeClient.config.credentials instanceof Function?O=yield this.chimeClient.config.credentials():O=this.chimeClient.config.credentials;let w=new Map;w.set("X-Amz-Algorithm",[_]),w.set("X-Amz-Credential",[encodeURIComponent(O.accessKeyId+"/"+I)]),w.set("X-Amz-Date",[c]),w.set("X-Amz-Expires",["10"]),w.set("X-Amz-SignedHeaders",["host"]),O.sessionToken&&w.set("X-Amz-Security-Token",[encodeURIComponent(O.sessionToken)]),w.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),w.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((ae,ce)=>{const Te=encodeURIComponent(ce);ae.sort().forEach(ke=>{w.has(Te)||w.set(Te,[]),w.get(Te).push(encodeURIComponent(ke))})});let D="";w=new Map([...w.entries()].sort()),w.forEach((ae,ce)=>{ae.forEach(Te=>{D.length&&(D+="&"),D+=ce+"="+Te})});const R=e+`
`+f+`
`+D+`
`+T+`
`+b+`
`+m.toHex(yield this.hmac(g)),L=m.toHex(yield this.hmac(R)),H=`AWS4-HMAC-SHA256
`+c+`
`+v+"/"+E+"/"+n+`/aws4_request
`+L,K=yield this.getSignatureKey(O.secretAccessKey,v,E,n),ee=m.toHex(yield this.hmac(H,K)),q=D+"&X-Amz-Signature="+ee;return t+"://"+o+f+"?"+q})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=s},7833098058:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var d;(function(u){u[u.Low=0]="Low",u[u.LowAndMedium=1]="LowAndMedium",u[u.LowAndHigh=2]="LowAndHigh",u[u.Medium=3]="Medium",u[u.MediumAndHigh=4]="MediumAndHigh",u[u.High=5]="High"})(d=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=d},5018804390:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var d;(function(u){u[u.DeviceChanged=0]="DeviceChanged",u[u.MutedLocal=1]="MutedLocal",u[u.UnmutedLocal=2]="UnmutedLocal",u[u.Connected=3]="Connected",u[u.ConnectFailed=4]="ConnectFailed",u[u.RedmicStartLoss=5]="RedmicStartLoss",u[u.RedmicEndLoss=6]="RedmicEndLoss"})(d=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=d},6017023892:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(v,_,E,b){function T(I){return I instanceof E?I:new E(function(O){O(I)})}return r(T,"adopt"),new(E||(E=Promise))(function(I,O){function w(L){try{R(b.next(L))}catch(H){O(H)}}r(w,"fulfilled");function D(L){try{R(b.throw(L))}catch(H){O(H)}}r(D,"rejected");function R(L){L.done?I(L.value):T(L.value).then(w,D)}r(R,"step"),R((b=b.apply(v,_||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6504123882)),m=h(d(9228821375)),a=h(d(8620705262)),s=h(d(9193449927)),i=h(d(2245405125)),e=h(d(7111900270)),t=h(d(8191739119)),n=h(d(7080398225)),o=d(7344258710),f=d(8479756130),g=h(d(5018804390)),S=h(d(4954547171));let c=r(class vu{toAttribute(_){return this.toSuffix(_).substring(1)}toSuffix(_){return _.toLowerCase()===_?`_${_}`:_.toUpperCase()===_?`_${_.toLowerCase()}`:_.replace(/([A-Z][a-z]+)/g,function(E){return`_${E}`}).replace(/([A-Z][A-Z]+)/g,function(E){return`_${E}`}).toLowerCase()}logLatency(_,E,b){const T=this.toSuffix(_);this.logEventTime("meeting"+T,E,b)}logStateTimeout(_,E){const b=this.toSuffix(_);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},E),{state:`state${b}`}))}logAudioEvent(_,E){const b="audio"+this.toSuffix(g.default[_]);this.logEvent(b,E)}logVideoEvent(_,E){const b="video"+this.toSuffix(S.default[_]);this.logEvent(b,E)}logEventTime(_,E){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const T=Object.assign(Object.assign({},b),{call_id:this.audioVideoController.configuration.meetingId,client_type:vu.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${_}: ${JSON.stringify(T)}`),this.metricsAddTime(_,E,T)}logMeetingSessionStatus(_){const E=`${_.statusCode()}`;this.logEvent(E);const b={status:E,status_code:`${_.statusCode()}`};this.logEvent("meeting_session_status",b),_.isTerminal()&&this.logEvent("meeting_session_stopped",b),_.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",b),_.isFailure()&&this.logEvent("meeting_session_failed",b)}logLifecycleEvent(_,E){const b={lifecycle_event:`lifecycle${this.toSuffix(e.default[_])}`,lifecycle_event_code:`${_}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[E])}`,lifecycle_event_condition_code:`${E}`};this.logEvent("meeting_session_lifecycle",b)}logEvent(_){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const b=Object.assign(Object.assign({},E),{call_id:this.audioVideoController.configuration.meetingId,client_type:vu.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${_}: ${JSON.stringify(b)}`),this.metricsLogEvent(_,b)}start(_,E){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=_,this.videoStreamIndex=E,this.clientMetricReport=new p.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new n.default(this.interval),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}videoTileResolutionDidChange(_,E,b){this.resolutionMap.set(_,{width:E,height:b})}videoTileUnbound(_){this.resolutionMap.delete(_)}updateMetricValues(_,E){const b=E?this.clientMetricReport.streamMetricReports[Number(_.ssrc)]:this.clientMetricReport.globalMetricReport;let T;if(E){const I=b.mediaType,O=b.direction;T=this.clientMetricReport.getMetricMap(I,O),I===a.default.VIDEO&&O===m.default.DOWNSTREAM&&this.addRenderResolutionToVideoDownstreamMetrics(b,_.ssrc)}else T=this.clientMetricReport.getMetricMap();for(const I in _)I in T&&(typeof _[I]=="number"?(b.previousMetrics[I]=b.currentMetrics[I],b.currentMetrics[I]=_[I]):typeof _[I]=="string"?b.currentStringMetrics[I]=_[I]:typeof _[I]=="object"?(b.previousObjectMetrics[I]=b.currentObjectMetrics[I]===void 0?_[I]:b.currentObjectMetrics[I],b.currentObjectMetrics[I]=_[I]):this.logger.error(`Unknown metric value type ${typeof _[I]} for metric ${I}`))}processRawMetricReports(_){this.clientMetricReport.currentSsrcs={};const E=Date.now();for(const b of _){if(this.isVideoSourceMetricReport(b))continue;const T=this.isStreamRawMetricReport(b);if(T){const I=this.clientMetricReport.streamMetricReports[Number(b.ssrc)];if(I)I.mediaType===a.default.VIDEO&&I.direction===m.default.UPSTREAM?I.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(b.rid):I.streamId=this.videoStreamIndex.streamIdForSSRC(Number(b.ssrc));else{const O=new i.default;O.mediaType=this.getMediaType(b),O.direction=this.getDirectionType(b),O.mediaType===a.default.VIDEO&&O.direction===m.default.UPSTREAM?O.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(b.rid):this.videoStreamIndex.allStreams().empty()||(O.streamId=this.videoStreamIndex.streamIdForSSRC(Number(b.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(O.groupId=this.videoStreamIndex.groupIdForSSRC(Number(b.ssrc)))),this.clientMetricReport.streamMetricReports[Number(b.ssrc)]=O}this.clientMetricReport.currentSsrcs[Number(b.ssrc)]=1}this.updateMetricValues(b,T)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=E,this.clientMetricReport.print()}addStreamMetricDimensionFrames(_,E){const b=this.clientMetricReport.getStreamDimensionMap();for(const T in E.currentStringMetrics)if(T in b){const I=o.SdkStreamDimension.create();I.type=b[T];const O=o.SdkDimensionValue.create();O.stringValue=E.currentStringMetrics[T],I.value=O,_.dimensions.push(I)}}addMetricFrame(_,E,b,T){const I=b.type,O=b.transform,w=b.source,D=E.streamMetricFrames.length,R=E.streamMetricFrames[D-1];if(I){const L=o.SdkMetric.create();L.type=I,L.value=O(w||_,T),T?R.metrics.push(L):E.globalMetrics.push(L)}}addGlobalMetricsToProtobuf(_){const E=this.clientMetricReport.getMetricMap();for(const b in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(b,_,E[b])}addStreamMetricsToProtobuf(_){for(const E in this.clientMetricReport.streamMetricReports){const b=this.clientMetricReport.streamMetricReports[E],T=o.SdkStreamMetricFrame.create();T.streamId=b.streamId,T.mediaType=b.mediaType===a.default.AUDIO?o.SdkStreamMediaType.AUDIO:o.SdkStreamMediaType.VIDEO,T.metrics=[],this.addStreamMetricDimensionFrames(T,b),_.streamMetricFrames.push(T);const I=this.clientMetricReport.getMetricMap(b.mediaType,b.direction);for(const O in I)this.hasMetricDependenciesInReport(O,b)&&this.addMetricFrame(O,_,I[O],Number(E))}}hasMetricDependenciesInReport(_,E){return _==="decoderLoss"&&E.currentMetrics.concealedSamples!==void 0&&E.currentMetrics.totalSamplesReceived!==void 0||_==="jitterBufferMs"&&E.currentMetrics.jitterBufferDelay!==void 0&&E.currentMetrics.jitterBufferEmittedCount!==void 0||_ in E.currentMetrics||_ in E.currentStringMetrics||_ in E.currentObjectMetrics}makeClientMetricProtobuf(){const _=o.SdkClientMetricFrame.create();return _.globalMetrics=[],_.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(_),this.addStreamMetricsToProtobuf(_),_}sendClientMetricProtobuf(_){this.signalingClient.sendClientMetrics(_)}isStreamRawMetricReport(_){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(_.type)||this.isVideoSourceMetricReport(_)}getMediaType(_){return _.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(_){const{type:E}=_;return E==="inbound-rtp"||E==="remote-outbound-rtp"||E==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(_){return _.type==="inbound-rtp"||_.type==="inbound-rtp-red"||_.type==="outbound-rtp"||_.type==="remote-inbound-rtp"||_.type==="remote-outbound-rtp"||_.type==="candidate-pair"&&_.state==="succeeded"||_.type==="media-source"}isValidSsrc(_){let E=!0;return this.isStreamRawMetricReport(_)&&this.getDirectionType(_)===m.default.DOWNSTREAM&&this.getMediaType(_)===a.default.VIDEO&&(E=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc))>0),E}isValidRawMetricReport(_){return this.isValidStandardRawMetric(_)&&this.isValidSsrc(_)}filterRawMetricReports(_){const E=[];for(const b of _)this.isValidRawMetricReport(b)&&E.push(b);return E}handleRawMetricReports(_){const E=this.filterRawMetricReports(_);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(E)}`);const b=[];this.maybeAddRedRecoveryMetrics(b);const T=this.getVideoUpstreamSsrcFromRawMetricReports(E);T!==null&&this.addVideoCodecDegradationMetrics(b,T),this.clientMetricReport.customStatsReports=b,E.push(...b),this.processRawMetricReports(E),this.updateVideoSourceMetrics(E);const I=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(I),this.audioVideoController.forEachObserver(O=>{f.Maybe.of(O.metricsDidReceive).map(w=>w.bind(O)(this.clientMetricReport.clone()))})}getStatsWrapper(){return u(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const _=[];try{const E=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=E,E.forEach(b=>{_.push(b)}),this.handleRawMetricReports(_)}catch(E){this.logger.error(E.message)}})}overrideObservableMetric(_,E){this.clientMetricReport.overrideObservableMetric(_,E)}recoveryMetricsDidReceive(_){this.redRecoveryMetricReport=_}maybeAddRedRecoveryMetrics(_){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(_.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(_,E){_.push({kind:"video",type:"outbound-rtp",ssrc:E,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}getVideoUpstreamSsrcFromRawMetricReports(_){for(const E of _)if(this.isStreamRawMetricReport(E)&&this.getMediaType(E)===a.default.VIDEO&&this.getDirectionType(E)===m.default.UPSTREAM)return E.ssrc;return null}isVideoSourceMetricReport(_){return _.type==="media-source"&&_.kind==="video"}addRenderResolutionToVideoDownstreamMetrics(_,E){const b=this.videoStreamIndex.streamIdForSSRC(Number(E)),T=this.videoStreamIndex.attendeeIdForStreamId(b);if(b===void 0||T===""){this.logger.warn(`No attendee found for ssrc ${E}`);return}this.resolutionMap.has(T)&&(_.currentMetrics.videoRenderWidth=this.resolutionMap.get(T).width,_.currentMetrics.videoRenderHeight=this.resolutionMap.get(T).height)}updateVideoSourceMetrics(_){for(const E of _)if(this.isVideoSourceMetricReport(E)){const b=this.clientMetricReport.getVideoUpstreamSsrcs();if(b.length===0){this.logger.warn("No video upstream ssrcs found");return}for(const T of b)this.clientMetricReport.streamMetricReports[T].currentMetrics.videoInputWidth=E.width,this.clientMetricReport.streamMetricReports[T].currentMetrics.videoInputHeight=E.height}}constructor(_,E,b=vu.INTERVAL_MS){this.audioVideoController=_,this.logger=E,this.interval=b,this.intervalScheduler=null,this.redRecoveryMetricReport=new s.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.resolutionMap=new Map,this.metricsAddTime=(T,I,O)=>{},this.metricsLogEvent=(T,I)=>{}}},"StatsCollector");l.default=c,c.INTERVAL_MS=1e3,c.CLIENT_TYPE="amazon-chime-sdk-js"},4954547171:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var d;(function(u){u[u.InputAttached=0]="InputAttached",u[u.SendingFailed=1]="SendingFailed",u[u.SendingSuccess=2]="SendingSuccess"})(d=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=d},44274307:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4954547171)),m=h(d(9651796943));let a=r(class extends m.default{run(){return u(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer),i.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const n=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(n.length?n[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const n=t.getVideoTracks(),o=n.length?n[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const f=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(f)}o&&this.context.statsCollector.logVideoEvent(p.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:n}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(n,null,4)}`);const o=n.findIndex(f=>f.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const f=n[o];n.splice(o,1),e?(n.unshift(f),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(n);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},9651796943:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7977267467)),m=h(d(3274536108));let a=r(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new p.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return u(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(i){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},7344467851:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9651796943));let m=r(class extends p.default{run(){return u(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(s){super(s.logger),this.context=s,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=m},5438824562:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(201131498)),m=h(d(9651796943));let a=r(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=r(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(f){f.type===p.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(f){this.signalingClient=f}},"Interceptor");const n=new t(this.context.signalingClient);this.taskCanceler=n,this.context.signalingClient.registerObserver(n)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},38878034:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9651796943));let m=r(class extends p.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const s in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[s]()}addPeerConnectionEventLogger(){const s=this.context.peer;s.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${s.connectionState}`)}),s.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),s.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${s.iceGatheringState}`)}),s.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),s.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${s.iceConnectionState}`)})}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(s){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(s)):!1}addRemoteVideoTrack(s,i){var e;const t=i.id,n=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,f;if(this.context.videoTileController.getVideoTileForAttendeeId?(f=this.context.videoTileController.getVideoTileForAttendeeId(n),o=!!(!((e=f==null?void 0:f.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(n),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${n}`);return}f||(f=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${f.id()}`));let g=this.context.videoStreamIndex.streamIdForTrack(t);typeof g>"u"&&(this.logger.warn(`stream not found for tile=${f.id()} track=${t}`),g=null);let S=this.context.videoStreamIndex.groupIdForStreamId(g);S===void 0&&(S=null);for(let I=0;I<this.trackEvents.length;I++){const O=this.trackEvents[I],w=i.getVideoTracks();if(w&&w.length){const D=w[0],R=r(()=>{this.context.logger.info(`received the ${O} event for tile=${f.id()} id=${s.id} streamId=${g}`),O==="ended"&&this.removeRemoteVideoTrack(s,f.state())},"callback");D.addEventListener(O,R),this.removeVideoTrackEventListeners[s.id]||(this.removeVideoTrackEventListeners[s.id]=[]),this.removeVideoTrackEventListeners[s.id].push(()=>{D.removeEventListener(O,R)})}}let c,v;if(s.getSettings){const I=s.getSettings();c=I.width,v=I.height}else{const I=s.getCapabilities();c=I.width,v=I.height}const _=this.context.videoStreamIndex.externalUserIdForTrack(t);f.bindVideoStream(n,!1,i,c,v,g,_,S),this.logger.info(`video track added, use tile=${f.id()} track=${t} streamId=${g} groupId=${S}`);const E="removetrack",b=i,T=r(()=>this.removeRemoteVideoTrack(s,f.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[s.id]=()=>{b.removeEventListener(E,T),delete this.removeTrackRemovedEventListeners[s.id]},b.addEventListener(E,T)}removeRemoteVideoTrack(s,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(s.id)){this.removeTrackRemovedEventListeners[s.id]();for(const e of this.removeVideoTrackEventListeners[s.id])e();delete this.removeVideoTrackEventListeners[s.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${s.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(s){super(s.logger),this.context=s,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},320218677:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4474236581)),m=h(d(5603242550)),a=h(d(9651796943));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const n=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||n;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${n})`),o}run(){return u(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,n)=>u(this,void 0,void 0,function*(){this.cancelPromise=o=>{n(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,n(o);return}t()}catch(o){n(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=s},2568010183:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4474236581)),m=h(d(5603242550)),a=h(d(9651796943));let s=r(class uS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return u(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=n=>{this.removeEventListener(),t(n)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=n=>{if(this.context.logger.info(`ice candidate: ${n.candidate?n.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),n.candidate&&(m.default.isRTPCandidate(n.candidate.candidate)&&this.context.iceCandidates.push(n.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=uS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=s,s.CHROME_VPN_TIMEOUT_MS=5e3},887979666:function(B,l,d){"use strict";var u=this&&this.__createBinding||(Object.create?function(c,v,_,E){E===void 0&&(E=_),Object.defineProperty(c,E,{enumerable:!0,get:function(){return v[_]}})}:function(c,v,_,E){E===void 0&&(E=_),c[E]=v[_]}),h=this&&this.__setModuleDefault||(Object.create?function(c,v){Object.defineProperty(c,"default",{enumerable:!0,value:v})}:function(c,v){c.default=v}),p=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var v={};if(c!=null)for(var _ in c)_!=="default"&&Object.prototype.hasOwnProperty.call(c,_)&&u(v,c,_);return h(v,c),v},m=this&&this.__awaiter||function(c,v,_,E){function b(T){return T instanceof _?T:new _(function(I){I(T)})}return r(b,"adopt"),new(_||(_=Promise))(function(T,I){function O(R){try{D(E.next(R))}catch(L){I(L)}}r(O,"fulfilled");function w(R){try{D(E.throw(R))}catch(L){I(L)}}r(w,"rejected");function D(R){R.done?T(R.value):b(R.value).then(O,w)}r(D,"step"),D((E=E.apply(c,v||[])).next())})},a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(8363971156)),i=a(d(4474236581)),e=a(d(4418554613)),t=p(d(498975381)),n=a(d(201131498)),o=a(d(7090195098)),f=d(7344258710),g=a(d(9651796943));let S=r(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const v=yield new Promise((_,E)=>{const b=this.context;b.turnCredentials=null;let T=r(class{cancel(){this.signalingClient.removeObserver(this),E(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(D){if(D.type===n.default.WebSocketClosed){let L=`The signaling connection was closed with code ${D.closeCode} and reason: ${D.closeReason}`;b.logger.warn(L);let H=i.default.SignalingBadRequest;D.closeCode===4410?(L="The meeting already ended.",b.logger.warn(L),H=i.default.MeetingEnded):D.closeCode>=4500&&D.closeCode<4600&&(H=i.default.SignalingInternalServerError),b.audioVideoController.handleMeetingSessionStatus(new s.default(H),new Error(L));return}if(D.type!==n.default.ReceivedSignalFrame)return;if(D.message.type===f.SdkSignalFrame.Type.JOIN_ACK){const L=D.message.joinack;if(!L){b.audioVideoController.handleMeetingSessionStatus(new s.default(i.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(L.videoSubscriptionLimit&&(b.videoSubscriptionLimit=L.videoSubscriptionLimit),b.serverSupportsCompression=L.wantsCompressedSdp,L.defaultServerSideNetworkAdaption!==void 0&&L.defaultServerSideNetworkAdaption!==t.default.Default&&b.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const H=L.defaultServerSideNetworkAdaption;b.logger.info(`Overriding server side network adaption value to ${H}`),b.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(H))}L&&L.turnCredentials?(b.turnCredentials=new e.default,b.turnCredentials.username=L.turnCredentials.username,b.turnCredentials.password=L.turnCredentials.password,b.turnCredentials.ttl=L.turnCredentials.ttl,b.turnCredentials.uris=L.turnCredentials.uris.map(H=>b.meetingSessionConfiguration.urls.urlRewriter(H)).filter(H=>!!H)):b.logger.error("missing TURN credentials in JoinAckFrame");return}if(D.message.type!==f.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const R=D.message.index;_(R)}constructor(D){this.signalingClient=D}},"IndexFrameInterceptor");const I=new T(this.context.signalingClient);this.context.signalingClient.registerObserver(I),this.taskCanceler=I,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const O=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(O.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),O.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(O.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),O.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(O)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},8813893041:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(201131498)),m=d(7344258710),a=h(d(9651796943));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let n=r(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(g){if(g.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}g.type===p.default.ReceivedSignalFrame&&g.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(g,S){this.signalingClient=g,this.logger=S}},"Interceptor");const o=new n(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=s},4016680554:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(201131498)),m=d(7344258710),a=h(d(9651796943));let s=r(class extends a.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===p.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=s},4246373854:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(E,b,T,I){function O(w){return w instanceof T?w:new T(function(D){D(w)})}return r(O,"adopt"),new(T||(T=Promise))(function(w,D){function R(K){try{H(I.next(K))}catch(ee){D(ee)}}r(R,"fulfilled");function L(K){try{H(I.throw(K))}catch(ee){D(ee)}}r(L,"rejected");function H(K){K.done?w(K.value):O(K.value).then(R,L)}r(H,"step"),H((I=I.apply(E,b||[])).next())})},h=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9228821375)),m=h(d(8620705262)),a=h(d(4705746645)),s=h(d(7549473166)),i=h(d(1168113665)),e=h(d(9225479537)),t=h(d(8363971156)),n=h(d(4474236581)),o=h(d(6375844864)),f=h(d(201131498)),g=d(7344258710),S=h(d(5018804390)),c=d(8479756130),v=h(d(9651796943));let _=r(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(b){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(b){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=b;return}else this.pendingMetricsReport=void 0;const T=b.getObservableMetrics(),I=T.availableOutgoingBitrate,O=T.nackCountReceivedPerSecond;let w=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(b);const D=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(w=w||D,D){const R=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=R.truncate(this.context.videoSubscriptionLimit),R.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${D}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:I/1e3,nackCountPerSecond:O});const R=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();w=w||R,R&&(this.logger.info(`trigger resubscribe for up=${R}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return w}metricsDidReceive(b){if(this.checkResubscribe(b)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const T=b.streamMetricReports,I=new Map;for(const O in T)T[O].mediaType===m.default.VIDEO&&T[O].direction===p.default.DOWNSTREAM&&I.set(T[O].streamId,T[O])}connectionHealthDidChange(b){b.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,b,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(n.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,b,()=>{var T;this.context.poorConnectionCount+=1;const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("receivingAudioDropped",I),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(O=>{c.Maybe.of(O.connectionDidSuggestStopVideo).map(w=>w.bind(O)())}):this.context.audioVideoController.forEachObserver(O=>{c.Maybe.of(O.connectionDidBecomePoor).map(w=>w.bind(O)())})},()=>{this.context.audioVideoController.forEachObserver(T=>{c.Maybe.of(T.connectionDidBecomeGood).map(I=>I.bind(T)())})});for(const T of this.videoEncodingHealthPolicies)this.applyHealthPolicy(T,b,()=>{switch(this.degradeVideoCodec(T.name),T.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.context.isSessionConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,b,()=>{var T;const I=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioFailed",I)},()=>{var T;const I=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioRecovered",I)})}applyHealthPolicy(b,T,I,O){b.update(T);const w=b.healthIfChanged();w!==null&&(this.logger.info(`${b.name} value is now ${w}`),w<=b.minimumHealth()?c.Maybe.of(I).map(D=>D.bind(this)()):c.Maybe.of(O).map(D=>D.bind(this)()))}handleBitrateFrame(b){this.currentAvailableStreamAvgBitrates=b,b.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${b.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",b.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(b){var T;if(b.type===f.default.WebSocketClosed&&this.isUnexpectedWebsocketCloseCode(b.closeCode)||b.type===f.default.WebSocketError||b.type===f.default.WebSocketFailed){if(b.type===f.default.WebSocketClosed&&this.context.logger.info(`The signaling connection was closed with code ${b.closeCode} and reason: ${b.closeReason}`),!this.hasSignalingError){const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("signalingDropped",I),this.hasSignalingError=!0}this.context.isSessionConnected&&this.context.audioVideoController.handleMeetingSessionStatus(new t.default(this.isInternalServerFailureCloseCode(b.closeCode)?n.default.SignalingInternalServerError:n.default.SignalingChannelClosedUnexpectedly),null)}else b.type===f.default.WebSocketOpen&&(this.hasSignalingError=!1);if(b.type===f.default.ReceivedSignalFrame){if(b.message.type===g.SdkSignalFrame.Type.NOTIFICATION){switch(b.message.notification.level){case g.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${b.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${b.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${b.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${b.message.notification.level}: ${b.message.notification.message}`);break}return}if(b.message.bitrates){const O=b.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(O),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(b.message.bitrates)}const I=t.default.fromSignalFrame(b.message);b.message.type!==g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&I.statusCode()!==n.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(I,null)}}isUnexpectedWebsocketCloseCode(b){return b===1006||this.isInternalServerFailureCloseCode(b)}isInternalServerFailureCloseCode(b){return b>=4500&&b<4600}degradeVideoCodec(b){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const T=[];for(const I of this.context.videoSendCodecPreferences)I.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||T.push(I);T.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${T[0].codecName} due to ${b}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=T,this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(I=>I.codecName).join(",")}`)}}constructor(b,T,I){super(b.logger),this.context=b,this.initialConnectionHealthData=I,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=O=>{const w=O<1,D=this.prevSignalStrength<1,R=w?D?null:S.default.RedmicStartLoss:D?S.default.RedmicEndLoss:null;R&&this.context.statsCollector.logAudioEvent(R),this.prevSignalStrength=O},this.realtimeFatalErrorCallback=O=>{this.logger.error(`realtime error: ${O}: ${O.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(n.default.RealtimeApiFailed),O)},this.realtimeAttendeeIdPresenceHandler=(O,w)=>{var D;const R=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${R}`),R===O&&w&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(D=this.context.eventController)===null||D===void 0||D.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:O,startTimeMs:w,iceGatheringDurationMs:D,attendeePresenceDurationMs:R,meetingStartDurationMs:L}=this.context;return{meetingDurationMs:w===null?0:Math.round(Date.now()-w),signalingOpenDurationMs:O,iceGatheringDurationMs:D,attendeePresenceDurationMs:R,meetingStartDurationMs:L}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const O=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},O),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(b.logger,Object.assign({},T),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},T),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new s.default(b.logger,Object.assign({},T),this.initialConnectionHealthData.clone());for(const O of T.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new O(Object.assign({},T),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=_},9228434098:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(h){}},"NoOpTask");l.default=d},7977267467:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4918602332)),p=u(d(7416186200));let m=r(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const s of this.dependencies)s.cancel();this.logger.info(`Canceling ${this.name()}`),p.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&p.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const s=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${s}`)}run(){if(this.promise)return this.promise;const s=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=s.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(s){this.task.setParent(s)}constructor(s,i,e){this.logger=s,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=m},9816353112:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6963141047)),m=h(d(201131498)),a=h(d(9651796943));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new p.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((n,o)=>{let f=r(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(c){switch(c.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),n();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(c){this.signalingClient=c}},"WebSocketOpenInterceptor");const g=new f(this.context.signalingClient);this.context.signalingClient.registerObserver(g),this.taskCanceler=g})}catch(n){throw n}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=s},5061413178:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9651796943));let m=r(class extends p.default{cancel(){for(const s of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${s.name()}`),s.cancel()}run(){return u(this,void 0,void 0,function*(){const s=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),s.push(e.run());const i=[];for(let e=0;e<s.length;e++){try{yield s[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(s,i,e){super(s),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=m},3517731918:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(e,t,n,o){function f(g){return g instanceof n?g:new n(function(S){S(g)})}return r(f,"adopt"),new(n||(n=Promise))(function(g,S){function c(E){try{_(o.next(E))}catch(b){S(b)}}r(c,"fulfilled");function v(E){try{_(o.throw(E))}catch(b){S(b)}}r(v,"rejected");function _(E){E.done?g(E.value):f(E.value).then(c,v)}r(_,"step"),_((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(4378636601),m=h(d(201131498)),a=d(7344258710),s=h(d(9651796943));let i=r(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,n)=>{let o=r(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===m.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(p.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,c,v){this.signalingClient=S,this.completionCallback=c,this.logger=v}},"Interceptor");const f=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=f,this.context.signalingClient.registerObserver(f)})}constructor(t,n,o){super(t.logger),this.context=t,this.credentials=n,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=i},5932071943:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9651796943));let m=r(class extends p.default{run(){var s,i;return u(this,void 0,void 0,function*(){if(!(!((i=(s=this.context.meetingSessionConfiguration)===null||s===void 0?void 0:s.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(s){super(s.logger),this.context=s,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=m},9360452255:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(201131498)),m=d(7344258710),a=h(d(9651796943));let s=r(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const n of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(n);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${n}`);continue}let f=this.context.videoTileController.getVideoTileForAttendeeId(o);f===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${n}. Creating new one.`),f=this.context.videoTileController.addVideoTile(),f.bindVideoStream(o,!1,null,0,0,0,null)),t.add(f.id())}this.serverPausedVideoTileIds.forEach(n=>{t.has(n)||this.serverPausedVideoTileIds.delete(n)})}handleSignalingClientEvent(e){if(e.type!==p.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,n=e.message.type;if(this.logger.info(`Received new ${n===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(f=>{const g=this.context.videoStreamIndex.attendeeIdForGroupId(f);if(g.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${f}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(g)});for(const f of o)f!==void 0&&(n===m.SdkSignalFrame.Type.PAUSE?f.state().paused||(this.serverPausedVideoTileIds.add(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBePausedByDownlinkPolicy(f.id())}),f.pause()):f.state().paused&&this.serverPausedVideoTileIds.has(f.id())&&(this.serverPausedVideoTileIds.delete(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBeUnpausedByDownlinkPolicy(f.id())}),f.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=s},4608327356:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5519271617)),m=d(7344258710),a=h(d(9651796943));let s=r(class extends a.default{checkAndApplyVideoConstraint(e,t,n,o,f){return u(this,void 0,void 0,function*(){const g=e?this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution;if(!e&&n<=g.videoWidth&&o<=g.videoHeight&&f<=g.videoFrameRate)return;const S={resizeMode:{ideal:"none"},width:{max:g.videoWidth},height:{max:g.videoHeight},frameRate:{ideal:f,max:g.videoFrameRate}};try{yield t.applyConstraints(S)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}})}run(){return u(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let n;try{n=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=n,n){const o=n.getVideoTracks();if(!o||o.length===0)return;const f=this.context.meetingSessionConfiguration.credentials.attendeeId,g=new p.default(f).hasModality(p.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(g,o[0],S.width,S.height,S.frameRate);const c=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(f,!0,n,S.width,S.height,null,c);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=s},4327951460:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(o,f,g,S){function c(v){return v instanceof g?v:new g(function(_){_(v)})}return r(c,"adopt"),new(g||(g=Promise))(function(v,_){function E(I){try{T(S.next(I))}catch(O){_(O)}}r(E,"fulfilled");function b(I){try{T(S.throw(I))}catch(O){_(O)}}r(b,"rejected");function T(I){I.done?v(I.value):c(I.value).then(E,b)}r(T,"step"),T((S=S.apply(o,f||[])).next())})},h=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1240186630)),m=h(d(5519271617)),a=h(d(6375844864)),s=h(d(201131498)),i=d(7344258710),e=d(8479756130),t=h(d(9651796943));let n=r(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(f){if(f.type!==s.default.ReceivedSignalFrame||f.message.type!==i.SdkSignalFrame.Type.INDEX)return;const g=f.message.index;this.context.logger.info(`received new index ${JSON.stringify(g)}`),this.handleIndexFrame(g)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(f){if(!f)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=f;return}else this.pendingIndex=null;const g=this.context.audioVideoController.configuration.credentials.attendeeId;f.sources=f.sources.filter(b=>{const T=new m.default(b.attendeeId);return!(T.base()===g&&T.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:c,videoUplinkBandwidthPolicy:v}=this.context,_=S.allVideoSendingSourcesExcludingSelf(g);S.integrateIndexFrame(f),c.updateIndex(S),v.updateIndex(S),this.resubscribe(c,v),this.updateVideoAvailability(f),this.handleIndexVideosPausedAtSource(),f.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(f);const E=S.allVideoSendingSourcesExcludingSelf(g);this.areVideoSourcesEqual(_,E)||this.context.audioVideoController.forEachObserver(b=>{e.Maybe.of(b.remoteVideoSourcesDidChange).map(T=>T.bind(b)(E))})}areVideoSourcesEqual(f,g){if(f.length!==g.length)return!1;const S=r((_,E)=>_.attendee.attendeeId.localeCompare(E.attendee.attendeeId),"compare"),c=[...f].sort(S),v=[...g].sort(S);for(let _=0;_<c.length;_++)if(c[_].attendee.attendeeId!==v[_].attendee.attendeeId)return!1;return!0}resubscribe(f,g){const S=f.wantsResubscribe(),c=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&g.wantsResubscribe(),v=S||c;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${c})`),!v)return;const _=f.chooseSubscriptions();this.context.videosToReceive=_.truncate(this.context.videoSubscriptionLimit),_.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=g.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${c} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(f){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const g=new p.default;g.remoteVideoAvailable=!this.context.videosToReceive.empty(),g.canStartLocalVideo=!f.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(g))&&(this.context.lastKnownVideoAvailability=g.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(c=>c.bind(S)(g.clone()))}))}handleSupportedVideoReceiveCodecIntersection(f){if(this.context.videoSendCodecPreferences===void 0)return;const g=[];let S=!1;for(const c of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>c.equals(v))){this.logger.info(`Skipping ${c.codecName} since the codec has been identfied as degraded`);continue}for(const v of f.supportedReceiveCodecIntersection)if(c.equals(a.default.fromSignaled(v))){g.push(c);break}}if(g.length>0){const c=g.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(_=>v.equals(_)));this.context.currentVideoSendCodec!==void 0&&(c===void 0||!this.context.currentVideoSendCodec.equals(c))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=g}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const f=this.context.videoStreamIndex.streamsPausedAtSource();for(const g of this.context.videoTileController.getAllVideoTiles()){const S=g.state();f.contain(S.streamId)?g.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):g.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(f){super(f.logger),this.context=f,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=n},3087881035:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9651796943));let p=r(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,s,i="RunnableTask"){super(a),this.fn=s,this.taskName=i}},"RunnableTask");l.default=p},9769959402:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(e,t,n,o){function f(g){return g instanceof n?g:new n(function(S){S(g)})}return r(f,"adopt"),new(n||(n=Promise))(function(g,S){function c(E){try{_(o.next(E))}catch(b){S(b)}}r(c,"fulfilled");function v(E){try{_(o.throw(E))}catch(b){S(b)}}r(v,"rejected");function _(E){E.done?g(E.value):f(E.value).then(c,v)}r(_,"step"),_((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(2771660234)),m=h(d(201131498)),a=d(7344258710),s=h(d(9651796943));let i=r(class Lh extends s.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const n of t.message.dataMessage.messages){const o=new p.default(n.ingestTimeNs/1e6,n.topic,n.data,n.senderAttendeeId,n.senderExternalUserId,n.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,n,o){if(!Lh.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(n.length>Lh.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(n,o,f)=>{if(this.context.signalingClient.ready()){let g;o instanceof Uint8Array?g=o:typeof o=="string"?g=new TextEncoder().encode(o):g=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(n,g,f);const S=a.SdkDataMessagePayload.create();S.topic=n,S.lifetimeMs=f,S.data=g;const c=a.SdkDataMessageFrame.create();c.messages=[S],this.context.signalingClient.sendDataMessage(c)}else this.context.logger.error("Cannot send data message because signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},1690462647:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9651796943)),m=h(d(3274536108));let a=r(class extends p.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return u(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const n of t)n.setParent(this)}},"SerialGroupTask");l.default=a},4784106923:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(570155317)),m=h(d(5603242550)),a=h(d(9651796943));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const e=this.context.peer;let n=this.context.sdpOfferInit.sdp;if(this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(n=new m.default(n).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(n=new m.default(n).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new p.default().requiresDisablingH264Encoding()&&(n=new m.default(n).removeH264SupportFromSendSection().sdp),n=new m.default(n).withStartingVideoSendBitrate(1e3).sdp,this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(n=new m.default(n).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(n=new m.default(n).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(n=new m.default(n).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const f=new m.default(n).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(f)}this.logger.debug(()=>`local description is >>>${n}<<<`);const o={type:"offer",sdp:n,toJSON:null};yield new Promise((f,g)=>u(this,void 0,void 0,function*(){this.cancelPromise=S=>{g(S)};try{yield e.setLocalDescription(o),f()}catch(S){g(S)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(e){super(e.logger),this.context=e,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=s},3516966482:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(e,t,n,o){function f(g){return g instanceof n?g:new n(function(S){S(g)})}return r(f,"adopt"),new(n||(n=Promise))(function(g,S){function c(E){try{_(o.next(E))}catch(b){S(b)}}r(c,"fulfilled");function v(E){try{_(o.throw(E))}catch(b){S(b)}}r(v,"rejected");function _(E){E.done?g(E.value):f(E.value).then(c,v)}r(_,"step"),_((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5519271617)),m=h(d(5603242550)),a=h(d(6375844864)),s=h(d(9651796943));let i=r(class extends s.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return u(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new m.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new m.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new m.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new m.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new m.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const f=this.context.activeVideoInput;if(f!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,c=new p.default(S).hasModality(p.default.MODALITY_CONTENT),v=f.getVideoTracks()[0];c&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const g={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(g)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((n,o)=>u(this,void 0,void 0,function*(){const f=r(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",f),n())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",f),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",f);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),f()}catch(g){o(g)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=i},7537455207:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(S,c,v,_){function E(b){return b instanceof v?b:new v(function(T){T(b)})}return r(E,"adopt"),new(v||(v=Promise))(function(b,T){function I(D){try{w(_.next(D))}catch(R){T(R)}}r(I,"fulfilled");function O(D){try{w(_.throw(D))}catch(R){T(R)}}r(O,"rejected");function w(D){D.done?b(D.value):E(D.value).then(I,O)}r(w,"step"),w((_=_.apply(S,c||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8363971156)),m=h(d(4474236581)),a=h(d(5603242550)),s=h(d(9530736010)),i=d(498975381),e=h(d(201131498)),t=h(d(718687226)),n=d(7344258710),o=d(4165080297),f=h(d(9651796943));let g=r(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){let c="";if(this.context.peer&&this.context.peer.localDescription&&(c=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let w=0,D=0;this.context.videoCaptureAndEncodeParameter&&(w=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),D=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const R={rid:"hi",maxBitrate:D*1e3,maxFramerate:w,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([R])}const v=this.fixUpSubscriptionOrder(c,this.context.videoSubscriptions),_=this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX;let E,b=c;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(b=new a.default(b).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const w=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";E=this.textCompressor.compress(b,w),this.context.logger.info(`Compressed the SDP message from ${b.length} to ${E.length} bytes.`),c=""}this.context.previousSdpOffer=new a.default(c);const T=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,c,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,_,this.context.videoStreamIndex.localStreamDescriptions(),!0,E);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(T.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(w=>w===0?0:this.context.videoStreamIndex.groupIdForStreamId(w)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(T)}`),this.context.signalingClient.subscribe(T);const I=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(I)}`);let O="";I.compressedSdpAnswer&&I.compressedSdpAnswer.length?(O=this.textCompressor.decompress(I.compressedSdpAnswer,this.context.previousSdpAnswerAsString),O.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${I.compressedSdpAnswer.length} to ${O.length} bytes.`),this.context.sdpAnswer=O):this.context.sdpAnswer=I.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(I)})}fixUpSubscriptionOrder(c,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const _=new Map;for(const T of v){const I=this.context.transceiverController.getMidForStreamId(T);if(I===void 0){T!==0&&this.logger.warn(`Could not find MID for stream ID: ${T}`);continue}_.set(I,T)}const E=new a.default(c).mediaSections(),b=[];for(const T of E)if(T.mediaType==="video")if(T.direction==="recvonly"){const I=_.get(T.mid);if(I===void 0){this.logger.warn(`Could not find stream ID for MID: ${T.mid}`);continue}b.push(I)}else b.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(b)} (may be same))}`),b}receiveSubscribeAck(){return new Promise((c,v)=>{const _=this.context;let E=r(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(I){if(I.isConnectionTerminated()){const w=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${I.closeCode} and reason: ${I.closeReason}`;_.logger.warn(w);let D=m.default.TaskFailed;I.closeCode>=4500&&I.closeCode<4600&&(D=m.default.SignalingInternalServerError),_.audioVideoController.handleMeetingSessionStatus(new p.default(D),new Error(w));return}if(I.type!==e.default.ReceivedSignalFrame||I.message.type!==n.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const O=I.message.suback;c(O)}constructor(I){this.signalingClient=I}},"Interceptor");const b=new E(this.context.signalingClient);this.context.signalingClient.registerObserver(b),this.taskCanceler=b})}constructor(c){super(c.logger),this.context=c,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new s.default(c.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=g},3274536108:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.IDLE="IDLE",u.RUNNING="RUNNING",u.CANCELED="CANCELED",u.FINISHED="FINISHED"})(d||(d={})),l.default=d},8265718271:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6376806429)),m=h(d(9651796943));let a=r(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return u(this,void 0,void 0,function*(){const i=new p.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},4133266271:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4474236581)),m=h(d(9651796943));let a=r(class extends m.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const n=r((o,f,g,S,c)=>{i===o&&f&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},1636523053:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(t,n,o,f){function g(S){return S instanceof o?S:new o(function(c){c(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,c){function v(b){try{E(f.next(b))}catch(T){c(T)}}r(v,"fulfilled");function _(b){try{E(f.throw(b))}catch(T){c(T)}}r(_,"rejected");function E(b){b.done?S(b.value):g(b.value).then(v,_)}r(E,"step"),E((f=f.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3416082494)),m=h(d(9193449927)),a=h(d(2944630562)),s=h(d(5110921698)),i=h(d(7416186200));let e=r(class{setEncodingParameters(n){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!n||n.size===0)return;const f=Array.from(n.values()),g=o.getParameters();if(!g.encodings||g.encodings.length===0)g.encodings=f;else for(const S of g.encodings)for(const c of f){if((S.rid||c.rid)&&S.rid!==c.rid)continue;let v;for(v in c)v==="rid"||v==="codecPayloadType"||c.hasOwnProperty(v)&&(S[v]=c[v])}yield o.setParameters(g)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(n){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||n<=0)return;const f=o.getParameters();f.encodings||(f.encodings=[{}]);for(const g of f.encodings)g.maxBitrate=n*1e3;yield o.setParameters(f)})}setPeer(n){this.peer=n}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(n){return this._localCameraTransceiver?n===this._localCameraTransceiver.sender.track||n===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var n,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(n=this.meetingSessionContext)===null||n===void 0?void 0:n.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(n){return u(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(n),!0)})}setAudioInput(n){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,n)})}setVideoInput(n){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,n)})}updateVideoTransceivers(n,o){if(!this.useTransceivers())return o.array();const f=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(f,n,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(n,o,f){const g=f.array();n.length!==0&&!n[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(n,o,g)):n.length!==0&&this.updateTransceiverWithStop(n,o,g);for(const S of g){const c=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,c),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),c),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${c.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(n,o,f){let g=1;this.videoSubscriptions=[0];for(const S of n){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let c=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[_,E]of f.entries())if(o.StreamIdsInSameGroup(v,E)){S.direction="recvonly",this.videoSubscriptions[g]=E,c=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(E,S),f.splice(_,1);break}}if(!c){this.videoSubscriptions[g]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[_,E]of this.streamIdToTransceiver.entries())S.mid===E.mid&&(this.streamIdToTransceiver.delete(_),this.groupIdToTransceiver.delete(o.groupIdForStreamId(_)))}g+=1}}updateTransceiverWithoutStop(n,o,f){let g=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[g]=0,S.direction!=="inactive"){const c=o.streamIdForTrack("v_"+S.mid);if(c!==void 0){for(const[v,_]of f.entries())if(o.StreamIdsInSameGroup(c,_)){S.direction="recvonly",this.videoSubscriptions[g]=_,this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(_,S),f.splice(v,1);break}}}g+=1}g=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&f.length>0){S.direction="recvonly";const c=f.shift();this.videoSubscriptions[g]=c,this.streamIdToTransceiver.set(c,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(c),S)}else if(this.videoSubscriptions[g]===0){S.direction="inactive";for(const[c,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(c),this.groupIdToTransceiver.delete(o.groupIdForStreamId(c)))}g+=1}}getMidForStreamId(n){var o;return(o=this.streamIdToTransceiver.get(n))===null||o===void 0?void 0:o.mid}setStreamIdForMid(n,o){for(const[f,g]of this.streamIdToTransceiver.entries())if(g.mid===n){this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(o,g);return}}getMidForGroupId(n){var o,f;return(f=(o=this.groupIdToTransceiver.get(n))===null||o===void 0?void 0:o.mid)!==null&&f!==void 0?f:void 0}transceiverIsVideo(n){return n.receiver&&n.receiver.track&&n.receiver.track.kind==="video"||n.sender&&n.sender.track&&n.sender.track.kind==="video"}debugDumpTransceivers(){let n="",o=0;for(const f of this.peer.getTransceivers())this.transceiverIsVideo(f)&&(n+=`transceiver index=${o} mid=${f.mid} subscription=${this.videoSubscriptions[o]} direction=${f.direction}
`,o+=1);return n}setTransceiverInput(n,o){return u(this,void 0,void 0,function*(){n&&(o?n.direction="sendrecv":n.direction="inactive",yield n.sender.replaceTrack(o))})}forEachRedMetricsObserver(n){for(const o of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(n)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new p.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var n,o;const f=!!window.RTCRtpScriptTransform,g=!!RTCRtpSender.prototype.createEncodedStreams;if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(g)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([s.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const c=new m.default;c.currentTimestampMs=Date.now(),c.ssrc=S.data.ssrc,c.totalAudioPacketsLost=S.data.totalAudioPacketsLost,c.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,c.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,c.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(c)}},f)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(g){const S=this._localAudioTransceiver.sender.createEncodedStreams(),c=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:c},[S.readable,S.writable,c.readable,c.writable])}(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(n,o){var f;const g=this.peer.addTransceiver(n,o);if(!(!((f=this.peer.getConfiguration())===null||f===void 0)&&f.encodedInsertableStreams)||!this.audioRedWorker)return g;const S=!!window.RTCRtpScriptTransform,c=!!RTCRtpSender.prototype.createEncodedStreams;if(S)g.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),g.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(c){const v=g.sender.createEncodedStreams(),_=g.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:_},[v.readable,v.writable,_.readable,_.writable])}return g}destroyAudioRedWorkerAndStates(){var n,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker.terminate(),this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(n){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:n.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:n.get("opus")}))}metricsDidReceive(n){const{currentTimestampMs:o}=n,f=n.getRTCStatsReport();let g=0,S=0,c=0;f.forEach(I=>{I.kind==="audio"&&(I.type==="outbound-rtp"?S=I.packetsSent:I.type==="remote-inbound-rtp"&&(g=I.timestamp,c=I.packetsLost))}),(this.audioMetricsHistory.length===0||g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:g,totalPacketsSent:S,totalPacketsLost:c}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),_=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),E=Math.max(v,_),[b,T]=a.default.getNumRedundantEncodingsForPacketLoss(E);if(T){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const I=o-this.lastAudioRedTurnOffTimestampMs,O=o-this.lastHighPacketLossEventTimestampMs;if(I>=this.audioRedPacketLossLongEvalPeriodMs&&O<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,b)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:b})}maybeResetHoldDownTimer(n){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=n)}lossPercent(n){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,g=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=n){const c=g-this.audioMetricsHistory[S].totalPacketsLost,v=f-this.audioMetricsHistory[S].totalPacketsSent,_=100*(c/v);return Math.max(0,Math.min(_,100))}return 0}shouldUpdateAudioRedWorkerEncodings(n,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(n),!1):o<this.currentNumRedundantEncodings&&n-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(n),!0)}addRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.add(n)}removeRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.delete(n)}constructor(n,o,f){this.logger=n,this.browserBehavior=o,this.meetingSessionContext=f,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},618497857:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8588089957));let m=r(class yu extends p.default{setEncodingParameters(s){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===p.default.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===p.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(s,i,e){super(s,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let n=0;n<yu.NAME_ARR_ASCENDING.length;n++){const o=yu.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:yu.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},8588089957:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1636523053));let m=r(class ya extends p.default{setEncodingParameters(s){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(const n of t.encodings)n.rid===ya.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(ya.LOW_LEVEL_NAME),n),n.rid===ya.MID_LEVEL_NAME&&this.copyEncodingParams(s.get(ya.MID_LEVEL_NAME),n),n.rid===ya.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(ya.HIGH_LEVEL_NAME),n);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(s){return u(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var s,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(s=this.meetingSessionContext)===null||s===void 0?void 0:s.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(s,i){i.active=s.active,i.maxBitrate=s.maxBitrate,i.scaleResolutionDownBy=s.scaleResolutionDownBy,i.maxFramerate=s.maxFramerate}constructor(s,i,e){super(s,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let n=0;n<ya.NAME_ARR_ASCENDING.length;n++){const o=ya.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:ya.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},8838701689:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(1636523053));let p=r(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,s,i){super(a,s,i)}},"VideoOnlyTransceiverController");l.default=p},9292265093:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const u=d(4020273180);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=r(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const s of u.TranscriptEventConverter.from(a))for(const i of this.transcriptEventCallbacks)i(s)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},4943490552:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Transcript");l.default=d},3089406687:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptAlternative");l.default=d},6199310771:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptEntity");l.default=d},4020273180:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=d(7344258710),p=u(d(4943490552)),m=u(d(9072755684)),a=u(d(8890069556)),s=u(d(5487209475)),i={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=r(class{static from(n){let o;try{o=h.SdkTranscriptFrame.decode(n.data)}catch(g){throw new Error("Cannot decode transcript data message: "+g)}const f=[];for(const g of o.events)if(g.status){const S=i[g.status.type];if(!S)continue;const c=new m.default;c.type=S,c.eventTimeMs=g.status.eventTime,c.transcriptionRegion=g.status.transcriptionRegion,c.transcriptionConfiguration=g.status.transcriptionConfiguration,g.status.message&&(c.message=g.status.message),f.push(c)}else if(g.transcript){const S=new p.default;S.results=[];for(const c of g.transcript.results){const v={channelId:c.channelId,isPartial:c.isPartial,resultId:c.resultId,startTimeMs:c.startTime,endTimeMs:c.endTime,alternatives:[]};if(c.languageCode&&(v.languageCode=c.languageCode),c.languageIdentification&&c.languageIdentification.length>0){v.languageIdentification=[];for(const _ of c.languageIdentification){const E={languageCode:_.languageCode,score:_.score};v.languageIdentification.push(E)}}for(const _ of c.alternatives){const E={items:[],transcript:_.transcript};for(const b of _.items){const T={content:b.content,attendee:{attendeeId:b.speakerAttendeeId,externalUserId:b.speakerExternalUserId},startTimeMs:b.startTime,endTimeMs:b.endTime,type:null};switch(b.vocabularyFilterMatch&&(T.vocabularyFilterMatch=b.vocabularyFilterMatch),b.hasOwnProperty("stable")&&(T.stable=b.stable),b.hasOwnProperty("confidence")&&(T.confidence=b.confidence),b.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:T.type=s.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:T.type=s.default.PUNCTUATION;break}E.items.push(T)}for(const b of _.entities){E.entities||(E.entities=[]);const T={category:b.category,confidence:b.confidence,content:b.content,startTimeMs:b.startTime,endTimeMs:b.endTime};b.type&&(T.type=b.type),E.entities.push(T)}v.alternatives.push(E)}S.results.push(v)}f.push(S)}return f}},"TranscriptEventConverter");l.TranscriptEventConverter=e},7682636203:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptItem");l.default=d},5487209475:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.PRONUNCIATION="pronunciation",u.PUNCTUATION="punctuation"})(d||(d={})),l.default=d},3554880400:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptLanguageWithScore");l.default=d},5311871957:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptResult");l.default=d},9072755684:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptionStatus");l.default=d},8890069556:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.STARTED="started",u.INTERRUPTED="interrupted",u.RESUMED="resumed",u.STOPPED="stopped",u.FAILED="failed"})(d||(d={})),l.default=d},5318074243:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5037727051),p=u(d(1877666836));let m=r(class Il{getParserResult(){var s,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((s=this.parserResult)===null||s===void 0?void 0:s.os.name)||Il.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||Il.UNAVAILABLE,sdkVersion:p.default.sdkVersion,sdkName:p.default.sdkName}}constructor(s){var i,e,t,n,o,f,g;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(S){s.error(S.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Il.UNAVAILABLE,this.browserName=((n=this.parserResult)===null||n===void 0?void 0:n.browser.name)||Il.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||Il.UNAVAILABLE,this.deviceName=[((f=this.parserResult)===null||f===void 0?void 0:f.device.vendor)||"",((g=this.parserResult)===null||g===void 0?void 0:g.device.model)||""].join(" ").trim()||Il.UNAVAILABLE}},"DefaultUserAgentParser");l.default=m,m.UNAVAILABLE="Unavailable"},7763852557:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{add(h){return new Promise((p,m)=>{this.queue=this.queue.then(h).then(p).catch(m)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=d},8479756130:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let d=r(class{static of(m){return m==null?h.of():u.of(m)}},"Maybe");l.Maybe=d;let u=r(class fS{map(m){return d.of(m(this.value))}flatMap(m){return m(this.value)}get(){return this.value}getOrElse(m){return this.value}defaulting(m){return d.of(this.getOrElse(m))}static of(m){if(m==null)throw new Error("value is ${value}");return new fS(m)}constructor(m){this.value=m,this.isSome=!0,this.isNone=!1}},"Some");l.Some=u;let h=r(class _u{get(){throw new Error("value is null")}getOrElse(m){return m}map(m){return new _u}flatMap(m){return new _u}defaulting(m){return d.of(this.getOrElse(m))}static of(){return new _u}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=h},759573094:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0}),l.iterateEvery=l.SuppressedError=l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=u(d(1877666836));function p(o){return new Promise(f=>setTimeout(f,o))}r(p,"wait"),l.wait=p;function m(){var o;try{return((o=window.frameElement)===null||o===void 0?void 0:o.nodeName)==="IFRAME"||parent!==top}catch{return!0}}r(m,"isIFramed"),l.isIFramed=m;function a(o){return o===null?null:typeof o!="object"?o:Array.isArray(o)?o.map(a):Object.keys(o).reduce((f,g)=>{const S=o[g],c=typeof S=="object"?a(S):S;return f[g.toLowerCase()]=c,f},{})}r(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function s(){const o=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${o.major}.${o.minor}`}}r(s,"getDefaultAssetSpec"),l.getDefaultAssetSpec=s;function i(o){const f=Math.abs(o),g=o<=0?"+":"-",S=Math.floor(f/60).toString().padStart(2,"0"),c=Math.floor(f%60).toString().padStart(2,"0");return`${g}${S}:${c}`}r(i,"getFormattedOffset"),l.getFormattedOffset=i;function e(o){try{window.crypto.getRandomValues(o)}catch{new DataView(o.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}r(e,"getRandomValues"),l.getRandomValues=e;let t=r(class extends Error{constructor(f,g,S){var c;super(S??`${(c=f==null?void 0:f.message)!==null&&c!==void 0?c:f}`),this.error=f,this.suppressed=g}},"SuppressedError");l.SuppressedError=t;function n(o,f){if(!o)return;let g;for(const S of o)try{f(S)}catch(c){g=new t(c,g)}if(g)throw g}r(n,"iterateEvery"),l.iterateEvery=n},1877666836:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(570155317)),p=u(d(3038312064));let m=r(class uc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return p.default.semverString}static get sdkVersionSemVer(){var s,i,e,t;const n=p.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(s=n==null?void 0:n.groups)===null||s===void 0?void 0:s.major,minor:(i=n==null?void 0:n.groups)===null||i===void 0?void 0:i.minor,patch:(e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return p.default.hash.substring(1)}static get sdkUserAgentLowResolution(){const s=new h.default;return`${s.name()}-${s.majorVersion()}`}static urlWithVersion(s){const i=new URL(s);return i.searchParams.append(uc.X_AMZN_VERSION,uc.sdkVersion),i.searchParams.append(uc.X_AMZN_USER_AGENT,uc.sdkUserAgentLowResolution),i.toString()}},"Versioning");l.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},3038312064:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"55eb4ca",raw:"v3.27.0",semverString:"3.27.0"}},1203283221:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class hS{equal(h){let p=h.captureWidth()===this.cameraWidth&&h.captureHeight()===this.cameraHeight&&h.captureFrameRate()===this.cameraFrameRate&&h.encodeBitrates().length===this.encodeBitrates().length&&h.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&h.encodeWidths().length===this.encodeWidths().length&&h.encodeHeights().length===this.encodeHeights().length&&h.isSVCEncoding()===this.isSVC;if(p){for(let m=0;m<h.encodeWidths().length;m++)if(h.encodeWidths()[m]!==this.encodeWidths()[m]||h.encodeHeights()[m]!==this.encodeHeights()[m]||h.encodeBitrates()[m]!==this.encodeBitrates()[m]||h.encodeScaleResolutionDownBy()[m]!==this.encodeScaleResolutionDownBy()[m])return p=!1,p}return p}clone(){return new hS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(h,p,m,a,s,i=1,e=!1){this.cameraWidth=h,this.cameraHeight=p,this.cameraFrameRate=m,this.maxEncodeBitrateKbps=a,this.isSimulcast=s,this.scaleResolutionDownBy=i,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=d},7176913269:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(5814977413));let p=r(class pS{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const s=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return s;const i=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),n=new Map;for(const f of t)i.contain(f.streamId)&&n.set(f.attendeeId,f);let o=0;for(const f of e){const g=f.attendee.attendeeId;if(n.has(g)){const S=n.get(g);if(o+S.maxBitrateKbps<=pS.maxReceiveBitrateKbps)s.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return s}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=p,p.maxReceiveBitrateKbps=15e3},256606391:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(5814977413));let p=r(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=p},7477937414:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var d;(function(u){u[u.Low=0]="Low",u[u.Medium=1]="Medium",u[u.High=2]="High",u[u.Maximum=3]="Maximum"})(d=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=d},7676538085:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9946496941)),p=u(d(498975381)),m=u(d(4924969612)),a=d(4165080297),s=u(d(6836981326)),i=u(d(7255041548));let e=r(class mS extends s.default{static createConfig(){const n=new i.default;return n.serverSideNetworkAdaption=p.default.None,n}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(n){super.updateIndex(n);const o=a.VideoPreferences.prepare();let f=!1;const g=n.remoteStreamDescriptions();for(const S of g)o.some(c=>c.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(h.default.Modality)?(o.add(new m.default(S.attendeeId,1)),f=!0):o.add(new m.default(S.attendeeId,2)));f?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(n){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(n){super(n,mS.createConfig()),this.logger=n,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},4924969612:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(7477937414)),p=u(d(9648677690));let m=r(class Dd{partialCompare(s){return this.priority-s.priority}equals(s){return this.attendeeId===s.attendeeId&&this.targetSize===s.targetSize&&this.priority===s.priority&&this.degradationPreference===s.degradationPreference}clone(){return new Dd(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(s){switch(s){case h.default.Maximum:return Dd.MAXIMUM_BITRATE_KBPS;case h.default.High:return Dd.HIGH_BITRATE_KBPS;case h.default.Medium:return Dd.MID_BITRATE_KBPS;case h.default.Low:return Dd.LOW_BITRATE_KBPS}}constructor(s,i,e,t){this.attendeeId=s,this.priority=i,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:p.default.Balanced}},"VideoPreference");l.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},4165080297:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=u(d(3566593278));function p(e,t,n){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||n===void 0)return[];const o=new Array,f=new Map,g=new Map;for(const S of t){const c=e.transceiverController.getMidForGroupId(S);if(c===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);f.set(v,c),g.set(v,S)}for(const S of n){const c=new h.default,v=f.get(S.attendeeId);v!==void 0&&(c.mid=v,c.attendeeId=S.attendeeId,c.groupId=g.get(S.attendeeId),c.priority=Number.MAX_SAFE_INTEGER-S.priority,c.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),c.qualityAdaptationPreference=S.degradationPreference,o.push(c))}return o}r(p,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=p;let m=r(class Nh{static default(){return new Nh([])}[Symbol.iterator](){let t=0;const n=this.items;return{next(){return t<n.length?{done:!1,value:n[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,n){const o=this.items.findIndex(n);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(n=>!n.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const n of this.items)if(!t.items.some(o=>o.equals(n)))return!1;return!0}has(t){return this.items.some(n=>n.equals(t))}some(t){return this.items.some(t)}clone(){return new Nh([...this.items])}sort(){this.items.sort((t,n)=>t.partialCompare(n))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=r(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,n){this.items.has(t)&&!this.items.some(n)||(this.cow(),this.items.replaceFirst(t,n))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),s=r(class{add(t){this.builder.add(t)}replaceFirst(t,n){this.builder.replaceFirst(t,n)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=s;let i=r(class Fh{static prepare(){return new s(new a)}static default(){return new Fh(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new s(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Fh.prepare();for(const n of this.items)t.add(n.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=i,l.default=i},6836981326:function(B,l,d){"use strict";var u=this&&this.__createBinding||(Object.create?function(I,O,w,D){D===void 0&&(D=w),Object.defineProperty(I,D,{enumerable:!0,get:function(){return O[w]}})}:function(I,O,w,D){D===void 0&&(D=w),I[D]=O[w]}),h=this&&this.__setModuleDefault||(Object.create?function(I,O){Object.defineProperty(I,"default",{enumerable:!0,value:O})}:function(I,O){I.default=O}),p=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var O={};if(I!=null)for(var w in I)w!=="default"&&Object.prototype.hasOwnProperty.call(I,w)&&u(O,I,w);return h(O,I),O},m=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(d(2911000564)),s=m(d(9228821375)),i=m(d(8620705262)),e=m(d(9946496941)),t=d(4918602332),n=p(d(498975381)),o=m(d(1771494510)),f=m(d(5814977413)),g=m(d(7176913269)),S=m(d(7477937414)),c=m(d(4924969612)),v=d(4165080297),_=m(d(7255041548)),E=m(d(9648677690));let b=r(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),T=r(class $o{reset(){this.allHighestPolicy=new g.default(""),this.optimalReceiveSet=new f.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new f.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new f.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=$o.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=$o.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new b,this.prevDownlinkStats=new b,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(O){this.tileController=O,this.logger.info("tileController bound")}setWantsResubscribeObserver(O){this.wantsResubscribeObserver=O}chooseRemoteVideoSources(O){var w;if(!(!((w=this.videoPreferences)===null||w===void 0)&&w.equals(O))){if(this.videoPreferences=O==null?void 0:O.clone(),!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const D=new Array;for(const R of this.videoPreferences){const L=new o.default;L.attendee=new a.default,L.attendee.attendeeId=R.attendeeId,D.push(L)}this.allHighestPolicy.chooseRemoteVideoSources(D);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(O)}`)}}updateIndex(O){this.videoIndex=O,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(O),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const O=new Set;for(const L of this.videoIndex.remoteStreamDescriptions())O.add(L.attendeeId);const w=v.VideoPreferences.prepare(),D=O.size;let R=S.default.Maximum;D>8?R=S.default.Low:D>4&&(R=S.default.Medium);for(const L of O)w.add(new c.default(L,1,R));this.defaultVideoPreferences=w.build()}updateMetrics(O){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new b;const w=O.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=w.availableIncomingBitrate/1e3;for(const D in O.streamMetricReports){const R=Number.parseInt(D,10),L=O.streamMetricReports[R];L.direction===s.default.DOWNSTREAM&&L.mediaType===i.default.VIDEO&&(L.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=O.countPerSecond("nackCount",R)),L.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=O.countPerSecond("packetsLost",R)),L.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=O.bitsPerSecond("bytesReceived",R)/1e3))}}wantsResubscribe(){let O=!1;return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(O||(O=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?O||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),O||(O=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),O)}chooseSubscriptions(){return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(O){this.observerQueue.add(O)}removeObserver(O){this.observerQueue.delete(O)}forEachObserver(O){for(const w of this.observerQueue)O(w)}setVideoPriorityBasedPolicyConfigs(O){this.videoPriorityBasedPolicyConfig=O}calculateOptimalReceiveStreams(){var O;const w=[],D=this.videoIndex.remoteStreamDescriptions();if(D.length===0||!((O=this.videoPreferences)===null||O===void 0)&&O.isEmpty()){this.optimalReceiveStreams=[];return}const R=this.rateProbeState;this.cleanBwPausedTiles(D),this.handleAppPausedStreams(w,D);const L=new Map;for(const Je of this.getCurrentVideoPreferences())L.set(Je.attendeeId,Je);const H=D.filter(Je=>L.has(Je.attendeeId)),K=!this.streamsWithPreferenceDidChange(H),ee=!this.startupPeriod&&K;if(ee&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;H.sort((Je,dt)=>Je.maxBitrateKbps===dt.maxBitrateKbps?Je.streamId-dt.streamId:Je.maxBitrateKbps-dt.maxBitrateKbps);for(const Je of H)(Je.avgBitrateKbps===0||Je.avgBitrateKbps>Je.maxBitrateKbps)&&(Je.attendeeId.endsWith(e.default.Modality)&&Je.maxBitrateKbps<100?Je.maxBitrateKbps=Je.avgBitrateKbps:Je.avgBitrateKbps=Je.maxBitrateKbps);const q=new Set;for(const Je of this.getCurrentVideoPreferences()){const dt=H.filter(He=>He.attendeeId===Je.attendeeId);if(dt.length<3)continue;let Ot=15,Nt=320*480;dt.forEach(He=>{Ot=Math.max(Ot,He.maxFrameRate),Nt=Math.max(Nt,He.totalPixels())}),dt.sort((He,ct)=>{if(Je.degradationPreference===E.default.MaintainResolution)return Math.abs(He.maxFrameRate-ct.maxFrameRate)<2?He.totalPixels()-ct.totalPixels():He.maxFrameRate-ct.maxFrameRate;if(Je.degradationPreference===E.default.MaintainFramerate)return He.totalPixels()===ct.totalPixels()?He.maxFrameRate-ct.maxFrameRate:He.totalPixels()-ct.totalPixels();{const nn=r(Xt=>Xt.avgBitrateKbps*Math.pow(2,5*Xt.maxFrameRate/Ot*Math.pow(4,Xt.totalPixels()/Nt)),"weighByFramerate");return nn(He)-nn(ct)}});let Ve;for(const He of dt){if(Ve!==void 0&&(He.maxFrameRate<Ve.maxFrameRate&&Math.abs(Ve.maxFrameRate-He.maxFrameRate)>2||He.totalPixels()<Ve.totalPixels())){q.add(He.streamId);continue}Ve=He}}const ae=H.filter(Je=>!q.has(Je.streamId));this.logger.info(`Filtered to ${JSON.stringify(ae)}`);const ce={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ce.targetDownlinkBitrate=this.determineTargetRate();const Te=this.subscribedReceiveSet.size(),ke=this.downlinkStats.bandwidthEstimateKbps,tt=!this.videoPriorityBasedPolicyConfig.allowSubscribe(Te,ke);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=$o.MIN_TIME_BETWEEN_SUBSCRIBE_MS,ee&&tt))return;const At=this.priorityPolicy(ce,ae,w),Be=!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let $e=0;if(!Be&&!this.startupPeriod&&K?this.rateProbeState==="Probing"?$e=this.handleProbe(w,ce.targetDownlinkBitrate):ce.deltaToNextUpgrade!==0&&($e=this.maybeOverrideOrProbe(w,ce,At)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=H,this.videoPreferencesUpdated=!1,$e===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ce.targetDownlinkBitrate;return}if($e===2){const Je=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(H,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Je);return}this.optimalNonPausedReceiveStreams=w.slice();const Ze=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(H,w),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==R||this.optimalReceiveStreams.length!==w.length||Ze!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(D,ce.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ce.targetDownlinkBitrate,this.optimalReceiveStreams=w.slice()}calculateOptimalReceiveSet(){const O=new f.default;this.calculateOptimalReceiveStreams();for(const w of this.optimalReceiveStreams)O.add(w.streamId);if(!this.optimalReceiveSet.equal(O)){const w=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(O)} subscribedRate:${w}`)}this.optimalReceiveSet=O}determineTargetRate(){let O=0;const w=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=w),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>$o.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||w-this.firstEstimateTimestamp>$o.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?O=$o.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<$o.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),O=this.downlinkStats.usedBandwidthKbps+$o.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):O=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?O=$o.DEFAULT_BANDWIDTH_KBPS:O=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-$o.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*$o.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,O=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,O>15e3&&this.logger.warn("bwe: "+O+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(O,15e3)}setProbeState(O){if(this.rateProbeState===O)return!1;const w=Date.now();switch(O){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||w-this.lastProbeTimestamp>$o.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=w;else return!1;break;case"Probing":if(w-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=w,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,$o.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+O+" from "+this.rateProbeState),this.rateProbeState=O,!0}upgradeToStream(O,w){for(let D=0;D<O.length;D++)if(O[D].groupId===w.groupId){const R=w.avgBitrateKbps-O[D].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(O[D])+" to "+w),this.lastUpgradeRateKbps=R,O[D]=w,R}return O.push(w),this.lastUpgradeRateKbps=w.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(O,w){if(Date.now()-this.lastProbeTimestamp>$o.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>$o.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max($o.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const D=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(O)||w>D?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=$o.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(O,w,D){const R=this.chosenStreamsSameAsLast(O);let L=0;const H=w.targetDownlinkBitrate>$o.LOW_BITRATE_THRESHOLD_KBPS?$o.TARGET_RATE_CHANGE_TRIGGER_PERCENT:$o.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,K=w.targetDownlinkBitrate*H/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!R&&Math.abs(w.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<K?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),L=1):this.targetRateBaselineForDeltaCheckKbps=w.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,L;if(R||L===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(O,D),L=0);break}else this.setProbeState("Not Probing");return L}calculateSubscribeRate(O){let w=0;for(const D of O)!this.pausedStreamIds.contain(D.streamId)&&!this.pausedBwAttendeeIds.has(D.attendeeId)&&(w+=D.maxBitrateKbps);return w}handleAppPausedStreams(O,w){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new f.default;const D=this.tileController.getAllRemoteVideoTiles();for(const R of D){const L=R.state();if(L.paused&&!this.pausedBwAttendeeIds.has(L.boundAttendeeId)){let H=w.length;for(;H--;)w[H].attendeeId===L.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+L.boundAttendeeId+" streamId: "+w[H].streamId),this.pausedStreamIds.add(w[H].streamId),this.subscribedReceiveSet.contain(w[H].streamId)&&O.push(w[H]),w.splice(H,1))}}}processBwPausedStreams(O,w){if(!this.tileController){this.logger.warn("tileController not found!");return}const D=this.getCurrentVideoPreferences();if(D&&this.shouldPauseTiles){const R=this.tileController.getAllVideoTiles();for(const L of D){const H=this.getVideoTileForAttendeeId(L.attendeeId,R),K=(H==null?void 0:H.state().paused)||!1;if(w.some(ee=>ee.attendeeId===L.attendeeId))K&&this.pausedBwAttendeeIds.has(L.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${L.attendeeId} due to bandwidth`),this.forEachObserver(ee=>{ee.tileWillBeUnpausedByDownlinkPolicy(H.id())}),this.tileController.unpauseVideoTile(H.id()),this.pausedBwAttendeeIds.delete(L.attendeeId));else{const ee=O.some(q=>q.attendeeId===L.attendeeId);if(H&&ee){const q=this.optimalReceiveStreams.find(ae=>ae.attendeeId===L.attendeeId);q!==void 0&&(K||(this.logger.info(`bwe: pausing streamId ${q.streamId} attendee ${L.attendeeId} due to bandwidth`),this.forEachObserver(ae=>{ae.tileWillBePausedByDownlinkPolicy(H.id())}),this.tileController.pauseVideoTile(H.id())),w.push(q)),this.pausedBwAttendeeIds.add(L.attendeeId)}else if(ee){const q=this.tileController.addVideoTile();q.bindVideoStream(L.attendeeId,!1,null,0,0,0,null),this.forEachObserver(ae=>{ae.tileWillBePausedByDownlinkPolicy(q.id())}),q.pause(),this.logger.info(`bwe: Created video tile ${q.id()} for bw paused attendee ${L.attendeeId}`),this.pausedBwAttendeeIds.add(L.attendeeId)}}}}}cleanBwPausedTiles(O){if(!this.tileController){this.logger.warn("tileController not found!");return}const w=this.tileController.getAllRemoteVideoTiles(),D=this.getCurrentVideoPreferences();for(const R of w){const L=R.state();L.boundVideoStream||(O.some(H=>H.attendeeId===L.boundAttendeeId)?D!==void 0&&!D.some(H=>H.attendeeId===L.boundAttendeeId)&&this.tileController.removeVideoTile(L.tileId):(this.tileController.removeVideoTile(L.tileId),this.logger.info(`bwe: Removed video tile ${L.tileId} for bw paused attendee ${L.boundAttendeeId}`)))}}priorityPolicy(O,w,D){let R;const L=this.getCurrentVideoPreferences(),H=L.highestPriority();let K,ee=H;for(;ee!==-1;){K=-1;for(const q of L)if(q.priority===ee)for(const ae of w)ae.attendeeId===q.attendeeId&&(D.some(ce=>ce.groupId===ae.groupId)||(O.chosenTotalBitrate+ae.avgBitrateKbps<=O.targetDownlinkBitrate?(D.push(ae),O.chosenTotalBitrate+=ae.avgBitrateKbps):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=ae.avgBitrateKbps,R=ae)));else if(q.priority>ee){K=q.priority;break}for(const q of L)if(q.priority===ee){for(const ae of w)if(ae.attendeeId===q.attendeeId){const ce=D.findIndex(Te=>Te.groupId===ae.groupId&&Te.maxBitrateKbps<=ae.maxBitrateKbps&&Te.avgBitrateKbps<ae.avgBitrateKbps);if(ce!==-1){const Te=ae.avgBitrateKbps-D[ce].avgBitrateKbps;this.hasSimulcastStreams(w,ae.attendeeId,ae.groupId)&&this.canUpgrade(ae.avgBitrateKbps,q.targetSize,q.targetSizeToBitrateKbps(q.targetSize),ae.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${ae.attendeeId} group: ${ae.groupId} has simulcast and can upgrade avgBitrate: ${ae.avgBitrateKbps} target: ${q.targetSizeToBitrateKbps(q.targetSize)} targetTotalBitrate: ${O.targetDownlinkBitrate}`),O.chosenTotalBitrate+Te<=O.targetDownlinkBitrate?(O.chosenTotalBitrate+=Te,D[ce]=ae):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=Te,R=ae)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(q.priority>ee)break;if(ee===H&&O.deltaToNextUpgrade!==0)break;ee=K}return R}getVideoTileForAttendeeId(O,w){for(const D of w)if(D.state().boundAttendeeId===O)return D;return null}canUpgrade(O,w,D,R){let L=!1;return(w===S.default.High||!R&&O<=D||R&&w===S.default.Medium&&O<=D)&&(L=!0),L?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${O} targetBitrateKbps: ${D}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${O} targetBitrateKbps: ${D}`),!1)}hasSimulcastStreams(O,w,D){let R=0;for(const L of O)L.attendeeId===w&&L.groupId===D&&R++;return this.logger.info(`bwe: attendeeId: ${w} groupId: ${D} hasSimulcastStreams: streamCount: ${R}`),R>1}streamsWithPreferenceDidChange(O){if(this.previousStreamsWithPreference===void 0||O.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const w of O)if(this.previousStreamsWithPreference.find(R=>R.groupId===w.groupId&&R.streamId===w.streamId&&R.maxBitrateKbps===w.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(O){if(this.optimalNonPausedReceiveStreams.length!==O.length)return!1;for(const w of this.optimalNonPausedReceiveStreams)if(!O.some(D=>D.streamId===w.streamId))return!1;return!0}policyStateLogStr(O,w){const D=this.calculateSubscribeRate(this.optimalReceiveStreams),R={targetBitrate:w,subscribedRate:D,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let L="remoteInfos: [";for(const K of O)L+=`{grpId:${K.groupId} strId:${K.streamId} maxBr:${K.maxBitrateKbps} avgBr:${K.avgBitrateKbps}}, `;L+="]";let H=`bwe: optimalReceiveSet ${JSON.stringify(R)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${L}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(H+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?H+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:H+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,H}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(O){this.serverSideNetworkAdaption=O,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[n.default.None,n.default.BandwidthProbing,n.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let O=this.getCurrentVideoPreferences();return O||(O=v.VideoPreferences.prepare().build()),O}wantsAllTemporalLayersInIndex(){return!0}constructor(O,w=_.default.Default){this.logger=O,this.videoPriorityBasedPolicyConfig=w,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===n.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=n.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=T,T.DEFAULT_BANDWIDTH_KBPS=2800,T.STARTUP_PERIOD_MS=6e3,T.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,T.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,T.LOW_BITRATE_THRESHOLD_KBPS=300,T.MIN_TIME_BETWEEN_PROBE_MS=5e3,T.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,T.MAX_HOLD_BEFORE_PROBE_MS=3e4,T.MAX_ALLOWED_PROBE_TIME_MS=6e4,T.SPURIOUS_PACKET_LOST_THRESHOLD=2,T.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},7255041548:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(498975381));let p=r(class fc{allowSubscribe(a,s){let i=0;const e=this.currentNetworkEvent;if(s>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=s,!0;if(s<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=s,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,s){let i=fc.MINIMUM_DELAY_MS;const e=fc.MAXIMUM_DELAY_MS-fc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:i+=e*t*(1+s/10),i=Math.min(fc.MAXIMUM_DELAY_MS,i);break}return i}constructor(a=0,s=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=s,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.BandwidthProbingAndRemoteVideoQualityAdaption,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,s<0?s=0:s>1&&(s=1),this.networkIssueRecoveryDelayFactor=s}},"VideoPriorityBasedPolicyConfig");l.default=p,p.MINIMUM_DELAY_MS=2e3,p.MAXIMUM_DELAY_MS=8e3,p.Default=new p(0,0),p.UnstableNetworkPreset=new p(0,1),p.StableNetworkPreset=new p(1,0)},9648677690:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var d;(function(u){u[u.Balanced=0]="Balanced",u[u.MaintainFramerate=1]="MaintainFramerate",u[u.MaintainResolution=2]="MaintainResolution"})(d=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=d},3455625450:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{create(){const h={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{h.paused=!0},play:()=>(h.paused=!1,Promise.resolve())};return h}},"NoOpVideoElementFactory");l.default=d},6011658084:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return d(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(p){this.canvas=p,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=u},5153707095:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6011658084)),m=h(d(4586125494)),a=15;let s=r(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return u(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return u(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.framerate=t.frameRate,this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const n=new p.default(this.canvasInput);this.sourceBuffers.push(n),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,n=new m.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>u(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const f=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let g=[];g.push(this.sourceBuffers[0]);try{for(const T of this.processors)g=yield T.process(g)}catch{this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()});return}this.destBuffers=g;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()}));return}const c=S.width,v=S.height;c!==0&&v!==0&&(this.canvasOutput.width!==c&&this.canvasOutput.height!==v&&(this.canvasOutput.width=c,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,c,v,0,0,c,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(T=>{T.processingDidStart&&T.processingDidStart()})));const _=performance.now()-f,E=1e3*2/this.framerate-_,b=Math.max(0,1e3/this.framerate-_);E<=0&&this.forEachObserver(T=>{T.processingLatencyTooHigh&&T.processingLatencyTooHigh(_)}),yield this.timer.start(b,this.process.bind(this))}),this.timer=n}},"DefaultVideoFrameProcessorPipeline");l.default=s},4586125494:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{createWorkerTimer(){try{const p=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(p))}catch{}}start(p,m){return d(this,void 0,void 0,function*(){this.callback=m,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(p)):this.lastTimeout=setTimeout(()=>{this.callback()},p)})}destroy(){return d(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=u},1552134416:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(570155317)),m=h(d(5153707095));let a=r(class gS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new gS(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return u(this,void 0,void 0,function*(){return this.device})}transformStream(i){return u(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return u(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}get framerate(){return this.pipe.framerate}set framerate(i){this.pipe.framerate=i}constructor(i,e,t,n=new p.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=n,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},4008876858:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{process(p){return d(this,void 0,void 0,function*(){return p})}destroy(){return d(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=u},7077045119:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let d=r(class{getPromise(){return this.promise}resolvePromise(h){this.resolve(h)}resolveAndReplacePromise(h){this.resolve(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}rejectPromise(h){this.reject(h)}rejectAndReplacePromise(h){this.reject(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}constructor(){this.promise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}},"DeferredPromise");l.DeferredPromise=d},944458121:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,n){function o(S){try{g(i.next(S))}catch(c){n(c)}}r(o,"fulfilled");function f(S){try{g(i.throw(S))}catch(c){n(c)}}r(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}r(g,"step"),g((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=d(2821198607);let p=r(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return u(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const s=document.createElement("canvas");s.width=this.streamParameters.width,s.height=this.streamParameters.height,s.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return u(this,void 0,void 0,function*(){const s=a.backgroundReplacement.backgroundImageURL,i=a.backgroundReplacement.defaultColor;if(s)try{const e=yield this.loadImage(s);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}resizeAndSetReplacementColor(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.fillStyle=a,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}loadImage(a){return u(this,void 0,void 0,function*(){const i=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,n)=>{e.onload=()=>{t(e)},e.onerror=o=>{n(o)}})})}constructor(a,s){this.streamParameters=a,this.outputCanvas=s,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=p},2821198607:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_FX_SPEC=l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const d="/ml_media_fx/otherassets";l.WORKER_PATH=`${d}/worker.js`,l.FXLIB_PATH=`${d}/fxlib.js`,l.DEFAULT_VIDEO_FX_SPEC={paths:{cdnBasePath:l.CDN_BASE_PATH,workerPath:l.WORKER_PATH,fxLibPath:l.FXLIB_PATH}}},8042793250:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(v,_,E,b){function T(I){return I instanceof E?I:new E(function(O){O(I)})}return r(T,"adopt"),new(E||(E=Promise))(function(I,O){function w(L){try{R(b.next(L))}catch(H){O(H)}}r(w,"fulfilled");function D(L){try{R(b.throw(L))}catch(H){O(H)}}r(D,"rejected");function R(L){L.done?I(L.value):T(L.value).then(w,D)}r(R,"step"),R((b=b.apply(v,_||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(8200904422),m=d(8408264373),a=d(7737065561),s=h(d(570155317)),i=h(d(5350537240)),e=d(759573094),t=h(d(1877666836)),n=h(d(6011658084)),o=d(7077045119),f=d(944458121),g=d(2821198607),S=d(321421209);let c=r(class Rd{process(_){return u(this,void 0,void 0,function*(){return _})}fxProcess(_){return u(this,void 0,void 0,function*(){const E=_[0].asCanvasElement();this.didStreamParametersChange(E)&&(yield this.adjustProcessorForNewStreamParameters(E));try{yield this.manageSegmentationMask(E)}catch(b){throw this.logger.error(b),new Error("Video stream could not be processed")}return yield this.renderer.render(E,this.segmentationMask),_[0]=this.canvasVideoFrameBuffer,_})}noOpProcess(_){return u(this,void 0,void 0,function*(){return _})}didStreamParametersChange(_){return _.width!==this.streamParameters.width||_.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(_){return u(this,void 0,void 0,function*(){this.streamParameters.width=_.width,this.streamParameters.height=_.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return u(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:g.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(_){return u(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const E=this.canvasOpsManager.getInferenceInputData(_);this.segmentationMask=yield this.generateSegmentationMask(E),this.segmentationRateManager.completeSegmentation()}}catch(E){throw this.logger.error(E.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(_){return u(this,void 0,void 0,function*(){Rd.isSharedArrayBufferSupported?(this.sharedImageData.set(_.data),this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:_},[_.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(E){throw this.logger.error(E.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(_){return{backgroundBlur:{isEnabled:_.backgroundBlur.isEnabled,strength:_.backgroundBlur.strength},backgroundReplacement:{isEnabled:_.backgroundReplacement.isEnabled,backgroundImageURL:_.backgroundReplacement.backgroundImageURL,defaultColor:_.backgroundReplacement.defaultColor}}}setVideoFxSpec(_){_.paths&&(this.videoFxSpec.paths=_.paths)}setEffectConfig(_){return u(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(_,this.effectConfig))return;const E=this.cloneConfigFrom(_);try{yield this.validateEffectConfig(E)}catch(b){throw this.logger.error(b.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}E.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(E),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,E),this.effectConfig=E,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(_){return u(this,void 0,void 0,function*(){if(_.backgroundBlur.isEnabled&&_.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");_.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(_))})}validateReplacementConfig(_){return u(this,void 0,void 0,function*(){if(_.backgroundReplacement.backgroundImageURL&&_.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!_.backgroundReplacement.backgroundImageURL&&!_.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{_.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(_.backgroundReplacement.backgroundImageURL))}catch(b){throw this.logger.error(b.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const E=_.backgroundReplacement.defaultColor;if(E&&E!=="black"&&E!=="#000000"&&E!=="#000"){if(E.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(E))throw new Error(`Invalid hexadecimal color code for default replacement background: ${E}`);const T=document.createElement("canvas").getContext("2d"),I=T.fillStyle;if(T.fillStyle=E,T.fillStyle===I)throw new Error(`Invalid color for default replacement background: ${E}`)}})}validateProcessingBudgetPerFrame(_){if(_<g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||_>g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const _=this.getVideoFxAssetParams();yield this.loadEngineWorker(_),yield this.buildEngine(_),yield this.loadFxLib(_),this.renderer=constructRenderer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(_){throw this.logger.error(_.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const _=e.getDefaultAssetSpec();return{assetGroup:_.assetGroup,revisionID:_.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(_,E){const b=new URL(_);for(const[T,I]of Object.entries(E))if(I!==void 0){const O=encodeURIComponent(T),w=encodeURIComponent(I);b.searchParams.set(O,w)}return b.toString()}loadEngineWorker(_){return u(this,void 0,void 0,function*(){try{const E=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.workerPath,_);this.engineWorker=yield m.loadWorker(E,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",b=>this.engineWorkerReceiver(b))}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(_){return u(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:this.videoFxSpec.paths.cdnBasePath,sdkVersioningParams:_}});try{yield this.buildEnginePromise.getPromise()}catch(E){throw this.logger.error(E.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(_){return u(this,void 0,void 0,function*(){const E=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.fxLibPath,_),b={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const T=yield p.fetchWithBehavior(E,b,{});if(!T.ok)throw new Error("Fetch failed.");const I=window.URL.createObjectURL(yield T.blob());yield new Promise((O,w)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",I),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",O),this.fxLibScript.addEventListener("error",w),document.body.appendChild(this.fxLibScript)})}catch(T){throw this.logger.error(T.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(_){const E=_.data;switch(E.msg){case g.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(E.payload);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(E.payload.output);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case g.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(E)}`);break}}settleEngineBuildPromise(_){_!==g.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(_){_?this.segmentationRequestPromise.resolveAndReplacePromise(_):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const _=new ImageData(new Uint8ClampedArray(this.sharedImageData),g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(_)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u(this,void 0,void 0,function*(){let b=!0;const T=r((w,D)=>{w&&(_.info(D),b=!1)},"checkEnv");T(typeof globalThis>"u","Browser does not have globalThis."),T(!a.supportsWorker(globalThis,_),"Browser does not support web workers."),T(!a.supportsWASM(globalThis,_),"Browser does not support wasm."),T(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const I=new s.default;T(!I.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const O=r(()=>u(this,void 0,void 0,function*(){if(E)try{const w=new Rd(_);yield w.loadAssets(),yield w.destroy()}catch{return _.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(b?yield O():!1)})}static create(_,E){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,T=arguments.length>3?arguments[3]:void 0;return u(this,void 0,void 0,function*(){const I=new Rd(_,b);T&&I.setVideoFxSpec(T);try{return yield I.loadAssets(),yield I.setEffectConfig(E),I}catch(O){throw _.error(O.toString()),I.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(_){this.eventController?this.eventController=_:(this.eventController=_,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const _={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",_)}sameVideoFxConfig(_,E){return _.backgroundBlur.isEnabled===E.backgroundBlur.isEnabled&&_.backgroundBlur.strength===E.backgroundBlur.strength&&_.backgroundReplacement.backgroundImageURL===E.backgroundReplacement.backgroundImageURL&&_.backgroundReplacement.defaultColor===E.backgroundReplacement.defaultColor&&_.backgroundReplacement.isEnabled===E.backgroundReplacement.isEnabled}constructor(_,E=g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,b){this.logger=_,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new n.default(this.outputCanvas),this.videoFxSpec=g.DEFAULT_VIDEO_FX_SPEC;try{this.validateProcessingBudgetPerFrame(E)}catch(T){throw this.logger.error(T),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${E}`)}b&&(this.eventController=b),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,E),this.streamParameters={framerate:g.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:g.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:g.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:g.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},Rd.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${Rd.isSharedArrayBufferSupported}`),this.canvasOpsManager=new f.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${E}`)}},"VideoFxProcessor");l.default=c,c.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},321421209:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const u=d(2821198607);let h=r(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=u.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,a){this.logger=m,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=u.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},1771494510:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"VideoSource");l.default=d},5814977413:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class xh{add(h){this.ids.add(h)}array(){return Array.from(this.ids.values()).sort((p,m)=>p-m)}contain(h){return this.ids.has(h)}forEach(h){this.ids.forEach(h)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(h){if(!h)return this.ids.size===0;const p=this.array(),m=h.array();if(p.length!==m.length)return!1;for(let a=0;a<p.length;a++)if(p[a]!==m[a])return!1;return!0}clone(){return new xh(this.array())}remove(h){this.ids.delete(h)}toJSON(){return this.array()}truncate(h){const p=this.array();return new xh(p.splice(0,h))}constructor(h){this.ids=new Set(h)}},"DefaultVideoStreamIdSet");l.default=d},3420631425:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7344258710),p=u(d(5814977413)),m=u(d(8784832088));let a=r(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const n of i.sources){if(!e.has(n.attendeeId)){e.set(n.attendeeId,n.groupId);continue}const o=e.get(n.attendeeId);o<n.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${n.attendeeId}, replacing with newer group ID ${n.groupId}`),e.set(n.attendeeId,n.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(n=>e.get(n.attendeeId)===n.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(n=>n.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new p.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const n of this.currentIndex.sources){const{attendeeId:o,externalUserId:f,mediaType:g}=n;o!==i&&g===h.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:f}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,n){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===i||v.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const f=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),g=new Map;let S=0;f.forEach((v,_)=>{g.set(_,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(f,e,S,n,g),this.trySelectHighBitrateForAttendees(f,o,S,n,g);const c=new p.default;for(const v of g.values())c.add(v.streamId);return c}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new p.default;if(this.currentIndex){const t=new Map;for(const n of this.currentIndex.sources)n.attendeeId===i||n.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(n.groupId)||n.maxBitrateKbps>t.get(n.groupId).maxBitrateKbps)&&t.set(n.groupId,n);for(const n of t.values())e.add(n.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,n]of this.subscribeTrackToStreamMap.entries())if(i===n){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,n]of this.subscribeSsrcToStreamMap.entries())if(i===n){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new p.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,n,o){for(const f of e){if(t>=n)break;if(i.has(f)){const g=i.get(f);for(const S of g.reverse())if(t-o.get(f).maxBitrateKbps+S.maxBitrateKbps<n){t=t-o.get(f).maxBitrateKbps+S.maxBitrateKbps,o.set(f,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,n)=>{t.sort((o,f)=>o.maxBitrateKbps>f.maxBitrateKbps?1:o.maxBitrateKbps<f.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},1509578473:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7344258710),p=u(d(3420631425)),m=u(d(8784832088));let a=r(class Md extends p.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let n=0;n<i.length;n++){const o=i[n].maxBitrate/1e3,f=i[n].maxFramerate;if(!e||n===this._localStreamInfos.length){e=!1;const g=new m.default;g.maxBitrateKbps=o,g.maxFrameRate=f,g.disabledByUplinkPolicy=o===0,g.rid=i[n].rid,o!==0&&(g.timeEnabled=Date.now()),this._localStreamInfos.push(g),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=f,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of i.bitrates)e.add(n.sourceStreamId),this.streamIdToBitrateKbpsMap.set(n.sourceStreamId,this.convertBpsToKbps(n.avgBitrateBps));for(const n of t)e.has(n)||(this.streamIdToBitrateKbpsMap.get(n)===Md.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(n,Md.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(n,Md.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of this.currentIndex.sources)n.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(n.streamId),this.streamIdToBitrateKbpsMap.has(n.streamId)||this.streamIdToBitrateKbpsMap.set(n.streamId,Md.UNSEEN_STREAM_BITRATE));for(const n of t)e.has(n)||this.streamIdToBitrateKbpsMap.delete(n)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Md.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},8784832088:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(7344258710);let h=r(class SS{clone(){const m=new SS;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=u.SdkStreamDescriptor.create();return m.mediaType=u.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,a,s,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=a,this.streamId=s,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},7141843743:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{notifyObservers(h,p){for(const m of this.observerQueue)m.videoElementResolutionChanged(h,p)}registerObserver(h){this.observerQueue.add(h)}removeObserver(h){this.observerQueue.delete(h)}bindVideoElement(h){if(this.element=h,!this.element){this.resizeObserver.unobserve(this.element);return}this.resizeObserver.observe(this.element)}constructor(){this.observerQueue=new Set,this.resizeObserver=new ResizeObserver(h=>{for(const p of h){const{width:m,height:a}=p.contentRect;this.notifyObservers(m,a)}})}},"DefaultVideoElementResolutionMonitor");l.default=d},8228544095:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(570155317)),p=u(d(5519271617)),m=u(d(2733652283));let a=r(class Ja{static connectVideoStreamToVideoElement(i,e,t){const n=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Ja.setVideoElementFlag(e,"disablePictureInPicture",t),Ja.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==n&&(e.style.transform=n),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(f=>{console.warn("Error playing video in Safari",f)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",Ja.setVideoElementFlag(i,"disablePictureInPicture",!1),Ja.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Ja.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,n,o,f,g,S){let c=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new p.default(i).hasModality(p.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),c=!0),this.tileState.boundExternalUserId!==g&&(this.tileState.boundExternalUserId=g,c=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,c=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,c=!0),this.tileState.videoStreamContentWidth!==n&&(this.tileState.videoStreamContentWidth=n,c=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,c=!0),this.tileState.streamId!==f&&(this.tileState.streamId=f,c=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,c=!0),c&&this.sendTileStateUpdate()}bindVideoElement(i){var e;let t=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,(e=this.resolutionMonitor)===null||e===void 0||e.bindVideoElement(this.tileState.boundVideoElement),t=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,t=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,t=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),t&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Ja.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Ja.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,n,o=void 0){this.tileController=t,this.devicePixelRatioMonitor=n,this.resolutionMonitor=o,this.tileState=new m.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},2733652283:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class vS{clone(){const h=new vS;return h.tileId=this.tileId,h.localTile=this.localTile,h.isContent=this.isContent,h.active=this.active,h.paused=this.paused,h.poorConnection=this.poorConnection,h.boundAttendeeId=this.boundAttendeeId,h.boundExternalUserId=this.boundExternalUserId,h.boundVideoStream=this.boundVideoStream,h.boundVideoElement=this.boundVideoElement,h.nameplate=this.nameplate,h.videoStreamContentWidth=this.videoStreamContentWidth,h.videoStreamContentHeight=this.videoStreamContentHeight,h.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,h.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,h.devicePixelRatio=this.devicePixelRatio,h.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,h.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,h.streamId=this.streamId,h.groupId=this.groupId,h}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=d},3338407955:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(n,o,f,g){function S(c){return c instanceof f?c:new f(function(v){v(c)})}return r(S,"adopt"),new(f||(f=Promise))(function(c,v){function _(T){try{b(g.next(T))}catch(I){v(I)}}r(_,"fulfilled");function E(T){try{b(g.throw(T))}catch(I){v(I)}}r(E,"rejected");function b(T){T.done?c(T.value):S(T.value).then(_,E)}r(b,"step"),b((g=g.apply(n,o||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(78129611)),m=h(d(626864851)),a=h(d(249203560)),s=d(8479756130),i=h(d(7141843743)),e=h(d(8228544095));let t=r(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return u(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const o=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,o.destroy()})}bindVideoElement(o,f){const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${o}`);return}g.bindVideoElement(f)}unbindVideoElement(o){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${o}`);return}this.logger.info("Unbinding the video element"),this.notifyRemoteObserversOfUnbound(g.state().boundAttendeeId);const S=g.stateRef().boundVideoElement;g.bindVideoElement(null),f&&(this.logger.info("Cleaning up the video element"),e.default.disconnectVideoStreamFromVideoElement(S,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===p.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const o=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),o.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(o){const f=this.getVideoTile(o);f&&(this.currentPausedTilesByIds.has(o)||(this.audioVideoController.pauseReceivingStream(f.stateRef().streamId),this.currentPausedTilesByIds.add(o)),f.pause())}unpauseVideoTile(o){const f=this.getVideoTile(o);f&&(this.currentPausedTilesByIds.has(o)&&(this.audioVideoController.resumeReceivingStream(f.stateRef().streamId),this.currentPausedTilesByIds.delete(o)),f.unpause())}getVideoTile(o){return this.tileMap.has(o)?this.tileMap.get(o):null}getVideoTileArea(o){const f=o.state();let g=0,S=0;return f.boundVideoElement&&(g=f.boundVideoElement.clientHeight*f.devicePixelRatio,S=f.boundVideoElement.clientWidth*f.devicePixelRatio),g*S}getAllRemoteVideoTiles(){const o=new Array;return this.tileMap.forEach((f,g)=>{(!this.currentLocalTile||g!==this.currentLocalTile.id())&&o.push(f)}),o}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const f=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const g=this.tileFactory.makeTile(f,o,this,this.devicePixelRatioMonitor,this.createResolutionMonitor(f));return this.tileMap.set(f,g),g}removeVideoTile(o){if(!this.tileMap.has(o))return;const f=this.tileMap.get(o);this.currentLocalTile===f&&(this.currentLocalTile=null),f.destroy(),this.tileMap.delete(o),this.audioVideoController.forEachObserver(g=>{s.Maybe.of(g.videoTileWasRemoved).map(S=>S.bind(g)(o))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(o){const f=[];for(const g of this.getAllVideoTiles()){const S=g.state();S.boundAttendeeId===o&&(this.removeVideoTile(S.tileId),f.push(S.tileId))}return f}removeAllVideoTiles(){const o=Array.from(this.tileMap.keys());for(const f of o)this.removeVideoTile(f)}sendTileStateUpdate(o){this.audioVideoController.forEachObserver(f=>{s.Maybe.of(f.videoTileDidUpdate).map(g=>g.bind(f)(o))})}haveVideoTilesWithStreams(){for(const o of this.getAllVideoTiles())if(o.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(o){return!!this.getVideoTileForAttendeeId(o)}getVideoTileForAttendeeId(o){for(const f of this.getAllVideoTiles())if(f.state().boundAttendeeId===o)return f}captureVideoTile(o){const f=this.getVideoTile(o);return f?f.capture():null}registerVideoTileResolutionObserver(o){this.resolutionObservers.add(o)}removeVideoTileResolutionObserver(o){this.resolutionObservers.delete(o)}notifyResolutionObserversOfChange(o,f,g){for(const S of this.resolutionObservers)S.videoTileResolutionDidChange(o,f,g)}notifyRemoteObserversOfUnbound(o){for(const f of this.resolutionObservers)f.videoTileUnbound(o)}createResolutionMonitor(o){const f=new class{videoElementResolutionChanged(S,c){const v=this.controller.getVideoTile(this.tileId);if(v){const _=v.state().boundAttendeeId;this.controller.notifyResolutionObserversOfChange(_,S,c)}}constructor(S,c){this.controller=S,this.tileId=c}}(this,o),g=new i.default;return g.registerObserver(f),g}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(o,f,g){this.tileFactory=o,this.audioVideoController=f,this.logger=g,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.resolutionObservers=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=f.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=t},6875957405:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(8228544095));let p=r(class{makeTile(a,s,i,e,t){return new h.default(a,s,i,e,t)}},"DefaultVideoTileFactory");l.default=p},4492438224:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"BitrateParameters");l.default=d},659149118:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(7833098058)),p=u(d(8588089957)),m=d(8479756130),a=u(d(1203283221)),s=u(d(4492438224));let i=r(class _a{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new s.default,new s.default,new s.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const n=t.map((o,f,g)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(n),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const n=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=n!==this.numSenders,f=t.numberOfParticipants(),g=f>=0&&f<=2,S=this.shouldDisableSimulcast!==g;this.numSenders=n,this.shouldDisableSimulcast=g,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,n){return JSON.stringify(t)===JSON.stringify(n)}encodingParametersEqual(){let t=!1;for(const n of p.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(n),this.currentQualityMap.get(n)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?_a.kHiTargetBitrateKbpsFhd:_a.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?_a.kMidTargetBitrateKbpsFhd:_a.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?_a.kLowTargetBitrateKbpsFhd:_a.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const n=new Map,o=1e3,f=p.default.NAME_ARR_ASCENDING,g=t;let S=this.shouldDisableSimulcast?1:4;for(let c=0;c<f.length;c++){const v=f[c];n.set(v,{rid:v,active:g[c]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:g[c]*o}),S=S/2}return n}getQualityMapString(t){let n="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(f=>{n+=`{ rid: ${f.rid} active:${f.active} maxBitrate:${f.maxBitrate}}`}),n}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(n=>{m.Maybe.of(n.encodingSimulcastLayersDidChange).map(o=>o.bind(n)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)t(n)}constructor(t,n){this.selfAttendeeId=t,this.logger=n,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=_a.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=_a.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=_a.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=i,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},9623039021:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(618497857));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,s,i,e,t,n,o,f,g,S,c,v;const _=new Map,E=1e3,b=h.default.NAME_ARR_ASCENDING;return _.set(b[0],{rid:b[0],active:!0,scaleResolutionDownBy:((s=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||s===void 0?void 0:s.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*E,maxFramerate:((n=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||n===void 0?void 0:n.maxFramerate)||5}),_.set(b[1],{rid:b[1],active:!0,scaleResolutionDownBy:((f=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||f===void 0?void 0:f.scaleResolutionDownBy)||1,maxBitrate:(((S=(g=this.encodingParams)===null||g===void 0?void 0:g.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*E,maxFramerate:(v=(c=this.encodingParams)===null||c===void 0?void 0:c.high)===null||v===void 0?void 0:v.maxFramerate}),_}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,s){this.encodingParams=s,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=p},8001836114:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1203283221));let m=r(class Pd{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new p.default(0,0,0,0,!1),this.parametersInEffect=new p.default(0,0,0,0,!1),this.encodingParamMap.set(Pd.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=s.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),n=s.numberOfParticipants();if(this.numParticipants===n&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=n,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let s=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(s=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new p.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,s,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let s=640;return this.getNumberOfPublishedVideoSources()>4&&(s=320),s}captureHeight(){let s=384;return this.getNumberOfPublishedVideoSources()>4&&(s=192),s}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let s=0;return this.getNumberOfPublishedVideoSources()<=2?s=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?s=this.idealMaxBandwidthKbps*2/3:s=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(s)}setIdealMaxBandwidthKbps(s){this.idealMaxBandwidthKbps=s}setHasBandwidthPriority(s){this.hasBandwidthPriority=s}setTransceiverController(s){this.transceiverController=s}setSVCEnabled(s){var i;this.enableSVC=s,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${s}}`)}setHighResolutionFeatureEnabled(s){this.enableHighResolutionFeature=s}updateTransceiverController(){return u(this,void 0,void 0,function*(){const s=this.getStreamCaptureSetting();if(!s)return;const i=this.calculateEncodingParameters(s);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(Pd.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(s){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return s.maxBitrate!==(t==null?void 0:t.maxBitrate)||s.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(s==null?void 0:s.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(s){var i,e,t;const n=this.maxBandwidthKbps()*1e3;let o=1,f=720;if(s.height!==void 0&&s.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(f=Pd.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Pd.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],f===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(f=360),o=Math.max(Math.min(s.height,s.width)/f,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${s.width}x${s.height}. New dimension is ${s.width/o}x${s.height/o}`)),this.enableSVC){let g;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?g="L1T1":g="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${n}  targetHeight: ${f}  scalabilityMode: ${g}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:n,scalabilityMode:g}}else return{scaleResolutionDownBy:o,maxBitrate:n}}getStreamCaptureSetting(){var s,i,e,t;return(t=(e=(i=(s=this.transceiverController)===null||s===void 0?void 0:s.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var s;return(s=this.numberOfPublishedVideoSources)!==null&&s!==void 0?s:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(s,i){const e=s??i,t=e.length>0&&Pd.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(s,i=!0,e=void 0,t=void 0){this.selfAttendeeId=s,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},8577743225:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(1203283221));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=p},8821550569:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function d(h){return h.map(p=>typeof p=="object"?JSON.stringify(p):`${p}`).join(" ")}r(d,"stringify");let u=r(class{debug(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.debug(d(m))}info(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.info(d(m))}warn(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.warn(d(m))}error(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.error(d(m))}constructor(p){this.base=p}},"LoggerAdapter");l.default=u},2830670825:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(n,o,f,g){function S(c){return c instanceof f?c:new f(function(v){v(c)})}return r(S,"adopt"),new(f||(f=Promise))(function(c,v){function _(T){try{b(g.next(T))}catch(I){v(I)}}r(_,"fulfilled");function E(T){try{b(g.throw(T))}catch(I){v(I)}}r(E,"rejected");function b(T){T.done?c(T.value):S(T.value).then(_,E)}r(b,"step"),b((g=g.apply(n,o||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const p=d(3530921084),m=d(759573094),a=h(d(1877666836)),s=h(d(8821550569)),i=h(d(8455559234)),e=h(d(9219324581));let t=r(class Oa{static isSupported(o,f){var g,S;const c=Oa.defaultFetchBehavior(),v=f!=null&&f.logger?new s.default(f.logger):void 0,_={fetchBehavior:c,logger:v};if(m.isIFramed()){if((f==null?void 0:f.allowIFrame)===!1)return(g=f==null?void 0:f.logger)===null||g===void 0||g.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=f==null?void 0:f.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return p.VoiceFocus.isSupported(Oa.augmentSpec(o),_)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;var v,_,E;return u(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const b=((E=(_=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||_===void 0?void 0:_.Audio)===null||E===void 0?void 0:E.EchoReduction)==="AVAILABLE",T=g&&g.supported===!0&&g.model.name==="ns_es"&&!b,I=o.name==="ns_es"&&!b;if(T||I)throw new Error("Echo Reduction requested but not enabled.");const O=new Oa(o,f,g);return yield O.init(),O})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return u(this,void 0,void 0,function*(){return new Oa(o,f,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,f){return u(this,void 0,void 0,function*(){if(this.supported)try{const[S,c]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},f),{es:this.spec.name==="ns_es"});return new i.default(o,S,c,v)}catch{return}})}static destroyVoiceFocus(o){var f;return u(this,void 0,void 0,function*(){(f=o==null?void 0:o.vf)===null||f===void 0||f.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Oa.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const f={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return p.VoiceFocus.configure(this.spec,f)})}init(){var o;return u(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const f=yield this.configuration;if(!f.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(f,this.preload);try{yield this.pendingVoiceFocus}catch(g){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${g}`),this.supported=!1}})}createVoiceFocus(o,f){return u(this,void 0,void 0,function*(){const g=new e.default;return this.vf=yield p.VoiceFocus.init(o,{delegate:g,preload:f,logger:this.vfLogger}),[this.vf,g]})}allocateVoiceFocus(o){return u(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const f=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,f}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Oa.majorMinorVersion()||"unknown",f=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(f)}`}}constructor(o,{preload:f=!0,logger:g,fetchBehavior:S=Oa.defaultFetchBehavior()},c){this.spec=o,this.supported=!0,this.logger=g,this.vfLogger=g?new s.default(g):void 0,this.preload=f,this.fetchBehavior=S,this.spec=Oa.augmentSpec(this.spec),c&&(this.configuration=Promise.resolve(c))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},8455559234:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(570155317));let m=r(class yS{getInnerDevice(){return this.device}mute(i){return u(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return u(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return u(this,void 0,void 0,function*(){return this.device===i&&!a(i)?this:new yS(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return u(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return u(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const f=this.node,g=this.node;return{start:f,end:g}}catch(f){throw this.failed=!0,this.delegate.onFallback(this,f),f}})}observeMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return u(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return u(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return u(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return u(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,n,o=!1,f=void 0,g=new p.default,S=new Map,c=void 0,v=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=n,this.failed=o,this.node=f,this.browserBehavior=g,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=c,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function a(s){return s==="default"?!0:!s||typeof s!="object"?!1:"deviceId"in s&&s.deviceId==="default"||"id"in s&&s.id==="default"}r(a,"isDefaultDevice"),l.default=m},9219324581:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}onFallback(h,p){var m;for(const a of this.observers)(m=a.voiceFocusFellBackToInnerStream)===null||m===void 0||m.call(a,h,p)}onCPUWarning(){var h;for(const p of this.observers)(h=p.voiceFocusInsufficientResources)===null||h===void 0||h.call(p)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=d},3805322525:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class Eu{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(h){let p=0;for(const m of h.streams){const a=!!m.attendeeId,s=!!m.externalUserId,i=m.hasOwnProperty("muted"),e=!!m.dropped;if(a){this.attendeeIdToStreamId[m.attendeeId]&&this.attendeeIdToStreamId[m.attendeeId]<m.audioStreamId&&delete this.attendeeIdToStreamId[m.attendeeId],this.streamIdToAttendeeId[m.audioStreamId]=m.attendeeId;const t=s?m.externalUserId:m.attendeeId;this.streamIdToExternalUserId[m.audioStreamId]=t,this.attendeeIdToStreamId[m.attendeeId]=m.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(m.attendeeId,!0,t,!1,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}if(i){const t=this.streamIdToAttendeeId[m.audioStreamId],n=this.streamIdToExternalUserId[m.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,m.muted,null,n)}if(!a&&!i){const t=this.streamIdToAttendeeId[m.audioStreamId];if(t){const n=this.streamIdToExternalUserId[m.audioStreamId];delete this.streamIdToAttendeeId[m.audioStreamId],delete this.streamIdToExternalUserId[m.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[m.audioStreamId],this.attendeeIdToStreamId[t]===m.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(f);if(g>m.audioStreamId&&this.streamIdToAttendeeId[g]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,n,e,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(h),this.sessionReconnected=!1)}cleanUpState(h){const p=Object.values(this.streamIdToAttendeeId),m=h.streams.map(s=>s.attendeeId),a=p.filter(s=>!m.includes(s));for(const[s,i]of a.entries()){const e=this.attendeeIdToStreamId[i],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[i],i===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(i,!1,t,!1,{attendeeIndex:s,attendeesInFrame:i.length})}}sendRealtimeUpdatesForAudioMetadata(h){let p=null,m=null;for(const a of h.attendeeStates){const s=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(p===null&&(p={}),s!==null&&(p[s]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(m===null&&(m={}),s!==null&&(m[s]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(p,m)}normalizedVolume(h){const m=1-(-h.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(m,0),1)}normalizedSignalStrength(h){const p=h.signalStrength/Eu.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(p,0),1)}applyRealtimeUpdatesForAudioMetadata(h,p){for(const m in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[m],s=this.streamIdToExternalUserId[m];let i=null,e=null;h!==null&&(h.hasOwnProperty(a)?i=h[a]:i=Eu.IMPLICIT_VOLUME),p!==null&&(p.hasOwnProperty(a)?e=p[a]:e=Eu.IMPLICIT_SIGNAL_STRENGTH),(i!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,i,null,e,s)}}attendeeIdForStreamId(h){if(h===0)return null;const p=this.streamIdToAttendeeId[h];return p||(this.warnedAboutMissingStreamIdMapping[h]||(this.warnedAboutMissingStreamIdMapping[h]=!0,this.logger.warn(`volume indicator stream id ${h} seen before being defined`)),null)}constructor(h,p,m,a,s){this.logger=h,this.realtimeController=p,this.minVolumeDecibels=m,this.maxVolumeDecibels=a,this.selfAttendeeId=s,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=d,d.MAX_SIGNAL_STRENGTH_LEVELS=2,d.IMPLICIT_VOLUME=0,d.IMPLICIT_SIGNAL_STRENGTH=1},7482759477:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(1877666836)),p=u(d(6363507833));let m=r(class{create(s,i,e){this.connection=new WebSocket(e?s:h.default.urlWithVersion(s),i),this.connection.binaryType="arraybuffer"}send(s){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return s instanceof Uint8Array?this.connection.send(s.buffer):this.connection.send(s),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${p.default[this.readyState()]}`),!1}}close(s,i){var e;(e=this.connection)===null||e===void 0||e.close(s,i)}destroy(){this.connection=void 0}addEventListener(s,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(s,i)}removeEventListener(s,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(s,i)}readyState(){if(!this.connection)return p.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return p.default.Connecting;case WebSocket.OPEN:return p.default.Open;case WebSocket.CLOSING:return p.default.Closing;case WebSocket.CLOSED:return p.default.Closed}}constructor(s){this.logger=s}},"DefaultWebSocketAdapter");l.default=m},6363507833:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var d;(function(u){u[u.None=0]="None",u[u.Connecting=1]="Connecting",u[u.Open=2]="Open",u[u.Closing=3]="Closing",u[u.Closed=4]="Closed"})(d=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=d},1897785988:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(b,T,I,O){function w(D){return D instanceof I?D:new I(function(R){R(D)})}return r(w,"adopt"),new(I||(I=Promise))(function(D,R){function L(ee){try{K(O.next(ee))}catch(q){R(q)}}r(L,"fulfilled");function H(ee){try{K(O.throw(ee))}catch(q){R(q)}}r(H,"rejected");function K(ee){ee.done?D(ee.value):w(ee.value).then(L,H)}r(K,"step"),K((O=O.apply(b,T||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=d(8408264373),p=d(7737065561),m=3,a=2.5,s=2.63,i=.6,e=.65,t=.5,n=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let f=r(class{roundtrip(T,I,O){return new Promise((w,D)=>{this.worker.then(R=>{let L;L=r(H=>{const{message:K,key:ee}=H.data;K===I&&ee===O&&(R.removeEventListener("message",L),w(H.data))},"listener"),R.addEventListener("message",L),R.postMessage(T)}).catch(R=>{var L;(L=this.logger)===null||L===void 0||L.error("Failed to load worker.",R),D(R)})})}supportsSIMD(T){const I="simd",O=T||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,w={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:O,key:I};return this.roundtrip(w,"simd-support",I).then(D=>D.supports)}measure(T,I){const O=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,w=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,D=T?w:O,R=`bench:${T}`,L={message:"measure",fetchBehavior:this.fetchBehavior,budget:I,path:D,key:R};return this.roundtrip(L,"measurement",R).then(H=>{if(H.measurement)return H.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(T=>{var I;(I=this.logger)===null||I===void 0||I.debug("Stopping estimator worker."),T.terminate()}).catch(T=>{})}constructor(T,I){this.fetchConfig=T,this.logger=I;const O=`${T.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:T.headers,escapedQueryString:T.escapedQueryString},this.worker=h.loadWorker(O,"VoiceFocusEstimator",this.fetchBehavior,I)}},"Estimator");const g=r((b,T)=>b===1?i:T==="quality"?e*b:t*b,"inlineScoreMultiplier"),S=r(function(b){let{supportsSIMD:T,supportsSAB:I,duration:O,executionPreference:w="auto",simdPreference:D,variantPreference:R="auto",namePreference:L="default",usagePreference:H,executionQuantaPreference:K=m}=b,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,q=arguments.length>2?arguments[2]:void 0;const ce=D==="force"||D!=="disable"&&T,Te=O!==-1,ke=Te?(ce?a:s)/O:0,tt=ce?ee.simd:ee.wasm,At=Te?g(K,H)*ke:0,Be=Te?n*ke:0,$e=L,Ze=r(Nt=>({supported:!1,reason:Nt}),"unsupported");if(Te){if(ke<tt.noSupport)return Ze(`Performance score ${ke} worse than threshold ${tt.noSupport}.`)}else if(w==="auto"||R==="auto")return Ze(`Missing explicit execution (${w}) or variant (${R}) preference, but no scoring performed.`);q==null||q.debug(`Bench duration ${O} yields inline score ${At} and worker score ${Be}.`);const Je=r((Nt,Ve,He)=>({supported:!0,useSIMD:ce,processor:Nt,executionApproach:Ve,variant:He,executionQuanta:Ve==="inline"?K:void 0,name:$e}),"succeed"),dt=r((Nt,Ve,He)=>Ve!=="auto"?!Te||Nt>He[Ve]?Ve:"failed":Nt>He.c100?"c100":Nt>He.c50?"c50":Nt>He.c20?"c20":Nt>He.c10?"c10":"failed","resolveVariant"),Ot=r(Nt=>{switch(Nt||"auto"){case"auto":{let Ve=Ot("inline"),He=Ot("worker");return q==null||q.debug(`Reducing auto preference: ${JSON.stringify(Ve)} vs ${JSON.stringify(He)}`),Ve.supported===!1||He.supported===!1?He:Ve.variant===He.variant||Ve.variant==="c50"?Ve:He}case"worker":return p.supportsSharedArrayBuffer(globalThis,window,q)?Ot("worker-sab"):Ot("worker-postMessage");case"inline":{const Ve=dt(At,R,tt.inline);return Ve==="failed"?Ze(`Performance score ${At} not sufficient for inline use with variant preference ${R}.`):Je("voicefocus-inline-processor","inline",Ve)}case"worker-sab":{if(!I){const He="Requested worker-sab but no SharedArrayBuffer support.";return q==null||q.warn(He),{supported:!1,reason:He}}const Ve=dt(Be,R,tt.worker);return Ve==="failed"?Ze(`Performance score ${Be} not sufficient for worker use with variant preference ${R}.`):Je("voicefocus-worker-sab-processor","worker-sab",Ve)}case"worker-postMessage":{const Ve=dt(Be,R,tt.worker);if(Ve==="failed")return Ze(`Performance score ${Be} not sufficient for worker use.`);if($e==="ns_es"){const He="Requested echo suppression but postMessage executor does not support it.";return q==null||q.warn(He),{supported:!1,reason:He}}return Je("voicefocus-worker-postMessage-processor","worker-postMessage",Ve)}}},"reducePreference");return Ot(w)},"decideExecutionApproach"),c=r((b,T,I,O)=>u(void 0,void 0,void 0,function*(){const w={supportsSIMD:b,supportsSAB:p.supportsSharedArrayBuffer(globalThis,window,I),duration:-1};if(b)return I==null||I.info("Supports SIMD: true (force)"),w;const D=!O,R=O||new f(T,I);try{const L=!p.isOldChrome(window,I)&&(yield R.supportsSIMD());return I==null||I.info(`Supports SIMD: ${L} (force: ${b})`),w.supportsSIMD=L,w}finally{D&&R.stop()}}),"featureCheck"),v=r((b,T,I,O)=>u(void 0,void 0,void 0,function*(){const w=new f(T,O);try{const D=yield c(b,T,O,w);if(D.supportsSIMD)try{return D.duration=yield w.measure(!0,I),O==null||O.info("SIMD timing:",D.duration),D}catch{O==null||O.warn("Failed SIMD estimation; falling back to non-SIMD."),D.supportsSIMD=!1}return D.duration=yield w.measure(!1,I),O==null||O.info("No-SIMD timing:",D.duration),D}catch(D){throw O==null||O.error("Could not feature check.",D),D}finally{w.stop()}}),"estimateAndFeatureCheck"),_=r(function(b,T,I){let O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return u(void 0,void 0,void 0,function*(){let w=b.executionPreference;const{usagePreference:D,variantPreference:R,namePreference:L,simdPreference:H,estimatorBudget:K,executionQuantaPreference:ee}=b;D==="interactivity"&&w!=="inline"&&(I==null||I.debug(`Overriding execution preference ${w} to reflect interactivity preference.`),w="inline");const q=H==="force",ae=R!=="auto",ce=w!=="auto";let Te;try{ae&&ce?Te=yield c(q,T,I):Te=yield v(q,T,K,I)}catch(ke){throw I==null||I.error("Could not load estimator.",ke),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},Te),{simdPreference:H,executionPreference:w,variantPreference:R,namePreference:L,usagePreference:D,executionQuantaPreference:ee}),O,I)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=_;const E=r(b=>{let{category:T,name:I,variant:O,simd:w,url:D}=b;return`${T}-${I}-${O}-v1${w?"_simd":""}`},"decideModel");l.decideModel=E},8200904422:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function d(e,t,n){if(!n)return fetch(e,t);const o=h(e,n),f=u(t,n);return fetch(o,f)}r(d,"fetchWithBehavior"),l.fetchWithBehavior=d;function u(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}r(u,"withRequestHeaders"),l.withRequestHeaders=u;function h(e,t){if(!(t!=null&&t.escapedQueryString))return e;const n=e.lastIndexOf("?")!==-1;return`${e}${n?"&":"?"}${t.escapedQueryString}`}r(h,"withQueryString"),l.withQueryString=h;function p(e,t){const n=Object.keys(t);if(!n.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const f of n)o.append(f,t[f]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}r(p,"addQueryParams"),l.addQueryParams=p;const m={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return d(e,m,t).then(n=>n.redirected?n.url:e)}r(a,"resolveURL"),l.resolveURL=a;function s(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}r(s,"isValidAssetGroup"),l.isValidAssetGroup=s;function i(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}r(i,"isValidRevisionID"),l.isValidRevisionID=i},8408264373:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const u=d(8200904422),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},p=r((m,a,s,i)=>{i==null||i.debug(`Loading ${a} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=u.withQueryString(m,s);return Promise.resolve(new Worker(t,{name:a}))}return u.fetchWithBehavior(m,h,s).then(t=>{if(t.ok)return t.blob().then(n=>new Worker(window.URL.createObjectURL(n)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=p},7737065561:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(c,v,_,E){function b(T){return T instanceof _?T:new _(function(I){I(T)})}return r(b,"adopt"),new(_||(_=Promise))(function(T,I){function O(R){try{D(E.next(R))}catch(L){I(L)}}r(O,"fulfilled");function w(R){try{D(E.throw(R))}catch(L){I(L)}}r(w,"rejected");function D(R){R.done?T(R.value):b(R.value).then(O,w)}r(D,"step"),D((E=E.apply(c,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=d(8408264373),p=r(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=r(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,_=v.match(/Safari\//),E=v.match(/Chrom(?:e|ium)\//);return!!(_&&!E)},"isSafari");l.isSafari=m;const a=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(c)?!1:p(c)?(g(c)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const s=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,_=arguments.length>2?arguments[2]:void 0;return u(void 0,void 0,void 0,function*(){if(!l.supportsWorker(c,_))return!1;const E=`${v.paths.workers}worker-v1.js`;try{const b=yield h.loadWorker(E,"VoiceFocusTestWorker",v,_);try{b.terminate()}catch(T){_==null||_.debug("Failed to terminate worker.",T)}return!0}catch(b){return _==null||_.info("Failed to fetch and instantiate test worker",b),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=s;const i=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!c.Worker}catch(_){return v==null||v.info("Does not support Worker",_),!1}},"supportsWorker");l.supportsWorker=i;const e=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!c.AudioWorklet&&!!c.AudioWorkletNode}catch(_){return v==null||v.info("Does not support Audio Worklet",_),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!c.WebAssembly&&(!!c.WebAssembly.compile||!!c.WebAssembly.compileStreaming)}catch(_){return v==null||v.info("Does not support WASM",_),!1}},"supportsWASM");l.supportsWASM=t;const n=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,_=arguments.length>2?arguments[2]:void 0;try{return!!c.SharedArrayBuffer&&(!!v.chrome||!!c.crossOriginIsolated)}catch{return _==null||_.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=n;const o=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var _;try{return!!(!((_=c.WebAssembly)===null||_===void 0)&&_.compileStreaming)}catch(E){return v==null||v.info("Does not support WASM streaming compilation",E),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const f=90,g=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!c.chrome)return}catch{}const v=c.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const _=g(c);return _&&_<f?(v==null||v.debug(`Chrome ${_} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},6908266307:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let d=r(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||r(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=d},3530921084:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(R,L,H,K){function ee(q){return q instanceof H?q:new H(function(ae){ae(q)})}return r(ee,"adopt"),new(H||(H=Promise))(function(q,ae){function ce(tt){try{ke(K.next(tt))}catch(At){ae(At)}}r(ce,"fulfilled");function Te(tt){try{ke(K.throw(tt))}catch(At){ae(At)}}r(Te,"rejected");function ke(tt){tt.done?q(tt.value):ee(tt.value).then(ce,Te)}r(ke,"step"),ke((K=K.apply(R,L||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=d(1897785988),p=d(8200904422),m=d(8408264373),a=d(7737065561),s=d(9772473565),i=d(3352670689),e=d(5198818184),n={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",f="https://static.sdkassets.chime.aws",g={processors:`${f}/processors/`,workers:`${f}/workers/`,wasm:`${f}/wasm/`,models:`${f}/wasm/`},S={latencyHint:0},c={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},c),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),_=Object.assign(Object.assign({},c),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),E={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:s.default}},b=r((R,L)=>{if(R!==void 0&&!p.isValidAssetGroup(R))throw new Error(`Invalid asset group ${R}`);if(L!==void 0&&!p.isValidRevisionID(L))throw new Error(`Invalid revision ID ${L}`)},"validateAssetSpec"),T=r((R,L)=>{let H;if(L.useBuiltInAGC?H=v:H=_,!R)return{audio:H};if(!R.audio)return R;if(R.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},R),{audio:R.audio===!0?H:Object.assign(Object.assign({},R.audio),H)})},"mungeConstraints"),I=r((R,L)=>`${L.models}${h.decideModel(R)}.wasm`,"urlForModel");let O=r(class _S{static isSupported(L,H){const{fetchBehavior:K,logger:ee}=H||{};if(typeof globalThis>"u")return ee==null||ee.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,ee))return ee==null||ee.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,ee))return ee==null||ee.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,ee)||ee==null||ee.debug("Browser does not support streaming WASM compilation.");const{assetGroup:q=o,revisionID:ae,paths:ce=g}=L||{};b(q,ae);const Te=ae?{revisionID:ae}:{assetGroup:q},ke=p.addQueryParams(K,Te),tt=Object.assign(Object.assign({},ke),{paths:ce});return a.supportsVoiceFocusWorker(globalThis,tt,ee)}static mungeExecutionPreference(L,H){const K=L===void 0||L==="auto";if(a.isSafari(globalThis)){if(K||L==="inline")return"inline";if(!K)throw new Error(`Unsupported execution preference ${L}`)}if(L==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,H))throw new Error(`Unsupported execution preference ${L}`);return L||"auto"}static configure(L,H){return u(this,void 0,void 0,function*(){const{fetchBehavior:K,preResolve:ee,logger:q}=H||{},{category:ae="voicefocus",name:ce="default",variant:Te="auto",assetGroup:ke=o,revisionID:tt,simd:At="detect",executionPreference:Be="auto",executionQuantaPreference:$e,usagePreference:Ze="interactivity",estimatorBudget:Je=100,paths:dt=g,thresholds:Ot}=L||{};if(q==null||q.debug("Configuring Voice Focus with spec",L),ae!==void 0&&ae!=="voicefocus")throw new Error(`Unrecognized category ${ae}`);if(ce!==void 0&&ce!=="default"&&ce!=="ns_es")throw new Error(`Unrecognized feature name ${ce}`);if(Te!==void 0&&!["auto","c100","c50","c20","c10"].includes(Te))throw new Error(`Unrecognized feature variant ${Te}`);if($e!==void 0&&![1,2,3].includes($e))throw new Error(`Unrecognized execution quanta preference ${$e}`);if(b(ke,tt),At!==void 0&&!["detect","force","disable"].includes(At))throw new Error(`Unrecognized SIMD option ${At}`);if(Be!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Be))throw new Error(`Unrecognized execution preference ${Be}`);if(Ze!==void 0&&!["quality","interactivity"].includes(Ze))throw new Error(`Unrecognized usage preference ${Ze}`);const Nt={executionPreference:this.mungeExecutionPreference(Be,q),usagePreference:Ze,executionQuantaPreference:$e,variantPreference:Te,namePreference:ce,simdPreference:At,estimatorBudget:Je},Ve=tt?{revisionID:tt}:{assetGroup:ke},He=p.addQueryParams(K,Ve),ct=Object.assign({paths:dt},He),yt=yield h.measureAndDecideExecutionApproach(Nt,ct,q,Ot);if(yt.supported===!1)return{supported:!1,reason:yt.reason};q==null||q.info("Decided execution approach",yt);const{useSIMD:it,processor:nn,variant:Xt,executionQuanta:dn}=yt,bn={category:ae||"voicefocus",name:ce||"default",variant:Xt,simd:it};if(ee){const Rn=I(bn,dt);bn.url=yield p.resolveURL(Rn,He)}return{fetchConfig:ct,model:bn,processor:nn,executionQuanta:dn,supported:!0}})}static init(L,H){let{delegate:K,preload:ee=!0,logger:q}=H;return u(this,void 0,void 0,function*(){if(L.supported===!1)throw new Error("Voice Focus not supported. Reason: "+L.reason);const{model:ae,processor:ce,fetchConfig:Te,executionQuanta:ke}=L,{simd:tt,name:At}=ae,{paths:Be}=Te;if(ce!=="voicefocus-inline-processor"&&ce!=="voicefocus-worker-postMessage-processor"&&ce!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ce}`);const $e=ae.url||I(ae,Be);q==null||q.debug(`Using model URL ${$e}.`);const Ze=`${Be.wasm}audio_buffer-v1${tt?"_simd":""}.wasm`,Je=`${Be.wasm}resampler-v1${tt?"_simd":""}.wasm`,dt=`${Be.workers}worker-v1.js`,{file:Ot,node:Nt}=E[ce],Ve=`${Be.processors}${Ot}`,He=yield m.loadWorker(dt,"VoiceFocusWorker",Te,q);if(ee){q==null||q.debug("Preloading",$e);let nn=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";He.postMessage({message:nn,preload:!0,key:"model",fetchBehavior:Te,path:$e})}const yt={processor:ce,worker:He,audioBufferURL:Ze,resamplerURL:Je,fetchBehavior:Te,modelURL:$e,delegate:K,logger:q,numberOfInputs:At==="ns_es"?2:1},it=new _S(He,Ve,Nt,yt,ke);return Promise.resolve(it)})}createNode(L,H){var K;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:ee=L.sampleRate===16e3?16e3:48e3,enabled:q=!0,agc:ae=n}=H||{},ce=H==null?void 0:H.es,Te={voiceFocusSampleRate:ee,enabled:q,sendBufferCount:10,prefill:6,agc:ae,executionQuanta:this.executionQuanta,supportFarendStream:ce},ke=p.withQueryString(this.processorURL,(K=this.nodeOptions)===null||K===void 0?void 0:K.fetchBehavior);return L.audioWorklet.addModule(ke).then(()=>new this.nodeConstructor(L,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:Te})))}applyToStream(L,H,K){return u(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const ee=H.createMediaStreamSource(L),q=yield this.applyToSourceNode(ee,H,K),ae=H.createMediaStreamDestination();return q.connect(ae),{node:q,source:ee,destination:ae,stream:ae.stream}})}applyToSourceNode(L,H,K){return u(this,void 0,void 0,function*(){const ee=yield this.createNode(H,K);return L.connect(ee),ee})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(L,H,K,ee,q){this.processorURL=H,this.nodeConstructor=K,this.nodeOptions=ee,this.executionQuanta=q,this.internal={worker:L,nodeOptions:ee,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=O;const w=r(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(R)},"createAudioContext");l.createAudioContext=w;const D=r((R,L,H)=>u(void 0,void 0,void 0,function*(){var K,ee;const{constraints:q,spec:ae,delegate:ce,preload:Te=!0,options:ke}=L,{logger:tt}=H,At=yield O.configure(ae,H);if(!At.supported)return(K=H.logger)===null||K===void 0||K.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(q);const Be=yield O.init(At,{delegate:ce,preload:Te,logger:tt}),$e=((ee=L.options)===null||ee===void 0?void 0:ee.agc)||n,Ze=yield window.navigator.mediaDevices.getUserMedia(T(q,$e));return Be.applyToStream(Ze,R,ke).then(Je=>Je.stream)}),"getAudioInput");l.getAudioInput=D},9772473565:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7737065561),p=d(6908266307),m=5*1e3;let a=r(class extends p.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return u(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,n;const o=i.data;switch(o.message){case"cpu":this.cpuWarningCount++;const f=Date.now(),g=this.cpuWarningLastTriggered||f,S=Math.abs(f-g);(!this.cpuWarningLastTriggered||S>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=f),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(n=this.logger)===null||n===void 0||n.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:n,fetchBehavior:o,logger:f,delegate:g}=e;this.logger=f,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=g,f&&f.debug("VoiceFocusInlineNode:",t),this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},5198818184:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7737065561),p=d(6908266307);let m=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(s){var i;const e=s.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(s){var i;const e=s.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(s,i){super(s,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:n,fetchBehavior:o,delegate:f}=i;this.delegate=f,this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:g,agc:S,supportFarendStream:c}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:s.sampleRate===16e3?160:480,enabled:g,agc:S,fetchBehavior:o,model:e,supportFarendStream:c});const v=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=m},3352670689:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7737065561),p=d(6908266307),m={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let s=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,a.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":if(!n.shared)throw new Error("No shared state.");this.state=new Int32Array(n.shared.state),this.port.postMessage(n);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,resamplerURL:o,worker:f,fetchBehavior:g,delegate:S}=t;this.delegate=S,this.worker=f,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:c,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:c,model:n,supportFarendStream:v});const _=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:_,key:"resampler",fetchBehavior:g,path:o})}},"VoiceFocusWorkerBufferNode");l.default=s},4861973277:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=d(3887840061),h=function(){function p(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r(p,"RawSha2561"),p.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=m.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=m[a++],s--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},p.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var i=this.bufferLength;i<u.BLOCK_SIZE;i++)a.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<u.BLOCK_SIZE-8;i++)a.setUint8(i,0);a.setUint32(u.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),a.setUint32(u.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},p.prototype.hashBuffer=function(){for(var m=this,a=m.buffer,s=m.state,i=s[0],e=s[1],t=s[2],n=s[3],o=s[4],f=s[5],g=s[6],S=s[7],c=0;c<u.BLOCK_SIZE;c++){if(c<16)this.temp[c]=(a[c*4]&255)<<24|(a[c*4+1]&255)<<16|(a[c*4+2]&255)<<8|a[c*4+3]&255;else{var v=this.temp[c-2],_=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[c-15];var E=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[c]=(_+this.temp[c-7]|0)+(E+this.temp[c-16]|0)}var b=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&f^~o&g)|0)+(S+(u.KEY[c]+this.temp[c]|0)|0)|0,T=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;S=g,g=f,f=o,o=n+b|0,n=t,t=e,e=i,i=b+T|0}s[0]+=i,s[1]+=e,s[2]+=t,s[3]+=n,s[4]+=o,s[5]+=f,s[6]+=g,s[7]+=S},p}();l.RawSha256=h},3887840061:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},8985570388:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=d(3476820828);u.__exportStar(d(1474341908),l)},1474341908:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=d(3476820828),h=d(3887840061),p=d(4861973277),m=d(7115600515),a=function(){function i(e){if(this.hash=new p.RawSha256,e){this.outer=new p.RawSha256;var t=s(e),n=new Uint8Array(h.BLOCK_SIZE);n.set(t);for(var o=0;o<h.BLOCK_SIZE;o++)t[o]^=54,n[o]^=92;this.hash.update(t),this.outer.update(n);for(var o=0;o<t.byteLength;o++)t[o]=0}}return r(i,"Sha2561"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},i}();l.Sha256=a;function s(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>h.BLOCK_SIZE){var t=new p.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(h.BLOCK_SIZE);return n.set(e),n}r(s,"bufferFromSecret")},1579245827:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=d(5771355735),h=typeof Buffer<"u"&&Buffer.from?function(m){return Buffer.from(m,"utf8")}:u.fromUtf8;function p(m){return m instanceof Uint8Array?m:typeof m=="string"?h(m):ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(m)}r(p,"convertToBuffer"),l.convertToBuffer=p},7115600515:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=d(1579245827);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var h=d(7428220362);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var p=d(4178298078);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return p.numToUint8}});var m=d(1858378061);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},7428220362:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function d(u){return typeof u=="string"?u.length===0:u.byteLength===0}r(d,"isEmptyData"),l.isEmptyData=d},4178298078:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function d(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}r(d,"numToUint8"),l.numToUint8=d},1858378061:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function d(u){if(!Uint32Array.from){for(var h=new Uint32Array(u.length),p=0;p<u.length;)h[p]=u[p],p+=1;return h}return Uint32Array.from(u)}r(d,"uint32ArrayFrom"),l.uint32ArrayFrom=d},8188990747:(B,l,d)=>{"use strict";const{Deflate:u,deflate:h,deflateRaw:p,gzip:m}=d(5591865688),{Inflate:a,inflate:s,inflateRaw:i,ungzip:e}=d(3052270576),t=d(2381927306);B.exports.Deflate=u,B.exports.deflate=h,B.exports.deflateRaw=p,B.exports.gzip=m,B.exports.Inflate=a,B.exports.inflate=s,B.exports.inflateRaw=i,B.exports.ungzip=e,B.exports.constants=t},5591865688:(B,l,d)=>{"use strict";const u=d(9512564612),h=d(3149543658),p=d(6400047507),m=d(8402435245),a=d(6693199909),s=Object.prototype.toString,{Z_NO_FLUSH:i,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:n,Z_OK:o,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:c}=d(2381927306);function v(T){this.options=h.assign({level:g,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},T||{});let I=this.options;I.raw&&I.windowBits>0?I.windowBits=-I.windowBits:I.gzip&&I.windowBits>0&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let O=u.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(O!==o)throw new Error(m[O]);if(I.header&&u.deflateSetHeader(this.strm,I.header),I.dictionary){let w;if(typeof I.dictionary=="string"?w=p.string2buf(I.dictionary):s.call(I.dictionary)==="[object ArrayBuffer]"?w=new Uint8Array(I.dictionary):w=I.dictionary,O=u.deflateSetDictionary(this.strm,w),O!==o)throw new Error(m[O]);this._dict_set=!0}}r(v,"Deflate"),v.prototype.push=function(T,I){const O=this.strm,w=this.options.chunkSize;let D,R;if(this.ended)return!1;for(I===~~I?R=I:R=I===!0?n:i,typeof T=="string"?O.input=p.string2buf(T):s.call(T)==="[object ArrayBuffer]"?O.input=new Uint8Array(T):O.input=T,O.next_in=0,O.avail_in=O.input.length;;){if(O.avail_out===0&&(O.output=new Uint8Array(w),O.next_out=0,O.avail_out=w),(R===e||R===t)&&O.avail_out<=6){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(D=u.deflate(O,R),D===f)return O.next_out>0&&this.onData(O.output.subarray(0,O.next_out)),D=u.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===o;if(O.avail_out===0){this.onData(O.output);continue}if(R>0&&O.next_out>0){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(O.avail_in===0)break}return!0},v.prototype.onData=function(T){this.chunks.push(T)},v.prototype.onEnd=function(T){T===o&&(this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function _(T,I){const O=new v(I);if(O.push(T,!0),O.err)throw O.msg||m[O.err];return O.result}r(_,"deflate");function E(T,I){return I=I||{},I.raw=!0,_(T,I)}r(E,"deflateRaw");function b(T,I){return I=I||{},I.gzip=!0,_(T,I)}r(b,"gzip"),B.exports.Deflate=v,B.exports.deflate=_,B.exports.deflateRaw=E,B.exports.gzip=b,B.exports.constants=d(2381927306)},3052270576:(B,l,d)=>{"use strict";const u=d(6525758292),h=d(3149543658),p=d(6400047507),m=d(8402435245),a=d(6693199909),s=d(1188266205),i=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:n,Z_STREAM_END:o,Z_NEED_DICT:f,Z_STREAM_ERROR:g,Z_DATA_ERROR:S,Z_MEM_ERROR:c}=d(2381927306);function v(b){this.options=h.assign({chunkSize:1024*64,windowBits:15,to:""},b||{});const T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(b&&b.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15||(T.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let I=u.inflateInit2(this.strm,T.windowBits);if(I!==n)throw new Error(m[I]);if(this.header=new s,u.inflateGetHeader(this.strm,this.header),T.dictionary&&(typeof T.dictionary=="string"?T.dictionary=p.string2buf(T.dictionary):i.call(T.dictionary)==="[object ArrayBuffer]"&&(T.dictionary=new Uint8Array(T.dictionary)),T.raw&&(I=u.inflateSetDictionary(this.strm,T.dictionary),I!==n)))throw new Error(m[I])}r(v,"Inflate"),v.prototype.push=function(b,T){const I=this.strm,O=this.options.chunkSize,w=this.options.dictionary;let D,R,L;if(this.ended)return!1;for(T===~~T?R=T:R=T===!0?t:e,i.call(b)==="[object ArrayBuffer]"?I.input=new Uint8Array(b):I.input=b,I.next_in=0,I.avail_in=I.input.length;;){for(I.avail_out===0&&(I.output=new Uint8Array(O),I.next_out=0,I.avail_out=O),D=u.inflate(I,R),D===f&&w&&(D=u.inflateSetDictionary(I,w),D===n?D=u.inflate(I,R):D===S&&(D=f));I.avail_in>0&&D===o&&I.state.wrap>0&&b[I.next_in]!==0;)u.inflateReset(I),D=u.inflate(I,R);switch(D){case g:case S:case f:case c:return this.onEnd(D),this.ended=!0,!1}if(L=I.avail_out,I.next_out&&(I.avail_out===0||D===o))if(this.options.to==="string"){let H=p.utf8border(I.output,I.next_out),K=I.next_out-H,ee=p.buf2string(I.output,H);I.next_out=K,I.avail_out=O-K,K&&I.output.set(I.output.subarray(H,H+K),0),this.onData(ee)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(!(D===n&&L===0)){if(D===o)return D=u.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,!0;if(I.avail_in===0)break}}return!0},v.prototype.onData=function(b){this.chunks.push(b)},v.prototype.onEnd=function(b){b===n&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};function _(b,T){const I=new v(T);if(I.push(b),I.err)throw I.msg||m[I.err];return I.result}r(_,"inflate");function E(b,T){return T=T||{},T.raw=!0,_(b,T)}r(E,"inflateRaw"),B.exports.Inflate=v,B.exports.inflate=_,B.exports.inflateRaw=E,B.exports.ungzip=_,B.exports.constants=d(2381927306)},3149543658:B=>{"use strict";const l=r((d,u)=>Object.prototype.hasOwnProperty.call(d,u),"_has");B.exports.assign=function(d){const u=Array.prototype.slice.call(arguments,1);for(;u.length;){const h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const p in h)l(h,p)&&(d[p]=h[p])}}return d},B.exports.flattenChunks=d=>{let u=0;for(let p=0,m=d.length;p<m;p++)u+=d[p].length;const h=new Uint8Array(u);for(let p=0,m=0,a=d.length;p<a;p++){let s=d[p];h.set(s,m),m+=s.length}return h}},6400047507:B=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const d=new Uint8Array(256);for(let h=0;h<256;h++)d[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;d[254]=d[254]=1,B.exports.string2buf=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let p,m,a,s,i,e=h.length,t=0;for(s=0;s<e;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),t+=m<128?1:m<2048?2:m<65536?3:4;for(p=new Uint8Array(t),i=0,s=0;i<t;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),m<128?p[i++]=m:m<2048?(p[i++]=192|m>>>6,p[i++]=128|m&63):m<65536?(p[i++]=224|m>>>12,p[i++]=128|m>>>6&63,p[i++]=128|m&63):(p[i++]=240|m>>>18,p[i++]=128|m>>>12&63,p[i++]=128|m>>>6&63,p[i++]=128|m&63);return p};const u=r((h,p)=>{if(p<65534&&h.subarray&&l)return String.fromCharCode.apply(null,h.length===p?h:h.subarray(0,p));let m="";for(let a=0;a<p;a++)m+=String.fromCharCode(h[a]);return m},"buf2binstring");B.exports.buf2string=(h,p)=>{const m=p||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,p));let a,s;const i=new Array(m*2);for(s=0,a=0;a<m;){let e=h[a++];if(e<128){i[s++]=e;continue}let t=d[e];if(t>4){i[s++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<m;)e=e<<6|h[a++]&63,t--;if(t>1){i[s++]=65533;continue}e<65536?i[s++]=e:(e-=65536,i[s++]=55296|e>>10&1023,i[s++]=56320|e&1023)}return u(i,s)},B.exports.utf8border=(h,p)=>{p=p||h.length,p>h.length&&(p=h.length);let m=p-1;for(;m>=0&&(h[m]&192)===128;)m--;return m<0||m===0?p:m+d[h[m]]>p?m:p}},1534271202:B=>{"use strict";const l=r((d,u,h,p)=>{let m=d&65535|0,a=d>>>16&65535|0,s=0;for(;h!==0;){s=h>2e3?2e3:h,h-=s;do m=m+u[p++]|0,a=a+m|0;while(--s);m%=65521,a%=65521}return m|a<<16|0},"adler32");B.exports=l},2381927306:B=>{"use strict";B.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},7218738144:B=>{"use strict";const l=r(()=>{let h,p=[];for(var m=0;m<256;m++){h=m;for(var a=0;a<8;a++)h=h&1?3988292384^h>>>1:h>>>1;p[m]=h}return p},"makeTable"),d=new Uint32Array(l()),u=r((h,p,m,a)=>{const s=d,i=a+m;h^=-1;for(let e=a;e<i;e++)h=h>>>8^s[(h^p[e])&255];return h^-1},"crc32");B.exports=u},9512564612:(B,l,d)=>{"use strict";const{_tr_init:u,_tr_stored_block:h,_tr_flush_block:p,_tr_tally:m,_tr_align:a}=d(9368076866),s=d(1534271202),i=d(7218738144),e=d(8402435245),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:n,Z_FULL_FLUSH:o,Z_FINISH:f,Z_BLOCK:g,Z_OK:S,Z_STREAM_END:c,Z_STREAM_ERROR:v,Z_DATA_ERROR:_,Z_BUF_ERROR:E,Z_DEFAULT_COMPRESSION:b,Z_FILTERED:T,Z_HUFFMAN_ONLY:I,Z_RLE:O,Z_FIXED:w,Z_DEFAULT_STRATEGY:D,Z_UNKNOWN:R,Z_DEFLATED:L}=d(2381927306),H=9,K=15,ee=8,q=29,ce=256+1+q,Te=30,ke=19,tt=2*ce+1,At=15,Be=3,$e=258,Ze=$e+Be+1,Je=32,dt=42,Ot=69,Nt=73,Ve=91,He=103,ct=113,yt=666,it=1,nn=2,Xt=3,dn=4,bn=3,Rn=r((F,Oe)=>(F.msg=e[Oe],Oe),"err"),Zt=r(F=>(F<<1)-(F>4?9:0),"rank"),Mn=r(F=>{let Oe=F.length;for(;--Oe>=0;)F[Oe]=0},"zero");let Jn=r((F,Oe,se)=>(Oe<<F.hash_shift^se)&F.hash_mask,"HASH_ZLIB");const zn=r(F=>{const Oe=F.state;let se=Oe.pending;se>F.avail_out&&(se=F.avail_out),se!==0&&(F.output.set(Oe.pending_buf.subarray(Oe.pending_out,Oe.pending_out+se),F.next_out),F.next_out+=se,Oe.pending_out+=se,F.total_out+=se,F.avail_out-=se,Oe.pending-=se,Oe.pending===0&&(Oe.pending_out=0))},"flush_pending"),En=r((F,Oe)=>{p(F,F.block_start>=0?F.block_start:-1,F.strstart-F.block_start,Oe),F.block_start=F.strstart,zn(F.strm)},"flush_block_only"),sn=r((F,Oe)=>{F.pending_buf[F.pending++]=Oe},"put_byte"),oi=r((F,Oe)=>{F.pending_buf[F.pending++]=Oe>>>8&255,F.pending_buf[F.pending++]=Oe&255},"putShortMSB"),rn=r((F,Oe,se,ue)=>{let X=F.avail_in;return X>ue&&(X=ue),X===0?0:(F.avail_in-=X,Oe.set(F.input.subarray(F.next_in,F.next_in+X),se),F.state.wrap===1?F.adler=s(F.adler,Oe,X,se):F.state.wrap===2&&(F.adler=i(F.adler,Oe,X,se)),F.next_in+=X,F.total_in+=X,X)},"read_buf"),cn=r((F,Oe)=>{let se=F.max_chain_length,ue=F.strstart,X,lt,Ae=F.prev_length,Ye=F.nice_match;const Ht=F.strstart>F.w_size-Ze?F.strstart-(F.w_size-Ze):0,Mt=F.window,Qn=F.w_mask,$n=F.prev,Vn=F.strstart+$e;let kn=Mt[ue+Ae-1],tn=Mt[ue+Ae];F.prev_length>=F.good_match&&(se>>=2),Ye>F.lookahead&&(Ye=F.lookahead);do if(X=Oe,!(Mt[X+Ae]!==tn||Mt[X+Ae-1]!==kn||Mt[X]!==Mt[ue]||Mt[++X]!==Mt[ue+1])){ue+=2,X++;do;while(Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&ue<Vn);if(lt=$e-(Vn-ue),ue=Vn-$e,lt>Ae){if(F.match_start=Oe,Ae=lt,lt>=Ye)break;kn=Mt[ue+Ae-1],tn=Mt[ue+Ae]}}while((Oe=$n[Oe&Qn])>Ht&&--se!==0);return Ae<=F.lookahead?Ae:F.lookahead},"longest_match"),Wt=r(F=>{const Oe=F.w_size;let se,ue,X,lt,Ae;do{if(lt=F.window_size-F.lookahead-F.strstart,F.strstart>=Oe+(Oe-Ze)){F.window.set(F.window.subarray(Oe,Oe+Oe),0),F.match_start-=Oe,F.strstart-=Oe,F.block_start-=Oe,ue=F.hash_size,se=ue;do X=F.head[--se],F.head[se]=X>=Oe?X-Oe:0;while(--ue);ue=Oe,se=ue;do X=F.prev[--se],F.prev[se]=X>=Oe?X-Oe:0;while(--ue);lt+=Oe}if(F.strm.avail_in===0)break;if(ue=rn(F.strm,F.window,F.strstart+F.lookahead,lt),F.lookahead+=ue,F.lookahead+F.insert>=Be)for(Ae=F.strstart-F.insert,F.ins_h=F.window[Ae],F.ins_h=Jn(F,F.ins_h,F.window[Ae+1]);F.insert&&(F.ins_h=Jn(F,F.ins_h,F.window[Ae+Be-1]),F.prev[Ae&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=Ae,Ae++,F.insert--,!(F.lookahead+F.insert<Be)););}while(F.lookahead<Ze&&F.strm.avail_in!==0)},"fill_window"),J=r((F,Oe)=>{let se=65535;for(se>F.pending_buf_size-5&&(se=F.pending_buf_size-5);;){if(F.lookahead<=1){if(Wt(F),F.lookahead===0&&Oe===t)return it;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;const ue=F.block_start+se;if((F.strstart===0||F.strstart>=ue)&&(F.lookahead=F.strstart-ue,F.strstart=ue,En(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-Ze&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=0,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):(F.strstart>F.block_start&&(En(F,!1),F.strm.avail_out===0),it)},"deflate_stored"),Xe=r((F,Oe)=>{let se,ue;for(;;){if(F.lookahead<Ze){if(Wt(F),F.lookahead<Ze&&Oe===t)return it;if(F.lookahead===0)break}if(se=0,F.lookahead>=Be&&(F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),se!==0&&F.strstart-se<=F.w_size-Ze&&(F.match_length=cn(F,se)),F.match_length>=Be)if(ue=m(F,F.strstart-F.match_start,F.match_length-Be),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=Be){F.match_length--;do F.strstart++,F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart;while(--F.match_length!==0);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+1]);else ue=m(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(ue&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=F.strstart<Be-1?F.strstart:Be-1,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_fast"),nt=r((F,Oe)=>{let se,ue,X;for(;;){if(F.lookahead<Ze){if(Wt(F),F.lookahead<Ze&&Oe===t)return it;if(F.lookahead===0)break}if(se=0,F.lookahead>=Be&&(F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=Be-1,se!==0&&F.prev_length<F.max_lazy_match&&F.strstart-se<=F.w_size-Ze&&(F.match_length=cn(F,se),F.match_length<=5&&(F.strategy===T||F.match_length===Be&&F.strstart-F.match_start>4096)&&(F.match_length=Be-1)),F.prev_length>=Be&&F.match_length<=F.prev_length){X=F.strstart+F.lookahead-Be,ue=m(F,F.strstart-1-F.prev_match,F.prev_length-Be),F.lookahead-=F.prev_length-1,F.prev_length-=2;do++F.strstart<=X&&(F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart);while(--F.prev_length!==0);if(F.match_available=0,F.match_length=Be-1,F.strstart++,ue&&(En(F,!1),F.strm.avail_out===0))return it}else if(F.match_available){if(ue=m(F,0,F.window[F.strstart-1]),ue&&En(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return it}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(ue=m(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<Be-1?F.strstart:Be-1,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_slow"),st=r((F,Oe)=>{let se,ue,X,lt;const Ae=F.window;for(;;){if(F.lookahead<=$e){if(Wt(F),F.lookahead<=$e&&Oe===t)return it;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=Be&&F.strstart>0&&(X=F.strstart-1,ue=Ae[X],ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X])){lt=F.strstart+$e;do;while(ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&X<lt);F.match_length=$e-(lt-X),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=Be?(se=m(F,1,F.match_length-Be),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(se=m(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),se&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=0,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_rle"),pt=r((F,Oe)=>{let se;for(;;){if(F.lookahead===0&&(Wt(F),F.lookahead===0)){if(Oe===t)return it;break}if(F.match_length=0,se=m(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,se&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=0,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_huff");function It(F,Oe,se,ue,X){this.good_length=F,this.max_lazy=Oe,this.nice_length=se,this.max_chain=ue,this.func=X}r(It,"Config");const ve=[new It(0,0,0,0,J),new It(4,4,8,4,Xe),new It(4,5,16,8,Xe),new It(4,6,32,32,Xe),new It(4,4,16,16,nt),new It(8,16,32,32,nt),new It(8,16,128,128,nt),new It(8,32,128,256,nt),new It(32,128,258,1024,nt),new It(32,258,258,4096,nt)],et=r(F=>{F.window_size=2*F.w_size,Mn(F.head),F.max_lazy_match=ve[F.level].max_lazy,F.good_match=ve[F.level].good_length,F.nice_match=ve[F.level].nice_length,F.max_chain_length=ve[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=Be-1,F.match_available=0,F.ins_h=0},"lm_init");function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(tt*2),this.dyn_dtree=new Uint16Array((2*Te+1)*2),this.bl_tree=new Uint16Array((2*ke+1)*2),Mn(this.dyn_ltree),Mn(this.dyn_dtree),Mn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(At+1),this.heap=new Uint16Array(2*ce+1),Mn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ce+1),Mn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}r(G,"DeflateState");const ne=r(F=>{if(!F||!F.state)return Rn(F,v);F.total_in=F.total_out=0,F.data_type=R;const Oe=F.state;return Oe.pending=0,Oe.pending_out=0,Oe.wrap<0&&(Oe.wrap=-Oe.wrap),Oe.status=Oe.wrap?dt:ct,F.adler=Oe.wrap===2?0:1,Oe.last_flush=t,u(Oe),S},"deflateResetKeep"),Me=r(F=>{const Oe=ne(F);return Oe===S&&et(F.state),Oe},"deflateReset"),Re=r((F,Oe)=>!F||!F.state||F.state.wrap!==2?v:(F.state.gzhead=Oe,S),"deflateSetHeader"),Ft=r((F,Oe,se,ue,X,lt)=>{if(!F)return v;let Ae=1;if(Oe===b&&(Oe=6),ue<0?(Ae=0,ue=-ue):ue>15&&(Ae=2,ue-=16),X<1||X>H||se!==L||ue<8||ue>15||Oe<0||Oe>9||lt<0||lt>w)return Rn(F,v);ue===8&&(ue=9);const Ye=new G;return F.state=Ye,Ye.strm=F,Ye.wrap=Ae,Ye.gzhead=null,Ye.w_bits=ue,Ye.w_size=1<<Ye.w_bits,Ye.w_mask=Ye.w_size-1,Ye.hash_bits=X+7,Ye.hash_size=1<<Ye.hash_bits,Ye.hash_mask=Ye.hash_size-1,Ye.hash_shift=~~((Ye.hash_bits+Be-1)/Be),Ye.window=new Uint8Array(Ye.w_size*2),Ye.head=new Uint16Array(Ye.hash_size),Ye.prev=new Uint16Array(Ye.w_size),Ye.lit_bufsize=1<<X+6,Ye.pending_buf_size=Ye.lit_bufsize*4,Ye.pending_buf=new Uint8Array(Ye.pending_buf_size),Ye.d_buf=1*Ye.lit_bufsize,Ye.l_buf=(1+2)*Ye.lit_bufsize,Ye.level=Oe,Ye.strategy=lt,Ye.method=se,Me(F)},"deflateInit2"),ot=r((F,Oe)=>Ft(F,Oe,L,K,ee,D),"deflateInit"),Tt=r((F,Oe)=>{let se,ue;if(!F||!F.state||Oe>g||Oe<0)return F?Rn(F,v):v;const X=F.state;if(!F.output||!F.input&&F.avail_in!==0||X.status===yt&&Oe!==f)return Rn(F,F.avail_out===0?E:v);X.strm=F;const lt=X.last_flush;if(X.last_flush=Oe,X.status===dt)if(X.wrap===2)F.adler=0,sn(X,31),sn(X,139),sn(X,8),X.gzhead?(sn(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),sn(X,X.gzhead.time&255),sn(X,X.gzhead.time>>8&255),sn(X,X.gzhead.time>>16&255),sn(X,X.gzhead.time>>24&255),sn(X,X.level===9?2:X.strategy>=I||X.level<2?4:0),sn(X,X.gzhead.os&255),X.gzhead.extra&&X.gzhead.extra.length&&(sn(X,X.gzhead.extra.length&255),sn(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(F.adler=i(F.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=Ot):(sn(X,0),sn(X,0),sn(X,0),sn(X,0),sn(X,0),sn(X,X.level===9?2:X.strategy>=I||X.level<2?4:0),sn(X,bn),X.status=ct);else{let Ae=L+(X.w_bits-8<<4)<<8,Ye=-1;X.strategy>=I||X.level<2?Ye=0:X.level<6?Ye=1:X.level===6?Ye=2:Ye=3,Ae|=Ye<<6,X.strstart!==0&&(Ae|=Je),Ae+=31-Ae%31,X.status=ct,oi(X,Ae),X.strstart!==0&&(oi(X,F.adler>>>16),oi(X,F.adler&65535)),F.adler=1}if(X.status===Ot)if(X.gzhead.extra){for(se=X.pending;X.gzindex<(X.gzhead.extra.length&65535)&&!(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),zn(F),se=X.pending,X.pending===X.pending_buf_size));)sn(X,X.gzhead.extra[X.gzindex]&255),X.gzindex++;X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=Nt)}else X.status=Nt;if(X.status===Nt)if(X.gzhead.name){se=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),zn(F),se=X.pending,X.pending===X.pending_buf_size)){ue=1;break}X.gzindex<X.gzhead.name.length?ue=X.gzhead.name.charCodeAt(X.gzindex++)&255:ue=0,sn(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),ue===0&&(X.gzindex=0,X.status=Ve)}else X.status=Ve;if(X.status===Ve)if(X.gzhead.comment){se=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),zn(F),se=X.pending,X.pending===X.pending_buf_size)){ue=1;break}X.gzindex<X.gzhead.comment.length?ue=X.gzhead.comment.charCodeAt(X.gzindex++)&255:ue=0,sn(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),ue===0&&(X.status=He)}else X.status=He;if(X.status===He&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&zn(F),X.pending+2<=X.pending_buf_size&&(sn(X,F.adler&255),sn(X,F.adler>>8&255),F.adler=0,X.status=ct)):X.status=ct),X.pending!==0){if(zn(F),F.avail_out===0)return X.last_flush=-1,S}else if(F.avail_in===0&&Zt(Oe)<=Zt(lt)&&Oe!==f)return Rn(F,E);if(X.status===yt&&F.avail_in!==0)return Rn(F,E);if(F.avail_in!==0||X.lookahead!==0||Oe!==t&&X.status!==yt){let Ae=X.strategy===I?pt(X,Oe):X.strategy===O?st(X,Oe):ve[X.level].func(X,Oe);if((Ae===Xt||Ae===dn)&&(X.status=yt),Ae===it||Ae===Xt)return F.avail_out===0&&(X.last_flush=-1),S;if(Ae===nn&&(Oe===n?a(X):Oe!==g&&(h(X,0,0,!1),Oe===o&&(Mn(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),zn(F),F.avail_out===0))return X.last_flush=-1,S}return Oe!==f?S:X.wrap<=0?c:(X.wrap===2?(sn(X,F.adler&255),sn(X,F.adler>>8&255),sn(X,F.adler>>16&255),sn(X,F.adler>>24&255),sn(X,F.total_in&255),sn(X,F.total_in>>8&255),sn(X,F.total_in>>16&255),sn(X,F.total_in>>24&255)):(oi(X,F.adler>>>16),oi(X,F.adler&65535)),zn(F),X.wrap>0&&(X.wrap=-X.wrap),X.pending!==0?S:c)},"deflate"),we=r(F=>{if(!F||!F.state)return v;const Oe=F.state.status;return Oe!==dt&&Oe!==Ot&&Oe!==Nt&&Oe!==Ve&&Oe!==He&&Oe!==ct&&Oe!==yt?Rn(F,v):(F.state=null,Oe===ct?Rn(F,_):S)},"deflateEnd"),Ue=r((F,Oe)=>{let se=Oe.length;if(!F||!F.state)return v;const ue=F.state,X=ue.wrap;if(X===2||X===1&&ue.status!==dt||ue.lookahead)return v;if(X===1&&(F.adler=s(F.adler,Oe,se,0)),ue.wrap=0,se>=ue.w_size){X===0&&(Mn(ue.head),ue.strstart=0,ue.block_start=0,ue.insert=0);let Ht=new Uint8Array(ue.w_size);Ht.set(Oe.subarray(se-ue.w_size,se),0),Oe=Ht,se=ue.w_size}const lt=F.avail_in,Ae=F.next_in,Ye=F.input;for(F.avail_in=se,F.next_in=0,F.input=Oe,Wt(ue);ue.lookahead>=Be;){let Ht=ue.strstart,Mt=ue.lookahead-(Be-1);do ue.ins_h=Jn(ue,ue.ins_h,ue.window[Ht+Be-1]),ue.prev[Ht&ue.w_mask]=ue.head[ue.ins_h],ue.head[ue.ins_h]=Ht,Ht++;while(--Mt);ue.strstart=Ht,ue.lookahead=Be-1,Wt(ue)}return ue.strstart+=ue.lookahead,ue.block_start=ue.strstart,ue.insert=ue.lookahead,ue.lookahead=0,ue.match_length=ue.prev_length=Be-1,ue.match_available=0,F.next_in=Ae,F.input=Ye,F.avail_in=lt,ue.wrap=X,S},"deflateSetDictionary");B.exports.deflateInit=ot,B.exports.deflateInit2=Ft,B.exports.deflateReset=Me,B.exports.deflateResetKeep=ne,B.exports.deflateSetHeader=Re,B.exports.deflate=Tt,B.exports.deflateEnd=we,B.exports.deflateSetDictionary=Ue,B.exports.deflateInfo="pako deflate (from Nodeca project)"},1188266205:B=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r(l,"GZheader"),B.exports=l},1317469038:B=>{"use strict";B.exports=r(function(h,p){let m,a,s,i,e,t,n,o,f,g,S,c,v,_,E,b,T,I,O,w,D,R,L,H;const K=h.state;m=h.next_in,L=h.input,a=m+(h.avail_in-5),s=h.next_out,H=h.output,i=s-(p-h.avail_out),e=s+(h.avail_out-257),t=K.dmax,n=K.wsize,o=K.whave,f=K.wnext,g=K.window,S=K.hold,c=K.bits,v=K.lencode,_=K.distcode,E=(1<<K.lenbits)-1,b=(1<<K.distbits)-1;e:do{c<15&&(S+=L[m++]<<c,c+=8,S+=L[m++]<<c,c+=8),T=v[S&E];t:for(;;){if(I=T>>>24,S>>>=I,c-=I,I=T>>>16&255,I===0)H[s++]=T&65535;else if(I&16){O=T&65535,I&=15,I&&(c<I&&(S+=L[m++]<<c,c+=8),O+=S&(1<<I)-1,S>>>=I,c-=I),c<15&&(S+=L[m++]<<c,c+=8,S+=L[m++]<<c,c+=8),T=_[S&b];n:for(;;){if(I=T>>>24,S>>>=I,c-=I,I=T>>>16&255,I&16){if(w=T&65535,I&=15,c<I&&(S+=L[m++]<<c,c+=8,c<I&&(S+=L[m++]<<c,c+=8)),w+=S&(1<<I)-1,w>t){h.msg="invalid distance too far back",K.mode=30;break e}if(S>>>=I,c-=I,I=s-i,w>I){if(I=w-I,I>o&&K.sane){h.msg="invalid distance too far back",K.mode=30;break e}if(D=0,R=g,f===0){if(D+=n-I,I<O){O-=I;do H[s++]=g[D++];while(--I);D=s-w,R=H}}else if(f<I){if(D+=n+f-I,I-=f,I<O){O-=I;do H[s++]=g[D++];while(--I);if(D=0,f<O){I=f,O-=I;do H[s++]=g[D++];while(--I);D=s-w,R=H}}}else if(D+=f-I,I<O){O-=I;do H[s++]=g[D++];while(--I);D=s-w,R=H}for(;O>2;)H[s++]=R[D++],H[s++]=R[D++],H[s++]=R[D++],O-=3;O&&(H[s++]=R[D++],O>1&&(H[s++]=R[D++]))}else{D=s-w;do H[s++]=H[D++],H[s++]=H[D++],H[s++]=H[D++],O-=3;while(O>2);O&&(H[s++]=H[D++],O>1&&(H[s++]=H[D++]))}}else if(I&64){h.msg="invalid distance code",K.mode=30;break e}else{T=_[(T&65535)+(S&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){K.mode=12;break e}else{h.msg="invalid literal/length code",K.mode=30;break e}else{T=v[(T&65535)+(S&(1<<I)-1)];continue t}break}}while(m<a&&s<e);O=c>>3,m-=O,c-=O<<3,S&=(1<<c)-1,h.next_in=m,h.next_out=s,h.avail_in=m<a?5+(a-m):5-(m-a),h.avail_out=s<e?257+(e-s):257-(s-e),K.hold=S,K.bits=c},"inflate_fast")},6525758292:(B,l,d)=>{"use strict";const u=d(1534271202),h=d(7218738144),p=d(1317469038),m=d(2382788065),a=0,s=1,i=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:n,Z_OK:o,Z_STREAM_END:f,Z_NEED_DICT:g,Z_STREAM_ERROR:S,Z_DATA_ERROR:c,Z_MEM_ERROR:v,Z_BUF_ERROR:_,Z_DEFLATED:E}=d(2381927306),b=1,T=2,I=3,O=4,w=5,D=6,R=7,L=8,H=9,K=10,ee=11,q=12,ae=13,ce=14,Te=15,ke=16,tt=17,At=18,Be=19,$e=20,Ze=21,Je=22,dt=23,Ot=24,Nt=25,Ve=26,He=27,ct=28,yt=29,it=30,nn=31,Xt=32,dn=852,bn=592,Zt=15,Mn=r(ve=>(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24),"zswap32");function Wi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}r(Wi,"InflateState");const Jn=r(ve=>{if(!ve||!ve.state)return S;const et=ve.state;return ve.total_in=ve.total_out=et.total=0,ve.msg="",et.wrap&&(ve.adler=et.wrap&1),et.mode=b,et.last=0,et.havedict=0,et.dmax=32768,et.head=null,et.hold=0,et.bits=0,et.lencode=et.lendyn=new Int32Array(dn),et.distcode=et.distdyn=new Int32Array(bn),et.sane=1,et.back=-1,o},"inflateResetKeep"),zn=r(ve=>{if(!ve||!ve.state)return S;const et=ve.state;return et.wsize=0,et.whave=0,et.wnext=0,Jn(ve)},"inflateReset"),En=r((ve,et)=>{let G;if(!ve||!ve.state)return S;const ne=ve.state;return et<0?(G=0,et=-et):(G=(et>>4)+1,et<48&&(et&=15)),et&&(et<8||et>15)?S:(ne.window!==null&&ne.wbits!==et&&(ne.window=null),ne.wrap=G,ne.wbits=et,zn(ve))},"inflateReset2"),sn=r((ve,et)=>{if(!ve)return S;const G=new Wi;ve.state=G,G.window=null;const ne=En(ve,et);return ne!==o&&(ve.state=null),ne},"inflateInit2"),oi=r(ve=>sn(ve,Zt),"inflateInit");let rn=!0,cn,Wt;const J=r(ve=>{if(rn){cn=new Int32Array(512),Wt=new Int32Array(32);let et=0;for(;et<144;)ve.lens[et++]=8;for(;et<256;)ve.lens[et++]=9;for(;et<280;)ve.lens[et++]=7;for(;et<288;)ve.lens[et++]=8;for(m(s,ve.lens,0,288,cn,0,ve.work,{bits:9}),et=0;et<32;)ve.lens[et++]=5;m(i,ve.lens,0,32,Wt,0,ve.work,{bits:5}),rn=!1}ve.lencode=cn,ve.lenbits=9,ve.distcode=Wt,ve.distbits=5},"fixedtables"),Xe=r((ve,et,G,ne)=>{let Me;const Re=ve.state;return Re.window===null&&(Re.wsize=1<<Re.wbits,Re.wnext=0,Re.whave=0,Re.window=new Uint8Array(Re.wsize)),ne>=Re.wsize?(Re.window.set(et.subarray(G-Re.wsize,G),0),Re.wnext=0,Re.whave=Re.wsize):(Me=Re.wsize-Re.wnext,Me>ne&&(Me=ne),Re.window.set(et.subarray(G-ne,G-ne+Me),Re.wnext),ne-=Me,ne?(Re.window.set(et.subarray(G-ne,G),0),Re.wnext=ne,Re.whave=Re.wsize):(Re.wnext+=Me,Re.wnext===Re.wsize&&(Re.wnext=0),Re.whave<Re.wsize&&(Re.whave+=Me))),0},"updatewindow"),nt=r((ve,et)=>{let G,ne,Me,Re,Ft,ot,Tt,we,Ue,F,Oe,se,ue,X,lt=0,Ae,Ye,Ht,Mt,Qn,$n,Vn,kn;const tn=new Uint8Array(4);let Gn,Si;const nr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return S;G=ve.state,G.mode===q&&(G.mode=ae),Ft=ve.next_out,Me=ve.output,Tt=ve.avail_out,Re=ve.next_in,ne=ve.input,ot=ve.avail_in,we=G.hold,Ue=G.bits,F=ot,Oe=Tt,kn=o;e:for(;;)switch(G.mode){case b:if(G.wrap===0){G.mode=ae;break}for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(G.wrap&2&&we===35615){G.check=0,tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0),we=0,Ue=0,G.mode=T;break}if(G.flags=0,G.head&&(G.head.done=!1),!(G.wrap&1)||(((we&255)<<8)+(we>>8))%31){ve.msg="incorrect header check",G.mode=it;break}if((we&15)!==E){ve.msg="unknown compression method",G.mode=it;break}if(we>>>=4,Ue-=4,Vn=(we&15)+8,G.wbits===0)G.wbits=Vn;else if(Vn>G.wbits){ve.msg="invalid window size",G.mode=it;break}G.dmax=1<<G.wbits,ve.adler=G.check=1,G.mode=we&512?K:q,we=0,Ue=0;break;case T:for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(G.flags=we,(G.flags&255)!==E){ve.msg="unknown compression method",G.mode=it;break}if(G.flags&57344){ve.msg="unknown header flags set",G.mode=it;break}G.head&&(G.head.text=we>>8&1),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0)),we=0,Ue=0,G.mode=I;case I:for(;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.head&&(G.head.time=we),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,tn[2]=we>>>16&255,tn[3]=we>>>24&255,G.check=h(G.check,tn,4,0)),we=0,Ue=0,G.mode=O;case O:for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.head&&(G.head.xflags=we&255,G.head.os=we>>8),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0)),we=0,Ue=0,G.mode=w;case w:if(G.flags&1024){for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.length=we,G.head&&(G.head.extra_len=we),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0)),we=0,Ue=0}else G.head&&(G.head.extra=null);G.mode=D;case D:if(G.flags&1024&&(se=G.length,se>ot&&(se=ot),se&&(G.head&&(Vn=G.head.extra_len-G.length,G.head.extra||(G.head.extra=new Uint8Array(G.head.extra_len)),G.head.extra.set(ne.subarray(Re,Re+se),Vn)),G.flags&512&&(G.check=h(G.check,ne,se,Re)),ot-=se,Re+=se,G.length-=se),G.length))break e;G.length=0,G.mode=R;case R:if(G.flags&2048){if(ot===0)break e;se=0;do Vn=ne[Re+se++],G.head&&Vn&&G.length<65536&&(G.head.name+=String.fromCharCode(Vn));while(Vn&&se<ot);if(G.flags&512&&(G.check=h(G.check,ne,se,Re)),ot-=se,Re+=se,Vn)break e}else G.head&&(G.head.name=null);G.length=0,G.mode=L;case L:if(G.flags&4096){if(ot===0)break e;se=0;do Vn=ne[Re+se++],G.head&&Vn&&G.length<65536&&(G.head.comment+=String.fromCharCode(Vn));while(Vn&&se<ot);if(G.flags&512&&(G.check=h(G.check,ne,se,Re)),ot-=se,Re+=se,Vn)break e}else G.head&&(G.head.comment=null);G.mode=H;case H:if(G.flags&512){for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(we!==(G.check&65535)){ve.msg="header crc mismatch",G.mode=it;break}we=0,Ue=0}G.head&&(G.head.hcrc=G.flags>>9&1,G.head.done=!0),ve.adler=G.check=0,G.mode=q;break;case K:for(;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}ve.adler=G.check=Mn(we),we=0,Ue=0,G.mode=ee;case ee:if(G.havedict===0)return ve.next_out=Ft,ve.avail_out=Tt,ve.next_in=Re,ve.avail_in=ot,G.hold=we,G.bits=Ue,g;ve.adler=G.check=1,G.mode=q;case q:if(et===t||et===n)break e;case ae:if(G.last){we>>>=Ue&7,Ue-=Ue&7,G.mode=He;break}for(;Ue<3;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}switch(G.last=we&1,we>>>=1,Ue-=1,we&3){case 0:G.mode=ce;break;case 1:if(J(G),G.mode=$e,et===n){we>>>=2,Ue-=2;break e}break;case 2:G.mode=tt;break;case 3:ve.msg="invalid block type",G.mode=it}we>>>=2,Ue-=2;break;case ce:for(we>>>=Ue&7,Ue-=Ue&7;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if((we&65535)!==(we>>>16^65535)){ve.msg="invalid stored block lengths",G.mode=it;break}if(G.length=we&65535,we=0,Ue=0,G.mode=Te,et===n)break e;case Te:G.mode=ke;case ke:if(se=G.length,se){if(se>ot&&(se=ot),se>Tt&&(se=Tt),se===0)break e;Me.set(ne.subarray(Re,Re+se),Ft),ot-=se,Re+=se,Tt-=se,Ft+=se,G.length-=se;break}G.mode=q;break;case tt:for(;Ue<14;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(G.nlen=(we&31)+257,we>>>=5,Ue-=5,G.ndist=(we&31)+1,we>>>=5,Ue-=5,G.ncode=(we&15)+4,we>>>=4,Ue-=4,G.nlen>286||G.ndist>30){ve.msg="too many length or distance symbols",G.mode=it;break}G.have=0,G.mode=At;case At:for(;G.have<G.ncode;){for(;Ue<3;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.lens[nr[G.have++]]=we&7,we>>>=3,Ue-=3}for(;G.have<19;)G.lens[nr[G.have++]]=0;if(G.lencode=G.lendyn,G.lenbits=7,Gn={bits:G.lenbits},kn=m(a,G.lens,0,19,G.lencode,0,G.work,Gn),G.lenbits=Gn.bits,kn){ve.msg="invalid code lengths set",G.mode=it;break}G.have=0,G.mode=Be;case Be:for(;G.have<G.nlen+G.ndist;){for(;lt=G.lencode[we&(1<<G.lenbits)-1],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(Ht<16)we>>>=Ae,Ue-=Ae,G.lens[G.have++]=Ht;else{if(Ht===16){for(Si=Ae+2;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(we>>>=Ae,Ue-=Ae,G.have===0){ve.msg="invalid bit length repeat",G.mode=it;break}Vn=G.lens[G.have-1],se=3+(we&3),we>>>=2,Ue-=2}else if(Ht===17){for(Si=Ae+3;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Ae,Ue-=Ae,Vn=0,se=3+(we&7),we>>>=3,Ue-=3}else{for(Si=Ae+7;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Ae,Ue-=Ae,Vn=0,se=11+(we&127),we>>>=7,Ue-=7}if(G.have+se>G.nlen+G.ndist){ve.msg="invalid bit length repeat",G.mode=it;break}for(;se--;)G.lens[G.have++]=Vn}}if(G.mode===it)break;if(G.lens[256]===0){ve.msg="invalid code -- missing end-of-block",G.mode=it;break}if(G.lenbits=9,Gn={bits:G.lenbits},kn=m(s,G.lens,0,G.nlen,G.lencode,0,G.work,Gn),G.lenbits=Gn.bits,kn){ve.msg="invalid literal/lengths set",G.mode=it;break}if(G.distbits=6,G.distcode=G.distdyn,Gn={bits:G.distbits},kn=m(i,G.lens,G.nlen,G.ndist,G.distcode,0,G.work,Gn),G.distbits=Gn.bits,kn){ve.msg="invalid distances set",G.mode=it;break}if(G.mode=$e,et===n)break e;case $e:G.mode=Ze;case Ze:if(ot>=6&&Tt>=258){ve.next_out=Ft,ve.avail_out=Tt,ve.next_in=Re,ve.avail_in=ot,G.hold=we,G.bits=Ue,p(ve,Oe),Ft=ve.next_out,Me=ve.output,Tt=ve.avail_out,Re=ve.next_in,ne=ve.input,ot=ve.avail_in,we=G.hold,Ue=G.bits,G.mode===q&&(G.back=-1);break}for(G.back=0;lt=G.lencode[we&(1<<G.lenbits)-1],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(Ye&&!(Ye&240)){for(Mt=Ae,Qn=Ye,$n=Ht;lt=G.lencode[$n+((we&(1<<Mt+Qn)-1)>>Mt)],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Mt+Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Mt,Ue-=Mt,G.back+=Mt}if(we>>>=Ae,Ue-=Ae,G.back+=Ae,G.length=Ht,Ye===0){G.mode=Ve;break}if(Ye&32){G.back=-1,G.mode=q;break}if(Ye&64){ve.msg="invalid literal/length code",G.mode=it;break}G.extra=Ye&15,G.mode=Je;case Je:if(G.extra){for(Si=G.extra;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.length+=we&(1<<G.extra)-1,we>>>=G.extra,Ue-=G.extra,G.back+=G.extra}G.was=G.length,G.mode=dt;case dt:for(;lt=G.distcode[we&(1<<G.distbits)-1],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(!(Ye&240)){for(Mt=Ae,Qn=Ye,$n=Ht;lt=G.distcode[$n+((we&(1<<Mt+Qn)-1)>>Mt)],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Mt+Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Mt,Ue-=Mt,G.back+=Mt}if(we>>>=Ae,Ue-=Ae,G.back+=Ae,Ye&64){ve.msg="invalid distance code",G.mode=it;break}G.offset=Ht,G.extra=Ye&15,G.mode=Ot;case Ot:if(G.extra){for(Si=G.extra;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.offset+=we&(1<<G.extra)-1,we>>>=G.extra,Ue-=G.extra,G.back+=G.extra}if(G.offset>G.dmax){ve.msg="invalid distance too far back",G.mode=it;break}G.mode=Nt;case Nt:if(Tt===0)break e;if(se=Oe-Tt,G.offset>se){if(se=G.offset-se,se>G.whave&&G.sane){ve.msg="invalid distance too far back",G.mode=it;break}se>G.wnext?(se-=G.wnext,ue=G.wsize-se):ue=G.wnext-se,se>G.length&&(se=G.length),X=G.window}else X=Me,ue=Ft-G.offset,se=G.length;se>Tt&&(se=Tt),Tt-=se,G.length-=se;do Me[Ft++]=X[ue++];while(--se);G.length===0&&(G.mode=Ze);break;case Ve:if(Tt===0)break e;Me[Ft++]=G.length,Tt--,G.mode=Ze;break;case He:if(G.wrap){for(;Ue<32;){if(ot===0)break e;ot--,we|=ne[Re++]<<Ue,Ue+=8}if(Oe-=Tt,ve.total_out+=Oe,G.total+=Oe,Oe&&(ve.adler=G.check=G.flags?h(G.check,Me,Oe,Ft-Oe):u(G.check,Me,Oe,Ft-Oe)),Oe=Tt,(G.flags?we:Mn(we))!==G.check){ve.msg="incorrect data check",G.mode=it;break}we=0,Ue=0}G.mode=ct;case ct:if(G.wrap&&G.flags){for(;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(we!==(G.total&4294967295)){ve.msg="incorrect length check",G.mode=it;break}we=0,Ue=0}G.mode=yt;case yt:kn=f;break e;case it:kn=c;break e;case nn:return v;case Xt:default:return S}return ve.next_out=Ft,ve.avail_out=Tt,ve.next_in=Re,ve.avail_in=ot,G.hold=we,G.bits=Ue,(G.wsize||Oe!==ve.avail_out&&G.mode<it&&(G.mode<He||et!==e))&&Xe(ve,ve.output,ve.next_out,Oe-ve.avail_out)?(G.mode=nn,v):(F-=ve.avail_in,Oe-=ve.avail_out,ve.total_in+=F,ve.total_out+=Oe,G.total+=Oe,G.wrap&&Oe&&(ve.adler=G.check=G.flags?h(G.check,Me,Oe,ve.next_out-Oe):u(G.check,Me,Oe,ve.next_out-Oe)),ve.data_type=G.bits+(G.last?64:0)+(G.mode===q?128:0)+(G.mode===$e||G.mode===Te?256:0),(F===0&&Oe===0||et===e)&&kn===o&&(kn=_),kn)},"inflate"),st=r(ve=>{if(!ve||!ve.state)return S;let et=ve.state;return et.window&&(et.window=null),ve.state=null,o},"inflateEnd"),pt=r((ve,et)=>{if(!ve||!ve.state)return S;const G=ve.state;return G.wrap&2?(G.head=et,et.done=!1,o):S},"inflateGetHeader"),It=r((ve,et)=>{const G=et.length;let ne,Me,Re;return!ve||!ve.state||(ne=ve.state,ne.wrap!==0&&ne.mode!==ee)?S:ne.mode===ee&&(Me=1,Me=u(Me,et,G,0),Me!==ne.check)?c:(Re=Xe(ve,et,G,G),Re?(ne.mode=nn,v):(ne.havedict=1,o))},"inflateSetDictionary");B.exports.inflateReset=zn,B.exports.inflateReset2=En,B.exports.inflateResetKeep=Jn,B.exports.inflateInit=oi,B.exports.inflateInit2=sn,B.exports.inflate=nt,B.exports.inflateEnd=st,B.exports.inflateGetHeader=pt,B.exports.inflateSetDictionary=It,B.exports.inflateInfo="pako inflate (from Nodeca project)"},2382788065:B=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=r((n,o,f,g,S,c,v,_)=>{const E=_.bits;let b=0,T=0,I=0,O=0,w=0,D=0,R=0,L=0,H=0,K=0,ee,q,ae,ce,Te,ke=null,tt=0,At;const Be=new Uint16Array(15+1),$e=new Uint16Array(15+1);let Ze=null,Je=0,dt,Ot,Nt;for(b=0;b<=15;b++)Be[b]=0;for(T=0;T<g;T++)Be[o[f+T]]++;for(w=E,O=15;O>=1&&Be[O]===0;O--);if(w>O&&(w=O),O===0)return S[c++]=1<<24|64<<16|0,S[c++]=1<<24|64<<16|0,_.bits=1,0;for(I=1;I<O&&Be[I]===0;I++);for(w<I&&(w=I),L=1,b=1;b<=15;b++)if(L<<=1,L-=Be[b],L<0)return-1;if(L>0&&(n===0||O!==1))return-1;for($e[1]=0,b=1;b<15;b++)$e[b+1]=$e[b]+Be[b];for(T=0;T<g;T++)o[f+T]!==0&&(v[$e[o[f+T]]++]=T);if(n===0?(ke=Ze=v,At=19):n===1?(ke=a,tt-=257,Ze=s,Je-=257,At=256):(ke=i,Ze=e,At=-1),K=0,T=0,b=I,Te=c,D=w,R=0,ae=-1,H=1<<w,ce=H-1,n===1&&H>852||n===2&&H>592)return 1;for(;;){dt=b-R,v[T]<At?(Ot=0,Nt=v[T]):v[T]>At?(Ot=Ze[Je+v[T]],Nt=ke[tt+v[T]]):(Ot=32+64,Nt=0),ee=1<<b-R,q=1<<D,I=q;do q-=ee,S[Te+(K>>R)+q]=dt<<24|Ot<<16|Nt|0;while(q!==0);for(ee=1<<b-1;K&ee;)ee>>=1;if(ee!==0?(K&=ee-1,K+=ee):K=0,T++,--Be[b]===0){if(b===O)break;b=o[f+v[T]]}if(b>w&&(K&ce)!==ae){for(R===0&&(R=w),Te+=I,D=b-R,L=1<<D;D+R<O&&(L-=Be[D+R],!(L<=0));)D++,L<<=1;if(H+=1<<D,n===1&&H>852||n===2&&H>592)return 1;ae=K&ce,S[ae]=w<<24|D<<16|Te-c|0}}return K!==0&&(S[Te+K]=b-R<<24|64<<16|0),_.bits=w,0},"inflate_table");B.exports=t},8402435245:B=>{"use strict";B.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},9368076866:B=>{"use strict";function p(J){let Xe=J.length;for(;--Xe>=0;)J[Xe]=0}r(p,"zero");const m=0,a=1,s=2,i=3,e=258,t=29,n=256,o=n+1+t,f=30,g=19,S=2*o+1,c=15,v=16,_=7,E=256,b=16,T=17,I=18,O=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L=512,H=new Array((o+2)*2);p(H);const K=new Array(f*2);p(K);const ee=new Array(L);p(ee);const q=new Array(e-i+1);p(q);const ae=new Array(t);p(ae);const ce=new Array(f);p(ce);function Te(J,Xe,nt,st,pt){this.static_tree=J,this.extra_bits=Xe,this.extra_base=nt,this.elems=st,this.max_length=pt,this.has_stree=J&&J.length}r(Te,"StaticTreeDesc");let ke,tt,At;function Be(J,Xe){this.dyn_tree=J,this.max_code=0,this.stat_desc=Xe}r(Be,"TreeDesc");const $e=r(J=>J<256?ee[J]:ee[256+(J>>>7)],"d_code"),Ze=r((J,Xe)=>{J.pending_buf[J.pending++]=Xe&255,J.pending_buf[J.pending++]=Xe>>>8&255},"put_short"),Je=r((J,Xe,nt)=>{J.bi_valid>v-nt?(J.bi_buf|=Xe<<J.bi_valid&65535,Ze(J,J.bi_buf),J.bi_buf=Xe>>v-J.bi_valid,J.bi_valid+=nt-v):(J.bi_buf|=Xe<<J.bi_valid&65535,J.bi_valid+=nt)},"send_bits"),dt=r((J,Xe,nt)=>{Je(J,nt[Xe*2],nt[Xe*2+1])},"send_code"),Ot=r((J,Xe)=>{let nt=0;do nt|=J&1,J>>>=1,nt<<=1;while(--Xe>0);return nt>>>1},"bi_reverse"),Nt=r(J=>{J.bi_valid===16?(Ze(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8)},"bi_flush"),Ve=r((J,Xe)=>{const nt=Xe.dyn_tree,st=Xe.max_code,pt=Xe.stat_desc.static_tree,It=Xe.stat_desc.has_stree,ve=Xe.stat_desc.extra_bits,et=Xe.stat_desc.extra_base,G=Xe.stat_desc.max_length;let ne,Me,Re,Ft,ot,Tt,we=0;for(Ft=0;Ft<=c;Ft++)J.bl_count[Ft]=0;for(nt[J.heap[J.heap_max]*2+1]=0,ne=J.heap_max+1;ne<S;ne++)Me=J.heap[ne],Ft=nt[nt[Me*2+1]*2+1]+1,Ft>G&&(Ft=G,we++),nt[Me*2+1]=Ft,!(Me>st)&&(J.bl_count[Ft]++,ot=0,Me>=et&&(ot=ve[Me-et]),Tt=nt[Me*2],J.opt_len+=Tt*(Ft+ot),It&&(J.static_len+=Tt*(pt[Me*2+1]+ot)));if(we!==0){do{for(Ft=G-1;J.bl_count[Ft]===0;)Ft--;J.bl_count[Ft]--,J.bl_count[Ft+1]+=2,J.bl_count[G]--,we-=2}while(we>0);for(Ft=G;Ft!==0;Ft--)for(Me=J.bl_count[Ft];Me!==0;)Re=J.heap[--ne],!(Re>st)&&(nt[Re*2+1]!==Ft&&(J.opt_len+=(Ft-nt[Re*2+1])*nt[Re*2],nt[Re*2+1]=Ft),Me--)}},"gen_bitlen"),He=r((J,Xe,nt)=>{const st=new Array(c+1);let pt=0,It,ve;for(It=1;It<=c;It++)st[It]=pt=pt+nt[It-1]<<1;for(ve=0;ve<=Xe;ve++){let et=J[ve*2+1];et!==0&&(J[ve*2]=Ot(st[et]++,et))}},"gen_codes"),ct=r(()=>{let J,Xe,nt,st,pt;const It=new Array(c+1);for(nt=0,st=0;st<t-1;st++)for(ae[st]=nt,J=0;J<1<<O[st];J++)q[nt++]=st;for(q[nt-1]=st,pt=0,st=0;st<16;st++)for(ce[st]=pt,J=0;J<1<<w[st];J++)ee[pt++]=st;for(pt>>=7;st<f;st++)for(ce[st]=pt<<7,J=0;J<1<<w[st]-7;J++)ee[256+pt++]=st;for(Xe=0;Xe<=c;Xe++)It[Xe]=0;for(J=0;J<=143;)H[J*2+1]=8,J++,It[8]++;for(;J<=255;)H[J*2+1]=9,J++,It[9]++;for(;J<=279;)H[J*2+1]=7,J++,It[7]++;for(;J<=287;)H[J*2+1]=8,J++,It[8]++;for(He(H,o+1,It),J=0;J<f;J++)K[J*2+1]=5,K[J*2]=Ot(J,5);ke=new Te(H,O,n+1,o,c),tt=new Te(K,w,0,f,c),At=new Te(new Array(0),D,0,g,_)},"tr_static_init"),yt=r(J=>{let Xe;for(Xe=0;Xe<o;Xe++)J.dyn_ltree[Xe*2]=0;for(Xe=0;Xe<f;Xe++)J.dyn_dtree[Xe*2]=0;for(Xe=0;Xe<g;Xe++)J.bl_tree[Xe*2]=0;J.dyn_ltree[E*2]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0},"init_block"),it=r(J=>{J.bi_valid>8?Ze(J,J.bi_buf):J.bi_valid>0&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0},"bi_windup"),nn=r((J,Xe,nt,st)=>{it(J),st&&(Ze(J,nt),Ze(J,~nt)),J.pending_buf.set(J.window.subarray(Xe,Xe+nt),J.pending),J.pending+=nt},"copy_block"),Xt=r((J,Xe,nt,st)=>{const pt=Xe*2,It=nt*2;return J[pt]<J[It]||J[pt]===J[It]&&st[Xe]<=st[nt]},"smaller"),dn=r((J,Xe,nt)=>{const st=J.heap[nt];let pt=nt<<1;for(;pt<=J.heap_len&&(pt<J.heap_len&&Xt(Xe,J.heap[pt+1],J.heap[pt],J.depth)&&pt++,!Xt(Xe,st,J.heap[pt],J.depth));)J.heap[nt]=J.heap[pt],nt=pt,pt<<=1;J.heap[nt]=st},"pqdownheap"),bn=r((J,Xe,nt)=>{let st,pt,It=0,ve,et;if(J.last_lit!==0)do st=J.pending_buf[J.d_buf+It*2]<<8|J.pending_buf[J.d_buf+It*2+1],pt=J.pending_buf[J.l_buf+It],It++,st===0?dt(J,pt,Xe):(ve=q[pt],dt(J,ve+n+1,Xe),et=O[ve],et!==0&&(pt-=ae[ve],Je(J,pt,et)),st--,ve=$e(st),dt(J,ve,nt),et=w[ve],et!==0&&(st-=ce[ve],Je(J,st,et)));while(It<J.last_lit);dt(J,E,Xe)},"compress_block"),Rn=r((J,Xe)=>{const nt=Xe.dyn_tree,st=Xe.stat_desc.static_tree,pt=Xe.stat_desc.has_stree,It=Xe.stat_desc.elems;let ve,et,G=-1,ne;for(J.heap_len=0,J.heap_max=S,ve=0;ve<It;ve++)nt[ve*2]!==0?(J.heap[++J.heap_len]=G=ve,J.depth[ve]=0):nt[ve*2+1]=0;for(;J.heap_len<2;)ne=J.heap[++J.heap_len]=G<2?++G:0,nt[ne*2]=1,J.depth[ne]=0,J.opt_len--,pt&&(J.static_len-=st[ne*2+1]);for(Xe.max_code=G,ve=J.heap_len>>1;ve>=1;ve--)dn(J,nt,ve);ne=It;do ve=J.heap[1],J.heap[1]=J.heap[J.heap_len--],dn(J,nt,1),et=J.heap[1],J.heap[--J.heap_max]=ve,J.heap[--J.heap_max]=et,nt[ne*2]=nt[ve*2]+nt[et*2],J.depth[ne]=(J.depth[ve]>=J.depth[et]?J.depth[ve]:J.depth[et])+1,nt[ve*2+1]=nt[et*2+1]=ne,J.heap[1]=ne++,dn(J,nt,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],Ve(J,Xe),He(nt,G,J.bl_count)},"build_tree"),Zt=r((J,Xe,nt)=>{let st,pt=-1,It,ve=Xe[0*2+1],et=0,G=7,ne=4;for(ve===0&&(G=138,ne=3),Xe[(nt+1)*2+1]=65535,st=0;st<=nt;st++)It=ve,ve=Xe[(st+1)*2+1],!(++et<G&&It===ve)&&(et<ne?J.bl_tree[It*2]+=et:It!==0?(It!==pt&&J.bl_tree[It*2]++,J.bl_tree[b*2]++):et<=10?J.bl_tree[T*2]++:J.bl_tree[I*2]++,et=0,pt=It,ve===0?(G=138,ne=3):It===ve?(G=6,ne=3):(G=7,ne=4))},"scan_tree"),Mn=r((J,Xe,nt)=>{let st,pt=-1,It,ve=Xe[0*2+1],et=0,G=7,ne=4;for(ve===0&&(G=138,ne=3),st=0;st<=nt;st++)if(It=ve,ve=Xe[(st+1)*2+1],!(++et<G&&It===ve)){if(et<ne)do dt(J,It,J.bl_tree);while(--et!==0);else It!==0?(It!==pt&&(dt(J,It,J.bl_tree),et--),dt(J,b,J.bl_tree),Je(J,et-3,2)):et<=10?(dt(J,T,J.bl_tree),Je(J,et-3,3)):(dt(J,I,J.bl_tree),Je(J,et-11,7));et=0,pt=It,ve===0?(G=138,ne=3):It===ve?(G=6,ne=3):(G=7,ne=4)}},"send_tree"),Wi=r(J=>{let Xe;for(Zt(J,J.dyn_ltree,J.l_desc.max_code),Zt(J,J.dyn_dtree,J.d_desc.max_code),Rn(J,J.bl_desc),Xe=g-1;Xe>=3&&J.bl_tree[R[Xe]*2+1]===0;Xe--);return J.opt_len+=3*(Xe+1)+5+5+4,Xe},"build_bl_tree"),Jn=r((J,Xe,nt,st)=>{let pt;for(Je(J,Xe-257,5),Je(J,nt-1,5),Je(J,st-4,4),pt=0;pt<st;pt++)Je(J,J.bl_tree[R[pt]*2+1],3);Mn(J,J.dyn_ltree,Xe-1),Mn(J,J.dyn_dtree,nt-1)},"send_all_trees"),zn=r(J=>{let Xe=4093624447,nt;for(nt=0;nt<=31;nt++,Xe>>>=1)if(Xe&1&&J.dyn_ltree[nt*2]!==0)return 0;if(J.dyn_ltree[9*2]!==0||J.dyn_ltree[10*2]!==0||J.dyn_ltree[13*2]!==0)return 1;for(nt=32;nt<n;nt++)if(J.dyn_ltree[nt*2]!==0)return 1;return 0},"detect_data_type");let En=!1;const sn=r(J=>{En||(ct(),En=!0),J.l_desc=new Be(J.dyn_ltree,ke),J.d_desc=new Be(J.dyn_dtree,tt),J.bl_desc=new Be(J.bl_tree,At),J.bi_buf=0,J.bi_valid=0,yt(J)},"_tr_init"),oi=r((J,Xe,nt,st)=>{Je(J,(m<<1)+(st?1:0),3),nn(J,Xe,nt,!0)},"_tr_stored_block"),rn=r(J=>{Je(J,a<<1,3),dt(J,E,H),Nt(J)},"_tr_align"),cn=r((J,Xe,nt,st)=>{let pt,It,ve=0;J.level>0?(J.strm.data_type===2&&(J.strm.data_type=zn(J)),Rn(J,J.l_desc),Rn(J,J.d_desc),ve=Wi(J),pt=J.opt_len+3+7>>>3,It=J.static_len+3+7>>>3,It<=pt&&(pt=It)):pt=It=nt+5,nt+4<=pt&&Xe!==-1?oi(J,Xe,nt,st):J.strategy===4||It===pt?(Je(J,(a<<1)+(st?1:0),3),bn(J,H,K)):(Je(J,(s<<1)+(st?1:0),3),Jn(J,J.l_desc.max_code+1,J.d_desc.max_code+1,ve+1),bn(J,J.dyn_ltree,J.dyn_dtree)),yt(J),st&&it(J)},"_tr_flush_block"),Wt=r((J,Xe,nt)=>(J.pending_buf[J.d_buf+J.last_lit*2]=Xe>>>8&255,J.pending_buf[J.d_buf+J.last_lit*2+1]=Xe&255,J.pending_buf[J.l_buf+J.last_lit]=nt&255,J.last_lit++,Xe===0?J.dyn_ltree[nt*2]++:(J.matches++,Xe--,J.dyn_ltree[(q[nt]+n+1)*2]++,J.dyn_dtree[$e(Xe)*2]++),J.last_lit===J.lit_bufsize-1),"_tr_tally");B.exports._tr_init=sn,B.exports._tr_stored_block=oi,B.exports._tr_flush_block=cn,B.exports._tr_tally=Wt,B.exports._tr_align=rn},6693199909:B=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r(l,"ZStream"),B.exports=l},4572474409:(B,l,d)=>{"use strict";B.exports=d(3516343301)},3516343301:(B,l,d)=>{"use strict";var u=l;u.build="minimal",u.Writer=d(6236527030),u.BufferWriter=d(3743878437),u.Reader=d(5191662070),u.BufferReader=d(5281899621),u.util=d(7051616777),u.rpc=d(8201867872),u.roots=d(2643918710),u.configure=h;function h(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}r(h,"configure"),h()},5191662070:(B,l,d)=>{"use strict";B.exports=s;var u=d(7051616777),h,p=u.LongBits,m=u.utf8;function a(f,g){return RangeError("index out of range: "+f.pos+" + "+(g||1)+" > "+f.len)}r(a,"indexOutOfRange");function s(f){this.buf=f,this.pos=0,this.len=f.length}r(s,"Reader");var i=typeof Uint8Array<"u"?r(function(g){if(g instanceof Uint8Array||Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_typed_array"):r(function(g){if(Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_array"),e=r(function(){return u.Buffer?r(function(S){return(s.create=r(function(v){return u.Buffer.isBuffer(v)?new h(v):i(v)},"create_buffer"))(S)},"create_buffer_setup"):i},"create");s.create=e(),s.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,s.prototype.uint32=r(function(){var g=4294967295;return r(function(){if(g=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(g=(g|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return g},"read_uint32")},"read_uint32_setup")(),s.prototype.int32=r(function(){return this.uint32()|0},"read_int32"),s.prototype.sint32=r(function(){var g=this.uint32();return g>>>1^-(g&1)|0},"read_sint32");function t(){var f=new p(0,0),g=0;if(this.len-this.pos>4){for(;g<4;++g)if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f;if(f.lo=(f.lo|(this.buf[this.pos]&127)<<28)>>>0,f.hi=(f.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return f;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw a(this);if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f}return f.lo=(f.lo|(this.buf[this.pos++]&127)<<g*7)>>>0,f}if(this.len-this.pos>4){for(;g<5;++g)if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}else for(;g<5;++g){if(this.pos>=this.len)throw a(this);if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}throw Error("invalid varint encoding")}r(t,"readLongVarint"),s.prototype.bool=r(function(){return this.uint32()!==0},"read_bool");function n(f,g){return(f[g-4]|f[g-3]<<8|f[g-2]<<16|f[g-1]<<24)>>>0}r(n,"readFixed32_end"),s.prototype.fixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)},"read_fixed32"),s.prototype.sfixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new p(n(this.buf,this.pos+=4),n(this.buf,this.pos+=4))}r(o,"readFixed64"),s.prototype.float=r(function(){if(this.pos+4>this.len)throw a(this,4);var g=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},"read_float"),s.prototype.double=r(function(){if(this.pos+8>this.len)throw a(this,4);var g=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},"read_double"),s.prototype.bytes=r(function(){var g=this.uint32(),S=this.pos,c=this.pos+g;if(c>this.len)throw a(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice(S,c);if(S===c){var v=u.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,c)},"read_bytes"),s.prototype.string=r(function(){var g=this.bytes();return m.read(g,0,g.length)},"read_string"),s.prototype.skip=r(function(g){if(typeof g=="number"){if(this.pos+g>this.len)throw a(this,g);this.pos+=g}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),s.prototype.skipType=function(f){switch(f){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(f=this.uint32()&7)!==4;)this.skipType(f);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+f+" at offset "+this.pos)}return this},s._configure=function(f){h=f,s.create=e(),h._configure();var g=u.Long?"toLong":"toNumber";u.merge(s.prototype,{int64:r(function(){return t.call(this)[g](!1)},"read_int64"),uint64:r(function(){return t.call(this)[g](!0)},"read_uint64"),sint64:r(function(){return t.call(this).zzDecode()[g](!1)},"read_sint64"),fixed64:r(function(){return o.call(this)[g](!0)},"read_fixed64"),sfixed64:r(function(){return o.call(this)[g](!1)},"read_sfixed64")})}},5281899621:(B,l,d)=>{"use strict";B.exports=p;var u=d(5191662070);(p.prototype=Object.create(u.prototype)).constructor=p;var h=d(7051616777);function p(m){u.call(this,m)}r(p,"BufferReader"),p._configure=function(){h.Buffer&&(p.prototype._slice=h.Buffer.prototype.slice)},p.prototype.string=r(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),p._configure()},2643918710:B=>{"use strict";B.exports={}},8201867872:(B,l,d)=>{"use strict";var u=l;u.Service=d(5500978168)},5500978168:(B,l,d)=>{"use strict";B.exports=h;var u=d(7051616777);(h.prototype=Object.create(u.EventEmitter.prototype)).constructor=h;function h(p,m,a){if(typeof p!="function")throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=p,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(a)}r(h,"Service"),h.prototype.rpcCall=r(function p(m,a,s,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return u.asPromise(p,t,m,a,s,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,a[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),r(function(o,f){if(o)return t.emit("error",o,m),e(o);if(f===null){t.end(!0);return}if(!(f instanceof s))try{f=s[t.responseDelimited?"decodeDelimited":"decode"](f)}catch(g){return t.emit("error",g,m),e(g)}return t.emit("data",f,m),e(null,f)},"rpcCallback"))}catch(n){t.emit("error",n,m),setTimeout(function(){e(n)},0);return}},"rpcCall"),h.prototype.end=r(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},9429642112:(B,l,d)=>{"use strict";B.exports=h;var u=d(7051616777);function h(s,i){this.lo=s>>>0,this.hi=i>>>0}r(h,"LongBits");var p=h.zero=new h(0,0);p.toNumber=function(){return 0},p.zzEncode=p.zzDecode=function(){return this},p.length=function(){return 1};var m=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=r(function(i){if(i===0)return p;var e=i<0;e&&(i=-i);var t=i>>>0,n=(i-t)/4294967296>>>0;return e&&(n=~n>>>0,t=~t>>>0,++t>4294967295&&(t=0,++n>4294967295&&(n=0))),new h(t,n)},"fromNumber"),h.from=r(function(i){if(typeof i=="number")return h.fromNumber(i);if(u.isString(i))if(u.Long)i=u.Long.fromString(i);else return h.fromNumber(parseInt(i,10));return i.low||i.high?new h(i.low>>>0,i.high>>>0):p},"from"),h.prototype.toNumber=r(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=r(function(i){return u.Long?new u.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=r(function(i){return i===m?p:new h((a.call(i,0)|a.call(i,1)<<8|a.call(i,2)<<16|a.call(i,3)<<24)>>>0,(a.call(i,4)|a.call(i,5)<<8|a.call(i,6)<<16|a.call(i,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=r(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=r(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),h.prototype.zzDecode=r(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),h.prototype.length=r(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},7051616777:function(B,l,d){"use strict";var u=l;u.asPromise=d(7410930532),u.base64=d(3824736026),u.EventEmitter=d(6627060659),u.float=d(6797650127),u.inquire=d(7693203422),u.utf8=d(4612067386),u.pool=d(3002561995),u.LongBits=d(9429642112),u.isNode=Boolean(typeof d.g<"u"&&d.g&&d.g.process&&d.g.process.versions&&d.g.process.versions.node),u.global=u.isNode&&d.g||typeof window<"u"&&window||typeof self<"u"&&self||this,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||r(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),u.isString=r(function(a){return typeof a=="string"||a instanceof String},"isString"),u.isObject=r(function(a){return a&&typeof a=="object"},"isObject"),u.isset=u.isSet=r(function(a,s){var i=a[s];return i!=null&&a.hasOwnProperty(s)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1},"isSet"),u.Buffer=function(){try{var m=u.inquire("buffer").Buffer;return m.prototype.utf8Write?m:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=r(function(a){return typeof a=="number"?u.Buffer?u._Buffer_allocUnsafe(a):new u.Array(a):u.Buffer?u._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=r(function(a){return a?u.LongBits.from(a).toHash():u.LongBits.zeroHash},"longToHash"),u.longFromHash=r(function(a,s){var i=u.LongBits.fromHash(a);return u.Long?u.Long.fromBits(i.lo,i.hi,s):i.toNumber(Boolean(s))},"longFromHash");function h(m,a,s){for(var i=Object.keys(a),e=0;e<i.length;++e)(m[i[e]]===void 0||!s)&&(m[i[e]]=a[i[e]]);return m}r(h,"merge"),u.merge=h,u.lcFirst=r(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function p(m){function a(s,i){if(!(this instanceof a))return new a(s,i);Object.defineProperty(this,"message",{get:function(){return s}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&h(this,i)}return r(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:r(function(){return m},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:r(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}r(p,"newError"),u.newError=p,u.ProtocolError=p("ProtocolError"),u.oneOfGetter=r(function(a){for(var s={},i=0;i<a.length;++i)s[a[i]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(s[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),u.oneOfSetter=r(function(a){return function(s){for(var i=0;i<a.length;++i)a[i]!==s&&delete this[a[i]]}},"setOneOf"),u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var m=u.Buffer;if(!m){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=m.from!==Uint8Array.from&&m.from||r(function(s,i){return new m(s,i)},"Buffer_from"),u._Buffer_allocUnsafe=m.allocUnsafe||r(function(s){return new m(s)},"Buffer_allocUnsafe")}},6236527030:(B,l,d)=>{"use strict";B.exports=t;var u=d(7051616777),h,p=u.LongBits,m=u.base64,a=u.utf8;function s(_,E,b){this.fn=_,this.len=E,this.next=void 0,this.val=b}r(s,"Op");function i(){}r(i,"noop");function e(_){this.head=_.head,this.tail=_.tail,this.len=_.len,this.next=_.states}r(e,"State");function t(){this.len=0,this.head=new s(i,0,0),this.tail=this.head,this.states=null}r(t,"Writer");var n=r(function(){return u.Buffer?r(function(){return(t.create=r(function(){return new h},"create_buffer"))()},"create_buffer_setup"):r(function(){return new t},"create_array")},"create");t.create=n(),t.alloc=r(function(E){return new u.Array(E)},"alloc"),u.Array!==Array&&(t.alloc=u.pool(t.alloc,u.Array.prototype.subarray)),t.prototype._push=r(function(E,b,T){return this.tail=this.tail.next=new s(E,b,T),this.len+=b,this},"push");function o(_,E,b){E[b]=_&255}r(o,"writeByte");function f(_,E,b){for(;_>127;)E[b++]=_&127|128,_>>>=7;E[b]=_}r(f,"writeVarint32");function g(_,E){this.len=_,this.next=void 0,this.val=E}r(g,"VarintOp"),g.prototype=Object.create(s.prototype),g.prototype.fn=f,t.prototype.uint32=r(function(E){return this.len+=(this.tail=this.tail.next=new g((E=E>>>0)<128?1:E<16384?2:E<2097152?3:E<268435456?4:5,E)).len,this},"write_uint32"),t.prototype.int32=r(function(E){return E<0?this._push(S,10,p.fromNumber(E)):this.uint32(E)},"write_int32"),t.prototype.sint32=r(function(E){return this.uint32((E<<1^E>>31)>>>0)},"write_sint32");function S(_,E,b){for(;_.hi;)E[b++]=_.lo&127|128,_.lo=(_.lo>>>7|_.hi<<25)>>>0,_.hi>>>=7;for(;_.lo>127;)E[b++]=_.lo&127|128,_.lo=_.lo>>>7;E[b++]=_.lo}r(S,"writeVarint64"),t.prototype.uint64=r(function(E){var b=p.from(E);return this._push(S,b.length(),b)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=r(function(E){var b=p.from(E).zzEncode();return this._push(S,b.length(),b)},"write_sint64"),t.prototype.bool=r(function(E){return this._push(o,1,E?1:0)},"write_bool");function c(_,E,b){E[b]=_&255,E[b+1]=_>>>8&255,E[b+2]=_>>>16&255,E[b+3]=_>>>24}r(c,"writeFixed32"),t.prototype.fixed32=r(function(E){return this._push(c,4,E>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=r(function(E){var b=p.from(E);return this._push(c,4,b.lo)._push(c,4,b.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=r(function(E){return this._push(u.float.writeFloatLE,4,E)},"write_float"),t.prototype.double=r(function(E){return this._push(u.float.writeDoubleLE,8,E)},"write_double");var v=u.Array.prototype.set?r(function(E,b,T){b.set(E,T)},"writeBytes_set"):r(function(E,b,T){for(var I=0;I<E.length;++I)b[T+I]=E[I]},"writeBytes_for");t.prototype.bytes=r(function(E){var b=E.length>>>0;if(!b)return this._push(o,1,0);if(u.isString(E)){var T=t.alloc(b=m.length(E));m.decode(E,T,0),E=T}return this.uint32(b)._push(v,b,E)},"write_bytes"),t.prototype.string=r(function(E){var b=a.length(E);return b?this.uint32(b)._push(a.write,b,E):this._push(o,1,0)},"write_string"),t.prototype.fork=r(function(){return this.states=new e(this),this.head=this.tail=new s(i,0,0),this.len=0,this},"fork"),t.prototype.reset=r(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=r(function(){var E=this.head,b=this.tail,T=this.len;return this.reset().uint32(T),T&&(this.tail.next=E.next,this.tail=b,this.len+=T),this},"ldelim"),t.prototype.finish=r(function(){for(var E=this.head.next,b=this.constructor.alloc(this.len),T=0;E;)E.fn(E.val,b,T),T+=E.len,E=E.next;return b},"finish"),t._configure=function(_){h=_,t.create=n(),h._configure()}},3743878437:(B,l,d)=>{"use strict";B.exports=p;var u=d(6236527030);(p.prototype=Object.create(u.prototype)).constructor=p;var h=d(7051616777);function p(){u.call(this)}r(p,"BufferWriter"),p._configure=function(){p.alloc=h._Buffer_allocUnsafe,p.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?r(function(s,i,e){i.set(s,e)},"writeBytesBuffer_set"):r(function(s,i,e){if(s.copy)s.copy(i,e,0,s.length);else for(var t=0;t<s.length;)i[e++]=s[t++]},"writeBytesBuffer_copy")},p.prototype.bytes=r(function(s){h.isString(s)&&(s=h._Buffer_from(s,"base64"));var i=s.length>>>0;return this.uint32(i),i&&this._push(p.writeBytesBuffer,i,s),this},"write_bytes_buffer");function m(a,s,i){a.length<40?h.utf8.write(a,s,i):s.utf8Write?s.utf8Write(a,i):s.write(a,i)}r(m,"writeStringBuffer"),p.prototype.string=r(function(s){var i=h.Buffer.byteLength(s);return this.uint32(i),i&&this._push(m,i,s),this},"write_string_buffer"),p._configure()},3476820828:(B,l,d)=>{"use strict";d.r(l),d.d(l,{__assign:()=>p,__asyncDelegator:()=>E,__asyncGenerator:()=>_,__asyncValues:()=>b,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>D,__createBinding:()=>n,__decorate:()=>a,__exportStar:()=>o,__extends:()=>h,__generator:()=>t,__importDefault:()=>O,__importStar:()=>I,__makeTemplateObject:()=>T,__metadata:()=>i,__param:()=>s,__read:()=>g,__rest:()=>m,__spread:()=>S,__spreadArrays:()=>c,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=r(function(R,L){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,K){H.__proto__=K}||function(H,K){for(var ee in K)K.hasOwnProperty(ee)&&(H[ee]=K[ee])},u(R,L)},"extendStatics");function h(R,L){u(R,L);function H(){this.constructor=R}r(H,"__"),R.prototype=L===null?Object.create(L):(H.prototype=L.prototype,new H)}r(h,"__extends");var p=r(function(){return p=Object.assign||r(function(L){for(var H,K=1,ee=arguments.length;K<ee;K++){H=arguments[K];for(var q in H)Object.prototype.hasOwnProperty.call(H,q)&&(L[q]=H[q])}return L},"__assign"),p.apply(this,arguments)},"__assign");function m(R,L){var H={};for(var K in R)Object.prototype.hasOwnProperty.call(R,K)&&L.indexOf(K)<0&&(H[K]=R[K]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,K=Object.getOwnPropertySymbols(R);ee<K.length;ee++)L.indexOf(K[ee])<0&&Object.prototype.propertyIsEnumerable.call(R,K[ee])&&(H[K[ee]]=R[K[ee]]);return H}r(m,"__rest");function a(R,L,H,K){var ee=arguments.length,q=ee<3?L:K===null?K=Object.getOwnPropertyDescriptor(L,H):K,ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(R,L,H,K);else for(var ce=R.length-1;ce>=0;ce--)(ae=R[ce])&&(q=(ee<3?ae(q):ee>3?ae(L,H,q):ae(L,H))||q);return ee>3&&q&&Object.defineProperty(L,H,q),q}r(a,"__decorate");function s(R,L){return function(H,K){L(H,K,R)}}r(s,"__param");function i(R,L){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(R,L)}r(i,"__metadata");function e(R,L,H,K){function ee(q){return q instanceof H?q:new H(function(ae){ae(q)})}return r(ee,"adopt"),new(H||(H=Promise))(function(q,ae){function ce(tt){try{ke(K.next(tt))}catch(At){ae(At)}}r(ce,"fulfilled");function Te(tt){try{ke(K.throw(tt))}catch(At){ae(At)}}r(Te,"rejected");function ke(tt){tt.done?q(tt.value):ee(tt.value).then(ce,Te)}r(ke,"step"),ke((K=K.apply(R,L||[])).next())})}r(e,"__awaiter");function t(R,L){var H={label:0,sent:function(){if(q[0]&1)throw q[1];return q[1]},trys:[],ops:[]},K,ee,q,ae;return ae={next:ce(0),throw:ce(1),return:ce(2)},typeof Symbol=="function"&&(ae[Symbol.iterator]=function(){return this}),ae;function ce(ke){return function(tt){return Te([ke,tt])}}function Te(ke){if(K)throw new TypeError("Generator is already executing.");for(;H;)try{if(K=1,ee&&(q=ke[0]&2?ee.return:ke[0]?ee.throw||((q=ee.return)&&q.call(ee),0):ee.next)&&!(q=q.call(ee,ke[1])).done)return q;switch(ee=0,q&&(ke=[ke[0]&2,q.value]),ke[0]){case 0:case 1:q=ke;break;case 4:return H.label++,{value:ke[1],done:!1};case 5:H.label++,ee=ke[1],ke=[0];continue;case 7:ke=H.ops.pop(),H.trys.pop();continue;default:if(q=H.trys,!(q=q.length>0&&q[q.length-1])&&(ke[0]===6||ke[0]===2)){H=0;continue}if(ke[0]===3&&(!q||ke[1]>q[0]&&ke[1]<q[3])){H.label=ke[1];break}if(ke[0]===6&&H.label<q[1]){H.label=q[1],q=ke;break}if(q&&H.label<q[2]){H.label=q[2],H.ops.push(ke);break}q[2]&&H.ops.pop(),H.trys.pop();continue}ke=L.call(R,H)}catch(tt){ke=[6,tt],ee=0}finally{K=q=0}if(ke[0]&5)throw ke[1];return{value:ke[0]?ke[1]:void 0,done:!0}}}r(t,"__generator");function n(R,L,H,K){K===void 0&&(K=H),R[K]=L[H]}r(n,"__createBinding");function o(R,L){for(var H in R)H!=="default"&&!L.hasOwnProperty(H)&&(L[H]=R[H])}r(o,"__exportStar");function f(R){var L=typeof Symbol=="function"&&Symbol.iterator,H=L&&R[L],K=0;if(H)return H.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&K>=R.length&&(R=void 0),{value:R&&R[K++],done:!R}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}r(f,"__values");function g(R,L){var H=typeof Symbol=="function"&&R[Symbol.iterator];if(!H)return R;var K=H.call(R),ee,q=[],ae;try{for(;(L===void 0||L-- >0)&&!(ee=K.next()).done;)q.push(ee.value)}catch(ce){ae={error:ce}}finally{try{ee&&!ee.done&&(H=K.return)&&H.call(K)}finally{if(ae)throw ae.error}}return q}r(g,"__read");function S(){for(var R=[],L=0;L<arguments.length;L++)R=R.concat(g(arguments[L]));return R}r(S,"__spread");function c(){for(var R=0,L=0,H=arguments.length;L<H;L++)R+=arguments[L].length;for(var K=Array(R),ee=0,L=0;L<H;L++)for(var q=arguments[L],ae=0,ce=q.length;ae<ce;ae++,ee++)K[ee]=q[ae];return K}r(c,"__spreadArrays");function v(R){return this instanceof v?(this.v=R,this):new v(R)}r(v,"__await");function _(R,L,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K=H.apply(R,L||[]),ee,q=[];return ee={},ae("next"),ae("throw"),ae("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ae(Be){K[Be]&&(ee[Be]=function($e){return new Promise(function(Ze,Je){q.push([Be,$e,Ze,Je])>1||ce(Be,$e)})})}function ce(Be,$e){try{Te(K[Be]($e))}catch(Ze){At(q[0][3],Ze)}}function Te(Be){Be.value instanceof v?Promise.resolve(Be.value.v).then(ke,tt):At(q[0][2],Be)}function ke(Be){ce("next",Be)}function tt(Be){ce("throw",Be)}function At(Be,$e){Be($e),q.shift(),q.length&&ce(q[0][0],q[0][1])}}r(_,"__asyncGenerator");function E(R){var L,H;return L={},K("next"),K("throw",function(ee){throw ee}),K("return"),L[Symbol.iterator]=function(){return this},L;function K(ee,q){L[ee]=R[ee]?function(ae){return(H=!H)?{value:v(R[ee](ae)),done:ee==="return"}:q?q(ae):ae}:q}}r(E,"__asyncDelegator");function b(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=R[Symbol.asyncIterator],H;return L?L.call(R):(R=typeof f=="function"?f(R):R[Symbol.iterator](),H={},K("next"),K("throw"),K("return"),H[Symbol.asyncIterator]=function(){return this},H);function K(q){H[q]=R[q]&&function(ae){return new Promise(function(ce,Te){ae=R[q](ae),ee(ce,Te,ae.done,ae.value)})}}function ee(q,ae,ce,Te){Promise.resolve(Te).then(function(ke){q({value:ke,done:ce})},ae)}}r(b,"__asyncValues");function T(R,L){return Object.defineProperty?Object.defineProperty(R,"raw",{value:L}):R.raw=L,R}r(T,"__makeTemplateObject");function I(R){if(R&&R.__esModule)return R;var L={};if(R!=null)for(var H in R)Object.hasOwnProperty.call(R,H)&&(L[H]=R[H]);return L.default=R,L}r(I,"__importStar");function O(R){return R&&R.__esModule?R:{default:R}}r(O,"__importDefault");function w(R,L){if(!L.has(R))throw new TypeError("attempted to get private field on non-instance");return L.get(R)}r(w,"__classPrivateFieldGet");function D(R,L,H){if(!L.has(R))throw new TypeError("attempted to set private field on non-instance");return L.set(R,H),H}r(D,"__classPrivateFieldSet")},5037727051:function(B,l,d){var u;(function(h,p){"use strict";var m="1.0.40",a="",s="?",i="function",e="undefined",t="object",n="string",o="major",f="model",g="name",S="type",c="vendor",v="version",_="architecture",E="console",b="mobile",T="tablet",I="smarttv",O="wearable",w="embedded",D=500,R="Amazon",L="Apple",H="ASUS",K="BlackBerry",ee="Browser",q="Chrome",ae="Edge",ce="Firefox",Te="Google",ke="Huawei",tt="LG",At="Microsoft",Be="Motorola",$e="Opera",Ze="Samsung",Je="Sharp",dt="Sony",Ot="Xiaomi",Nt="Zebra",Ve="Facebook",He="Chromium OS",ct="Mac OS",yt=" Browser",it=r(function(rn,cn){var Wt={};for(var J in rn)cn[J]&&cn[J].length%2===0?Wt[J]=cn[J].concat(rn[J]):Wt[J]=rn[J];return Wt},"extend"),nn=r(function(rn){for(var cn={},Wt=0;Wt<rn.length;Wt++)cn[rn[Wt].toUpperCase()]=rn[Wt];return cn},"enumerize"),Xt=r(function(rn,cn){return typeof rn===n?dn(cn).indexOf(dn(rn))!==-1:!1},"has"),dn=r(function(rn){return rn.toLowerCase()},"lowerize"),bn=r(function(rn){return typeof rn===n?rn.replace(/[^\d\.]/g,a).split(".")[0]:p},"majorize"),Rn=r(function(rn,cn){if(typeof rn===n)return rn=rn.replace(/^\s\s*/,a),typeof cn===e?rn:rn.substring(0,D)},"trim"),Zt=r(function(rn,cn){for(var Wt=0,J,Xe,nt,st,pt,It;Wt<cn.length&&!pt;){var ve=cn[Wt],et=cn[Wt+1];for(J=Xe=0;J<ve.length&&!pt&&ve[J];)if(pt=ve[J++].exec(rn),pt)for(nt=0;nt<et.length;nt++)It=pt[++Xe],st=et[nt],typeof st===t&&st.length>0?st.length===2?typeof st[1]==i?this[st[0]]=st[1].call(this,It):this[st[0]]=st[1]:st.length===3?typeof st[1]===i&&!(st[1].exec&&st[1].test)?this[st[0]]=It?st[1].call(this,It,st[2]):p:this[st[0]]=It?It.replace(st[1],st[2]):p:st.length===4&&(this[st[0]]=It?st[3].call(this,It.replace(st[1],st[2])):p):this[st]=It||p;Wt+=2}},"rgxMapper"),Mn=r(function(rn,cn){for(var Wt in cn)if(typeof cn[Wt]===t&&cn[Wt].length>0){for(var J=0;J<cn[Wt].length;J++)if(Xt(cn[Wt][J],rn))return Wt===s?p:Wt}else if(Xt(cn[Wt],rn))return Wt===s?p:Wt;return cn.hasOwnProperty("*")?cn["*"]:rn},"strMapper"),Wi={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Jn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},zn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,$e+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[g,$e+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[g,$e]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[g,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[g,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[g,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+ee]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[g,"Smart Lenovo "+ee]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+ee],v],[/\bfocus\/([\w\.]+)/i],[v,[g,ce+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,$e+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,$e+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI"+yt]],[/fxios\/([\w\.-]+)/i],[v,[g,ce]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[g,"360"]],[/\b(qq)\/([\w\.]+)/i],[[g,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1"+yt],v],[/samsungbrowser\/([\w\.]+)/i],[v,[g,Ze+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[g,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[g],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Ve],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,q+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,q+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+ee]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,Mn,Wi]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[g,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,ce+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[g,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,dn]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,a,dn]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,dn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[c,Ze],[S,T]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[f,[c,Ze],[S,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[c,L],[S,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[c,L],[S,T]],[/(macintosh);/i],[f,[c,L]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[c,Je],[S,b]],[/(?:honor)([-\w ]+)[;\)]/i],[f,[c,"Honor"],[S,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[c,ke],[S,T]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[c,ke],[S,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[f,/_/g," "],[c,Ot],[S,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[c,Ot],[S,T]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[c,"OPPO"],[S,b]],[/\b(opd2\d{3}a?) bui/i],[f,[c,"OPPO"],[S,T]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[c,"Vivo"],[S,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[c,"Realme"],[S,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[c,Be],[S,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[c,Be],[S,T]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[c,tt],[S,T]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[c,tt],[S,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[c,"Lenovo"],[S,T]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[c,"Nokia"],[S,b]],[/(pixel c)\b/i],[f,[c,Te],[S,T]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[c,Te],[S,b]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[c,dt],[S,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[c,dt],[S,T]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[c,"OnePlus"],[S,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[c,R],[S,T]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[c,R],[S,b]],[/(playbook);[-\w\),; ]+(rim)/i],[f,c,[S,T]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[c,K],[S,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[c,H],[S,T]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[c,H],[S,b]],[/(nexus 9)/i],[f,[c,"HTC"],[S,T]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[f,/_/g," "],[S,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[f,[c,"TCL"],[S,T]],[/(itel) ((\w+))/i],[[c,dn],f,[S,Mn,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[c,"Acer"],[S,T]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[c,"Meizu"],[S,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[c,"Ulefone"],[S,b]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[f,[c,"Energizer"],[S,b]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[f,[c,"Cat"],[S,b]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[f,[c,"Smartfren"],[S,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[f,[c,"Nothing"],[S,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,f,[S,b]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,f,[S,T]],[/(surface duo)/i],[f,[c,At],[S,T]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[c,"Fairphone"],[S,b]],[/(u304aa)/i],[f,[c,"AT&T"],[S,b]],[/\bsie-(\w*)/i],[f,[c,"Siemens"],[S,b]],[/\b(rct\w+) b/i],[f,[c,"RCA"],[S,T]],[/\b(venue[\d ]{2,7}) b/i],[f,[c,"Dell"],[S,T]],[/\b(q(?:mv|ta)\w+) b/i],[f,[c,"Verizon"],[S,T]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[c,"Barnes & Noble"],[S,T]],[/\b(tm\d{3}\w+) b/i],[f,[c,"NuVision"],[S,T]],[/\b(k88) b/i],[f,[c,"ZTE"],[S,T]],[/\b(nx\d{3}j) b/i],[f,[c,"ZTE"],[S,b]],[/\b(gen\d{3}) b.+49h/i],[f,[c,"Swiss"],[S,b]],[/\b(zur\d{3}) b/i],[f,[c,"Swiss"],[S,T]],[/\b((zeki)?tb.*\b) b/i],[f,[c,"Zeki"],[S,T]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],f,[S,T]],[/\b(ns-?\w{0,9}) b/i],[f,[c,"Insignia"],[S,T]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[c,"NextBook"],[S,T]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],f,[S,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],f,[S,b]],[/\b(ph-1) /i],[f,[c,"Essential"],[S,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[c,"Envizen"],[S,T]],[/\b(trio[-\w\. ]+) b/i],[f,[c,"MachSpeed"],[S,T]],[/\btu_(1491) b/i],[f,[c,"Rotor"],[S,T]],[/(shield[\w ]+) b/i],[f,[c,"Nvidia"],[S,T]],[/(sprint) (\w+)/i],[c,f,[S,b]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[c,At],[S,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[c,Nt],[S,T]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[c,Nt],[S,b]],[/smart-tv.+(samsung)/i],[c,[S,I]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[c,Ze],[S,I]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,tt],[S,I]],[/(apple) ?tv/i],[c,[f,L+" TV"],[S,I]],[/crkey/i],[[f,q+"cast"],[c,Te],[S,I]],[/droid.+aft(\w+)( bui|\))/i],[f,[c,R],[S,I]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[c,Je],[S,I]],[/(bravia[\w ]+)( bui|\))/i],[f,[c,dt],[S,I]],[/(mitv-\w{5}) bui/i],[f,[c,Ot],[S,I]],[/Hbbtv.*(technisat) (.*);/i],[c,f,[S,I]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[c,Rn],[f,Rn],[S,I]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,I]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,f,[S,E]],[/droid.+; (shield) bui/i],[f,[c,"Nvidia"],[S,E]],[/(playstation [345portablevi]+)/i],[f,[c,dt],[S,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[c,At],[S,E]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[f,[c,Ze],[S,O]],[/((pebble))app/i],[c,f,[S,O]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[c,L],[S,O]],[/droid.+; (glass) \d/i],[f,[c,Te],[S,O]],[/droid.+; (wt63?0{2,3})\)/i],[f,[c,Nt],[S,O]],[/droid.+; (glass) \d/i],[f,[c,Te],[S,O]],[/(pico) (4|neo3(?: link|pro)?)/i],[c,f,[S,O]],[/; (quest( \d| pro)?)/i],[f,[c,Ve],[S,O]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[S,w]],[/(aeobc)\b/i],[f,[c,R],[S,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[S,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[S,T]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,T]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,b]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,ae+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[g,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[v,Mn,Jn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,Mn,Jn],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,ct],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,K]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,ce+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[g,q+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,He],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,v]]},En=r(function(rn,cn){if(typeof rn===t&&(cn=rn,rn=p),!(this instanceof En))return new En(rn,cn).getResult();var Wt=typeof h!==e&&h.navigator?h.navigator:p,J=rn||(Wt&&Wt.userAgent?Wt.userAgent:a),Xe=Wt&&Wt.userAgentData?Wt.userAgentData:p,nt=cn?it(zn,cn):zn,st=Wt&&Wt.userAgent==J;return this.getBrowser=function(){var pt={};return pt[g]=p,pt[v]=p,Zt.call(pt,J,nt.browser),pt[o]=bn(pt[v]),st&&Wt&&Wt.brave&&typeof Wt.brave.isBrave==i&&(pt[g]="Brave"),pt},this.getCPU=function(){var pt={};return pt[_]=p,Zt.call(pt,J,nt.cpu),pt},this.getDevice=function(){var pt={};return pt[c]=p,pt[f]=p,pt[S]=p,Zt.call(pt,J,nt.device),st&&!pt[S]&&Xe&&Xe.mobile&&(pt[S]=b),st&&pt[f]=="Macintosh"&&Wt&&typeof Wt.standalone!==e&&Wt.maxTouchPoints&&Wt.maxTouchPoints>2&&(pt[f]="iPad",pt[S]=T),pt},this.getEngine=function(){var pt={};return pt[g]=p,pt[v]=p,Zt.call(pt,J,nt.engine),pt},this.getOS=function(){var pt={};return pt[g]=p,pt[v]=p,Zt.call(pt,J,nt.os),st&&!pt[g]&&Xe&&Xe.platform&&Xe.platform!="Unknown"&&(pt[g]=Xe.platform.replace(/chrome os/i,He).replace(/macos/i,ct)),pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return J},this.setUA=function(pt){return J=typeof pt===n&&pt.length>D?Rn(pt,D):pt,this},this.setUA(J),this},"UAParser");En.VERSION=m,En.BROWSER=nn([g,v,o]),En.CPU=nn([_]),En.DEVICE=nn([f,c,S,E,b,I,T,O,w]),En.ENGINE=En.OS=nn([g,v]),typeof l!==e?(e!=="object"&&B.exports&&(l=B.exports=En),l.UAParser=En):i==="function"&&d.amdO?(u=function(){return En}.call(l,d,l,B),u!==p&&(B.exports=u)):typeof h!==e&&(h.UAParser=En);var sn=typeof h!==e&&(h.jQuery||h.Zepto);if(sn&&!sn.ua){var oi=new En;sn.ua=oi.getResult(),sn.ua.get=function(){return oi.getUA()},sn.ua.set=function(rn){oi.setUA(rn);var cn=oi.getResult();for(var Wt in cn)sn.ua[Wt]=cn[Wt]}}})(typeof window=="object"?window:this)},4598598477:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5790858051));let m=r(class{needUpdate(s){return this.activeSpeakers?this.speakerScores[s]===0&&this.activeSpeakers.includes(s)||this.speakerScores[s]>0&&!this.activeSpeakers.includes(s):!0}updateActiveSpeakers(s,i,e){if(!this.needUpdate(e))return;const t=[],n=Object.keys(this.speakerScores);for(let c=0;c<n.length;c++){const v=n[c];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((c,v)=>v.activeScore-c.activeScore).filter(function(c){return c.activeScore>0}).map(function(c){return c.attendeeId});this.activeSpeakers=o,i(o);const g=o.length>0&&o[0]===this.selfAttendeeId&&s.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==g&&(this.hasBandwidthPriority=g,this.hasBandwidthPriorityCallback(g))}updateScore(s,i,e,t,n){const o=s.calculateScore(e,t,n);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(s,i,e))}subscribe(s,i,e,t){const n=r((f,g)=>{if(!g){this.speakerScores[f]=0,this.mostRecentUpdateTimestamp[f]=Date.now(),this.updateActiveSpeakers(s,i,f);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(f,(S,c,v,_)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(s,i,S,c,v)})},"handler");this.detectorCallbackToHandler.set(i,n);const o=new p.default(this.updateIntervalMs);if(o.start(()=>{for(const f in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[f]>this.waitIntervalMs&&this.updateScore(s,i,f,0,this.speakerMuteState[f])}),this.detectorCallbackToActivityTimer.set(i,o),e&&t){const f=new p.default(t);f.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,f)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)}unsubscribe(s){const i=this.detectorCallbackToHandler.get(s);this.detectorCallbackToHandler.delete(s),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(s);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(s));const t=this.detectorCallbackToScoresTimer.get(s);t&&(t.stop(),this.detectorCallbackToHandler.delete(s))}destroy(){return u(this,void 0,void 0,function*(){for(const s of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s);for(const s of this.detectorCallbackToActivityTimer.values())s.stop();for(const s of this.detectorCallbackToScoresTimer.values())s.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(s,i,e,t=1e3,n=200){this.realtimeController=s,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=n,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=m},6343016045:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{calculateScore(h,p,m){(m||p===null)&&(p=0),this.volumes.hasOwnProperty(h)||(this.volumes[h]=0),p>this.silenceThreshold?p=1:p=0;const a=this.volumes[h]*this.speakerWeight+p*(1-this.speakerWeight);this.volumes[h]=a;for(const s in this.volumes)s!==h&&(this.volumes[s]=Math.max(this.volumes[s]-this.takeoverRate*p,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(h=.9,p=.01,m=.2,a=.2){this.speakerWeight=h,this.cutoffThreshold=p,this.silenceThreshold=m,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=d},326556152:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class ES{static create(h,p){const m=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!h||h.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!m.test(h))throw new Error(`appName must satisfy ${m} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!p||p.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(p))throw new Error("appVersion must satisfy Semantic Versioning format");return new ES(h,p)}constructor(h,p){this.appName=h,this.appVersion=p}},"ApplicationMetadata");l.default=d},6922010698:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Attendee");l.default=d},2988320011:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9445576035)),m=h(d(3066440630));let a=r(class{bindAudioElement(i){return u(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return u(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return u(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)m.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return u(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(c=>{t&&c.meetingAudioStreamBecameInactive(t),this.audioStream&&c.meetingAudioStreamBecameActive(this.audioStream)});const n=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(n&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",f=this.audioElement.sinkId;if(o===f)return;const g=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=null),n)try{yield g.setSinkId(o)}catch(c){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${c}`),c}this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=S)})}getCurrentMeetingAudioStream(){return u(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return u(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new p.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},8288024884:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9445576035));let p=r(class bu{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new bu(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new bu(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new bu(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,s=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new h.default().supportsAudioRedundancy()&&s}},"AudioProfile");l.default=p},8511085217:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let d=r(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null,this.isSessionConnected=!1}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null,this.isSessionConnected=!1}},"AudioVideoControllerState");l.default=d},8377273355:function(B,l,d){"use strict";var u=this&&this.__createBinding||(Object.create?function(G,ne,Me,Re){Re===void 0&&(Re=Me),Object.defineProperty(G,Re,{enumerable:!0,get:function(){return ne[Me]}})}:function(G,ne,Me,Re){Re===void 0&&(Re=Me),G[Re]=ne[Me]}),h=this&&this.__setModuleDefault||(Object.create?function(G,ne){Object.defineProperty(G,"default",{enumerable:!0,value:ne})}:function(G,ne){G.default=ne}),p=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var ne={};if(G!=null)for(var Me in G)Me!=="default"&&Object.prototype.hasOwnProperty.call(G,Me)&&u(ne,G,Me);return h(ne,G),ne},m=this&&this.__awaiter||function(G,ne,Me,Re){function Ft(ot){return ot instanceof Me?ot:new Me(function(Tt){Tt(ot)})}return r(Ft,"adopt"),new(Me||(Me=Promise))(function(ot,Tt){function we(Oe){try{F(Re.next(Oe))}catch(se){Tt(se)}}r(we,"fulfilled");function Ue(Oe){try{F(Re.throw(Oe))}catch(se){Tt(se)}}r(Ue,"rejected");function F(Oe){Oe.done?ot(Oe.value):Ft(Oe.value).then(we,Ue)}r(F,"step"),F((Re=Re.apply(G,ne||[])).next())})},a=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(4598598477)),i=a(d(2988320011)),e=a(d(8288024884)),t=a(d(9445576035)),n=a(d(5392261736)),o=a(d(2116171594)),f=a(d(2425311569)),g=a(d(1984577674)),S=a(d(946491843)),c=a(d(1253588984)),v=a(d(1594701503)),_=a(d(6366559347)),E=a(d(9226780571)),b=a(d(3066440630)),T=a(d(7593524919)),I=a(d(2327502190)),O=a(d(7593441017)),w=a(d(1356788254)),D=a(d(6044373597)),R=p(d(1382242439)),L=a(d(6103584604)),H=a(d(9197136208)),K=d(7613896012),ee=a(d(6181421370)),q=a(d(8563305537)),ae=a(d(4989012661)),ce=a(d(957321624)),Te=a(d(9342672808)),ke=a(d(7771209539)),tt=a(d(4998646945)),At=a(d(1413840948)),Be=a(d(9994936499)),$e=a(d(611997860)),Ze=a(d(785230680)),Je=a(d(9157601162)),dt=a(d(3087911396)),Ot=a(d(6062681936)),Nt=a(d(4105188829)),Ve=a(d(980450337)),He=a(d(6919336366)),ct=a(d(5242313998)),yt=a(d(7157971720)),it=a(d(467935533)),nn=a(d(5016494749)),Xt=a(d(4152019840)),dn=a(d(9957505777)),bn=a(d(2985830925)),Rn=a(d(7677781501)),Zt=a(d(6895064603)),Mn=a(d(523374695)),Wi=a(d(5814267651)),Jn=a(d(6239767259)),zn=d(9671487336),En=a(d(8942355099)),sn=a(d(4731147871)),oi=a(d(9450249395)),rn=d(3711281607),cn=a(d(6054180211)),Wt=a(d(543972823)),J=a(d(9066329271)),Xe=a(d(8233988265)),nt=a(d(8325297075)),st=a(d(3752202768)),pt=a(d(2952249532)),It=a(d(247134931)),ve=a(d(8511085217));let et=r(class Cu{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new s.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(ne){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(ne):null}setAudioProfile(ne){this._audioProfile=ne}addObserver(ne){this.logger.info("adding meeting observer"),this.observerQueue.add(ne)}removeObserver(ne){this.logger.info("removing meeting observer"),this.observerQueue.delete(ne)}forEachObserver(ne){for(const Me of this.observerQueue)b.default.nextTick(()=>{this.observerQueue.has(Me)&&ne(Me)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new ve.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new D.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const ne=r(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(Me){Me.type===L.default.WebSocketClosed&&ne()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(ne=>{this.logger.error(`Signaling task pre-start failed: ${ne}`),this.signalingTask=void 0})}start(ne){this.startReturningPromise(ne).then(()=>{this.logger.info("start completed")}).catch(Me=>{this.logger.error(`start failed: ${Me}`)})}startReturningPromise(ne){return(ne==null?void 0:ne.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((Me,Re)=>{this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!1).then(Me).catch(Re)})}))}connectWithPromises(ne){const Me=this.meetingSessionContext,Re=r((X,lt)=>new bn.default(this.logger,lt,X),"timeout");this.monitorTask=new Ze.default(Me,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const Ft=this.monitorTask.once(),ot=new Nt.default(Me).once();this.receiveIndexTask=new ct.default(Me),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Tt=new it.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new $e.default(Me),new yt.default(Me),new At.default(Me),this.receiveIndexTask]).once(),we=new Te.default(Me).once(Tt),Ue=new q.default(Me).once(we,ot),F=new ke.default(Me).once(Ue),Oe=new nn.default(Me).once(F),se=new tt.default(Me).once(Oe),ue=new dn.default(Me).once(se);return this.receiveRemotePauseResumeTask=new Ve.default(Me),this.receiveRemotePauseResumeTask.once(ue),new it.default(this.logger,this.wrapTaskName("AudioVideoStart"),[Ft,Re(this.configuration.connectionTimeoutMs,new it.default(this.logger,"Peer",[ue,this.receiveRemotePauseResumeTask,ne?new bn.default(this.logger,new dt.default(this.logger,"FinalizeConnection",[new Rn.default(Me),new Xt.default(Me)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new Xt.default(Me)]))])}actionConnect(ne){var Me;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const Re=!!this.configuration.urls.audioHostURL;if(Re?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Mn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Wi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Zt.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new Jn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new It.default(this.logger,this._realtimeController,Cu.MIN_VOLUME_DECIBELS,Cu.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Tt=this.meetingSessionContext.videoUplinkBandwidthPolicy;Tt||(Tt=new st.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Tt),Tt.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new oi.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new J.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Wt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new pt.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new sn.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const Tt=this.configuration.meetingFeatures.contentMaxResolution===f.default.VideoResolutionUHD;Tt&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Tt)}else{const Tt=this.configuration.meetingFeatures.videoMaxResolution===f.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Tt)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new c.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new En.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new cn.default,this.meetingSessionContext.videosPaused=new cn.default,this.meetingSessionContext.statsCollector=new ee.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new _.default(this.meetingSessionContext.signalingClient,Cu.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},this._videoTileController.registerVideoTileResolutionObserver(this.meetingSessionContext.statsCollector),ne||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Tt=>{zn.Maybe.of(Tt.audioVideoDidStartConnecting).map(we=>we.bind(Tt)(!1))}),(Me=this.eventController)===null||Me===void 0||Me.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const Ft=Re&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+Ft);const ot=this.connectWithPromises(Ft);try{yield ot.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Tt){this.signalingTask=void 0;const we=new g.default(this.getMeetingStatusCode(Tt)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${we} due to error ${Tt}.`),this.sessionStateController.state()===O.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(I.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(we,!0,Tt),this.handleMeetingSessionStatus(we,Tt)||this.notifyStop(we,Tt)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new bn.default(this.logger,new Je.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=K.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.meetingSessionContext.isSessionConnected=!0,this.forEachObserver(ne=>{zn.Maybe.of(ne.audioVideoDidStart).map(Me=>Me.bind(ne)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var ne;return this._reconnectController.disableReconnect(),this.sessionStateController.state()===O.default.NotConnected?((ne=this.meetingSessionContext.signalingClient)===null||ne===void 0||ne.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((Me,Re)=>{this.sessionStateController.perform(I.default.Disconnect,()=>{this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new g.default(S.default.Left),!1,null).then(Me).catch(Re)})})}stop(){this.stopReturningPromise()}actionDisconnect(ne,Me,Re){return m(this,void 0,void 0,function*(){try{yield new it.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new bn.default(this.logger,new Be.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const Ft=[new bn.default(this.logger,new ce.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new it.default(this.logger,this.wrapTaskName("AudioVideoClean"),Ft).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(I.default.FinishDisconnecting,()=>{Me||this.notifyStop(ne,Re)}),this._videoTileController.removeVideoTileResolutionObserver(this.meetingSessionContext.statsCollector)})}update(){let Me=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(Me||(Me=this.meetingSessionContext.peer===void 0),Me||(Me=!this.updateRemoteVideosFromPolicy()),Me||(Me=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!Me)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const Re=this.sessionStateController.perform(I.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return Re===w.default.Transitioned||Re===w.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!R.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===R.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const ne=this.detectChangesInVideosToReceive();if(ne===void 0)return!1;const Me=ne.added,Re=ne.simulcastStreamUpdates,Ft=ne.removed,ot=this.meetingSessionContext,Tt=[];for(const[we,Ue]of Re.entries()){const F=new H.default;if(F.streamId=Ue,F.attendeeId=ot.videoStreamIndex.attendeeIdForStreamId(Ue),F.mid=ot.transceiverController.getMidForStreamId(we),F.mid===void 0)return this.logger.info(`No MID found for stream ID ${we}, cannot update stream without renegotiation`),!1;if(Tt.push(F),ot.transceiverController.setStreamIdForMid(F.mid,Ue),ot.videoStreamIndex.overrideStreamIdMappings(we,Ue),ot.videoTileController.haveVideoTileForAttendeeId(F.attendeeId)){const Oe=ot.videoTileController.getVideoTileForAttendeeId(F.attendeeId);if(!Oe.setStreamId)return!1;Oe.setStreamId(Ue)}}return Tt.length!==0&&ot.signalingClient.remoteVideoUpdate(Tt,[]),Me.length!==0||Ft.length!==0?!1:(ot.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const ne=this.meetingSessionContext;if(ne.videosToReceive===null||!ne.transceiverController||!ne.transceiverController.getMidForStreamId||!ne.transceiverController.setStreamIdForMid||!ne.videosToReceive.forEach||!ne.signalingClient.remoteVideoUpdate||!ne.videoStreamIndex.overrideStreamIdMappings)return;let Me=[];const Re=new Map;let Ft=[];if(ne.lastVideosToReceive===null)Me=ne.videosToReceive.array();else{const ot=ne.videoStreamIndex;ne.videosToReceive.forEach(Tt=>{if(ne.lastVideosToReceive.contain(Tt))return;let we=!1;ne.lastVideosToReceive.forEach(Ue=>{we||ot.StreamIdsInSameGroup(Ue,Tt)&&(Re.set(Ue,Tt),we=!0)}),we||Me.push(Tt)}),Ft=ne.lastVideosToReceive.array().filter(Tt=>{const we=ne.videosToReceive.contain(Tt),Ue=Re.has(Tt);return!we&&!Ue})}return this.logger.info(`Request to update remote videos with added: [${Me}], updated: [${Array.from(Re.entries()).map(ot=>{let[Tt,we]=ot;return`${Tt}->${we}`}).join(",")}], removed: [${Ft}]`),{added:Me,removed:Ft,simulcastStreamUpdates:Re}}isNotAddingOrRemovingStreams(){const ne=this.detectChangesInVideosToReceive();if(ne===void 0)return!1;const Me=ne.added,Re=ne.removed;return Me.length!==0||Re.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const ne=this.meetingSessionContext;if(ne.videosToReceive===null)return!1;const Me=ne.videosToReceive.array().map(we=>ne.videoStreamIndex.groupIdForStreamId(we));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(Me));const Re=rn.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(ne,Me,ne.videoDownlinkBandwidthPolicy.getVideoPreferences()),Ft=new Map,ot=[];for(const we of Re){let Ue=!1;if(!ne.lastVideoSubscriptionConfiguration.has(we.groupId))Ue=!0;else{const F=ne.lastVideoSubscriptionConfiguration.get(we.groupId);we.equals(F)||(this.logger.debug(`${JSON.stringify(we)} does not equal ${JSON.stringify(F)}, sending update`),Ue=!0)}Ft.set(we.groupId,we),Ue&&ot.push(we)}ne.lastVideoSubscriptionConfiguration=Ft;const Tt=[];if(ne.lastVideosToReceive!==null){const we=new Set(Me);for(const Ue of ne.lastVideosToReceive.array()){const F=ne.videoStreamIndex.groupIdForStreamId(Ue);if(!we.has(F)){const Oe=ne.transceiverController.getMidForGroupId(F);if(Oe===void 0){ne.logger.warn(`Could not find MID for group ID to remove: ${F}`);continue}Tt.push(Oe)}}}return(ot.length!==0||Tt.length!==0)&&ne.signalingClient.remoteVideoUpdate(ot,Tt),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const ne=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(ne)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const ne=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!ne||!ne.headerExtensions?!1:ne.headerExtensions.some(Me=>Me.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(ne){const Me=r(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),ne()}),"restartVideo"),Re=this.sessionStateController.perform(I.default.Update,()=>{Me()});return Re===w.default.Transitioned||Re===w.default.DeferredTransition}replaceLocalVideo(ne){return m(this,void 0,void 0,function*(){if(!ne||ne.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const Me=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(Me){const Re=Me.state(),Ft=ne.getVideoTracks()[0].getSettings();Me.bindVideoStream(Re.boundAttendeeId,!0,ne,Ft.width,Ft.height,Re.streamId,Re.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(ne.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=ne,this.logger.info("Local video input is updated")})}replaceLocalAudio(ne){return m(this,void 0,void 0,function*(){if(!ne||ne.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(ne.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=ne,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(ne){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new it.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new He.default(this.meetingSessionContext),new bn.default(this.logger,new it.default(this.logger,"UpdateSession",[new q.default(this.meetingSessionContext),new ke.default(this.meetingSessionContext),new nn.default(this.meetingSessionContext),new tt.default(this.meetingSessionContext),new dn.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),ne&&this.sessionStateController.perform(I.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(Me){this.sessionStateController.perform(I.default.FinishUpdating,()=>{const Re=new g.default(this.getMeetingStatusCode(Me)||S.default.TaskFailed);Re.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(Re,Me)})}})}notifyStop(ne,Me){var Re;if(this.forEachObserver(Ft=>{zn.Maybe.of(Ft.audioVideoDidStop).map(ot=>ot.bind(Ft)(ne))}),this.eventController){const{signalingOpenDurationMs:Ft,poorConnectionCount:ot,startTimeMs:Tt,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ue,meetingStartDurationMs:F}=this.meetingSessionContext,Oe={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Tt===null?0:Math.round(Date.now()-Tt),meetingStatus:S.default[ne.statusCode()],signalingOpenDurationMs:Ft,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ue,poorConnectionCount:ot,meetingStartDurationMs:F,retryCount:this.totalRetryCount},se=Me&&Me.message||((Re=ne.toString)===null||Re===void 0?void 0:Re.call(ne))||"";Oe.meetingDurationMs===0?(Oe.meetingErrorMessage=se,delete Oe.meetingDurationMs,delete Oe.attendeePresenceDurationMs,delete Oe.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Oe)):ne.isFailure()||ne.isAudioConnectionFailure()?(Oe.meetingErrorMessage=se,this.eventController.publishEvent("meetingFailed",Oe)):this.eventController.publishEvent("meetingEnded",Oe)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const ne=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(ne)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(ne,Me){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(Ft=>{zn.Maybe.of(Ft.audioVideoWasDemotedFromPrimaryMeeting).map(ot=>ot.bind(Ft)(new g.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const Re=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===O.default.NotConnected?this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(I.default.Reconnect,()=>{this.actionReconnect(ne)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return Re||this.sessionStateController.perform(I.default.Fail,()=>{this.actionDisconnect(ne,!1,Me)}),Re}actionReconnect(ne){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(Me=>{zn.Maybe.of(Me.audioVideoDidStartConnecting).map(Re=>Re.bind(Me)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Ve.default(this.meetingSessionContext);try{yield new it.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new bn.default(this.logger,new it.default(this.logger,"Media",[new ae.default(this.meetingSessionContext),new it.default(this.logger,"Signaling",[new Je.default(this.meetingSessionContext),new At.default(this.meetingSessionContext)]),new Te.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new He.default(this.meetingSessionContext),new bn.default(this.logger,new it.default(this.logger,"UpdateSession",[new q.default(this.meetingSessionContext),new ke.default(this.meetingSessionContext),new nn.default(this.meetingSessionContext),new tt.default(this.meetingSessionContext),new dn.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(I.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:Me,poorConnectionCount:Re,startTimeMs:Ft,iceGatheringDurationMs:ot,attendeePresenceDurationMs:Tt,meetingStartDurationMs:we}=this.meetingSessionContext,Ue={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-Ft),meetingStatus:S.default[ne.statusCode()],signalingOpenDurationMs:Me,iceGatheringDurationMs:ot,attendeePresenceDurationMs:Tt,poorConnectionCount:Re,meetingStartDurationMs:we,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Ue)}this.actionFinishConnecting()})}catch(Me){this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const Re=new g.default(this.getMeetingStatusCode(Me)||S.default.TaskFailed);this.handleMeetingSessionStatus(Re,Me)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(ne){return`${ne}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(ne){const Me=/the meeting status code: (\d+)/.exec(ne&&ne.message);return Me&&Me.length>1?Number.parseInt(Me[1],10):null}enforceBandwidthLimitationForSender(ne){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(ne)})}handleMeetingSessionStatus(ne,Me){if(this.logger.info(`handling status: ${S.default[ne.statusCode()]}`),ne.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(ne),ne.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(ne.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(Re=>{zn.Maybe.of(Re.videoSendDidBecomeUnavailable).map(Ft=>Ft.bind(Re)())}),!1;if(ne.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(Re=>{zn.Maybe.of(Re.audioVideoWasDemotedFromPrimaryMeeting).map(Ft=>Ft.bind(Re)(ne))}),!1;if(ne.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(ne.isFailure()||ne.isTerminal())&&this.meetingSessionContext.reconnectController){const Re=this.reconnect(ne,Me);return Re?this.logger.warn(`The audio video controller will reconnect due to status code ${S.default[ne.statusCode()]}${Me?` and error: ${Me.message}`:""}`):this.logger.error(`The audio video controller failed with status code ${S.default[ne.statusCode()]}${Me?` and error: ${Me.message}`:""}`),Re}return!1}setVideoMaxBandwidthKbps(ne){if(ne<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${ne} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(ne)),this.maxUplinkBandwidthKbps=ne}handleHasBandwidthPriority(ne){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ne),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const Me=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ne);const Re=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();Me!==Re&&(this.logger.info(`video send bandwidth priority ${ne} max has changed from ${Me} kbps to ${Re} kbps`),yield this.enforceBandwidthLimitationForSender(Re))}})}pauseReceivingStream(ne){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([ne])}resumeReceivingStream(ne){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([ne])}setVideoCodecSendPreferences(ne){this.videoSendCodecPreferences=ne,this.meetingSessionContext.videoSendCodecPreferences=ne,this.sessionStateController.state()!==O.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:ne}=this.meetingSessionContext;if(!ne)return this.logger.info("meeting has not started"),[];const Me=this.configuration.credentials.attendeeId;return ne.allVideoSendingSourcesExcludingSelf(Me)}encodingSimulcastLayersDidChange(ne){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(Me=>{zn.Maybe.of(Me.encodingSimulcastLayersDidChange).map(Re=>Re.bind(Me)(ne))})}promoteToPrimaryMeeting(ne){return this.actionPromoteToPrimaryMeeting(ne)}actionPromoteToPrimaryMeeting(ne){return m(this,void 0,void 0,function*(){let Me=new g.default(S.default.SignalingRequestFailed);return yield new it.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new bn.default(this.logger,new Ot.default(this.meetingSessionContext,ne,Re=>{Me=Re}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=Me.statusCode()===S.default.OK,Me})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(ne=>{zn.Maybe.of(ne.audioVideoWasDemotedFromPrimaryMeeting).map(Me=>Me.bind(ne)(new g.default(S.default.OK)))})}videoInputDidChange(ne){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(ne?yield this.replaceLocalVideo(ne):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(ne){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!ne)try{ne=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(ne)})}constructor(ne,Me,Re,Ft,ot,Tt){this._audioProfile=new e.default,this.connectionHealthData=new n.default,this.observerQueue=new Set,this.meetingSessionContext=new ve.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=Me,this.sessionStateController=new T.default(this._logger),this._configuration=ne,this._webSocketAdapter=Re,this._realtimeController=new E.default(Ft),this._realtimeController.realtimeSetLocalAttendeeId(ne.credentials.attendeeId,ne.credentials.externalUserId),this._mediaStreamBroker=Ft,this._reconnectController=ot,this._videoTileController=new Xe.default(new nt.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Tt}},"DefaultAudioVideoController");l.default=et,et.MIN_VOLUME_DECIBELS=-42,et.MAX_VOLUME_DECIBELS=-14,et.PING_PONG_INTERVAL_MS=1e4},8167974884:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9173407961)),p=u(d(9375803731)),m=u(d(7420310193)),a=u(d(7836148100)),s=u(d(3456656950)),i=u(d(6504474338)),e=u(d(1984577674)),t=u(d(946491843)),n=u(d(2201325822)),o=u(d(9778418265)),f=u(d(6757985251)),g=u(d(8377273355));let S=r(class extends g.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const _=new s.default;_.meetingId="",_.externalMeetingId="",_.credentials=new i.default,_.credentials.attendeeId="",_.credentials.joinToken="",_.urls=new n.default,_.urls.turnControlURL="",_.urls.audioHostURL="",_.urls.signalingURL="wss://localhost/";const E=new m.default;super(v||_,E,new f.default(new m.default),new a.default,new o.default(0,new h.default(0,0,0)),new p.default(v||_,E))}},"NoOpAudioVideoController");l.default=S},5948949947:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,n){function o(S){try{g(i.next(S))}catch(c){n(c)}}r(o,"fulfilled");function f(S){try{g(i.throw(S))}catch(c){n(c)}}r(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}r(g,"step"),g((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(6229167887);let p=r(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const s=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,s),s}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,s){this.videoTileController.bindVideoElement(a,s),this.trace("bindVideoElement",{tileId:a,videoElementId:s.id})}unbindVideoElement(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,s),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:s})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const s=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),s}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const s=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,s),s}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const s=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),s}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,s){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,s),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,s){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,s),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,s)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,s,i){this.realtimeController.realtimeSendDataMessage(a,s,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,s){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,s),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,s,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,s,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,s),s})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const s=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,s),s})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,s),s})}startAudioInput(a){return u(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return u(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const s=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),s}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const s=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),s}chooseVideoInputQuality(a,s,i){this.deviceController.chooseVideoInputQuality(a,s,i),this.trace("chooseVideoInputQuality",{width:a,height:s,frameRate:i})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,s){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,s)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const s=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),s}startContentShareFromScreenCapture(a,s){const i=this.contentShareController.startContentShareFromScreenCapture(a,s);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,s,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let n=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof s<"u"&&(n+=` ${JSON.stringify(s)}`),typeof i<"u"&&(n+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(n)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const s=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,s),s}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,s,i,e,t,n){this.audioVideoController=a,this.videoTileController=s,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=n}},"DefaultAudioVideoFacade");l.default=p},666453167:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(597408827)),m=d(6493518233);let a=r(class extends p.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:n,targetCanvas:o}=this,{width:f,height:g}=o;if(!e||!t){n.clearRect(0,0,f,g);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),n.save(),n.clearRect(0,0,f,g),n.drawImage(this.scaledCanvas,0,0,f,g),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,f,g),n.globalCompositeOperation="destination-over",n.drawImage(this.blurCanvas,0,0,f,g),n.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return u(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},597408827:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1628145282)),m=d(6493518233),a=h(d(6785068399));let s=r(class extends p.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:f}=this,{width:g,height:S}=f;o.save(),o.clearRect(0,0,g,S),o.drawImage(this.scaledCanvas,0,0,g,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,g,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,f.width,f.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return u(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: { blurStrength: ${t.blurStrength}, filterCPUUtilization: ${t.filterCPUUtilization}, reportingPeriodMillis: ${t.reportingPeriodMillis}}`)}},"BackgroundBlurProcessorProvided");l.default=s},6493518233:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const d={LOW:7,MEDIUM:15,HIGH:30};let u=r(class{static getBlurAmount(p,m){if(p<=0)throw new Error(`invalid value for blur strength: ${p}`);return Math.round(p*m.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=u,u.BLUR_STRENGTH_DIVISOR=540,l.default=d},1846007608:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(f,g,S,c){function v(_){return _ instanceof S?_:new S(function(E){E(_)})}return r(v,"adopt"),new(S||(S=Promise))(function(_,E){function b(O){try{I(c.next(O))}catch(w){E(w)}}r(b,"fulfilled");function T(O){try{I(c.throw(O))}catch(w){E(w)}}r(T,"rejected");function I(O){O.done?_(O.value):v(O.value).then(b,T)}r(I,"step"),I((c=c.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(693400218)),m=h(d(632433771)),a=h(d(152907414)),s=h(d(3503763380)),i=h(d(666453167)),e=h(d(597408827)),t=h(d(6493518233));let n=r(class extends s.default{setBlurStrength(){}loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=r(class kd extends p.default{static create(g,S){return u(this,void 0,void 0,function*(){g=kd.resolveSpec(g),S=kd.resolveOptions(S);const{logger:c}=S,v=yield kd.isSupported(g,S);if(c.info(`processor is ${v?"":"not"} supported`),!v)return c.warn("Using no-op processor because background blur is not supported"),new n;let _;return(yield e.default.isSupported())?(c.info("Using browser-provided background blur"),_=new e.default(g,S)):(c.info("Using built-in background blur"),_=new i.default(g,S)),yield _.loadAssets(),_})}static resolveOptions(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},g);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new m.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(g,S){return g=kd.resolveSpec(g),S=kd.resolveOptions(S),super.isSupported(g,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},6785068399:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(1959821357));let p=r(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=p},4964835908:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class bS{static builder(){return new bS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const h={height:144,width:256,range:[0,1],channels:3},p={height:144,width:256,range:[0,1],channels:1},m="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=m,this.input=h,this.output=p,this}withPath(h){return this.path=h,this}withInput(h){return this.input=h,this}withOutput(h){return this.output=h,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=d},9275736837:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=.8;let u=r(class{reportEvent(p){const m=p-this.lastReportedEventTimestamp;if(m>=this.reportingPeriodMillis){const a=this.filterCount,s=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=p,this.framerate===0||a===0)return;const i=Math.round(s/a),e=Math.round(this.framerate*(m/1e3))-a,t=Math.round(100*s/m);i>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:i,framerate:this.framerate,periodMillis:m}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:s,periodMillis:m})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*d)}frameReceived(p){p!==this.framerate&&(this.framerate=p,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const m=Date.now();this.reportEvent(m)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(p,m,a,s){this.delegate=p,this.reportingPeriodMillis=m,this.filterCPUUtilization=a,this.logger=s,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=u},1628145282:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(t,n,o,f){function g(S){return S instanceof o?S:new o(function(c){c(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,c){function v(b){try{E(f.next(b))}catch(T){c(T)}}r(v,"fulfilled");function _(b){try{E(f.throw(b))}catch(T){c(T)}}r(_,"rejected");function E(b){b.done?S(b.value):g(b.value).then(v,_)}r(E,"step"),E((f=f.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const p=d(8567210951),m=h(d(5808804466)),a=h(d(9275736837));let s=r(class{whenNext(){return this.promise||(this.promise=new Promise(n=>this.resolve=n)),this.promise}next(n){this.value=n,this.resolve(n),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=r(class Bh{static createWorkerPromise(){const n={resolve:null,reject:null,promise:null};return n.promise=new Promise((o,f)=>{n.resolve=o,n.reject=f}),n}validateSpec(n){if(!n)throw new Error("processor has null spec");if(!n.model)throw new Error("processor spec has null model");if(!n.paths)throw new Error("processor spec has null paths")}validateOptions(n){if(!n)throw new Error("processor has null options");if(!n.logger)throw new Error("processor has null options - logger");if(!n.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!n.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(n){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,n.reportingPeriodMillis,n.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(n){return JSON.stringify(n,null,2)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(n){if(this.logger.info(`received load model message: ${this.stringify(n)}`),n.payload!==2){this.logger.error("failed to load model! status: "+n.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+n.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(n){this.mask$.next(n.payload.output)}handleWorkerEvent(n){const o=n.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield p.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",n=>this.handleWorkerEvent(n)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(n){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${n.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(n){return u(this,void 0,void 0,function*(){if(this.destroyed)return n;this.frameCounter.frameReceived(n[0].framerate),this.cpuMonitor.frameReceived();const o=n[0].asCanvasElement();if(!o)return n;if(!this.modelInitialized)return n[0]=this.canvasVideoFrameBuffer,n;const f=o.width,g=o.height;if(f===0||g===0)return n;this.sourceWidth===0&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==f||this.sourceHeight!==g)&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const c=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const _=this.scaledCanvas.getContext("2d");_.save(),_.scale(c,v),_.drawImage(o,0,0),_.restore();const E=_.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const b=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:E},[E.data.buffer]),S=yield b}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),n}finally{this.frameCounter.filterComplete(),this.frameNumber++}return n[0]=this.canvasVideoFrameBuffer,n})}updateVideoFramesPerFilterUpdate(n){n!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=n,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var n,o,f,g;return u(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(n=this.worker)===null||n===void 0||n.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(f=this.targetCanvas)===null||f===void 0||f.remove(),this.targetCanvas=void 0,(g=this.scaledCanvas)===null||g===void 0||g.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(n,o,f,g,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new s,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Bh.createWorkerPromise(),this.loadModelPromise=Bh.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=n,this.validateSpec(o),this.validateOptions(f),this.spec=o,this.logger=f.logger,this.delegate=g,this.initCPUMonitor(f),this.eventController=S}},"BackgroundFilterProcessor");l.default=i;let e=r(class{filterCPUUtilizationHigh(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=n,this.observer.reduceCPUUtilization())}frameReceived(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=n,this.observer.increaseCPUUtilization())}constructor(n,o){this.monitoringPeriodMillis=n,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},693400218:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(f,g,S,c){function v(_){return _ instanceof S?_:new S(function(E){E(_)})}return r(v,"adopt"),new(S||(S=Promise))(function(_,E){function b(O){try{I(c.next(O))}catch(w){E(w)}}r(b,"fulfilled");function T(O){try{I(c.throw(O))}catch(w){E(w)}}r(T,"rejected");function I(O){O.done?_(O.value):v(O.value).then(b,T)}r(I,"step"),I((c=c.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(8567210951),m=d(4085910259),a=h(d(4964835908)),s=h(d(9445576035)),i=h(d(6332689210)),e=r(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",n={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=r(class{static defaultAssetSpec(){const g=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${g.major}.${g.minor}`}}static createUrlWithParams(g,S){const c=new URL(g),v=Object.keys(S);for(const _ of v)S[_]!==void 0&&c.searchParams.set(_,S[_]);return c.toString()}static resolveSpec(g){const{paths:S=n,model:c=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:_=this.defaultAssetSpec().revisionID}=g||{},E={assetGroup:v,revisionID:_,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,E),S.wasm=this.createUrlWithParams(S.wasm,E),S.simd=this.createUrlWithParams(S.simd,E),c.path=this.createUrlWithParams(c.path,E),{paths:S,model:c,assetGroup:v,revisionID:_}}static resolveOptions(g){g.reportingPeriodMillis||(g.reportingPeriodMillis=1e3);const S=30;return g.filterCPUUtilization?(g.filterCPUUtilization<0||g.filterCPUUtilization>100)&&(g.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),g.filterCPUUtilization=S):g.filterCPUUtilization=S,g}static isSupported(g,S){const{logger:c}=S;return typeof globalThis>"u"?(c.info("Browser does not have globalThis."),Promise.resolve(!1)):new s.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,c)?this.supportsBackgroundFilter(globalThis,g,c):(c.info("Browser does not support WASM."),Promise.resolve(!1)):(c.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0;return u(this,void 0,void 0,function*(){if(!m.supportsWorker(g,c))return c.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const _=yield p.loadWorker(v,"BackgroundFilterWorker",{},null);try{_.terminate()}catch(E){c.info(`Failed to terminate worker. ${E.message}`)}return!0}catch(_){return c.info(`Failed to fetch and instantiate test worker ${_.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},1959821357:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}filterFrameDurationHigh(h){var p;for(const m of this.observers)(p=m.filterFrameDurationHigh)===null||p===void 0||p.call(m,h)}filterCPUUtilizationHigh(h){var p;for(const m of this.observers)(p=m.filterCPUUtilizationHigh)===null||p===void 0||p.call(m,h)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=d},9498470312:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1628145282)),m=h(d(2490262653));let a=r(class Uh extends p.default{setImageBlob(i){return u(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield Uh.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:n,targetCanvas:o}=this,{width:f,height:g}=o;n.save(),n.clearRect(0,0,f,g),n.drawImage(this.scaledCanvas,0,0,f,g),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,f,g),n.globalCompositeOperation="destination-over",n.drawImage(this.replacementImage,0,0,o.width,o.height),n.restore()}static loadImageExecutor(i,e,t){const n=new Image;n.crossOrigin="Anonymous",n.addEventListener("load",()=>{i(n)},!1),n.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${n.src}: ${o.message}`))},!1),n.src=t}static loadImage(i){return u(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return u(this,void 0,void 0,function*(){this.replacementImage=yield Uh.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return u(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: { filterCPUUtilization: ${e.filterCPUUtilization}, reportingPeriodMillis: ${e.reportingPeriodMillis}}`)}},"BackgroundReplacementFilter");l.default=a},5038925386:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(n,o,f,g){function S(c){return c instanceof f?c:new f(function(v){v(c)})}return r(S,"adopt"),new(f||(f=Promise))(function(c,v){function _(T){try{b(g.next(T))}catch(I){v(I)}}r(_,"fulfilled");function E(T){try{b(g.throw(T))}catch(I){v(I)}}r(E,"rejected");function b(T){T.done?c(T.value):S(T.value).then(_,E)}r(b,"step"),b((g=g.apply(n,o||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(693400218)),m=h(d(632433771)),a=h(d(152907414)),s=h(d(3503763380)),i=h(d(9498470312));let e=r(class extends s.default{loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return u(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=r(class CS extends p.default{static create(o,f){return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const{logger:g}=f;if(!(yield CS.isSupported(o,f)))return g.warn("Using no-op processor because background replacement is not supported"),new e;g.info("Using background replacement filter");const c=new i.default(o,f);return yield c.loadAssets(),c})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const f=Object.assign({},o);return f.logger||(f.logger=new m.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(f)}static resolveOptionsAsync(o){return u(this,void 0,void 0,function*(){if(!o.imageBlob){const f=document.createElement("canvas");f.width=100,f.height=100;const g=f.getContext("2d");g.fillStyle="blue",g.fillRect(0,0,100,100);const S=yield new Promise(c=>{f.toBlob(c)});o.imageBlob=S}})}static isSupported(o,f){const g=Object.create(null,{isSupported:{get:()=>super.isSupported}});return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const S=f.imageBlob,c=URL.createObjectURL(S);try{yield i.default.loadImage(c)}catch(v){return f.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(c)}return g.isSupported.call(this,o,f)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},2490262653:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(1959821357));let p=r(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=p},9173407961:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const h=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,h}constructor(h,p,m){this.fixedWaitMs=h,this.shortBackoffMs=p,this.longBackoffMs=m,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=d},8467350797:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9173407961)),p=u(d(7796317769));let m=r(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(s){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,s)}constructor(s,i,e){this.fixedWaitMs=s,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=m},7796317769:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9173407961));let p=r(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,s,i,e){super(a,s,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=p},9445576035:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(585669709),p=d(5961608329);let m=r(class Vh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const s of this.chromeLike)if(s===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const s of this.webkitBrowsers)if(s===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Vh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Vh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(s,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(s/64)*64,Math.ceil(i/64)*64]:[s,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const s=[];for(const i in this.browserSupport)s.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return s.join(", ")}supportedVideoCodecs(){return u(this,void 0,void 0,function*(){const s=new RTCPeerConnection;return s.addTransceiver("video",{direction:"inactive",streams:[]}),(yield s.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return this.isIOS()&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}requiresAudioContextResetOnDeviceFailureForWebAudio(){return this.isIOS()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}isIOS(){return this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox()}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},3713066448:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7613896012),p=u(d(3071240545)),m=u(d(3967449568)),a=u(d(9883248412));let s=r(class TS{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case p.default.UPSTREAM:return this.audioUpstreamMetricMap;case p.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case p.default.UPSTREAM:return this.videoUpstreamMetricMap;case p.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:f,source:g}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const c=this.streamMetricReports[S];if(c.direction===t.dir&&c.mediaType===t.media)return f(g||t.source,Number(S))}else return f(g||t.source);return 0}getObservableVideoMetricValue(e,t){const n=this.observableVideoMetricSpec[e],f=this.getMetricMap(n.media,n.dir)[n.source],{transform:g,source:S}=f;return g(S||n.source,t)}getVideoUpstreamSsrcs(){const e=[];for(const t in this.streamMetricReports)this.streamMetricReports[t].mediaType===m.default.VIDEO&&this.streamMetricReports[t].direction===p.default.UPSTREAM&&e.push(Number(t));return e}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const n={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const c=this.getObservableVideoMetricValue(S,Number(t));isNaN(c)||(n[S]=c)}const o=this.streamMetricReports[t].groupId,f=this.streamMetricReports[t].streamId;let g="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?g=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:g=f?this.videoStreamIndex.attendeeIdForStreamId(f):this.selfAttendeeId,e[g]=e[g]?e[g]:{},e[g][t]=n}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new TS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,n){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=n,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o])},this.decoderLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.concealedSamples-(g.previousMetrics.concealedSamples||0),c=g.currentMetrics.totalSamplesReceived-(g.previousMetrics.totalSamplesReceived||0);return c<=0||c-S<=0?0:S/c*100},this.packetLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics[o]-(g.previousMetrics[o]||0),c=g.currentMetrics.packetsLost-(g.previousMetrics.packetsLost||0),v=S+c;return v<=0||c<=0?0:c*100/v},this.jitterBufferMs=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.jitterBufferDelay-(g.previousMetrics.jitterBufferDelay||0),c=g.currentMetrics.jitterBufferEmittedCount-(g.previousMetrics.jitterBufferEmittedCount||0);return S<=0||c<=0?0:S/c*1e3},this.countPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const c=g.currentMetrics[o]-(g.previousMetrics[o]||0);return c<=0?0:Math.trunc(c/S)},this.bitsPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const c=(g.currentMetrics[o]-(g.previousMetrics[o]||0))*8;return c<=0?0:Math.trunc(c/S)},this.secondsToMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const c=g.currentMetrics[o]-(g.previousMetrics[o]||0);return c<=0?0:c*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,f)=>{const g=this.streamMetricReports[f];if(g.previousObjectMetrics[o]===void 0||g.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let c=0,v=0;for(const[E,b]of Object.entries(g.previousObjectMetrics[o]))E==="cpu"&&(c=b);for(const[E,b]of Object.entries(g.currentObjectMetrics[o]))E==="cpu"&&(v=b);const _=v-c;return _<=0?0:_*1e3/S},this.isHardwareImplementation=(o,f)=>{const g=this.streamMetricReports[f];if(g.currentStringMetrics[o]===void 0)return NaN;const S=String(g.currentStringMetrics[o]),c=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return c&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_JITTER_MS},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE},videoInputWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_WIDTH},videoInputHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_HEIGHT}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS},videoRenderWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_WIDTH},videoRenderHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_HEIGHT}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:p.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:p.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:p.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=s},3071240545:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var d;(function(u){u[u.UPSTREAM=0]="UPSTREAM",u[u.DOWNSTREAM=1]="DOWNSTREAM"})(d=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=d},3967449568:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var d;(function(u){u[u.AUDIO=0]="AUDIO",u[u.VIDEO=1]="VIDEO"})(d=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=d},6193104267:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"ClientVideoStreamReceivingReport");l.default=d},9883248412:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=d},7244701833:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=d},5426637611:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=d},6925537195:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(h){this.currentData=h}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const h=this.health();return h!==this.currentHealth?(this.currentHealth=h,h):null}constructor(h,p,m){this.minHealth=h.minHealth,this.maxHealth=h.maxHealth,this.currentHealth=h.initialHealth,this.currentData=p.clone(),this.name=m}},"BaseConnectionHealthPolicy");l.default=d},5392261736:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class wl{static isTimestampRecent(h,p){return Date.now()<h+p}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(h){return wl.isTimestampRecent(this.connectionStartTimestampMs,h)}isLastPacketLossRecent(h){return wl.isTimestampRecent(this.lastPacketLossInboundTimestampMs,h)}isGoodSignalRecent(h){return wl.isTimestampRecent(this.lastGoodSignalTimestampMs,h)}isWeakSignalRecent(h){return wl.isTimestampRecent(this.lastWeakSignalTimestampMs,h)}isNoSignalRecent(h){return wl.isTimestampRecent(this.lastNoSignalTimestampMs,h)}clone(){const h=new wl;return h.connectionStartTimestampMs=this.connectionStartTimestampMs,h.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,h.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,h.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,h.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,h.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,h.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,h.consecutiveMissedPongs=this.consecutiveMissedPongs,h.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),h.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),h.audioSpeakerDelayMs=this.audioSpeakerDelayMs,h.isVideoEncoderHardware=this.isVideoEncoderHardware,h.videoEncodingTimeInMs=this.videoEncodingTimeInMs,h.videoEncodingTimePerFrameInMs=this.videoEncodingTimePerFrameInMs,h.cpuLimitationDuration=this.cpuLimitationDuration,h.videoInputFps=this.videoInputFps,h.videoEncodeFps=this.videoEncodeFps,h}setConsecutiveMissedPongs(h){this.consecutiveMissedPongs=h}setConsecutiveStatsWithNoPackets(h){this.consecutiveStatsWithNoPackets=h}setConsecutiveStatsWithNoAudioPacketsSent(h){this.consecutiveStatsWithNoAudioPacketsSent=h}setLastPacketLossInboundTimestampMs(h){this.lastPacketLossInboundTimestampMs=h}setLastNoSignalTimestampMs(h){this.lastNoSignalTimestampMs=h}setLastWeakSignalTimestampMs(h){this.lastWeakSignalTimestampMs=h}setLastGoodSignalTimestampMs(h){this.lastGoodSignalTimestampMs=h}setAudioSpeakerDelayMs(h){this.audioSpeakerDelayMs=h}setIsVideoEncoderHardware(h){this.isVideoEncoderHardware=h}setVideoEncodingTimeInMs(h){this.videoEncodingTimeInMs=h}setVideoEncodingTimePerFrameInMs(h){this.videoEncodingTimePerFrameInMs=h}setCpuLimitationDuration(h){this.cpuLimitationDuration=h}setVideoInputFps(h){this.videoInputFps=h}setVideoEncodeFps(h){this.videoEncodeFps=h}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=d},7666896524:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6862823406)),p=u(d(2633548471));let m=r(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[h.default,p.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.highEncodeCpuMsPerFrameThreshold=15,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=m},4479085271:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6925537195));let p=r(class ca extends h.default{health(){if(this.currentData.isConnectionStartRecent(ca.CONNECTION_WAIT_TIME_MS))return 1;const s=this.currentData.consecutiveStatsWithNoPackets>=ca.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=ca.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>ca.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>ca.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),s||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${s}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(a,s,i){super(s,i,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,ca.CONNECTION_UNHEALTHY_THRESHOLD=s.connectionUnhealthyThreshold,ca.CONNECTION_WAIT_TIME_MS=s.connectionWaitTimeMs,ca.MISSED_PONGS_THRESHOLD=s.missedPongsUpperThreshold,ca.MAXIMUM_AUDIO_DELAY_MS=s.maximumAudioDelayMs,ca.MAXIMUM_AUDIO_DELAY_DATA_POINTS=s.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=p},7361429724:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6925537195));let p=r(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),s=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&s}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,s,i){super(s,i,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=s.sendingAudioFailureSamplesToConsider>0?s.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=s.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=s.maximumTimesToWarn,this.coolDownTimeMs=s.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=p},5618615883:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6925537195));let p=r(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,s=a*this.packetsExpected;let i=0;for(let e=0;e<a;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/s,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,s){super(a,s,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=p},9145095843:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var d;(function(u){u.VideoEncodingCpuHealth="Video Encoding CPU Health",u.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(d=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=d},6862823406:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6925537195)),p=u(d(9145095843));let m=r(class extends h.default{health(){const s=this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold&&this.currentData.videoEncodingTimePerFrameInMs>=this.highEncodeCpuMsPerFrameThreshold;if(!this.currentData.isVideoEncoderHardware&&(s||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(s,i){super(s,i,p.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=s.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=s.highEncodeCpuMsThreshold,this.highEncodeCpuMsPerFrameThreshold=s.highEncodeCpuMsPerFrameThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=m},2633548471:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6925537195)),p=u(d(9145095843));let m=r(class extends h.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(s,i){super(s,i,p.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=s.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=m},2116171594:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(9671487336);let h=r(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,a,s){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",s),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let a=0,s=0;const i=m.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,n=i.audioSpeakerDelayMs;typeof n=="number"&&!isNaN(n)&&this.connectionHealthData.setAudioSpeakerDelayMs(n);const o=m.getRTCStatsReport();let f=0,g=0;o.forEach(v=>{v.type==="candidate-pair"&&(v.bytesReceived&&(f+=v.bytesReceived),v.requestsReceived&&(g+=v.requestsReceived),v.responsesReceived&&(g+=v.responsesReceived))});const S=f-this.lastTotalBytesReceived;this.lastTotalBytesReceived=f;const c=g-this.lastTotalStunMessagesReceived;if(this.lastTotalStunMessagesReceived=g,typeof e=="number"&&typeof t=="number"){if(a=e,s=t,a<0||s<0||S<0||c<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,s),S>0||c>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||s>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateVideoEncodingHealth(m),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(m){const a=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),s=m.getVideoUpstreamSsrcs();if(!a||s.length===0){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}let i=!1,e=0,t=0,n=0,o=0;for(const g of s)i||(i=Boolean(m.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",g))),e+=m.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",g),t+=m.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",g),n+=m.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",g),o+=m.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",g);const f=o>0?e/o:0;this.connectionHealthData.setIsVideoEncoderHardware(Boolean(i)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(f),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(n),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(m,a){m.unshift(a),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{u.Maybe.of(m.connectionHealthDidChange).map(a=>a.bind(m)(this.connectionHealthData.clone()))})}constructor(m,a,s,i,e){this.audioVideoController=m,this.realtimeController=a,this.connectionHealthData=s,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.lastTotalStunMessagesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},3944645711:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.Modality="#content"})(d||(d={})),l.default=d},2140051607:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9445576035)),m=h(d(6125631555));let a=r(class Hh{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return u(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return u(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new p.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||Hh.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||Hh.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},6092672343:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(g,S,c,v){function _(E){return E instanceof c?E:new c(function(b){b(E)})}return r(_,"adopt"),new(c||(c=Promise))(function(E,b){function T(w){try{O(v.next(w))}catch(D){b(D)}}r(T,"fulfilled");function I(w){try{O(v.throw(w))}catch(D){b(D)}}r(I,"rejected");function O(w){w.done?E(w.value):_(w.value).then(T,I)}r(O,"step"),O((v=v.apply(g,S||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(2425311569)),m=h(d(3456656950)),a=h(d(6504474338)),s=h(d(1594701503)),i=h(d(3066440630)),e=d(9671487336),t=h(d(8324353133)),n=h(d(5801810927)),o=h(d(3944645711));let f=r(class{static createContentShareMeetingSessionConfigure(S){const c=new m.default;return c.meetingId=S.meetingId,c.externalMeetingId=S.externalMeetingId,c.urls=S.urls,c.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,c.credentials=new a.default,c.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,c.credentials.externalUserId=S.credentials.externalUserId,c.credentials.joinToken=S.credentials.joinToken+o.default.Modality,c.meetingFeatures=S.meetingFeatures.clone(),c.videoDownlinkBandwidthPolicy=new t.default,c}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,c){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new n.default(this.contentAudioVideo.logger,c)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return u(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===p.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let c=0;c<this.mediaStreamBroker.mediaStream.getTracks().length;c++)this.mediaStreamBroker.mediaStream.getTracks()[c].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,c){return u(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,c);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(c=>c.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(c=>c.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return u(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const c of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(c)&&S(c)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(c=>{e.Maybe.of(c.contentShareDidStop).map(v=>v.call(c))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,c,v,_)=>{const E=new s.default(S).hasModality(s.default.MODALITY_CONTENT),b=new s.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!E||!b||!c||this.contentShareTile)return;const T=this.mediaStreamBroker.mediaStream;if(T!=null&&T.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const I=T.getVideoTracks()[0];let O,w;if(I.getSettings){const D=I.getSettings();O=D.width,w=D.height}else{const D=I.getCapabilities();O=D.width,w=D.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,T,O,w,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(I=>{e.Maybe.of(I.contentShareDidStart).map(O=>O.call(I))})})}constructor(S,c,v){this.mediaStreamBroker=S,this.contentAudioVideo=c,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=f},2708683354:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let u=r(class Zs{static register(){!("document"in d.g)||!document.addEventListener||Zs.shouldRegisterCSPMonitor&&(Zs.added||(document.addEventListener("securitypolicyviolation",Zs.listener),Zs.added=!0))}static unregister(){!("document"in d.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Zs.listener),Zs.loggers=new Set,Zs.added=!1)}static disable(){Zs.shouldRegisterCSPMonitor=!1,Zs.unregister()}static addLogger(p){p&&Zs.loggers.add(p)}static removeLogger(p){p&&Zs.loggers.delete(p)}},"CSPMonitor");l.default=u,u.loggers=new Set,u.shouldRegisterCSPMonitor=!0,u.added=!1,u.listener=h=>{const p=`Security Policy Violation
Blocked URI: ${h.blockedURI}
Violated Directive: ${h.violatedDirective}
Original Policy: ${h.originalPolicy}
Document URI: ${h.documentURI}
Source File: ${h.sourceFile}
Line No.: ${h.lineNumber}
`;for(const m of u.loggers)m.error(p);u.loggers.size===0&&console.error(p)}},1958669480:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(h,p,m,a,s,i){this.timestampMs=h,this.topic=p,this.data=m,this.senderAttendeeId=a,this.senderExternalUserId=s,this.throttled=!!i}},"DataMessage");l.default=d},5873221632:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function d(u){return u&&"destroy"in u}r(d,"isDestroyable"),l.isDestroyable=d},7469158520:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function d(u){return!!u&&typeof u=="object"&&"mute"in u&&"stop"in u&&"intrinsicDevice"in u}r(d,"isAudioTransformDevice"),l.isAudioTransformDevice=d},6125631555:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(O,w,D,R){function L(H){return H instanceof D?H:new D(function(K){K(H)})}return r(L,"adopt"),new(D||(D=Promise))(function(H,K){function ee(ce){try{ae(R.next(ce))}catch(Te){K(Te)}}r(ee,"fulfilled");function q(ce){try{ae(R.throw(ce))}catch(Te){K(Te)}}r(q,"rejected");function ae(ce){ce.done?H(ce.value):L(ce.value).then(ee,q)}r(ae,"step"),ae((R=R.apply(O,w||[])).next())})},h=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9445576035)),m=h(d(6352527919)),a=h(d(3066440630)),s=h(d(6544037895)),i=d(9671487336),e=h(d(6948472094)),t=h(d(6158504357)),n=d(7469158520),o=h(d(549557744)),f=h(d(9068219729)),g=h(d(7819926287)),S=h(d(1827432705)),c=h(d(8925470260)),v=h(d(7676545646)),_=h(d(2306050026)),E=h(d(2425311569)),b=d(6229167887);let T=r(class kr{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(w=this.mediaDeviceWrapper)===null||w===void 0||w.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(w=this.mediaDeviceWrapper)===null||w===void 0||w.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return u(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audioinput",w);return this.trace("listAudioInputDevices",w,D),D})}listVideoInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("videoinput",w);return this.trace("listVideoInputDevices",w,D),D})}listAudioOutputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audiooutput",w);return this.trace("listAudioOutputDevices",w,D),D})}pushAudioMeetingStateForPermissions(w){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(w===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(w){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(w===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(w){return u(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(w))})}startAudioInputTask(w){var D;return u(this,void 0,void 0,function*(){if(w===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return n.isAudioTransformDevice(w)?(this.logger.info(`Choosing transform input device ${w}`),yield this.chooseAudioTransformInputDevice(w)):(this.logger.info(`Choosing intrinsic audio input device ${w}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",w)),this.trace("startAudioInputDevice",w,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(D=this.transform)===null||D===void 0?void 0:D.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(R){throw R}})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return u(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(w){var D;return u(this,void 0,void 0,function*(){if(((D=this.transform)===null||D===void 0?void 0:D.device)===w)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const R=kr.getAudioContext();if(!(R instanceof OfflineAudioContext))switch(R.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield R.resume()}let L;try{L=yield w.createAudioNode(R)}catch(K){throw this.logger.error(`Unable to create transform device node: ${K}.`),K}const H=yield w.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",H),this.logger.debug(`Got inner stream: ${H}.`),this.setTransform(w,L)})}chooseVideoTransformInputDevice(w){var D;return u(this,void 0,void 0,function*(){if(this.eventController&&w instanceof e.default&&w.passEventControllerToProcessors(this.eventController),w===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const R=this.chosenVideoTransformDevice;R&&this.logger.info("Switched from previous VideoTransformDevice");const L=!!R,H=yield w.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((D=this.activeDevices.video)===null||D===void 0?void 0:D.stream,H)){this.logger.info("video transform device needs new intrinsic device"),L&&R.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=w,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",H),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=w,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield w.transformStream(this.activeDevices.video.stream)})}startVideoInput(w){return u(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(w))})}startVideoInputTask(w){return u(this,void 0,void 0,function*(){if(!w){this.logger.error("Invalid video input device");return}try{return b.isVideoTransformDevice(w)?(this.logger.info(`Choosing video transform device ${w}`),yield this.chooseVideoTransformInputDevice(w),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",w),this.trace("startVideoInputDevice",w),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(D){throw D}})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return u(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(w){return u(this,void 0,void 0,function*(){this.audioOutputDeviceId=w,this.watchForDeviceChangesIfNecessary();const D=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(D),this.trace("chooseAudioOutput",w,null)})}addDeviceChangeObserver(w){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(w),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(w){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(w),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var w,D;if(!this.activeDevices.audio)return null;const R=(D=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||D===void 0?void 0:D.end;if(R){const L=R.context.createAnalyser();return L.removeOriginalInputs=()=>{try{R.disconnect(L)}catch{}},R.connect(L),L}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(w){const D=kr.getAudioContext(),R=D.createAnalyser(),L=D.createMediaStreamSource(w);return L.connect(R),this.trace("createAnalyserNodeForAudioInput"),R.removeOriginalInputs=()=>{try{L.disconnect(R)}catch{}},R}startVideoPreviewForVideoInput(w){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",w.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,w,!0),this.trace("startVideoPreviewForVideoInput",w.id)}stopVideoPreviewForVideoInput(w){t.default.disconnectVideoStreamFromVideoElement(w,!1),this.trace("stopVideoPreviewForVideoInput",w.id)}setDeviceLabelTrigger(w){if(this.deviceInfoCache){for(const D of this.deviceInfoCache)if(!D.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=w,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(w){let D=null;return this.useWebAudio?(D=kr.getAudioContext().createMediaStreamSource(w),D.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",w.id),D}chooseVideoInputQuality(w,D,R){const L=this.browserBehavior.requiresResolutionAlignment(w,D);this.videoInputQualitySettings=new E.default(L[0],L[1],R)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(w){return u(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(w){const D=this.activeDevices[w];if(!D)return;const R=D.endedCallback,L=D.trackMuteCallback,H=D.trackUnmuteCallback;for(const K of D.stream.getTracks())K.stop(),R&&K.removeEventListener("ended",R),L&&K.removeEventListener("mute",L),H&&K.removeEventListener("unmute",H),delete D.endedCallback,delete D.trackMuteCallback,delete D.trackUnmuteCallback,delete this.activeDevices[w]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(w){var D;let R=this.activeDevices.audio;if(this.useWebAudio&&(R=this.getMediaStreamDestinationNode()),!!R){for(const L of R.stream.getTracks())L.enabled!==w&&(L.enabled=w);this.muted!==!w&&(this.muted=!w,(D=this.transform)===null||D===void 0||D.device.mute(this.muted))}}static getIntrinsicDeviceId(w){if(!w)return;if(typeof w=="string")return w;if(w.id)return w.id;const R=w.deviceId;if(!R)return;if(typeof R=="string"||Array.isArray(R))return R;const L=R;if(typeof L.exact=="string"||Array.isArray(L.exact))return L.exact}static createEmptyAudioDevice(){return kr.synthesizeAudioDevice(0)}static synthesizeAudioDevice(w){const D=kr.getAudioContext(),R=D.createMediaStreamDestination();if(w){const L=D.createGain();L.gain.value=.1,L.connect(R);const H=D.createOscillator();H.frequency.value=w,H.connect(L),H.start()}else{const L=D.createBufferSource();try{L.buffer=D.createBuffer(1,D.sampleRate*5,D.sampleRate)}catch(H){if(H&&H.name==="NotSupportedError")L.buffer=D.createBuffer(1,kr.defaultSampleRate*5,kr.defaultSampleRate);else throw H}L.buffer.getChannelData(0)[0]=3e-4,L.loop=!0,L.connect(R),L.start()}return R.stream}listDevicesOfKind(w,D){return u(this,void 0,void 0,function*(){return(D||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(w)})}updateDeviceInfoCacheFromBrowser(){var w;return u(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let R=yield navigator.mediaDevices.enumerateDevices(),L=!0;for(const H of R)if(!H.label){L=!1;break}if(!L)try{this.logger.info("attempting to trigger media device labels since they are hidden");const H=yield this.deviceLabelTrigger();R=yield navigator.mediaDevices.enumerateDevices();for(const K of H.getTracks())K.stop()}catch(H){this.logger.info("unable to get media device labels"),(w=this.eventController)===null||w===void 0||w.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(H)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(R)}`),this.deviceInfoCache=R})}listCachedDevicesOfKind(w){const D=[];if(this.deviceInfoCache)for(const R of this.deviceInfoCache)R.kind===w&&D.push(R);return D}handleDeviceChange(){return u(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const w=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),R=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const L=this.listCachedDevicesOfKind("audioinput"),H=this.listCachedDevicesOfKind("videoinput"),K=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(ee=>{this.areDeviceListsEqual(w,L)||i.Maybe.of(ee.audioInputsChanged).map(q=>q.bind(ee)(L)),this.areDeviceListsEqual(D,H)||i.Maybe.of(ee.videoInputsChanged).map(q=>q.bind(ee)(H)),this.areDeviceListsEqual(R,K)||i.Maybe.of(ee.audioOutputsChanged).map(q=>q.bind(ee)(K))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(w,D){return u(this,void 0,void 0,function*(){try{w==="audio"?(this.useWebAudio&&this.browserBehavior.requiresAudioContextResetOnDeviceFailureForWebAudio()?(this.logger.warn("Audio input device which was active is no longer available, suspending and resuming audio context before resetting to empty device to ensure packets are sent"),yield this.stopAudioInput(),kr.suspendAudioContext(),kr.resumeAudioContext()):this.logger.warn("Audio input device which was active is no longer available, resetting to empty device to ensure packets are sent"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}w==="audio"?this.forEachObserver(R=>{i.Maybe.of(R.audioInputStreamEnded).map(L=>L.bind(R)(D))}):this.forEachObserver(R=>{i.Maybe.of(R.videoInputStreamEnded).map(L=>L.bind(R)(D))})})}forEachObserver(w){for(const D of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(D)&&w(D)})}forEachMediaStreamBrokerObserver(w){for(const D of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(D)&&w(D)})}areDeviceListsEqual(w,D){return JSON.stringify(w.map(R=>JSON.stringify(R)).sort())===JSON.stringify(D.map(R=>JSON.stringify(R)).sort())}intrinsicDeviceAsMediaStream(w){return w&&w.id?w:null}hasSameMediaStreamId(w,D,R){var L,H,K,ee;let q;return w==="audio"?(q=R==null?void 0:R.audio.streamId,!!q&&q===((H=(L=D.constraints)===null||L===void 0?void 0:L.audio)===null||H===void 0?void 0:H.streamId)):(q=R==null?void 0:R.video.streamId,!!q&&q===((ee=(K=D==null?void 0:D.constraints)===null||K===void 0?void 0:K.video)===null||ee===void 0?void 0:ee.streamId))}hasSameGroupId(w,D,R){if(w==="")return!0;const L=kr.getIntrinsicDeviceId(R);return this.logger.debug(`Checking deviceIds ${L} of type ${typeof L} with groupId ${w}`),typeof L=="string"&&w===this.getGroupIdFromDeviceId(D,L)}getGroupIdFromDeviceId(w,D){if(this.deviceInfoCache!==null){const R=this.listCachedDevicesOfKind(`${w}input`).find(L=>L.deviceId===D);if(R&&R.groupId)return this.logger.debug(`GroupId of deviceId ${D} found in cache is ${R.groupId}`),R.groupId}return this.logger.debug(`GroupId of deviceId ${D} found in cache is empty`),""}handleGetUserMediaError(w,D){if(!w)throw new f.default(w);switch(w.name){case"NotReadableError":case"TrackStartError":throw new S.default(w);case"NotFoundError":case"DevicesNotFoundError":throw new g.default(w);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw D&&D<kr.permissionDeniedOriginDetectionThresholdMs?new v.default(w,"Permission denied by browser"):new v.default(w,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new c.default(w);case"TypeError":throw new _.default(w);case"AbortError":default:throw new f.default(w)}}matchesDeviceSelection(w,D,R,L){return R&&R.stream.active&&(this.hasSameMediaStreamId(w,R,L)||R.groupId!==null&&this.hasSameGroupId(R.groupId,w,D))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(R.constraints)} to proposed constraints ${JSON.stringify(L)}`),R.matchesConstraints(L)):!1}chooseInputIntrinsicDevice(w,D){var R,L;return u(this,void 0,void 0,function*(){const H=this.getMediaStreamConstraints(w,D);if(this.matchesDeviceSelection(w,D,this.activeDevices[w],H)){this.logger.info(`reusing existing ${w} input device`);return}this.activeDevices[w]&&this.activeDevices[w].stream&&this.stopTracksAndRemoveCallbacks(w);const K=Date.now(),ee=new o.default;try{this.logger.info(`requesting new ${w} device with constraint ${JSON.stringify(H)}`);const q=this.intrinsicDeviceAsMediaStream(D);w==="audio"&&D===null?(ee.stream=kr.createEmptyAudioDevice(),ee.constraints=null):q?(this.logger.info(`using media stream ${q.id} for ${w} device`),ee.stream=q,ee.constraints=H):(ee.stream=yield navigator.mediaDevices.getUserMedia(H),ee.constraints=H),yield this.handleNewInputDevice(w,ee)}catch(q){const ae=this.getErrorMessage(q);w==="audio"?(R=this.eventController)===null||R===void 0||R.publishEvent("audioInputFailed",{audioInputErrorMessage:ae}):(L=this.eventController)===null||L===void 0||L.publishEvent("videoInputFailed",{videoInputErrorMessage:ae}),this.logger.error(`failed to get ${w} device for constraints ${JSON.stringify(H)}: ${ae}`);let ce=!0;if(q&&"constraint"in q&&(this.logger.error(`Over-constrained by constraint: ${q.constraint}`),this.useMediaConstraintsFallback)){const Te=this.getMediaStreamConstraints(w,D,!0),ke=JSON.stringify(Te);if(ke!==JSON.stringify(H)){this.logger.info(`retry requesting new ${w} device with minimal constraint ${ke}`);try{ee.stream=yield navigator.mediaDevices.getUserMedia(Te),ee.constraints=Te,yield this.handleNewInputDevice(w,ee),ce=!1}catch(tt){this.logger.error(`failed to get ${w} device for constraints ${ke}: ${this.getErrorMessage(tt)}`)}}}if(ce){if(w==="audio"){this.logger.info(`choosing null ${w} device instead`);try{ee.stream=kr.createEmptyAudioDevice(),ee.constraints=null,yield this.handleNewInputDevice(w,ee)}catch(Te){this.logger.error(`failed to choose null ${w} device. ${Te.name}: ${Te.message}`)}}this.handleGetUserMediaError(q,Date.now()-K)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(w){return w?w.name&&w.message?`${w.name}: ${w.message}`:w.name?w.name:w.message?w.message:"UnknownError":"UnknownError"}handleNewInputDevice(w,D){var R;return u(this,void 0,void 0,function*(){this.logger.info(`got ${w} device for constraints ${JSON.stringify(D.constraints)}`);const L=(R=this.getMediaTrackSettings(D.stream))===null||R===void 0?void 0:R.deviceId;D.groupId=L?this.getGroupIdFromDeviceId(w,L):"",this.activeDevices[w]=D,this.logger.debug(`Set activeDevice to ${JSON.stringify(D)}`),this.watchForDeviceChangesIfNecessary();const H=D.stream.getTracks()[0];if(H&&(D.endedCallback=()=>{this.activeDevices[w]&&this.activeDevices[w].stream===D.stream&&(this.handleDeviceStreamEnded(w,L),delete D.endedCallback)},H.addEventListener("ended",D.endedCallback,{once:!0})),w==="audio"){const K=D.stream.getAudioTracks()[0];if(K){const ee=K.getSettings().deviceId||D.stream;D.trackMuteCallback=()=>{this.mediaStreamMuteObserver(ee,!0)},D.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(ee,!1)},K.addEventListener("mute",D.trackMuteCallback,{once:!1}),K.addEventListener("unmute",D.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),K.muted?D.trackMuteCallback():D.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(w,D,R,L){if(L&&this.listCachedDevicesOfKind(`${w}input`).length===1)return!0;const H={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?H.deviceId=D:H.deviceId={exact:D},R&&(H.groupId=R),L?H:w==="video"?(H.width={ideal:this.videoInputQualitySettings.videoWidth},H.height={ideal:this.videoInputQualitySettings.videoHeight},H.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},H):(this.supportSampleRateConstraint()&&(H.sampleRate={ideal:kr.defaultSampleRate}),this.supportSampleSizeConstraint()&&(H.sampleSize={ideal:kr.defaultSampleSize}),this.supportChannelCountConstraint()&&(H.channelCount={ideal:kr.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},H))}getMediaStreamConstraintsFromTrackConstraints(w,D){return w==="audio"?{audio:D}:{video:D}}getMediaStreamConstraints(w,D){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L={};if(!D)return null;const H=this.intrinsicDeviceAsMediaStream(D);if(H)return L.streamId=H.id,this.getMediaStreamConstraintsFromTrackConstraints(w,L);if(typeof D=="string"){let K="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?K=this.getGroupIdFromDeviceId(w,D):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),L=this.calculateMediaStreamConstraints(w,D,K,R),this.getMediaStreamConstraintsFromTrackConstraints(w,L)}return I(D)?(L=this.calculateMediaStreamConstraints(w,D.deviceId,D.groupId,R),this.getMediaStreamConstraintsFromTrackConstraints(w,L)):(L=D,this.getMediaStreamConstraintsFromTrackConstraints(w,L))}deviceInfoFromDeviceId(w,D){if(this.deviceInfoCache===null)return null;for(const R of this.deviceInfoCache)if(R.kind===w&&R.deviceId===D)return R;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(w,D){if(!w||!w.active||!D)return!1;if(D.id)return w.id===D.id;const R=this.getMediaTrackSettings(w);if(!R.deviceId)return!1;const L=kr.getIntrinsicDeviceId(D);return typeof L=="string"?R.deviceId===L:!1}getMediaTrackSettings(w){var D;return(D=w.getTracks()[0])===null||D===void 0?void 0:D.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const w=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(w)}setTransform(w,D){var R,L;(L=(R=this.transform)===null||R===void 0?void 0:R.nodes)===null||L===void 0||L.end.disconnect(),this.transform={nodes:D,device:w};const H=D==null?void 0:D.end,K=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${H} to destination ${K}.`),H==null||H.connect(K),this.reconnectAudioInputs()}removeTransform(){var w;const D=this.transform;if(D)return(w=this.transform.nodes)===null||w===void 0||w.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),D}attachAudioInputStreamToAudioContext(w){var D;(D=this.audioInputSourceNode)===null||D===void 0||D.disconnect(),this.audioInputSourceNode=kr.getAudioContext().createMediaStreamSource(w);const R=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(R)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=kr.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var w,D;return((D=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||D===void 0?void 0:D.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(w){kr.defaultLatencyHint=w}static getAudioContext(){if(!kr.audioContext){const w={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(w.sampleRate=kr.defaultSampleRate),new p.default().requiresPlaybackLatencyHintForAudioContext()&&(w.latencyHint="playback"),kr.defaultLatencyHint&&(w.latencyHint=kr.defaultLatencyHint),kr.audioContext=new(window.AudioContext||window.webkitAudioContext)(w)}return kr.audioContext}static suspendAudioContext(){return u(this,void 0,void 0,function*(){return kr.audioContext?kr.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return u(this,void 0,void 0,function*(){return kr.audioContext?kr.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(kr.audioContext)try{kr.audioContext.close()}catch{}kr.audioContext=null}addMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.add(w)}removeMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.delete(w)}publishVideoInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(D=>{D.videoInputDidChange&&D.videoInputDidChange(w)}),this.pushVideoMeetingStateForPermissions(w)}publishAudioInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(D=>{D.audioInputDidChange&&D.audioInputDidChange(w)}),this.pushAudioMeetingStateForPermissions(w)}publishAudioOutputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(D=>{D.audioOutputDidChange&&D.audioOutputDidChange(w)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(w,D,R){let L=`API/DefaultDeviceController/${w}`;typeof D<"u"&&(L+=` ${JSON.stringify(D)}`),typeof R<"u"&&(L+=` -> ${JSON.stringify(R)}`),this.logger.info(L)}constructor(w,D,R=new p.default,L){this.logger=w,this.browserBehavior=R,this.eventController=L,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new s.default,this.videoInputTaskQueue=new s.default,this.muted=!1,this.mediaStreamMuteObserver=(q,ae)=>{for(const ce of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(ce)&&ce.audioInputMuteStateChanged&&ce.audioInputMuteStateChanged(q,ae)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:H=!1,useMediaConstraintsFallback:K=!0}=D||{};this.useWebAudio=H,this.useMediaConstraintsFallback=K,this.videoInputQualitySettings=new E.default(kr.defaultVideoWidth,kr.defaultVideoHeight,kr.defaultVideoFrameRate);const ee=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=ee[0],this.videoInputQualitySettings.videoHeight=ee[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const q=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(q)}`)}catch(q){w.error(q.message)}}},"DefaultDeviceController");l.default=T,T.permissionDeniedOriginDetectionThresholdMs=500,T.defaultVideoWidth=960,T.defaultVideoHeight=540,T.defaultVideoFrameRate=15,T.defaultSampleRate=48e3,T.defaultSampleSize=16,T.defaultChannelCount=1,T.audioContext=null;function I(O){return typeof O=="object"&&"deviceId"in O&&"groupId"in O&&"kind"in O&&"label"in O}r(I,"isMediaDeviceInfo")},549557744:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{matchesConstraints(h){return JSON.stringify(this.constraints)===JSON.stringify(h)}constructor(){this.groupId=""}},"DeviceSelection");l.default=d},9068219729:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class extends Error{constructor(h,p){super(p||"Error fetching device."),this.cause=h,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=d},8297410470:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const p=h(d(7836148100)),m=h(d(2425311569));let a=r(class extends p.default{destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,n){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let s=r(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=s},7819926287:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9068219729));let p=r(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=p},1827432705:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9068219729));let p=r(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=p},8925470260:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9068219729));let p=r(class extends h.default{constructor(a,s){super(a),this.constraint=s,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=p},7676545646:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9068219729));let p=r(class extends h.default{constructor(a,s){super(a,s),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=p},3959565700:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{mute(p){return d(this,void 0,void 0,function*(){})}stop(){var p;return d(this,void 0,void 0,function*(){(p=this.node)===null||p===void 0||p.disconnect()})}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.inner})}createAudioNode(p){var m;return d(this,void 0,void 0,function*(){return(m=this.node)===null||m===void 0||m.disconnect(),this.node=yield this.createSingleAudioNode(p),{start:this.node,end:this.node}})}constructor(p){this.inner=p}},"SingleNodeAudioTransformDevice");l.default=u},2306050026:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9068219729));let p=r(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=p},2425311569:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return this.videoWidth===h.videoWidth&&this.videoHeight===h.videoHeight&&this.videoFrameRate===h.videoFrameRate}constructor(h,p,m){this.videoWidth=h,this.videoHeight=p,this.videoFrameRate=m}},"VideoQualitySettings");l.default=d,d.VideoDisabled=new d(0,0,0),d.VideoResolutionHD=new d(1280,720,30),d.VideoResolutionFHD=new d(1920,1080,30),d.VideoResolutionUHD=new d(3840,2160,30)},6229167887:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function d(u){return!!u&&typeof u=="object"&&"transformStream"in u&&"stop"in u&&"intrinsicDevice"in u}r(d,"isVideoTransformDevice"),l.isVideoTransformDevice=d},631034393:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{destroy(){return d(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(p){this.observerQueue.add(p),p.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(p){this.observerQueue.delete(p)}constructor(p,m){if(this.devicePixelRatioSource=p,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(s=>{s.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):m.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=u},7185484726:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=d},7780712218:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(t,n,o,f){function g(S){return S instanceof o?S:new o(function(c){c(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,c){function v(b){try{E(f.next(b))}catch(T){c(T)}}r(v,"fulfilled");function _(b){try{E(f.throw(b))}catch(T){c(T)}}r(_,"rejected");function E(b){b.done?S(b.value):g(b.value).then(v,_)}r(E,"step"),E((f=f.apply(t,n||[])).next())})},h=this&&this.__rest||function(t,n){var o={};for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&n.indexOf(f)<0&&(o[f]=t[f]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,f=Object.getOwnPropertySymbols(t);g<f.length;g++)n.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(t,f[g])&&(o[f[g]]=t[f[g]]);return o},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=p(d(9173407961)),a=p(d(5790858051)),s=p(d(7680559561)),i=d(1366921492);let e=r(class Ya{addEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.addEventListener||!("document"in d.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(n){(n.type==="visibilitychange"&&document.visibilityState==="hidden"||n.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.removeEventListener||!("document"in d.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var n;this.removeEventListeners(),this.addEventListeners(),(n=this.intervalScheduler)===null||n===void 0||n.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var n;(n=this.intervalScheduler)===null||n===void 0||n.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(n){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(n)}`);const{name:o,ts:f,attributes:g}=n,S=g&&this.filterAttributes(g,this.attributesToFilter),c=Object.assign({name:o,ts:f},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(c)}`);const v=this.getSize(c);if(v>Ya.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${Ya.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(c)}`),this.sendEventImmediately({name:o,ts:f,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(c),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const _=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(_),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(n,o){const f=new Set(o);return Object.keys(n).filter(S=>f.has(S)).forEach(S=>delete n[S]),n}initializeAndGetCurrentIngestionEvent(){const n={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(n),n}bufferItemThresholdReached(n){return n+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Ya.MAX_PAYLOAD_ITEMS}getSize(n){let o=0;if(typeof n=="object")for(const[f,g]of Object.entries(n))o+=this.getPrimitiveSize(f),o+=this.getSize(g);else o+=this.getPrimitiveSize(n);return o}getPrimitiveSize(n){let o=0;return typeof n=="string"?o+=n.length*2:typeof n=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(n=Math.min(this.buffer.length,n+1),this.buffer.splice(o,n))}makeBeaconRequestBody(n){const o={metadata:this.metadata,events:n,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(n){const o={metadata:this.metadata,events:n};return JSON.stringify(o)}sendEventImmediately(n){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(n)}`);const{name:o,ts:f,attributes:g}=n,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:f},g)]};let c=!1,v=null;const _=this.makeRequestBody([S]);try{if(v=yield this.send(_),v.ok){try{const E=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${_}, message: ${JSON.stringify(E)}`)}catch(E){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${E} for event ${_}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${_} with response status ${v.status}`),c=!0}catch(E){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${_} to the ingestion endpoint ${E}.`),c=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const b=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${b}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,b)?c=!1:c=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${_}`),c=!0}}c&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${_}`),this.failedIngestionEvents.push(S))})}send(n){return u(this,void 0,void 0,function*(){const o=new m.default(Ya.RETRY_FIXED_BACKOFF_WAIT_MS,Ya.RETRY_SHORT_BACKOFF_MS,Ya.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:n});if(g.ok||!Ya.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${n} due to status code ${g.status}.`),f++,f<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield i.wait(S)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${n}`)}catch(f){throw f}})}sendBeacon(){return u(this,void 0,void 0,function*(){const n=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(n)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);n.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));n.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{n.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),n.length===0)return;const o=this.makeBeaconRequestBody(n);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(n,o,f,g,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=H=>({type:H.type,v:H.v,payloads:[...H.payloads]}),this.sendEvents=()=>u(this,void 0,void 0,function*(){if(this.lock)return;const H=this.getItems(this.flushSize);if(H.length===0)return;this.lock=!0;const K=this.makeRequestBody(H);let ee=!1;const q=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(q,H);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${K}`);const ae=yield this.send(K);if(this.cancellableEvents.delete(q),!ae.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${K} with response status ${ae.status}`),ee=!0;else try{const ce=yield ae.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${K} message: ${JSON.stringify(ce)}`)}catch(ce){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ce} for events ${K}`)}}catch(ae){ee=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${K} to the ingestion endpoint ${ae}`)}finally{this.lock=!1}ee&&(this.cancellableEvents.delete(q),this.failedIngestionEvents.push(...H))});const c=new s.default(S).getParserResult(),{browserMajorVersion:v}=c,_=h(c,["browserMajorVersion"]),E=o.toJSON(),{type:b,v:T}=E,I=h(E,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},_),I),Object.keys(this.metadata).forEach(H=>this.attributesToFilter.push(H)),this.type=b,this.v=T,this.ingestionURL=f,this.logger=S,this.importantEvents=new Set(g);const{maxBufferCapacityKb:O,totalBufferItems:w,flushSize:D,flushIntervalMs:R,retryCountLimit:L}=n;this.maxBufferCapacityBytes=O*1024,this.totalBufferItems=w,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/w),this.flushIntervalMs=R,this.flushSize=D,this.retryCountLimit=L,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=H=>this.beaconEventHandler(H),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},4329135474:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h=5e3,p=2,m=64,a=100,s=15){this.flushIntervalMs=h,this.flushSize=p,this.maxBufferCapacityKb=m,this.totalBufferItems=a,this.retryCountLimit=s}},"EventBufferConfiguration");l.default=d},9375803731:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(f,g,S,c){function v(_){return _ instanceof S?_:new S(function(E){E(_)})}return r(v,"adopt"),new(S||(S=Promise))(function(_,E){function b(O){try{I(c.next(O))}catch(w){E(w)}}r(b,"fulfilled");function T(O){try{I(c.throw(O))}catch(w){E(w)}}r(T,"rejected");function I(O){O.done?_(O.value):v(O.value).then(b,T)}r(I,"step"),I((c=c.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(5961608329),m=d(5873221632),a=h(d(818962756)),s=h(d(9219485394)),i=h(d(5512071755)),e=h(d(3066440630)),t=h(d(6332689210)),n=h(d(3415897055));let o=r(class Al{addObserver(g){this.observerSet.add(g)}removeObserver(g){this.observerSet.delete(g)}forEachObserver(g){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&g(S)})}publishEvent(g,S){return u(this,void 0,void 0,function*(){const c=Date.now();this.meetingHistoryStates.push({name:g,timestampMs:c});const v=Object.freeze(Object.assign(this.getAttributes(c),S));this.forEachObserver(_=>{_.eventDidReceive(g,v)}),this.reportEvent(g,c,S)})}reportEvent(g,S,c){var v;return u(this,void 0,void 0,function*(){let _;try{c&&(_=n.default(c)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,g,_)}catch(E){this.logger.error(`Error reporting event ${E}`)}})}setupEventReporter(g,S,c){if(c)this._eventReporter=c;else if(g.urls){const v=g.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:_,credentials:{attendeeId:E,joinToken:b}}=g,T=new i.default(_,E,b),I=new a.default(T,v);this._eventReporter=new s.default(I,S)}}}getAttributes(g){var S,c;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||Al.UNAVAILABLE,osVersion:((c=this.parserResult)===null||c===void 0?void 0:c.os.version)||Al.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:g}}get eventReporter(){return this._eventReporter}destroy(){return u(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(g,S,c){var v,_,E,b,T,I,O;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=g,this.setupEventReporter(g,S,c);try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null}catch(w){this.logger.error(w.message)}this.browserMajorVersion=((E=(_=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||_===void 0?void 0:_.version)===null||E===void 0?void 0:E.split(".")[0])||Al.UNAVAILABLE,this.browserName=((b=this.parserResult)===null||b===void 0?void 0:b.browser.name)||Al.UNAVAILABLE,this.browserVersion=((T=this.parserResult)===null||T===void 0?void 0:T.browser.version)||Al.UNAVAILABLE,this.deviceName=[((I=this.parserResult)===null||I===void 0?void 0:I.device.vendor)||"",((O=this.parserResult)===null||O===void 0?void 0:O.device.model)||""].join(" ").trim()||Al.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},3415897055:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=r(u=>{const h={};for(const[p,m]of Object.entries(u))if(!(m==null||m===""))if(typeof m=="number"||typeof m=="string")h[p]=m;else throw new TypeError("Unhandled type received while flattening attributes.");return h},"flattenEventAttributes");l.default=d},818962756:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(4329135474));let p=r(class{constructor(a,s,i=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=s,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");l.default=p},9219485394:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(5873221632),m=h(d(7780712218));let a=r(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return u(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(n){this.logger.error(`Event Reporting - Error adding event to buffer ${n}`)}})}destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),p.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:n,eventBufferConfiguration:o}=i,{eventsToIgnore:f}=t;this.eventBuffer=new m.default(o,t,n,this.importantEvents,e),this.logger=e,this.eventsToIgnore=f,this.start()}},"DefaultMeetingEventReporter");l.default=a},5449969688:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reportEvent(h,p,m){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=d},5512071755:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const h={};return h.type=this.type,h.v=this.v,h.meetingId=this.meetingId,h.attendeeId=this.attendeeId,h}constructor(h,p,m,a=[]){this.type="Meet",this.v=1,this.meetingId=h,this.attendeeId=p,this.eventsToIgnore=a,this.authenticationToken=m}},"MeetingEventsClientConfiguration");l.default=d},28946295:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(Oo){return Oo&&Oo.__esModule?Oo:{default:Oo}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoElementResolutionMonitor=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=l.MeetingReadinessCheckerConfiguration=void 0,l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=l.RedundantAudioEncoderWorkerCode=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=l.VideoEncodingCpuConnectionHealthPolicy=void 0;const h=u(d(4731147871));l.AllHighestVideoBandwidthPolicy=h.default;const p=u(d(326556152));l.ApplicationMetadata=p.default;const m=u(d(3066440630));l.AsyncScheduler=m.default;const a=u(d(8563305537));l.AttachMediaInputTask=a.default;const s=u(d(6922010698));l.Attendee=s.default;const i=u(d(1577470520));l.AudioLogEvent=i.default;const e=u(d(8288024884));l.AudioProfile=e.default;const t=u(d(8511085217));l.AudioVideoControllerState=t.default;const n=u(d(6493518233));l.BackgroundBlurStrength=n.default;const o=u(d(1846007608));l.BackgroundBlurVideoFrameProcessor=o.default;const f=u(d(693400218));l.BackgroundFilterVideoFrameProcessor=f.default;const g=u(d(5038925386));l.BackgroundReplacementVideoFrameProcessor=g.default;const S=u(d(6925537195));l.BaseConnectionHealthPolicy=S.default;const c=u(d(748822893));l.BaseTask=c.default;const v=u(d(896836858));l.BitrateParameters=v.default;const _=u(d(2708683354));l.CSPMonitor=_.default;const E=u(d(5808804466));l.CanvasVideoFrameBuffer=E.default;const b=u(d(3406224828));l.CheckAudioConnectivityFeedback=b.default;const T=u(d(437211311));l.CheckAudioInputFeedback=T.default;const I=u(d(7220712718));l.CheckAudioOutputFeedback=I.default;const O=u(d(9989661280));l.CheckCameraResolutionFeedback=O.default;const w=u(d(654172010));l.CheckContentShareConnectivityFeedback=w.default;const D=u(d(5083453699));l.CheckNetworkTCPConnectivityFeedback=D.default;const R=u(d(2977514603));l.CheckNetworkUDPConnectivityFeedback=R.default;const L=u(d(5435266265));l.CheckVideoConnectivityFeedback=L.default;const H=u(d(3575737100));l.CheckVideoInputFeedback=H.default;const K=u(d(4989012661));l.CleanRestartedSessionTask=K.default;const ee=u(d(957321624));l.CleanStoppedSessionTask=ee.default;const q=u(d(3713066448));l.ClientMetricReport=q.default;const ae=u(d(3071240545));l.ClientMetricReportDirection=ae.default;const ce=u(d(3967449568));l.ClientMetricReportMediaType=ce.default;const Te=u(d(6193104267));l.ClientVideoStreamReceivingReport=Te.default;const ke=u(d(5392261736));l.ConnectionHealthData=ke.default;const tt=u(d(7666896524));l.ConnectionHealthPolicyConfiguration=tt.default;const At=u(d(632433771));l.ConsoleLogger=At.default;const Be=u(d(3944645711));l.ContentShareConstants=Be.default;const $e=u(d(2140051607));l.ContentShareMediaStreamBroker=$e.default;const Ze=u(d(9342672808));l.CreatePeerConnectionTask=Ze.default;const Je=u(d(7771209539));l.CreateSDPTask=Je.default;const dt=u(d(1958669480));l.DataMessage=dt.default;const Ot=u(d(4598598477));l.DefaultActiveSpeakerDetector=Ot.default;const Nt=u(d(6343016045));l.DefaultActiveSpeakerPolicy=Nt.default;const Ve=u(d(2988320011));l.DefaultAudioMixController=Ve.default;const He=u(d(8377273355));l.DefaultAudioVideoController=He.default;const ct=u(d(5948949947));l.DefaultAudioVideoFacade=ct.default;const yt=u(d(9445576035));l.DefaultBrowserBehavior=yt.default;const it=u(d(6092672343));l.DefaultContentShareController=it.default;const nn=u(d(6125631555));l.DefaultDeviceController=nn.default;const Xt=u(d(631034393));l.DefaultDevicePixelRatioMonitor=Xt.default;const dn=u(d(9375803731));l.DefaultEventController=dn.default;const bn=u(d(6352527919));l.DefaultMediaDeviceFactory=bn.default;const Rn=u(d(9219485394));l.DefaultMeetingEventReporter=Rn.default;const Zt=u(d(3840944435));l.DefaultMeetingReadinessChecker=Zt.default;const Mn=u(d(2187536411));l.DefaultMeetingSession=Mn.default;const Wi=u(d(6354811215));l.DefaultMessagingSession=Wi.default;const Jn=u(d(1594701503));l.DefaultModality=Jn.default;const zn=u(d(6366559347));l.DefaultPingPong=zn.default;const En=u(d(9226780571));l.DefaultRealtimeController=En.default;const sn=u(d(9778418265));l.DefaultReconnectController=sn.default;const oi=u(d(7593524919));l.DefaultSessionStateController=oi.default;const rn=u(d(2020561361));l.DefaultSigV4=rn.default;const cn=u(d(6044373597));l.DefaultSignalingClient=cn.default;const Wt=u(d(3752202768));l.DefaultSimulcastUplinkPolicy=Wt.default;const J=u(d(5801810927));l.DefaultSimulcastUplinkPolicyForContentShare=J.default;const Xe=u(d(6895064603));l.DefaultTransceiverController=Xe.default;const nt=u(d(2162159007));l.DefaultTranscriptionController=nt.default;const st=u(d(7680559561));l.DefaultUserAgentParser=st.default;const pt=u(d(8942355099));l.DefaultVideoCaptureAndEncodeParameter=pt.default;const It=u(d(7517865245));l.DefaultVideoElementResolutionMonitor=It.default;const ve=u(d(2458227545));l.DefaultVideoFrameProcessorPipeline=ve.default;const et=u(d(9151308820));l.DefaultVideoFrameProcessorTimer=et.default;const G=u(d(6054180211));l.DefaultVideoStreamIdSet=G.default;const ne=u(d(543972823));l.DefaultVideoStreamIndex=ne.default;const Me=u(d(6158504357));l.DefaultVideoTile=Me.default;const Re=u(d(8233988265));l.DefaultVideoTileController=Re.default;const Ft=u(d(8325297075));l.DefaultVideoTileFactory=Ft.default;const ot=u(d(6948472094));l.DefaultVideoTransformDevice=ot.default;const Tt=u(d(247134931));l.DefaultVolumeIndicatorAdapter=Tt.default;const we=u(d(6757985251));l.DefaultWebSocketAdapter=we.default;const Ue=u(d(7185484726));l.DevicePixelRatioWindowSource=Ue.default;const F=u(d(549557744));l.DeviceSelection=F.default;const Oe=u(d(4329135474));l.EventBufferConfiguration=Oe.default;const se=u(d(818962756));l.EventIngestionConfiguration=se.default;const ue=u(d(4998646945));l.FinishGatheringICECandidatesTask=ue.default;const X=u(d(9173407961));l.FullJitterBackoff=X.default;const lt=u(d(8467350797));l.FullJitterBackoffFactory=lt.default;const Ae=u(d(7796317769));l.FullJitterLimitedBackoff=Ae.default;const Ye=u(d(9068219729));l.GetUserMediaError=Ye.default;const Ht=u(d(9883248412));l.GlobalMetricReport=Ht.default;const Mt=u(d(7780712218));l.InMemoryJSONEventBuffer=Mt.default;const Qn=u(d(5790858051));l.IntervalScheduler=Qn.default;const $n=u(d(1413840948));l.JoinAndReceiveIndexTask=$n.default;const Vn=u(d(9994936499));l.LeaveAndReceiveLeaveAckTask=Vn.default;const kn=u(d(611997860));l.ListenForVolumeIndicatorsTask=kn.default;const tn=u(d(1796489824));l.Log=tn.default;const Gn=u(d(152907414));l.LogLevel=Gn.default;const Si=u(d(7788016908));l.MediaDeviceProxyHandler=Si.default;const nr=u(d(5512071755));l.MeetingEventsClientConfiguration=nr.default;const ln=u(d(1627276675));l.MeetingFeatures=ln.default;const jt=u(d(6533088794));l.MeetingReadinessCheckerConfiguration=jt.default;const Fn=u(d(3456656950));l.MeetingSessionConfiguration=Fn.default;const Hn=u(d(6504474338));l.MeetingSessionCredentials=Hn.default;const wi=u(d(9382604560));l.MeetingSessionLifecycleEvent=wi.default;const Pi=u(d(1753005041));l.MeetingSessionLifecycleEventCondition=Pi.default;const ni=u(d(1984577674));l.MeetingSessionStatus=ni.default;const Kn=u(d(946491843));l.MeetingSessionStatusCode=Kn.default;const ji=u(d(5922047127));l.MeetingSessionTURNCredentials=ji.default;const $i=u(d(2201325822));l.MeetingSessionURLs=$i.default;const sr=u(d(1253588984));l.MeetingSessionVideoAvailability=sr.default;const Ai=u(d(309849240));l.Message=Ai.default;const Lr=u(d(2487645864));l.MessagingSessionConfiguration=Lr.default;const Vi=u(d(4964835908));l.ModelSpecBuilder=Vi.default;const Nr=u(d(785230680));l.MonitorTask=Nr.default;const _i=u(d(6333243127));l.MultiLogger=_i.default;const Ci=u(d(2952249532));l.NScaleVideoUplinkBandwidthPolicy=Ci.default;const N=u(d(8167974884));l.NoOpAudioVideoController=N.default;const he=u(d(7420310193));l.NoOpDebugLogger=he.default;const je=u(d(8297410470));l.NoOpDeviceController=je.default;const Rt=u(d(5449969688));l.NoOpEventReporter=Rt.default;const Qt=u(d(2044674978));l.NoOpLogger=Qt.default;const An=u(d(7836148100));l.NoOpMediaStreamBroker=An.default;const qn=u(d(4401930660));l.NoOpTask=qn.default;const Pn=u(d(1300637268));l.NoOpVideoElementFactory=Pn.default;const xn=u(d(3503763380));l.NoOpVideoFrameProcessor=xn.default;const Xn=u(d(8324353133));l.NoVideoDownlinkBandwidthPolicy=Xn.default;const li=u(d(7237277783));l.NoVideoUplinkBandwidthPolicy=li.default;const Ri=u(d(7819926287));l.NotFoundError=Ri.default;const zi=u(d(1827432705));l.NotReadableError=zi.default;const gr=u(d(6028869909));l.OnceTask=gr.default;const Fr=u(d(9157601162));l.OpenSignalingConnectionTask=Fr.default;const ri=u(d(8925470260));l.OverconstrainedError=ri.default;const Er=u(d(551865564));l.POSTLogger=Er.default;const Rr=u(d(3087911396));l.ParallelGroupTask=Rr.default;const ei=u(d(7676545646));l.PermissionDeniedError=ei.default;const hr=u(d(2799042772));l.PrefetchOn=hr.default;const si=u(d(3547749820));l.PrefetchSortBy=si.default;const Eo=u(d(6544037895));l.PromiseQueue=Eo.default;const Jr=u(d(6062681936));l.PromoteToPrimaryMeetingTask=Jr.default;const fo=u(d(2694577595));l.RealtimeAttendeePositionInFrame=fo.default;const ho=u(d(7910628433));l.RealtimeState=ho.default;const de=u(d(2969463279));l.RealtimeVolumeIndicator=de.default;const _e=u(d(4105188829));l.ReceiveAudioInputTask=_e.default;const Pe=u(d(980450337));l.ReceiveRemoteVideoPauseResumeTask=Pe.default;const rt=u(d(6919336366));l.ReceiveVideoInputTask=rt.default;const _t=u(d(5242313998));l.ReceiveVideoStreamIndexTask=_t.default;const Dt=u(d(4479085271));l.ReconnectionHealthPolicy=Dt.default;const pn=u(d(1640252696));l.RedundantAudioEncoder=pn.default;const In=u(d(207339016));l.RedundantAudioEncoderWorkerCode=In.default;const Nn=u(d(7244701833));l.RedundantAudioRecoveryMetricReport=Nn.default;const Tn=u(d(325771937));l.RunnableTask=Tn.default;const di=u(d(9970179348));l.SDP=di.default;const an=u(d(8887227953));l.SDPCandidateType=an.default;const ki=u(d(6050329531));l.SDPMediaSection=ki.default;const Zn=u(d(7157971720));l.SendAndReceiveDataMessagesTask=Zn.default;const lr=u(d(7361429724));l.SendingAudioFailureConnectionHealthPolicy=lr.default;const br=u(d(467935533));l.SerialGroupTask=br.default;const Cr=u(d(1382242439));l.ServerSideNetworkAdaption=Cr.default;const pi=u(d(2327502190));l.SessionStateControllerAction=pi.default;const vi=u(d(3782495428));l.SessionStateControllerDeferPriority=vi.default;const Di=u(d(7593441017));l.SessionStateControllerState=Di.default;const Yi=u(d(1356788254));l.SessionStateControllerTransitionResult=Yi.default;const Or=u(d(5016494749));l.SetLocalDescriptionTask=Or.default;const Zr=u(d(4152019840));l.SetRemoteDescriptionTask=Zr.default;const Mi=u(d(2116171594));l.SignalingAndMetricsConnectionMonitor=Mi.default;const ro=u(d(8527332165));l.SignalingClientConnectionRequest=ro.default;const pr=u(d(823668988));l.SignalingClientEvent=pr.default;const qr=u(d(6103584604));l.SignalingClientEventType=qr.default;const es=u(d(1967512172));l.SignalingClientJoin=es.default;const is=u(d(9517368956));l.SignalingClientSubscribe=is.default;const Jo=u(d(9197136208));l.SignalingClientVideoSubscriptionConfiguration=Jo.default;const Yo=u(d(523374695));l.SimulcastContentShareTransceiverController=Yo.default;const ts=u(d(568851064));l.SimulcastLayers=ts.default;const Vo=u(d(5814267651));l.SimulcastTransceiverController=Vo.default;const uo=u(d(9066329271));l.SimulcastVideoStreamIndex=uo.default;const bo=u(d(3959565700));l.SingleNodeAudioTransformDevice=bo.default;const Io=u(d(5426637611));l.StreamMetricReport=Io.default;const so=u(d(9957505777));l.SubscribeAndReceiveSubscribeAckTask=so.default;const ao=u(d(5357242452));l.TargetDisplaySize=ao.default;const Gr=u(d(8089523986));l.TaskStatus=Gr.default;const Co=u(d(9106965827));l.TimeoutScheduler=Co.default;const Ts=u(d(2985830925));l.TimeoutTask=Ts.default;const Is=u(d(3276536342));l.Transcript=Is.default;const po=u(d(726647989));l.TranscriptAlternative=po.default;const Ho=u(d(4378521613));l.TranscriptEntity=Ho.default;const Vr=u(d(4402593625));l.TranscriptItem=Vr.default;const oo=u(d(4257104689));l.TranscriptItemType=oo.default;const Yr=u(d(8483560434));l.TranscriptLanguageWithScore=Yr.default;const mo=u(d(3933717315));l.TranscriptResult=mo.default;const lo=u(d(248336478));l.TranscriptionStatus=lo.default;const ws=u(d(7562925478));l.TranscriptionStatusType=ws.default;const oe=u(d(2306050026));l.TypeError=oe.default;const fe=u(d(5618615883));l.UnusableAudioWarningConnectionHealthPolicy=fe.default;const Ce=u(d(6332689210));l.Versioning=Ce.default;const Ne=u(d(9450249395));l.VideoAdaptiveProbePolicy=Ne.default;const Ge=u(d(5152481786));l.VideoCodecCapability=Ge.default;const Ct=u(d(9145095843));l.VideoEncodingConnectionHealthPolicyName=Ct.default;const ht=u(d(6862823406));l.VideoEncodingCpuConnectionHealthPolicy=ht.default;const Kt=u(d(2633548471));l.VideoEncodingFramerateConnectionHealthPolicy=Kt.default;const $t=u(d(3767048744));l.VideoFxProcessor=$t.default;const on=u(d(254386585));l.VideoLogEvent=on.default;const en=u(d(6239767259));l.VideoOnlyTransceiverController=en.default;const gn=u(d(1964647122));l.VideoPreference=gn.default;const vn=u(d(3711281607));l.VideoPreferences=vn.default;const Cn=u(d(4543167968));l.VideoPriorityBasedPolicy=Cn.default;const jn=u(d(4177728618));l.VideoPriorityBasedPolicyConfig=jn.default;const Bn=u(d(8758878068));l.VideoQualityAdaptationPreference=Bn.default;const wn=u(d(2425311569));l.VideoQualitySettings=wn.default;const hn=u(d(1041737276));l.VideoSource=hn.default;const ci=u(d(9786322758));l.VideoStreamDescription=ci.default;const Ki=u(d(6317694849));l.VideoTileState=Ki.default;const ar=u(d(4574840479));l.VoiceFocusDeviceTransformer=ar.default;const Tr=u(d(9343011556));l.VoiceFocusTransformDevice=Tr.default;const Bt=u(d(7677781501));l.WaitForAttendeePresenceTask=Bt.default;const dr=u(d(6924951343));l.WebSocketReadyState=dr.default;const cr=u(d(2302466300));l.ZLIBTextCompressor=cr.default;const Xi=d(3711281607);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return Xi.MutableVideoPreferences}});const Xr=d(9671487336);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return Xr.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return Xr.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return Xr.Maybe}});const wo=d(7469158520);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return wo.isAudioTransformDevice}});const Mr=d(5873221632);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return Mr.isDestroyable}});const go=d(6229167887);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return go.isVideoTransformDevice}})},632433771:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(152907414));let p=r(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,s){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${s}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,s=h.default.WARN){this.name=a,this.level=s}},"ConsoleLogger");l.default=p},1796489824:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a){this.sequenceNumber=h,this.message=p,this.timestampMs=m,this.logLevel=a}},"Log");l.default=d},152907414:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var d;(function(u){u[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF"})(d=l.LogLevel||(l.LogLevel={})),l.default=d},6333243127:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(152907414));let p=r(class{info(a){for(const s of this._loggers)s.info(a)}warn(a){for(const s of this._loggers)s.warn(a)}error(a){for(const s of this._loggers)s.error(a)}debug(a){let s,i;typeof a=="string"?i=a:a?i=r(()=>(s||(s=a()),s),"memoized"):i=""+a;for(const e of this._loggers)e.debug(i)}setLogLevel(a){for(const s of this._loggers)s.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=p},7420310193:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(152907414)),p=u(d(2044674978));let m=r(class extends p.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=m},2044674978:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(152907414));let p=r(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=p},551865564:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5790858051)),m=h(d(1796489824)),a=h(d(152907414));let s=r(class Wh{addEventListener(){!this.eventListener||!("window"in d.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in d.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new p.default(this.intervalMs),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(n){console.warn("[POSTLogger] "+n.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const n=Date.now();this.logCapture.push(new m.default(this.sequenceNumber,t,n,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:n=Wh.BATCH_SIZE,intervalMs:o=Wh.INTERVAL_MS,logLevel:f=a.default.WARN,metadata:g,headers:S}=e;this.url=t,this.batchSize=n,this.intervalMs=o,this.logLevel=f,this.metadata=g,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=s,s.BATCH_SIZE=85,s.INTERVAL_MS=2e3},6352527919:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(7788016908));let p=r(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=p},7788016908:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3066440630)),m=h(d(5790858051));let a=r(class IS{sortedDeviceList(){return u(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)p.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const n=Reflect.get(i,e,t);return typeof n=="function"?n.bind(i):n},this.patchAddEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.add(f),this.scheduler||(this.scheduler=new m.default(IS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(n,i,[o,f,g])}},this.patchRemoveEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.delete(f),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(n,i,[o,f,g])}},this.pollDeviceLists=()=>u(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,n)=>t.deviceId!==this.devices[n].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},7836148100:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(h){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(h){}removeMediaStreamBrokerObserver(h){}},"NoOpMediaStreamBroker");l.default=d},3406224828:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.AudioInputRequestFailed=1]="AudioInputRequestFailed",u[u.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.AudioNotReceived=4]="AudioNotReceived"})(d=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=d},437211311:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(d=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=d},7220712718:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed"})(d=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=d},9989661280:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.ResolutionNotSupported=2]="ResolutionNotSupported",u[u.PermissionDenied=3]="PermissionDenied"})(d=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=d},654172010:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied",u[u.TimedOut=3]="TimedOut",u[u.ConnectionFailed=4]="ConnectionFailed"})(d=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=d},5083453699:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=d},2977514603:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=d},5435266265:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.VideoInputRequestFailed=1]="VideoInputRequestFailed",u[u.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.VideoNotSent=4]="VideoNotSent"})(d=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=d},3575737100:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var d;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(d=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=d},3840944435:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(T,I,O,w){function D(R){return R instanceof O?R:new O(function(L){L(R)})}return r(D,"adopt"),new(O||(O=Promise))(function(R,L){function H(q){try{ee(w.next(q))}catch(ae){L(ae)}}r(H,"fulfilled");function K(q){try{ee(w.throw(q))}catch(ae){L(ae)}}r(K,"rejected");function ee(q){q.done?R(q.value):D(q.value).then(H,K)}r(ee,"step"),ee((w=w.apply(T,I||[])).next())})},h=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(2988320011)),m=h(d(9445576035)),a=h(d(6125631555)),s=h(d(7676545646)),i=h(d(748822893)),e=h(d(2985830925)),t=h(d(3406224828)),n=h(d(437211311)),o=h(d(7220712718)),f=h(d(9989661280)),g=h(d(654172010)),S=h(d(5083453699)),c=h(d(2977514603)),v=h(d(5435266265)),_=h(d(3575737100)),E=h(d(6533088794));let b=r(class wS{static delay(I){return u(this,void 0,void 0,function*(){return new Promise(O=>setTimeout(O,I))})}checkAudioInput(I){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(I),yield this.meetingSession.audioVideo.stopAudioInput(),n.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${O}`),O instanceof s.default?n.default.PermissionDenied:n.default.Failed}})}checkAudioOutput(I,O){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return u(this,void 0,void 0,function*(){try{const D=I?a.default.getIntrinsicDeviceId(I):"";return yield this.playTone(D,this.configuration.audioOutputFrequency,w),(yield O())?o.default.Succeeded:o.default.Failed}catch(D){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${D}`),o.default.Failed}finally{this.stopTone()}})}playTone(I,O,w){return u(this,void 0,void 0,function*(){const R=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=O,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const H=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,H),this.gainNode.gain.linearRampToValueAtTime(R,H+.1),this.oscillatorNode.start();const K=new p.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield K.bindAudioDevice({deviceId:I}))}catch(ee){this.logger.error(`Failed to bind audio device: ${ee}`)}try{yield K.bindAudioElement(w||new Audio)}catch(ee){this.logger.error(`Failed to bind audio element: ${ee}`)}yield K.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const I=1,O=.1,w=this.configuration.audioOutputGain,D=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(w,D+O+I),this.gainNode.gain.linearRampToValueAtTime(0,D+O*2+I),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(I){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(I),yield this.meetingSession.audioVideo.stopVideoInput(),_.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${O}`),O instanceof s.default?_.default.PermissionDenied:_.default.Failed}})}checkCameraResolution(I,O,w){return u(this,void 0,void 0,function*(){let D;try{const R=a.default.getIntrinsicDeviceId(I),L={video:this.calculateVideoConstraint(R,O,w)};D=yield navigator.mediaDevices.getUserMedia(L)}catch(R){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${O} height ${w} failed with error ${R}`),R&&R.name==="OverconstrainedError"?f.default.ResolutionNotSupported:R&&R.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{D&&D.getTracks().forEach(function(R){R.stop()})}return f.default.Succeeded})}calculateVideoConstraint(I,O,w){const D=this.browserBehavior.requiresResolutionAlignment(O,w),R={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(R.deviceId=I,R.width=O,R.height=w):(R.deviceId={exact:I},R.width={exact:D[0]},R.height={exact:D[1]}),R}checkContentShareConnectivity(I){return u(this,void 0,void 0,function*(){let O=!1,w=!1;const D={contentShareDidStart:()=>{O=!0}},R={audioVideoDidStart:()=>{w=!0}};try{return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(D),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(I),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w&&O})),w?(yield this.stopMeeting(),O?g.default.Succeeded:g.default.TimedOut):g.default.ConnectionFailed}catch(L){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${L}`),L.name==="NotAllowedError"?g.default.PermissionDenied:g.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(R),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(D)}})}checkAudioConnectivity(I){return u(this,void 0,void 0,function*(){let O=!1;const w={packetsReceived:0},D=this.meetingSession.audioVideo,R={metricsDidReceive(H){H.getRTCStatsReport().forEach(K=>{K.type==="inbound-rtp"&&(K.mediaType==="audio"||K.kind==="audio")&&(w.packetsReceived=K.packetsReceived)})}},L=r((H,K,ee,q)=>{H===this.meetingSession.configuration.credentials.attendeeId&&K&&(O=!0)},"attendeePresenceHandler");try{yield D.startAudioInput(I)}catch(H){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${H}`),H instanceof s.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return D.realtimeSubscribeToAttendeeIdPresence(L),D.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(O,w)})),D.removeObserver(R),D.realtimeUnsubscribeToAttendeeIdPresence(L),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(O,w)?t.default.Succeeded:t.default.AudioNotReceived):(D.removeObserver(R),D.realtimeUnsubscribeToAttendeeIdPresence(L),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(I){return u(this,void 0,void 0,function*(){const O=this.meetingSession.audioVideo;let w=0;const D={metricsDidReceive(R){R.getRTCStatsReport().forEach(H=>{H.type==="outbound-rtp"&&(H.mediaType==="video"||H.kind==="video")&&(w=H.packetsSent)})}};try{yield O.startVideoInput(I)}catch(R){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${R}`),R instanceof s.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return O.addObserver(D),(yield this.startMeeting())?(O.startLocalVideoTile(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w>0})),yield O.stopVideoInput(),yield this.stopMeeting(),O.removeObserver(D),w<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return u(this,void 0,void 0,function*(){let I=!1;const O={metricsDidReceive(D){D.getRTCStatsReport().forEach(L=>{L.type==="candidate-pair"&&L.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),c.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const R=this.originalURLRewriter(D);return R.includes("transport=tcp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(O),I?c.default.Succeeded:c.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,c.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return u(this,void 0,void 0,function*(){let I=!1;const O={metricsDidReceive(D){D.getRTCStatsReport().forEach(L=>{L.type==="candidate-pair"&&L.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const R=this.originalURLRewriter(D);return R.includes("transport=udp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(O),I?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return u(this,void 0,void 0,function*(){let I=!1;const O={audioVideoDidStart:()=>{I=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(O),I})}stopMeeting(){return u(this,void 0,void 0,function*(){let I=!1;const O={audioVideoDidStop:w=>{I=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(O),I})}executeTimeoutTask(I){return u(this,void 0,void 0,function*(){let O=!1,w=r(class extends i.default{cancel(){this.isCancelled=!0}run(){return u(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield I()){O=!0;break}yield wS.delay(this.waitDurationMs)}})}constructor(L,H){super(L),this.waitDurationMs=H,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new w(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),O})}isAudioConnectionSuccessful(I,O){return I&&O.packetsReceived>0}constructor(I,O,w=new E.default){this.logger=I,this.meetingSession=O,this.configuration=w,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");l.default=b},6533088794:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=d},2187536411:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(c,v,_,E){function b(T){return T instanceof _?T:new _(function(I){I(T)})}return r(b,"adopt"),new(_||(_=Promise))(function(T,I){function O(R){try{D(E.next(R))}catch(L){I(L)}}r(O,"fulfilled");function w(R){try{D(E.throw(R))}catch(L){I(L)}}r(w,"rejected");function D(R){R.done?T(R.value):b(R.value).then(O,w)}r(D,"step"),D((E=E.apply(c,v||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8377273355)),m=h(d(5948949947)),a=h(d(9173407961)),s=h(d(9445576035)),i=h(d(2140051607)),e=h(d(6092672343)),t=h(d(2708683354)),n=d(5873221632),o=h(d(9375803731)),f=h(d(9778418265)),g=h(d(6757985251));let S=r(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return u(this,void 0,void 0,function*(){n.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),n.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),n.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new s.default,_=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${_}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,_,E,b){this._eventController=b,this._configuration=v,this._logger=_,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,_)),E.eventController||(E.eventController=this.eventController),this.audioVideoController=new p.default(this._configuration,this._logger,new g.default(this._logger),E,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=E,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const T=new i.default(this._logger);this.contentShareController=new e.default(T,new p.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new g.default(this._logger),T,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},1627276675:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(2425311569));let p=r(class AS{clone(){return new AS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,s=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=s}},"MeetingFeatures");l.default=p},3456656950:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(7666896524)),p=u(d(2425311569)),m=d(1366921492),a=u(d(1627276675)),s=u(d(6504474338)),i=u(d(2201325822));let e=r(class{constructor(n,o){var f,g;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,n){n=m.toLowerCasePropertyNames(n),n.meeting&&(n=n.meeting),this.meetingId=n.meetingid,this.externalMeetingId=n.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=n.mediaplacement.audiohosturl,this.urls.signalingURL=n.mediaplacement.signalingurl,this.urls.turnControlURL=n.mediaplacement.turncontrolurl,n.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=n.mediaplacement.eventingestionurl);const S=r((c,v)=>{switch(c){case"None":return p.default.VideoDisabled;case"HD":return p.default.VideoResolutionHD;case"FHD":return p.default.VideoResolutionFHD;case"UHD":return p.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((f=n.meetingfeatures)===null||f===void 0?void 0:f.video)!==void 0||((g=n.meetingfeatures)===null||g===void 0?void 0:g.content)!==void 0){const c=n.meetingfeatures.video===void 0?"HD":n.meetingfeatures.video.maxresolution,v=n.meetingfeatures.content===void 0?"FHD":n.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(c,p.default.VideoResolutionHD),S(v,p.default.VideoResolutionFHD))}}o&&(o=m.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new s.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},6504474338:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=d},9382604560:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var d;(function(u){u[u.Connecting=0]="Connecting",u[u.Started=1]="Started",u[u.Stopped=2]="Stopped"})(d=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=d},1753005041:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var d;(function(u){u[u.ConnectingNew=0]="ConnectingNew",u[u.ReconnectingExisting=1]="ReconnectingExisting",u[u.StartedNew=2]="StartedNew",u[u.StartedExisting=3]="StartedExisting",u[u.StartedAfterReconnect=4]="StartedAfterReconnect",u[u.StoppedCleanly=5]="StoppedCleanly",u[u.StoppedWithFailure=6]="StoppedWithFailure"})(d=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=d},1984577674:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7613896012),p=u(d(946491843));let m=r(class No{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:case p.default.VideoCallAtSourceCapacity:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.ICEGatheringTimeoutWorkaround:case p.default.ConnectionHealthReconnect:case p.default.RealtimeApiFailed:case p.default.TaskFailed:case p.default.NoAttendeePresent:case p.default.SignalingChannelClosedUnexpectedly:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case p.default.Left:case p.default.AudioJoinedFromAnotherDevice:case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.MeetingEnded:case p.default.AudioDisconnected:case p.default.TURNCredentialsForbidden:case p.default.SignalingBadRequest:case p.default.SignalingRequestFailed:case p.default.VideoCallAtSourceCapacity:case p.default.RealtimeApiFailed:case p.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.ICEGatheringTimeoutWorkaround:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.RealtimeApiFailed:case p.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case p.default.OK:return"Everything is OK so far.";case p.default.Left:return"The attendee left the meeting.";case p.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case p.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case p.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case p.default.MeetingEnded:return"The meeting ended.";case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:return"The audio connection failed.";case p.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case p.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:return"The signaling connection failed.";case p.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case p.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case p.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case p.default.TaskFailed:return"The connection failed. See the error message for more details.";case p.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case p.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case p.default.NoAttendeePresent:return"The attendee was not present.";case p.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case p.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case p.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case p.default.AudioDisconnectAudio:return"The audio connection failed.";case p.default.SignalingChannelClosedUnexpectedly:return"The signaling channel was closed unexpectedly. This may be due to a network change or backend detected failure.";default:{const s=this._statusCode;throw new Error(`Unhandled case: ${s}`)}}}static fromSignalFrame(s){return s.error&&s.error.status?this.fromSignalingStatus(s.error.status):s.type===h.SdkSignalFrame.Type.AUDIO_STATUS?s.audioStatus?this.fromAudioStatus(s.audioStatus.audioStatus):new No(p.default.SignalingRequestFailed):s.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new No(p.default.AudioVideoWasRemovedFromPrimaryMeeting):new No(p.default.OK)}static fromAudioStatus(s){switch(s){case 200:return new No(p.default.OK);case 301:return new No(p.default.AudioJoinedFromAnotherDevice);case 302:return new No(p.default.AudioDisconnectAudio);case 403:return new No(p.default.AudioAuthenticationRejected);case 409:return new No(p.default.AudioCallAtCapacity);case 410:return new No(p.default.MeetingEnded);case 411:return new No(p.default.AudioAttendeeRemoved);case 500:return new No(p.default.AudioInternalServerError);case 503:return new No(p.default.AudioServiceUnavailable);default:switch(Math.floor(s/100)){case 2:return new No(p.default.OK);default:return new No(p.default.AudioDisconnected)}}}static fromSignalingStatus(s){switch(s){case 206:return new No(p.default.VideoCallSwitchToViewOnly);case 509:return new No(p.default.VideoCallAtSourceCapacity);case 403:return new No(p.default.AudioAuthenticationRejected);case 409:return new No(p.default.AudioCallAtCapacity);default:switch(Math.floor(s/100)){case 2:return new No(p.default.OK);case 4:return new No(p.default.SignalingBadRequest);case 5:return new No(p.default.SignalingInternalServerError);default:return new No(p.default.SignalingRequestFailed)}}}constructor(s){this._statusCode=s}},"MeetingSessionStatus");l.default=m},946491843:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var d;(function(u){u[u.OK=0]="OK",u[u.Left=1]="Left",u[u.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",u[u.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",u[u.AudioCallAtCapacity=4]="AudioCallAtCapacity",u[u.MeetingEnded=5]="MeetingEnded",u[u.AudioInternalServerError=6]="AudioInternalServerError",u[u.AudioServiceUnavailable=7]="AudioServiceUnavailable",u[u.AudioDisconnected=8]="AudioDisconnected",u[u.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",u[u.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",u[u.SignalingBadRequest=11]="SignalingBadRequest",u[u.SignalingInternalServerError=12]="SignalingInternalServerError",u[u.SignalingRequestFailed=13]="SignalingRequestFailed",u[u.SignalingChannelClosedUnexpectedly=14]="SignalingChannelClosedUnexpectedly",u[u.ICEGatheringTimeoutWorkaround=15]="ICEGatheringTimeoutWorkaround",u[u.ConnectionHealthReconnect=16]="ConnectionHealthReconnect",u[u.RealtimeApiFailed=17]="RealtimeApiFailed",u[u.TaskFailed=18]="TaskFailed",u[u.IncompatibleSDP=19]="IncompatibleSDP",u[u.TURNCredentialsForbidden=20]="TURNCredentialsForbidden",u[u.NoAttendeePresent=21]="NoAttendeePresent",u[u.AudioAttendeeRemoved=22]="AudioAttendeeRemoved",u[u.AudioVideoWasRemovedFromPrimaryMeeting=23]="AudioVideoWasRemovedFromPrimaryMeeting",u[u.AudioVideoDisconnectedWhilePromoted=24]="AudioVideoDisconnectedWhilePromoted",u[u.AudioDisconnectAudio=25]="AudioDisconnectAudio"})(d=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=d},5922047127:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=d},2201325822:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(h){this._audioHostURL=h}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(h){this._signalingURL=h}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(h){this._turnControlURL=h}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(h){this._eventIngestionURL=h}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=h=>h}},"MeetingSessionURLs");l.default=d},1253588984:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class OS{equal(h){return this.remoteVideoAvailable===h.remoteVideoAvailable&&this.canStartLocalVideo===h.canStartLocalVideo}clone(){const h=new OS;return h.remoteVideoAvailable=this.remoteVideoAvailable,h.canStartLocalVideo=this.canStartLocalVideo,h}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=d},309849240:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m){this.type=h,this.headers=p,this.payload=m}},"Message");l.default=d},6354811215:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(S,c,v,_){function E(b){return b instanceof v?b:new v(function(T){T(b)})}return r(E,"adopt"),new(v||(v=Promise))(function(b,T){function I(D){try{w(_.next(D))}catch(R){T(R)}}r(I,"fulfilled");function O(D){try{w(_.throw(D))}catch(R){T(R)}}r(O,"rejected");function w(D){D.done?b(D.value):E(D.value).then(I,O)}r(w,"step"),w((_=_.apply(S,c||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(9541240844),m=h(d(9173407961)),a=h(d(2708683354)),s=h(d(309849240)),i=h(d(9778418265)),e=h(d(3066440630)),t=h(d(2020561361)),n=h(d(6757985251)),o=h(d(6924951343)),f=h(d(2799042772));let g=r(class{addObserver(c){this.logger.info("adding messaging observer"),this.observerQueue.add(c)}removeObserver(c){this.logger.info("removing messaging observer"),this.observerQueue.delete(c)}start(){return u(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(c){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&c(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",c=>{this.receiveMessageHandler(c.data)}),this.webSocket.addEventListener("close",c=>{this.closeEventHandler(c)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(c){return u(this,void 0,void 0,function*(){return yield this.startConnectingInternal(c),yield new Promise((v,_)=>{this.bootstrapResolved=v,this.bootstrapRejected=_})})}startConnectingInternal(c){var v;return u(this,void 0,void 0,function*(){let _=this.configuration.endpointUrl;if(c||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),c||_===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const b=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=b.Endpoint)===null||v===void 0)&&v.Url?_=b.Endpoint.Url:_=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else _=(yield this.configuration.chimeClient.send(new p.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${_}`)}catch(b){this.logger.error(`Messaging Session failed to resolve endpoint: ${b}`);const T=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(T);return}const E=yield this.prepareWebSocketUrl(_);this.logger.info(`opening connection to ${E}`),c||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(E,[],!0),this.forEachObserver(b=>{b.messagingSessionDidStartConnecting&&b.messagingSessionDidStartConnecting(c)}),this.setUpEventListeners()})}prepareWebSocketUrl(c){return u(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===f.default.Connect&&v.set("prefetch-on",[f.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",c,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(c){try{const v=JSON.parse(c),_=v.Headers["x-amz-chime-event-type"],E=new s.default(_,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&_==="SESSION_ESTABLISHED"){this.forEachObserver(T=>{T.messagingSessionDidStart&&T.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const b=this.preBootstrapMessages.length;for(let T=0;T<b;T++){const I=this.preBootstrapMessages.shift();this.forEachObserver(O=>{this.sendMessageToObserver(O,I)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(E);return}this.forEachObserver(b=>{this.sendMessageToObserver(b,E)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(c,v){c.messagingSessionDidReceiveMessage&&c.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>u(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(c){this.logger.info(`WebSocket close: ${c.code} ${c.reason}`),c.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(c.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(c)}):this.bootstrapRejected(c))}canReconnect(c){return c===1001||c===1006||c>=1011&&c<=1014||c>4e3&&c!==4002&&c!==4003&&c!==4401}constructor(c,v,_,E,b){this.configuration=c,this.logger=v,this.webSocket=_,this.reconnectController=E,this.sigV4=b,this.observerQueue=new Set,this.webSocket||(this.webSocket=new n.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(c.reconnectTimeoutMs,new m.default(c.reconnectFixedWaitMs,c.reconnectShortBackoffMs,c.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=g},2487645864:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(1366921492);let h=r(class{generateSessionId(){const m=new Uint32Array(1);return u.getRandomValues(m),m[0].toString()}constructor(m,a,s,i){this.userArn=m,this.messagingSessionId=a,this.endpointUrl=s,this.chimeClient=i,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=h},2799042772:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.Connect="connect"})(d||(d={})),l.default=d},3547749820:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.Unread="unread",u.LastMessageTimestamp="last-message-timestamp"})(d||(d={})),l.default=d},1594701503:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(3944645711));let p=r(class Ol{id(){return this._id}base(){return this._id?this._id.split(Ol.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Ol.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const s=new Ol(this.base()+Ol.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Ol(s._id).modality()!==a?new Ol(this.base()):s}constructor(a){this._id=a}},"DefaultModality");l.default=p,p.MODALITY_SEPARATOR=h.default.Modality[0],p.MODALITY_CONTENT=h.default.Modality.substring(1)},6366559347:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(3066440630)),p=u(d(5790858051)),m=u(d(6103584604)),a=d(7613896012),s=d(9671487336);let i=r(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(n)&&t(n)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(n=>{s.Maybe.of(n.didMissPongs).map(o=>o.bind(n)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const n=a.SdkPingPongFrame.create();n.pingId=t,n.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(n)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const n=t.message.pingPong.pingId;if(n!==this.pingId){this.logger.warn(`unexpected ping id ${n} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${n} with timestamp ${o}`);const g=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-g/2),c=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${c}ms from ping-pong time=${g}ms`),this.forEachObserver(v=>{s.Maybe.of(v.didReceivePong).map(_=>_.bind(v)(n,c,g))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,n,o){this.signalingClient=t,this.intervalMs=n,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new p.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=i},9226780571:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(2162159007)),p=d(1366921492),m=u(d(7910628433)),a=u(d(2969463279));let s=r(class{realtimeSetLocalAttendeeId(e,t){this.state.localAttendeeId=e,this.state.localExternalUserId=t}realtimeSetAttendeeIdPresence(e,t,n,o,f){try{t&&(this.state.attendeeIdToExternalUserId[e]=n);for(const g of this.state.attendeeIdChangesCallbacks)g(e,t,n,o,f)}catch(g){this.onError(g)}}realtimeSubscribeToAttendeeIdPresence(e){try{this.state.attendeeIdChangesCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToAttendeeIdPresence(e){try{const t=this.state.attendeeIdChangesCallbacks.indexOf(e);t!==-1&&this.state.attendeeIdChangesCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSetCanUnmuteLocalAudio(e){try{if(this.state.canUnmute===e)return;this.state.canUnmute=e;for(const t of this.state.setCanUnmuteLocalAudioCallbacks)t(e)}catch(t){this.onError(t)}}realtimeSubscribeToSetCanUnmuteLocalAudio(e){try{this.state.setCanUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){try{const t=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!0)}catch(e){this.onError(e)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!1);return!0}catch(e){return this.onError(e),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){try{const t=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(e,t){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(e)||(this.state.volumeIndicatorCallbacks[e]=[]),this.state.volumeIndicatorCallbacks[e].push(t),this.sendVolumeIndicatorChange(e,!0,!0,!0,this.state.attendeeIdToExternalUserId[e])}catch(n){this.onError(n)}}realtimeUnsubscribeFromVolumeIndicator(e,t){if(this.state.volumeIndicatorCallbacks[e])if(t){const o=this.state.volumeIndicatorCallbacks[e].indexOf(t);o>=0&&this.state.volumeIndicatorCallbacks[e].splice(o,1)}else delete this.state.volumeIndicatorCallbacks[e]}realtimeUpdateVolumeIndicator(e,t,n,o,f){try{n=this.applyLocalMuteOverride(e,n);const g=this.getVolumeIndicatorState(e);let S=!1,c=!1,v=!1;n!==null&&g.muted!==n&&(g.muted=n,c=!0,g.muted&&g.volume!==0&&(g.volume=0,S=!0)),!g.muted&&t!==null&&(g.volume!==t&&(g.volume=t,S=!0),g.muted===null&&(g.muted=!1,c=!0)),o!==null&&g.signalStrength!==o&&(g.signalStrength=o,v=!0),this.sendVolumeIndicatorChange(e,S,c,v,f)}catch(g){this.onError(g)}}realtimeSubscribeToLocalSignalStrengthChange(e){try{if(this.state.localSignalStrengthChangeCallbacks.push(e),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(t){this.onError(t)}}realtimeUnsubscribeToLocalSignalStrengthChange(e){try{const t=this.state.localSignalStrengthChangeCallbacks.indexOf(e);t!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSubscribeToSendDataMessage(e){try{this.state.sendDataMessageCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeFromSendDataMessage(e){try{const t=this.state.sendDataMessageCallbacks.indexOf(e);t!==-1&&this.state.sendDataMessageCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSendDataMessage(e,t,n){try{for(const o of this.state.sendDataMessageCallbacks)o(e,t,n)}catch(o){this.onError(o)}}realtimeSubscribeToReceiveDataMessage(e,t){try{this.state.receiveDataMessageCallbacks.has(e)?this.state.receiveDataMessageCallbacks.get(e).push(t):this.state.receiveDataMessageCallbacks.set(e,[t])}catch(n){this.onError(n)}}realtimeUnsubscribeFromReceiveDataMessage(e){try{this.state.receiveDataMessageCallbacks.delete(e)}catch(t){this.onError(t)}}realtimeReceiveDataMessage(e){try{p.iterateEvery(this.state.receiveDataMessageCallbacks.get(e.topic),t=>{t(e)})}catch(t){Promise.reject(t)}}realtimeSubscribeToFatalError(e){try{this.state.fatalErrorCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToFatalError(e){try{const t=this.state.fatalErrorCallbacks.indexOf(e);t!==-1&&this.state.fatalErrorCallbacks.splice(t,1)}catch(t){this.onError(t)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(e){e?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(e,t){const n=this.state.localAttendeeId,o=this.state.muted;return e!==n||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?t:o}sendVolumeIndicatorChange(e,t,n,o,f){if(this.sendLocalSignalStrengthChange(e,o),!this.state.volumeIndicatorCallbacks.hasOwnProperty(e))return;const g=this.getVolumeIndicatorState(e),S=new a.default;if(t&&(S.volume=g.volume),n&&(S.muted=g.muted),o&&(S.signalStrength=g.signalStrength),!this.stateIsEmpty(S))for(const c of this.state.volumeIndicatorCallbacks[e])c(e,S.volume,S.muted,S.signalStrength,f)}sendLocalSignalStrengthChange(e,t){if(!t||e!==this.state.localAttendeeId)return;const o=this.getVolumeIndicatorState(e).signalStrength;if(o!==null)for(const f of this.state.localSignalStrengthChangeCallbacks)f(o)}getVolumeIndicatorState(e){return this.state.volumeIndicatorState.hasOwnProperty(e)||(this.state.volumeIndicatorState[e]=new a.default),this.state.volumeIndicatorState[e]}stateIsEmpty(e){return e.volume===null&&e.muted===null&&e.signalStrength===null}onError(e){try{for(const t of this.state.fatalErrorCallbacks)t(e)}catch(t){try{console.error(e),console.error(t)}catch{}}}constructor(e,t){this.mediaStreamBroker=e,this.state=new m.default,this._transcriptionController=t||new h.default(this)}},"DefaultRealtimeController");l.default=s},2694577595:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=d},7910628433:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=d},2969463279:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=d},9778418265:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9106965827));let p=r(class DS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,s){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=s,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new DS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,s){this.reconnectTimeoutMs=a,this.backoffPolicy=s,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=p},1640252696:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class qs{static initializeWorker(){qs.log("Initializing RedundantAudioEncoder");const h=new qs;self.RTCRtpScriptTransformer&&(self.onrtctransform=p=>{p.transformer.options.type==="SenderTransform"?h.setupSenderTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="ReceiverTransform"?h.setupReceiverTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="PassthroughTransform"&&h.setupPassthroughTransform(p.transformer.readable,p.transformer.writable)}),self.onmessage=p=>{p.data.msgType==="StartRedWorker"?(h.setupSenderTransform(p.data.send.readable,p.data.send.writable),h.setupReceiverTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="PassthroughTransform"?(h.setupPassthroughTransform(p.data.send.readable,p.data.send.writable),h.setupPassthroughTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="RedPayloadType"?h.setRedPayloadType(p.data.payloadType):p.data.msgType==="OpusPayloadType"?h.setOpusPayloadType(p.data.payloadType):p.data.msgType==="UpdateNumRedundantEncodings"?h.setNumRedundantEncodings(p.data.numRedundantEncodings):p.data.msgType==="Enable"?h.setRedundancyEnabled(!0):p.data.msgType==="Disable"&&h.setRedundancyEnabled(!1)}}static log(h){qs.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${h}`})}static getNumRedundantEncodingsForPacketLoss(h){let p=0,m=!1;return h<=8?p=0:h<=18?p=1:h<=75?p=2:(p=0,m=!0),[p,m]}setupPassthroughTransform(h,p){qs.log("Setting up passthrough transform"),h.pipeTo(p)}setupSenderTransform(h,p){qs.log("Setting up sender RED transform");const m=new TransformStream({transform:this.senderTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setupReceiverTransform(h,p){qs.log("Setting up receiver RED transform");const m=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setRedPayloadType(h){this.redPayloadType=h,qs.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(h){this.opusPayloadType=h,qs.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(h){this.numRedundantEncodings=h,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),qs.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(h){this.redundancyEnabled=h,qs.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(h,p){h.data.byteLength>this.maxAudioPayloadSizeBytes||p.enqueue(h)}senderTransform(h,p){if(h.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.getPrimaryPayload(h.timestamp,h.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const s=this.encode(h.timestamp,a);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}h.data=s,this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}getPrimaryPayload(h,p){const m=this.splitEncodings(h,p);return!m||m.length<1?null:m[m.length-1].payload}splitEncodings(h,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const s=new DataView(p);let i=s.byteLength,e=0,t=0,n=0,o=0,f=!1;const g=new Array,S=new Array,c=new Array;for(;i>0;)if(f=(s.getUint8(o)&128)===0,f){if((s.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=s.byteLength))return null;n=s.byteLength-e;break}else{if(i<this.redHeaderSizeBytes)return null;const I=((s.getUint8(o+2)&3)<<8)+s.getUint8(o+3);S.push(I);const O=s.getUint16(o+1)>>2,w=h-O;c.push(w),e+=I+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,i-=this.redHeaderSizeBytes}if(!f)return a!==void 0?(g.push({payload:p,isRedundant:!1,seq:a}),g):null;let v=t;for(let I=0;I<c.length;I++){const O=new ArrayBuffer(S[I]);new Uint8Array(O).set(new Uint8Array(s.buffer,v,S[I]),0);const D={timestamp:c[I],payload:O,isRedundant:!0};m&&(D.hasFec=this.opusPacketHasFec(new DataView(O),O.byteLength)),g.push(D),v+=S[I]}const _=s.byteLength-n,E=new ArrayBuffer(n);new Uint8Array(E).set(new Uint8Array(s.buffer,_,n),0);const T={timestamp:h,payload:E,isRedundant:!1,seq:a};return m&&(T.hasFec=this.opusPacketHasFec(new DataView(E),E.byteLength)),g.push(T),g}encode(h,p){const m=p.byteLength;if(m===0||m>=this.maxRedPacketSizeBytes||m>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let s=this.redLastHeaderSizeBytes,i=m,e=this.maxAudioPayloadSizeBytes-m-s;const t=new Array,n=new Array;if(this.redundancyEnabled){let c=this.uint32WrapAround(h-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<a&&!(this.uint32WrapAround(h-c)>=this.maxRedTimestampOffset);v++){let _=c,E=this.encodingHistory.find(b=>b.timestamp===_);if(E||(_=this.uint32WrapAround(c-this.redPacketizationTime),E=this.encodingHistory.find(b=>b.timestamp===_)),E){const b=E.payload.byteLength;if(e<this.redHeaderSizeBytes+b)break;e-=this.redHeaderSizeBytes+b,s+=this.redHeaderSizeBytes,i+=b,t.unshift(E.timestamp),n.unshift(E.payload)}c-=this.redPacketizationTime*this.redPacketDistance,c=this.uint32WrapAround(c)}}const o=new ArrayBuffer(s+i),f=new DataView(o);let g=0;for(let c=0;c<t.length;c++){const v=h-t[c];f.setUint8(g,this.opusPayloadType|128),f.setUint16(g+1,v<<2|n[c].byteLength>>8),f.setUint8(g+3,n[c].byteLength&255),g+=this.redHeaderSizeBytes}f.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let c=0;c<n.length;c++)S.set(new Uint8Array(n[c]),g),g+=n[c].byteLength;return S.set(new Uint8Array(p),g),g+=p.byteLength,g!==s+i?null:(this.updateEncodingHistory(h,p),o)}updateEncodingHistory(h,p){for(const a of this.encodingHistory){const s=this.redPacketizationTime*this.redMaxRecoveryDistance;if(h-a.timestamp>=s)this.encodingHistory.shift();else break}const m=new DataView(p);(this.opusPacketIsCeltOnly(m)||this.opusPacketHasVoiceActivity(m,m.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:h,payload:p}))}initializePacketLogs(){const h=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(h),index:0,windowSize:h},this.redRecoveryLog={window:new Array(h),index:0,windowSize:h},this.fecRecoveryLog={window:new Array(h),index:0,windowSize:h},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(h,p){const m=h.getMetadata();if(m.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.splitEncodings(h.timestamp,h.data,!0,m.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}for(let s=a.length-1;s>=0;s--)this.updateLossStats(a[s])&&(this.updateRedStats(a[s]),this.updateFecStats(a[s]));this.maybeReportLossStats(m.synchronizationSource,a[a.length-1].timestamp),this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}updateLossStats(h){if(h.isRedundant)return!0;const p=h.timestamp,m=h.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=m,this.addTimestamp(this.primaryPacketLog,p),!0;const a=this.int16(m-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,p)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,p),this.removeFromRecoveryWindows(p)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=h.seq,this.addTimestamp(this.primaryPacketLog,p)),!0)}updateRedStats(h){if(!h.isRedundant||this.totalAudioPacketsLost===0)return;const p=h.timestamp;this.hasTimestamp(this.primaryPacketLog,p)||(this.hasTimestamp(this.redRecoveryLog,p)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,p)),this.removeTimestamp(this.fecRecoveryLog,p)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(h){if(!h.hasFec||this.totalAudioPacketsLost===0)return;const p=h.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,p)||this.hasTimestamp(this.redRecoveryLog,p)||this.hasTimestamp(this.fecRecoveryLog,p)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,p))}maybeReportLossStats(h,p){p===void 0||p-this.lastLossReportTimestamp<this.lossReportInterval||(qs.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:h,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=p)}addTimestamp(h,p){p!==void 0&&(h.window[h.index]=p,h.index=(h.index+1)%h.windowSize)}hasTimestamp(h,p){return!!h.window.find(a=>a===p)}removeTimestamp(h,p){const m=h.window.indexOf(p);return m>=0?(h.window[m]=void 0,!0):!1}removeFromRecoveryWindows(h){let p=this.removeTimestamp(this.redRecoveryLog,h);p&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,p=this.removeTimestamp(this.fecRecoveryLog,h),p&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(h){let m=h;return h>=4294967296?m=h-4294967296:h<0&&(m=4294967296+h),m}int16(h){return h<<16>>16}opusPacketIsCeltOnly(h){return!!(h.getUint8(0)&128)}opusPacketGetSamplesPerFrame(h,p){p=Math.round(p),p=Math.min(Math.max(p,-Math.pow(2,32)),Math.pow(2,32)-1);let m,a;return this.opusPacketIsCeltOnly(h)?(a=h.getUint8(0)>>3&3,m=(p<<a)/400):(h.getUint8(0)&96)===96?m=h.getUint8(0)&8?p/50:p/100:(a=h.getUint8(0)>>3&3,a===3?m=p*60/1e3:m=(p<<a)/100),m}opusNumSilkFrames(h){let p=this.opusPacketGetSamplesPerFrame(h,48e3)/48;switch(p<10&&(p=10),p){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(h){return h.getUint8(0)&4?2:1}opusParseSize(h,p,m,a){return m<1?(a[0]=-1,-1):h.getUint8(p)<252?(a[0]=h.getUint8(p),1):m<2?(a[0]=-1,-1):(a[0]=4*h.getUint8(p+1)+h.getUint8(p),2)}opusPacketParseImpl(h,p,m,a,s,i,e,t){if(!i||p<0)return this.OPUS_BAD_ARG;if(p===0)return this.OPUS_INVALID_PACKET;let n,o,f=0,g=!1;const S=h.getUint8(0);a&&(a[0]=S);let c=p-1,v=1,_=c;switch(S&3){case 0:n=1;break;case 1:if(n=2,g=!0,!m){if(c&1)return this.OPUS_INVALID_PACKET;_=c/2,i[0][0]=_}break;case 2:if(n=2,o=this.opusParseSize(h,v,c,i[0]),c-=o,i[0][0]<0||i[0][0]>c)return this.OPUS_INVALID_PACKET;v+=o,_=c-i[0][0];break;default:if(c<1)return this.OPUS_INVALID_PACKET;const E=h.getUint8(v++);if(--c,n=E&63,n<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(h,48e3)*n>5760)return this.OPUS_INVALID_PACKET;if(E&64){let T,I;do{if(c<=0)return this.OPUS_INVALID_PACKET;T=h.getUint8(v++),--c,I=T===255?254:T,c-=I,f+=I}while(T===255)}if(c<0)return this.OPUS_INVALID_PACKET;if(g=!(E&128),g){if(!m){if(_=Math.trunc(c/n),_*n!==c)return this.OPUS_INVALID_PACKET;for(let T=0;T<n-1;++T)i[T][0]=_}}else{_=c;for(let T=0;T<n-1;++T){if(o=this.opusParseSize(h,v,c,i[T]),c-=o,i[T][0]<0||i[T][0]>c)return this.OPUS_INVALID_PACKET;v+=o,_-=o+i[T][0]}if(_<0)return this.OPUS_INVALID_PACKET}}if(m){if(o=this.opusParseSize(h,v,c,i[n-1]),c-=o,i[n-1][0]<0||i[n-1][0]>c)return this.OPUS_INVALID_PACKET;if(v+=o,g){if(i[n-1][0]*n>c)return this.OPUS_INVALID_PACKET;for(let E=0;E<n-1;++E)i[E][0]=i[n-1][0]}else if(!(o+i[n-1][0]<=_))return this.OPUS_INVALID_PACKET}else{if(_>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;i[n-1][0]=_}e&&(e[0]=v);for(let E=0;E<n;++E)s&&(s[E][0]=v),v+=i[E][0];return t&&(t[0]=v+f),n}opusPacketParse(h,p,m,a,s,i){return this.opusPacketParseImpl(h,p,!1,m,a,s,i,null)}opusPacketHasVoiceActivity(h,p){if(!h||p<=0)return 0;if(this.opusPacketIsCeltOnly(h))return-1;const m=this.opusNumSilkFrames(h);if(m===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],s[e]=[void 0];const i=this.opusPacketParse(h,p,null,a,s,null);if(i<0)return-1;for(let e=0;e<i;++e){if(s[e][0]<1)continue;if(h.getUint8(a[e][0])>>8-m||this.opusPacketGetNumChannels(h)===2&&h.getUint8(a[e][0])<<m+1>>8-m)return 1}return 0}opusPacketHasFec(h,p){if(!h||p<=0||this.opusPacketIsCeltOnly(h))return!1;const m=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)m[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(h,p,null,m,a,null)<0||a[0][0]<=1)return!1;const i=this.opusNumSilkFrames(h);if(i===0)return!1;const e=this.opusPacketGetNumChannels(h);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(h.getUint8(m[0][0])&128>>(t+1)*(i+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=d,d.shouldLog=!1,d.shouldReportStats=!1},207339016:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. The packet we received
        // does not have a good RED payload.
        if (!gotLastBlock) {
            // Note that sequence numbers only exist for
            // incoming audio frames.
            if (primarySequenceNumber !== undefined) {
                // This could be a possible padding packet used
                // for BWE with a good sequence number.
                // Create a dummy encoding to make sure loss values
                // are calculated correctly by consuming sequence number.
                // Note that for the receive side, we process packets only
                // for loss/recovery calculations and forward the original
                // packet without changing it even in the error case.
                encodings.push({
                    payload: frame,
                    isRedundant: false,
                    seq: primarySequenceNumber,
                });
                return encodings;
            }
            // This is a bad packet.
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(frameMetadata.synchronizationSource, encodings[encodings.length - 1].timestamp);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(ssrc, timestamp) {
        if (timestamp === undefined ||
            timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        if (timestamp === undefined) {
            return;
        }
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=d},3066440630:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9106965827));let p=r(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=p},5790858051:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setInterval(h,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(h){this.intervalMs=h}},"IntervalScheduler");l.default=d},9106965827:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),h()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(h){this.timeoutMs=h,this.timer=null}},"TimeoutScheduler");l.default=d},9970179348:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(8887227953)),p=u(d(6050329531)),m=u(d(5152481786));let a=r(class hi{clone(){return new hi(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new hi(i.join(hi.CRLF))}static candidateTypeFromString(i){switch(i){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:hi.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,n)=>(n>0?"m="+t:t).trim()+hi.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const n of i){if(/^m=video/.test(n)&&(n.indexOf("sendrecv")>-1||n.indexOf("sendonly")===-1&&n.indexOf("recvonly")===-1&&n.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return hi.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(hi.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return hi.linesToSDP(this.lines().filter(e=>hi.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,hi.rfc7587LowestBitrate),hi.rfc7587HighestBitrate));const e=this.lines(),t=hi.findOpusFmtpAttributes(e),n=hi.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return hi.linesToSDP(n)}withStereoAudio(){const i=this.lines(),e=hi.findOpusFmtpAttributes(i),t=hi.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return hi.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const n=[];for(const o of i)if(o.startsWith("m=audio")&&(n.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const f=e.exec(o);f!==null&&(n[n.length-1]=`a=fmtp:${f[1]} `)}return n}static updateOpusFmtpAttributes(i,e,t){const n=[];let o=0,f=null;for(const g of i)if(g.startsWith("m=audio")&&(f=e[o],o++),g.startsWith("m=video")&&(f=null),f&&g.startsWith(f)){const S=g.slice(f.length).split(";"),c=[];for(const v of S)t.findIndex(E=>E.startsWith(v.split("=")[0]))<0&&c.push(v);for(const v of t)c.push(v);n.push(f+c.join(";"))}else n.push(g);return n}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new hi(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const n of i)if(/^a=extmap:/.test(n.trim())){const f=+n.split("a=extmap:")[1].split(" ")[0];e.includes(f)||e.push(f)}e.sort((n,o)=>n-o);let t=0;for(const n of e){if(n-t>1)return t+1;t=n}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,hi.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,hi.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=hi.splitLines(this.sdp).filter(e=>!e.includes(hi.dependencyDescriptorRtpHeaderExtensionUrl));return new hi(i.join(hi.CRLF)+hi.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,n=t===-1?this.getUniqueRtpHeaderExtensionId(hi.splitLines(this.sdp)):t,o=hi.splitSections(this.sdp),f=[];for(let S of o){if(/^m=video/.test(S)&&hi.getRtpHeaderExtensionIdInSection(S,e)===-1){const c=hi.splitLines(S),v=[];if(n===-1||this.hasRtpHeaderExtensionId(n)){f.push(S);continue}for(const _ of c)if(v.push(_),/^a=sendrecv/.test(_.trim())){const E="a=extmap:"+n+" "+e;v.push(E)}S=v.join(hi.CRLF)+hi.CRLF}else if(t!==-1&&/^m=video/.test(S)&&hi.getRtpHeaderExtensionIdInSection(S,e)!==t){const c=hi.splitLines(S),v=[];for(const _ of c){if(/^a=extmap:/.test(_.trim())&&_.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const b="a=extmap:"+t+" "+e;v.push(b)}continue}v.push(_)}S=v.join(hi.CRLF)+hi.CRLF}f.push(S)}const g=f.join("");return new hi(g)}ssrcForVideoSendingSection(){const i=this.sdp,e=hi.splitSections(i);if(e.length<2)return"";const t=hi.findActiveCameraSection(e);if(t===-1)return"";const n=hi.matchPrefix(e[t],"a=ssrc-group:FID ");if(n.length<1)return"";const o=hi.extractSSRCsFromFIDGroupLine(n[0]),[f]=o.split(" ").map(g=>parseInt(g,10));return f.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const n=parseInt(e,10),o=parseInt(t,10);return n!==o}removeH264SupportFromSendSection(){const i=this.sdp,e=hi.splitSections(i),t=hi.findActiveCameraSection(e);if(t===-1)return new hi(this.sdp);const n=e[t],o=hi.splitLines(n),f=[],g=new Map;o.forEach(_=>{if(/^a=rtpmap:/.test(_)){const E=/^a=rtpmap:([0-9]+)\s/.exec(_);E&&_.toLowerCase().includes("h264")&&f.push(parseInt(E[1],10))}if(/^a=fmtp:/.test(_)){const E=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(_);if(E&&E.length===3){const b=parseInt(E[1],10),T=parseInt(E[2],10);g.has(T)?g.get(T).push(b):g.set(T,[b])}}});const S=new Set;for(const _ of f){S.add(_);const E=g.get(_);if(E)for(const b of E)S.add(b)}if(f.length>0){const _=o[0].split(" ");o[0]=_.filter(E=>!S.has(parseInt(E))).join(" ")}const c=o.filter(_=>{if(!_.includes("rtpmap")&&!_.includes("rtcp-fb")&&!_.includes("fmtp"))return!0;for(const E of S)if(_.includes(E.toString()))return!1;return!0});e[t]=c.join(hi.CRLF)+hi.CRLF;const v=e.join("");return new hi(v)}mediaSections(){const i=hi.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const n=new p.default,o=hi.splitLines(i[t]);for(const f of o){const g=hi.mediaType(f);if(g!==void 0){n.mediaType=g;continue}const S=hi.direction(f);if(S!==void 0){n.direction=S;continue}const c=hi.mid(f);if(c!==void 0){n.mid=c;continue}}e.push(n)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=hi.splitLines(i);for(const n of t)if(/^a=extmap:/.test(n.trim())){const o=n.split("a=extmap:")[1].split(" "),f=+o[0];if(o[1]===e)return f}return-1}getRtpHeaderExtensionId(i){const e=hi.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const n=hi.getRtpHeaderExtensionIdInSection(t,i);if(n!==-1)return n}return-1}hasRtpHeaderExtensionId(i){const e=hi.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=hi.splitSections(e),n=hi.findActiveCameraSection(t);if(n===-1)return new hi(this.sdp);t[n]=this.sectionWithCodecPreferences(t[n],i);const o=t.join("");return new hi(o)}sectionWithCodecPreferences(i,e){const t=new Map,n=hi.splitLines(i);n.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const c=/^a=rtpmap:(\d+)\s/.exec(S);if(!c)return;const v=c[1];for(const _ of e){if(!S.includes(`${_.codecName}/${_.codecCapability.clockRate}`))continue;let E=!1;if(_.codecCapability.sdpFmtpLine!==void 0){let b=!1;for(const T of n){if(_.fmtpLineMatches(T,parseInt(v))){E=!0;break}b||(b=T.startsWith(`a=fmtp:${v} profile-id=`))}_.equals(m.default.vp9Profile0())&&!b&&(E=!0)}else E=!0;if(E){t.set(v,_);break}}});const o=new Set(t.keys()),f=n[0].split(" ").filter(S=>!o.has(S)),g=Array.from(t.entries()).sort((S,c)=>{let[v,_]=S,[E,b]=c;const T=e.indexOf(_),I=e.indexOf(b);return T-I}).map(S=>{let[c,v]=S;return c});return f.splice(3,0,...g),n[0]=f.join(" "),n.join(hi.CRLF)+hi.CRLF}highestPriorityVideoSendCodec(){const i=this.prioritizedSendVideoCodecCapabilities();return i.length>0?i[0]:void 0}prioritizedSendVideoCodecCapabilities(){const i=this.sdp,e=hi.splitSections(i),t=hi.findActiveCameraSection(e);if(t===-1)return[];const n=hi.splitLines(e[t]),o=n[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(n,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(i,e){let t,n,o;for(const f of i){const g=/^a=rtpmap:([0-9]+)\s/.exec(f);if(g&&g[1]===e){const c=f.split(" ")[1].split("/");c.length>=2&&(t=c[0],n=c[1])}f.startsWith(`a=fmtp:${e} `)&&(o=f.split(" ")[1])}if(t!==void 0)return new m.default(t,{clockRate:parseInt(n),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=hi.splitSections(e);return i.set("opus",hi.findAudioPayloadType("opus",t)),i.set("red",hi.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,n=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const f=n.exec(o);if(f!==null)return Number(f[1])}return 0}withStartingVideoSendBitrate(i){const e=hi.splitSections(this.sdp),t=hi.findActiveCameraSection(e);if(t===-1)return this;const n=hi.splitLines(e[t]),o=[];for(const g of n)if(/^a=fmtp:\d*/.test(g)){const S=g+`;x-google-start-bitrate=${i}`;o.push(S)}else o.push(g);e[t]=o.join(hi.CRLF)+hi.CRLF;const f=e.join("");return new hi(f)}constructor(i){this.sdp=i}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},8887227953:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var d;(function(u){u.Host="host",u.ServerReflexive="srflx",u.PeerReflexive="prflx",u.Relay="relay"})(d=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=d},6050329531:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"SDPMediaSection");l.default=d},5152481786:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(7613896012);let h=r(class qo{equals(m){if(m===void 0||this.codecName!==m.codecName||this.codecCapability.mimeType!==m.codecCapability.mimeType||this.codecCapability.clockRate!==m.codecCapability.clockRate)return!1;const a=this.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(this.codecCapability.sdpFmtpLine,this.codecName):"",s=m.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(m.codecCapability.sdpFmtpLine,m.codecName):"";return a===s}fmtpLineMatches(m,a){const s=this.codecCapability.sdpFmtpLine;if(!s)return!1;const i=`a=fmtp:${a} `;if(!m.startsWith(i))return!1;const e=m.substring(i.length);return this.cleanupFmtpLine(e,this.codecName)===this.cleanupFmtpLine(s,this.codecName)}cleanupFmtpLine(m,a){const s=/;x-google-start-bitrate=\d+/g;let i=m.replace(s,"");if(a==="H264"){const e=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i;i=i.replace(e,"profile-level-id=$1")}return i}static vp8(){return new qo("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new qo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new qo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new qo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new qo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new qo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return qo.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new qo("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return qo.vp9Profile0()}static av1Main(){return new qo("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return qo.av1Main()}static fromSignaled(m){switch(m){case u.SdkVideoCodecCapability.VP8:return qo.vp8();case u.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return qo.h264BaselineProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return qo.h264ConstrainedBaselineProfile();case u.SdkVideoCodecCapability.H264_MAIN_PROFILE:return qo.h264MainProfile();case u.SdkVideoCodecCapability.H264_HIGH_PROFILE:return qo.h264HighProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return qo.h264ConstrainedHighProfile();case u.SdkVideoCodecCapability.VP9_PROFILE_0:return qo.vp9Profile0();case u.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return qo.av1Main();default:return}}constructor(m,a){this.codecName=m,this.codecCapability=a}},"VideoCodecCapability");l.default=h},2302466300:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(3891390253);let h=r(class Tu{compress(m,a){if(a.length>0){const e=Math.min(a.length,Tu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={memLevel:Tu.Z_MEM_LEVEL,dictionary:a};return u.deflateRaw(m,s)}decompress(m,a){if(a.length>0){const e=Math.min(a.length,Tu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={to:"string",dictionary:a,chunkSize:4096};let i="";try{i=u.inflateRaw(m,s)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(m){this.logger=m}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},7593524919:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(2327502190),h=d(3782495428),p=d(7593441017),m=d(1356788254);let a=r(class{perform(i,e){const t=this.currentState;if(t===p.SessionStateControllerState.NotConnected&&i===u.SessionStateControllerAction.Connect)this.transition(p.SessionStateControllerState.Connecting,i);else if(t===p.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.FinishConnecting)this.transition(p.SessionStateControllerState.Connected,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Disconnect)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Reconnect)this.transition(p.SessionStateControllerState.Connecting,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Update)this.transition(p.SessionStateControllerState.Updating,i);else if(t===p.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,i);else if(t===p.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.FinishUpdating)this.transition(p.SessionStateControllerState.Connected,i);else if(t===p.SessionStateControllerState.Disconnecting&&i===u.SessionStateControllerAction.FinishDisconnecting)this.transition(p.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${p.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),this.deferAction(i,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${p.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(n){return this.logger.error(`error during state ${p.SessionStateControllerState[this.currentState]} with action ${u.SessionStateControllerAction[i]}: ${n}`),this.logger.info(`rolling back transition to ${p.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${p.SessionStateControllerState[this.currentState]} to ${p.SessionStateControllerState[i]} with ${u.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case u.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case u.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case u.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case u.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===p.SessionStateControllerState.Connecting||this.currentState===p.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${u.SessionStateControllerAction[i]}`),this.perform(i,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${u.SessionStateControllerAction[i]} in state ${p.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=p.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},2327502190:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var d;(function(u){u[u.Connect=0]="Connect",u[u.FinishConnecting=1]="FinishConnecting",u[u.Update=2]="Update",u[u.FinishUpdating=3]="FinishUpdating",u[u.Reconnect=4]="Reconnect",u[u.Disconnect=5]="Disconnect",u[u.Fail=6]="Fail",u[u.FinishDisconnecting=7]="FinishDisconnecting"})(d=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=d},3782495428:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var d;(function(u){u[u.DoNotDefer=0]="DoNotDefer",u[u.Low=1]="Low",u[u.Medium=2]="Medium",u[u.High=3]="High",u[u.VeryHigh=4]="VeryHigh"})(d=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=d},7593441017:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var d;(function(u){u[u.NotConnected=0]="NotConnected",u[u.Connecting=1]="Connecting",u[u.Connected=2]="Connected",u[u.Updating=3]="Updating",u[u.Disconnecting=4]="Disconnecting"})(d=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=d},1356788254:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var d;(function(u){u[u.Transitioned=0]="Transitioned",u[u.NoTransitionAvailable=1]="NoTransitionAvailable",u[u.DeferredTransition=2]="DeferredTransition",u[u.TransitionFailed=3]="TransitionFailed"})(d=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=d},6044373597:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9445576035)),p=u(d(9106965827)),m=d(7613896012),a=d(1366921492),s=u(d(6332689210)),i=u(d(8758878068)),e=u(d(6924951343)),t=d(1382242439),n=u(d(823668988)),o=u(d(6103584604));let f=r(class hc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const c=m.SdkSignalFrame.create();return c.type=m.SdkSignalFrame.Type.PING_PONG,c.pingPong=S,this.sendMessage(c),c.timestampMs}join(S){this.logger.info("sending join");const c=m.SdkJoinFrame.create();c.protocolVersion=2,c.flags=m.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new h.default,_={platformName:v.name(),platformVersion:v.version(),clientSource:s.default.sdkName,chimeSdkVersion:s.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:b,appVersion:T}=S.applicationMetadata;_.appName=b,_.appVersion=T}c.clientDetails=m.SdkClientDetails.create(_),c.audioSessionId=this.audioSessionId,c.wantsCompressedSdp=hc.CLIENT_SUPPORTS_COMPRESSION,c.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,c.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),c.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),c.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const E=m.SdkSignalFrame.create();E.type=m.SdkSignalFrame.Type.JOIN,E.join=c,this.sendMessage(E)}subscribe(S){const c=m.SdkSubscribeFrame.create();if(c.sendStreams=[],c.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(c.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(c.audioCheckin=S.audioCheckin,c.audioHost=S.audioHost,c.audioMuted=S.audioMuted,!S.audioCheckin)){const _=m.SdkStreamDescriptor.create();_.mediaType=m.SdkStreamMediaType.AUDIO,_.trackLabel="AmazonChimeExpressAudio",_.attendeeId=S.attendeeId,_.streamId=1,_.groupId=1,_.framerate=15,_.maxBitrateKbps=600,_.avgBitrateBps=4e5,c.sendStreams.push(_)}if(c.compressedSdpOffer=S.compressedSdpOffer,c.duplex=m.SdkStreamServiceType.RX,S.localVideoEnabled){c.duplex=m.SdkStreamServiceType.DUPLEX;for(let _=0;_<S.videoStreamDescriptions.length;_++){const E=S.videoStreamDescriptions[_].clone();E.attendeeId=S.attendeeId,c.sendStreams.push(E.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(c.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=m.SdkSignalFrame.create();v.type=m.SdkSignalFrame.Type.SUBSCRIBE,v.sub=c,this.sendMessage(v)}remoteVideoUpdate(S,c){const v=m.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=c;const _=m.SdkSignalFrame.create();_.type=m.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,_.remoteVideoUpdate=v,this.sendMessage(_)}convertSignalingClientVideoSubscriptionConfiguration(S){const c=new m.SdkVideoSubscriptionConfiguration;switch(c.mid=S.mid,c.attendeeId=S.attendeeId,c.streamId=S.streamId,c.groupId=S.groupId,c.priority=S.priority,c.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case i.default.Balanced:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED;break;case i.default.MaintainFramerate:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case i.default.MaintainResolution:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:c.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED}return c}leave(){const S=m.SdkSignalFrame.create();S.type=m.SdkSignalFrame.Type.LEAVE,S.leave=m.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.CLIENT_METRIC,c.clientMetric=S,this.sendMessage(c)}sendDataMessage(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.DATA_MESSAGE,c.dataMessage=S,this.sendMessage(c)}closeConnection(){var S,c;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new n.default(this,o.default.WebSocketClosing,null));const v=new p.default(hc.CLOSE_EVENT_TIMEOUT_MS),_=r(E=>{var b,T;(T=(b=this.webSocket).removeEventListener)===null||T===void 0||T.call(b,"close",_),v.stop(),this.closeEventHandler(E)},"handler");(c=(S=this.webSocket).removeEventListener)===null||c===void 0||c.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",_),v.start(()=>{_(new CloseEvent("close",{wasClean:!1,code:1005,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.AUDIO_CONTROL;const v=m.SdkAudioControlFrame.create();v.muted=S,c.audioControl=v,this.sendMessage(c)}pause(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.PAUSE,c.pause=m.SdkPauseResumeFrame.create(),c.pause.streamIds=S,this.sendMessage(c)}resume(S){const c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.RESUME,c.pause=m.SdkPauseResumeFrame.create(),c.pause.streamIds=S,this.sendMessage(c)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const c=this.prependWithFrameTypeRTC(m.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(c)){this.sendEvent(new n.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new n.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new n.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let c;try{c=m.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new n.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(c)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new n.default(this,o.default.ReceivedSignalFrame,c)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(c)}`)}stripFrameTypeRTC(S){const c=S[0];return c!==hc.FRAME_TYPE_RTC&&c!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${c}`),S.slice(1)}prependWithFrameTypeRTC(S){const c=new Uint8Array(S.length+1);return c[0]=hc.FRAME_TYPE_RTC,c.set(S,1),c}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new n.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;case o.default.WebSocketClosed:this.logger.info(`notifying event: ${o.default[S.type]}, 
              code: ${S.closeCode} reason: ${S.closeReason}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const c of this.observerQueue)c.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new n.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new n.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("Signaling WebSocket ignoring error closing while connecting");return}this.wasOpened?(this.logger.error("Signaling WebSocket received error while connected"),this.sendEvent(new n.default(this,o.default.WebSocketError,null))):(this.logger.error("Signaling WebSocket received error while connecting"),this.sendEvent(new n.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=d.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=d.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const c=m.SdkMeetingSessionCredentials.create();c.attendeeId=S.attendeeId,c.externalUserId=S.externalUserId,c.joinToken=S.joinToken;const v=m.SdkPrimaryMeetingJoinFrame.create();v.credentials=c;const _=m.SdkSignalFrame.create();_.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,_.primaryMeetingJoin=v,this.sendMessage(_)}demoteFromPrimaryMeeting(){const S=m.SdkPrimaryMeetingLeaveFrame.create(),c=m.SdkSignalFrame.create();c.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,c.primaryMeetingLeave=S,this.sendMessage(c)}constructor(S,c){this.webSocket=S,this.logger=c,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new n.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0},1382242439:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const u=d(7613896012);var h;(function(s){s[s.Default=0]="Default",s[s.None=1]="None",s[s.BandwidthProbing=2]="BandwidthProbing",s[s.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function p(s){return s===h.None||s===h.Default}r(p,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=p;function m(s){switch(s){case u.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case u.SdkServerSideNetworkAdaption.NONE:return h.None;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}r(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=m;function a(s){switch(s){case h.Default:return u.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return u.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}r(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},8527332165:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(h,p){this.signalingURL=h,this.joinToken=p}},"SignalingClientConnectionRequest");l.default=d},823668988:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6103584604));let p=r(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,s,i,e,t){this.client=a,this.type=s,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=p},6103584604:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var d;(function(u){u[u.WebSocketConnecting=0]="WebSocketConnecting",u[u.WebSocketOpen=1]="WebSocketOpen",u[u.WebSocketError=2]="WebSocketError",u[u.WebSocketClosing=3]="WebSocketClosing",u[u.WebSocketClosed=4]="WebSocketClosed",u[u.WebSocketFailed=5]="WebSocketFailed",u[u.WebSocketMessage=6]="WebSocketMessage",u[u.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",u[u.WebSocketSentMessage=8]="WebSocketSentMessage",u[u.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",u[u.ReceivedSignalFrame=10]="ReceivedSignalFrame",u[u.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(d=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=d},1967512172:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(1382242439));let p=r(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=p},9517368956:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a,s,i,e,t,n,o){this.attendeeId=h,this.sdpOffer=p,this.audioHost=m,this.audioMuted=a,this.audioCheckin=s,this.receiveStreamIds=i,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=n,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=d},9197136208:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return h!==void 0&&this.mid===h.mid&&this.attendeeId===h.attendeeId&&this.streamId===h.streamId&&this.groupId===h.groupId&&this.priority===h.priority&&this.targetBitrateKbps===h.targetBitrateKbps&&this.qualityAdaptationPreference===h.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=d},7613896012:(B,l,d)=>{"use strict";var u=d(5942056335),h=u.Reader,p=u.Writer,m=u.util,a=u.roots.default||(u.roots.default={});a.SdkSignalFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkSignalFrame"),s.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.type=1,s.prototype.error=null,s.prototype.join=null,s.prototype.joinack=null,s.prototype.sub=null,s.prototype.suback=null,s.prototype.index=null,s.prototype.pause=null,s.prototype.leave=null,s.prototype.leaveAck=null,s.prototype.bitrates=null,s.prototype.audioControl=null,s.prototype.audioMetadata=null,s.prototype.audioStreamIdInfo=null,s.prototype.pingPong=null,s.prototype.audioStatus=null,s.prototype.clientMetric=null,s.prototype.dataMessage=null,s.prototype.remoteVideoUpdate=null,s.prototype.primaryMeetingJoin=null,s.prototype.primaryMeetingJoinAck=null,s.prototype.primaryMeetingLeave=null,s.prototype.notification=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(m.Long){var o=new m.Long(0,0,!0);n.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.timestampMs=t.longs===String?"0":0;n.type=t.enums===String?"JOIN":1,n.error=null,n.join=null,n.joinack=null,n.sub=null,n.suback=null,n.index=null,n.pause=null,n.leave=null,n.leaveAck=null,n.bitrates=null,n.audioControl=null,n.audioMetadata=null,n.audioStreamIdInfo=null,n.pingPong=null,n.audioStatus=null,n.clientMetric=null,n.dataMessage=null,n.remoteVideoUpdate=null,n.primaryMeetingJoin=null,n.primaryMeetingJoinAck=null,n.primaryMeetingLeave=null,n.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(n.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(n.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(n.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(n.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(n.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(n.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(n.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(n.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(n.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(n.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(n.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(n.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(n.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(n.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(n.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(n.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(n.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(n.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(n.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(n.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(n.notification=a.SdkNotificationFrame.toObject(e.notification,t)),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),s}(),a.SdkErrorFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkErrorFrame"),s.prototype.status=0,s.prototype.description="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.status=0,n.description=""),e.status!=null&&e.hasOwnProperty("status")&&(n.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(n.description=e.description),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),s}(),a.SdkJoinFlags=function(){var s={},i=Object.create(s);return i[s[2]="HAS_STREAM_UPDATE"]=2,i[s[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[s[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),a.SdkClientDetails=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkClientDetails"),s.prototype.appName="",s.prototype.appVersion="",s.prototype.deviceModel="",s.prototype.deviceMake="",s.prototype.platformName="",s.prototype.platformVersion="",s.prototype.clientSource="",s.prototype.chimeSdkVersion="",s.prototype.clientUtcOffset="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.appName="",n.appVersion="",n.deviceModel="",n.deviceMake="",n.platformName="",n.platformVersion="",n.clientSource="",n.chimeSdkVersion="",n.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(n.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(n.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(n.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(n.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(n.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(n.clientUtcOffset=e.clientUtcOffset),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),s}(),a.SdkServerSideNetworkAdaption=function(){var s={},i=Object.create(s);return i[s[1]="DEFAULT"]=1,i[s[2]="NONE"]=2,i[s[3]="BANDWIDTH_PROBING"]=3,i[s[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),a.SdkJoinFrame=function(){function s(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkJoinFrame"),s.prototype.protocolVersion=2,s.prototype.maxNumOfVideos=0,s.prototype.flags=0,s.prototype.clientDetails=null,s.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.wantsCompressedSdp=!1,s.prototype.serverSideNetworkAdaption=1,s.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,s.prototype.wantsAllTemporalLayersInIndex=!1,s.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[n]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:if(typeof e.supportedServerSideNetworkAdaptions[n]=="number"){t.supportedServerSideNetworkAdaptions[n]=e.supportedServerSideNetworkAdaptions[n];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[n]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[n]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[n]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[n]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.supportedServerSideNetworkAdaptions=[]),t.defaults){if(n.protocolVersion=2,n.maxNumOfVideos=0,n.flags=0,n.clientDetails=null,m.Long){var o=new m.Long(0,0,!0);n.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.audioSessionId=t.longs===String?"0":0;n.wantsCompressedSdp=!1,n.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,n.wantsAllTemporalLayersInIndex=!1,n.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(n.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(n.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(n.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?n.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:n.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(n.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){n.supportedServerSideNetworkAdaptions=[];for(var f=0;f<e.supportedServerSideNetworkAdaptions.length;++f)n.supportedServerSideNetworkAdaptions[f]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]===void 0?e.supportedServerSideNetworkAdaptions[f]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]:e.supportedServerSideNetworkAdaptions[f]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(n.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(n.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),s}(),a.SdkJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkJoinAckFrame"),s.prototype.turnCredentials=null,s.prototype.videoSubscriptionLimit=0,s.prototype.wantsCompressedSdp=!1,s.prototype.defaultServerSideNetworkAdaption=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.turnCredentials=null,n.videoSubscriptionLimit=0,n.wantsCompressedSdp=!1,n.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(n.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(n.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),s}(),a.SdkLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),s}(),a.SdkLeaveAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkLeaveAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),s}(),a.SdkStreamServiceType=function(){var s={},i=Object.create(s);return i[s[1]="RX"]=1,i[s[2]="TX"]=2,i[s[3]="DUPLEX"]=3,i}(),a.SdkStreamMediaType=function(){var s={},i=Object.create(s);return i[s[1]="AUDIO"]=1,i[s[2]="VIDEO"]=2,i}(),a.SdkSubscribeFrame=function(){function s(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkSubscribeFrame"),s.prototype.duplex=1,s.prototype.sendStreams=m.emptyArray,s.prototype.receiveStreamIds=m.emptyArray,s.prototype.sdpOffer="",s.prototype.audioHost="",s.prototype.audioCheckin=!1,s.prototype.audioMuted=!1,s.prototype.compressedSdpOffer=m.newBuffer([]),s.prototype.videoSubscriptionConfiguration=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var n=0;n<e.sendStreams.length;++n)a.SdkStreamDescriptor.encode(e.sendStreams[n],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var n=0;n<e.receiveStreamIds.length;++n)t.uint32(24).uint32(e.receiveStreamIds[n]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var n=0;n<e.videoSubscriptionConfiguration.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[n],t.uint32(74).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var n=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(n)return"sendStreams."+n}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(n)return"videoSubscriptionConfiguration."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n){if(typeof e.sendStreams[n]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[n]=a.SdkStreamDescriptor.fromObject(e.sendStreams[n])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var n=0;n<e.receiveStreamIds.length;++n)t.receiveStreamIds[n]=e.receiveStreamIds[n]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var n=0;n<e.videoSubscriptionConfiguration.length;++n){if(typeof e.videoSubscriptionConfiguration[n]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sendStreams=[],n.receiveStreamIds=[],n.videoSubscriptionConfiguration=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpOffer="",n.audioHost="",n.audioCheckin=!1,n.audioMuted=!1,t.bytes===String?n.compressedSdpOffer="":(n.compressedSdpOffer=[],t.bytes!==Array&&(n.compressedSdpOffer=m.newBuffer(n.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){n.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)n.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){n.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)n.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(n.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(n.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(n.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(n.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(n.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){n.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)n.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),s}(),a.SdkSubscribeAckFrame=function(){function s(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkSubscribeAckFrame"),s.prototype.duplex=1,s.prototype.allocations=m.emptyArray,s.prototype.sdpAnswer="",s.prototype.tracks=m.emptyArray,s.prototype.compressedSdpAnswer=m.newBuffer([]),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var n=0;n<e.allocations.length;++n)a.SdkStreamAllocation.encode(e.allocations[n],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var n=0;n<e.tracks.length;++n)a.SdkTrackMapping.encode(e.tracks[n],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var n=a.SdkStreamAllocation.verify(e.allocations[t]);if(n)return"allocations."+n}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var n=a.SdkTrackMapping.verify(e.tracks[t]);if(n)return"tracks."+n}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var n=0;n<e.allocations.length;++n){if(typeof e.allocations[n]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[n]=a.SdkStreamAllocation.fromObject(e.allocations[n])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var n=0;n<e.tracks.length;++n){if(typeof e.tracks[n]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[n]=a.SdkTrackMapping.fromObject(e.tracks[n])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.allocations=[],n.tracks=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpAnswer="",t.bytes===String?n.compressedSdpAnswer="":(n.compressedSdpAnswer=[],t.bytes!==Array&&(n.compressedSdpAnswer=m.newBuffer(n.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){n.allocations=[];for(var o=0;o<e.allocations.length;++o)n.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(n.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){n.tracks=[];for(var o=0;o<e.tracks.length;++o)n.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(n.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),s}(),a.SdkIndexFrame=function(){function s(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkIndexFrame"),s.prototype.atCapacity=!1,s.prototype.sources=m.emptyArray,s.prototype.pausedAtSourceIds=m.emptyArray,s.prototype.numParticipants=0,s.prototype.supportedReceiveCodecIntersection=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var n=0;n<e.sources.length;++n)a.SdkStreamDescriptor.encode(e.sources[n],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var n=0;n<e.pausedAtSourceIds.length;++n)t.uint32(24).uint32(e.pausedAtSourceIds[n]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)t.uint32(40).int32(e.supportedReceiveCodecIntersection[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var n=a.SdkStreamDescriptor.verify(e.sources[t]);if(n)return"sources."+n}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var n=0;n<e.sources.length;++n){if(typeof e.sources[n]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[n]=a.SdkStreamDescriptor.fromObject(e.sources[n])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var n=0;n<e.pausedAtSourceIds.length;++n)t.pausedAtSourceIds[n]=e.pausedAtSourceIds[n]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)switch(e.supportedReceiveCodecIntersection[n]){default:if(typeof e.supportedReceiveCodecIntersection[n]=="number"){t.supportedReceiveCodecIntersection[n]=e.supportedReceiveCodecIntersection[n];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[n]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[n]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[n]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[n]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[n]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[n]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[n]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[n]=11;break}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sources=[],n.pausedAtSourceIds=[],n.supportedReceiveCodecIntersection=[]),t.defaults&&(n.atCapacity=!1,n.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(n.atCapacity=e.atCapacity),e.sources&&e.sources.length){n.sources=[];for(var o=0;o<e.sources.length;++o)n.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){n.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)n.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(n.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){n.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)n.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),s}(),a.SdkPauseResumeFrame=function(){function s(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPauseResumeFrame"),s.prototype.streamIds=m.emptyArray,s.prototype.groupIds=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamIds!=null&&e.streamIds.length)for(var n=0;n<e.streamIds.length;++n)t.uint32(8).uint32(e.streamIds[n]);if(e.groupIds!=null&&e.groupIds.length)for(var n=0;n<e.groupIds.length;++n)t.uint32(16).uint32(e.groupIds[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var n=0;n<e.streamIds.length;++n)t.streamIds[n]=e.streamIds[n]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var n=0;n<e.groupIds.length;++n)t.groupIds[n]=e.groupIds[n]>>>0}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streamIds=[],n.groupIds=[]),e.streamIds&&e.streamIds.length){n.streamIds=[];for(var o=0;o<e.streamIds.length;++o)n.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){n.groupIds=[];for(var o=0;o<e.groupIds.length;++o)n.groupIds[o]=e.groupIds[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),s}(),a.SdkBitrateFrame=function(){function s(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkBitrateFrame"),s.prototype.bitrates=m.emptyArray,s.prototype.serverAvailableOutgoingBitrate=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.bitrates!=null&&e.bitrates.length)for(var n=0;n<e.bitrates.length;++n)a.SdkBitrate.encode(e.bitrates[n],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var n=a.SdkBitrate.verify(e.bitrates[t]);if(n)return"bitrates."+n}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var n=0;n<e.bitrates.length;++n){if(typeof e.bitrates[n]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[n]=a.SdkBitrate.fromObject(e.bitrates[n])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.bitrates=[]),t.defaults&&(n.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){n.bitrates=[];for(var o=0;o<e.bitrates.length;++o)n.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(n.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),s}(),a.SdkStreamDescriptor=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamDescriptor"),s.prototype.streamId=0,s.prototype.framerate=0,s.prototype.maxBitrateKbps=0,s.prototype.trackLabel="",s.prototype.groupId=0,s.prototype.avgBitrateBps=0,s.prototype.attendeeId="",s.prototype.mediaType=1,s.prototype.externalUserId="",s.prototype.width=0,s.prototype.height=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.framerate=0,n.maxBitrateKbps=0,n.trackLabel="",n.groupId=0,n.avgBitrateBps=0,n.attendeeId="",n.mediaType=t.enums===String?"AUDIO":1,n.externalUserId="",n.width=0,n.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(n.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(n.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(n.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(n.height=e.height),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),s}(),a.SdkStreamAllocation=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamAllocation"),s.prototype.trackLabel="",s.prototype.streamId=0,s.prototype.groupId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.trackLabel="",n.streamId=0,n.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),s}(),a.SdkTrackMapping=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTrackMapping"),s.prototype.streamId=0,s.prototype.ssrc=0,s.prototype.trackLabel="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.ssrc=0,n.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(n.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),s}(),a.SdkBitrate=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkBitrate"),s.prototype.sourceStreamId=0,s.prototype.avgBitrateBps=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceStreamId=0,n.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(n.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),s}(),a.SdkAudioControlFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioControlFrame"),s.prototype.muted=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),s}(),a.SdkAudioMetadataFrame=function(){function s(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioMetadataFrame"),s.prototype.attendeeStates=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var n=0;n<e.attendeeStates.length;++n)a.SdkAudioAttendeeState.encode(e.attendeeStates[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var n=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(n)return"attendeeStates."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n){if(typeof e.attendeeStates[n]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[n]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){n.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)n.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),s}(),a.SdkAudioAttendeeState=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioAttendeeState"),s.prototype.audioStreamId=0,s.prototype.volume=0,s.prototype.muted=!1,s.prototype.signalStrength=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.volume=0,n.muted=!1,n.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(n.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(n.signalStrength=e.signalStrength),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfoFrame=function(){function s(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioStreamIdInfoFrame"),s.prototype.streams=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streams!=null&&e.streams.length)for(var n=0;n<e.streams.length;++n)a.SdkAudioStreamIdInfo.encode(e.streams[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var n=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(n)return"streams."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var n=0;n<e.streams.length;++n){if(typeof e.streams[n]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[n]=a.SdkAudioStreamIdInfo.fromObject(e.streams[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streams=[]),e.streams&&e.streams.length){n.streams=[];for(var o=0;o<e.streams.length;++o)n.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfo=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioStreamIdInfo"),s.prototype.audioStreamId=0,s.prototype.attendeeId="",s.prototype.muted=!1,s.prototype.externalUserId="",s.prototype.dropped=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.attendeeId="",n.muted=!1,n.externalUserId="",n.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(n.dropped=e.dropped),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),s}(),a.SdkPingPongType=function(){var s={},i=Object.create(s);return i[s[1]="PING"]=1,i[s[2]="PONG"]=2,i}(),a.SdkPingPongFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPingPongFrame"),s.prototype.type=1,s.prototype.pingId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"PING":1,n.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(n.pingId=e.pingId),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),s}(),a.SdkAudioStatusFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkAudioStatusFrame"),s.prototype.audioStatus=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=e.audioStatus),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),s}(),a.SdkMetric=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkMetric"),s.prototype.type=1,s.prototype.value=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 60:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_INPUT_HEIGHT":case 60:t.type=60;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break;case"VIDEO_RENDER_HEIGHT":case 105:t.type=105;break;case"VIDEO_RENDER_WIDTH":case 106:t.type=106;break;case"VIDEO_INPUT_WIDTH":case 107:t.type=107;break;case"VIDEO_SENT_JITTER_MS":case 108:t.type=108;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,n.value=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[60]="VIDEO_INPUT_HEIGHT"]=60,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[i[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[i[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e[i[105]="VIDEO_RENDER_HEIGHT"]=105,e[i[106]="VIDEO_RENDER_WIDTH"]=106,e[i[107]="VIDEO_INPUT_WIDTH"]=107,e[i[108]="VIDEO_SENT_JITTER_MS"]=108,e}(),s}(),a.SdkStreamMetricFrame=function(){function s(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamMetricFrame"),s.prototype.streamId=0,s.prototype.groupId=0,s.prototype.metrics=m.emptyArray,s.prototype.dimensions=m.emptyArray,s.prototype.mediaType=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var n=0;n<e.metrics.length;++n)a.SdkMetric.encode(e.metrics[n],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var n=0;n<e.dimensions.length;++n)a.SdkStreamDimension.encode(e.dimensions[n],t.uint32(50).fork()).ldelim();return e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(56).int32(e.mediaType),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}case 7:{o.mediaType=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var n=a.SdkMetric.verify(e.metrics[t]);if(n)return"metrics."+n}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var n=a.SdkStreamDimension.verify(e.dimensions[t]);if(n)return"dimensions."+n}}if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var n=0;n<e.metrics.length;++n){if(typeof e.metrics[n]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[n]=a.SdkMetric.fromObject(e.metrics[n])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var n=0;n<e.dimensions.length;++n){if(typeof e.dimensions[n]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[n]=a.SdkStreamDimension.fromObject(e.dimensions[n])}}switch(e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.metrics=[],n.dimensions=[]),t.defaults&&(n.streamId=0,n.groupId=0,n.mediaType=t.enums===String?"AUDIO":1),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.metrics&&e.metrics.length){n.metrics=[];for(var o=0;o<e.metrics.length;++o)n.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){n.dimensions=[];for(var o=0;o<e.dimensions.length;++o)n.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),s}(),a.SdkClientMetricFrame=function(){function s(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkClientMetricFrame"),s.prototype.globalMetrics=m.emptyArray,s.prototype.streamMetricFrames=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var n=0;n<e.globalMetrics.length;++n)a.SdkMetric.encode(e.globalMetrics[n],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var n=0;n<e.streamMetricFrames.length;++n)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[n],t.uint32(18).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var n=a.SdkMetric.verify(e.globalMetrics[t]);if(n)return"globalMetrics."+n}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var n=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(n)return"streamMetricFrames."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n){if(typeof e.globalMetrics[n]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[n]=a.SdkMetric.fromObject(e.globalMetrics[n])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var n=0;n<e.streamMetricFrames.length;++n){if(typeof e.streamMetricFrames[n]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[n]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.globalMetrics=[],n.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){n.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)n.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){n.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)n.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),s}(),a.SdkStreamDimension=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkStreamDimension"),s.prototype.type=1,s.prototype.value=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ENCODER_NAME":1,n.value=null),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=a.SdkDimensionValue.toObject(e.value,t)),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),s}(),a.SdkDimensionValue=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkDimensionValue"),s.prototype.stringValue="",s.prototype.boolValue=!1,s.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults)if(n.stringValue="",n.boolValue=!1,m.Long){var o=new m.Long(0,0,!0);n.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(n.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(n.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?n.uintValue=t.longs===String?String(e.uintValue):e.uintValue:n.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),s}(),a.SdkDataMessageFrame=function(){function s(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkDataMessageFrame"),s.prototype.messages=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)a.SdkDataMessagePayload.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=a.SdkDataMessagePayload.verify(e.messages[t]);if(n)return"messages."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if(typeof e.messages[n]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[n]=a.SdkDataMessagePayload.fromObject(e.messages[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var o=0;o<e.messages.length;++o)n.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),s}(),a.SdkDataMessagePayload=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkDataMessagePayload"),s.prototype.topic="",s.prototype.data=m.newBuffer([]),s.prototype.lifetimeMs=0,s.prototype.senderAttendeeId="",s.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.senderExternalUserId="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.topic="",t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=m.newBuffer(n.data))),n.lifetimeMs=0,n.senderAttendeeId="",m.Long){var o=new m.Long(0,0,!1);n.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.ingestTimeNs=t.longs===String?"0":0;n.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(n.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(n.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(n.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?n.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:n.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(n.senderExternalUserId=e.senderExternalUserId),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),s}(),a.SdkTurnCredentials=function(){function s(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTurnCredentials"),s.prototype.username="",s.prototype.password="",s.prototype.ttl=0,s.prototype.uris=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var n=0;n<e.uris.length;++n)t.uint32(34).string(e.uris[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var n=0;n<e.uris.length;++n)t.uris[n]=String(e.uris[n])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.uris=[]),t.defaults&&(n.username="",n.password="",n.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(n.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(n.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(n.ttl=e.ttl),e.uris&&e.uris.length){n.uris=[];for(var o=0;o<e.uris.length;++o)n.uris[o]=e.uris[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),s}(),a.SdkTranscriptItem=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptItem"),s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.speakerAttendeeId="",s.prototype.speakerExternalUserId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type=1,s.prototype.vocabularyFilterMatch=!1,s.prototype.confidence=0,s.prototype.stable=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.content="",m.Long){var o=new m.Long(0,0,!1);n.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.endTime=t.longs===String?"0":0;if(n.speakerAttendeeId="",n.speakerExternalUserId="",m.Long){var o=new m.Long(0,0,!1);n.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.startTime=t.longs===String?"0":0;n.type=t.enums===String?"PRONUNCIATION":1,n.vocabularyFilterMatch=!1,n.confidence=0,n.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(n.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(n.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(n.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(n.stable=e.stable),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),s}(),a.SdkTranscriptEntity=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptEntity"),s.prototype.category="",s.prototype.confidence=0,s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.category="",n.confidence=0,n.content="",m.Long){var o=new m.Long(0,0,!1);n.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.endTime=t.longs===String?"0":0;if(m.Long){var o=new m.Long(0,0,!1);n.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.startTime=t.longs===String?"0":0;n.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(n.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=e.type),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),s}(),a.SdkTranscriptAlternative=function(){function s(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptAlternative"),s.prototype.items=m.emptyArray,s.prototype.transcript="",s.prototype.entities=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.items!=null&&e.items.length)for(var n=0;n<e.items.length;++n)a.SdkTranscriptItem.encode(e.items[n],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var n=0;n<e.entities.length;++n)a.SdkTranscriptEntity.encode(e.entities[n],t.uint32(26).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var n=a.SdkTranscriptItem.verify(e.items[t]);if(n)return"items."+n}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var n=a.SdkTranscriptEntity.verify(e.entities[t]);if(n)return"entities."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var n=0;n<e.items.length;++n){if(typeof e.items[n]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[n]=a.SdkTranscriptItem.fromObject(e.items[n])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var n=0;n<e.entities.length;++n){if(typeof e.entities[n]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[n]=a.SdkTranscriptEntity.fromObject(e.entities[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.items=[],n.entities=[]),t.defaults&&(n.transcript=""),e.items&&e.items.length){n.items=[];for(var o=0;o<e.items.length;++o)n.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(n.transcript=e.transcript),e.entities&&e.entities.length){n.entities=[];for(var o=0;o<e.entities.length;++o)n.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),s}(),a.SdkTranscriptLanguageWithScore=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptLanguageWithScore"),s.prototype.languageCode="",s.prototype.score=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.languageCode="",n.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(n.score=t.json&&!isFinite(e.score)?String(e.score):e.score),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),s}(),a.SdkTranscriptResult=function(){function s(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptResult"),s.prototype.alternatives=m.emptyArray,s.prototype.channelId="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.isPartial=!1,s.prototype.resultId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.languageCode="",s.prototype.languageIdentification=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.alternatives!=null&&e.alternatives.length)for(var n=0;n<e.alternatives.length;++n)a.SdkTranscriptAlternative.encode(e.alternatives[n],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var n=0;n<e.languageIdentification.length;++n)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[n],t.uint32(66).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var n=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(n)return"alternatives."+n}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var n=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(n)return"languageIdentification."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var n=0;n<e.alternatives.length;++n){if(typeof e.alternatives[n]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[n]=a.SdkTranscriptAlternative.fromObject(e.alternatives[n])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var n=0;n<e.languageIdentification.length;++n){if(typeof e.languageIdentification[n]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[n]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.alternatives=[],n.languageIdentification=[]),t.defaults){if(n.channelId="",m.Long){var o=new m.Long(0,0,!1);n.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.endTime=t.longs===String?"0":0;if(n.isPartial=!1,n.resultId="",m.Long){var o=new m.Long(0,0,!1);n.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.startTime=t.longs===String?"0":0;n.languageCode=""}if(e.alternatives&&e.alternatives.length){n.alternatives=[];for(var f=0;f<e.alternatives.length;++f)n.alternatives[f]=a.SdkTranscriptAlternative.toObject(e.alternatives[f],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(n.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(n.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(n.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){n.languageIdentification=[];for(var f=0;f<e.languageIdentification.length;++f)n.languageIdentification[f]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[f],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),s}(),a.SdkTranscript=function(){function s(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscript"),s.prototype.results=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.results!=null&&e.results.length)for(var n=0;n<e.results.length;++n)a.SdkTranscriptResult.encode(e.results[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var n=a.SdkTranscriptResult.verify(e.results[t]);if(n)return"results."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var n=0;n<e.results.length;++n){if(typeof e.results[n]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[n]=a.SdkTranscriptResult.fromObject(e.results[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.results=[]),e.results&&e.results.length){n.results=[];for(var o=0;o<e.results.length;++o)n.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),s}(),a.SdkTranscriptionStatus=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptionStatus"),s.prototype.type=1,s.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.transcriptionRegion="",s.prototype.transcriptionConfiguration="",s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if(t.defaults){if(n.type=t.enums===String?"STARTED":1,m.Long){var o=new m.Long(0,0,!1);n.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.eventTime=t.longs===String?"0":0;n.transcriptionRegion="",n.transcriptionConfiguration="",n.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?n.eventTime=t.longs===String?String(e.eventTime):e.eventTime:n.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(n.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(n.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),s}(),a.SdkTranscriptEvent=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}r(s,"SdkTranscriptEvent"),s.prototype.status=null,s.prototype.transcript=null;var i;return Object.defineProperty(s.prototype,"Event",{get:m.oneOfGetter(i=["status","transcript"]),set:m.oneOfSetter(i)}),s.create=r(function(t){return new s(t)},"create"),s.encode=r(function(t,n){return n||(n=p.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,n.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,n.uint32(18).fork()).ldelim(),n},"encode"),s.encodeDelimited=r(function(t,n){return this.encode(t,n).ldelim()},"encodeDelimited"),s.decode=r(function(t,n){t instanceof h||(t=h.create(t));for(var o=n===void 0?t.len:t.pos+n,f=new a.SdkTranscriptEvent;t.pos<o;){var g=t.uint32();switch(g>>>3){case 1:{f.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{f.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(g&7);break}}return f},"decode"),s.decodeDelimited=r(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),s.verify=r(function(t){if(typeof t!="object"||t===null)return"object expected";var n={};if(t.status!=null&&t.hasOwnProperty("status")){n.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(n.Event===1)return"Event: multiple values";n.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),s.fromObject=r(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var n=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");n.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");n.transcript=a.SdkTranscript.fromObject(t.transcript)}return n},"fromObject"),s.toObject=r(function(t,n){n||(n={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,n),n.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,n),n.oneofs&&(o.Event="transcript")),o},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),s}(),a.SdkTranscriptFrame=function(){function s(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkTranscriptFrame"),s.prototype.events=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.events!=null&&e.events.length)for(var n=0;n<e.events.length;++n)a.SdkTranscriptEvent.encode(e.events[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var n=a.SdkTranscriptEvent.verify(e.events[t]);if(n)return"events."+n}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var n=0;n<e.events.length;++n){if(typeof e.events[n]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[n]=a.SdkTranscriptEvent.fromObject(e.events[n])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.events=[]),e.events&&e.events.length){n.events=[];for(var o=0;o<e.events.length;++o)n.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),s}(),a.SdkRemoteVideoUpdateFrame=function(){function s(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkRemoteVideoUpdateFrame"),s.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,s.prototype.removedVideoSubscriptionMids=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[n],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.uint32(18).string(e.removedVideoSubscriptionMids[n]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(n)return"addedOrUpdatedVideoSubscriptions."+n}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n){if(typeof e.addedOrUpdatedVideoSubscriptions[n]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[n])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.removedVideoSubscriptionMids[n]=String(e.removedVideoSubscriptionMids[n])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addedOrUpdatedVideoSubscriptions=[],n.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){n.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)n.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){n.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)n.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),s}(),a.SdkVideoQualityAdaptationPreference=function(){var s={},i=Object.create(s);return i[s[1]="BALANCED"]=1,i[s[2]="MAINTAIN_FRAMERATE"]=2,i[s[3]="MAINTAIN_RESOLUTION"]=3,i}(),a.SdkVideoSubscriptionConfiguration=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkVideoSubscriptionConfiguration"),s.prototype.mid="",s.prototype.attendeeId="",s.prototype.streamId=0,s.prototype.priority=0,s.prototype.targetBitrateKbps=0,s.prototype.groupId=0,s.prototype.qualityAdaptationPreference=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.mid="",n.attendeeId="",n.streamId=0,n.priority=0,n.targetBitrateKbps=0,n.groupId=0,n.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(n.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(n.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(n.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(n.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),s}(),a.SdkNotificationFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkNotificationFrame"),s.prototype.level=3,s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.level=t.enums===String?"ERROR":3,n.message=""),e.level!=null&&e.hasOwnProperty("level")&&(n.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),s.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),s}(),a.SdkPrimaryMeetingJoinFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPrimaryMeetingJoinFrame"),s.prototype.credentials=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(n.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPrimaryMeetingJoinAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkPrimaryMeetingLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<n;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),s}(),a.SdkMeetingSessionCredentials=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return r(s,"SdkMeetingSessionCredentials"),s.prototype.attendeeId="",s.prototype.externalUserId="",s.prototype.joinToken="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<n;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var n={};return t.defaults&&(n.attendeeId="",n.externalUserId="",n.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(n.joinToken=e.joinToken),n},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),s}(),a.SdkVideoCodecCapability=function(){var s={},i=Object.create(s);return i[s[1]="VP8"]=1,i[s[2]="H264_BASELINE_PROFILE"]=2,i[s[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[s[4]="H264_MAIN_PROFILE"]=4,i[s[5]="H264_HIGH_PROFILE"]=5,i[s[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,i[s[8]="VP9_PROFILE_0"]=8,i[s[11]="AV1_MAIN_PROFILE"]=11,i}(),B.exports=a,m.Long=void 0,u.configure()},2020561361:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(8486874086),m=d(5527154335),a=h(d(6332689210));let s=r(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const n=new p.Sha256(t);return n.update(e),n.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,n,o){return u(this,void 0,void 0,function*(){const f=yield this.hmac(t,"AWS4"+e),g=yield this.hmac(n,f),S=yield this.hmac(o,g);return yield this.hmac("aws4_request",S)})}signURL(e,t,n,o,f,g,S){return u(this,void 0,void 0,function*(){const c=this.getDateTimeString(),v=this.getDateString(c),_="AWS4-HMAC-SHA256";let E="";this.chimeClient.config.region instanceof Function?E=yield this.chimeClient.config.region():E=this.chimeClient.config.region;const b="host",T="host:"+o.toLowerCase()+`
`,I=v+"/"+E+"/"+n+"/aws4_request";let O;this.chimeClient.config.credentials instanceof Function?O=yield this.chimeClient.config.credentials():O=this.chimeClient.config.credentials;let w=new Map;w.set("X-Amz-Algorithm",[_]),w.set("X-Amz-Credential",[encodeURIComponent(O.accessKeyId+"/"+I)]),w.set("X-Amz-Date",[c]),w.set("X-Amz-Expires",["10"]),w.set("X-Amz-SignedHeaders",["host"]),O.sessionToken&&w.set("X-Amz-Security-Token",[encodeURIComponent(O.sessionToken)]),w.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),w.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((ae,ce)=>{const Te=encodeURIComponent(ce);ae.sort().forEach(ke=>{w.has(Te)||w.set(Te,[]),w.get(Te).push(encodeURIComponent(ke))})});let D="";w=new Map([...w.entries()].sort()),w.forEach((ae,ce)=>{ae.forEach(Te=>{D.length&&(D+="&"),D+=ce+"="+Te})});const R=e+`
`+f+`
`+D+`
`+T+`
`+b+`
`+m.toHex(yield this.hmac(g)),L=m.toHex(yield this.hmac(R)),H=`AWS4-HMAC-SHA256
`+c+`
`+v+"/"+E+"/"+n+`/aws4_request
`+L,K=yield this.getSignatureKey(O.secretAccessKey,v,E,n),ee=m.toHex(yield this.hmac(H,K)),q=D+"&X-Amz-Signature="+ee;return t+"://"+o+f+"?"+q})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=s},568851064:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var d;(function(u){u[u.Low=0]="Low",u[u.LowAndMedium=1]="LowAndMedium",u[u.LowAndHigh=2]="LowAndHigh",u[u.Medium=3]="Medium",u[u.MediumAndHigh=4]="MediumAndHigh",u[u.High=5]="High"})(d=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=d},1577470520:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var d;(function(u){u[u.DeviceChanged=0]="DeviceChanged",u[u.MutedLocal=1]="MutedLocal",u[u.UnmutedLocal=2]="UnmutedLocal",u[u.Connected=3]="Connected",u[u.ConnectFailed=4]="ConnectFailed",u[u.RedmicStartLoss=5]="RedmicStartLoss",u[u.RedmicEndLoss=6]="RedmicEndLoss"})(d=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=d},6181421370:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(v,_,E,b){function T(I){return I instanceof E?I:new E(function(O){O(I)})}return r(T,"adopt"),new(E||(E=Promise))(function(I,O){function w(L){try{R(b.next(L))}catch(H){O(H)}}r(w,"fulfilled");function D(L){try{R(b.throw(L))}catch(H){O(H)}}r(D,"rejected");function R(L){L.done?I(L.value):T(L.value).then(w,D)}r(R,"step"),R((b=b.apply(v,_||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3713066448)),m=h(d(3071240545)),a=h(d(3967449568)),s=h(d(7244701833)),i=h(d(5426637611)),e=h(d(9382604560)),t=h(d(1753005041)),n=h(d(5790858051)),o=d(7613896012),f=d(9671487336),g=h(d(1577470520)),S=h(d(254386585));let c=r(class Iu{toAttribute(_){return this.toSuffix(_).substring(1)}toSuffix(_){return _.toLowerCase()===_?`_${_}`:_.toUpperCase()===_?`_${_.toLowerCase()}`:_.replace(/([A-Z][a-z]+)/g,function(E){return`_${E}`}).replace(/([A-Z][A-Z]+)/g,function(E){return`_${E}`}).toLowerCase()}logLatency(_,E,b){const T=this.toSuffix(_);this.logEventTime("meeting"+T,E,b)}logStateTimeout(_,E){const b=this.toSuffix(_);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},E),{state:`state${b}`}))}logAudioEvent(_,E){const b="audio"+this.toSuffix(g.default[_]);this.logEvent(b,E)}logVideoEvent(_,E){const b="video"+this.toSuffix(S.default[_]);this.logEvent(b,E)}logEventTime(_,E){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const T=Object.assign(Object.assign({},b),{call_id:this.audioVideoController.configuration.meetingId,client_type:Iu.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${_}: ${JSON.stringify(T)}`),this.metricsAddTime(_,E,T)}logMeetingSessionStatus(_){const E=`${_.statusCode()}`;this.logEvent(E);const b={status:E,status_code:`${_.statusCode()}`};this.logEvent("meeting_session_status",b),_.isTerminal()&&this.logEvent("meeting_session_stopped",b),_.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",b),_.isFailure()&&this.logEvent("meeting_session_failed",b)}logLifecycleEvent(_,E){const b={lifecycle_event:`lifecycle${this.toSuffix(e.default[_])}`,lifecycle_event_code:`${_}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[E])}`,lifecycle_event_condition_code:`${E}`};this.logEvent("meeting_session_lifecycle",b)}logEvent(_){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const b=Object.assign(Object.assign({},E),{call_id:this.audioVideoController.configuration.meetingId,client_type:Iu.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${_}: ${JSON.stringify(b)}`),this.metricsLogEvent(_,b)}start(_,E){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=_,this.videoStreamIndex=E,this.clientMetricReport=new p.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new n.default(this.interval),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}videoTileResolutionDidChange(_,E,b){this.resolutionMap.set(_,{width:E,height:b})}videoTileUnbound(_){this.resolutionMap.delete(_)}updateMetricValues(_,E){const b=E?this.clientMetricReport.streamMetricReports[Number(_.ssrc)]:this.clientMetricReport.globalMetricReport;let T;if(E){const I=b.mediaType,O=b.direction;T=this.clientMetricReport.getMetricMap(I,O),I===a.default.VIDEO&&O===m.default.DOWNSTREAM&&this.addRenderResolutionToVideoDownstreamMetrics(b,_.ssrc)}else T=this.clientMetricReport.getMetricMap();for(const I in _)I in T&&(typeof _[I]=="number"?(b.previousMetrics[I]=b.currentMetrics[I],b.currentMetrics[I]=_[I]):typeof _[I]=="string"?b.currentStringMetrics[I]=_[I]:typeof _[I]=="object"?(b.previousObjectMetrics[I]=b.currentObjectMetrics[I]===void 0?_[I]:b.currentObjectMetrics[I],b.currentObjectMetrics[I]=_[I]):this.logger.error(`Unknown metric value type ${typeof _[I]} for metric ${I}`))}processRawMetricReports(_){this.clientMetricReport.currentSsrcs={};const E=Date.now();for(const b of _){if(this.isVideoSourceMetricReport(b))continue;const T=this.isStreamRawMetricReport(b);if(T){const I=this.clientMetricReport.streamMetricReports[Number(b.ssrc)];if(I)I.mediaType===a.default.VIDEO&&I.direction===m.default.UPSTREAM?I.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(b.rid):I.streamId=this.videoStreamIndex.streamIdForSSRC(Number(b.ssrc));else{const O=new i.default;O.mediaType=this.getMediaType(b),O.direction=this.getDirectionType(b),O.mediaType===a.default.VIDEO&&O.direction===m.default.UPSTREAM?O.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(b.rid):this.videoStreamIndex.allStreams().empty()||(O.streamId=this.videoStreamIndex.streamIdForSSRC(Number(b.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(O.groupId=this.videoStreamIndex.groupIdForSSRC(Number(b.ssrc)))),this.clientMetricReport.streamMetricReports[Number(b.ssrc)]=O}this.clientMetricReport.currentSsrcs[Number(b.ssrc)]=1}this.updateMetricValues(b,T)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=E,this.clientMetricReport.print()}addStreamMetricDimensionFrames(_,E){const b=this.clientMetricReport.getStreamDimensionMap();for(const T in E.currentStringMetrics)if(T in b){const I=o.SdkStreamDimension.create();I.type=b[T];const O=o.SdkDimensionValue.create();O.stringValue=E.currentStringMetrics[T],I.value=O,_.dimensions.push(I)}}addMetricFrame(_,E,b,T){const I=b.type,O=b.transform,w=b.source,D=E.streamMetricFrames.length,R=E.streamMetricFrames[D-1];if(I){const L=o.SdkMetric.create();L.type=I,L.value=O(w||_,T),T?R.metrics.push(L):E.globalMetrics.push(L)}}addGlobalMetricsToProtobuf(_){const E=this.clientMetricReport.getMetricMap();for(const b in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(b,_,E[b])}addStreamMetricsToProtobuf(_){for(const E in this.clientMetricReport.streamMetricReports){const b=this.clientMetricReport.streamMetricReports[E],T=o.SdkStreamMetricFrame.create();T.streamId=b.streamId,T.mediaType=b.mediaType===a.default.AUDIO?o.SdkStreamMediaType.AUDIO:o.SdkStreamMediaType.VIDEO,T.metrics=[],this.addStreamMetricDimensionFrames(T,b),_.streamMetricFrames.push(T);const I=this.clientMetricReport.getMetricMap(b.mediaType,b.direction);for(const O in I)this.hasMetricDependenciesInReport(O,b)&&this.addMetricFrame(O,_,I[O],Number(E))}}hasMetricDependenciesInReport(_,E){return _==="decoderLoss"&&E.currentMetrics.concealedSamples!==void 0&&E.currentMetrics.totalSamplesReceived!==void 0||_==="jitterBufferMs"&&E.currentMetrics.jitterBufferDelay!==void 0&&E.currentMetrics.jitterBufferEmittedCount!==void 0||_ in E.currentMetrics||_ in E.currentStringMetrics||_ in E.currentObjectMetrics}makeClientMetricProtobuf(){const _=o.SdkClientMetricFrame.create();return _.globalMetrics=[],_.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(_),this.addStreamMetricsToProtobuf(_),_}sendClientMetricProtobuf(_){this.signalingClient.sendClientMetrics(_)}isStreamRawMetricReport(_){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(_.type)||this.isVideoSourceMetricReport(_)}getMediaType(_){return _.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(_){const{type:E}=_;return E==="inbound-rtp"||E==="remote-outbound-rtp"||E==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(_){return _.type==="inbound-rtp"||_.type==="inbound-rtp-red"||_.type==="outbound-rtp"||_.type==="remote-inbound-rtp"||_.type==="remote-outbound-rtp"||_.type==="candidate-pair"&&_.state==="succeeded"||_.type==="media-source"}isValidSsrc(_){let E=!0;return this.isStreamRawMetricReport(_)&&this.getDirectionType(_)===m.default.DOWNSTREAM&&this.getMediaType(_)===a.default.VIDEO&&(E=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc))>0),E}isValidRawMetricReport(_){return this.isValidStandardRawMetric(_)&&this.isValidSsrc(_)}filterRawMetricReports(_){const E=[];for(const b of _)this.isValidRawMetricReport(b)&&E.push(b);return E}handleRawMetricReports(_){const E=this.filterRawMetricReports(_);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(E)}`);const b=[];this.maybeAddRedRecoveryMetrics(b);const T=this.getVideoUpstreamSsrcFromRawMetricReports(E);T!==null&&this.addVideoCodecDegradationMetrics(b,T),this.clientMetricReport.customStatsReports=b,E.push(...b),this.processRawMetricReports(E),this.updateVideoSourceMetrics(E);const I=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(I),this.audioVideoController.forEachObserver(O=>{f.Maybe.of(O.metricsDidReceive).map(w=>w.bind(O)(this.clientMetricReport.clone()))})}getStatsWrapper(){return u(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const _=[];try{const E=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=E,E.forEach(b=>{_.push(b)}),this.handleRawMetricReports(_)}catch(E){this.logger.error(E.message)}})}overrideObservableMetric(_,E){this.clientMetricReport.overrideObservableMetric(_,E)}recoveryMetricsDidReceive(_){this.redRecoveryMetricReport=_}maybeAddRedRecoveryMetrics(_){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(_.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(_,E){_.push({kind:"video",type:"outbound-rtp",ssrc:E,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}getVideoUpstreamSsrcFromRawMetricReports(_){for(const E of _)if(this.isStreamRawMetricReport(E)&&this.getMediaType(E)===a.default.VIDEO&&this.getDirectionType(E)===m.default.UPSTREAM)return E.ssrc;return null}isVideoSourceMetricReport(_){return _.type==="media-source"&&_.kind==="video"}addRenderResolutionToVideoDownstreamMetrics(_,E){const b=this.videoStreamIndex.streamIdForSSRC(Number(E)),T=this.videoStreamIndex.attendeeIdForStreamId(b);if(b===void 0||T===""){this.logger.warn(`No attendee found for ssrc ${E}`);return}this.resolutionMap.has(T)&&(_.currentMetrics.videoRenderWidth=this.resolutionMap.get(T).width,_.currentMetrics.videoRenderHeight=this.resolutionMap.get(T).height)}updateVideoSourceMetrics(_){for(const E of _)if(this.isVideoSourceMetricReport(E)){const b=this.clientMetricReport.getVideoUpstreamSsrcs();if(b.length===0){this.logger.warn("No video upstream ssrcs found");return}for(const T of b)this.clientMetricReport.streamMetricReports[T].currentMetrics.videoInputWidth=E.width,this.clientMetricReport.streamMetricReports[T].currentMetrics.videoInputHeight=E.height}}constructor(_,E,b=Iu.INTERVAL_MS){this.audioVideoController=_,this.logger=E,this.interval=b,this.intervalScheduler=null,this.redRecoveryMetricReport=new s.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.resolutionMap=new Map,this.metricsAddTime=(T,I,O)=>{},this.metricsLogEvent=(T,I)=>{}}},"StatsCollector");l.default=c,c.INTERVAL_MS=1e3,c.CLIENT_TYPE="amazon-chime-sdk-js"},254386585:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var d;(function(u){u[u.InputAttached=0]="InputAttached",u[u.SendingFailed=1]="SendingFailed",u[u.SendingSuccess=2]="SendingSuccess"})(d=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=d},8563305537:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(254386585)),m=h(d(748822893));let a=r(class extends m.default{run(){return u(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer),i.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const n=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(n.length?n[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const n=t.getVideoTracks(),o=n.length?n[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const f=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(f)}o&&this.context.statsCollector.logVideoEvent(p.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:n}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(n,null,4)}`);const o=n.findIndex(f=>f.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const f=n[o];n.splice(o,1),e?(n.unshift(f),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(n);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},748822893:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6028869909)),m=h(d(8089523986));let a=r(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new p.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return u(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(i){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},4989012661:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(748822893));let m=r(class extends p.default{run(){return u(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(s){super(s.logger),this.context=s,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=m},957321624:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6103584604)),m=h(d(748822893));let a=r(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=r(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(f){f.type===p.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(f){this.signalingClient=f}},"Interceptor");const n=new t(this.context.signalingClient);this.taskCanceler=n,this.context.signalingClient.registerObserver(n)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},9342672808:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(748822893));let m=r(class extends p.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const s in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[s]()}addPeerConnectionEventLogger(){const s=this.context.peer;s.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${s.connectionState}`)}),s.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),s.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${s.iceGatheringState}`)}),s.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),s.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${s.iceConnectionState}`)})}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(s){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(s)):!1}addRemoteVideoTrack(s,i){var e;const t=i.id,n=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,f;if(this.context.videoTileController.getVideoTileForAttendeeId?(f=this.context.videoTileController.getVideoTileForAttendeeId(n),o=!!(!((e=f==null?void 0:f.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(n),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${n}`);return}f||(f=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${f.id()}`));let g=this.context.videoStreamIndex.streamIdForTrack(t);typeof g>"u"&&(this.logger.warn(`stream not found for tile=${f.id()} track=${t}`),g=null);let S=this.context.videoStreamIndex.groupIdForStreamId(g);S===void 0&&(S=null);for(let I=0;I<this.trackEvents.length;I++){const O=this.trackEvents[I],w=i.getVideoTracks();if(w&&w.length){const D=w[0],R=r(()=>{this.context.logger.info(`received the ${O} event for tile=${f.id()} id=${s.id} streamId=${g}`),O==="ended"&&this.removeRemoteVideoTrack(s,f.state())},"callback");D.addEventListener(O,R),this.removeVideoTrackEventListeners[s.id]||(this.removeVideoTrackEventListeners[s.id]=[]),this.removeVideoTrackEventListeners[s.id].push(()=>{D.removeEventListener(O,R)})}}let c,v;if(s.getSettings){const I=s.getSettings();c=I.width,v=I.height}else{const I=s.getCapabilities();c=I.width,v=I.height}const _=this.context.videoStreamIndex.externalUserIdForTrack(t);f.bindVideoStream(n,!1,i,c,v,g,_,S),this.logger.info(`video track added, use tile=${f.id()} track=${t} streamId=${g} groupId=${S}`);const E="removetrack",b=i,T=r(()=>this.removeRemoteVideoTrack(s,f.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[s.id]=()=>{b.removeEventListener(E,T),delete this.removeTrackRemovedEventListeners[s.id]},b.addEventListener(E,T)}removeRemoteVideoTrack(s,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(s.id)){this.removeTrackRemovedEventListeners[s.id]();for(const e of this.removeVideoTrackEventListeners[s.id])e();delete this.removeVideoTrackEventListeners[s.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${s.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(s){super(s.logger),this.context=s,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},7771209539:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(946491843)),m=h(d(9970179348)),a=h(d(748822893));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const n=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||n;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${n})`),o}run(){return u(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,n)=>u(this,void 0,void 0,function*(){this.cancelPromise=o=>{n(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,n(o);return}t()}catch(o){n(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=s},4998646945:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(946491843)),m=h(d(9970179348)),a=h(d(748822893));let s=r(class RS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return u(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=n=>{this.removeEventListener(),t(n)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=n=>{if(this.context.logger.info(`ice candidate: ${n.candidate?n.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),n.candidate&&(m.default.isRTPCandidate(n.candidate.candidate)&&this.context.iceCandidates.push(n.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=RS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=s,s.CHROME_VPN_TIMEOUT_MS=5e3},1413840948:function(B,l,d){"use strict";var u=this&&this.__createBinding||(Object.create?function(c,v,_,E){E===void 0&&(E=_),Object.defineProperty(c,E,{enumerable:!0,get:function(){return v[_]}})}:function(c,v,_,E){E===void 0&&(E=_),c[E]=v[_]}),h=this&&this.__setModuleDefault||(Object.create?function(c,v){Object.defineProperty(c,"default",{enumerable:!0,value:v})}:function(c,v){c.default=v}),p=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var v={};if(c!=null)for(var _ in c)_!=="default"&&Object.prototype.hasOwnProperty.call(c,_)&&u(v,c,_);return h(v,c),v},m=this&&this.__awaiter||function(c,v,_,E){function b(T){return T instanceof _?T:new _(function(I){I(T)})}return r(b,"adopt"),new(_||(_=Promise))(function(T,I){function O(R){try{D(E.next(R))}catch(L){I(L)}}r(O,"fulfilled");function w(R){try{D(E.throw(R))}catch(L){I(L)}}r(w,"rejected");function D(R){R.done?T(R.value):b(R.value).then(O,w)}r(D,"step"),D((E=E.apply(c,v||[])).next())})},a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(1984577674)),i=a(d(946491843)),e=a(d(5922047127)),t=p(d(1382242439)),n=a(d(6103584604)),o=a(d(1967512172)),f=d(7613896012),g=a(d(748822893));let S=r(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const v=yield new Promise((_,E)=>{const b=this.context;b.turnCredentials=null;let T=r(class{cancel(){this.signalingClient.removeObserver(this),E(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(D){if(D.type===n.default.WebSocketClosed){let L=`The signaling connection was closed with code ${D.closeCode} and reason: ${D.closeReason}`;b.logger.warn(L);let H=i.default.SignalingBadRequest;D.closeCode===4410?(L="The meeting already ended.",b.logger.warn(L),H=i.default.MeetingEnded):D.closeCode>=4500&&D.closeCode<4600&&(H=i.default.SignalingInternalServerError),b.audioVideoController.handleMeetingSessionStatus(new s.default(H),new Error(L));return}if(D.type!==n.default.ReceivedSignalFrame)return;if(D.message.type===f.SdkSignalFrame.Type.JOIN_ACK){const L=D.message.joinack;if(!L){b.audioVideoController.handleMeetingSessionStatus(new s.default(i.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(L.videoSubscriptionLimit&&(b.videoSubscriptionLimit=L.videoSubscriptionLimit),b.serverSupportsCompression=L.wantsCompressedSdp,L.defaultServerSideNetworkAdaption!==void 0&&L.defaultServerSideNetworkAdaption!==t.default.Default&&b.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const H=L.defaultServerSideNetworkAdaption;b.logger.info(`Overriding server side network adaption value to ${H}`),b.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(H))}L&&L.turnCredentials?(b.turnCredentials=new e.default,b.turnCredentials.username=L.turnCredentials.username,b.turnCredentials.password=L.turnCredentials.password,b.turnCredentials.ttl=L.turnCredentials.ttl,b.turnCredentials.uris=L.turnCredentials.uris.map(H=>b.meetingSessionConfiguration.urls.urlRewriter(H)).filter(H=>!!H)):b.logger.error("missing TURN credentials in JoinAckFrame");return}if(D.message.type!==f.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const R=D.message.index;_(R)}constructor(D){this.signalingClient=D}},"IndexFrameInterceptor");const I=new T(this.context.signalingClient);this.context.signalingClient.registerObserver(I),this.taskCanceler=I,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const O=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(O.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),O.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(O.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),O.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(O)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},9994936499:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6103584604)),m=d(7613896012),a=h(d(748822893));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let n=r(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(g){if(g.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}g.type===p.default.ReceivedSignalFrame&&g.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(g,S){this.signalingClient=g,this.logger=S}},"Interceptor");const o=new n(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=s},611997860:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6103584604)),m=d(7613896012),a=h(d(748822893));let s=r(class extends a.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===p.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=s},785230680:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(E,b,T,I){function O(w){return w instanceof T?w:new T(function(D){D(w)})}return r(O,"adopt"),new(T||(T=Promise))(function(w,D){function R(K){try{H(I.next(K))}catch(ee){D(ee)}}r(R,"fulfilled");function L(K){try{H(I.throw(K))}catch(ee){D(ee)}}r(L,"rejected");function H(K){K.done?w(K.value):O(K.value).then(R,L)}r(H,"step"),H((I=I.apply(E,b||[])).next())})},h=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3071240545)),m=h(d(3967449568)),a=h(d(4479085271)),s=h(d(7361429724)),i=h(d(5618615883)),e=h(d(9145095843)),t=h(d(1984577674)),n=h(d(946491843)),o=h(d(5152481786)),f=h(d(6103584604)),g=d(7613896012),S=h(d(1577470520)),c=d(9671487336),v=h(d(748822893));let _=r(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(b){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(b){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=b;return}else this.pendingMetricsReport=void 0;const T=b.getObservableMetrics(),I=T.availableOutgoingBitrate,O=T.nackCountReceivedPerSecond;let w=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(b);const D=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(w=w||D,D){const R=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=R.truncate(this.context.videoSubscriptionLimit),R.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${D}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:I/1e3,nackCountPerSecond:O});const R=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();w=w||R,R&&(this.logger.info(`trigger resubscribe for up=${R}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return w}metricsDidReceive(b){if(this.checkResubscribe(b)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const T=b.streamMetricReports,I=new Map;for(const O in T)T[O].mediaType===m.default.VIDEO&&T[O].direction===p.default.DOWNSTREAM&&I.set(T[O].streamId,T[O])}connectionHealthDidChange(b){b.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,b,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(n.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,b,()=>{var T;this.context.poorConnectionCount+=1;const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("receivingAudioDropped",I),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(O=>{c.Maybe.of(O.connectionDidSuggestStopVideo).map(w=>w.bind(O)())}):this.context.audioVideoController.forEachObserver(O=>{c.Maybe.of(O.connectionDidBecomePoor).map(w=>w.bind(O)())})},()=>{this.context.audioVideoController.forEachObserver(T=>{c.Maybe.of(T.connectionDidBecomeGood).map(I=>I.bind(T)())})});for(const T of this.videoEncodingHealthPolicies)this.applyHealthPolicy(T,b,()=>{switch(this.degradeVideoCodec(T.name),T.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.context.isSessionConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,b,()=>{var T;const I=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioFailed",I)},()=>{var T;const I=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioRecovered",I)})}applyHealthPolicy(b,T,I,O){b.update(T);const w=b.healthIfChanged();w!==null&&(this.logger.info(`${b.name} value is now ${w}`),w<=b.minimumHealth()?c.Maybe.of(I).map(D=>D.bind(this)()):c.Maybe.of(O).map(D=>D.bind(this)()))}handleBitrateFrame(b){this.currentAvailableStreamAvgBitrates=b,b.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${b.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",b.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(b){var T;if(b.type===f.default.WebSocketClosed&&this.isUnexpectedWebsocketCloseCode(b.closeCode)||b.type===f.default.WebSocketError||b.type===f.default.WebSocketFailed){if(b.type===f.default.WebSocketClosed&&this.context.logger.info(`The signaling connection was closed with code ${b.closeCode} and reason: ${b.closeReason}`),!this.hasSignalingError){const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("signalingDropped",I),this.hasSignalingError=!0}this.context.isSessionConnected&&this.context.audioVideoController.handleMeetingSessionStatus(new t.default(this.isInternalServerFailureCloseCode(b.closeCode)?n.default.SignalingInternalServerError:n.default.SignalingChannelClosedUnexpectedly),null)}else b.type===f.default.WebSocketOpen&&(this.hasSignalingError=!1);if(b.type===f.default.ReceivedSignalFrame){if(b.message.type===g.SdkSignalFrame.Type.NOTIFICATION){switch(b.message.notification.level){case g.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${b.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${b.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${b.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${b.message.notification.level}: ${b.message.notification.message}`);break}return}if(b.message.bitrates){const O=b.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(O),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(b.message.bitrates)}const I=t.default.fromSignalFrame(b.message);b.message.type!==g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&I.statusCode()!==n.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(I,null)}}isUnexpectedWebsocketCloseCode(b){return b===1006||this.isInternalServerFailureCloseCode(b)}isInternalServerFailureCloseCode(b){return b>=4500&&b<4600}degradeVideoCodec(b){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const T=[];for(const I of this.context.videoSendCodecPreferences)I.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||T.push(I);T.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${T[0].codecName} due to ${b}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=T,this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(I=>I.codecName).join(",")}`)}}constructor(b,T,I){super(b.logger),this.context=b,this.initialConnectionHealthData=I,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=O=>{const w=O<1,D=this.prevSignalStrength<1,R=w?D?null:S.default.RedmicStartLoss:D?S.default.RedmicEndLoss:null;R&&this.context.statsCollector.logAudioEvent(R),this.prevSignalStrength=O},this.realtimeFatalErrorCallback=O=>{this.logger.error(`realtime error: ${O}: ${O.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(n.default.RealtimeApiFailed),O)},this.realtimeAttendeeIdPresenceHandler=(O,w)=>{var D;const R=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${R}`),R===O&&w&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(D=this.context.eventController)===null||D===void 0||D.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:O,startTimeMs:w,iceGatheringDurationMs:D,attendeePresenceDurationMs:R,meetingStartDurationMs:L}=this.context;return{meetingDurationMs:w===null?0:Math.round(Date.now()-w),signalingOpenDurationMs:O,iceGatheringDurationMs:D,attendeePresenceDurationMs:R,meetingStartDurationMs:L}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const O=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},O),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(b.logger,Object.assign({},T),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},T),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new s.default(b.logger,Object.assign({},T),this.initialConnectionHealthData.clone());for(const O of T.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new O(Object.assign({},T),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=_},4401930660:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(h){}},"NoOpTask");l.default=d},6028869909:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(152907414)),p=u(d(3066440630));let m=r(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const s of this.dependencies)s.cancel();this.logger.info(`Canceling ${this.name()}`),p.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&p.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const s=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${s}`)}run(){if(this.promise)return this.promise;const s=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=s.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(s){this.task.setParent(s)}constructor(s,i,e){this.logger=s,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=m},9157601162:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8527332165)),m=h(d(6103584604)),a=h(d(748822893));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new p.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((n,o)=>{let f=r(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(c){switch(c.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),n();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(c){this.signalingClient=c}},"WebSocketOpenInterceptor");const g=new f(this.context.signalingClient);this.context.signalingClient.registerObserver(g),this.taskCanceler=g})}catch(n){throw n}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=s},3087911396:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(748822893));let m=r(class extends p.default{cancel(){for(const s of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${s.name()}`),s.cancel()}run(){return u(this,void 0,void 0,function*(){const s=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),s.push(e.run());const i=[];for(let e=0;e<s.length;e++){try{yield s[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(s,i,e){super(s),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=m},6062681936:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(e,t,n,o){function f(g){return g instanceof n?g:new n(function(S){S(g)})}return r(f,"adopt"),new(n||(n=Promise))(function(g,S){function c(E){try{_(o.next(E))}catch(b){S(b)}}r(c,"fulfilled");function v(E){try{_(o.throw(E))}catch(b){S(b)}}r(v,"rejected");function _(E){E.done?g(E.value):f(E.value).then(c,v)}r(_,"step"),_((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(28946295),m=h(d(6103584604)),a=d(7613896012),s=h(d(748822893));let i=r(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,n)=>{let o=r(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===m.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(p.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,c,v){this.signalingClient=S,this.completionCallback=c,this.logger=v}},"Interceptor");const f=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=f,this.context.signalingClient.registerObserver(f)})}constructor(t,n,o){super(t.logger),this.context=t,this.credentials=n,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=i},4105188829:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(748822893));let m=r(class extends p.default{run(){var s,i;return u(this,void 0,void 0,function*(){if(!(!((i=(s=this.context.meetingSessionConfiguration)===null||s===void 0?void 0:s.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(s){super(s.logger),this.context=s,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=m},980450337:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6103584604)),m=d(7613896012),a=h(d(748822893));let s=r(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const n of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(n);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${n}`);continue}let f=this.context.videoTileController.getVideoTileForAttendeeId(o);f===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${n}. Creating new one.`),f=this.context.videoTileController.addVideoTile(),f.bindVideoStream(o,!1,null,0,0,0,null)),t.add(f.id())}this.serverPausedVideoTileIds.forEach(n=>{t.has(n)||this.serverPausedVideoTileIds.delete(n)})}handleSignalingClientEvent(e){if(e.type!==p.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,n=e.message.type;if(this.logger.info(`Received new ${n===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(f=>{const g=this.context.videoStreamIndex.attendeeIdForGroupId(f);if(g.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${f}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(g)});for(const f of o)f!==void 0&&(n===m.SdkSignalFrame.Type.PAUSE?f.state().paused||(this.serverPausedVideoTileIds.add(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBePausedByDownlinkPolicy(f.id())}),f.pause()):f.state().paused&&this.serverPausedVideoTileIds.has(f.id())&&(this.serverPausedVideoTileIds.delete(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBeUnpausedByDownlinkPolicy(f.id())}),f.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=s},6919336366:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1594701503)),m=d(7613896012),a=h(d(748822893));let s=r(class extends a.default{checkAndApplyVideoConstraint(e,t,n,o,f){return u(this,void 0,void 0,function*(){const g=e?this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution;if(!e&&n<=g.videoWidth&&o<=g.videoHeight&&f<=g.videoFrameRate)return;const S={resizeMode:{ideal:"none"},width:{max:g.videoWidth},height:{max:g.videoHeight},frameRate:{ideal:f,max:g.videoFrameRate}};try{yield t.applyConstraints(S)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}})}run(){return u(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let n;try{n=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=n,n){const o=n.getVideoTracks();if(!o||o.length===0)return;const f=this.context.meetingSessionConfiguration.credentials.attendeeId,g=new p.default(f).hasModality(p.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(g,o[0],S.width,S.height,S.frameRate);const c=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(f,!0,n,S.width,S.height,null,c);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=s},5242313998:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(o,f,g,S){function c(v){return v instanceof g?v:new g(function(_){_(v)})}return r(c,"adopt"),new(g||(g=Promise))(function(v,_){function E(I){try{T(S.next(I))}catch(O){_(O)}}r(E,"fulfilled");function b(I){try{T(S.throw(I))}catch(O){_(O)}}r(b,"rejected");function T(I){I.done?v(I.value):c(I.value).then(E,b)}r(T,"step"),T((S=S.apply(o,f||[])).next())})},h=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1253588984)),m=h(d(1594701503)),a=h(d(5152481786)),s=h(d(6103584604)),i=d(7613896012),e=d(9671487336),t=h(d(748822893));let n=r(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(f){if(f.type!==s.default.ReceivedSignalFrame||f.message.type!==i.SdkSignalFrame.Type.INDEX)return;const g=f.message.index;this.context.logger.info(`received new index ${JSON.stringify(g)}`),this.handleIndexFrame(g)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(f){if(!f)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=f;return}else this.pendingIndex=null;const g=this.context.audioVideoController.configuration.credentials.attendeeId;f.sources=f.sources.filter(b=>{const T=new m.default(b.attendeeId);return!(T.base()===g&&T.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:c,videoUplinkBandwidthPolicy:v}=this.context,_=S.allVideoSendingSourcesExcludingSelf(g);S.integrateIndexFrame(f),c.updateIndex(S),v.updateIndex(S),this.resubscribe(c,v),this.updateVideoAvailability(f),this.handleIndexVideosPausedAtSource(),f.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(f);const E=S.allVideoSendingSourcesExcludingSelf(g);this.areVideoSourcesEqual(_,E)||this.context.audioVideoController.forEachObserver(b=>{e.Maybe.of(b.remoteVideoSourcesDidChange).map(T=>T.bind(b)(E))})}areVideoSourcesEqual(f,g){if(f.length!==g.length)return!1;const S=r((_,E)=>_.attendee.attendeeId.localeCompare(E.attendee.attendeeId),"compare"),c=[...f].sort(S),v=[...g].sort(S);for(let _=0;_<c.length;_++)if(c[_].attendee.attendeeId!==v[_].attendee.attendeeId)return!1;return!0}resubscribe(f,g){const S=f.wantsResubscribe(),c=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&g.wantsResubscribe(),v=S||c;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${c})`),!v)return;const _=f.chooseSubscriptions();this.context.videosToReceive=_.truncate(this.context.videoSubscriptionLimit),_.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=g.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${c} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(f){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const g=new p.default;g.remoteVideoAvailable=!this.context.videosToReceive.empty(),g.canStartLocalVideo=!f.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(g))&&(this.context.lastKnownVideoAvailability=g.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(c=>c.bind(S)(g.clone()))}))}handleSupportedVideoReceiveCodecIntersection(f){if(this.context.videoSendCodecPreferences===void 0)return;const g=[];let S=!1;for(const c of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>c.equals(v))){this.logger.info(`Skipping ${c.codecName} since the codec has been identfied as degraded`);continue}for(const v of f.supportedReceiveCodecIntersection)if(c.equals(a.default.fromSignaled(v))){g.push(c);break}}if(g.length>0){const c=g.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(_=>v.equals(_)));this.context.currentVideoSendCodec!==void 0&&(c===void 0||!this.context.currentVideoSendCodec.equals(c))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=g}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const f=this.context.videoStreamIndex.streamsPausedAtSource();for(const g of this.context.videoTileController.getAllVideoTiles()){const S=g.state();f.contain(S.streamId)?g.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):g.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(f){super(f.logger),this.context=f,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=n},325771937:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(748822893));let p=r(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,s,i="RunnableTask"){super(a),this.fn=s,this.taskName=i}},"RunnableTask");l.default=p},7157971720:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(e,t,n,o){function f(g){return g instanceof n?g:new n(function(S){S(g)})}return r(f,"adopt"),new(n||(n=Promise))(function(g,S){function c(E){try{_(o.next(E))}catch(b){S(b)}}r(c,"fulfilled");function v(E){try{_(o.throw(E))}catch(b){S(b)}}r(v,"rejected");function _(E){E.done?g(E.value):f(E.value).then(c,v)}r(_,"step"),_((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1958669480)),m=h(d(6103584604)),a=d(7613896012),s=h(d(748822893));let i=r(class zh extends s.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const n of t.message.dataMessage.messages){const o=new p.default(n.ingestTimeNs/1e6,n.topic,n.data,n.senderAttendeeId,n.senderExternalUserId,n.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,n,o){if(!zh.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(n.length>zh.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(n,o,f)=>{if(this.context.signalingClient.ready()){let g;o instanceof Uint8Array?g=o:typeof o=="string"?g=new TextEncoder().encode(o):g=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(n,g,f);const S=a.SdkDataMessagePayload.create();S.topic=n,S.lifetimeMs=f,S.data=g;const c=a.SdkDataMessageFrame.create();c.messages=[S],this.context.signalingClient.sendDataMessage(c)}else this.context.logger.error("Cannot send data message because signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},467935533:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(748822893)),m=h(d(8089523986));let a=r(class extends p.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return u(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const n of t)n.setParent(this)}},"SerialGroupTask");l.default=a},5016494749:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9445576035)),m=h(d(9970179348)),a=h(d(748822893));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const e=this.context.peer;let n=this.context.sdpOfferInit.sdp;if(this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(n=new m.default(n).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(n=new m.default(n).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new p.default().requiresDisablingH264Encoding()&&(n=new m.default(n).removeH264SupportFromSendSection().sdp),n=new m.default(n).withStartingVideoSendBitrate(1e3).sdp,this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(n=new m.default(n).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(n=new m.default(n).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(n=new m.default(n).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const f=new m.default(n).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(f)}this.logger.debug(()=>`local description is >>>${n}<<<`);const o={type:"offer",sdp:n,toJSON:null};yield new Promise((f,g)=>u(this,void 0,void 0,function*(){this.cancelPromise=S=>{g(S)};try{yield e.setLocalDescription(o),f()}catch(S){g(S)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(e){super(e.logger),this.context=e,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=s},4152019840:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(e,t,n,o){function f(g){return g instanceof n?g:new n(function(S){S(g)})}return r(f,"adopt"),new(n||(n=Promise))(function(g,S){function c(E){try{_(o.next(E))}catch(b){S(b)}}r(c,"fulfilled");function v(E){try{_(o.throw(E))}catch(b){S(b)}}r(v,"rejected");function _(E){E.done?g(E.value):f(E.value).then(c,v)}r(_,"step"),_((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1594701503)),m=h(d(9970179348)),a=h(d(5152481786)),s=h(d(748822893));let i=r(class extends s.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return u(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new m.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new m.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new m.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new m.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new m.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const f=this.context.activeVideoInput;if(f!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,c=new p.default(S).hasModality(p.default.MODALITY_CONTENT),v=f.getVideoTracks()[0];c&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const g={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(g)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((n,o)=>u(this,void 0,void 0,function*(){const f=r(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",f),n())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",f),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",f);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),f()}catch(g){o(g)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=i},9957505777:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(S,c,v,_){function E(b){return b instanceof v?b:new v(function(T){T(b)})}return r(E,"adopt"),new(v||(v=Promise))(function(b,T){function I(D){try{w(_.next(D))}catch(R){T(R)}}r(I,"fulfilled");function O(D){try{w(_.throw(D))}catch(R){T(R)}}r(O,"rejected");function w(D){D.done?b(D.value):E(D.value).then(I,O)}r(w,"step"),w((_=_.apply(S,c||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1984577674)),m=h(d(946491843)),a=h(d(9970179348)),s=h(d(2302466300)),i=d(1382242439),e=h(d(6103584604)),t=h(d(9517368956)),n=d(7613896012),o=d(3711281607),f=h(d(748822893));let g=r(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){let c="";if(this.context.peer&&this.context.peer.localDescription&&(c=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let w=0,D=0;this.context.videoCaptureAndEncodeParameter&&(w=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),D=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const R={rid:"hi",maxBitrate:D*1e3,maxFramerate:w,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([R])}const v=this.fixUpSubscriptionOrder(c,this.context.videoSubscriptions),_=this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX;let E,b=c;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(b=new a.default(b).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const w=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";E=this.textCompressor.compress(b,w),this.context.logger.info(`Compressed the SDP message from ${b.length} to ${E.length} bytes.`),c=""}this.context.previousSdpOffer=new a.default(c);const T=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,c,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,_,this.context.videoStreamIndex.localStreamDescriptions(),!0,E);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(T.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(w=>w===0?0:this.context.videoStreamIndex.groupIdForStreamId(w)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(T)}`),this.context.signalingClient.subscribe(T);const I=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(I)}`);let O="";I.compressedSdpAnswer&&I.compressedSdpAnswer.length?(O=this.textCompressor.decompress(I.compressedSdpAnswer,this.context.previousSdpAnswerAsString),O.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${I.compressedSdpAnswer.length} to ${O.length} bytes.`),this.context.sdpAnswer=O):this.context.sdpAnswer=I.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(I)})}fixUpSubscriptionOrder(c,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const _=new Map;for(const T of v){const I=this.context.transceiverController.getMidForStreamId(T);if(I===void 0){T!==0&&this.logger.warn(`Could not find MID for stream ID: ${T}`);continue}_.set(I,T)}const E=new a.default(c).mediaSections(),b=[];for(const T of E)if(T.mediaType==="video")if(T.direction==="recvonly"){const I=_.get(T.mid);if(I===void 0){this.logger.warn(`Could not find stream ID for MID: ${T.mid}`);continue}b.push(I)}else b.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(b)} (may be same))}`),b}receiveSubscribeAck(){return new Promise((c,v)=>{const _=this.context;let E=r(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(I){if(I.isConnectionTerminated()){const w=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${I.closeCode} and reason: ${I.closeReason}`;_.logger.warn(w);let D=m.default.TaskFailed;I.closeCode>=4500&&I.closeCode<4600&&(D=m.default.SignalingInternalServerError),_.audioVideoController.handleMeetingSessionStatus(new p.default(D),new Error(w));return}if(I.type!==e.default.ReceivedSignalFrame||I.message.type!==n.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const O=I.message.suback;c(O)}constructor(I){this.signalingClient=I}},"Interceptor");const b=new E(this.context.signalingClient);this.context.signalingClient.registerObserver(b),this.taskCanceler=b})}constructor(c){super(c.logger),this.context=c,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new s.default(c.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=g},8089523986:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.IDLE="IDLE",u.RUNNING="RUNNING",u.CANCELED="CANCELED",u.FINISHED="FINISHED"})(d||(d={})),l.default=d},2985830925:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9106965827)),m=h(d(748822893));let a=r(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return u(this,void 0,void 0,function*(){const i=new p.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},7677781501:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(946491843)),m=h(d(748822893));let a=r(class extends m.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const n=r((o,f,g,S,c)=>{i===o&&f&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},6895064603:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(t,n,o,f){function g(S){return S instanceof o?S:new o(function(c){c(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,c){function v(b){try{E(f.next(b))}catch(T){c(T)}}r(v,"fulfilled");function _(b){try{E(f.throw(b))}catch(T){c(T)}}r(_,"rejected");function E(b){b.done?S(b.value):g(b.value).then(v,_)}r(E,"step"),E((f=f.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8288024884)),m=h(d(7244701833)),a=h(d(1640252696)),s=h(d(207339016)),i=h(d(3066440630));let e=r(class{setEncodingParameters(n){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!n||n.size===0)return;const f=Array.from(n.values()),g=o.getParameters();if(!g.encodings||g.encodings.length===0)g.encodings=f;else for(const S of g.encodings)for(const c of f){if((S.rid||c.rid)&&S.rid!==c.rid)continue;let v;for(v in c)v==="rid"||v==="codecPayloadType"||c.hasOwnProperty(v)&&(S[v]=c[v])}yield o.setParameters(g)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(n){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||n<=0)return;const f=o.getParameters();f.encodings||(f.encodings=[{}]);for(const g of f.encodings)g.maxBitrate=n*1e3;yield o.setParameters(f)})}setPeer(n){this.peer=n}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(n){return this._localCameraTransceiver?n===this._localCameraTransceiver.sender.track||n===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var n,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(n=this.meetingSessionContext)===null||n===void 0?void 0:n.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(n){return u(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(n),!0)})}setAudioInput(n){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,n)})}setVideoInput(n){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,n)})}updateVideoTransceivers(n,o){if(!this.useTransceivers())return o.array();const f=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(f,n,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(n,o,f){const g=f.array();n.length!==0&&!n[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(n,o,g)):n.length!==0&&this.updateTransceiverWithStop(n,o,g);for(const S of g){const c=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,c),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),c),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${c.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(n,o,f){let g=1;this.videoSubscriptions=[0];for(const S of n){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let c=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[_,E]of f.entries())if(o.StreamIdsInSameGroup(v,E)){S.direction="recvonly",this.videoSubscriptions[g]=E,c=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(E,S),f.splice(_,1);break}}if(!c){this.videoSubscriptions[g]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[_,E]of this.streamIdToTransceiver.entries())S.mid===E.mid&&(this.streamIdToTransceiver.delete(_),this.groupIdToTransceiver.delete(o.groupIdForStreamId(_)))}g+=1}}updateTransceiverWithoutStop(n,o,f){let g=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[g]=0,S.direction!=="inactive"){const c=o.streamIdForTrack("v_"+S.mid);if(c!==void 0){for(const[v,_]of f.entries())if(o.StreamIdsInSameGroup(c,_)){S.direction="recvonly",this.videoSubscriptions[g]=_,this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(_,S),f.splice(v,1);break}}}g+=1}g=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&f.length>0){S.direction="recvonly";const c=f.shift();this.videoSubscriptions[g]=c,this.streamIdToTransceiver.set(c,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(c),S)}else if(this.videoSubscriptions[g]===0){S.direction="inactive";for(const[c,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(c),this.groupIdToTransceiver.delete(o.groupIdForStreamId(c)))}g+=1}}getMidForStreamId(n){var o;return(o=this.streamIdToTransceiver.get(n))===null||o===void 0?void 0:o.mid}setStreamIdForMid(n,o){for(const[f,g]of this.streamIdToTransceiver.entries())if(g.mid===n){this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(o,g);return}}getMidForGroupId(n){var o,f;return(f=(o=this.groupIdToTransceiver.get(n))===null||o===void 0?void 0:o.mid)!==null&&f!==void 0?f:void 0}transceiverIsVideo(n){return n.receiver&&n.receiver.track&&n.receiver.track.kind==="video"||n.sender&&n.sender.track&&n.sender.track.kind==="video"}debugDumpTransceivers(){let n="",o=0;for(const f of this.peer.getTransceivers())this.transceiverIsVideo(f)&&(n+=`transceiver index=${o} mid=${f.mid} subscription=${this.videoSubscriptions[o]} direction=${f.direction}
`,o+=1);return n}setTransceiverInput(n,o){return u(this,void 0,void 0,function*(){n&&(o?n.direction="sendrecv":n.direction="inactive",yield n.sender.replaceTrack(o))})}forEachRedMetricsObserver(n){for(const o of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(n)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new p.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var n,o;const f=!!window.RTCRtpScriptTransform,g=!!RTCRtpSender.prototype.createEncodedStreams;if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(g)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([s.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const c=new m.default;c.currentTimestampMs=Date.now(),c.ssrc=S.data.ssrc,c.totalAudioPacketsLost=S.data.totalAudioPacketsLost,c.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,c.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,c.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(c)}},f)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(g){const S=this._localAudioTransceiver.sender.createEncodedStreams(),c=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:c},[S.readable,S.writable,c.readable,c.writable])}(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(n,o){var f;const g=this.peer.addTransceiver(n,o);if(!(!((f=this.peer.getConfiguration())===null||f===void 0)&&f.encodedInsertableStreams)||!this.audioRedWorker)return g;const S=!!window.RTCRtpScriptTransform,c=!!RTCRtpSender.prototype.createEncodedStreams;if(S)g.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),g.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(c){const v=g.sender.createEncodedStreams(),_=g.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:_},[v.readable,v.writable,_.readable,_.writable])}return g}destroyAudioRedWorkerAndStates(){var n,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker.terminate(),this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(n){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:n.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:n.get("opus")}))}metricsDidReceive(n){const{currentTimestampMs:o}=n,f=n.getRTCStatsReport();let g=0,S=0,c=0;f.forEach(I=>{I.kind==="audio"&&(I.type==="outbound-rtp"?S=I.packetsSent:I.type==="remote-inbound-rtp"&&(g=I.timestamp,c=I.packetsLost))}),(this.audioMetricsHistory.length===0||g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:g,totalPacketsSent:S,totalPacketsLost:c}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),_=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),E=Math.max(v,_),[b,T]=a.default.getNumRedundantEncodingsForPacketLoss(E);if(T){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const I=o-this.lastAudioRedTurnOffTimestampMs,O=o-this.lastHighPacketLossEventTimestampMs;if(I>=this.audioRedPacketLossLongEvalPeriodMs&&O<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,b)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:b})}maybeResetHoldDownTimer(n){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=n)}lossPercent(n){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,g=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=n){const c=g-this.audioMetricsHistory[S].totalPacketsLost,v=f-this.audioMetricsHistory[S].totalPacketsSent,_=100*(c/v);return Math.max(0,Math.min(_,100))}return 0}shouldUpdateAudioRedWorkerEncodings(n,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(n),!1):o<this.currentNumRedundantEncodings&&n-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(n),!0)}addRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.add(n)}removeRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.delete(n)}constructor(n,o,f){this.logger=n,this.browserBehavior=o,this.meetingSessionContext=f,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},523374695:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5814267651));let m=r(class wu extends p.default{setEncodingParameters(s){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===p.default.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===p.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(s,i,e){super(s,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let n=0;n<wu.NAME_ARR_ASCENDING.length;n++){const o=wu.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:wu.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},5814267651:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6895064603));let m=r(class Ea extends p.default{setEncodingParameters(s){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(const n of t.encodings)n.rid===Ea.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(Ea.LOW_LEVEL_NAME),n),n.rid===Ea.MID_LEVEL_NAME&&this.copyEncodingParams(s.get(Ea.MID_LEVEL_NAME),n),n.rid===Ea.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(Ea.HIGH_LEVEL_NAME),n);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(s){return u(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var s,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(s=this.meetingSessionContext)===null||s===void 0?void 0:s.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(s,i){i.active=s.active,i.maxBitrate=s.maxBitrate,i.scaleResolutionDownBy=s.scaleResolutionDownBy,i.maxFramerate=s.maxFramerate}constructor(s,i,e){super(s,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let n=0;n<Ea.NAME_ARR_ASCENDING.length;n++){const o=Ea.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:Ea.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},6239767259:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6895064603));let p=r(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,s,i){super(a,s,i)}},"VideoOnlyTransceiverController");l.default=p},2162159007:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const u=d(6217156478);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=r(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const s of u.TranscriptEventConverter.from(a))for(const i of this.transcriptEventCallbacks)i(s)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},3276536342:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Transcript");l.default=d},726647989:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptAlternative");l.default=d},4378521613:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptEntity");l.default=d},6217156478:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=d(7613896012),p=u(d(3276536342)),m=u(d(248336478)),a=u(d(7562925478)),s=u(d(4257104689)),i={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=r(class{static from(n){let o;try{o=h.SdkTranscriptFrame.decode(n.data)}catch(g){throw new Error("Cannot decode transcript data message: "+g)}const f=[];for(const g of o.events)if(g.status){const S=i[g.status.type];if(!S)continue;const c=new m.default;c.type=S,c.eventTimeMs=g.status.eventTime,c.transcriptionRegion=g.status.transcriptionRegion,c.transcriptionConfiguration=g.status.transcriptionConfiguration,g.status.message&&(c.message=g.status.message),f.push(c)}else if(g.transcript){const S=new p.default;S.results=[];for(const c of g.transcript.results){const v={channelId:c.channelId,isPartial:c.isPartial,resultId:c.resultId,startTimeMs:c.startTime,endTimeMs:c.endTime,alternatives:[]};if(c.languageCode&&(v.languageCode=c.languageCode),c.languageIdentification&&c.languageIdentification.length>0){v.languageIdentification=[];for(const _ of c.languageIdentification){const E={languageCode:_.languageCode,score:_.score};v.languageIdentification.push(E)}}for(const _ of c.alternatives){const E={items:[],transcript:_.transcript};for(const b of _.items){const T={content:b.content,attendee:{attendeeId:b.speakerAttendeeId,externalUserId:b.speakerExternalUserId},startTimeMs:b.startTime,endTimeMs:b.endTime,type:null};switch(b.vocabularyFilterMatch&&(T.vocabularyFilterMatch=b.vocabularyFilterMatch),b.hasOwnProperty("stable")&&(T.stable=b.stable),b.hasOwnProperty("confidence")&&(T.confidence=b.confidence),b.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:T.type=s.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:T.type=s.default.PUNCTUATION;break}E.items.push(T)}for(const b of _.entities){E.entities||(E.entities=[]);const T={category:b.category,confidence:b.confidence,content:b.content,startTimeMs:b.startTime,endTimeMs:b.endTime};b.type&&(T.type=b.type),E.entities.push(T)}v.alternatives.push(E)}S.results.push(v)}f.push(S)}return f}},"TranscriptEventConverter");l.TranscriptEventConverter=e},4402593625:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptItem");l.default=d},4257104689:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.PRONUNCIATION="pronunciation",u.PUNCTUATION="punctuation"})(d||(d={})),l.default=d},8483560434:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptLanguageWithScore");l.default=d},3933717315:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptResult");l.default=d},248336478:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptionStatus");l.default=d},7562925478:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(u){u.STARTED="started",u.INTERRUPTED="interrupted",u.RESUMED="resumed",u.STOPPED="stopped",u.FAILED="failed"})(d||(d={})),l.default=d},7680559561:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5961608329),p=u(d(6332689210));let m=r(class Dl{getParserResult(){var s,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((s=this.parserResult)===null||s===void 0?void 0:s.os.name)||Dl.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||Dl.UNAVAILABLE,sdkVersion:p.default.sdkVersion,sdkName:p.default.sdkName}}constructor(s){var i,e,t,n,o,f,g;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(S){s.error(S.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Dl.UNAVAILABLE,this.browserName=((n=this.parserResult)===null||n===void 0?void 0:n.browser.name)||Dl.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||Dl.UNAVAILABLE,this.deviceName=[((f=this.parserResult)===null||f===void 0?void 0:f.device.vendor)||"",((g=this.parserResult)===null||g===void 0?void 0:g.device.model)||""].join(" ").trim()||Dl.UNAVAILABLE}},"DefaultUserAgentParser");l.default=m,m.UNAVAILABLE="Unavailable"},6544037895:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{add(h){return new Promise((p,m)=>{this.queue=this.queue.then(h).then(p).catch(m)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=d},9671487336:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let d=r(class{static of(m){return m==null?h.of():u.of(m)}},"Maybe");l.Maybe=d;let u=r(class MS{map(m){return d.of(m(this.value))}flatMap(m){return m(this.value)}get(){return this.value}getOrElse(m){return this.value}defaulting(m){return d.of(this.getOrElse(m))}static of(m){if(m==null)throw new Error("value is ${value}");return new MS(m)}constructor(m){this.value=m,this.isSome=!0,this.isNone=!1}},"Some");l.Some=u;let h=r(class Au{get(){throw new Error("value is null")}getOrElse(m){return m}map(m){return new Au}flatMap(m){return new Au}defaulting(m){return d.of(this.getOrElse(m))}static of(){return new Au}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=h},1366921492:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0}),l.iterateEvery=l.SuppressedError=l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=u(d(6332689210));function p(o){return new Promise(f=>setTimeout(f,o))}r(p,"wait"),l.wait=p;function m(){var o;try{return((o=window.frameElement)===null||o===void 0?void 0:o.nodeName)==="IFRAME"||parent!==top}catch{return!0}}r(m,"isIFramed"),l.isIFramed=m;function a(o){return o===null?null:typeof o!="object"?o:Array.isArray(o)?o.map(a):Object.keys(o).reduce((f,g)=>{const S=o[g],c=typeof S=="object"?a(S):S;return f[g.toLowerCase()]=c,f},{})}r(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function s(){const o=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${o.major}.${o.minor}`}}r(s,"getDefaultAssetSpec"),l.getDefaultAssetSpec=s;function i(o){const f=Math.abs(o),g=o<=0?"+":"-",S=Math.floor(f/60).toString().padStart(2,"0"),c=Math.floor(f%60).toString().padStart(2,"0");return`${g}${S}:${c}`}r(i,"getFormattedOffset"),l.getFormattedOffset=i;function e(o){try{window.crypto.getRandomValues(o)}catch{new DataView(o.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}r(e,"getRandomValues"),l.getRandomValues=e;let t=r(class extends Error{constructor(f,g,S){var c;super(S??`${(c=f==null?void 0:f.message)!==null&&c!==void 0?c:f}`),this.error=f,this.suppressed=g}},"SuppressedError");l.SuppressedError=t;function n(o,f){if(!o)return;let g;for(const S of o)try{f(S)}catch(c){g=new t(c,g)}if(g)throw g}r(n,"iterateEvery"),l.iterateEvery=n},6332689210:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9445576035)),p=u(d(4521558346));let m=r(class pc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return p.default.semverString}static get sdkVersionSemVer(){var s,i,e,t;const n=p.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(s=n==null?void 0:n.groups)===null||s===void 0?void 0:s.major,minor:(i=n==null?void 0:n.groups)===null||i===void 0?void 0:i.minor,patch:(e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return p.default.hash.substring(1)}static get sdkUserAgentLowResolution(){const s=new h.default;return`${s.name()}-${s.majorVersion()}`}static urlWithVersion(s){const i=new URL(s);return i.searchParams.append(pc.X_AMZN_VERSION,pc.sdkVersion),i.searchParams.append(pc.X_AMZN_USER_AGENT,pc.sdkUserAgentLowResolution),i.toString()}},"Versioning");l.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},4521558346:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"55eb4ca",raw:"v3.27.0",semverString:"3.27.0"}},8942355099:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class PS{equal(h){let p=h.captureWidth()===this.cameraWidth&&h.captureHeight()===this.cameraHeight&&h.captureFrameRate()===this.cameraFrameRate&&h.encodeBitrates().length===this.encodeBitrates().length&&h.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&h.encodeWidths().length===this.encodeWidths().length&&h.encodeHeights().length===this.encodeHeights().length&&h.isSVCEncoding()===this.isSVC;if(p){for(let m=0;m<h.encodeWidths().length;m++)if(h.encodeWidths()[m]!==this.encodeWidths()[m]||h.encodeHeights()[m]!==this.encodeHeights()[m]||h.encodeBitrates()[m]!==this.encodeBitrates()[m]||h.encodeScaleResolutionDownBy()[m]!==this.encodeScaleResolutionDownBy()[m])return p=!1,p}return p}clone(){return new PS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(h,p,m,a,s,i=1,e=!1){this.cameraWidth=h,this.cameraHeight=p,this.cameraFrameRate=m,this.maxEncodeBitrateKbps=a,this.isSimulcast=s,this.scaleResolutionDownBy=i,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=d},4731147871:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6054180211));let p=r(class kS{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const s=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return s;const i=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),n=new Map;for(const f of t)i.contain(f.streamId)&&n.set(f.attendeeId,f);let o=0;for(const f of e){const g=f.attendee.attendeeId;if(n.has(g)){const S=n.get(g);if(o+S.maxBitrateKbps<=kS.maxReceiveBitrateKbps)s.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return s}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=p,p.maxReceiveBitrateKbps=15e3},8324353133:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6054180211));let p=r(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=p},5357242452:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var d;(function(u){u[u.Low=0]="Low",u[u.Medium=1]="Medium",u[u.High=2]="High",u[u.Maximum=3]="Maximum"})(d=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=d},9450249395:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(3944645711)),p=u(d(1382242439)),m=u(d(1964647122)),a=d(3711281607),s=u(d(4543167968)),i=u(d(4177728618));let e=r(class LS extends s.default{static createConfig(){const n=new i.default;return n.serverSideNetworkAdaption=p.default.None,n}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(n){super.updateIndex(n);const o=a.VideoPreferences.prepare();let f=!1;const g=n.remoteStreamDescriptions();for(const S of g)o.some(c=>c.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(h.default.Modality)?(o.add(new m.default(S.attendeeId,1)),f=!0):o.add(new m.default(S.attendeeId,2)));f?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(n){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(n){super(n,LS.createConfig()),this.logger=n,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},1964647122:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(5357242452)),p=u(d(8758878068));let m=r(class Ld{partialCompare(s){return this.priority-s.priority}equals(s){return this.attendeeId===s.attendeeId&&this.targetSize===s.targetSize&&this.priority===s.priority&&this.degradationPreference===s.degradationPreference}clone(){return new Ld(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(s){switch(s){case h.default.Maximum:return Ld.MAXIMUM_BITRATE_KBPS;case h.default.High:return Ld.HIGH_BITRATE_KBPS;case h.default.Medium:return Ld.MID_BITRATE_KBPS;case h.default.Low:return Ld.LOW_BITRATE_KBPS}}constructor(s,i,e,t){this.attendeeId=s,this.priority=i,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:p.default.Balanced}},"VideoPreference");l.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},3711281607:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=u(d(9197136208));function p(e,t,n){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||n===void 0)return[];const o=new Array,f=new Map,g=new Map;for(const S of t){const c=e.transceiverController.getMidForGroupId(S);if(c===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);f.set(v,c),g.set(v,S)}for(const S of n){const c=new h.default,v=f.get(S.attendeeId);v!==void 0&&(c.mid=v,c.attendeeId=S.attendeeId,c.groupId=g.get(S.attendeeId),c.priority=Number.MAX_SAFE_INTEGER-S.priority,c.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),c.qualityAdaptationPreference=S.degradationPreference,o.push(c))}return o}r(p,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=p;let m=r(class Gh{static default(){return new Gh([])}[Symbol.iterator](){let t=0;const n=this.items;return{next(){return t<n.length?{done:!1,value:n[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,n){const o=this.items.findIndex(n);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(n=>!n.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const n of this.items)if(!t.items.some(o=>o.equals(n)))return!1;return!0}has(t){return this.items.some(n=>n.equals(t))}some(t){return this.items.some(t)}clone(){return new Gh([...this.items])}sort(){this.items.sort((t,n)=>t.partialCompare(n))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=r(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,n){this.items.has(t)&&!this.items.some(n)||(this.cow(),this.items.replaceFirst(t,n))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),s=r(class{add(t){this.builder.add(t)}replaceFirst(t,n){this.builder.replaceFirst(t,n)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=s;let i=r(class jh{static prepare(){return new s(new a)}static default(){return new jh(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new s(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=jh.prepare();for(const n of this.items)t.add(n.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=i,l.default=i},4543167968:function(B,l,d){"use strict";var u=this&&this.__createBinding||(Object.create?function(I,O,w,D){D===void 0&&(D=w),Object.defineProperty(I,D,{enumerable:!0,get:function(){return O[w]}})}:function(I,O,w,D){D===void 0&&(D=w),I[D]=O[w]}),h=this&&this.__setModuleDefault||(Object.create?function(I,O){Object.defineProperty(I,"default",{enumerable:!0,value:O})}:function(I,O){I.default=O}),p=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var O={};if(I!=null)for(var w in I)w!=="default"&&Object.prototype.hasOwnProperty.call(I,w)&&u(O,I,w);return h(O,I),O},m=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(d(6922010698)),s=m(d(3071240545)),i=m(d(3967449568)),e=m(d(3944645711)),t=d(152907414),n=p(d(1382242439)),o=m(d(1041737276)),f=m(d(6054180211)),g=m(d(4731147871)),S=m(d(5357242452)),c=m(d(1964647122)),v=d(3711281607),_=m(d(4177728618)),E=m(d(8758878068));let b=r(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),T=r(class Ko{reset(){this.allHighestPolicy=new g.default(""),this.optimalReceiveSet=new f.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new f.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new f.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=Ko.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=Ko.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new b,this.prevDownlinkStats=new b,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(O){this.tileController=O,this.logger.info("tileController bound")}setWantsResubscribeObserver(O){this.wantsResubscribeObserver=O}chooseRemoteVideoSources(O){var w;if(!(!((w=this.videoPreferences)===null||w===void 0)&&w.equals(O))){if(this.videoPreferences=O==null?void 0:O.clone(),!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const D=new Array;for(const R of this.videoPreferences){const L=new o.default;L.attendee=new a.default,L.attendee.attendeeId=R.attendeeId,D.push(L)}this.allHighestPolicy.chooseRemoteVideoSources(D);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(O)}`)}}updateIndex(O){this.videoIndex=O,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(O),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const O=new Set;for(const L of this.videoIndex.remoteStreamDescriptions())O.add(L.attendeeId);const w=v.VideoPreferences.prepare(),D=O.size;let R=S.default.Maximum;D>8?R=S.default.Low:D>4&&(R=S.default.Medium);for(const L of O)w.add(new c.default(L,1,R));this.defaultVideoPreferences=w.build()}updateMetrics(O){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new b;const w=O.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=w.availableIncomingBitrate/1e3;for(const D in O.streamMetricReports){const R=Number.parseInt(D,10),L=O.streamMetricReports[R];L.direction===s.default.DOWNSTREAM&&L.mediaType===i.default.VIDEO&&(L.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=O.countPerSecond("nackCount",R)),L.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=O.countPerSecond("packetsLost",R)),L.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=O.bitsPerSecond("bytesReceived",R)/1e3))}}wantsResubscribe(){let O=!1;return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(O||(O=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?O||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),O||(O=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),O)}chooseSubscriptions(){return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(O){this.observerQueue.add(O)}removeObserver(O){this.observerQueue.delete(O)}forEachObserver(O){for(const w of this.observerQueue)O(w)}setVideoPriorityBasedPolicyConfigs(O){this.videoPriorityBasedPolicyConfig=O}calculateOptimalReceiveStreams(){var O;const w=[],D=this.videoIndex.remoteStreamDescriptions();if(D.length===0||!((O=this.videoPreferences)===null||O===void 0)&&O.isEmpty()){this.optimalReceiveStreams=[];return}const R=this.rateProbeState;this.cleanBwPausedTiles(D),this.handleAppPausedStreams(w,D);const L=new Map;for(const Je of this.getCurrentVideoPreferences())L.set(Je.attendeeId,Je);const H=D.filter(Je=>L.has(Je.attendeeId)),K=!this.streamsWithPreferenceDidChange(H),ee=!this.startupPeriod&&K;if(ee&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;H.sort((Je,dt)=>Je.maxBitrateKbps===dt.maxBitrateKbps?Je.streamId-dt.streamId:Je.maxBitrateKbps-dt.maxBitrateKbps);for(const Je of H)(Je.avgBitrateKbps===0||Je.avgBitrateKbps>Je.maxBitrateKbps)&&(Je.attendeeId.endsWith(e.default.Modality)&&Je.maxBitrateKbps<100?Je.maxBitrateKbps=Je.avgBitrateKbps:Je.avgBitrateKbps=Je.maxBitrateKbps);const q=new Set;for(const Je of this.getCurrentVideoPreferences()){const dt=H.filter(He=>He.attendeeId===Je.attendeeId);if(dt.length<3)continue;let Ot=15,Nt=320*480;dt.forEach(He=>{Ot=Math.max(Ot,He.maxFrameRate),Nt=Math.max(Nt,He.totalPixels())}),dt.sort((He,ct)=>{if(Je.degradationPreference===E.default.MaintainResolution)return Math.abs(He.maxFrameRate-ct.maxFrameRate)<2?He.totalPixels()-ct.totalPixels():He.maxFrameRate-ct.maxFrameRate;if(Je.degradationPreference===E.default.MaintainFramerate)return He.totalPixels()===ct.totalPixels()?He.maxFrameRate-ct.maxFrameRate:He.totalPixels()-ct.totalPixels();{const nn=r(Xt=>Xt.avgBitrateKbps*Math.pow(2,5*Xt.maxFrameRate/Ot*Math.pow(4,Xt.totalPixels()/Nt)),"weighByFramerate");return nn(He)-nn(ct)}});let Ve;for(const He of dt){if(Ve!==void 0&&(He.maxFrameRate<Ve.maxFrameRate&&Math.abs(Ve.maxFrameRate-He.maxFrameRate)>2||He.totalPixels()<Ve.totalPixels())){q.add(He.streamId);continue}Ve=He}}const ae=H.filter(Je=>!q.has(Je.streamId));this.logger.info(`Filtered to ${JSON.stringify(ae)}`);const ce={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ce.targetDownlinkBitrate=this.determineTargetRate();const Te=this.subscribedReceiveSet.size(),ke=this.downlinkStats.bandwidthEstimateKbps,tt=!this.videoPriorityBasedPolicyConfig.allowSubscribe(Te,ke);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=Ko.MIN_TIME_BETWEEN_SUBSCRIBE_MS,ee&&tt))return;const At=this.priorityPolicy(ce,ae,w),Be=!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let $e=0;if(!Be&&!this.startupPeriod&&K?this.rateProbeState==="Probing"?$e=this.handleProbe(w,ce.targetDownlinkBitrate):ce.deltaToNextUpgrade!==0&&($e=this.maybeOverrideOrProbe(w,ce,At)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=H,this.videoPreferencesUpdated=!1,$e===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ce.targetDownlinkBitrate;return}if($e===2){const Je=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(H,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Je);return}this.optimalNonPausedReceiveStreams=w.slice();const Ze=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(H,w),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==R||this.optimalReceiveStreams.length!==w.length||Ze!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(D,ce.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ce.targetDownlinkBitrate,this.optimalReceiveStreams=w.slice()}calculateOptimalReceiveSet(){const O=new f.default;this.calculateOptimalReceiveStreams();for(const w of this.optimalReceiveStreams)O.add(w.streamId);if(!this.optimalReceiveSet.equal(O)){const w=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(O)} subscribedRate:${w}`)}this.optimalReceiveSet=O}determineTargetRate(){let O=0;const w=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=w),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>Ko.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||w-this.firstEstimateTimestamp>Ko.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?O=Ko.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<Ko.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),O=this.downlinkStats.usedBandwidthKbps+Ko.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):O=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?O=Ko.DEFAULT_BANDWIDTH_KBPS:O=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-Ko.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*Ko.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,O=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,O>15e3&&this.logger.warn("bwe: "+O+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(O,15e3)}setProbeState(O){if(this.rateProbeState===O)return!1;const w=Date.now();switch(O){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||w-this.lastProbeTimestamp>Ko.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=w;else return!1;break;case"Probing":if(w-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=w,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,Ko.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+O+" from "+this.rateProbeState),this.rateProbeState=O,!0}upgradeToStream(O,w){for(let D=0;D<O.length;D++)if(O[D].groupId===w.groupId){const R=w.avgBitrateKbps-O[D].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(O[D])+" to "+w),this.lastUpgradeRateKbps=R,O[D]=w,R}return O.push(w),this.lastUpgradeRateKbps=w.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(O,w){if(Date.now()-this.lastProbeTimestamp>Ko.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>Ko.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(Ko.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const D=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(O)||w>D?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=Ko.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(O,w,D){const R=this.chosenStreamsSameAsLast(O);let L=0;const H=w.targetDownlinkBitrate>Ko.LOW_BITRATE_THRESHOLD_KBPS?Ko.TARGET_RATE_CHANGE_TRIGGER_PERCENT:Ko.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,K=w.targetDownlinkBitrate*H/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!R&&Math.abs(w.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<K?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),L=1):this.targetRateBaselineForDeltaCheckKbps=w.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,L;if(R||L===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(O,D),L=0);break}else this.setProbeState("Not Probing");return L}calculateSubscribeRate(O){let w=0;for(const D of O)!this.pausedStreamIds.contain(D.streamId)&&!this.pausedBwAttendeeIds.has(D.attendeeId)&&(w+=D.maxBitrateKbps);return w}handleAppPausedStreams(O,w){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new f.default;const D=this.tileController.getAllRemoteVideoTiles();for(const R of D){const L=R.state();if(L.paused&&!this.pausedBwAttendeeIds.has(L.boundAttendeeId)){let H=w.length;for(;H--;)w[H].attendeeId===L.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+L.boundAttendeeId+" streamId: "+w[H].streamId),this.pausedStreamIds.add(w[H].streamId),this.subscribedReceiveSet.contain(w[H].streamId)&&O.push(w[H]),w.splice(H,1))}}}processBwPausedStreams(O,w){if(!this.tileController){this.logger.warn("tileController not found!");return}const D=this.getCurrentVideoPreferences();if(D&&this.shouldPauseTiles){const R=this.tileController.getAllVideoTiles();for(const L of D){const H=this.getVideoTileForAttendeeId(L.attendeeId,R),K=(H==null?void 0:H.state().paused)||!1;if(w.some(ee=>ee.attendeeId===L.attendeeId))K&&this.pausedBwAttendeeIds.has(L.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${L.attendeeId} due to bandwidth`),this.forEachObserver(ee=>{ee.tileWillBeUnpausedByDownlinkPolicy(H.id())}),this.tileController.unpauseVideoTile(H.id()),this.pausedBwAttendeeIds.delete(L.attendeeId));else{const ee=O.some(q=>q.attendeeId===L.attendeeId);if(H&&ee){const q=this.optimalReceiveStreams.find(ae=>ae.attendeeId===L.attendeeId);q!==void 0&&(K||(this.logger.info(`bwe: pausing streamId ${q.streamId} attendee ${L.attendeeId} due to bandwidth`),this.forEachObserver(ae=>{ae.tileWillBePausedByDownlinkPolicy(H.id())}),this.tileController.pauseVideoTile(H.id())),w.push(q)),this.pausedBwAttendeeIds.add(L.attendeeId)}else if(ee){const q=this.tileController.addVideoTile();q.bindVideoStream(L.attendeeId,!1,null,0,0,0,null),this.forEachObserver(ae=>{ae.tileWillBePausedByDownlinkPolicy(q.id())}),q.pause(),this.logger.info(`bwe: Created video tile ${q.id()} for bw paused attendee ${L.attendeeId}`),this.pausedBwAttendeeIds.add(L.attendeeId)}}}}}cleanBwPausedTiles(O){if(!this.tileController){this.logger.warn("tileController not found!");return}const w=this.tileController.getAllRemoteVideoTiles(),D=this.getCurrentVideoPreferences();for(const R of w){const L=R.state();L.boundVideoStream||(O.some(H=>H.attendeeId===L.boundAttendeeId)?D!==void 0&&!D.some(H=>H.attendeeId===L.boundAttendeeId)&&this.tileController.removeVideoTile(L.tileId):(this.tileController.removeVideoTile(L.tileId),this.logger.info(`bwe: Removed video tile ${L.tileId} for bw paused attendee ${L.boundAttendeeId}`)))}}priorityPolicy(O,w,D){let R;const L=this.getCurrentVideoPreferences(),H=L.highestPriority();let K,ee=H;for(;ee!==-1;){K=-1;for(const q of L)if(q.priority===ee)for(const ae of w)ae.attendeeId===q.attendeeId&&(D.some(ce=>ce.groupId===ae.groupId)||(O.chosenTotalBitrate+ae.avgBitrateKbps<=O.targetDownlinkBitrate?(D.push(ae),O.chosenTotalBitrate+=ae.avgBitrateKbps):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=ae.avgBitrateKbps,R=ae)));else if(q.priority>ee){K=q.priority;break}for(const q of L)if(q.priority===ee){for(const ae of w)if(ae.attendeeId===q.attendeeId){const ce=D.findIndex(Te=>Te.groupId===ae.groupId&&Te.maxBitrateKbps<=ae.maxBitrateKbps&&Te.avgBitrateKbps<ae.avgBitrateKbps);if(ce!==-1){const Te=ae.avgBitrateKbps-D[ce].avgBitrateKbps;this.hasSimulcastStreams(w,ae.attendeeId,ae.groupId)&&this.canUpgrade(ae.avgBitrateKbps,q.targetSize,q.targetSizeToBitrateKbps(q.targetSize),ae.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${ae.attendeeId} group: ${ae.groupId} has simulcast and can upgrade avgBitrate: ${ae.avgBitrateKbps} target: ${q.targetSizeToBitrateKbps(q.targetSize)} targetTotalBitrate: ${O.targetDownlinkBitrate}`),O.chosenTotalBitrate+Te<=O.targetDownlinkBitrate?(O.chosenTotalBitrate+=Te,D[ce]=ae):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=Te,R=ae)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(q.priority>ee)break;if(ee===H&&O.deltaToNextUpgrade!==0)break;ee=K}return R}getVideoTileForAttendeeId(O,w){for(const D of w)if(D.state().boundAttendeeId===O)return D;return null}canUpgrade(O,w,D,R){let L=!1;return(w===S.default.High||!R&&O<=D||R&&w===S.default.Medium&&O<=D)&&(L=!0),L?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${O} targetBitrateKbps: ${D}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${O} targetBitrateKbps: ${D}`),!1)}hasSimulcastStreams(O,w,D){let R=0;for(const L of O)L.attendeeId===w&&L.groupId===D&&R++;return this.logger.info(`bwe: attendeeId: ${w} groupId: ${D} hasSimulcastStreams: streamCount: ${R}`),R>1}streamsWithPreferenceDidChange(O){if(this.previousStreamsWithPreference===void 0||O.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const w of O)if(this.previousStreamsWithPreference.find(R=>R.groupId===w.groupId&&R.streamId===w.streamId&&R.maxBitrateKbps===w.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(O){if(this.optimalNonPausedReceiveStreams.length!==O.length)return!1;for(const w of this.optimalNonPausedReceiveStreams)if(!O.some(D=>D.streamId===w.streamId))return!1;return!0}policyStateLogStr(O,w){const D=this.calculateSubscribeRate(this.optimalReceiveStreams),R={targetBitrate:w,subscribedRate:D,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let L="remoteInfos: [";for(const K of O)L+=`{grpId:${K.groupId} strId:${K.streamId} maxBr:${K.maxBitrateKbps} avgBr:${K.avgBitrateKbps}}, `;L+="]";let H=`bwe: optimalReceiveSet ${JSON.stringify(R)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${L}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(H+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?H+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:H+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,H}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(O){this.serverSideNetworkAdaption=O,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[n.default.None,n.default.BandwidthProbing,n.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let O=this.getCurrentVideoPreferences();return O||(O=v.VideoPreferences.prepare().build()),O}wantsAllTemporalLayersInIndex(){return!0}constructor(O,w=_.default.Default){this.logger=O,this.videoPriorityBasedPolicyConfig=w,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===n.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=n.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=T,T.DEFAULT_BANDWIDTH_KBPS=2800,T.STARTUP_PERIOD_MS=6e3,T.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,T.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,T.LOW_BITRATE_THRESHOLD_KBPS=300,T.MIN_TIME_BETWEEN_PROBE_MS=5e3,T.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,T.MAX_HOLD_BEFORE_PROBE_MS=3e4,T.MAX_ALLOWED_PROBE_TIME_MS=6e4,T.SPURIOUS_PACKET_LOST_THRESHOLD=2,T.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},4177728618:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(1382242439));let p=r(class mc{allowSubscribe(a,s){let i=0;const e=this.currentNetworkEvent;if(s>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=s,!0;if(s<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=s,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,s){let i=mc.MINIMUM_DELAY_MS;const e=mc.MAXIMUM_DELAY_MS-mc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:i+=e*t*(1+s/10),i=Math.min(mc.MAXIMUM_DELAY_MS,i);break}return i}constructor(a=0,s=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=s,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.BandwidthProbingAndRemoteVideoQualityAdaption,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,s<0?s=0:s>1&&(s=1),this.networkIssueRecoveryDelayFactor=s}},"VideoPriorityBasedPolicyConfig");l.default=p,p.MINIMUM_DELAY_MS=2e3,p.MAXIMUM_DELAY_MS=8e3,p.Default=new p(0,0),p.UnstableNetworkPreset=new p(0,1),p.StableNetworkPreset=new p(1,0)},8758878068:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var d;(function(u){u[u.Balanced=0]="Balanced",u[u.MaintainFramerate=1]="MaintainFramerate",u[u.MaintainResolution=2]="MaintainResolution"})(d=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=d},1300637268:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{create(){const h={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{h.paused=!0},play:()=>(h.paused=!1,Promise.resolve())};return h}},"NoOpVideoElementFactory");l.default=d},5808804466:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return d(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(p){this.canvas=p,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=u},2458227545:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5808804466)),m=h(d(9151308820)),a=15;let s=r(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return u(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return u(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.framerate=t.frameRate,this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const n=new p.default(this.canvasInput);this.sourceBuffers.push(n),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,n=new m.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>u(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const f=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let g=[];g.push(this.sourceBuffers[0]);try{for(const T of this.processors)g=yield T.process(g)}catch{this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()});return}this.destBuffers=g;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()}));return}const c=S.width,v=S.height;c!==0&&v!==0&&(this.canvasOutput.width!==c&&this.canvasOutput.height!==v&&(this.canvasOutput.width=c,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,c,v,0,0,c,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(T=>{T.processingDidStart&&T.processingDidStart()})));const _=performance.now()-f,E=1e3*2/this.framerate-_,b=Math.max(0,1e3/this.framerate-_);E<=0&&this.forEachObserver(T=>{T.processingLatencyTooHigh&&T.processingLatencyTooHigh(_)}),yield this.timer.start(b,this.process.bind(this))}),this.timer=n}},"DefaultVideoFrameProcessorPipeline");l.default=s},9151308820:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{createWorkerTimer(){try{const p=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(p))}catch{}}start(p,m){return d(this,void 0,void 0,function*(){this.callback=m,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(p)):this.lastTimeout=setTimeout(()=>{this.callback()},p)})}destroy(){return d(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=u},6948472094:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9445576035)),m=h(d(2458227545));let a=r(class NS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new NS(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return u(this,void 0,void 0,function*(){return this.device})}transformStream(i){return u(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return u(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}get framerate(){return this.pipe.framerate}set framerate(i){this.pipe.framerate=i}constructor(i,e,t,n=new p.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=n,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},3503763380:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(i){return i instanceof m?i:new m(function(e){e(i)})}return r(s,"adopt"),new(m||(m=Promise))(function(i,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}r(t,"fulfilled");function n(f){try{o(a.throw(f))}catch(g){e(g)}}r(n,"rejected");function o(f){f.done?i(f.value):s(f.value).then(t,n)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=r(class{process(p){return d(this,void 0,void 0,function*(){return p})}destroy(){return d(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=u},9608994713:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let d=r(class{getPromise(){return this.promise}resolvePromise(h){this.resolve(h)}resolveAndReplacePromise(h){this.resolve(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}rejectPromise(h){this.reject(h)}rejectAndReplacePromise(h){this.reject(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}constructor(){this.promise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}},"DeferredPromise");l.DeferredPromise=d},523357355:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,n){function o(S){try{g(i.next(S))}catch(c){n(c)}}r(o,"fulfilled");function f(S){try{g(i.throw(S))}catch(c){n(c)}}r(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}r(g,"step"),g((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=d(9434786545);let p=r(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return u(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const s=document.createElement("canvas");s.width=this.streamParameters.width,s.height=this.streamParameters.height,s.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return u(this,void 0,void 0,function*(){const s=a.backgroundReplacement.backgroundImageURL,i=a.backgroundReplacement.defaultColor;if(s)try{const e=yield this.loadImage(s);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}resizeAndSetReplacementColor(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.fillStyle=a,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}loadImage(a){return u(this,void 0,void 0,function*(){const i=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,n)=>{e.onload=()=>{t(e)},e.onerror=o=>{n(o)}})})}constructor(a,s){this.streamParameters=a,this.outputCanvas=s,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=p},9434786545:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_FX_SPEC=l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const d="/ml_media_fx/otherassets";l.WORKER_PATH=`${d}/worker.js`,l.FXLIB_PATH=`${d}/fxlib.js`,l.DEFAULT_VIDEO_FX_SPEC={paths:{cdnBasePath:l.CDN_BASE_PATH,workerPath:l.WORKER_PATH,fxLibPath:l.FXLIB_PATH}}},3767048744:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(v,_,E,b){function T(I){return I instanceof E?I:new E(function(O){O(I)})}return r(T,"adopt"),new(E||(E=Promise))(function(I,O){function w(L){try{R(b.next(L))}catch(H){O(H)}}r(w,"fulfilled");function D(L){try{R(b.throw(L))}catch(H){O(H)}}r(D,"rejected");function R(L){L.done?I(L.value):T(L.value).then(w,D)}r(R,"step"),R((b=b.apply(v,_||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(2108947428),m=d(8567210951),a=d(4085910259),s=h(d(9445576035)),i=h(d(2044674978)),e=d(1366921492),t=h(d(6332689210)),n=h(d(5808804466)),o=d(9608994713),f=d(523357355),g=d(9434786545),S=d(9635746919);let c=r(class Nd{process(_){return u(this,void 0,void 0,function*(){return _})}fxProcess(_){return u(this,void 0,void 0,function*(){const E=_[0].asCanvasElement();this.didStreamParametersChange(E)&&(yield this.adjustProcessorForNewStreamParameters(E));try{yield this.manageSegmentationMask(E)}catch(b){throw this.logger.error(b),new Error("Video stream could not be processed")}return yield this.renderer.render(E,this.segmentationMask),_[0]=this.canvasVideoFrameBuffer,_})}noOpProcess(_){return u(this,void 0,void 0,function*(){return _})}didStreamParametersChange(_){return _.width!==this.streamParameters.width||_.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(_){return u(this,void 0,void 0,function*(){this.streamParameters.width=_.width,this.streamParameters.height=_.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return u(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:g.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(_){return u(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const E=this.canvasOpsManager.getInferenceInputData(_);this.segmentationMask=yield this.generateSegmentationMask(E),this.segmentationRateManager.completeSegmentation()}}catch(E){throw this.logger.error(E.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(_){return u(this,void 0,void 0,function*(){Nd.isSharedArrayBufferSupported?(this.sharedImageData.set(_.data),this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:_},[_.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(E){throw this.logger.error(E.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(_){return{backgroundBlur:{isEnabled:_.backgroundBlur.isEnabled,strength:_.backgroundBlur.strength},backgroundReplacement:{isEnabled:_.backgroundReplacement.isEnabled,backgroundImageURL:_.backgroundReplacement.backgroundImageURL,defaultColor:_.backgroundReplacement.defaultColor}}}setVideoFxSpec(_){_.paths&&(this.videoFxSpec.paths=_.paths)}setEffectConfig(_){return u(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(_,this.effectConfig))return;const E=this.cloneConfigFrom(_);try{yield this.validateEffectConfig(E)}catch(b){throw this.logger.error(b.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}E.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(E),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,E),this.effectConfig=E,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(_){return u(this,void 0,void 0,function*(){if(_.backgroundBlur.isEnabled&&_.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");_.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(_))})}validateReplacementConfig(_){return u(this,void 0,void 0,function*(){if(_.backgroundReplacement.backgroundImageURL&&_.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!_.backgroundReplacement.backgroundImageURL&&!_.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{_.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(_.backgroundReplacement.backgroundImageURL))}catch(b){throw this.logger.error(b.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const E=_.backgroundReplacement.defaultColor;if(E&&E!=="black"&&E!=="#000000"&&E!=="#000"){if(E.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(E))throw new Error(`Invalid hexadecimal color code for default replacement background: ${E}`);const T=document.createElement("canvas").getContext("2d"),I=T.fillStyle;if(T.fillStyle=E,T.fillStyle===I)throw new Error(`Invalid color for default replacement background: ${E}`)}})}validateProcessingBudgetPerFrame(_){if(_<g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||_>g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const _=this.getVideoFxAssetParams();yield this.loadEngineWorker(_),yield this.buildEngine(_),yield this.loadFxLib(_),this.renderer=constructRenderer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(_){throw this.logger.error(_.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const _=e.getDefaultAssetSpec();return{assetGroup:_.assetGroup,revisionID:_.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(_,E){const b=new URL(_);for(const[T,I]of Object.entries(E))if(I!==void 0){const O=encodeURIComponent(T),w=encodeURIComponent(I);b.searchParams.set(O,w)}return b.toString()}loadEngineWorker(_){return u(this,void 0,void 0,function*(){try{const E=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.workerPath,_);this.engineWorker=yield m.loadWorker(E,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",b=>this.engineWorkerReceiver(b))}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(_){return u(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:this.videoFxSpec.paths.cdnBasePath,sdkVersioningParams:_}});try{yield this.buildEnginePromise.getPromise()}catch(E){throw this.logger.error(E.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(_){return u(this,void 0,void 0,function*(){const E=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.fxLibPath,_),b={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const T=yield p.fetchWithBehavior(E,b,{});if(!T.ok)throw new Error("Fetch failed.");const I=window.URL.createObjectURL(yield T.blob());yield new Promise((O,w)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",I),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",O),this.fxLibScript.addEventListener("error",w),document.body.appendChild(this.fxLibScript)})}catch(T){throw this.logger.error(T.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(_){const E=_.data;switch(E.msg){case g.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(E.payload);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(E.payload.output);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case g.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(E)}`);break}}settleEngineBuildPromise(_){_!==g.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(_){_?this.segmentationRequestPromise.resolveAndReplacePromise(_):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const _=new ImageData(new Uint8ClampedArray(this.sharedImageData),g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(_)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u(this,void 0,void 0,function*(){let b=!0;const T=r((w,D)=>{w&&(_.info(D),b=!1)},"checkEnv");T(typeof globalThis>"u","Browser does not have globalThis."),T(!a.supportsWorker(globalThis,_),"Browser does not support web workers."),T(!a.supportsWASM(globalThis,_),"Browser does not support wasm."),T(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const I=new s.default;T(!I.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const O=r(()=>u(this,void 0,void 0,function*(){if(E)try{const w=new Nd(_);yield w.loadAssets(),yield w.destroy()}catch{return _.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(b?yield O():!1)})}static create(_,E){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,T=arguments.length>3?arguments[3]:void 0;return u(this,void 0,void 0,function*(){const I=new Nd(_,b);T&&I.setVideoFxSpec(T);try{return yield I.loadAssets(),yield I.setEffectConfig(E),I}catch(O){throw _.error(O.toString()),I.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(_){this.eventController?this.eventController=_:(this.eventController=_,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const _={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",_)}sameVideoFxConfig(_,E){return _.backgroundBlur.isEnabled===E.backgroundBlur.isEnabled&&_.backgroundBlur.strength===E.backgroundBlur.strength&&_.backgroundReplacement.backgroundImageURL===E.backgroundReplacement.backgroundImageURL&&_.backgroundReplacement.defaultColor===E.backgroundReplacement.defaultColor&&_.backgroundReplacement.isEnabled===E.backgroundReplacement.isEnabled}constructor(_,E=g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,b){this.logger=_,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new n.default(this.outputCanvas),this.videoFxSpec=g.DEFAULT_VIDEO_FX_SPEC;try{this.validateProcessingBudgetPerFrame(E)}catch(T){throw this.logger.error(T),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${E}`)}b&&(this.eventController=b),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,E),this.streamParameters={framerate:g.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:g.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:g.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:g.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},Nd.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${Nd.isSharedArrayBufferSupported}`),this.canvasOpsManager=new f.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${E}`)}},"VideoFxProcessor");l.default=c,c.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},9635746919:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const u=d(9434786545);let h=r(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=u.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,a){this.logger=m,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=u.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},1041737276:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"VideoSource");l.default=d},6054180211:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class $h{add(h){this.ids.add(h)}array(){return Array.from(this.ids.values()).sort((p,m)=>p-m)}contain(h){return this.ids.has(h)}forEach(h){this.ids.forEach(h)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(h){if(!h)return this.ids.size===0;const p=this.array(),m=h.array();if(p.length!==m.length)return!1;for(let a=0;a<p.length;a++)if(p[a]!==m[a])return!1;return!0}clone(){return new $h(this.array())}remove(h){this.ids.delete(h)}toJSON(){return this.array()}truncate(h){const p=this.array();return new $h(p.splice(0,h))}constructor(h){this.ids=new Set(h)}},"DefaultVideoStreamIdSet");l.default=d},543972823:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7613896012),p=u(d(6054180211)),m=u(d(9786322758));let a=r(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const n of i.sources){if(!e.has(n.attendeeId)){e.set(n.attendeeId,n.groupId);continue}const o=e.get(n.attendeeId);o<n.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${n.attendeeId}, replacing with newer group ID ${n.groupId}`),e.set(n.attendeeId,n.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(n=>e.get(n.attendeeId)===n.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(n=>n.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new p.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const n of this.currentIndex.sources){const{attendeeId:o,externalUserId:f,mediaType:g}=n;o!==i&&g===h.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:f}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,n){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===i||v.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const f=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),g=new Map;let S=0;f.forEach((v,_)=>{g.set(_,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(f,e,S,n,g),this.trySelectHighBitrateForAttendees(f,o,S,n,g);const c=new p.default;for(const v of g.values())c.add(v.streamId);return c}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new p.default;if(this.currentIndex){const t=new Map;for(const n of this.currentIndex.sources)n.attendeeId===i||n.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(n.groupId)||n.maxBitrateKbps>t.get(n.groupId).maxBitrateKbps)&&t.set(n.groupId,n);for(const n of t.values())e.add(n.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,n]of this.subscribeTrackToStreamMap.entries())if(i===n){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,n]of this.subscribeSsrcToStreamMap.entries())if(i===n){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new p.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,n,o){for(const f of e){if(t>=n)break;if(i.has(f)){const g=i.get(f);for(const S of g.reverse())if(t-o.get(f).maxBitrateKbps+S.maxBitrateKbps<n){t=t-o.get(f).maxBitrateKbps+S.maxBitrateKbps,o.set(f,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,n)=>{t.sort((o,f)=>o.maxBitrateKbps>f.maxBitrateKbps?1:o.maxBitrateKbps<f.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},9066329271:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7613896012),p=u(d(543972823)),m=u(d(9786322758));let a=r(class Fd extends p.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let n=0;n<i.length;n++){const o=i[n].maxBitrate/1e3,f=i[n].maxFramerate;if(!e||n===this._localStreamInfos.length){e=!1;const g=new m.default;g.maxBitrateKbps=o,g.maxFrameRate=f,g.disabledByUplinkPolicy=o===0,g.rid=i[n].rid,o!==0&&(g.timeEnabled=Date.now()),this._localStreamInfos.push(g),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=f,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of i.bitrates)e.add(n.sourceStreamId),this.streamIdToBitrateKbpsMap.set(n.sourceStreamId,this.convertBpsToKbps(n.avgBitrateBps));for(const n of t)e.has(n)||(this.streamIdToBitrateKbpsMap.get(n)===Fd.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(n,Fd.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(n,Fd.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of this.currentIndex.sources)n.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(n.streamId),this.streamIdToBitrateKbpsMap.has(n.streamId)||this.streamIdToBitrateKbpsMap.set(n.streamId,Fd.UNSEEN_STREAM_BITRATE));for(const n of t)e.has(n)||this.streamIdToBitrateKbpsMap.delete(n)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Fd.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},9786322758:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=d(7613896012);let h=r(class FS{clone(){const m=new FS;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=u.SdkStreamDescriptor.create();return m.mediaType=u.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,a,s,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=a,this.streamId=s,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},7517865245:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{notifyObservers(h,p){for(const m of this.observerQueue)m.videoElementResolutionChanged(h,p)}registerObserver(h){this.observerQueue.add(h)}removeObserver(h){this.observerQueue.delete(h)}bindVideoElement(h){if(this.element=h,!this.element){this.resizeObserver.unobserve(this.element);return}this.resizeObserver.observe(this.element)}constructor(){this.observerQueue=new Set,this.resizeObserver=new ResizeObserver(h=>{for(const p of h){const{width:m,height:a}=p.contentRect;this.notifyObservers(m,a)}})}},"DefaultVideoElementResolutionMonitor");l.default=d},6158504357:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(9445576035)),p=u(d(1594701503)),m=u(d(6317694849));let a=r(class Xa{static connectVideoStreamToVideoElement(i,e,t){const n=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Xa.setVideoElementFlag(e,"disablePictureInPicture",t),Xa.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==n&&(e.style.transform=n),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(f=>{console.warn("Error playing video in Safari",f)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",Xa.setVideoElementFlag(i,"disablePictureInPicture",!1),Xa.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Xa.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,n,o,f,g,S){let c=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new p.default(i).hasModality(p.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),c=!0),this.tileState.boundExternalUserId!==g&&(this.tileState.boundExternalUserId=g,c=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,c=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,c=!0),this.tileState.videoStreamContentWidth!==n&&(this.tileState.videoStreamContentWidth=n,c=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,c=!0),this.tileState.streamId!==f&&(this.tileState.streamId=f,c=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,c=!0),c&&this.sendTileStateUpdate()}bindVideoElement(i){var e;let t=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,(e=this.resolutionMonitor)===null||e===void 0||e.bindVideoElement(this.tileState.boundVideoElement),t=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,t=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,t=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),t&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Xa.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Xa.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,n,o=void 0){this.tileController=t,this.devicePixelRatioMonitor=n,this.resolutionMonitor=o,this.tileState=new m.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},6317694849:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class xS{clone(){const h=new xS;return h.tileId=this.tileId,h.localTile=this.localTile,h.isContent=this.isContent,h.active=this.active,h.paused=this.paused,h.poorConnection=this.poorConnection,h.boundAttendeeId=this.boundAttendeeId,h.boundExternalUserId=this.boundExternalUserId,h.boundVideoStream=this.boundVideoStream,h.boundVideoElement=this.boundVideoElement,h.nameplate=this.nameplate,h.videoStreamContentWidth=this.videoStreamContentWidth,h.videoStreamContentHeight=this.videoStreamContentHeight,h.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,h.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,h.devicePixelRatio=this.devicePixelRatio,h.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,h.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,h.streamId=this.streamId,h.groupId=this.groupId,h}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=d},8233988265:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(n,o,f,g){function S(c){return c instanceof f?c:new f(function(v){v(c)})}return r(S,"adopt"),new(f||(f=Promise))(function(c,v){function _(T){try{b(g.next(T))}catch(I){v(I)}}r(_,"fulfilled");function E(T){try{b(g.throw(T))}catch(I){v(I)}}r(E,"rejected");function b(T){T.done?c(T.value):S(T.value).then(_,E)}r(b,"step"),b((g=g.apply(n,o||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(2425311569)),m=h(d(631034393)),a=h(d(7185484726)),s=d(9671487336),i=h(d(7517865245)),e=h(d(6158504357));let t=r(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return u(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const o=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,o.destroy()})}bindVideoElement(o,f){const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${o}`);return}g.bindVideoElement(f)}unbindVideoElement(o){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${o}`);return}this.logger.info("Unbinding the video element"),this.notifyRemoteObserversOfUnbound(g.state().boundAttendeeId);const S=g.stateRef().boundVideoElement;g.bindVideoElement(null),f&&(this.logger.info("Cleaning up the video element"),e.default.disconnectVideoStreamFromVideoElement(S,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===p.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const o=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),o.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(o){const f=this.getVideoTile(o);f&&(this.currentPausedTilesByIds.has(o)||(this.audioVideoController.pauseReceivingStream(f.stateRef().streamId),this.currentPausedTilesByIds.add(o)),f.pause())}unpauseVideoTile(o){const f=this.getVideoTile(o);f&&(this.currentPausedTilesByIds.has(o)&&(this.audioVideoController.resumeReceivingStream(f.stateRef().streamId),this.currentPausedTilesByIds.delete(o)),f.unpause())}getVideoTile(o){return this.tileMap.has(o)?this.tileMap.get(o):null}getVideoTileArea(o){const f=o.state();let g=0,S=0;return f.boundVideoElement&&(g=f.boundVideoElement.clientHeight*f.devicePixelRatio,S=f.boundVideoElement.clientWidth*f.devicePixelRatio),g*S}getAllRemoteVideoTiles(){const o=new Array;return this.tileMap.forEach((f,g)=>{(!this.currentLocalTile||g!==this.currentLocalTile.id())&&o.push(f)}),o}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const f=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const g=this.tileFactory.makeTile(f,o,this,this.devicePixelRatioMonitor,this.createResolutionMonitor(f));return this.tileMap.set(f,g),g}removeVideoTile(o){if(!this.tileMap.has(o))return;const f=this.tileMap.get(o);this.currentLocalTile===f&&(this.currentLocalTile=null),f.destroy(),this.tileMap.delete(o),this.audioVideoController.forEachObserver(g=>{s.Maybe.of(g.videoTileWasRemoved).map(S=>S.bind(g)(o))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(o){const f=[];for(const g of this.getAllVideoTiles()){const S=g.state();S.boundAttendeeId===o&&(this.removeVideoTile(S.tileId),f.push(S.tileId))}return f}removeAllVideoTiles(){const o=Array.from(this.tileMap.keys());for(const f of o)this.removeVideoTile(f)}sendTileStateUpdate(o){this.audioVideoController.forEachObserver(f=>{s.Maybe.of(f.videoTileDidUpdate).map(g=>g.bind(f)(o))})}haveVideoTilesWithStreams(){for(const o of this.getAllVideoTiles())if(o.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(o){return!!this.getVideoTileForAttendeeId(o)}getVideoTileForAttendeeId(o){for(const f of this.getAllVideoTiles())if(f.state().boundAttendeeId===o)return f}captureVideoTile(o){const f=this.getVideoTile(o);return f?f.capture():null}registerVideoTileResolutionObserver(o){this.resolutionObservers.add(o)}removeVideoTileResolutionObserver(o){this.resolutionObservers.delete(o)}notifyResolutionObserversOfChange(o,f,g){for(const S of this.resolutionObservers)S.videoTileResolutionDidChange(o,f,g)}notifyRemoteObserversOfUnbound(o){for(const f of this.resolutionObservers)f.videoTileUnbound(o)}createResolutionMonitor(o){const f=new class{videoElementResolutionChanged(S,c){const v=this.controller.getVideoTile(this.tileId);if(v){const _=v.state().boundAttendeeId;this.controller.notifyResolutionObserversOfChange(_,S,c)}}constructor(S,c){this.controller=S,this.tileId=c}}(this,o),g=new i.default;return g.registerObserver(f),g}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(o,f,g){this.tileFactory=o,this.audioVideoController=f,this.logger=g,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.resolutionObservers=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=f.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=t},8325297075:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6158504357));let p=r(class{makeTile(a,s,i,e,t){return new h.default(a,s,i,e,t)}},"DefaultVideoTileFactory");l.default=p},896836858:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"BitrateParameters");l.default=d},3752202768:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(568851064)),p=u(d(5814267651)),m=d(9671487336),a=u(d(8942355099)),s=u(d(896836858));let i=r(class ba{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new s.default,new s.default,new s.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const n=t.map((o,f,g)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(n),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const n=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=n!==this.numSenders,f=t.numberOfParticipants(),g=f>=0&&f<=2,S=this.shouldDisableSimulcast!==g;this.numSenders=n,this.shouldDisableSimulcast=g,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,n){return JSON.stringify(t)===JSON.stringify(n)}encodingParametersEqual(){let t=!1;for(const n of p.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(n),this.currentQualityMap.get(n)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?ba.kHiTargetBitrateKbpsFhd:ba.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?ba.kMidTargetBitrateKbpsFhd:ba.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?ba.kLowTargetBitrateKbpsFhd:ba.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const n=new Map,o=1e3,f=p.default.NAME_ARR_ASCENDING,g=t;let S=this.shouldDisableSimulcast?1:4;for(let c=0;c<f.length;c++){const v=f[c];n.set(v,{rid:v,active:g[c]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:g[c]*o}),S=S/2}return n}getQualityMapString(t){let n="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(f=>{n+=`{ rid: ${f.rid} active:${f.active} maxBitrate:${f.maxBitrate}}`}),n}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(n=>{m.Maybe.of(n.encodingSimulcastLayersDidChange).map(o=>o.bind(n)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)t(n)}constructor(t,n){this.selfAttendeeId=t,this.logger=n,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=ba.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=ba.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=ba.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=i,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},5801810927:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(523374695));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,s,i,e,t,n,o,f,g,S,c,v;const _=new Map,E=1e3,b=h.default.NAME_ARR_ASCENDING;return _.set(b[0],{rid:b[0],active:!0,scaleResolutionDownBy:((s=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||s===void 0?void 0:s.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*E,maxFramerate:((n=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||n===void 0?void 0:n.maxFramerate)||5}),_.set(b[1],{rid:b[1],active:!0,scaleResolutionDownBy:((f=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||f===void 0?void 0:f.scaleResolutionDownBy)||1,maxBitrate:(((S=(g=this.encodingParams)===null||g===void 0?void 0:g.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*E,maxFramerate:(v=(c=this.encodingParams)===null||c===void 0?void 0:c.high)===null||v===void 0?void 0:v.maxFramerate}),_}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,s){this.encodingParams=s,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=p},2952249532:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8942355099));let m=r(class xd{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new p.default(0,0,0,0,!1),this.parametersInEffect=new p.default(0,0,0,0,!1),this.encodingParamMap.set(xd.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=s.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),n=s.numberOfParticipants();if(this.numParticipants===n&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=n,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let s=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(s=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new p.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,s,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let s=640;return this.getNumberOfPublishedVideoSources()>4&&(s=320),s}captureHeight(){let s=384;return this.getNumberOfPublishedVideoSources()>4&&(s=192),s}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let s=0;return this.getNumberOfPublishedVideoSources()<=2?s=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?s=this.idealMaxBandwidthKbps*2/3:s=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(s)}setIdealMaxBandwidthKbps(s){this.idealMaxBandwidthKbps=s}setHasBandwidthPriority(s){this.hasBandwidthPriority=s}setTransceiverController(s){this.transceiverController=s}setSVCEnabled(s){var i;this.enableSVC=s,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${s}}`)}setHighResolutionFeatureEnabled(s){this.enableHighResolutionFeature=s}updateTransceiverController(){return u(this,void 0,void 0,function*(){const s=this.getStreamCaptureSetting();if(!s)return;const i=this.calculateEncodingParameters(s);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(xd.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(s){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return s.maxBitrate!==(t==null?void 0:t.maxBitrate)||s.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(s==null?void 0:s.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(s){var i,e,t;const n=this.maxBandwidthKbps()*1e3;let o=1,f=720;if(s.height!==void 0&&s.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(f=xd.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),xd.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],f===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(f=360),o=Math.max(Math.min(s.height,s.width)/f,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${s.width}x${s.height}. New dimension is ${s.width/o}x${s.height/o}`)),this.enableSVC){let g;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?g="L1T1":g="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${n}  targetHeight: ${f}  scalabilityMode: ${g}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:n,scalabilityMode:g}}else return{scaleResolutionDownBy:o,maxBitrate:n}}getStreamCaptureSetting(){var s,i,e,t;return(t=(e=(i=(s=this.transceiverController)===null||s===void 0?void 0:s.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var s;return(s=this.numberOfPublishedVideoSources)!==null&&s!==void 0?s:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(s,i){const e=s??i,t=e.length>0&&xd.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(s,i=!0,e=void 0,t=void 0){this.selfAttendeeId=s,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},7237277783:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(8942355099));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=p},9354566891:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function d(h){return h.map(p=>typeof p=="object"?JSON.stringify(p):`${p}`).join(" ")}r(d,"stringify");let u=r(class{debug(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.debug(d(m))}info(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.info(d(m))}warn(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.warn(d(m))}error(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.error(d(m))}constructor(p){this.base=p}},"LoggerAdapter");l.default=u},4574840479:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(n,o,f,g){function S(c){return c instanceof f?c:new f(function(v){v(c)})}return r(S,"adopt"),new(f||(f=Promise))(function(c,v){function _(T){try{b(g.next(T))}catch(I){v(I)}}r(_,"fulfilled");function E(T){try{b(g.throw(T))}catch(I){v(I)}}r(E,"rejected");function b(T){T.done?c(T.value):S(T.value).then(_,E)}r(b,"step"),b((g=g.apply(n,o||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const p=d(9244626466),m=d(1366921492),a=h(d(6332689210)),s=h(d(9354566891)),i=h(d(9343011556)),e=h(d(309722211));let t=r(class Da{static isSupported(o,f){var g,S;const c=Da.defaultFetchBehavior(),v=f!=null&&f.logger?new s.default(f.logger):void 0,_={fetchBehavior:c,logger:v};if(m.isIFramed()){if((f==null?void 0:f.allowIFrame)===!1)return(g=f==null?void 0:f.logger)===null||g===void 0||g.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=f==null?void 0:f.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return p.VoiceFocus.isSupported(Da.augmentSpec(o),_)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;var v,_,E;return u(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const b=((E=(_=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||_===void 0?void 0:_.Audio)===null||E===void 0?void 0:E.EchoReduction)==="AVAILABLE",T=g&&g.supported===!0&&g.model.name==="ns_es"&&!b,I=o.name==="ns_es"&&!b;if(T||I)throw new Error("Echo Reduction requested but not enabled.");const O=new Da(o,f,g);return yield O.init(),O})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return u(this,void 0,void 0,function*(){return new Da(o,f,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,f){return u(this,void 0,void 0,function*(){if(this.supported)try{const[S,c]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},f),{es:this.spec.name==="ns_es"});return new i.default(o,S,c,v)}catch{return}})}static destroyVoiceFocus(o){var f;return u(this,void 0,void 0,function*(){(f=o==null?void 0:o.vf)===null||f===void 0||f.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Da.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const f={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return p.VoiceFocus.configure(this.spec,f)})}init(){var o;return u(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const f=yield this.configuration;if(!f.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(f,this.preload);try{yield this.pendingVoiceFocus}catch(g){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${g}`),this.supported=!1}})}createVoiceFocus(o,f){return u(this,void 0,void 0,function*(){const g=new e.default;return this.vf=yield p.VoiceFocus.init(o,{delegate:g,preload:f,logger:this.vfLogger}),[this.vf,g]})}allocateVoiceFocus(o){return u(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const f=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,f}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Da.majorMinorVersion()||"unknown",f=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(f)}`}}constructor(o,{preload:f=!0,logger:g,fetchBehavior:S=Da.defaultFetchBehavior()},c){this.spec=o,this.supported=!0,this.logger=g,this.vfLogger=g?new s.default(g):void 0,this.preload=f,this.fetchBehavior=S,this.spec=Da.augmentSpec(this.spec),c&&(this.configuration=Promise.resolve(c))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},9343011556:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9445576035));let m=r(class BS{getInnerDevice(){return this.device}mute(i){return u(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return u(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return u(this,void 0,void 0,function*(){return this.device===i&&!a(i)?this:new BS(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return u(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return u(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const f=this.node,g=this.node;return{start:f,end:g}}catch(f){throw this.failed=!0,this.delegate.onFallback(this,f),f}})}observeMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return u(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return u(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return u(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return u(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,n,o=!1,f=void 0,g=new p.default,S=new Map,c=void 0,v=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=n,this.failed=o,this.node=f,this.browserBehavior=g,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=c,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function a(s){return s==="default"?!0:!s||typeof s!="object"?!1:"deviceId"in s&&s.deviceId==="default"||"id"in s&&s.id==="default"}r(a,"isDefaultDevice"),l.default=m},309722211:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}onFallback(h,p){var m;for(const a of this.observers)(m=a.voiceFocusFellBackToInnerStream)===null||m===void 0||m.call(a,h,p)}onCPUWarning(){var h;for(const p of this.observers)(h=p.voiceFocusInsufficientResources)===null||h===void 0||h.call(p)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=d},247134931:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class Ou{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(h){let p=0;for(const m of h.streams){const a=!!m.attendeeId,s=!!m.externalUserId,i=m.hasOwnProperty("muted"),e=!!m.dropped;if(a){this.attendeeIdToStreamId[m.attendeeId]&&this.attendeeIdToStreamId[m.attendeeId]<m.audioStreamId&&delete this.attendeeIdToStreamId[m.attendeeId],this.streamIdToAttendeeId[m.audioStreamId]=m.attendeeId;const t=s?m.externalUserId:m.attendeeId;this.streamIdToExternalUserId[m.audioStreamId]=t,this.attendeeIdToStreamId[m.attendeeId]=m.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(m.attendeeId,!0,t,!1,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}if(i){const t=this.streamIdToAttendeeId[m.audioStreamId],n=this.streamIdToExternalUserId[m.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,m.muted,null,n)}if(!a&&!i){const t=this.streamIdToAttendeeId[m.audioStreamId];if(t){const n=this.streamIdToExternalUserId[m.audioStreamId];delete this.streamIdToAttendeeId[m.audioStreamId],delete this.streamIdToExternalUserId[m.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[m.audioStreamId],this.attendeeIdToStreamId[t]===m.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(f);if(g>m.audioStreamId&&this.streamIdToAttendeeId[g]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,n,e,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(h),this.sessionReconnected=!1)}cleanUpState(h){const p=Object.values(this.streamIdToAttendeeId),m=h.streams.map(s=>s.attendeeId),a=p.filter(s=>!m.includes(s));for(const[s,i]of a.entries()){const e=this.attendeeIdToStreamId[i],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[i],i===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(i,!1,t,!1,{attendeeIndex:s,attendeesInFrame:i.length})}}sendRealtimeUpdatesForAudioMetadata(h){let p=null,m=null;for(const a of h.attendeeStates){const s=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(p===null&&(p={}),s!==null&&(p[s]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(m===null&&(m={}),s!==null&&(m[s]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(p,m)}normalizedVolume(h){const m=1-(-h.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(m,0),1)}normalizedSignalStrength(h){const p=h.signalStrength/Ou.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(p,0),1)}applyRealtimeUpdatesForAudioMetadata(h,p){for(const m in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[m],s=this.streamIdToExternalUserId[m];let i=null,e=null;h!==null&&(h.hasOwnProperty(a)?i=h[a]:i=Ou.IMPLICIT_VOLUME),p!==null&&(p.hasOwnProperty(a)?e=p[a]:e=Ou.IMPLICIT_SIGNAL_STRENGTH),(i!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,i,null,e,s)}}attendeeIdForStreamId(h){if(h===0)return null;const p=this.streamIdToAttendeeId[h];return p||(this.warnedAboutMissingStreamIdMapping[h]||(this.warnedAboutMissingStreamIdMapping[h]=!0,this.logger.warn(`volume indicator stream id ${h} seen before being defined`)),null)}constructor(h,p,m,a,s){this.logger=h,this.realtimeController=p,this.minVolumeDecibels=m,this.maxVolumeDecibels=a,this.selfAttendeeId=s,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=d,d.MAX_SIGNAL_STRENGTH_LEVELS=2,d.IMPLICIT_VOLUME=0,d.IMPLICIT_SIGNAL_STRENGTH=1},6757985251:function(B,l,d){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=u(d(6332689210)),p=u(d(6924951343));let m=r(class{create(s,i,e){this.connection=new WebSocket(e?s:h.default.urlWithVersion(s),i),this.connection.binaryType="arraybuffer"}send(s){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return s instanceof Uint8Array?this.connection.send(s.buffer):this.connection.send(s),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${p.default[this.readyState()]}`),!1}}close(s,i){var e;(e=this.connection)===null||e===void 0||e.close(s,i)}destroy(){this.connection=void 0}addEventListener(s,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(s,i)}removeEventListener(s,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(s,i)}readyState(){if(!this.connection)return p.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return p.default.Connecting;case WebSocket.OPEN:return p.default.Open;case WebSocket.CLOSING:return p.default.Closing;case WebSocket.CLOSED:return p.default.Closed}}constructor(s){this.logger=s}},"DefaultWebSocketAdapter");l.default=m},6924951343:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var d;(function(u){u[u.None=0]="None",u[u.Connecting=1]="Connecting",u[u.Open=2]="Open",u[u.Closing=3]="Closing",u[u.Closed=4]="Closed"})(d=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=d},9748085002:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(b,T,I,O){function w(D){return D instanceof I?D:new I(function(R){R(D)})}return r(w,"adopt"),new(I||(I=Promise))(function(D,R){function L(ee){try{K(O.next(ee))}catch(q){R(q)}}r(L,"fulfilled");function H(ee){try{K(O.throw(ee))}catch(q){R(q)}}r(H,"rejected");function K(ee){ee.done?D(ee.value):w(ee.value).then(L,H)}r(K,"step"),K((O=O.apply(b,T||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=d(8567210951),p=d(4085910259),m=3,a=2.5,s=2.63,i=.6,e=.65,t=.5,n=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let f=r(class{roundtrip(T,I,O){return new Promise((w,D)=>{this.worker.then(R=>{let L;L=r(H=>{const{message:K,key:ee}=H.data;K===I&&ee===O&&(R.removeEventListener("message",L),w(H.data))},"listener"),R.addEventListener("message",L),R.postMessage(T)}).catch(R=>{var L;(L=this.logger)===null||L===void 0||L.error("Failed to load worker.",R),D(R)})})}supportsSIMD(T){const I="simd",O=T||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,w={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:O,key:I};return this.roundtrip(w,"simd-support",I).then(D=>D.supports)}measure(T,I){const O=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,w=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,D=T?w:O,R=`bench:${T}`,L={message:"measure",fetchBehavior:this.fetchBehavior,budget:I,path:D,key:R};return this.roundtrip(L,"measurement",R).then(H=>{if(H.measurement)return H.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(T=>{var I;(I=this.logger)===null||I===void 0||I.debug("Stopping estimator worker."),T.terminate()}).catch(T=>{})}constructor(T,I){this.fetchConfig=T,this.logger=I;const O=`${T.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:T.headers,escapedQueryString:T.escapedQueryString},this.worker=h.loadWorker(O,"VoiceFocusEstimator",this.fetchBehavior,I)}},"Estimator");const g=r((b,T)=>b===1?i:T==="quality"?e*b:t*b,"inlineScoreMultiplier"),S=r(function(b){let{supportsSIMD:T,supportsSAB:I,duration:O,executionPreference:w="auto",simdPreference:D,variantPreference:R="auto",namePreference:L="default",usagePreference:H,executionQuantaPreference:K=m}=b,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,q=arguments.length>2?arguments[2]:void 0;const ce=D==="force"||D!=="disable"&&T,Te=O!==-1,ke=Te?(ce?a:s)/O:0,tt=ce?ee.simd:ee.wasm,At=Te?g(K,H)*ke:0,Be=Te?n*ke:0,$e=L,Ze=r(Nt=>({supported:!1,reason:Nt}),"unsupported");if(Te){if(ke<tt.noSupport)return Ze(`Performance score ${ke} worse than threshold ${tt.noSupport}.`)}else if(w==="auto"||R==="auto")return Ze(`Missing explicit execution (${w}) or variant (${R}) preference, but no scoring performed.`);q==null||q.debug(`Bench duration ${O} yields inline score ${At} and worker score ${Be}.`);const Je=r((Nt,Ve,He)=>({supported:!0,useSIMD:ce,processor:Nt,executionApproach:Ve,variant:He,executionQuanta:Ve==="inline"?K:void 0,name:$e}),"succeed"),dt=r((Nt,Ve,He)=>Ve!=="auto"?!Te||Nt>He[Ve]?Ve:"failed":Nt>He.c100?"c100":Nt>He.c50?"c50":Nt>He.c20?"c20":Nt>He.c10?"c10":"failed","resolveVariant"),Ot=r(Nt=>{switch(Nt||"auto"){case"auto":{let Ve=Ot("inline"),He=Ot("worker");return q==null||q.debug(`Reducing auto preference: ${JSON.stringify(Ve)} vs ${JSON.stringify(He)}`),Ve.supported===!1||He.supported===!1?He:Ve.variant===He.variant||Ve.variant==="c50"?Ve:He}case"worker":return p.supportsSharedArrayBuffer(globalThis,window,q)?Ot("worker-sab"):Ot("worker-postMessage");case"inline":{const Ve=dt(At,R,tt.inline);return Ve==="failed"?Ze(`Performance score ${At} not sufficient for inline use with variant preference ${R}.`):Je("voicefocus-inline-processor","inline",Ve)}case"worker-sab":{if(!I){const He="Requested worker-sab but no SharedArrayBuffer support.";return q==null||q.warn(He),{supported:!1,reason:He}}const Ve=dt(Be,R,tt.worker);return Ve==="failed"?Ze(`Performance score ${Be} not sufficient for worker use with variant preference ${R}.`):Je("voicefocus-worker-sab-processor","worker-sab",Ve)}case"worker-postMessage":{const Ve=dt(Be,R,tt.worker);if(Ve==="failed")return Ze(`Performance score ${Be} not sufficient for worker use.`);if($e==="ns_es"){const He="Requested echo suppression but postMessage executor does not support it.";return q==null||q.warn(He),{supported:!1,reason:He}}return Je("voicefocus-worker-postMessage-processor","worker-postMessage",Ve)}}},"reducePreference");return Ot(w)},"decideExecutionApproach"),c=r((b,T,I,O)=>u(void 0,void 0,void 0,function*(){const w={supportsSIMD:b,supportsSAB:p.supportsSharedArrayBuffer(globalThis,window,I),duration:-1};if(b)return I==null||I.info("Supports SIMD: true (force)"),w;const D=!O,R=O||new f(T,I);try{const L=!p.isOldChrome(window,I)&&(yield R.supportsSIMD());return I==null||I.info(`Supports SIMD: ${L} (force: ${b})`),w.supportsSIMD=L,w}finally{D&&R.stop()}}),"featureCheck"),v=r((b,T,I,O)=>u(void 0,void 0,void 0,function*(){const w=new f(T,O);try{const D=yield c(b,T,O,w);if(D.supportsSIMD)try{return D.duration=yield w.measure(!0,I),O==null||O.info("SIMD timing:",D.duration),D}catch{O==null||O.warn("Failed SIMD estimation; falling back to non-SIMD."),D.supportsSIMD=!1}return D.duration=yield w.measure(!1,I),O==null||O.info("No-SIMD timing:",D.duration),D}catch(D){throw O==null||O.error("Could not feature check.",D),D}finally{w.stop()}}),"estimateAndFeatureCheck"),_=r(function(b,T,I){let O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return u(void 0,void 0,void 0,function*(){let w=b.executionPreference;const{usagePreference:D,variantPreference:R,namePreference:L,simdPreference:H,estimatorBudget:K,executionQuantaPreference:ee}=b;D==="interactivity"&&w!=="inline"&&(I==null||I.debug(`Overriding execution preference ${w} to reflect interactivity preference.`),w="inline");const q=H==="force",ae=R!=="auto",ce=w!=="auto";let Te;try{ae&&ce?Te=yield c(q,T,I):Te=yield v(q,T,K,I)}catch(ke){throw I==null||I.error("Could not load estimator.",ke),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},Te),{simdPreference:H,executionPreference:w,variantPreference:R,namePreference:L,usagePreference:D,executionQuantaPreference:ee}),O,I)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=_;const E=r(b=>{let{category:T,name:I,variant:O,simd:w,url:D}=b;return`${T}-${I}-${O}-v1${w?"_simd":""}`},"decideModel");l.decideModel=E},2108947428:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function d(e,t,n){if(!n)return fetch(e,t);const o=h(e,n),f=u(t,n);return fetch(o,f)}r(d,"fetchWithBehavior"),l.fetchWithBehavior=d;function u(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}r(u,"withRequestHeaders"),l.withRequestHeaders=u;function h(e,t){if(!(t!=null&&t.escapedQueryString))return e;const n=e.lastIndexOf("?")!==-1;return`${e}${n?"&":"?"}${t.escapedQueryString}`}r(h,"withQueryString"),l.withQueryString=h;function p(e,t){const n=Object.keys(t);if(!n.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const f of n)o.append(f,t[f]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}r(p,"addQueryParams"),l.addQueryParams=p;const m={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return d(e,m,t).then(n=>n.redirected?n.url:e)}r(a,"resolveURL"),l.resolveURL=a;function s(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}r(s,"isValidAssetGroup"),l.isValidAssetGroup=s;function i(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}r(i,"isValidRevisionID"),l.isValidRevisionID=i},8567210951:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const u=d(2108947428),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},p=r((m,a,s,i)=>{i==null||i.debug(`Loading ${a} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=u.withQueryString(m,s);return Promise.resolve(new Worker(t,{name:a}))}return u.fetchWithBehavior(m,h,s).then(t=>{if(t.ok)return t.blob().then(n=>new Worker(window.URL.createObjectURL(n)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=p},4085910259:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(c,v,_,E){function b(T){return T instanceof _?T:new _(function(I){I(T)})}return r(b,"adopt"),new(_||(_=Promise))(function(T,I){function O(R){try{D(E.next(R))}catch(L){I(L)}}r(O,"fulfilled");function w(R){try{D(E.throw(R))}catch(L){I(L)}}r(w,"rejected");function D(R){R.done?T(R.value):b(R.value).then(O,w)}r(D,"step"),D((E=E.apply(c,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=d(8567210951),p=r(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=r(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,_=v.match(/Safari\//),E=v.match(/Chrom(?:e|ium)\//);return!!(_&&!E)},"isSafari");l.isSafari=m;const a=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(c)?!1:p(c)?(g(c)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const s=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,_=arguments.length>2?arguments[2]:void 0;return u(void 0,void 0,void 0,function*(){if(!l.supportsWorker(c,_))return!1;const E=`${v.paths.workers}worker-v1.js`;try{const b=yield h.loadWorker(E,"VoiceFocusTestWorker",v,_);try{b.terminate()}catch(T){_==null||_.debug("Failed to terminate worker.",T)}return!0}catch(b){return _==null||_.info("Failed to fetch and instantiate test worker",b),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=s;const i=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!c.Worker}catch(_){return v==null||v.info("Does not support Worker",_),!1}},"supportsWorker");l.supportsWorker=i;const e=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!c.AudioWorklet&&!!c.AudioWorkletNode}catch(_){return v==null||v.info("Does not support Audio Worklet",_),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!c.WebAssembly&&(!!c.WebAssembly.compile||!!c.WebAssembly.compileStreaming)}catch(_){return v==null||v.info("Does not support WASM",_),!1}},"supportsWASM");l.supportsWASM=t;const n=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,_=arguments.length>2?arguments[2]:void 0;try{return!!c.SharedArrayBuffer&&(!!v.chrome||!!c.crossOriginIsolated)}catch{return _==null||_.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=n;const o=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var _;try{return!!(!((_=c.WebAssembly)===null||_===void 0)&&_.compileStreaming)}catch(E){return v==null||v.info("Does not support WASM streaming compilation",E),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const f=90,g=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!c.chrome)return}catch{}const v=c.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=r(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const _=g(c);return _&&_<f?(v==null||v.debug(`Chrome ${_} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},828016749:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let d=r(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||r(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=d},9244626466:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(R,L,H,K){function ee(q){return q instanceof H?q:new H(function(ae){ae(q)})}return r(ee,"adopt"),new(H||(H=Promise))(function(q,ae){function ce(tt){try{ke(K.next(tt))}catch(At){ae(At)}}r(ce,"fulfilled");function Te(tt){try{ke(K.throw(tt))}catch(At){ae(At)}}r(Te,"rejected");function ke(tt){tt.done?q(tt.value):ee(tt.value).then(ce,Te)}r(ke,"step"),ke((K=K.apply(R,L||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=d(9748085002),p=d(2108947428),m=d(8567210951),a=d(4085910259),s=d(6374547211),i=d(5129031187),e=d(6887496158),n={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",f="https://static.sdkassets.chime.aws",g={processors:`${f}/processors/`,workers:`${f}/workers/`,wasm:`${f}/wasm/`,models:`${f}/wasm/`},S={latencyHint:0},c={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},c),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),_=Object.assign(Object.assign({},c),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),E={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:s.default}},b=r((R,L)=>{if(R!==void 0&&!p.isValidAssetGroup(R))throw new Error(`Invalid asset group ${R}`);if(L!==void 0&&!p.isValidRevisionID(L))throw new Error(`Invalid revision ID ${L}`)},"validateAssetSpec"),T=r((R,L)=>{let H;if(L.useBuiltInAGC?H=v:H=_,!R)return{audio:H};if(!R.audio)return R;if(R.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},R),{audio:R.audio===!0?H:Object.assign(Object.assign({},R.audio),H)})},"mungeConstraints"),I=r((R,L)=>`${L.models}${h.decideModel(R)}.wasm`,"urlForModel");let O=r(class US{static isSupported(L,H){const{fetchBehavior:K,logger:ee}=H||{};if(typeof globalThis>"u")return ee==null||ee.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,ee))return ee==null||ee.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,ee))return ee==null||ee.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,ee)||ee==null||ee.debug("Browser does not support streaming WASM compilation.");const{assetGroup:q=o,revisionID:ae,paths:ce=g}=L||{};b(q,ae);const Te=ae?{revisionID:ae}:{assetGroup:q},ke=p.addQueryParams(K,Te),tt=Object.assign(Object.assign({},ke),{paths:ce});return a.supportsVoiceFocusWorker(globalThis,tt,ee)}static mungeExecutionPreference(L,H){const K=L===void 0||L==="auto";if(a.isSafari(globalThis)){if(K||L==="inline")return"inline";if(!K)throw new Error(`Unsupported execution preference ${L}`)}if(L==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,H))throw new Error(`Unsupported execution preference ${L}`);return L||"auto"}static configure(L,H){return u(this,void 0,void 0,function*(){const{fetchBehavior:K,preResolve:ee,logger:q}=H||{},{category:ae="voicefocus",name:ce="default",variant:Te="auto",assetGroup:ke=o,revisionID:tt,simd:At="detect",executionPreference:Be="auto",executionQuantaPreference:$e,usagePreference:Ze="interactivity",estimatorBudget:Je=100,paths:dt=g,thresholds:Ot}=L||{};if(q==null||q.debug("Configuring Voice Focus with spec",L),ae!==void 0&&ae!=="voicefocus")throw new Error(`Unrecognized category ${ae}`);if(ce!==void 0&&ce!=="default"&&ce!=="ns_es")throw new Error(`Unrecognized feature name ${ce}`);if(Te!==void 0&&!["auto","c100","c50","c20","c10"].includes(Te))throw new Error(`Unrecognized feature variant ${Te}`);if($e!==void 0&&![1,2,3].includes($e))throw new Error(`Unrecognized execution quanta preference ${$e}`);if(b(ke,tt),At!==void 0&&!["detect","force","disable"].includes(At))throw new Error(`Unrecognized SIMD option ${At}`);if(Be!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Be))throw new Error(`Unrecognized execution preference ${Be}`);if(Ze!==void 0&&!["quality","interactivity"].includes(Ze))throw new Error(`Unrecognized usage preference ${Ze}`);const Nt={executionPreference:this.mungeExecutionPreference(Be,q),usagePreference:Ze,executionQuantaPreference:$e,variantPreference:Te,namePreference:ce,simdPreference:At,estimatorBudget:Je},Ve=tt?{revisionID:tt}:{assetGroup:ke},He=p.addQueryParams(K,Ve),ct=Object.assign({paths:dt},He),yt=yield h.measureAndDecideExecutionApproach(Nt,ct,q,Ot);if(yt.supported===!1)return{supported:!1,reason:yt.reason};q==null||q.info("Decided execution approach",yt);const{useSIMD:it,processor:nn,variant:Xt,executionQuanta:dn}=yt,bn={category:ae||"voicefocus",name:ce||"default",variant:Xt,simd:it};if(ee){const Rn=I(bn,dt);bn.url=yield p.resolveURL(Rn,He)}return{fetchConfig:ct,model:bn,processor:nn,executionQuanta:dn,supported:!0}})}static init(L,H){let{delegate:K,preload:ee=!0,logger:q}=H;return u(this,void 0,void 0,function*(){if(L.supported===!1)throw new Error("Voice Focus not supported. Reason: "+L.reason);const{model:ae,processor:ce,fetchConfig:Te,executionQuanta:ke}=L,{simd:tt,name:At}=ae,{paths:Be}=Te;if(ce!=="voicefocus-inline-processor"&&ce!=="voicefocus-worker-postMessage-processor"&&ce!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ce}`);const $e=ae.url||I(ae,Be);q==null||q.debug(`Using model URL ${$e}.`);const Ze=`${Be.wasm}audio_buffer-v1${tt?"_simd":""}.wasm`,Je=`${Be.wasm}resampler-v1${tt?"_simd":""}.wasm`,dt=`${Be.workers}worker-v1.js`,{file:Ot,node:Nt}=E[ce],Ve=`${Be.processors}${Ot}`,He=yield m.loadWorker(dt,"VoiceFocusWorker",Te,q);if(ee){q==null||q.debug("Preloading",$e);let nn=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";He.postMessage({message:nn,preload:!0,key:"model",fetchBehavior:Te,path:$e})}const yt={processor:ce,worker:He,audioBufferURL:Ze,resamplerURL:Je,fetchBehavior:Te,modelURL:$e,delegate:K,logger:q,numberOfInputs:At==="ns_es"?2:1},it=new US(He,Ve,Nt,yt,ke);return Promise.resolve(it)})}createNode(L,H){var K;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:ee=L.sampleRate===16e3?16e3:48e3,enabled:q=!0,agc:ae=n}=H||{},ce=H==null?void 0:H.es,Te={voiceFocusSampleRate:ee,enabled:q,sendBufferCount:10,prefill:6,agc:ae,executionQuanta:this.executionQuanta,supportFarendStream:ce},ke=p.withQueryString(this.processorURL,(K=this.nodeOptions)===null||K===void 0?void 0:K.fetchBehavior);return L.audioWorklet.addModule(ke).then(()=>new this.nodeConstructor(L,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:Te})))}applyToStream(L,H,K){return u(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const ee=H.createMediaStreamSource(L),q=yield this.applyToSourceNode(ee,H,K),ae=H.createMediaStreamDestination();return q.connect(ae),{node:q,source:ee,destination:ae,stream:ae.stream}})}applyToSourceNode(L,H,K){return u(this,void 0,void 0,function*(){const ee=yield this.createNode(H,K);return L.connect(ee),ee})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(L,H,K,ee,q){this.processorURL=H,this.nodeConstructor=K,this.nodeOptions=ee,this.executionQuanta=q,this.internal={worker:L,nodeOptions:ee,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=O;const w=r(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(R)},"createAudioContext");l.createAudioContext=w;const D=r((R,L,H)=>u(void 0,void 0,void 0,function*(){var K,ee;const{constraints:q,spec:ae,delegate:ce,preload:Te=!0,options:ke}=L,{logger:tt}=H,At=yield O.configure(ae,H);if(!At.supported)return(K=H.logger)===null||K===void 0||K.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(q);const Be=yield O.init(At,{delegate:ce,preload:Te,logger:tt}),$e=((ee=L.options)===null||ee===void 0?void 0:ee.agc)||n,Ze=yield window.navigator.mediaDevices.getUserMedia(T(q,$e));return Be.applyToStream(Ze,R,ke).then(Je=>Je.stream)}),"getAudioInput");l.getAudioInput=D},6374547211:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(s,i,e,t){function n(o){return o instanceof e?o:new e(function(f){f(o)})}return r(n,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{c(t.next(v))}catch(_){f(_)}}r(g,"fulfilled");function S(v){try{c(t.throw(v))}catch(_){f(_)}}r(S,"rejected");function c(v){v.done?o(v.value):n(v.value).then(g,S)}r(c,"step"),c((t=t.apply(s,i||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4085910259),p=d(828016749),m=5*1e3;let a=r(class extends p.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return u(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,n;const o=i.data;switch(o.message){case"cpu":this.cpuWarningCount++;const f=Date.now(),g=this.cpuWarningLastTriggered||f,S=Math.abs(f-g);(!this.cpuWarningLastTriggered||S>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=f),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(n=this.logger)===null||n===void 0||n.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:n,fetchBehavior:o,logger:f,delegate:g}=e;this.logger=f,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=g,f&&f.debug("VoiceFocusInlineNode:",t),this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},6887496158:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(o){o(n)})}return r(t,"adopt"),new(i||(i=Promise))(function(n,o){function f(c){try{S(e.next(c))}catch(v){o(v)}}r(f,"fulfilled");function g(c){try{S(e.throw(c))}catch(v){o(v)}}r(g,"rejected");function S(c){c.done?n(c.value):t(c.value).then(f,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4085910259),p=d(828016749);let m=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(s){var i;const e=s.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(s){var i;const e=s.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(s,i){super(s,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:n,fetchBehavior:o,delegate:f}=i;this.delegate=f,this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:g,agc:S,supportFarendStream:c}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:s.sampleRate===16e3?160:480,enabled:g,agc:S,fetchBehavior:o,model:e,supportFarendStream:c});const v=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=m},5129031187:function(B,l,d){"use strict";var u=this&&this.__awaiter||function(i,e,t,n){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return r(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(_){try{v(n.next(_))}catch(E){g(E)}}r(S,"fulfilled");function c(_){try{v(n.throw(_))}catch(E){g(E)}}r(c,"rejected");function v(_){_.done?f(_.value):o(_.value).then(S,c)}r(v,"step"),v((n=n.apply(i,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4085910259),p=d(828016749),m={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let s=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,a.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":if(!n.shared)throw new Error("No shared state.");this.state=new Int32Array(n.shared.state),this.port.postMessage(n);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,resamplerURL:o,worker:f,fetchBehavior:g,delegate:S}=t;this.delegate=S,this.worker=f,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:c,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:c,model:n,supportFarendStream:v});const _=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:_,key:"resampler",fetchBehavior:g,path:o})}},"VoiceFocusWorkerBufferNode");l.default=s},7618469943:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=d(6277460803),h=function(){function p(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r(p,"RawSha2561"),p.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=m.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=m[a++],s--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},p.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var i=this.bufferLength;i<u.BLOCK_SIZE;i++)a.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<u.BLOCK_SIZE-8;i++)a.setUint8(i,0);a.setUint32(u.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),a.setUint32(u.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},p.prototype.hashBuffer=function(){for(var m=this,a=m.buffer,s=m.state,i=s[0],e=s[1],t=s[2],n=s[3],o=s[4],f=s[5],g=s[6],S=s[7],c=0;c<u.BLOCK_SIZE;c++){if(c<16)this.temp[c]=(a[c*4]&255)<<24|(a[c*4+1]&255)<<16|(a[c*4+2]&255)<<8|a[c*4+3]&255;else{var v=this.temp[c-2],_=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[c-15];var E=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[c]=(_+this.temp[c-7]|0)+(E+this.temp[c-16]|0)}var b=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&f^~o&g)|0)+(S+(u.KEY[c]+this.temp[c]|0)|0)|0,T=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;S=g,g=f,f=o,o=n+b|0,n=t,t=e,e=i,i=b+T|0}s[0]+=i,s[1]+=e,s[2]+=t,s[3]+=n,s[4]+=o,s[5]+=f,s[6]+=g,s[7]+=S},p}();l.RawSha256=h},6277460803:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},8486874086:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=d(6762251298);u.__exportStar(d(7700746202),l)},7700746202:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=d(6762251298),h=d(6277460803),p=d(7618469943),m=d(5604890277),a=function(){function i(e){if(this.hash=new p.RawSha256,e){this.outer=new p.RawSha256;var t=s(e),n=new Uint8Array(h.BLOCK_SIZE);n.set(t);for(var o=0;o<h.BLOCK_SIZE;o++)t[o]^=54,n[o]^=92;this.hash.update(t),this.outer.update(n);for(var o=0;o<t.byteLength;o++)t[o]=0}}return r(i,"Sha2561"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},i}();l.Sha256=a;function s(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>h.BLOCK_SIZE){var t=new p.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(h.BLOCK_SIZE);return n.set(e),n}r(s,"bufferFromSecret")},8365624009:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=d(5771355735),h=typeof Buffer<"u"&&Buffer.from?function(m){return Buffer.from(m,"utf8")}:u.fromUtf8;function p(m){return m instanceof Uint8Array?m:typeof m=="string"?h(m):ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(m)}r(p,"convertToBuffer"),l.convertToBuffer=p},5604890277:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=d(8365624009);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var h=d(9192625564);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var p=d(4663873180);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return p.numToUint8}});var m=d(5579770347);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},9192625564:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function d(u){return typeof u=="string"?u.length===0:u.byteLength===0}r(d,"isEmptyData"),l.isEmptyData=d},4663873180:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function d(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}r(d,"numToUint8"),l.numToUint8=d},5579770347:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function d(u){if(!Uint32Array.from){for(var h=new Uint32Array(u.length),p=0;p<u.length;)h[p]=u[p],p+=1;return h}return Uint32Array.from(u)}r(d,"uint32ArrayFrom"),l.uint32ArrayFrom=d},3891390253:(B,l,d)=>{"use strict";const{Deflate:u,deflate:h,deflateRaw:p,gzip:m}=d(7569877914),{Inflate:a,inflate:s,inflateRaw:i,ungzip:e}=d(3759855870),t=d(4167355720);B.exports.Deflate=u,B.exports.deflate=h,B.exports.deflateRaw=p,B.exports.gzip=m,B.exports.Inflate=a,B.exports.inflate=s,B.exports.inflateRaw=i,B.exports.ungzip=e,B.exports.constants=t},7569877914:(B,l,d)=>{"use strict";const u=d(7801341470),h=d(7534353108),p=d(2462870149),m=d(9836815007),a=d(1225161799),s=Object.prototype.toString,{Z_NO_FLUSH:i,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:n,Z_OK:o,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:c}=d(4167355720);function v(T){this.options=h.assign({level:g,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},T||{});let I=this.options;I.raw&&I.windowBits>0?I.windowBits=-I.windowBits:I.gzip&&I.windowBits>0&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let O=u.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(O!==o)throw new Error(m[O]);if(I.header&&u.deflateSetHeader(this.strm,I.header),I.dictionary){let w;if(typeof I.dictionary=="string"?w=p.string2buf(I.dictionary):s.call(I.dictionary)==="[object ArrayBuffer]"?w=new Uint8Array(I.dictionary):w=I.dictionary,O=u.deflateSetDictionary(this.strm,w),O!==o)throw new Error(m[O]);this._dict_set=!0}}r(v,"Deflate"),v.prototype.push=function(T,I){const O=this.strm,w=this.options.chunkSize;let D,R;if(this.ended)return!1;for(I===~~I?R=I:R=I===!0?n:i,typeof T=="string"?O.input=p.string2buf(T):s.call(T)==="[object ArrayBuffer]"?O.input=new Uint8Array(T):O.input=T,O.next_in=0,O.avail_in=O.input.length;;){if(O.avail_out===0&&(O.output=new Uint8Array(w),O.next_out=0,O.avail_out=w),(R===e||R===t)&&O.avail_out<=6){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(D=u.deflate(O,R),D===f)return O.next_out>0&&this.onData(O.output.subarray(0,O.next_out)),D=u.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===o;if(O.avail_out===0){this.onData(O.output);continue}if(R>0&&O.next_out>0){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(O.avail_in===0)break}return!0},v.prototype.onData=function(T){this.chunks.push(T)},v.prototype.onEnd=function(T){T===o&&(this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function _(T,I){const O=new v(I);if(O.push(T,!0),O.err)throw O.msg||m[O.err];return O.result}r(_,"deflate");function E(T,I){return I=I||{},I.raw=!0,_(T,I)}r(E,"deflateRaw");function b(T,I){return I=I||{},I.gzip=!0,_(T,I)}r(b,"gzip"),B.exports.Deflate=v,B.exports.deflate=_,B.exports.deflateRaw=E,B.exports.gzip=b,B.exports.constants=d(4167355720)},3759855870:(B,l,d)=>{"use strict";const u=d(1180169834),h=d(7534353108),p=d(2462870149),m=d(9836815007),a=d(1225161799),s=d(9277415795),i=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:n,Z_STREAM_END:o,Z_NEED_DICT:f,Z_STREAM_ERROR:g,Z_DATA_ERROR:S,Z_MEM_ERROR:c}=d(4167355720);function v(b){this.options=h.assign({chunkSize:1024*64,windowBits:15,to:""},b||{});const T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(b&&b.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15||(T.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let I=u.inflateInit2(this.strm,T.windowBits);if(I!==n)throw new Error(m[I]);if(this.header=new s,u.inflateGetHeader(this.strm,this.header),T.dictionary&&(typeof T.dictionary=="string"?T.dictionary=p.string2buf(T.dictionary):i.call(T.dictionary)==="[object ArrayBuffer]"&&(T.dictionary=new Uint8Array(T.dictionary)),T.raw&&(I=u.inflateSetDictionary(this.strm,T.dictionary),I!==n)))throw new Error(m[I])}r(v,"Inflate"),v.prototype.push=function(b,T){const I=this.strm,O=this.options.chunkSize,w=this.options.dictionary;let D,R,L;if(this.ended)return!1;for(T===~~T?R=T:R=T===!0?t:e,i.call(b)==="[object ArrayBuffer]"?I.input=new Uint8Array(b):I.input=b,I.next_in=0,I.avail_in=I.input.length;;){for(I.avail_out===0&&(I.output=new Uint8Array(O),I.next_out=0,I.avail_out=O),D=u.inflate(I,R),D===f&&w&&(D=u.inflateSetDictionary(I,w),D===n?D=u.inflate(I,R):D===S&&(D=f));I.avail_in>0&&D===o&&I.state.wrap>0&&b[I.next_in]!==0;)u.inflateReset(I),D=u.inflate(I,R);switch(D){case g:case S:case f:case c:return this.onEnd(D),this.ended=!0,!1}if(L=I.avail_out,I.next_out&&(I.avail_out===0||D===o))if(this.options.to==="string"){let H=p.utf8border(I.output,I.next_out),K=I.next_out-H,ee=p.buf2string(I.output,H);I.next_out=K,I.avail_out=O-K,K&&I.output.set(I.output.subarray(H,H+K),0),this.onData(ee)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(!(D===n&&L===0)){if(D===o)return D=u.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,!0;if(I.avail_in===0)break}}return!0},v.prototype.onData=function(b){this.chunks.push(b)},v.prototype.onEnd=function(b){b===n&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};function _(b,T){const I=new v(T);if(I.push(b),I.err)throw I.msg||m[I.err];return I.result}r(_,"inflate");function E(b,T){return T=T||{},T.raw=!0,_(b,T)}r(E,"inflateRaw"),B.exports.Inflate=v,B.exports.inflate=_,B.exports.inflateRaw=E,B.exports.ungzip=_,B.exports.constants=d(4167355720)},7534353108:B=>{"use strict";const l=r((d,u)=>Object.prototype.hasOwnProperty.call(d,u),"_has");B.exports.assign=function(d){const u=Array.prototype.slice.call(arguments,1);for(;u.length;){const h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const p in h)l(h,p)&&(d[p]=h[p])}}return d},B.exports.flattenChunks=d=>{let u=0;for(let p=0,m=d.length;p<m;p++)u+=d[p].length;const h=new Uint8Array(u);for(let p=0,m=0,a=d.length;p<a;p++){let s=d[p];h.set(s,m),m+=s.length}return h}},2462870149:B=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const d=new Uint8Array(256);for(let h=0;h<256;h++)d[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;d[254]=d[254]=1,B.exports.string2buf=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let p,m,a,s,i,e=h.length,t=0;for(s=0;s<e;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),t+=m<128?1:m<2048?2:m<65536?3:4;for(p=new Uint8Array(t),i=0,s=0;i<t;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),m<128?p[i++]=m:m<2048?(p[i++]=192|m>>>6,p[i++]=128|m&63):m<65536?(p[i++]=224|m>>>12,p[i++]=128|m>>>6&63,p[i++]=128|m&63):(p[i++]=240|m>>>18,p[i++]=128|m>>>12&63,p[i++]=128|m>>>6&63,p[i++]=128|m&63);return p};const u=r((h,p)=>{if(p<65534&&h.subarray&&l)return String.fromCharCode.apply(null,h.length===p?h:h.subarray(0,p));let m="";for(let a=0;a<p;a++)m+=String.fromCharCode(h[a]);return m},"buf2binstring");B.exports.buf2string=(h,p)=>{const m=p||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,p));let a,s;const i=new Array(m*2);for(s=0,a=0;a<m;){let e=h[a++];if(e<128){i[s++]=e;continue}let t=d[e];if(t>4){i[s++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<m;)e=e<<6|h[a++]&63,t--;if(t>1){i[s++]=65533;continue}e<65536?i[s++]=e:(e-=65536,i[s++]=55296|e>>10&1023,i[s++]=56320|e&1023)}return u(i,s)},B.exports.utf8border=(h,p)=>{p=p||h.length,p>h.length&&(p=h.length);let m=p-1;for(;m>=0&&(h[m]&192)===128;)m--;return m<0||m===0?p:m+d[h[m]]>p?m:p}},3931967740:B=>{"use strict";const l=r((d,u,h,p)=>{let m=d&65535|0,a=d>>>16&65535|0,s=0;for(;h!==0;){s=h>2e3?2e3:h,h-=s;do m=m+u[p++]|0,a=a+m|0;while(--s);m%=65521,a%=65521}return m|a<<16|0},"adler32");B.exports=l},4167355720:B=>{"use strict";B.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2974422970:B=>{"use strict";const l=r(()=>{let h,p=[];for(var m=0;m<256;m++){h=m;for(var a=0;a<8;a++)h=h&1?3988292384^h>>>1:h>>>1;p[m]=h}return p},"makeTable"),d=new Uint32Array(l()),u=r((h,p,m,a)=>{const s=d,i=a+m;h^=-1;for(let e=a;e<i;e++)h=h>>>8^s[(h^p[e])&255];return h^-1},"crc32");B.exports=u},7801341470:(B,l,d)=>{"use strict";const{_tr_init:u,_tr_stored_block:h,_tr_flush_block:p,_tr_tally:m,_tr_align:a}=d(4853608024),s=d(3931967740),i=d(2974422970),e=d(9836815007),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:n,Z_FULL_FLUSH:o,Z_FINISH:f,Z_BLOCK:g,Z_OK:S,Z_STREAM_END:c,Z_STREAM_ERROR:v,Z_DATA_ERROR:_,Z_BUF_ERROR:E,Z_DEFAULT_COMPRESSION:b,Z_FILTERED:T,Z_HUFFMAN_ONLY:I,Z_RLE:O,Z_FIXED:w,Z_DEFAULT_STRATEGY:D,Z_UNKNOWN:R,Z_DEFLATED:L}=d(4167355720),H=9,K=15,ee=8,q=29,ce=256+1+q,Te=30,ke=19,tt=2*ce+1,At=15,Be=3,$e=258,Ze=$e+Be+1,Je=32,dt=42,Ot=69,Nt=73,Ve=91,He=103,ct=113,yt=666,it=1,nn=2,Xt=3,dn=4,bn=3,Rn=r((F,Oe)=>(F.msg=e[Oe],Oe),"err"),Zt=r(F=>(F<<1)-(F>4?9:0),"rank"),Mn=r(F=>{let Oe=F.length;for(;--Oe>=0;)F[Oe]=0},"zero");let Jn=r((F,Oe,se)=>(Oe<<F.hash_shift^se)&F.hash_mask,"HASH_ZLIB");const zn=r(F=>{const Oe=F.state;let se=Oe.pending;se>F.avail_out&&(se=F.avail_out),se!==0&&(F.output.set(Oe.pending_buf.subarray(Oe.pending_out,Oe.pending_out+se),F.next_out),F.next_out+=se,Oe.pending_out+=se,F.total_out+=se,F.avail_out-=se,Oe.pending-=se,Oe.pending===0&&(Oe.pending_out=0))},"flush_pending"),En=r((F,Oe)=>{p(F,F.block_start>=0?F.block_start:-1,F.strstart-F.block_start,Oe),F.block_start=F.strstart,zn(F.strm)},"flush_block_only"),sn=r((F,Oe)=>{F.pending_buf[F.pending++]=Oe},"put_byte"),oi=r((F,Oe)=>{F.pending_buf[F.pending++]=Oe>>>8&255,F.pending_buf[F.pending++]=Oe&255},"putShortMSB"),rn=r((F,Oe,se,ue)=>{let X=F.avail_in;return X>ue&&(X=ue),X===0?0:(F.avail_in-=X,Oe.set(F.input.subarray(F.next_in,F.next_in+X),se),F.state.wrap===1?F.adler=s(F.adler,Oe,X,se):F.state.wrap===2&&(F.adler=i(F.adler,Oe,X,se)),F.next_in+=X,F.total_in+=X,X)},"read_buf"),cn=r((F,Oe)=>{let se=F.max_chain_length,ue=F.strstart,X,lt,Ae=F.prev_length,Ye=F.nice_match;const Ht=F.strstart>F.w_size-Ze?F.strstart-(F.w_size-Ze):0,Mt=F.window,Qn=F.w_mask,$n=F.prev,Vn=F.strstart+$e;let kn=Mt[ue+Ae-1],tn=Mt[ue+Ae];F.prev_length>=F.good_match&&(se>>=2),Ye>F.lookahead&&(Ye=F.lookahead);do if(X=Oe,!(Mt[X+Ae]!==tn||Mt[X+Ae-1]!==kn||Mt[X]!==Mt[ue]||Mt[++X]!==Mt[ue+1])){ue+=2,X++;do;while(Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&Mt[++ue]===Mt[++X]&&ue<Vn);if(lt=$e-(Vn-ue),ue=Vn-$e,lt>Ae){if(F.match_start=Oe,Ae=lt,lt>=Ye)break;kn=Mt[ue+Ae-1],tn=Mt[ue+Ae]}}while((Oe=$n[Oe&Qn])>Ht&&--se!==0);return Ae<=F.lookahead?Ae:F.lookahead},"longest_match"),Wt=r(F=>{const Oe=F.w_size;let se,ue,X,lt,Ae;do{if(lt=F.window_size-F.lookahead-F.strstart,F.strstart>=Oe+(Oe-Ze)){F.window.set(F.window.subarray(Oe,Oe+Oe),0),F.match_start-=Oe,F.strstart-=Oe,F.block_start-=Oe,ue=F.hash_size,se=ue;do X=F.head[--se],F.head[se]=X>=Oe?X-Oe:0;while(--ue);ue=Oe,se=ue;do X=F.prev[--se],F.prev[se]=X>=Oe?X-Oe:0;while(--ue);lt+=Oe}if(F.strm.avail_in===0)break;if(ue=rn(F.strm,F.window,F.strstart+F.lookahead,lt),F.lookahead+=ue,F.lookahead+F.insert>=Be)for(Ae=F.strstart-F.insert,F.ins_h=F.window[Ae],F.ins_h=Jn(F,F.ins_h,F.window[Ae+1]);F.insert&&(F.ins_h=Jn(F,F.ins_h,F.window[Ae+Be-1]),F.prev[Ae&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=Ae,Ae++,F.insert--,!(F.lookahead+F.insert<Be)););}while(F.lookahead<Ze&&F.strm.avail_in!==0)},"fill_window"),J=r((F,Oe)=>{let se=65535;for(se>F.pending_buf_size-5&&(se=F.pending_buf_size-5);;){if(F.lookahead<=1){if(Wt(F),F.lookahead===0&&Oe===t)return it;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;const ue=F.block_start+se;if((F.strstart===0||F.strstart>=ue)&&(F.lookahead=F.strstart-ue,F.strstart=ue,En(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-Ze&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=0,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):(F.strstart>F.block_start&&(En(F,!1),F.strm.avail_out===0),it)},"deflate_stored"),Xe=r((F,Oe)=>{let se,ue;for(;;){if(F.lookahead<Ze){if(Wt(F),F.lookahead<Ze&&Oe===t)return it;if(F.lookahead===0)break}if(se=0,F.lookahead>=Be&&(F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),se!==0&&F.strstart-se<=F.w_size-Ze&&(F.match_length=cn(F,se)),F.match_length>=Be)if(ue=m(F,F.strstart-F.match_start,F.match_length-Be),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=Be){F.match_length--;do F.strstart++,F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart;while(--F.match_length!==0);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+1]);else ue=m(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(ue&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=F.strstart<Be-1?F.strstart:Be-1,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_fast"),nt=r((F,Oe)=>{let se,ue,X;for(;;){if(F.lookahead<Ze){if(Wt(F),F.lookahead<Ze&&Oe===t)return it;if(F.lookahead===0)break}if(se=0,F.lookahead>=Be&&(F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=Be-1,se!==0&&F.prev_length<F.max_lazy_match&&F.strstart-se<=F.w_size-Ze&&(F.match_length=cn(F,se),F.match_length<=5&&(F.strategy===T||F.match_length===Be&&F.strstart-F.match_start>4096)&&(F.match_length=Be-1)),F.prev_length>=Be&&F.match_length<=F.prev_length){X=F.strstart+F.lookahead-Be,ue=m(F,F.strstart-1-F.prev_match,F.prev_length-Be),F.lookahead-=F.prev_length-1,F.prev_length-=2;do++F.strstart<=X&&(F.ins_h=Jn(F,F.ins_h,F.window[F.strstart+Be-1]),se=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart);while(--F.prev_length!==0);if(F.match_available=0,F.match_length=Be-1,F.strstart++,ue&&(En(F,!1),F.strm.avail_out===0))return it}else if(F.match_available){if(ue=m(F,0,F.window[F.strstart-1]),ue&&En(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return it}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(ue=m(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<Be-1?F.strstart:Be-1,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_slow"),st=r((F,Oe)=>{let se,ue,X,lt;const Ae=F.window;for(;;){if(F.lookahead<=$e){if(Wt(F),F.lookahead<=$e&&Oe===t)return it;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=Be&&F.strstart>0&&(X=F.strstart-1,ue=Ae[X],ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X])){lt=F.strstart+$e;do;while(ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&ue===Ae[++X]&&X<lt);F.match_length=$e-(lt-X),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=Be?(se=m(F,1,F.match_length-Be),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(se=m(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),se&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=0,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_rle"),pt=r((F,Oe)=>{let se;for(;;){if(F.lookahead===0&&(Wt(F),F.lookahead===0)){if(Oe===t)return it;break}if(F.match_length=0,se=m(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,se&&(En(F,!1),F.strm.avail_out===0))return it}return F.insert=0,Oe===f?(En(F,!0),F.strm.avail_out===0?Xt:dn):F.last_lit&&(En(F,!1),F.strm.avail_out===0)?it:nn},"deflate_huff");function It(F,Oe,se,ue,X){this.good_length=F,this.max_lazy=Oe,this.nice_length=se,this.max_chain=ue,this.func=X}r(It,"Config");const ve=[new It(0,0,0,0,J),new It(4,4,8,4,Xe),new It(4,5,16,8,Xe),new It(4,6,32,32,Xe),new It(4,4,16,16,nt),new It(8,16,32,32,nt),new It(8,16,128,128,nt),new It(8,32,128,256,nt),new It(32,128,258,1024,nt),new It(32,258,258,4096,nt)],et=r(F=>{F.window_size=2*F.w_size,Mn(F.head),F.max_lazy_match=ve[F.level].max_lazy,F.good_match=ve[F.level].good_length,F.nice_match=ve[F.level].nice_length,F.max_chain_length=ve[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=Be-1,F.match_available=0,F.ins_h=0},"lm_init");function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(tt*2),this.dyn_dtree=new Uint16Array((2*Te+1)*2),this.bl_tree=new Uint16Array((2*ke+1)*2),Mn(this.dyn_ltree),Mn(this.dyn_dtree),Mn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(At+1),this.heap=new Uint16Array(2*ce+1),Mn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ce+1),Mn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}r(G,"DeflateState");const ne=r(F=>{if(!F||!F.state)return Rn(F,v);F.total_in=F.total_out=0,F.data_type=R;const Oe=F.state;return Oe.pending=0,Oe.pending_out=0,Oe.wrap<0&&(Oe.wrap=-Oe.wrap),Oe.status=Oe.wrap?dt:ct,F.adler=Oe.wrap===2?0:1,Oe.last_flush=t,u(Oe),S},"deflateResetKeep"),Me=r(F=>{const Oe=ne(F);return Oe===S&&et(F.state),Oe},"deflateReset"),Re=r((F,Oe)=>!F||!F.state||F.state.wrap!==2?v:(F.state.gzhead=Oe,S),"deflateSetHeader"),Ft=r((F,Oe,se,ue,X,lt)=>{if(!F)return v;let Ae=1;if(Oe===b&&(Oe=6),ue<0?(Ae=0,ue=-ue):ue>15&&(Ae=2,ue-=16),X<1||X>H||se!==L||ue<8||ue>15||Oe<0||Oe>9||lt<0||lt>w)return Rn(F,v);ue===8&&(ue=9);const Ye=new G;return F.state=Ye,Ye.strm=F,Ye.wrap=Ae,Ye.gzhead=null,Ye.w_bits=ue,Ye.w_size=1<<Ye.w_bits,Ye.w_mask=Ye.w_size-1,Ye.hash_bits=X+7,Ye.hash_size=1<<Ye.hash_bits,Ye.hash_mask=Ye.hash_size-1,Ye.hash_shift=~~((Ye.hash_bits+Be-1)/Be),Ye.window=new Uint8Array(Ye.w_size*2),Ye.head=new Uint16Array(Ye.hash_size),Ye.prev=new Uint16Array(Ye.w_size),Ye.lit_bufsize=1<<X+6,Ye.pending_buf_size=Ye.lit_bufsize*4,Ye.pending_buf=new Uint8Array(Ye.pending_buf_size),Ye.d_buf=1*Ye.lit_bufsize,Ye.l_buf=(1+2)*Ye.lit_bufsize,Ye.level=Oe,Ye.strategy=lt,Ye.method=se,Me(F)},"deflateInit2"),ot=r((F,Oe)=>Ft(F,Oe,L,K,ee,D),"deflateInit"),Tt=r((F,Oe)=>{let se,ue;if(!F||!F.state||Oe>g||Oe<0)return F?Rn(F,v):v;const X=F.state;if(!F.output||!F.input&&F.avail_in!==0||X.status===yt&&Oe!==f)return Rn(F,F.avail_out===0?E:v);X.strm=F;const lt=X.last_flush;if(X.last_flush=Oe,X.status===dt)if(X.wrap===2)F.adler=0,sn(X,31),sn(X,139),sn(X,8),X.gzhead?(sn(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),sn(X,X.gzhead.time&255),sn(X,X.gzhead.time>>8&255),sn(X,X.gzhead.time>>16&255),sn(X,X.gzhead.time>>24&255),sn(X,X.level===9?2:X.strategy>=I||X.level<2?4:0),sn(X,X.gzhead.os&255),X.gzhead.extra&&X.gzhead.extra.length&&(sn(X,X.gzhead.extra.length&255),sn(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(F.adler=i(F.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=Ot):(sn(X,0),sn(X,0),sn(X,0),sn(X,0),sn(X,0),sn(X,X.level===9?2:X.strategy>=I||X.level<2?4:0),sn(X,bn),X.status=ct);else{let Ae=L+(X.w_bits-8<<4)<<8,Ye=-1;X.strategy>=I||X.level<2?Ye=0:X.level<6?Ye=1:X.level===6?Ye=2:Ye=3,Ae|=Ye<<6,X.strstart!==0&&(Ae|=Je),Ae+=31-Ae%31,X.status=ct,oi(X,Ae),X.strstart!==0&&(oi(X,F.adler>>>16),oi(X,F.adler&65535)),F.adler=1}if(X.status===Ot)if(X.gzhead.extra){for(se=X.pending;X.gzindex<(X.gzhead.extra.length&65535)&&!(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),zn(F),se=X.pending,X.pending===X.pending_buf_size));)sn(X,X.gzhead.extra[X.gzindex]&255),X.gzindex++;X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=Nt)}else X.status=Nt;if(X.status===Nt)if(X.gzhead.name){se=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),zn(F),se=X.pending,X.pending===X.pending_buf_size)){ue=1;break}X.gzindex<X.gzhead.name.length?ue=X.gzhead.name.charCodeAt(X.gzindex++)&255:ue=0,sn(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),ue===0&&(X.gzindex=0,X.status=Ve)}else X.status=Ve;if(X.status===Ve)if(X.gzhead.comment){se=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),zn(F),se=X.pending,X.pending===X.pending_buf_size)){ue=1;break}X.gzindex<X.gzhead.comment.length?ue=X.gzhead.comment.charCodeAt(X.gzindex++)&255:ue=0,sn(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>se&&(F.adler=i(F.adler,X.pending_buf,X.pending-se,se)),ue===0&&(X.status=He)}else X.status=He;if(X.status===He&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&zn(F),X.pending+2<=X.pending_buf_size&&(sn(X,F.adler&255),sn(X,F.adler>>8&255),F.adler=0,X.status=ct)):X.status=ct),X.pending!==0){if(zn(F),F.avail_out===0)return X.last_flush=-1,S}else if(F.avail_in===0&&Zt(Oe)<=Zt(lt)&&Oe!==f)return Rn(F,E);if(X.status===yt&&F.avail_in!==0)return Rn(F,E);if(F.avail_in!==0||X.lookahead!==0||Oe!==t&&X.status!==yt){let Ae=X.strategy===I?pt(X,Oe):X.strategy===O?st(X,Oe):ve[X.level].func(X,Oe);if((Ae===Xt||Ae===dn)&&(X.status=yt),Ae===it||Ae===Xt)return F.avail_out===0&&(X.last_flush=-1),S;if(Ae===nn&&(Oe===n?a(X):Oe!==g&&(h(X,0,0,!1),Oe===o&&(Mn(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),zn(F),F.avail_out===0))return X.last_flush=-1,S}return Oe!==f?S:X.wrap<=0?c:(X.wrap===2?(sn(X,F.adler&255),sn(X,F.adler>>8&255),sn(X,F.adler>>16&255),sn(X,F.adler>>24&255),sn(X,F.total_in&255),sn(X,F.total_in>>8&255),sn(X,F.total_in>>16&255),sn(X,F.total_in>>24&255)):(oi(X,F.adler>>>16),oi(X,F.adler&65535)),zn(F),X.wrap>0&&(X.wrap=-X.wrap),X.pending!==0?S:c)},"deflate"),we=r(F=>{if(!F||!F.state)return v;const Oe=F.state.status;return Oe!==dt&&Oe!==Ot&&Oe!==Nt&&Oe!==Ve&&Oe!==He&&Oe!==ct&&Oe!==yt?Rn(F,v):(F.state=null,Oe===ct?Rn(F,_):S)},"deflateEnd"),Ue=r((F,Oe)=>{let se=Oe.length;if(!F||!F.state)return v;const ue=F.state,X=ue.wrap;if(X===2||X===1&&ue.status!==dt||ue.lookahead)return v;if(X===1&&(F.adler=s(F.adler,Oe,se,0)),ue.wrap=0,se>=ue.w_size){X===0&&(Mn(ue.head),ue.strstart=0,ue.block_start=0,ue.insert=0);let Ht=new Uint8Array(ue.w_size);Ht.set(Oe.subarray(se-ue.w_size,se),0),Oe=Ht,se=ue.w_size}const lt=F.avail_in,Ae=F.next_in,Ye=F.input;for(F.avail_in=se,F.next_in=0,F.input=Oe,Wt(ue);ue.lookahead>=Be;){let Ht=ue.strstart,Mt=ue.lookahead-(Be-1);do ue.ins_h=Jn(ue,ue.ins_h,ue.window[Ht+Be-1]),ue.prev[Ht&ue.w_mask]=ue.head[ue.ins_h],ue.head[ue.ins_h]=Ht,Ht++;while(--Mt);ue.strstart=Ht,ue.lookahead=Be-1,Wt(ue)}return ue.strstart+=ue.lookahead,ue.block_start=ue.strstart,ue.insert=ue.lookahead,ue.lookahead=0,ue.match_length=ue.prev_length=Be-1,ue.match_available=0,F.next_in=Ae,F.input=Ye,F.avail_in=lt,ue.wrap=X,S},"deflateSetDictionary");B.exports.deflateInit=ot,B.exports.deflateInit2=Ft,B.exports.deflateReset=Me,B.exports.deflateResetKeep=ne,B.exports.deflateSetHeader=Re,B.exports.deflate=Tt,B.exports.deflateEnd=we,B.exports.deflateSetDictionary=Ue,B.exports.deflateInfo="pako deflate (from Nodeca project)"},9277415795:B=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r(l,"GZheader"),B.exports=l},9149325604:B=>{"use strict";B.exports=r(function(h,p){let m,a,s,i,e,t,n,o,f,g,S,c,v,_,E,b,T,I,O,w,D,R,L,H;const K=h.state;m=h.next_in,L=h.input,a=m+(h.avail_in-5),s=h.next_out,H=h.output,i=s-(p-h.avail_out),e=s+(h.avail_out-257),t=K.dmax,n=K.wsize,o=K.whave,f=K.wnext,g=K.window,S=K.hold,c=K.bits,v=K.lencode,_=K.distcode,E=(1<<K.lenbits)-1,b=(1<<K.distbits)-1;e:do{c<15&&(S+=L[m++]<<c,c+=8,S+=L[m++]<<c,c+=8),T=v[S&E];t:for(;;){if(I=T>>>24,S>>>=I,c-=I,I=T>>>16&255,I===0)H[s++]=T&65535;else if(I&16){O=T&65535,I&=15,I&&(c<I&&(S+=L[m++]<<c,c+=8),O+=S&(1<<I)-1,S>>>=I,c-=I),c<15&&(S+=L[m++]<<c,c+=8,S+=L[m++]<<c,c+=8),T=_[S&b];n:for(;;){if(I=T>>>24,S>>>=I,c-=I,I=T>>>16&255,I&16){if(w=T&65535,I&=15,c<I&&(S+=L[m++]<<c,c+=8,c<I&&(S+=L[m++]<<c,c+=8)),w+=S&(1<<I)-1,w>t){h.msg="invalid distance too far back",K.mode=30;break e}if(S>>>=I,c-=I,I=s-i,w>I){if(I=w-I,I>o&&K.sane){h.msg="invalid distance too far back",K.mode=30;break e}if(D=0,R=g,f===0){if(D+=n-I,I<O){O-=I;do H[s++]=g[D++];while(--I);D=s-w,R=H}}else if(f<I){if(D+=n+f-I,I-=f,I<O){O-=I;do H[s++]=g[D++];while(--I);if(D=0,f<O){I=f,O-=I;do H[s++]=g[D++];while(--I);D=s-w,R=H}}}else if(D+=f-I,I<O){O-=I;do H[s++]=g[D++];while(--I);D=s-w,R=H}for(;O>2;)H[s++]=R[D++],H[s++]=R[D++],H[s++]=R[D++],O-=3;O&&(H[s++]=R[D++],O>1&&(H[s++]=R[D++]))}else{D=s-w;do H[s++]=H[D++],H[s++]=H[D++],H[s++]=H[D++],O-=3;while(O>2);O&&(H[s++]=H[D++],O>1&&(H[s++]=H[D++]))}}else if(I&64){h.msg="invalid distance code",K.mode=30;break e}else{T=_[(T&65535)+(S&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){K.mode=12;break e}else{h.msg="invalid literal/length code",K.mode=30;break e}else{T=v[(T&65535)+(S&(1<<I)-1)];continue t}break}}while(m<a&&s<e);O=c>>3,m-=O,c-=O<<3,S&=(1<<c)-1,h.next_in=m,h.next_out=s,h.avail_in=m<a?5+(a-m):5-(m-a),h.avail_out=s<e?257+(e-s):257-(s-e),K.hold=S,K.bits=c},"inflate_fast")},1180169834:(B,l,d)=>{"use strict";const u=d(3931967740),h=d(2974422970),p=d(9149325604),m=d(9043041083),a=0,s=1,i=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:n,Z_OK:o,Z_STREAM_END:f,Z_NEED_DICT:g,Z_STREAM_ERROR:S,Z_DATA_ERROR:c,Z_MEM_ERROR:v,Z_BUF_ERROR:_,Z_DEFLATED:E}=d(4167355720),b=1,T=2,I=3,O=4,w=5,D=6,R=7,L=8,H=9,K=10,ee=11,q=12,ae=13,ce=14,Te=15,ke=16,tt=17,At=18,Be=19,$e=20,Ze=21,Je=22,dt=23,Ot=24,Nt=25,Ve=26,He=27,ct=28,yt=29,it=30,nn=31,Xt=32,dn=852,bn=592,Zt=15,Mn=r(ve=>(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24),"zswap32");function Wi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}r(Wi,"InflateState");const Jn=r(ve=>{if(!ve||!ve.state)return S;const et=ve.state;return ve.total_in=ve.total_out=et.total=0,ve.msg="",et.wrap&&(ve.adler=et.wrap&1),et.mode=b,et.last=0,et.havedict=0,et.dmax=32768,et.head=null,et.hold=0,et.bits=0,et.lencode=et.lendyn=new Int32Array(dn),et.distcode=et.distdyn=new Int32Array(bn),et.sane=1,et.back=-1,o},"inflateResetKeep"),zn=r(ve=>{if(!ve||!ve.state)return S;const et=ve.state;return et.wsize=0,et.whave=0,et.wnext=0,Jn(ve)},"inflateReset"),En=r((ve,et)=>{let G;if(!ve||!ve.state)return S;const ne=ve.state;return et<0?(G=0,et=-et):(G=(et>>4)+1,et<48&&(et&=15)),et&&(et<8||et>15)?S:(ne.window!==null&&ne.wbits!==et&&(ne.window=null),ne.wrap=G,ne.wbits=et,zn(ve))},"inflateReset2"),sn=r((ve,et)=>{if(!ve)return S;const G=new Wi;ve.state=G,G.window=null;const ne=En(ve,et);return ne!==o&&(ve.state=null),ne},"inflateInit2"),oi=r(ve=>sn(ve,Zt),"inflateInit");let rn=!0,cn,Wt;const J=r(ve=>{if(rn){cn=new Int32Array(512),Wt=new Int32Array(32);let et=0;for(;et<144;)ve.lens[et++]=8;for(;et<256;)ve.lens[et++]=9;for(;et<280;)ve.lens[et++]=7;for(;et<288;)ve.lens[et++]=8;for(m(s,ve.lens,0,288,cn,0,ve.work,{bits:9}),et=0;et<32;)ve.lens[et++]=5;m(i,ve.lens,0,32,Wt,0,ve.work,{bits:5}),rn=!1}ve.lencode=cn,ve.lenbits=9,ve.distcode=Wt,ve.distbits=5},"fixedtables"),Xe=r((ve,et,G,ne)=>{let Me;const Re=ve.state;return Re.window===null&&(Re.wsize=1<<Re.wbits,Re.wnext=0,Re.whave=0,Re.window=new Uint8Array(Re.wsize)),ne>=Re.wsize?(Re.window.set(et.subarray(G-Re.wsize,G),0),Re.wnext=0,Re.whave=Re.wsize):(Me=Re.wsize-Re.wnext,Me>ne&&(Me=ne),Re.window.set(et.subarray(G-ne,G-ne+Me),Re.wnext),ne-=Me,ne?(Re.window.set(et.subarray(G-ne,G),0),Re.wnext=ne,Re.whave=Re.wsize):(Re.wnext+=Me,Re.wnext===Re.wsize&&(Re.wnext=0),Re.whave<Re.wsize&&(Re.whave+=Me))),0},"updatewindow"),nt=r((ve,et)=>{let G,ne,Me,Re,Ft,ot,Tt,we,Ue,F,Oe,se,ue,X,lt=0,Ae,Ye,Ht,Mt,Qn,$n,Vn,kn;const tn=new Uint8Array(4);let Gn,Si;const nr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return S;G=ve.state,G.mode===q&&(G.mode=ae),Ft=ve.next_out,Me=ve.output,Tt=ve.avail_out,Re=ve.next_in,ne=ve.input,ot=ve.avail_in,we=G.hold,Ue=G.bits,F=ot,Oe=Tt,kn=o;e:for(;;)switch(G.mode){case b:if(G.wrap===0){G.mode=ae;break}for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(G.wrap&2&&we===35615){G.check=0,tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0),we=0,Ue=0,G.mode=T;break}if(G.flags=0,G.head&&(G.head.done=!1),!(G.wrap&1)||(((we&255)<<8)+(we>>8))%31){ve.msg="incorrect header check",G.mode=it;break}if((we&15)!==E){ve.msg="unknown compression method",G.mode=it;break}if(we>>>=4,Ue-=4,Vn=(we&15)+8,G.wbits===0)G.wbits=Vn;else if(Vn>G.wbits){ve.msg="invalid window size",G.mode=it;break}G.dmax=1<<G.wbits,ve.adler=G.check=1,G.mode=we&512?K:q,we=0,Ue=0;break;case T:for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(G.flags=we,(G.flags&255)!==E){ve.msg="unknown compression method",G.mode=it;break}if(G.flags&57344){ve.msg="unknown header flags set",G.mode=it;break}G.head&&(G.head.text=we>>8&1),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0)),we=0,Ue=0,G.mode=I;case I:for(;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.head&&(G.head.time=we),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,tn[2]=we>>>16&255,tn[3]=we>>>24&255,G.check=h(G.check,tn,4,0)),we=0,Ue=0,G.mode=O;case O:for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.head&&(G.head.xflags=we&255,G.head.os=we>>8),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0)),we=0,Ue=0,G.mode=w;case w:if(G.flags&1024){for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.length=we,G.head&&(G.head.extra_len=we),G.flags&512&&(tn[0]=we&255,tn[1]=we>>>8&255,G.check=h(G.check,tn,2,0)),we=0,Ue=0}else G.head&&(G.head.extra=null);G.mode=D;case D:if(G.flags&1024&&(se=G.length,se>ot&&(se=ot),se&&(G.head&&(Vn=G.head.extra_len-G.length,G.head.extra||(G.head.extra=new Uint8Array(G.head.extra_len)),G.head.extra.set(ne.subarray(Re,Re+se),Vn)),G.flags&512&&(G.check=h(G.check,ne,se,Re)),ot-=se,Re+=se,G.length-=se),G.length))break e;G.length=0,G.mode=R;case R:if(G.flags&2048){if(ot===0)break e;se=0;do Vn=ne[Re+se++],G.head&&Vn&&G.length<65536&&(G.head.name+=String.fromCharCode(Vn));while(Vn&&se<ot);if(G.flags&512&&(G.check=h(G.check,ne,se,Re)),ot-=se,Re+=se,Vn)break e}else G.head&&(G.head.name=null);G.length=0,G.mode=L;case L:if(G.flags&4096){if(ot===0)break e;se=0;do Vn=ne[Re+se++],G.head&&Vn&&G.length<65536&&(G.head.comment+=String.fromCharCode(Vn));while(Vn&&se<ot);if(G.flags&512&&(G.check=h(G.check,ne,se,Re)),ot-=se,Re+=se,Vn)break e}else G.head&&(G.head.comment=null);G.mode=H;case H:if(G.flags&512){for(;Ue<16;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(we!==(G.check&65535)){ve.msg="header crc mismatch",G.mode=it;break}we=0,Ue=0}G.head&&(G.head.hcrc=G.flags>>9&1,G.head.done=!0),ve.adler=G.check=0,G.mode=q;break;case K:for(;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}ve.adler=G.check=Mn(we),we=0,Ue=0,G.mode=ee;case ee:if(G.havedict===0)return ve.next_out=Ft,ve.avail_out=Tt,ve.next_in=Re,ve.avail_in=ot,G.hold=we,G.bits=Ue,g;ve.adler=G.check=1,G.mode=q;case q:if(et===t||et===n)break e;case ae:if(G.last){we>>>=Ue&7,Ue-=Ue&7,G.mode=He;break}for(;Ue<3;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}switch(G.last=we&1,we>>>=1,Ue-=1,we&3){case 0:G.mode=ce;break;case 1:if(J(G),G.mode=$e,et===n){we>>>=2,Ue-=2;break e}break;case 2:G.mode=tt;break;case 3:ve.msg="invalid block type",G.mode=it}we>>>=2,Ue-=2;break;case ce:for(we>>>=Ue&7,Ue-=Ue&7;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if((we&65535)!==(we>>>16^65535)){ve.msg="invalid stored block lengths",G.mode=it;break}if(G.length=we&65535,we=0,Ue=0,G.mode=Te,et===n)break e;case Te:G.mode=ke;case ke:if(se=G.length,se){if(se>ot&&(se=ot),se>Tt&&(se=Tt),se===0)break e;Me.set(ne.subarray(Re,Re+se),Ft),ot-=se,Re+=se,Tt-=se,Ft+=se,G.length-=se;break}G.mode=q;break;case tt:for(;Ue<14;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(G.nlen=(we&31)+257,we>>>=5,Ue-=5,G.ndist=(we&31)+1,we>>>=5,Ue-=5,G.ncode=(we&15)+4,we>>>=4,Ue-=4,G.nlen>286||G.ndist>30){ve.msg="too many length or distance symbols",G.mode=it;break}G.have=0,G.mode=At;case At:for(;G.have<G.ncode;){for(;Ue<3;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.lens[nr[G.have++]]=we&7,we>>>=3,Ue-=3}for(;G.have<19;)G.lens[nr[G.have++]]=0;if(G.lencode=G.lendyn,G.lenbits=7,Gn={bits:G.lenbits},kn=m(a,G.lens,0,19,G.lencode,0,G.work,Gn),G.lenbits=Gn.bits,kn){ve.msg="invalid code lengths set",G.mode=it;break}G.have=0,G.mode=Be;case Be:for(;G.have<G.nlen+G.ndist;){for(;lt=G.lencode[we&(1<<G.lenbits)-1],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(Ht<16)we>>>=Ae,Ue-=Ae,G.lens[G.have++]=Ht;else{if(Ht===16){for(Si=Ae+2;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(we>>>=Ae,Ue-=Ae,G.have===0){ve.msg="invalid bit length repeat",G.mode=it;break}Vn=G.lens[G.have-1],se=3+(we&3),we>>>=2,Ue-=2}else if(Ht===17){for(Si=Ae+3;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Ae,Ue-=Ae,Vn=0,se=3+(we&7),we>>>=3,Ue-=3}else{for(Si=Ae+7;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Ae,Ue-=Ae,Vn=0,se=11+(we&127),we>>>=7,Ue-=7}if(G.have+se>G.nlen+G.ndist){ve.msg="invalid bit length repeat",G.mode=it;break}for(;se--;)G.lens[G.have++]=Vn}}if(G.mode===it)break;if(G.lens[256]===0){ve.msg="invalid code -- missing end-of-block",G.mode=it;break}if(G.lenbits=9,Gn={bits:G.lenbits},kn=m(s,G.lens,0,G.nlen,G.lencode,0,G.work,Gn),G.lenbits=Gn.bits,kn){ve.msg="invalid literal/lengths set",G.mode=it;break}if(G.distbits=6,G.distcode=G.distdyn,Gn={bits:G.distbits},kn=m(i,G.lens,G.nlen,G.ndist,G.distcode,0,G.work,Gn),G.distbits=Gn.bits,kn){ve.msg="invalid distances set",G.mode=it;break}if(G.mode=$e,et===n)break e;case $e:G.mode=Ze;case Ze:if(ot>=6&&Tt>=258){ve.next_out=Ft,ve.avail_out=Tt,ve.next_in=Re,ve.avail_in=ot,G.hold=we,G.bits=Ue,p(ve,Oe),Ft=ve.next_out,Me=ve.output,Tt=ve.avail_out,Re=ve.next_in,ne=ve.input,ot=ve.avail_in,we=G.hold,Ue=G.bits,G.mode===q&&(G.back=-1);break}for(G.back=0;lt=G.lencode[we&(1<<G.lenbits)-1],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(Ye&&!(Ye&240)){for(Mt=Ae,Qn=Ye,$n=Ht;lt=G.lencode[$n+((we&(1<<Mt+Qn)-1)>>Mt)],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Mt+Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Mt,Ue-=Mt,G.back+=Mt}if(we>>>=Ae,Ue-=Ae,G.back+=Ae,G.length=Ht,Ye===0){G.mode=Ve;break}if(Ye&32){G.back=-1,G.mode=q;break}if(Ye&64){ve.msg="invalid literal/length code",G.mode=it;break}G.extra=Ye&15,G.mode=Je;case Je:if(G.extra){for(Si=G.extra;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.length+=we&(1<<G.extra)-1,we>>>=G.extra,Ue-=G.extra,G.back+=G.extra}G.was=G.length,G.mode=dt;case dt:for(;lt=G.distcode[we&(1<<G.distbits)-1],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(!(Ye&240)){for(Mt=Ae,Qn=Ye,$n=Ht;lt=G.distcode[$n+((we&(1<<Mt+Qn)-1)>>Mt)],Ae=lt>>>24,Ye=lt>>>16&255,Ht=lt&65535,!(Mt+Ae<=Ue);){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}we>>>=Mt,Ue-=Mt,G.back+=Mt}if(we>>>=Ae,Ue-=Ae,G.back+=Ae,Ye&64){ve.msg="invalid distance code",G.mode=it;break}G.offset=Ht,G.extra=Ye&15,G.mode=Ot;case Ot:if(G.extra){for(Si=G.extra;Ue<Si;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}G.offset+=we&(1<<G.extra)-1,we>>>=G.extra,Ue-=G.extra,G.back+=G.extra}if(G.offset>G.dmax){ve.msg="invalid distance too far back",G.mode=it;break}G.mode=Nt;case Nt:if(Tt===0)break e;if(se=Oe-Tt,G.offset>se){if(se=G.offset-se,se>G.whave&&G.sane){ve.msg="invalid distance too far back",G.mode=it;break}se>G.wnext?(se-=G.wnext,ue=G.wsize-se):ue=G.wnext-se,se>G.length&&(se=G.length),X=G.window}else X=Me,ue=Ft-G.offset,se=G.length;se>Tt&&(se=Tt),Tt-=se,G.length-=se;do Me[Ft++]=X[ue++];while(--se);G.length===0&&(G.mode=Ze);break;case Ve:if(Tt===0)break e;Me[Ft++]=G.length,Tt--,G.mode=Ze;break;case He:if(G.wrap){for(;Ue<32;){if(ot===0)break e;ot--,we|=ne[Re++]<<Ue,Ue+=8}if(Oe-=Tt,ve.total_out+=Oe,G.total+=Oe,Oe&&(ve.adler=G.check=G.flags?h(G.check,Me,Oe,Ft-Oe):u(G.check,Me,Oe,Ft-Oe)),Oe=Tt,(G.flags?we:Mn(we))!==G.check){ve.msg="incorrect data check",G.mode=it;break}we=0,Ue=0}G.mode=ct;case ct:if(G.wrap&&G.flags){for(;Ue<32;){if(ot===0)break e;ot--,we+=ne[Re++]<<Ue,Ue+=8}if(we!==(G.total&4294967295)){ve.msg="incorrect length check",G.mode=it;break}we=0,Ue=0}G.mode=yt;case yt:kn=f;break e;case it:kn=c;break e;case nn:return v;case Xt:default:return S}return ve.next_out=Ft,ve.avail_out=Tt,ve.next_in=Re,ve.avail_in=ot,G.hold=we,G.bits=Ue,(G.wsize||Oe!==ve.avail_out&&G.mode<it&&(G.mode<He||et!==e))&&Xe(ve,ve.output,ve.next_out,Oe-ve.avail_out)?(G.mode=nn,v):(F-=ve.avail_in,Oe-=ve.avail_out,ve.total_in+=F,ve.total_out+=Oe,G.total+=Oe,G.wrap&&Oe&&(ve.adler=G.check=G.flags?h(G.check,Me,Oe,ve.next_out-Oe):u(G.check,Me,Oe,ve.next_out-Oe)),ve.data_type=G.bits+(G.last?64:0)+(G.mode===q?128:0)+(G.mode===$e||G.mode===Te?256:0),(F===0&&Oe===0||et===e)&&kn===o&&(kn=_),kn)},"inflate"),st=r(ve=>{if(!ve||!ve.state)return S;let et=ve.state;return et.window&&(et.window=null),ve.state=null,o},"inflateEnd"),pt=r((ve,et)=>{if(!ve||!ve.state)return S;const G=ve.state;return G.wrap&2?(G.head=et,et.done=!1,o):S},"inflateGetHeader"),It=r((ve,et)=>{const G=et.length;let ne,Me,Re;return!ve||!ve.state||(ne=ve.state,ne.wrap!==0&&ne.mode!==ee)?S:ne.mode===ee&&(Me=1,Me=u(Me,et,G,0),Me!==ne.check)?c:(Re=Xe(ve,et,G,G),Re?(ne.mode=nn,v):(ne.havedict=1,o))},"inflateSetDictionary");B.exports.inflateReset=zn,B.exports.inflateReset2=En,B.exports.inflateResetKeep=Jn,B.exports.inflateInit=oi,B.exports.inflateInit2=sn,B.exports.inflate=nt,B.exports.inflateEnd=st,B.exports.inflateGetHeader=pt,B.exports.inflateSetDictionary=It,B.exports.inflateInfo="pako inflate (from Nodeca project)"},9043041083:B=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=r((n,o,f,g,S,c,v,_)=>{const E=_.bits;let b=0,T=0,I=0,O=0,w=0,D=0,R=0,L=0,H=0,K=0,ee,q,ae,ce,Te,ke=null,tt=0,At;const Be=new Uint16Array(15+1),$e=new Uint16Array(15+1);let Ze=null,Je=0,dt,Ot,Nt;for(b=0;b<=15;b++)Be[b]=0;for(T=0;T<g;T++)Be[o[f+T]]++;for(w=E,O=15;O>=1&&Be[O]===0;O--);if(w>O&&(w=O),O===0)return S[c++]=1<<24|64<<16|0,S[c++]=1<<24|64<<16|0,_.bits=1,0;for(I=1;I<O&&Be[I]===0;I++);for(w<I&&(w=I),L=1,b=1;b<=15;b++)if(L<<=1,L-=Be[b],L<0)return-1;if(L>0&&(n===0||O!==1))return-1;for($e[1]=0,b=1;b<15;b++)$e[b+1]=$e[b]+Be[b];for(T=0;T<g;T++)o[f+T]!==0&&(v[$e[o[f+T]]++]=T);if(n===0?(ke=Ze=v,At=19):n===1?(ke=a,tt-=257,Ze=s,Je-=257,At=256):(ke=i,Ze=e,At=-1),K=0,T=0,b=I,Te=c,D=w,R=0,ae=-1,H=1<<w,ce=H-1,n===1&&H>852||n===2&&H>592)return 1;for(;;){dt=b-R,v[T]<At?(Ot=0,Nt=v[T]):v[T]>At?(Ot=Ze[Je+v[T]],Nt=ke[tt+v[T]]):(Ot=32+64,Nt=0),ee=1<<b-R,q=1<<D,I=q;do q-=ee,S[Te+(K>>R)+q]=dt<<24|Ot<<16|Nt|0;while(q!==0);for(ee=1<<b-1;K&ee;)ee>>=1;if(ee!==0?(K&=ee-1,K+=ee):K=0,T++,--Be[b]===0){if(b===O)break;b=o[f+v[T]]}if(b>w&&(K&ce)!==ae){for(R===0&&(R=w),Te+=I,D=b-R,L=1<<D;D+R<O&&(L-=Be[D+R],!(L<=0));)D++,L<<=1;if(H+=1<<D,n===1&&H>852||n===2&&H>592)return 1;ae=K&ce,S[ae]=w<<24|D<<16|Te-c|0}}return K!==0&&(S[Te+K]=b-R<<24|64<<16|0),_.bits=w,0},"inflate_table");B.exports=t},9836815007:B=>{"use strict";B.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4853608024:B=>{"use strict";function p(J){let Xe=J.length;for(;--Xe>=0;)J[Xe]=0}r(p,"zero");const m=0,a=1,s=2,i=3,e=258,t=29,n=256,o=n+1+t,f=30,g=19,S=2*o+1,c=15,v=16,_=7,E=256,b=16,T=17,I=18,O=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L=512,H=new Array((o+2)*2);p(H);const K=new Array(f*2);p(K);const ee=new Array(L);p(ee);const q=new Array(e-i+1);p(q);const ae=new Array(t);p(ae);const ce=new Array(f);p(ce);function Te(J,Xe,nt,st,pt){this.static_tree=J,this.extra_bits=Xe,this.extra_base=nt,this.elems=st,this.max_length=pt,this.has_stree=J&&J.length}r(Te,"StaticTreeDesc");let ke,tt,At;function Be(J,Xe){this.dyn_tree=J,this.max_code=0,this.stat_desc=Xe}r(Be,"TreeDesc");const $e=r(J=>J<256?ee[J]:ee[256+(J>>>7)],"d_code"),Ze=r((J,Xe)=>{J.pending_buf[J.pending++]=Xe&255,J.pending_buf[J.pending++]=Xe>>>8&255},"put_short"),Je=r((J,Xe,nt)=>{J.bi_valid>v-nt?(J.bi_buf|=Xe<<J.bi_valid&65535,Ze(J,J.bi_buf),J.bi_buf=Xe>>v-J.bi_valid,J.bi_valid+=nt-v):(J.bi_buf|=Xe<<J.bi_valid&65535,J.bi_valid+=nt)},"send_bits"),dt=r((J,Xe,nt)=>{Je(J,nt[Xe*2],nt[Xe*2+1])},"send_code"),Ot=r((J,Xe)=>{let nt=0;do nt|=J&1,J>>>=1,nt<<=1;while(--Xe>0);return nt>>>1},"bi_reverse"),Nt=r(J=>{J.bi_valid===16?(Ze(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8)},"bi_flush"),Ve=r((J,Xe)=>{const nt=Xe.dyn_tree,st=Xe.max_code,pt=Xe.stat_desc.static_tree,It=Xe.stat_desc.has_stree,ve=Xe.stat_desc.extra_bits,et=Xe.stat_desc.extra_base,G=Xe.stat_desc.max_length;let ne,Me,Re,Ft,ot,Tt,we=0;for(Ft=0;Ft<=c;Ft++)J.bl_count[Ft]=0;for(nt[J.heap[J.heap_max]*2+1]=0,ne=J.heap_max+1;ne<S;ne++)Me=J.heap[ne],Ft=nt[nt[Me*2+1]*2+1]+1,Ft>G&&(Ft=G,we++),nt[Me*2+1]=Ft,!(Me>st)&&(J.bl_count[Ft]++,ot=0,Me>=et&&(ot=ve[Me-et]),Tt=nt[Me*2],J.opt_len+=Tt*(Ft+ot),It&&(J.static_len+=Tt*(pt[Me*2+1]+ot)));if(we!==0){do{for(Ft=G-1;J.bl_count[Ft]===0;)Ft--;J.bl_count[Ft]--,J.bl_count[Ft+1]+=2,J.bl_count[G]--,we-=2}while(we>0);for(Ft=G;Ft!==0;Ft--)for(Me=J.bl_count[Ft];Me!==0;)Re=J.heap[--ne],!(Re>st)&&(nt[Re*2+1]!==Ft&&(J.opt_len+=(Ft-nt[Re*2+1])*nt[Re*2],nt[Re*2+1]=Ft),Me--)}},"gen_bitlen"),He=r((J,Xe,nt)=>{const st=new Array(c+1);let pt=0,It,ve;for(It=1;It<=c;It++)st[It]=pt=pt+nt[It-1]<<1;for(ve=0;ve<=Xe;ve++){let et=J[ve*2+1];et!==0&&(J[ve*2]=Ot(st[et]++,et))}},"gen_codes"),ct=r(()=>{let J,Xe,nt,st,pt;const It=new Array(c+1);for(nt=0,st=0;st<t-1;st++)for(ae[st]=nt,J=0;J<1<<O[st];J++)q[nt++]=st;for(q[nt-1]=st,pt=0,st=0;st<16;st++)for(ce[st]=pt,J=0;J<1<<w[st];J++)ee[pt++]=st;for(pt>>=7;st<f;st++)for(ce[st]=pt<<7,J=0;J<1<<w[st]-7;J++)ee[256+pt++]=st;for(Xe=0;Xe<=c;Xe++)It[Xe]=0;for(J=0;J<=143;)H[J*2+1]=8,J++,It[8]++;for(;J<=255;)H[J*2+1]=9,J++,It[9]++;for(;J<=279;)H[J*2+1]=7,J++,It[7]++;for(;J<=287;)H[J*2+1]=8,J++,It[8]++;for(He(H,o+1,It),J=0;J<f;J++)K[J*2+1]=5,K[J*2]=Ot(J,5);ke=new Te(H,O,n+1,o,c),tt=new Te(K,w,0,f,c),At=new Te(new Array(0),D,0,g,_)},"tr_static_init"),yt=r(J=>{let Xe;for(Xe=0;Xe<o;Xe++)J.dyn_ltree[Xe*2]=0;for(Xe=0;Xe<f;Xe++)J.dyn_dtree[Xe*2]=0;for(Xe=0;Xe<g;Xe++)J.bl_tree[Xe*2]=0;J.dyn_ltree[E*2]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0},"init_block"),it=r(J=>{J.bi_valid>8?Ze(J,J.bi_buf):J.bi_valid>0&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0},"bi_windup"),nn=r((J,Xe,nt,st)=>{it(J),st&&(Ze(J,nt),Ze(J,~nt)),J.pending_buf.set(J.window.subarray(Xe,Xe+nt),J.pending),J.pending+=nt},"copy_block"),Xt=r((J,Xe,nt,st)=>{const pt=Xe*2,It=nt*2;return J[pt]<J[It]||J[pt]===J[It]&&st[Xe]<=st[nt]},"smaller"),dn=r((J,Xe,nt)=>{const st=J.heap[nt];let pt=nt<<1;for(;pt<=J.heap_len&&(pt<J.heap_len&&Xt(Xe,J.heap[pt+1],J.heap[pt],J.depth)&&pt++,!Xt(Xe,st,J.heap[pt],J.depth));)J.heap[nt]=J.heap[pt],nt=pt,pt<<=1;J.heap[nt]=st},"pqdownheap"),bn=r((J,Xe,nt)=>{let st,pt,It=0,ve,et;if(J.last_lit!==0)do st=J.pending_buf[J.d_buf+It*2]<<8|J.pending_buf[J.d_buf+It*2+1],pt=J.pending_buf[J.l_buf+It],It++,st===0?dt(J,pt,Xe):(ve=q[pt],dt(J,ve+n+1,Xe),et=O[ve],et!==0&&(pt-=ae[ve],Je(J,pt,et)),st--,ve=$e(st),dt(J,ve,nt),et=w[ve],et!==0&&(st-=ce[ve],Je(J,st,et)));while(It<J.last_lit);dt(J,E,Xe)},"compress_block"),Rn=r((J,Xe)=>{const nt=Xe.dyn_tree,st=Xe.stat_desc.static_tree,pt=Xe.stat_desc.has_stree,It=Xe.stat_desc.elems;let ve,et,G=-1,ne;for(J.heap_len=0,J.heap_max=S,ve=0;ve<It;ve++)nt[ve*2]!==0?(J.heap[++J.heap_len]=G=ve,J.depth[ve]=0):nt[ve*2+1]=0;for(;J.heap_len<2;)ne=J.heap[++J.heap_len]=G<2?++G:0,nt[ne*2]=1,J.depth[ne]=0,J.opt_len--,pt&&(J.static_len-=st[ne*2+1]);for(Xe.max_code=G,ve=J.heap_len>>1;ve>=1;ve--)dn(J,nt,ve);ne=It;do ve=J.heap[1],J.heap[1]=J.heap[J.heap_len--],dn(J,nt,1),et=J.heap[1],J.heap[--J.heap_max]=ve,J.heap[--J.heap_max]=et,nt[ne*2]=nt[ve*2]+nt[et*2],J.depth[ne]=(J.depth[ve]>=J.depth[et]?J.depth[ve]:J.depth[et])+1,nt[ve*2+1]=nt[et*2+1]=ne,J.heap[1]=ne++,dn(J,nt,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],Ve(J,Xe),He(nt,G,J.bl_count)},"build_tree"),Zt=r((J,Xe,nt)=>{let st,pt=-1,It,ve=Xe[0*2+1],et=0,G=7,ne=4;for(ve===0&&(G=138,ne=3),Xe[(nt+1)*2+1]=65535,st=0;st<=nt;st++)It=ve,ve=Xe[(st+1)*2+1],!(++et<G&&It===ve)&&(et<ne?J.bl_tree[It*2]+=et:It!==0?(It!==pt&&J.bl_tree[It*2]++,J.bl_tree[b*2]++):et<=10?J.bl_tree[T*2]++:J.bl_tree[I*2]++,et=0,pt=It,ve===0?(G=138,ne=3):It===ve?(G=6,ne=3):(G=7,ne=4))},"scan_tree"),Mn=r((J,Xe,nt)=>{let st,pt=-1,It,ve=Xe[0*2+1],et=0,G=7,ne=4;for(ve===0&&(G=138,ne=3),st=0;st<=nt;st++)if(It=ve,ve=Xe[(st+1)*2+1],!(++et<G&&It===ve)){if(et<ne)do dt(J,It,J.bl_tree);while(--et!==0);else It!==0?(It!==pt&&(dt(J,It,J.bl_tree),et--),dt(J,b,J.bl_tree),Je(J,et-3,2)):et<=10?(dt(J,T,J.bl_tree),Je(J,et-3,3)):(dt(J,I,J.bl_tree),Je(J,et-11,7));et=0,pt=It,ve===0?(G=138,ne=3):It===ve?(G=6,ne=3):(G=7,ne=4)}},"send_tree"),Wi=r(J=>{let Xe;for(Zt(J,J.dyn_ltree,J.l_desc.max_code),Zt(J,J.dyn_dtree,J.d_desc.max_code),Rn(J,J.bl_desc),Xe=g-1;Xe>=3&&J.bl_tree[R[Xe]*2+1]===0;Xe--);return J.opt_len+=3*(Xe+1)+5+5+4,Xe},"build_bl_tree"),Jn=r((J,Xe,nt,st)=>{let pt;for(Je(J,Xe-257,5),Je(J,nt-1,5),Je(J,st-4,4),pt=0;pt<st;pt++)Je(J,J.bl_tree[R[pt]*2+1],3);Mn(J,J.dyn_ltree,Xe-1),Mn(J,J.dyn_dtree,nt-1)},"send_all_trees"),zn=r(J=>{let Xe=4093624447,nt;for(nt=0;nt<=31;nt++,Xe>>>=1)if(Xe&1&&J.dyn_ltree[nt*2]!==0)return 0;if(J.dyn_ltree[9*2]!==0||J.dyn_ltree[10*2]!==0||J.dyn_ltree[13*2]!==0)return 1;for(nt=32;nt<n;nt++)if(J.dyn_ltree[nt*2]!==0)return 1;return 0},"detect_data_type");let En=!1;const sn=r(J=>{En||(ct(),En=!0),J.l_desc=new Be(J.dyn_ltree,ke),J.d_desc=new Be(J.dyn_dtree,tt),J.bl_desc=new Be(J.bl_tree,At),J.bi_buf=0,J.bi_valid=0,yt(J)},"_tr_init"),oi=r((J,Xe,nt,st)=>{Je(J,(m<<1)+(st?1:0),3),nn(J,Xe,nt,!0)},"_tr_stored_block"),rn=r(J=>{Je(J,a<<1,3),dt(J,E,H),Nt(J)},"_tr_align"),cn=r((J,Xe,nt,st)=>{let pt,It,ve=0;J.level>0?(J.strm.data_type===2&&(J.strm.data_type=zn(J)),Rn(J,J.l_desc),Rn(J,J.d_desc),ve=Wi(J),pt=J.opt_len+3+7>>>3,It=J.static_len+3+7>>>3,It<=pt&&(pt=It)):pt=It=nt+5,nt+4<=pt&&Xe!==-1?oi(J,Xe,nt,st):J.strategy===4||It===pt?(Je(J,(a<<1)+(st?1:0),3),bn(J,H,K)):(Je(J,(s<<1)+(st?1:0),3),Jn(J,J.l_desc.max_code+1,J.d_desc.max_code+1,ve+1),bn(J,J.dyn_ltree,J.dyn_dtree)),yt(J),st&&it(J)},"_tr_flush_block"),Wt=r((J,Xe,nt)=>(J.pending_buf[J.d_buf+J.last_lit*2]=Xe>>>8&255,J.pending_buf[J.d_buf+J.last_lit*2+1]=Xe&255,J.pending_buf[J.l_buf+J.last_lit]=nt&255,J.last_lit++,Xe===0?J.dyn_ltree[nt*2]++:(J.matches++,Xe--,J.dyn_ltree[(q[nt]+n+1)*2]++,J.dyn_dtree[$e(Xe)*2]++),J.last_lit===J.lit_bufsize-1),"_tr_tally");B.exports._tr_init=sn,B.exports._tr_stored_block=oi,B.exports._tr_flush_block=cn,B.exports._tr_tally=Wt,B.exports._tr_align=rn},1225161799:B=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r(l,"ZStream"),B.exports=l},5942056335:(B,l,d)=>{"use strict";B.exports=d(9458259895)},9458259895:(B,l,d)=>{"use strict";var u=l;u.build="minimal",u.Writer=d(8542394336),u.BufferWriter=d(9761608223),u.Reader=d(1687958068),u.BufferReader=d(4547389651),u.util=d(9806058327),u.rpc=d(4151021050),u.roots=d(9275282040),u.configure=h;function h(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}r(h,"configure"),h()},1687958068:(B,l,d)=>{"use strict";B.exports=s;var u=d(9806058327),h,p=u.LongBits,m=u.utf8;function a(f,g){return RangeError("index out of range: "+f.pos+" + "+(g||1)+" > "+f.len)}r(a,"indexOutOfRange");function s(f){this.buf=f,this.pos=0,this.len=f.length}r(s,"Reader");var i=typeof Uint8Array<"u"?r(function(g){if(g instanceof Uint8Array||Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_typed_array"):r(function(g){if(Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_array"),e=r(function(){return u.Buffer?r(function(S){return(s.create=r(function(v){return u.Buffer.isBuffer(v)?new h(v):i(v)},"create_buffer"))(S)},"create_buffer_setup"):i},"create");s.create=e(),s.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,s.prototype.uint32=r(function(){var g=4294967295;return r(function(){if(g=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(g=(g|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return g},"read_uint32")},"read_uint32_setup")(),s.prototype.int32=r(function(){return this.uint32()|0},"read_int32"),s.prototype.sint32=r(function(){var g=this.uint32();return g>>>1^-(g&1)|0},"read_sint32");function t(){var f=new p(0,0),g=0;if(this.len-this.pos>4){for(;g<4;++g)if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f;if(f.lo=(f.lo|(this.buf[this.pos]&127)<<28)>>>0,f.hi=(f.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return f;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw a(this);if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f}return f.lo=(f.lo|(this.buf[this.pos++]&127)<<g*7)>>>0,f}if(this.len-this.pos>4){for(;g<5;++g)if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}else for(;g<5;++g){if(this.pos>=this.len)throw a(this);if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}throw Error("invalid varint encoding")}r(t,"readLongVarint"),s.prototype.bool=r(function(){return this.uint32()!==0},"read_bool");function n(f,g){return(f[g-4]|f[g-3]<<8|f[g-2]<<16|f[g-1]<<24)>>>0}r(n,"readFixed32_end"),s.prototype.fixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)},"read_fixed32"),s.prototype.sfixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new p(n(this.buf,this.pos+=4),n(this.buf,this.pos+=4))}r(o,"readFixed64"),s.prototype.float=r(function(){if(this.pos+4>this.len)throw a(this,4);var g=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},"read_float"),s.prototype.double=r(function(){if(this.pos+8>this.len)throw a(this,4);var g=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},"read_double"),s.prototype.bytes=r(function(){var g=this.uint32(),S=this.pos,c=this.pos+g;if(c>this.len)throw a(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice(S,c);if(S===c){var v=u.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,c)},"read_bytes"),s.prototype.string=r(function(){var g=this.bytes();return m.read(g,0,g.length)},"read_string"),s.prototype.skip=r(function(g){if(typeof g=="number"){if(this.pos+g>this.len)throw a(this,g);this.pos+=g}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),s.prototype.skipType=function(f){switch(f){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(f=this.uint32()&7)!==4;)this.skipType(f);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+f+" at offset "+this.pos)}return this},s._configure=function(f){h=f,s.create=e(),h._configure();var g=u.Long?"toLong":"toNumber";u.merge(s.prototype,{int64:r(function(){return t.call(this)[g](!1)},"read_int64"),uint64:r(function(){return t.call(this)[g](!0)},"read_uint64"),sint64:r(function(){return t.call(this).zzDecode()[g](!1)},"read_sint64"),fixed64:r(function(){return o.call(this)[g](!0)},"read_fixed64"),sfixed64:r(function(){return o.call(this)[g](!1)},"read_sfixed64")})}},4547389651:(B,l,d)=>{"use strict";B.exports=p;var u=d(1687958068);(p.prototype=Object.create(u.prototype)).constructor=p;var h=d(9806058327);function p(m){u.call(this,m)}r(p,"BufferReader"),p._configure=function(){h.Buffer&&(p.prototype._slice=h.Buffer.prototype.slice)},p.prototype.string=r(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),p._configure()},9275282040:B=>{"use strict";B.exports={}},4151021050:(B,l,d)=>{"use strict";var u=l;u.Service=d(1745184094)},1745184094:(B,l,d)=>{"use strict";B.exports=h;var u=d(9806058327);(h.prototype=Object.create(u.EventEmitter.prototype)).constructor=h;function h(p,m,a){if(typeof p!="function")throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=p,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(a)}r(h,"Service"),h.prototype.rpcCall=r(function p(m,a,s,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return u.asPromise(p,t,m,a,s,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,a[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),r(function(o,f){if(o)return t.emit("error",o,m),e(o);if(f===null){t.end(!0);return}if(!(f instanceof s))try{f=s[t.responseDelimited?"decodeDelimited":"decode"](f)}catch(g){return t.emit("error",g,m),e(g)}return t.emit("data",f,m),e(null,f)},"rpcCallback"))}catch(n){t.emit("error",n,m),setTimeout(function(){e(n)},0);return}},"rpcCall"),h.prototype.end=r(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},9407576002:(B,l,d)=>{"use strict";B.exports=h;var u=d(9806058327);function h(s,i){this.lo=s>>>0,this.hi=i>>>0}r(h,"LongBits");var p=h.zero=new h(0,0);p.toNumber=function(){return 0},p.zzEncode=p.zzDecode=function(){return this},p.length=function(){return 1};var m=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=r(function(i){if(i===0)return p;var e=i<0;e&&(i=-i);var t=i>>>0,n=(i-t)/4294967296>>>0;return e&&(n=~n>>>0,t=~t>>>0,++t>4294967295&&(t=0,++n>4294967295&&(n=0))),new h(t,n)},"fromNumber"),h.from=r(function(i){if(typeof i=="number")return h.fromNumber(i);if(u.isString(i))if(u.Long)i=u.Long.fromString(i);else return h.fromNumber(parseInt(i,10));return i.low||i.high?new h(i.low>>>0,i.high>>>0):p},"from"),h.prototype.toNumber=r(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=r(function(i){return u.Long?new u.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=r(function(i){return i===m?p:new h((a.call(i,0)|a.call(i,1)<<8|a.call(i,2)<<16|a.call(i,3)<<24)>>>0,(a.call(i,4)|a.call(i,5)<<8|a.call(i,6)<<16|a.call(i,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=r(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=r(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),h.prototype.zzDecode=r(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),h.prototype.length=r(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},9806058327:function(B,l,d){"use strict";var u=l;u.asPromise=d(7410930532),u.base64=d(3824736026),u.EventEmitter=d(6627060659),u.float=d(6797650127),u.inquire=d(7693203422),u.utf8=d(4612067386),u.pool=d(3002561995),u.LongBits=d(9407576002),u.isNode=Boolean(typeof d.g<"u"&&d.g&&d.g.process&&d.g.process.versions&&d.g.process.versions.node),u.global=u.isNode&&d.g||typeof window<"u"&&window||typeof self<"u"&&self||this,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||r(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),u.isString=r(function(a){return typeof a=="string"||a instanceof String},"isString"),u.isObject=r(function(a){return a&&typeof a=="object"},"isObject"),u.isset=u.isSet=r(function(a,s){var i=a[s];return i!=null&&a.hasOwnProperty(s)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1},"isSet"),u.Buffer=function(){try{var m=u.inquire("buffer").Buffer;return m.prototype.utf8Write?m:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=r(function(a){return typeof a=="number"?u.Buffer?u._Buffer_allocUnsafe(a):new u.Array(a):u.Buffer?u._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=r(function(a){return a?u.LongBits.from(a).toHash():u.LongBits.zeroHash},"longToHash"),u.longFromHash=r(function(a,s){var i=u.LongBits.fromHash(a);return u.Long?u.Long.fromBits(i.lo,i.hi,s):i.toNumber(Boolean(s))},"longFromHash");function h(m,a,s){for(var i=Object.keys(a),e=0;e<i.length;++e)(m[i[e]]===void 0||!s)&&(m[i[e]]=a[i[e]]);return m}r(h,"merge"),u.merge=h,u.lcFirst=r(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function p(m){function a(s,i){if(!(this instanceof a))return new a(s,i);Object.defineProperty(this,"message",{get:function(){return s}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&h(this,i)}return r(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:r(function(){return m},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:r(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}r(p,"newError"),u.newError=p,u.ProtocolError=p("ProtocolError"),u.oneOfGetter=r(function(a){for(var s={},i=0;i<a.length;++i)s[a[i]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(s[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),u.oneOfSetter=r(function(a){return function(s){for(var i=0;i<a.length;++i)a[i]!==s&&delete this[a[i]]}},"setOneOf"),u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var m=u.Buffer;if(!m){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=m.from!==Uint8Array.from&&m.from||r(function(s,i){return new m(s,i)},"Buffer_from"),u._Buffer_allocUnsafe=m.allocUnsafe||r(function(s){return new m(s)},"Buffer_allocUnsafe")}},8542394336:(B,l,d)=>{"use strict";B.exports=t;var u=d(9806058327),h,p=u.LongBits,m=u.base64,a=u.utf8;function s(_,E,b){this.fn=_,this.len=E,this.next=void 0,this.val=b}r(s,"Op");function i(){}r(i,"noop");function e(_){this.head=_.head,this.tail=_.tail,this.len=_.len,this.next=_.states}r(e,"State");function t(){this.len=0,this.head=new s(i,0,0),this.tail=this.head,this.states=null}r(t,"Writer");var n=r(function(){return u.Buffer?r(function(){return(t.create=r(function(){return new h},"create_buffer"))()},"create_buffer_setup"):r(function(){return new t},"create_array")},"create");t.create=n(),t.alloc=r(function(E){return new u.Array(E)},"alloc"),u.Array!==Array&&(t.alloc=u.pool(t.alloc,u.Array.prototype.subarray)),t.prototype._push=r(function(E,b,T){return this.tail=this.tail.next=new s(E,b,T),this.len+=b,this},"push");function o(_,E,b){E[b]=_&255}r(o,"writeByte");function f(_,E,b){for(;_>127;)E[b++]=_&127|128,_>>>=7;E[b]=_}r(f,"writeVarint32");function g(_,E){this.len=_,this.next=void 0,this.val=E}r(g,"VarintOp"),g.prototype=Object.create(s.prototype),g.prototype.fn=f,t.prototype.uint32=r(function(E){return this.len+=(this.tail=this.tail.next=new g((E=E>>>0)<128?1:E<16384?2:E<2097152?3:E<268435456?4:5,E)).len,this},"write_uint32"),t.prototype.int32=r(function(E){return E<0?this._push(S,10,p.fromNumber(E)):this.uint32(E)},"write_int32"),t.prototype.sint32=r(function(E){return this.uint32((E<<1^E>>31)>>>0)},"write_sint32");function S(_,E,b){for(;_.hi;)E[b++]=_.lo&127|128,_.lo=(_.lo>>>7|_.hi<<25)>>>0,_.hi>>>=7;for(;_.lo>127;)E[b++]=_.lo&127|128,_.lo=_.lo>>>7;E[b++]=_.lo}r(S,"writeVarint64"),t.prototype.uint64=r(function(E){var b=p.from(E);return this._push(S,b.length(),b)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=r(function(E){var b=p.from(E).zzEncode();return this._push(S,b.length(),b)},"write_sint64"),t.prototype.bool=r(function(E){return this._push(o,1,E?1:0)},"write_bool");function c(_,E,b){E[b]=_&255,E[b+1]=_>>>8&255,E[b+2]=_>>>16&255,E[b+3]=_>>>24}r(c,"writeFixed32"),t.prototype.fixed32=r(function(E){return this._push(c,4,E>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=r(function(E){var b=p.from(E);return this._push(c,4,b.lo)._push(c,4,b.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=r(function(E){return this._push(u.float.writeFloatLE,4,E)},"write_float"),t.prototype.double=r(function(E){return this._push(u.float.writeDoubleLE,8,E)},"write_double");var v=u.Array.prototype.set?r(function(E,b,T){b.set(E,T)},"writeBytes_set"):r(function(E,b,T){for(var I=0;I<E.length;++I)b[T+I]=E[I]},"writeBytes_for");t.prototype.bytes=r(function(E){var b=E.length>>>0;if(!b)return this._push(o,1,0);if(u.isString(E)){var T=t.alloc(b=m.length(E));m.decode(E,T,0),E=T}return this.uint32(b)._push(v,b,E)},"write_bytes"),t.prototype.string=r(function(E){var b=a.length(E);return b?this.uint32(b)._push(a.write,b,E):this._push(o,1,0)},"write_string"),t.prototype.fork=r(function(){return this.states=new e(this),this.head=this.tail=new s(i,0,0),this.len=0,this},"fork"),t.prototype.reset=r(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=r(function(){var E=this.head,b=this.tail,T=this.len;return this.reset().uint32(T),T&&(this.tail.next=E.next,this.tail=b,this.len+=T),this},"ldelim"),t.prototype.finish=r(function(){for(var E=this.head.next,b=this.constructor.alloc(this.len),T=0;E;)E.fn(E.val,b,T),T+=E.len,E=E.next;return b},"finish"),t._configure=function(_){h=_,t.create=n(),h._configure()}},9761608223:(B,l,d)=>{"use strict";B.exports=p;var u=d(8542394336);(p.prototype=Object.create(u.prototype)).constructor=p;var h=d(9806058327);function p(){u.call(this)}r(p,"BufferWriter"),p._configure=function(){p.alloc=h._Buffer_allocUnsafe,p.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?r(function(s,i,e){i.set(s,e)},"writeBytesBuffer_set"):r(function(s,i,e){if(s.copy)s.copy(i,e,0,s.length);else for(var t=0;t<s.length;)i[e++]=s[t++]},"writeBytesBuffer_copy")},p.prototype.bytes=r(function(s){h.isString(s)&&(s=h._Buffer_from(s,"base64"));var i=s.length>>>0;return this.uint32(i),i&&this._push(p.writeBytesBuffer,i,s),this},"write_bytes_buffer");function m(a,s,i){a.length<40?h.utf8.write(a,s,i):s.utf8Write?s.utf8Write(a,i):s.write(a,i)}r(m,"writeStringBuffer"),p.prototype.string=r(function(s){var i=h.Buffer.byteLength(s);return this.uint32(i),i&&this._push(m,i,s),this},"write_string_buffer"),p._configure()},6762251298:(B,l,d)=>{"use strict";d.r(l),d.d(l,{__assign:()=>p,__asyncDelegator:()=>E,__asyncGenerator:()=>_,__asyncValues:()=>b,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>D,__createBinding:()=>n,__decorate:()=>a,__exportStar:()=>o,__extends:()=>h,__generator:()=>t,__importDefault:()=>O,__importStar:()=>I,__makeTemplateObject:()=>T,__metadata:()=>i,__param:()=>s,__read:()=>g,__rest:()=>m,__spread:()=>S,__spreadArrays:()=>c,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=r(function(R,L){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,K){H.__proto__=K}||function(H,K){for(var ee in K)K.hasOwnProperty(ee)&&(H[ee]=K[ee])},u(R,L)},"extendStatics");function h(R,L){u(R,L);function H(){this.constructor=R}r(H,"__"),R.prototype=L===null?Object.create(L):(H.prototype=L.prototype,new H)}r(h,"__extends");var p=r(function(){return p=Object.assign||r(function(L){for(var H,K=1,ee=arguments.length;K<ee;K++){H=arguments[K];for(var q in H)Object.prototype.hasOwnProperty.call(H,q)&&(L[q]=H[q])}return L},"__assign"),p.apply(this,arguments)},"__assign");function m(R,L){var H={};for(var K in R)Object.prototype.hasOwnProperty.call(R,K)&&L.indexOf(K)<0&&(H[K]=R[K]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,K=Object.getOwnPropertySymbols(R);ee<K.length;ee++)L.indexOf(K[ee])<0&&Object.prototype.propertyIsEnumerable.call(R,K[ee])&&(H[K[ee]]=R[K[ee]]);return H}r(m,"__rest");function a(R,L,H,K){var ee=arguments.length,q=ee<3?L:K===null?K=Object.getOwnPropertyDescriptor(L,H):K,ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(R,L,H,K);else for(var ce=R.length-1;ce>=0;ce--)(ae=R[ce])&&(q=(ee<3?ae(q):ee>3?ae(L,H,q):ae(L,H))||q);return ee>3&&q&&Object.defineProperty(L,H,q),q}r(a,"__decorate");function s(R,L){return function(H,K){L(H,K,R)}}r(s,"__param");function i(R,L){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(R,L)}r(i,"__metadata");function e(R,L,H,K){function ee(q){return q instanceof H?q:new H(function(ae){ae(q)})}return r(ee,"adopt"),new(H||(H=Promise))(function(q,ae){function ce(tt){try{ke(K.next(tt))}catch(At){ae(At)}}r(ce,"fulfilled");function Te(tt){try{ke(K.throw(tt))}catch(At){ae(At)}}r(Te,"rejected");function ke(tt){tt.done?q(tt.value):ee(tt.value).then(ce,Te)}r(ke,"step"),ke((K=K.apply(R,L||[])).next())})}r(e,"__awaiter");function t(R,L){var H={label:0,sent:function(){if(q[0]&1)throw q[1];return q[1]},trys:[],ops:[]},K,ee,q,ae;return ae={next:ce(0),throw:ce(1),return:ce(2)},typeof Symbol=="function"&&(ae[Symbol.iterator]=function(){return this}),ae;function ce(ke){return function(tt){return Te([ke,tt])}}function Te(ke){if(K)throw new TypeError("Generator is already executing.");for(;H;)try{if(K=1,ee&&(q=ke[0]&2?ee.return:ke[0]?ee.throw||((q=ee.return)&&q.call(ee),0):ee.next)&&!(q=q.call(ee,ke[1])).done)return q;switch(ee=0,q&&(ke=[ke[0]&2,q.value]),ke[0]){case 0:case 1:q=ke;break;case 4:return H.label++,{value:ke[1],done:!1};case 5:H.label++,ee=ke[1],ke=[0];continue;case 7:ke=H.ops.pop(),H.trys.pop();continue;default:if(q=H.trys,!(q=q.length>0&&q[q.length-1])&&(ke[0]===6||ke[0]===2)){H=0;continue}if(ke[0]===3&&(!q||ke[1]>q[0]&&ke[1]<q[3])){H.label=ke[1];break}if(ke[0]===6&&H.label<q[1]){H.label=q[1],q=ke;break}if(q&&H.label<q[2]){H.label=q[2],H.ops.push(ke);break}q[2]&&H.ops.pop(),H.trys.pop();continue}ke=L.call(R,H)}catch(tt){ke=[6,tt],ee=0}finally{K=q=0}if(ke[0]&5)throw ke[1];return{value:ke[0]?ke[1]:void 0,done:!0}}}r(t,"__generator");function n(R,L,H,K){K===void 0&&(K=H),R[K]=L[H]}r(n,"__createBinding");function o(R,L){for(var H in R)H!=="default"&&!L.hasOwnProperty(H)&&(L[H]=R[H])}r(o,"__exportStar");function f(R){var L=typeof Symbol=="function"&&Symbol.iterator,H=L&&R[L],K=0;if(H)return H.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&K>=R.length&&(R=void 0),{value:R&&R[K++],done:!R}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}r(f,"__values");function g(R,L){var H=typeof Symbol=="function"&&R[Symbol.iterator];if(!H)return R;var K=H.call(R),ee,q=[],ae;try{for(;(L===void 0||L-- >0)&&!(ee=K.next()).done;)q.push(ee.value)}catch(ce){ae={error:ce}}finally{try{ee&&!ee.done&&(H=K.return)&&H.call(K)}finally{if(ae)throw ae.error}}return q}r(g,"__read");function S(){for(var R=[],L=0;L<arguments.length;L++)R=R.concat(g(arguments[L]));return R}r(S,"__spread");function c(){for(var R=0,L=0,H=arguments.length;L<H;L++)R+=arguments[L].length;for(var K=Array(R),ee=0,L=0;L<H;L++)for(var q=arguments[L],ae=0,ce=q.length;ae<ce;ae++,ee++)K[ee]=q[ae];return K}r(c,"__spreadArrays");function v(R){return this instanceof v?(this.v=R,this):new v(R)}r(v,"__await");function _(R,L,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K=H.apply(R,L||[]),ee,q=[];return ee={},ae("next"),ae("throw"),ae("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ae(Be){K[Be]&&(ee[Be]=function($e){return new Promise(function(Ze,Je){q.push([Be,$e,Ze,Je])>1||ce(Be,$e)})})}function ce(Be,$e){try{Te(K[Be]($e))}catch(Ze){At(q[0][3],Ze)}}function Te(Be){Be.value instanceof v?Promise.resolve(Be.value.v).then(ke,tt):At(q[0][2],Be)}function ke(Be){ce("next",Be)}function tt(Be){ce("throw",Be)}function At(Be,$e){Be($e),q.shift(),q.length&&ce(q[0][0],q[0][1])}}r(_,"__asyncGenerator");function E(R){var L,H;return L={},K("next"),K("throw",function(ee){throw ee}),K("return"),L[Symbol.iterator]=function(){return this},L;function K(ee,q){L[ee]=R[ee]?function(ae){return(H=!H)?{value:v(R[ee](ae)),done:ee==="return"}:q?q(ae):ae}:q}}r(E,"__asyncDelegator");function b(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=R[Symbol.asyncIterator],H;return L?L.call(R):(R=typeof f=="function"?f(R):R[Symbol.iterator](),H={},K("next"),K("throw"),K("return"),H[Symbol.asyncIterator]=function(){return this},H);function K(q){H[q]=R[q]&&function(ae){return new Promise(function(ce,Te){ae=R[q](ae),ee(ce,Te,ae.done,ae.value)})}}function ee(q,ae,ce,Te){Promise.resolve(Te).then(function(ke){q({value:ke,done:ce})},ae)}}r(b,"__asyncValues");function T(R,L){return Object.defineProperty?Object.defineProperty(R,"raw",{value:L}):R.raw=L,R}r(T,"__makeTemplateObject");function I(R){if(R&&R.__esModule)return R;var L={};if(R!=null)for(var H in R)Object.hasOwnProperty.call(R,H)&&(L[H]=R[H]);return L.default=R,L}r(I,"__importStar");function O(R){return R&&R.__esModule?R:{default:R}}r(O,"__importDefault");function w(R,L){if(!L.has(R))throw new TypeError("attempted to get private field on non-instance");return L.get(R)}r(w,"__classPrivateFieldGet");function D(R,L,H){if(!L.has(R))throw new TypeError("attempted to set private field on non-instance");return L.set(R,H),H}r(D,"__classPrivateFieldSet")},5961608329:function(B,l,d){var u;(function(h,p){"use strict";var m="1.0.40",a="",s="?",i="function",e="undefined",t="object",n="string",o="major",f="model",g="name",S="type",c="vendor",v="version",_="architecture",E="console",b="mobile",T="tablet",I="smarttv",O="wearable",w="embedded",D=500,R="Amazon",L="Apple",H="ASUS",K="BlackBerry",ee="Browser",q="Chrome",ae="Edge",ce="Firefox",Te="Google",ke="Huawei",tt="LG",At="Microsoft",Be="Motorola",$e="Opera",Ze="Samsung",Je="Sharp",dt="Sony",Ot="Xiaomi",Nt="Zebra",Ve="Facebook",He="Chromium OS",ct="Mac OS",yt=" Browser",it=r(function(rn,cn){var Wt={};for(var J in rn)cn[J]&&cn[J].length%2===0?Wt[J]=cn[J].concat(rn[J]):Wt[J]=rn[J];return Wt},"extend"),nn=r(function(rn){for(var cn={},Wt=0;Wt<rn.length;Wt++)cn[rn[Wt].toUpperCase()]=rn[Wt];return cn},"enumerize"),Xt=r(function(rn,cn){return typeof rn===n?dn(cn).indexOf(dn(rn))!==-1:!1},"has"),dn=r(function(rn){return rn.toLowerCase()},"lowerize"),bn=r(function(rn){return typeof rn===n?rn.replace(/[^\d\.]/g,a).split(".")[0]:p},"majorize"),Rn=r(function(rn,cn){if(typeof rn===n)return rn=rn.replace(/^\s\s*/,a),typeof cn===e?rn:rn.substring(0,D)},"trim"),Zt=r(function(rn,cn){for(var Wt=0,J,Xe,nt,st,pt,It;Wt<cn.length&&!pt;){var ve=cn[Wt],et=cn[Wt+1];for(J=Xe=0;J<ve.length&&!pt&&ve[J];)if(pt=ve[J++].exec(rn),pt)for(nt=0;nt<et.length;nt++)It=pt[++Xe],st=et[nt],typeof st===t&&st.length>0?st.length===2?typeof st[1]==i?this[st[0]]=st[1].call(this,It):this[st[0]]=st[1]:st.length===3?typeof st[1]===i&&!(st[1].exec&&st[1].test)?this[st[0]]=It?st[1].call(this,It,st[2]):p:this[st[0]]=It?It.replace(st[1],st[2]):p:st.length===4&&(this[st[0]]=It?st[3].call(this,It.replace(st[1],st[2])):p):this[st]=It||p;Wt+=2}},"rgxMapper"),Mn=r(function(rn,cn){for(var Wt in cn)if(typeof cn[Wt]===t&&cn[Wt].length>0){for(var J=0;J<cn[Wt].length;J++)if(Xt(cn[Wt][J],rn))return Wt===s?p:Wt}else if(Xt(cn[Wt],rn))return Wt===s?p:Wt;return cn.hasOwnProperty("*")?cn["*"]:rn},"strMapper"),Wi={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Jn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},zn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,$e+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[g,$e+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[g,$e]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[g,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[g,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[g,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+ee]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[g,"Smart Lenovo "+ee]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+ee],v],[/\bfocus\/([\w\.]+)/i],[v,[g,ce+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,$e+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,$e+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI"+yt]],[/fxios\/([\w\.-]+)/i],[v,[g,ce]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[g,"360"]],[/\b(qq)\/([\w\.]+)/i],[[g,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1"+yt],v],[/samsungbrowser\/([\w\.]+)/i],[v,[g,Ze+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[g,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[g],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Ve],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,q+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,q+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+ee]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,Mn,Wi]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[g,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,ce+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[g,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,dn]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,a,dn]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,dn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[c,Ze],[S,T]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[f,[c,Ze],[S,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[c,L],[S,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[c,L],[S,T]],[/(macintosh);/i],[f,[c,L]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[c,Je],[S,b]],[/(?:honor)([-\w ]+)[;\)]/i],[f,[c,"Honor"],[S,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[c,ke],[S,T]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[c,ke],[S,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[f,/_/g," "],[c,Ot],[S,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[c,Ot],[S,T]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[c,"OPPO"],[S,b]],[/\b(opd2\d{3}a?) bui/i],[f,[c,"OPPO"],[S,T]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[c,"Vivo"],[S,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[c,"Realme"],[S,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[c,Be],[S,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[c,Be],[S,T]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[c,tt],[S,T]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[c,tt],[S,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[c,"Lenovo"],[S,T]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[c,"Nokia"],[S,b]],[/(pixel c)\b/i],[f,[c,Te],[S,T]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[c,Te],[S,b]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[c,dt],[S,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[c,dt],[S,T]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[c,"OnePlus"],[S,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[c,R],[S,T]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[c,R],[S,b]],[/(playbook);[-\w\),; ]+(rim)/i],[f,c,[S,T]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[c,K],[S,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[c,H],[S,T]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[c,H],[S,b]],[/(nexus 9)/i],[f,[c,"HTC"],[S,T]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[f,/_/g," "],[S,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[f,[c,"TCL"],[S,T]],[/(itel) ((\w+))/i],[[c,dn],f,[S,Mn,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[c,"Acer"],[S,T]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[c,"Meizu"],[S,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[c,"Ulefone"],[S,b]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[f,[c,"Energizer"],[S,b]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[f,[c,"Cat"],[S,b]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[f,[c,"Smartfren"],[S,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[f,[c,"Nothing"],[S,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,f,[S,b]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,f,[S,T]],[/(surface duo)/i],[f,[c,At],[S,T]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[c,"Fairphone"],[S,b]],[/(u304aa)/i],[f,[c,"AT&T"],[S,b]],[/\bsie-(\w*)/i],[f,[c,"Siemens"],[S,b]],[/\b(rct\w+) b/i],[f,[c,"RCA"],[S,T]],[/\b(venue[\d ]{2,7}) b/i],[f,[c,"Dell"],[S,T]],[/\b(q(?:mv|ta)\w+) b/i],[f,[c,"Verizon"],[S,T]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[c,"Barnes & Noble"],[S,T]],[/\b(tm\d{3}\w+) b/i],[f,[c,"NuVision"],[S,T]],[/\b(k88) b/i],[f,[c,"ZTE"],[S,T]],[/\b(nx\d{3}j) b/i],[f,[c,"ZTE"],[S,b]],[/\b(gen\d{3}) b.+49h/i],[f,[c,"Swiss"],[S,b]],[/\b(zur\d{3}) b/i],[f,[c,"Swiss"],[S,T]],[/\b((zeki)?tb.*\b) b/i],[f,[c,"Zeki"],[S,T]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],f,[S,T]],[/\b(ns-?\w{0,9}) b/i],[f,[c,"Insignia"],[S,T]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[c,"NextBook"],[S,T]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],f,[S,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],f,[S,b]],[/\b(ph-1) /i],[f,[c,"Essential"],[S,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[c,"Envizen"],[S,T]],[/\b(trio[-\w\. ]+) b/i],[f,[c,"MachSpeed"],[S,T]],[/\btu_(1491) b/i],[f,[c,"Rotor"],[S,T]],[/(shield[\w ]+) b/i],[f,[c,"Nvidia"],[S,T]],[/(sprint) (\w+)/i],[c,f,[S,b]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[c,At],[S,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[c,Nt],[S,T]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[c,Nt],[S,b]],[/smart-tv.+(samsung)/i],[c,[S,I]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[c,Ze],[S,I]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,tt],[S,I]],[/(apple) ?tv/i],[c,[f,L+" TV"],[S,I]],[/crkey/i],[[f,q+"cast"],[c,Te],[S,I]],[/droid.+aft(\w+)( bui|\))/i],[f,[c,R],[S,I]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[c,Je],[S,I]],[/(bravia[\w ]+)( bui|\))/i],[f,[c,dt],[S,I]],[/(mitv-\w{5}) bui/i],[f,[c,Ot],[S,I]],[/Hbbtv.*(technisat) (.*);/i],[c,f,[S,I]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[c,Rn],[f,Rn],[S,I]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,I]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,f,[S,E]],[/droid.+; (shield) bui/i],[f,[c,"Nvidia"],[S,E]],[/(playstation [345portablevi]+)/i],[f,[c,dt],[S,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[c,At],[S,E]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[f,[c,Ze],[S,O]],[/((pebble))app/i],[c,f,[S,O]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[c,L],[S,O]],[/droid.+; (glass) \d/i],[f,[c,Te],[S,O]],[/droid.+; (wt63?0{2,3})\)/i],[f,[c,Nt],[S,O]],[/droid.+; (glass) \d/i],[f,[c,Te],[S,O]],[/(pico) (4|neo3(?: link|pro)?)/i],[c,f,[S,O]],[/; (quest( \d| pro)?)/i],[f,[c,Ve],[S,O]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[S,w]],[/(aeobc)\b/i],[f,[c,R],[S,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[S,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[S,T]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,T]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,b]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,ae+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[g,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[v,Mn,Jn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,Mn,Jn],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,ct],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,K]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,ce+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[g,q+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,He],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,v]]},En=r(function(rn,cn){if(typeof rn===t&&(cn=rn,rn=p),!(this instanceof En))return new En(rn,cn).getResult();var Wt=typeof h!==e&&h.navigator?h.navigator:p,J=rn||(Wt&&Wt.userAgent?Wt.userAgent:a),Xe=Wt&&Wt.userAgentData?Wt.userAgentData:p,nt=cn?it(zn,cn):zn,st=Wt&&Wt.userAgent==J;return this.getBrowser=function(){var pt={};return pt[g]=p,pt[v]=p,Zt.call(pt,J,nt.browser),pt[o]=bn(pt[v]),st&&Wt&&Wt.brave&&typeof Wt.brave.isBrave==i&&(pt[g]="Brave"),pt},this.getCPU=function(){var pt={};return pt[_]=p,Zt.call(pt,J,nt.cpu),pt},this.getDevice=function(){var pt={};return pt[c]=p,pt[f]=p,pt[S]=p,Zt.call(pt,J,nt.device),st&&!pt[S]&&Xe&&Xe.mobile&&(pt[S]=b),st&&pt[f]=="Macintosh"&&Wt&&typeof Wt.standalone!==e&&Wt.maxTouchPoints&&Wt.maxTouchPoints>2&&(pt[f]="iPad",pt[S]=T),pt},this.getEngine=function(){var pt={};return pt[g]=p,pt[v]=p,Zt.call(pt,J,nt.engine),pt},this.getOS=function(){var pt={};return pt[g]=p,pt[v]=p,Zt.call(pt,J,nt.os),st&&!pt[g]&&Xe&&Xe.platform&&Xe.platform!="Unknown"&&(pt[g]=Xe.platform.replace(/chrome os/i,He).replace(/macos/i,ct)),pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return J},this.setUA=function(pt){return J=typeof pt===n&&pt.length>D?Rn(pt,D):pt,this},this.setUA(J),this},"UAParser");En.VERSION=m,En.BROWSER=nn([g,v,o]),En.CPU=nn([_]),En.DEVICE=nn([f,c,S,E,b,I,T,O,w]),En.ENGINE=En.OS=nn([g,v]),typeof l!==e?(e!=="object"&&B.exports&&(l=B.exports=En),l.UAParser=En):i==="function"&&d.amdO?(u=function(){return En}.call(l,d,l,B),u!==p&&(B.exports=u)):typeof h!==e&&(h.UAParser=En);var sn=typeof h!==e&&(h.jQuery||h.Zepto);if(sn&&!sn.ua){var oi=new En;sn.ua=oi.getResult(),sn.ua.get=function(){return oi.getUA()},sn.ua.set=function(rn){oi.setUA(rn);var cn=oi.getResult();for(var Wt in cn)sn.ua[Wt]=cn[Wt]}}})(typeof window=="object"?window:this)},5828775116:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var u=!0;function h(m,a){if(!u){if(m)return;var s="Warning: "+a;typeof console<"u"&&console.warn(s);try{throw Error(s)}catch{}}}r(h,"warning");const p=h},7229287800:B=>{B.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.662.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-chime-sdk-messaging","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.662.0","@aws-sdk/client-sts":"3.662.0","@aws-sdk/core":"3.662.0","@aws-sdk/credential-provider-node":"3.662.0","@aws-sdk/middleware-host-header":"3.662.0","@aws-sdk/middleware-logger":"3.662.0","@aws-sdk/middleware-recursion-detection":"3.662.0","@aws-sdk/middleware-user-agent":"3.662.0","@aws-sdk/region-config-resolver":"3.662.0","@aws-sdk/types":"3.662.0","@aws-sdk/util-endpoints":"3.662.0","@aws-sdk/util-user-agent-browser":"3.662.0","@aws-sdk/util-user-agent-node":"3.662.0","@smithy/config-resolver":"^3.0.9","@smithy/core":"^2.4.7","@smithy/fetch-http-handler":"^3.2.9","@smithy/hash-node":"^3.0.7","@smithy/invalid-dependency":"^3.0.7","@smithy/middleware-content-length":"^3.0.9","@smithy/middleware-endpoint":"^3.1.4","@smithy/middleware-retry":"^3.0.22","@smithy/middleware-serde":"^3.0.7","@smithy/middleware-stack":"^3.0.7","@smithy/node-config-provider":"^3.1.8","@smithy/node-http-handler":"^3.2.4","@smithy/protocol-http":"^4.1.4","@smithy/smithy-client":"^3.3.6","@smithy/types":"^3.5.0","@smithy/url-parser":"^3.0.7","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.22","@smithy/util-defaults-mode-node":"^3.0.22","@smithy/util-endpoints":"^2.1.3","@smithy/util-middleware":"^3.0.7","@smithy/util-retry":"^3.0.7","@smithy/util-utf8":"^3.0.0","tslib":"^2.6.2","uuid":"^9.0.1"},"devDependencies":{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96","@types/uuid":"^9.0.4","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typescript":"~4.9.5"},"engines":{"node":">=16.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},1209174152:B=>{B.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},6439564264:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=d(4116706745),h=d(7577999880);function p(a,s){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=void 0}r(p,"LodashWrapper"),p.prototype=(0,u.A)(h.A.prototype),p.prototype.constructor=p;const m=p},7577999880:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function u(){}r(u,"baseLodash");const h=u},3119888921:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function u(p,m){return p<m}r(u,"baseLt");const h=u},82774879:(B,l,d)=>{"use strict";d.d(l,{A:()=>s});var u=d(7269456539),h=d(14469648),p=Array.prototype,m=p.splice;function a(i,e){for(var t=i?e.length:0,n=t-1;t--;){var o=e[t];if(t==n||o!==f){var f=o;(0,h.A)(o)?m.call(i,o,1):(0,u.A)(i,o)}}return i}r(a,"basePullAt");const s=a},6258185230:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var u=d(1375914321);function h(m,a,s,i){for(var e=m.length,t=i?e:-1;(i?t--:++t<e)&&a(m[t],t,m););return s?(0,u.A)(m,i?0:t,i?t+1:e):(0,u.A)(m,i?t+1:0,i?e:t)}r(h,"baseWhile");const p=h},9622574471:(B,l,d)=>{"use strict";d.d(l,{A:()=>nr});var u=d(2236568457),h=d(2524318401),p=h.A?function(ln,jt){return h.A.set(ln,jt),ln}:u.A;const m=p;var a=d(4116706745),s=d(5797466484);function i(ln){return function(){var jt=arguments;switch(jt.length){case 0:return new ln;case 1:return new ln(jt[0]);case 2:return new ln(jt[0],jt[1]);case 3:return new ln(jt[0],jt[1],jt[2]);case 4:return new ln(jt[0],jt[1],jt[2],jt[3]);case 5:return new ln(jt[0],jt[1],jt[2],jt[3],jt[4]);case 6:return new ln(jt[0],jt[1],jt[2],jt[3],jt[4],jt[5]);case 7:return new ln(jt[0],jt[1],jt[2],jt[3],jt[4],jt[5],jt[6])}var Fn=(0,a.A)(ln.prototype),Hn=ln.apply(Fn,jt);return(0,s.A)(Hn)?Hn:Fn}}r(i,"createCtor");const e=i;var t=d(3940990596),n=1;function o(ln,jt,Fn){var Hn=jt&n,wi=e(ln);function Pi(){var ni=this&&this!==t.A&&this instanceof Pi?wi:ln;return ni.apply(Hn?Fn:this,arguments)}return r(Pi,"wrapper"),Pi}r(o,"createBind");const f=o;var g=d(4629374672),S=Math.max;function c(ln,jt,Fn,Hn){for(var wi=-1,Pi=ln.length,ni=Fn.length,Kn=-1,ji=jt.length,$i=S(Pi-ni,0),sr=Array(ji+$i),Ai=!Hn;++Kn<ji;)sr[Kn]=jt[Kn];for(;++wi<ni;)(Ai||wi<Pi)&&(sr[Fn[wi]]=ln[wi]);for(;$i--;)sr[Kn++]=ln[wi++];return sr}r(c,"composeArgs");const v=c;var _=Math.max;function E(ln,jt,Fn,Hn){for(var wi=-1,Pi=ln.length,ni=-1,Kn=Fn.length,ji=-1,$i=jt.length,sr=_(Pi-Kn,0),Ai=Array(sr+$i),Lr=!Hn;++wi<sr;)Ai[wi]=ln[wi];for(var Vi=wi;++ji<$i;)Ai[Vi+ji]=jt[ji];for(;++ni<Kn;)(Lr||wi<Pi)&&(Ai[Vi+Fn[ni]]=ln[wi++]);return Ai}r(E,"composeArgsRight");const b=E;function T(ln,jt){for(var Fn=ln.length,Hn=0;Fn--;)ln[Fn]===jt&&++Hn;return Hn}r(T,"countHolders");const I=T;var O=d(934475406),w=d(3968459270),D=(0,w.A)(m);const R=D;var L=/\{\n\/\* \[wrapped with (.+)\] \*/,H=/,? & /;function K(ln){var jt=ln.match(L);return jt?jt[1].split(H):[]}r(K,"getWrapDetails");const ee=K;var q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ae(ln,jt){var Fn=jt.length;if(!Fn)return ln;var Hn=Fn-1;return jt[Hn]=(Fn>1?"& ":"")+jt[Hn],jt=jt.join(Fn>2?", ":" "),ln.replace(q,`{
/* [wrapped with `+jt+`] */
`)}r(ae,"insertWrapDetails");const ce=ae;var Te=d(5178179588),ke=d(5614497032),tt=d(7402177396),At=1,Be=2,$e=8,Ze=16,Je=32,dt=64,Ot=128,Nt=256,Ve=512,He=[["ary",Ot],["bind",At],["bindKey",Be],["curry",$e],["curryRight",Ze],["flip",Ve],["partial",Je],["partialRight",dt],["rearg",Nt]];function ct(ln,jt){return(0,ke.A)(He,function(Fn){var Hn="_."+Fn[0];jt&Fn[1]&&!(0,tt.A)(ln,Hn)&&ln.push(Hn)}),ln.sort()}r(ct,"updateWrapDetails");const yt=ct;function it(ln,jt,Fn){var Hn=jt+"";return(0,Te.A)(ln,ce(Hn,yt(ee(Hn),Fn)))}r(it,"setWrapToString");const nn=it;var Xt=1,dn=2,bn=4,Rn=8,Zt=32,Mn=64;function Wi(ln,jt,Fn,Hn,wi,Pi,ni,Kn,ji,$i){var sr=jt&Rn,Ai=sr?ni:void 0,Lr=sr?void 0:ni,Vi=sr?Pi:void 0,Nr=sr?void 0:Pi;jt|=sr?Zt:Mn,jt&=~(sr?Mn:Zt),jt&bn||(jt&=~(Xt|dn));var _i=[ln,jt,wi,Vi,Ai,Nr,Lr,Kn,ji,$i],Ci=Fn.apply(void 0,_i);return(0,O.A)(ln)&&R(Ci,_i),Ci.placeholder=Hn,nn(Ci,ln,jt)}r(Wi,"createRecurry");const Jn=Wi;var zn=d(8708460378),En=d(4885105346),sn=d(14469648),oi=Math.min;function rn(ln,jt){for(var Fn=ln.length,Hn=oi(jt.length,Fn),wi=(0,En.A)(ln);Hn--;){var Pi=jt[Hn];ln[Hn]=(0,sn.A)(Pi,Fn)?wi[Pi]:void 0}return ln}r(rn,"reorder");const cn=rn;var Wt=d(8625772175),J=1,Xe=2,nt=8,st=16,pt=128,It=512;function ve(ln,jt,Fn,Hn,wi,Pi,ni,Kn,ji,$i){var sr=jt&pt,Ai=jt&J,Lr=jt&Xe,Vi=jt&(nt|st),Nr=jt&It,_i=Lr?void 0:e(ln);function Ci(){for(var N=arguments.length,he=Array(N),je=N;je--;)he[je]=arguments[je];if(Vi)var Rt=(0,zn.A)(Ci),Qt=I(he,Rt);if(Hn&&(he=v(he,Hn,wi,Vi)),Pi&&(he=b(he,Pi,ni,Vi)),N-=Qt,Vi&&N<$i){var An=(0,Wt.A)(he,Rt);return Jn(ln,jt,ve,Ci.placeholder,Fn,he,An,Kn,ji,$i-N)}var qn=Ai?Fn:this,Pn=Lr?qn[ln]:ln;return N=he.length,Kn?he=cn(he,Kn):Nr&&N>1&&he.reverse(),sr&&ji<N&&(he.length=ji),this&&this!==t.A&&this instanceof Ci&&(Pn=_i||e(Pn)),Pn.apply(qn,he)}return r(Ci,"wrapper"),Ci}r(ve,"createHybrid");const et=ve;function G(ln,jt,Fn){var Hn=e(ln);function wi(){for(var Pi=arguments.length,ni=Array(Pi),Kn=Pi,ji=(0,zn.A)(wi);Kn--;)ni[Kn]=arguments[Kn];var $i=Pi<3&&ni[0]!==ji&&ni[Pi-1]!==ji?[]:(0,Wt.A)(ni,ji);if(Pi-=$i.length,Pi<Fn)return Jn(ln,jt,et,wi.placeholder,void 0,ni,$i,void 0,void 0,Fn-Pi);var sr=this&&this!==t.A&&this instanceof wi?Hn:ln;return(0,g.A)(sr,this,ni)}return r(wi,"wrapper"),wi}r(G,"createCurry");const ne=G;var Me=1;function Re(ln,jt,Fn,Hn){var wi=jt&Me,Pi=e(ln);function ni(){for(var Kn=-1,ji=arguments.length,$i=-1,sr=Hn.length,Ai=Array(sr+ji),Lr=this&&this!==t.A&&this instanceof ni?Pi:ln;++$i<sr;)Ai[$i]=Hn[$i];for(;ji--;)Ai[$i++]=arguments[++Kn];return(0,g.A)(Lr,wi?Fn:this,Ai)}return r(ni,"wrapper"),ni}r(Re,"createPartial");const Ft=Re;var ot=d(1114224892),Tt="__lodash_placeholder__",we=1,Ue=2,F=4,Oe=8,se=128,ue=256,X=Math.min;function lt(ln,jt){var Fn=ln[1],Hn=jt[1],wi=Fn|Hn,Pi=wi<(we|Ue|se),ni=Hn==se&&Fn==Oe||Hn==se&&Fn==ue&&ln[7].length<=jt[8]||Hn==(se|ue)&&jt[7].length<=jt[8]&&Fn==Oe;if(!(Pi||ni))return ln;Hn&we&&(ln[2]=jt[2],wi|=Fn&we?0:F);var Kn=jt[3];if(Kn){var ji=ln[3];ln[3]=ji?v(ji,Kn,jt[4]):Kn,ln[4]=ji?(0,Wt.A)(ln[3],Tt):jt[4]}return Kn=jt[5],Kn&&(ji=ln[5],ln[5]=ji?b(ji,Kn,jt[6]):Kn,ln[6]=ji?(0,Wt.A)(ln[5],Tt):jt[6]),Kn=jt[7],Kn&&(ln[7]=Kn),Hn&se&&(ln[8]=ln[8]==null?jt[8]:X(ln[8],jt[8])),ln[9]==null&&(ln[9]=jt[9]),ln[0]=jt[0],ln[1]=wi,ln}r(lt,"mergeData");const Ae=lt;var Ye=d(4059064744),Ht="Expected a function",Mt=1,Qn=2,$n=8,Vn=16,kn=32,tn=64,Gn=Math.max;function Si(ln,jt,Fn,Hn,wi,Pi,ni,Kn){var ji=jt&Qn;if(!ji&&typeof ln!="function")throw new TypeError(Ht);var $i=Hn?Hn.length:0;if($i||(jt&=~(kn|tn),Hn=wi=void 0),ni=ni===void 0?ni:Gn((0,Ye.A)(ni),0),Kn=Kn===void 0?Kn:(0,Ye.A)(Kn),$i-=wi?wi.length:0,jt&tn){var sr=Hn,Ai=wi;Hn=wi=void 0}var Lr=ji?void 0:(0,ot.A)(ln),Vi=[ln,jt,Fn,Hn,wi,sr,Ai,Pi,ni,Kn];if(Lr&&Ae(Vi,Lr),ln=Vi[0],jt=Vi[1],Fn=Vi[2],Hn=Vi[3],wi=Vi[4],Kn=Vi[9]=Vi[9]===void 0?ji?0:ln.length:Gn(Vi[9]-$i,0),!Kn&&jt&($n|Vn)&&(jt&=~($n|Vn)),!jt||jt==Mt)var Nr=f(ln,jt,Fn);else jt==$n||jt==Vn?Nr=ne(ln,jt,Kn):(jt==kn||jt==(Mt|kn))&&!wi.length?Nr=Ft(ln,jt,Fn,Hn):Nr=et.apply(void 0,Vi);var _i=Lr?m:R;return nn(_i(Nr,Vi),ln,jt)}r(Si,"createWrap");const nr=Si},1114224892:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=d(2524318401),h=d(7715417323),p=u.A?function(a){return u.A.get(a)}:h.A;const m=p},7667421386:(B,l,d)=>{"use strict";d.d(l,{A:()=>s});var u={};const h=u;var p=Object.prototype,m=p.hasOwnProperty;function a(i){for(var e=i.name+"",t=h[e],n=m.call(h,e)?t.length:0;n--;){var o=t[n],f=o.func;if(f==null||f==i)return o.name}return e}r(a,"getFuncName");const s=a},8708460378:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function u(p){var m=p;return m.placeholder}r(u,"getHolder");const h=u},934475406:(B,l,d)=>{"use strict";d.d(l,{A:()=>b});var u=d(4116706745),h=d(7577999880),p=4294967295;function m(T){this.__wrapped__=T,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}r(m,"LazyWrapper"),m.prototype=(0,u.A)(h.A.prototype),m.prototype.constructor=m;const a=m;var s=d(1114224892),i=d(7667421386),e=d(6439564264),t=d(9746734072),n=d(1276945623),o=d(4885105346);function f(T){if(T instanceof a)return T.clone();var I=new e.A(T.__wrapped__,T.__chain__);return I.__actions__=(0,o.A)(T.__actions__),I.__index__=T.__index__,I.__values__=T.__values__,I}r(f,"wrapperClone");const g=f;var S=Object.prototype,c=S.hasOwnProperty;function v(T){if((0,n.A)(T)&&!(0,t.A)(T)&&!(T instanceof a)){if(T instanceof e.A)return T;if(c.call(T,"__wrapped__"))return g(T)}return new e.A(T)}r(v,"lodash"),v.prototype=h.A.prototype,v.prototype.constructor=v;const _=v;function E(T){var I=(0,i.A)(T),O=_[I];if(typeof O!="function"||!(I in a.prototype))return!1;if(T===O)return!0;var w=(0,s.A)(O);return!!w&&T===w[0]}r(E,"isLaziable");const b=E},2524318401:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var u=d(8672092338),h=u.A&&new u.A;const p=h},8625772175:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var u="__lodash_placeholder__";function h(m,a){for(var s=-1,i=m.length,e=0,t=[];++s<i;){var n=m[s];(n===a||n===u)&&(m[s]=u,t[e++]=s)}return t}r(h,"replaceHolders");const p=h},489015593:(B,l,d)=>{"use strict";d.d(l,{A:()=>S});var u=d(5614497032),h=d(8033247945),p=d(9046884403),m=d(9622574471),a=d(8708460378),s=d(8625772175),i=1,e=32,t=(0,p.A)(function(c,v,_){var E=i;if(_.length){var b=(0,s.A)(_,(0,a.A)(t));E|=e}return(0,m.A)(c,E,v,_,b)});t.placeholder={};const n=t;var o=d(316474953),f=d(3055495996),g=(0,o.A)(function(c,v){return(0,u.A)(v,function(_){_=(0,f.A)(_),(0,h.A)(c,_,n(c[_],c))}),c});const S=g},8424846741:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var u=d(9746734072);function h(){if(!arguments.length)return[];var m=arguments[0];return(0,u.A)(m)?m:[m]}r(h,"castArray");const p=h},3605769895:(B,l,d)=>{"use strict";d.d(l,{A:()=>s});var u=d(8033247945),h=d(1322352537),p=Object.prototype,m=p.hasOwnProperty,a=(0,h.A)(function(i,e,t){m.call(i,t)?++i[t]:(0,u.A)(i,t,1)});const s=a},9420277174:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=d(9622574471),h=8;function p(a,s,i){s=i?void 0:s;var e=(0,u.A)(a,h,void 0,void 0,void 0,void 0,void 0,s);return e.placeholder=p.placeholder,e}r(p,"curry"),p.placeholder={};const m=p},1566461842:(B,l,d)=>{"use strict";d.d(l,{A:()=>t});var u=d(4629374672),h=d(9046884403),p=d(6295853301),m=d(5797466484);function a(n,o,f,g,S,c){return(0,m.A)(n)&&(0,m.A)(o)&&(c.set(o,n),(0,p.A)(n,o,void 0,a,c),c.delete(o)),n}r(a,"customDefaultsMerge");const s=a;var i=d(1687672245),e=(0,h.A)(function(n){return n.push(void 0,s),(0,u.A)(i.A,void 0,n)});const t=e},4360875129:(B,l,d)=>{"use strict";d.d(l,{A:()=>e});var u=d(6966908974),h=d(5684627082),p=d(804366847),m=d(9046884403),a=d(4635518404),s=d(8786006583),i=(0,m.A)(function(t,n){var o=(0,s.A)(n);return(0,a.A)(o)&&(o=void 0),(0,a.A)(t)?(0,u.A)(t,(0,h.A)(n,1,a.A,!0),(0,p.A)(o,2)):[]});const e=i},2749086681:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=d(804366847),h=d(6258185230);function p(a,s){return a&&a.length?(0,h.A)(a,(0,u.A)(s,3),!0,!0):[]}r(p,"dropRightWhile");const m=p},8825197919:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=d(804366847),h=d(6258185230);function p(a,s){return a&&a.length?(0,h.A)(a,(0,u.A)(s,3),!0):[]}r(p,"dropWhile");const m=p},1041273904:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function u(p){for(var m=-1,a=p==null?0:p.length,s={};++m<a;){var i=p[m];s[i[0]]=i[1]}return s}r(u,"fromPairs");const h=u},1687672245:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=d(6295853301),h=d(9001690186),p=(0,h.A)(function(a,s,i,e){(0,u.A)(a,s,i,e)});const m=p},5729325965:(B,l,d)=>{"use strict";d.d(l,{A:()=>a});var u=d(3743429634),h=d(3119888921),p=d(2236568457);function m(s){return s&&s.length?(0,u.A)(s,p.A,h.A):void 0}r(m,"min");const a=m},4249070636:(B,l,d)=>{"use strict";d.d(l,{A:()=>a});var u=d(3743429634),h=d(804366847),p=d(3119888921);function m(s,i){return s&&s.length?(0,u.A)(s,(0,h.A)(i,2),p.A):void 0}r(m,"minBy");const a=m},3367239067:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=d(804366847),h=d(82774879);function p(a,s){var i=[];if(!(a&&a.length))return i;var e=-1,t=[],n=a.length;for(s=(0,u.A)(s,3);++e<n;){var o=a[e];s(o,e,a)&&(i.push(o),t.push(e))}return(0,h.A)(a,t),i}r(p,"remove");const m=p},1699044291:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var u=Array.prototype,h=u.reverse;function p(a){return a==null?a:h.call(a)}r(p,"reverse");const m=p},9867500491:(B,l,d)=>{"use strict";d.d(l,{A:()=>e});var u=d(7694407897),h=d(7049857535),p=d(4059064744),m=9007199254740991,a=4294967295,s=Math.min;function i(t,n){if(t=(0,p.A)(t),t<1||t>m)return[];var o=a,f=s(t,a);n=(0,h.A)(n),t-=a;for(var g=(0,u.A)(f,n);++o<t;)n(o);return g}r(i,"times");const e=i}}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/gantry-v2-vendors-client.57abd73c30c3b343b4d3.min.js.map